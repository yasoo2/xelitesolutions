import{r as a,j as t,A as Z}from"./index-DtLQcmyB.js";function tt({wsUrl:z,minimal:y}){var ve,we,ke;const ce=a.useRef(null),R=a.useRef(null),b=a.useRef(null),[g,le]=a.useState({w:1280,h:800}),B=a.useRef({w:1280,h:800}),[m,T]=a.useState("connecting"),[D,E]=a.useState(""),[f,O]=a.useState(""),[M,A]=a.useState([]),[de,S]=a.useState(""),[v,G]=a.useState("console"),[ue,K]=a.useState(!1),[pe,V]=a.useState([]),[he,Q]=a.useState([]),[xe,_]=a.useState(1),[w,ge]=a.useState(!1),[Se,je]=a.useState(!1),[ee,ye]=a.useState(!1),[Re,Ce]=a.useState(0),[Te,Je]=a.useState('{"list":{"selector":"a[href^=\\"https\\"]:not([href*=\\"google.com\\"])","fields":{"text":{"selector":"","attr":""},"url":{"selector":"","attr":"href"}}}}'),[Xe,te]=a.useState(null),[re,Ee]=a.useState(""),be=a.useRef(null),[oe,N]=a.useState(null),[$,Me]=a.useState(!0),[P,fe]=a.useState(""),[k,Ne]=a.useState(""),[L,ne]=a.useState(null),[q,He]=a.useState(""),[Y,Ze]=a.useState(""),[me,Ge]=a.useState(!0),[$e,Ke]=a.useState(!0),[Fe,Ve]=a.useState(!0),[Ie,Qe]=a.useState("أضرار التدخين"),J=a.useRef(0),X=a.useRef(null),H=a.useRef(null),W=a.useRef(0);a.useEffect(()=>{y&&(K(!1),ge(!1),_(1),ye(!1))},[y]),a.useEffect(()=>{B.current=g},[g]),a.useEffect(()=>{const e=()=>{je(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),e(),()=>document.removeEventListener("fullscreenchange",e)},[]);function se(){try{const o=new URL(z).pathname.split("/").filter(Boolean);return o[o.length-1]}catch{return""}}function ae(e){try{const o=new URL(e);return o.protocol==="ws:"&&(o.protocol="http:"),o.protocol==="wss:"&&(o.protocol="https:"),o.toString()}catch{try{const o=new URL(z);return o.protocol==="ws:"&&(o.protocol="http:"),o.protocol==="wss:"&&(o.protocol="https:"),o.search="",o.hash="",o.pathname="/",new URL(e,o.toString()).toString()}catch{return e}}}function F(e){const o=e.trim();if(!o)return"";try{return new URL(o).toString()}catch{try{return new URL(`https://${o}`).toString()}catch{return o}}}async function u(e){var s;const o=se();if(!o)return;const h=["mouseMove","click","scroll","type","press","goBack","goForward","reload","goto","screenshot"];if(b.current&&b.current.readyState===WebSocket.OPEN&&e.every(p=>h.includes(p.type))){e.forEach(l=>{var x;(x=b.current)==null||x.send(JSON.stringify({type:"action",action:l}))});const p=e.map(l=>l.type).join(", ");if(S(p),setTimeout(()=>S(""),1200),$&&e.some(l=>l.type==="press"&&l.key==="Enter")&&setTimeout(()=>U(),2e3),$&&e.some(l=>l.type==="reload")&&setTimeout(()=>U(),1500),e.some(l=>l.type==="goto"||l.type==="reload")){if(ne(null),me){const l=[];k?l.push({type:"locate",selector:k}):q&&Y&&l.push({type:"locate",role:q,roleName:Y}),l.length&&setTimeout(()=>u(l),1e3)}$&&setTimeout(()=>U(),1500)}return}try{const p=localStorage.getItem("token"),x=await(await fetch(`${Z}/tools/browser_run/execute`,{method:"POST",headers:{"Content-Type":"application/json",...p?{Authorization:`Bearer ${p}`}:{}},body:JSON.stringify({sessionId:o,actions:e})})).json();if(Array.isArray(x.artifacts)){const r=x.artifacts.map(n=>({name:n.name||n.filename||"download",href:n.href}));A(n=>[...r,...n].slice(0,5))}if(x!=null&&x.ok&&Array.isArray((s=x==null?void 0:x.output)==null?void 0:s.outputs)){const r=x.output.outputs.find(n=>n.type==="locate"&&n.boundingBox);if(r!=null&&r.boundingBox&&(ne(r.boundingBox),e.some(c=>c.type==="locate")&&$e)){const d=[...e].reverse().find(C=>C.type==="locate")||null,I=[];if(d!=null&&d.selector)I.push({type:"click",selector:d.selector});else if(d!=null&&d.role&&(d!=null&&d.roleName))I.push({type:"click",role:d.role,roleName:d.roleName});else{const C=r.boundingBox;if(C){const qe=Math.round(C.x+C.width/2),Ye=Math.round(C.y+C.height/2);I.push({type:"click",x:qe,y:Ye})}}I.length&&setTimeout(()=>u(I),250);const _e=!!(d!=null&&d.selector&&/(input|textarea)\[name=["']q["']\]/i.test(String(d.selector))),Pe=!!(d!=null&&d.roleName&&String(d.roleName).includes("بحث"));Fe&&!P.trim()&&(_e||Pe)&&setTimeout(()=>{u([{type:"waitForSelector",selector:'input[name="q"], textarea[name="q"]',timeoutMs:8e3}]),setTimeout(()=>u([{type:"type",text:Ie,delay:30}]),200),setTimeout(()=>u([{type:"press",key:"Enter"}]),300)},400)}}const j=e.map(r=>r.type).join(", ");if(S(j),setTimeout(()=>S(""),1200),e.some(r=>r.type==="goto"||r.type==="reload")&&(ne(null),me)){const r=[];if(k)r.push({type:"locate",selector:k});else if(q&&Y)r.push({type:"locate",role:q,roleName:Y});else{const n=e.find(c=>c.type==="goto");try{const c=n!=null&&n.url?new URL(n.url).hostname:"";c&&/(^|\.)(google)\./i.test(c)&&r.push({type:"locate",selector:'input[name="q"], textarea[name="q"]'})}catch{}}r.length&&setTimeout(()=>u(r),1e3)}$&&e.some(r=>r.type==="press"&&r.key==="Enter")&&setTimeout(()=>{U()},2e3),$&&e.some(r=>r.type==="goto"||r.type==="reload")&&setTimeout(()=>{U()},1500)}catch{}}async function U(){const e=se();if(e)try{const o=localStorage.getItem("token"),h=JSON.parse(Te),s=await(await fetch(`${Z}/tools/browser_extract/execute`,{method:"POST",headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{}},body:JSON.stringify({sessionId:e,schema:h})})).json();s!=null&&s.ok&&(s!=null&&s.output)?te(s.output):te(null)}catch{te(null)}}async function Be(){var h,i;const e=se(),o=(i=(h=be.current)==null?void 0:h.files)==null?void 0:i[0];if(!(!e||!o||!re))try{const s=localStorage.getItem("token"),p=new FormData;p.append("file",o),p.append("sessionId",e);const x=await(await fetch(`${Z}/files/upload`,{method:"POST",headers:{...s?{Authorization:`Bearer ${s}`}:{}},body:p})).json();if(x&&x._id){const j=`${Z}/files/${x._id}/raw`;await u([{type:"uploadFile",selector:re,fileUrl:j}])}}catch{}}a.useEffect(()=>{let e=!1;W.current=0,T("connecting"),E("");const o=()=>{X.current!=null&&(window.clearTimeout(X.current),X.current=null),H.current!=null&&(window.clearTimeout(H.current),H.current=null)},h=()=>{if(!e){o();try{if(b.current){try{b.current.close()}catch{}b.current=null}const i=new WebSocket(z);b.current=i,T(W.current>0?"reconnecting":"connecting"),H.current=window.setTimeout(()=>{try{i.readyState!==WebSocket.OPEN&&i.close()}catch{}},8e3),i.onopen=()=>{o(),!e&&(W.current=0,E(""),T("connected"))},i.onclose=s=>{if(o(),e)return;b.current=null;const p=8,l=W.current+1;if(W.current=l,l>p){T("error");const c=s!=null&&s.reason?` reason=${s.reason}`:"";E(`WebSocket closed (code=${(s==null?void 0:s.code)??"unknown"}${c})`);return}const x=Math.min(8e3,500*Math.pow(2,l-1)),j=Math.floor(Math.random()*250),r=x+j;T("reconnecting");const n=s!=null&&s.reason?` reason=${s.reason}`:"";E(`WebSocket closed (code=${(s==null?void 0:s.code)??"unknown"}${n}). retrying...`),X.current=window.setTimeout(h,r)},i.onerror=()=>{e||E("WebSocket error")},i.onmessage=s=>{var p,l,x,j;try{const r=JSON.parse(s.data);if(r.type==="stream_start"){const n={w:r.w,h:r.h};B.current=n,le(n)}if(r.type==="state"){if((p=r.viewport)!=null&&p.width&&((l=r.viewport)!=null&&l.height)){const n={w:r.viewport.width,h:r.viewport.height};B.current=n,le(n)}if(typeof r.url=="string"&&O(r.url),Array.isArray(r.downloads)){const n=r.downloads.map(c=>({name:c.filename||c.name||"download",href:ae(c.href)}));A(n.slice(-10).reverse())}Array.isArray(r.logs)&&V(r.logs.slice(-500)),Array.isArray(r.network)&&Q(r.network.slice(-500))}if(r.type==="url"&&typeof r.url=="string"&&O(r.url),r.type==="console"&&r.entry&&V(n=>[...n,r.entry].slice(-500)),r.type==="network"&&r.entry&&Q(n=>[...n,r.entry].slice(-500)),r.type==="download"&&r.download){const n=r.download,c={name:n.filename||n.name||"download",href:ae(n.href)};A(d=>[c,...d].slice(0,10))}if(r.type==="screenshot"&&r.href){const n=ae(String(r.href)),c=String(r.href).split("/").pop()||"screenshot.jpg";A(d=>[{name:c,href:n},...d].slice(0,10))}if(r.type==="cursor_move"&&N({x:r.x,y:r.y}),r.type==="cursor_click"){N({x:r.x,y:r.y});const n=document.createElement("div"),c=B.current;n.style.cssText=`
                position: absolute;
                left: ${r.x/c.w*100}%;
                top: ${r.y/c.h*100}%;
                width: 20px; height: 20px;
                background: rgba(255, 0, 0, 0.5);
                border-radius: 50%;
                transform: translate(-50%, -50%);
                pointer-events: none;
                z-index: 100;
                transition: opacity 0.5s;
              `,(j=(x=R.current)==null?void 0:x.parentElement)==null||j.appendChild(n),setTimeout(()=>n.remove(),500)}if(r.type==="action_start"){const n=r.action;let c=n.type;n.type==="goto"&&(c=`Opening ${new URL(n.url).hostname}...`),n.type==="type"&&(c="Typing..."),n.type==="click"&&(c="Clicking..."),n.type==="scroll"&&(c="Scrolling..."),n.type==="screenshot"&&(c="Capturing View..."),S(c)}if(r.type==="action_done"&&setTimeout(()=>S(""),500),r.type==="action_error"&&(S(String(r.error||"Action error")),setTimeout(()=>S(""),1500)),r.type==="frame"){if(ee)return;const n=new Image;n.onload=()=>{const c=R.current;if(!c)return;const d=B.current;c.width=d.w,c.height=d.h,c.getContext("2d").drawImage(n,0,0,d.w,d.h)},n.src="data:image/jpeg;base64,"+r.jpegBase64}}catch{}}}catch(i){T("error"),E(String((i==null?void 0:i.message)||i))}}};return h(),()=>{var i;e=!0,o();try{(i=b.current)==null||i.close()}catch{}b.current=null}},[z,Re]);function Ae(e){const o=R.current;if(!o)return;const h=o.getBoundingClientRect(),i=Math.round((e.clientX-h.left)*(g.w/h.width)),s=Math.round((e.clientY-h.top)*(g.h/h.height));u([{type:"click",x:i,y:s}]),N({x:i,y:s})}function Le(e){e.preventDefault();const o=Math.round(e.deltaY);u([{type:"scroll",deltaY:o}])}function We(e){const o=Date.now();if(o-(J.current||0)<60)return;J.current=o;const h=R.current;if(!h)return;const i=h.getBoundingClientRect(),s=Math.round((e.clientX-i.left)*(g.w/i.width)),p=Math.round((e.clientY-i.top)*(g.h/i.height));N({x:s,y:p}),u([{type:"mouseMove",x:s,y:p,steps:2}])}function Ue(e){var l;const o=R.current,h=(l=e.touches)==null?void 0:l[0];if(!o||!h)return;e.preventDefault();const i=o.getBoundingClientRect(),s=Math.round((h.clientX-i.left)*(g.w/i.width)),p=Math.round((h.clientY-i.top)*(g.h/i.height));u([{type:"click",x:s,y:p}]),N({x:s,y:p})}function ze(e){var x;const o=Date.now();if(o-(J.current||0)<60)return;J.current=o;const h=R.current,i=(x=e.touches)==null?void 0:x[0];if(!h||!i)return;e.preventDefault();const s=h.getBoundingClientRect(),p=Math.round((i.clientX-s.left)*(g.w/s.width)),l=Math.round((i.clientY-s.top)*(g.h/s.height));N({x:p,y:l}),u([{type:"mouseMove",x:p,y:l,steps:2}])}function De(){P.trim()&&(u([{type:"type",text:P,delay:30}]),fe(""))}const[ie,Oe]=a.useState(!1);return t.jsxs("div",{ref:ce,className:"agent-browser-stream",style:{display:"flex",flexDirection:"column",gap:y?0:8,position:w?"fixed":"relative",inset:w?12:void 0,zIndex:w?9999:void 0,background:w?"var(--bg-dark)":void 0,padding:w?12:void 0,borderRadius:w?16:void 0,border:w?"1px solid var(--border-color)":void 0,boxShadow:w?"0 12px 50px rgba(0,0,0,0.6)":void 0,height:y?"100%":void 0},children:[y?t.jsxs("div",{style:{position:"absolute",top:10,left:10,zIndex:60,display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:m==="connected"?"var(--accent-success)":m==="reconnecting"?"var(--accent-warning)":"var(--accent-danger)",boxShadow:m==="connected"?"0 0 8px var(--accent-success)":"none"}}),D?t.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",maxWidth:520},dir:"auto",children:D}):null]}):null,y?null:t.jsxs("div",{className:"agent-browser-header",style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"var(--bg-secondary)",borderRadius:12,border:"1px solid var(--border-color)",gap:8,flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:m==="connected"?"var(--accent-success)":m==="reconnecting"?"var(--accent-warning)":"var(--accent-danger)",boxShadow:m==="connected"?"0 0 8px var(--accent-success)":"none"}}),t.jsx("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)"},dir:"auto",children:m==="connected"?"متصل":m}),m==="error"?t.jsx("button",{onClick:()=>Ce(e=>e+1),style:{height:28,padding:"0 10px",borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.04)",color:"var(--text-primary)",cursor:"pointer"},children:"إعادة اتصال"}):null]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flex:"1 1 420px",minWidth:260},children:[t.jsx("button",{onClick:()=>u([{type:"goBack"}]),title:"Back",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟵"}),t.jsx("button",{onClick:()=>u([{type:"goForward"}]),title:"Forward",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟶"}),t.jsx("button",{onClick:()=>u([{type:"reload"}]),title:"Reload",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟳"}),t.jsx("input",{type:"text",value:f,onChange:e=>O(e.target.value),onKeyDown:e=>{if(e.key==="Enter"){const o=F(f);o&&u([{type:"goto",url:o,waitUntil:"domcontentloaded"}])}},placeholder:"https://example.com",dir:"auto",style:{flex:1,height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",outline:"none",minWidth:200}}),t.jsx("button",{onClick:()=>{const e=F(f);e&&u([{type:"goto",url:e,waitUntil:"domcontentloaded"}])},style:{height:32,padding:"0 12px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(37, 99, 235, 0.12)",color:"var(--text-primary)",cursor:"pointer"},children:"فتح"})]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{const e=F(f);e&&navigator.clipboard&&navigator.clipboard.writeText(e).catch(()=>{})},title:"Copy URL",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"نسخ"}),t.jsx("button",{onClick:()=>{const e=F(f);e&&window.open(e,"_blank","noreferrer")},title:"Open in new tab",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"فتح خارجي"}),t.jsx("button",{onClick:()=>u([{type:"screenshot",fullPage:!1,quality:60}]),title:"Screenshot",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"لقطة"}),t.jsx("button",{onClick:()=>{const e=M[0];e!=null&&e.href&&window.open(e.href,"_blank","noreferrer")},disabled:!((ve=M[0])!=null&&ve.href),title:"Open latest download",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:(we=M[0])!=null&&we.href?"pointer":"not-allowed",opacity:(ke=M[0])!=null&&ke.href?1:.5},children:"تنزيل"}),t.jsx("button",{onClick:()=>_(e=>Math.max(.5,Number((e-.1).toFixed(2)))),title:"Zoom out",style:{width:32,height:32,borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"−"}),t.jsxs("button",{onClick:()=>_(1),title:"Reset zoom",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:[Math.round(xe*100),"%"]}),t.jsx("button",{onClick:()=>_(e=>Math.min(2,Number((e+.1).toFixed(2)))),title:"Zoom in",style:{width:32,height:32,borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"+"}),t.jsx("button",{onClick:async()=>{var e;try{document.fullscreenElement?await document.exitFullscreen():await((e=ce.current)==null?void 0:e.requestFullscreen())}catch{}},title:"Fullscreen",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:Se?"خروج":"ملء"}),t.jsx("button",{onClick:()=>ye(e=>!e),title:"Pause stream",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:ee?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:ee?"تشغيل":"إيقاف"}),t.jsx("button",{onClick:()=>ge(e=>!e),title:"Focus mode",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:w?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"تركيز"}),t.jsx("button",{onClick:()=>K(e=>!e),title:"Logs",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:ue?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"سجلات"}),t.jsx("button",{onClick:()=>Oe(!ie),style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:ie?"أقل":"أكثر"})]}),D?t.jsx("div",{style:{width:"100%",fontSize:12,color:"var(--text-secondary)"},dir:"auto",children:D}):null,de?t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{padding:"4px 12px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:999,color:"#60a5fa",fontSize:12},dir:"auto",children:de})}):null]}),t.jsx("div",{style:{border:y?"none":"1px solid var(--border-color)",borderRadius:y?0:14,overflow:"hidden",position:"relative",background:"#000",boxShadow:y?"none":"0 4px 20px rgba(0,0,0,0.3)",flex:y?1:void 0},children:t.jsxs("div",{style:{transform:y?"none":`scale(${xe})`,transformOrigin:"top left",position:"relative"},children:[t.jsx("canvas",{ref:R,onClick:Ae,onWheel:Le,onMouseMove:We,onTouchStart:Ue,onTouchMove:ze,style:{width:"100%",height:"auto",display:"block",cursor:"default",touchAction:"none"}}),L&&t.jsx("div",{style:{position:"absolute",left:`${L.x/g.w*100}%`,top:`${L.y/g.h*100}%`,width:`${L.width/g.w*100}%`,height:`${L.height/g.h*100}%`,border:"2px solid #eab308",boxShadow:"0 0 15px rgba(234, 179, 8, 0.4)",pointerEvents:"none",borderRadius:4,transition:"all 0.2s ease"}}),oe&&t.jsx("div",{style:{position:"absolute",left:`${oe.x/g.w*100}%`,top:`${oe.y/g.h*100}%`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:50,transition:"all 0.1s linear"},children:t.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#eab308",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})}),!y&&ue?t.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:12,background:"var(--bg-secondary)",overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",gap:8,padding:10,borderBottom:"1px solid var(--border-color)",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{onClick:()=>G("console"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:v==="console"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Console"}),t.jsx("button",{onClick:()=>G("network"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:v==="network"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Network"}),t.jsx("button",{onClick:()=>G("downloads"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:v==="downloads"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Downloads"}),t.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[t.jsx("button",{onClick:()=>{v==="console"&&V([]),v==="network"&&Q([]),v==="downloads"&&A([])},style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Clear"}),t.jsx("button",{onClick:()=>K(!1),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"إخفاء"})]})]}),t.jsxs("div",{style:{maxHeight:220,overflow:"auto",padding:10,fontSize:12,color:"var(--text-primary)",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},children:[v==="console"?pe.length?pe.slice(-200).map((e,o)=>t.jsxs("div",{style:{opacity:.95,padding:"2px 0"},dir:"auto",children:[t.jsx("span",{style:{color:e.level==="error"?"var(--accent-danger)":e.level==="warning"||e.level==="warn"?"var(--accent-warning)":"var(--text-secondary)"},children:new Date(e.ts).toLocaleTimeString()})," ",e.text]},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد رسائل"}):null,v==="network"?he.length?he.slice(-200).map((e,o)=>t.jsxs("div",{style:{opacity:.95,padding:"2px 0"},dir:"auto",children:[t.jsx("span",{style:{color:"var(--text-secondary)"},children:new Date(e.ts).toLocaleTimeString()})," ",t.jsx("span",{style:{color:e.stage==="response"&&typeof e.status=="number"&&e.status>=400?"var(--accent-danger)":"var(--text-primary)"},children:e.method})," ",e.stage==="response"?t.jsx("span",{style:{color:"var(--text-secondary)"},children:e.status??""}):t.jsx("span",{style:{color:"var(--text-secondary)"},children:"→"})," ",e.url]},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد طلبات"}):null,v==="downloads"?M.length?M.map((e,o)=>t.jsx("div",{style:{padding:"2px 0"},dir:"auto",children:t.jsx("a",{href:e.href,target:"_blank",rel:"noreferrer",style:{color:"#3b82f6",textDecoration:"none"},children:e.name})},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد تنزيلات"}):null]})]}):null,ie&&t.jsxs("div",{style:{padding:12,border:"1px solid var(--border-color)",borderRadius:8,background:"var(--bg-secondary)",display:"flex",flexDirection:"column",gap:12},children:[t.jsxs("div",{className:"agent-browser-controls-row",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>u([{type:"goBack"}]),className:"btn",title:"Back",children:"⟵"}),t.jsx("button",{onClick:()=>u([{type:"goForward"}]),className:"btn",title:"Forward",children:"⟶"}),t.jsx("button",{onClick:()=>u([{type:"reload"}]),className:"btn",title:"Reload",children:"⟳"}),t.jsx("input",{type:"text",value:f,onChange:e=>O(e.target.value),onKeyDown:e=>{e.key==="Enter"&&f&&u([{type:"goto",url:F(f),waitUntil:"domcontentloaded"}])},placeholder:"https://example.com",style:{flex:1,minWidth:220,padding:"8px 10px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)"}}),t.jsx("button",{onClick:()=>f&&u([{type:"goto",url:F(f),waitUntil:"domcontentloaded"}]),className:"btn",children:"Go"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8},children:[t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",placeholder:"Upload Selector",value:re,onChange:e=>Ee(e.target.value),style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("input",{type:"file",ref:be,style:{width:80}}),t.jsx("button",{onClick:Be,className:"btn",children:"Up"})]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",value:P,onChange:e=>fe(e.target.value),placeholder:"Type text...",style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("button",{onClick:De,className:"btn",children:"Type"}),t.jsx("button",{onClick:()=>u([{type:"press",key:"Enter"}]),className:"btn",children:"Ent"})]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",value:k,onChange:e=>Ne(e.target.value),placeholder:"CSS Selector",style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("button",{onClick:()=>k&&u([{type:"locate",selector:k}]),className:"btn",children:"Loc"}),t.jsx("button",{onClick:()=>k&&u([{type:"click",selector:k}]),className:"btn",children:"Clk"})]})]}),t.jsxs("div",{style:{fontSize:11,color:"var(--text-secondary)"},children:["DevTools: ",t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:$,onChange:e=>Me(e.target.checked)})," Auto Extract"]})]})]})]})}export{tt as default};
