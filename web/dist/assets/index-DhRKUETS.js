function B5(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Lg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uS={exports:{}},Pp={},cS={exports:{}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pD;function z5(){if(pD)return nn;pD=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function f(U){return U===null||typeof U!="object"?null:(U=h&&U[h]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function _(U,ne,B){this.props=U,this.context=ne,this.refs=v,this.updater=B||g}_.prototype.isReactComponent={},_.prototype.setState=function(U,ne){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ne,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function b(){}b.prototype=_.prototype;function S(U,ne,B){this.props=U,this.context=ne,this.refs=v,this.updater=B||g}var E=S.prototype=new b;E.constructor=S,m(E,_.prototype),E.isPureReactComponent=!0;var A=Array.isArray,R=Object.prototype.hasOwnProperty,w={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function I(U,ne,B){var Oe,Y={},V=null,ae=null;if(ne!=null)for(Oe in ne.ref!==void 0&&(ae=ne.ref),ne.key!==void 0&&(V=""+ne.key),ne)R.call(ne,Oe)&&!M.hasOwnProperty(Oe)&&(Y[Oe]=ne[Oe]);var _e=arguments.length-2;if(_e===1)Y.children=B;else if(1<_e){for(var Pe=Array(_e),De=0;De<_e;De++)Pe[De]=arguments[De+2];Y.children=Pe}if(U&&U.defaultProps)for(Oe in _e=U.defaultProps,_e)Y[Oe]===void 0&&(Y[Oe]=_e[Oe]);return{$$typeof:n,type:U,key:V,ref:ae,props:Y,_owner:w.current}}function C(U,ne){return{$$typeof:n,type:U.type,key:ne,ref:U.ref,props:U.props,_owner:U._owner}}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var ne={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(B){return ne[B]})}var z=/\/+/g;function W(U,ne){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):ne.toString(36)}function q(U,ne,B,Oe,Y){var V=typeof U;(V==="undefined"||V==="boolean")&&(U=null);var ae=!1;if(U===null)ae=!0;else switch(V){case"string":case"number":ae=!0;break;case"object":switch(U.$$typeof){case n:case e:ae=!0}}if(ae)return ae=U,Y=Y(ae),U=Oe===""?"."+W(ae,0):Oe,A(Y)?(B="",U!=null&&(B=U.replace(z,"$&/")+"/"),q(Y,ne,B,"",function(De){return De})):Y!=null&&(k(Y)&&(Y=C(Y,B+(!Y.key||ae&&ae.key===Y.key?"":(""+Y.key).replace(z,"$&/")+"/")+U)),ne.push(Y)),1;if(ae=0,Oe=Oe===""?".":Oe+":",A(U))for(var _e=0;_e<U.length;_e++){V=U[_e];var Pe=Oe+W(V,_e);ae+=q(V,ne,B,Pe,Y)}else if(Pe=f(U),typeof Pe=="function")for(U=Pe.call(U),_e=0;!(V=U.next()).done;)V=V.value,Pe=Oe+W(V,_e++),ae+=q(V,ne,B,Pe,Y);else if(V==="object")throw ne=String(U),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return ae}function X(U,ne,B){if(U==null)return U;var Oe=[],Y=0;return q(U,Oe,"","",function(V){return ne.call(B,V,Y++)}),Oe}function Q(U){if(U._status===-1){var ne=U._result;ne=ne(),ne.then(function(B){(U._status===0||U._status===-1)&&(U._status=1,U._result=B)},function(B){(U._status===0||U._status===-1)&&(U._status=2,U._result=B)}),U._status===-1&&(U._status=0,U._result=ne)}if(U._status===1)return U._result.default;throw U._result}var H={current:null},G={transition:null},re={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:G,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}return nn.Children={map:X,forEach:function(U,ne,B){X(U,function(){ne.apply(this,arguments)},B)},count:function(U){var ne=0;return X(U,function(){ne++}),ne},toArray:function(U){return X(U,function(ne){return ne})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},nn.Component=_,nn.Fragment=t,nn.Profiler=i,nn.PureComponent=S,nn.StrictMode=r,nn.Suspense=l,nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,nn.act=D,nn.cloneElement=function(U,ne,B){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Oe=m({},U.props),Y=U.key,V=U.ref,ae=U._owner;if(ne!=null){if(ne.ref!==void 0&&(V=ne.ref,ae=w.current),ne.key!==void 0&&(Y=""+ne.key),U.type&&U.type.defaultProps)var _e=U.type.defaultProps;for(Pe in ne)R.call(ne,Pe)&&!M.hasOwnProperty(Pe)&&(Oe[Pe]=ne[Pe]===void 0&&_e!==void 0?_e[Pe]:ne[Pe])}var Pe=arguments.length-2;if(Pe===1)Oe.children=B;else if(1<Pe){_e=Array(Pe);for(var De=0;De<Pe;De++)_e[De]=arguments[De+2];Oe.children=_e}return{$$typeof:n,type:U.type,key:Y,ref:V,props:Oe,_owner:ae}},nn.createContext=function(U){return U={$$typeof:a,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},nn.createElement=I,nn.createFactory=function(U){var ne=I.bind(null,U);return ne.type=U,ne},nn.createRef=function(){return{current:null}},nn.forwardRef=function(U){return{$$typeof:o,render:U}},nn.isValidElement=k,nn.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:Q}},nn.memo=function(U,ne){return{$$typeof:u,type:U,compare:ne===void 0?null:ne}},nn.startTransition=function(U){var ne=G.transition;G.transition={};try{U()}finally{G.transition=ne}},nn.unstable_act=D,nn.useCallback=function(U,ne){return H.current.useCallback(U,ne)},nn.useContext=function(U){return H.current.useContext(U)},nn.useDebugValue=function(){},nn.useDeferredValue=function(U){return H.current.useDeferredValue(U)},nn.useEffect=function(U,ne){return H.current.useEffect(U,ne)},nn.useId=function(){return H.current.useId()},nn.useImperativeHandle=function(U,ne,B){return H.current.useImperativeHandle(U,ne,B)},nn.useInsertionEffect=function(U,ne){return H.current.useInsertionEffect(U,ne)},nn.useLayoutEffect=function(U,ne){return H.current.useLayoutEffect(U,ne)},nn.useMemo=function(U,ne){return H.current.useMemo(U,ne)},nn.useReducer=function(U,ne,B){return H.current.useReducer(U,ne,B)},nn.useRef=function(U){return H.current.useRef(U)},nn.useState=function(U){return H.current.useState(U)},nn.useSyncExternalStore=function(U,ne,B){return H.current.useSyncExternalStore(U,ne,B)},nn.useTransition=function(){return H.current.useTransition()},nn.version="18.3.1",nn}var fD;function xw(){return fD||(fD=1,cS.exports=z5()),cS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD;function G5(){if(gD)return Pp;gD=1;var n=xw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,h={},f=null,g=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:f,ref:g,props:h,_owner:i.current}}return Pp.Fragment=t,Pp.jsx=a,Pp.jsxs=a,Pp}var mD;function V5(){return mD||(mD=1,uS.exports=G5()),uS.exports}var L=V5(),se=xw();const ca=Lg(se),$5=B5({__proto__:null,default:ca},[se]);var xy={},dS={exports:{}},ji={},hS={exports:{}},pS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD;function H5(){return yD||(yD=1,(function(n){function e(G,re){var D=G.length;G.push(re);e:for(;0<D;){var U=D-1>>>1,ne=G[U];if(0<i(ne,re))G[U]=re,G[D]=ne,D=U;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var re=G[0],D=G.pop();if(D!==re){G[0]=D;e:for(var U=0,ne=G.length,B=ne>>>1;U<B;){var Oe=2*(U+1)-1,Y=G[Oe],V=Oe+1,ae=G[V];if(0>i(Y,D))V<ne&&0>i(ae,Y)?(G[U]=ae,G[V]=D,U=V):(G[U]=Y,G[Oe]=D,U=Oe);else if(V<ne&&0>i(ae,D))G[U]=ae,G[V]=D,U=V;else break e}}return re}function i(G,re){var D=G.sortIndex-re.sortIndex;return D!==0?D:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,f=3,g=!1,m=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var re=t(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=G)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(u)}}function A(G){if(v=!1,E(G),!m)if(t(l)!==null)m=!0,Q(R);else{var re=t(u);re!==null&&H(A,re.startTime-G)}}function R(G,re){m=!1,v&&(v=!1,b(I),I=-1),g=!0;var D=f;try{for(E(re),h=t(l);h!==null&&(!(h.expirationTime>re)||G&&!O());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var ne=U(h.expirationTime<=re);re=n.unstable_now(),typeof ne=="function"?h.callback=ne:h===t(l)&&r(l),E(re)}else r(l);h=t(l)}if(h!==null)var B=!0;else{var Oe=t(u);Oe!==null&&H(A,Oe.startTime-re),B=!1}return B}finally{h=null,f=D,g=!1}}var w=!1,M=null,I=-1,C=5,k=-1;function O(){return!(n.unstable_now()-k<C)}function z(){if(M!==null){var G=n.unstable_now();k=G;var re=!0;try{re=M(!0,G)}finally{re?W():(w=!1,M=null)}}else w=!1}var W;if(typeof S=="function")W=function(){S(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=z,W=function(){X.postMessage(null)}}else W=function(){_(z,0)};function Q(G){M=G,w||(w=!0,W())}function H(G,re){I=_(function(){G(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,Q(R))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var D=f;f=re;try{return G()}finally{f=D}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var D=f;f=G;try{return re()}finally{f=D}},n.unstable_scheduleCallback=function(G,re,D){var U=n.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?U+D:U):D=U,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=D+ne,G={id:c++,callback:re,priorityLevel:G,startTime:D,expirationTime:ne,sortIndex:-1},D>U?(G.sortIndex=D,e(u,G),t(l)===null&&G===t(u)&&(v?(b(I),I=-1):v=!0,H(A,D-U))):(G.sortIndex=ne,e(l,G),m||g||(m=!0,Q(R))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var re=f;return function(){var D=f;f=re;try{return G.apply(this,arguments)}finally{f=D}}}})(pS)),pS}var bD;function j5(){return bD||(bD=1,hS.exports=H5()),hS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _D;function W5(){if(_D)return ji;_D=1;var n=xw(),e=j5();function t(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,y=1;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,p){a(d,p),a(d+"Capture",p)}function a(d,p){for(i[d]=p,d=0;d<p.length;d++)r.add(p[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function f(d){return l.call(h,d)?!0:l.call(c,d)?!1:u.test(d)?h[d]=!0:(c[d]=!0,!1)}function g(d,p,y,x){if(y!==null&&y.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return x?!1:y!==null?!y.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function m(d,p,y,x){if(p===null||typeof p>"u"||g(d,p,y,x))return!0;if(x)return!1;if(y!==null)switch(y.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function v(d,p,y,x,T,N,F){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=x,this.attributeNamespace=T,this.mustUseProperty=y,this.propertyName=d,this.type=p,this.sanitizeURL=N,this.removeEmptyString=F}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var p=d[0];_[p]=new v(p,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function S(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var p=d.replace(b,S);_[p]=new v(p,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var p=d.replace(b,S);_[p]=new v(p,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var p=d.replace(b,S);_[p]=new v(p,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function E(d,p,y,x){var T=_.hasOwnProperty(p)?_[p]:null;(T!==null?T.type!==0:x||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(m(p,y,T,x)&&(y=null),x||T===null?f(p)&&(y===null?d.removeAttribute(p):d.setAttribute(p,""+y)):T.mustUseProperty?d[T.propertyName]=y===null?T.type===3?!1:"":y:(p=T.attributeName,x=T.attributeNamespace,y===null?d.removeAttribute(p):(T=T.type,y=T===3||T===4&&y===!0?"":""+y,x?d.setAttributeNS(x,p,y):d.setAttribute(p,y))))}var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),w=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),G=Symbol.iterator;function re(d){return d===null||typeof d!="object"?null:(d=G&&d[G]||d["@@iterator"],typeof d=="function"?d:null)}var D=Object.assign,U;function ne(d){if(U===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);U=p&&p[1]||""}return`
`+U+d}var B=!1;function Oe(d,p){if(!d||B)return"";B=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(xe){var x=xe}Reflect.construct(d,[],p)}else{try{p.call()}catch(xe){x=xe}d.call(p.prototype)}else{try{throw Error()}catch(xe){x=xe}d()}}catch(xe){if(xe&&x&&typeof xe.stack=="string"){for(var T=xe.stack.split(`
`),N=x.stack.split(`
`),F=T.length-1,ee=N.length-1;1<=F&&0<=ee&&T[F]!==N[ee];)ee--;for(;1<=F&&0<=ee;F--,ee--)if(T[F]!==N[ee]){if(F!==1||ee!==1)do if(F--,ee--,0>ee||T[F]!==N[ee]){var oe=`
`+T[F].replace(" at new "," at ");return d.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",d.displayName)),oe}while(1<=F&&0<=ee);break}}}finally{B=!1,Error.prepareStackTrace=y}return(d=d?d.displayName||d.name:"")?ne(d):""}function Y(d){switch(d.tag){case 5:return ne(d.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return d=Oe(d.type,!1),d;case 11:return d=Oe(d.type.render,!1),d;case 1:return d=Oe(d.type,!0),d;default:return""}}function V(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case M:return"Fragment";case w:return"Portal";case C:return"Profiler";case I:return"StrictMode";case W:return"Suspense";case q:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case O:return(d.displayName||"Context")+".Consumer";case k:return(d._context.displayName||"Context")+".Provider";case z:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case X:return p=d.displayName||null,p!==null?p:V(d.type)||"Memo";case Q:p=d._payload,d=d._init;try{return V(d(p))}catch{}}return null}function ae(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(p);case 8:return p===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function _e(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Pe(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function De(d){var p=Pe(d)?"checked":"value",y=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),x=""+d[p];if(!d.hasOwnProperty(p)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var T=y.get,N=y.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return T.call(this)},set:function(F){x=""+F,N.call(this,F)}}),Object.defineProperty(d,p,{enumerable:y.enumerable}),{getValue:function(){return x},setValue:function(F){x=""+F},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function ft(d){d._valueTracker||(d._valueTracker=De(d))}function ln(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var y=p.getValue(),x="";return d&&(x=Pe(d)?d.checked?"true":"false":d.value),d=x,d!==y?(p.setValue(d),!0):!1}function Se(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Me(d,p){var y=p.checked;return D({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??d._wrapperState.initialChecked})}function nt(d,p){var y=p.defaultValue==null?"":p.defaultValue,x=p.checked!=null?p.checked:p.defaultChecked;y=_e(p.value!=null?p.value:y),d._wrapperState={initialChecked:x,initialValue:y,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function qe(d,p){p=p.checked,p!=null&&E(d,"checked",p,!1)}function je(d,p){qe(d,p);var y=_e(p.value),x=p.type;if(y!=null)x==="number"?(y===0&&d.value===""||d.value!=y)&&(d.value=""+y):d.value!==""+y&&(d.value=""+y);else if(x==="submit"||x==="reset"){d.removeAttribute("value");return}p.hasOwnProperty("value")?Qt(d,p.type,y):p.hasOwnProperty("defaultValue")&&Qt(d,p.type,_e(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(d.defaultChecked=!!p.defaultChecked)}function J(d,p,y){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var x=p.type;if(!(x!=="submit"&&x!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+d._wrapperState.initialValue,y||p===d.value||(d.value=p),d.defaultValue=p}y=d.name,y!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,y!==""&&(d.name=y)}function Qt(d,p,y){(p!=="number"||Se(d.ownerDocument)!==d)&&(y==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+y&&(d.defaultValue=""+y))}var Ot=Array.isArray;function Dt(d,p,y,x){if(d=d.options,p){p={};for(var T=0;T<y.length;T++)p["$"+y[T]]=!0;for(y=0;y<d.length;y++)T=p.hasOwnProperty("$"+d[y].value),d[y].selected!==T&&(d[y].selected=T),T&&x&&(d[y].defaultSelected=!0)}else{for(y=""+_e(y),p=null,T=0;T<d.length;T++){if(d[T].value===y){d[T].selected=!0,x&&(d[T].defaultSelected=!0);return}p!==null||d[T].disabled||(p=d[T])}p!==null&&(p.selected=!0)}}function it(d,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return D({},p,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function K(d,p){var y=p.value;if(y==null){if(y=p.children,p=p.defaultValue,y!=null){if(p!=null)throw Error(t(92));if(Ot(y)){if(1<y.length)throw Error(t(93));y=y[0]}p=y}p==null&&(p=""),y=p}d._wrapperState={initialValue:_e(y)}}function P(d,p){var y=_e(p.value),x=_e(p.defaultValue);y!=null&&(y=""+y,y!==d.value&&(d.value=y),p.defaultValue==null&&d.defaultValue!==y&&(d.defaultValue=y)),x!=null&&(d.defaultValue=""+x)}function he(d){var p=d.textContent;p===d._wrapperState.initialValue&&p!==""&&p!==null&&(d.value=p)}function te(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(d,p){return d==null||d==="http://www.w3.org/1999/xhtml"?te(p):d==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var fe,ze=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,y,x,T){MSApp.execUnsafeLocalFunction(function(){return d(p,y,x,T)})}:d})(function(d,p){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=p;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=fe.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;p.firstChild;)d.appendChild(p.firstChild)}});function ke(d,p){if(p){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=p;return}}d.textContent=p}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(d){wt.forEach(function(p){p=p+d.charAt(0).toUpperCase()+d.substring(1),tt[p]=tt[d]})});function Fe(d,p,y){return p==null||typeof p=="boolean"||p===""?"":y||typeof p!="number"||p===0||tt.hasOwnProperty(d)&&tt[d]?(""+p).trim():p+"px"}function Ze(d,p){d=d.style;for(var y in p)if(p.hasOwnProperty(y)){var x=y.indexOf("--")===0,T=Fe(y,p[y],x);y==="float"&&(y="cssFloat"),x?d.setProperty(y,T):d[y]=T}}var dt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rt(d,p){if(p){if(dt[d]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function Xe(d,p){if(d.indexOf("-")===-1)return typeof p.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=null;function le(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var st=null,He=null,at=null;function Ge(d){if(d=xp(d)){if(typeof st!="function")throw Error(t(280));var p=d.stateNode;p&&(p=Pm(p),st(d.stateNode,d.type,p))}}function Le(d){He?at?at.push(d):at=[d]:He=d}function Je(){if(He){var d=He,p=at;if(at=He=null,Ge(d),p)for(d=0;d<p.length;d++)Ge(p[d])}}function zt(d,p){return d(p)}function Nn(){}var pn=!1;function ls(d,p,y){if(pn)return d(p,y);pn=!0;try{return zt(d,p,y)}finally{pn=!1,(He!==null||at!==null)&&(Nn(),Je())}}function Si(d,p){var y=d.stateNode;if(y===null)return null;var x=Pm(y);if(x===null)return null;y=x[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(d=d.type,x=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!x;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(t(231,p,typeof y));return y}var ep=!1;if(o)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){ep=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{ep=!1}function tp(d,p,y,x,T,N,F,ee,oe){var xe=Array.prototype.slice.call(arguments,3);try{p.apply(y,xe)}catch(Be){this.onError(Be)}}var Zl=!1,Ql=null,Jl=!1,qs=null,np={onError:function(d){Zl=!0,Ql=d}};function gm(d,p,y,x,T,N,F,ee,oe){Zl=!1,Ql=null,tp.apply(np,arguments)}function mm(d,p,y,x,T,N,F,ee,oe){if(gm.apply(this,arguments),Zl){if(Zl){var xe=Ql;Zl=!1,Ql=null}else throw Error(t(198));Jl||(Jl=!0,qs=xe)}}function As(d){var p=d,y=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(y=p.return),d=p.return;while(d)}return p.tag===3?y:null}function rp(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function eu(d){if(As(d)!==d)throw Error(t(188))}function ym(d){var p=d.alternate;if(!p){if(p=As(d),p===null)throw Error(t(188));return p!==d?null:d}for(var y=d,x=p;;){var T=y.return;if(T===null)break;var N=T.alternate;if(N===null){if(x=T.return,x!==null){y=x;continue}break}if(T.child===N.child){for(N=T.child;N;){if(N===y)return eu(T),d;if(N===x)return eu(T),p;N=N.sibling}throw Error(t(188))}if(y.return!==x.return)y=T,x=N;else{for(var F=!1,ee=T.child;ee;){if(ee===y){F=!0,y=T,x=N;break}if(ee===x){F=!0,x=T,y=N;break}ee=ee.sibling}if(!F){for(ee=N.child;ee;){if(ee===y){F=!0,y=N,x=T;break}if(ee===x){F=!0,x=N,y=T;break}ee=ee.sibling}if(!F)throw Error(t(189))}}if(y.alternate!==x)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?d:p}function ip(d){return d=ym(d),d!==null?bm(d):null}function bm(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=bm(d);if(p!==null)return p;d=d.sibling}return null}var _m=e.unstable_scheduleCallback,vm=e.unstable_cancelCallback,kv=e.unstable_shouldYield,Lv=e.unstable_requestPaint,ir=e.unstable_now,$=e.unstable_getCurrentPriorityLevel,pe=e.unstable_ImmediatePriority,Ee=e.unstable_UserBlockingPriority,ve=e.unstable_NormalPriority,ye=e.unstable_LowPriority,et=e.unstable_IdlePriority,ct=null,Qe=null;function bt(d){if(Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ct,d,void 0,(d.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:en,Pt=Math.log,At=Math.LN2;function en(d){return d>>>=0,d===0?32:31-(Pt(d)/At|0)|0}var fn=64,Pn=4194304;function kn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function yn(d,p){var y=d.pendingLanes;if(y===0)return 0;var x=0,T=d.suspendedLanes,N=d.pingedLanes,F=y&268435455;if(F!==0){var ee=F&~T;ee!==0?x=kn(ee):(N&=F,N!==0&&(x=kn(N)))}else F=y&~T,F!==0?x=kn(F):N!==0&&(x=kn(N));if(x===0)return 0;if(p!==0&&p!==x&&(p&T)===0&&(T=x&-x,N=p&-p,T>=N||T===16&&(N&4194240)!==0))return p;if((x&4)!==0&&(x|=y&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=x;0<p;)y=31-gt(p),T=1<<y,x|=d[y],p&=~T;return x}function Rt(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vn(d,p){for(var y=d.suspendedLanes,x=d.pingedLanes,T=d.expirationTimes,N=d.pendingLanes;0<N;){var F=31-gt(N),ee=1<<F,oe=T[F];oe===-1?((ee&y)===0||(ee&x)!==0)&&(T[F]=Rt(ee,p)):oe<=p&&(d.expiredLanes|=ee),N&=~ee}}function un(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function ii(){var d=fn;return fn<<=1,(fn&4194240)===0&&(fn=64),d}function va(d){for(var p=[],y=0;31>y;y++)p.push(d);return p}function Nr(d,p,y){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-gt(p),d[p]=y}function tu(d,p){var y=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var x=d.eventTimes;for(d=d.expirationTimes;0<y;){var T=31-gt(y),N=1<<T;p[T]=0,x[T]=-1,d[T]=-1,y&=~N}}function Tn(d,p){var y=d.entangledLanes|=p;for(d=d.entanglements;y;){var x=31-gt(y),T=1<<x;T&p|d[x]&p&&(d[x]|=p),y&=~T}}var qt=0;function Ei(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Or,Pr,bc,xa,YI,Dv=!1,xm=[],Xo=null,Yo=null,Ko=null,sp=new Map,ap=new Map,Zo=[],oj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KI(d,p){switch(d){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":sp.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":ap.delete(p.pointerId)}}function op(d,p,y,x,T,N){return d===null||d.nativeEvent!==N?(d={blockedOn:p,domEventName:y,eventSystemFlags:x,nativeEvent:N,targetContainers:[T]},p!==null&&(p=xp(p),p!==null&&Pr(p)),d):(d.eventSystemFlags|=x,p=d.targetContainers,T!==null&&p.indexOf(T)===-1&&p.push(T),d)}function lj(d,p,y,x,T){switch(p){case"focusin":return Xo=op(Xo,d,p,y,x,T),!0;case"dragenter":return Yo=op(Yo,d,p,y,x,T),!0;case"mouseover":return Ko=op(Ko,d,p,y,x,T),!0;case"pointerover":var N=T.pointerId;return sp.set(N,op(sp.get(N)||null,d,p,y,x,T)),!0;case"gotpointercapture":return N=T.pointerId,ap.set(N,op(ap.get(N)||null,d,p,y,x,T)),!0}return!1}function ZI(d){var p=nu(d.target);if(p!==null){var y=As(p);if(y!==null){if(p=y.tag,p===13){if(p=rp(y),p!==null){d.blockedOn=p,YI(d.priority,function(){bc(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Sm(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var y=Pv(d.domEventName,d.eventSystemFlags,p[0],d.nativeEvent);if(y===null){y=d.nativeEvent;var x=new y.constructor(y.type,y);Mt=x,y.target.dispatchEvent(x),Mt=null}else return p=xp(y),p!==null&&Pr(p),d.blockedOn=y,!1;p.shift()}return!0}function QI(d,p,y){Sm(d)&&y.delete(p)}function uj(){Dv=!1,Xo!==null&&Sm(Xo)&&(Xo=null),Yo!==null&&Sm(Yo)&&(Yo=null),Ko!==null&&Sm(Ko)&&(Ko=null),sp.forEach(QI),ap.forEach(QI)}function lp(d,p){d.blockedOn===p&&(d.blockedOn=null,Dv||(Dv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uj)))}function up(d){function p(T){return lp(T,d)}if(0<xm.length){lp(xm[0],d);for(var y=1;y<xm.length;y++){var x=xm[y];x.blockedOn===d&&(x.blockedOn=null)}}for(Xo!==null&&lp(Xo,d),Yo!==null&&lp(Yo,d),Ko!==null&&lp(Ko,d),sp.forEach(p),ap.forEach(p),y=0;y<Zo.length;y++)x=Zo[y],x.blockedOn===d&&(x.blockedOn=null);for(;0<Zo.length&&(y=Zo[0],y.blockedOn===null);)ZI(y),y.blockedOn===null&&Zo.shift()}var _c=A.ReactCurrentBatchConfig,Em=!0;function cj(d,p,y,x){var T=qt,N=_c.transition;_c.transition=null;try{qt=1,Ov(d,p,y,x)}finally{qt=T,_c.transition=N}}function dj(d,p,y,x){var T=qt,N=_c.transition;_c.transition=null;try{qt=4,Ov(d,p,y,x)}finally{qt=T,_c.transition=N}}function Ov(d,p,y,x){if(Em){var T=Pv(d,p,y,x);if(T===null)Jv(d,p,x,Tm,y),KI(d,x);else if(lj(T,d,p,y,x))x.stopPropagation();else if(KI(d,x),p&4&&-1<oj.indexOf(d)){for(;T!==null;){var N=xp(T);if(N!==null&&Or(N),N=Pv(d,p,y,x),N===null&&Jv(d,p,x,Tm,y),N===T)break;T=N}T!==null&&x.stopPropagation()}else Jv(d,p,x,null,y)}}var Tm=null;function Pv(d,p,y,x){if(Tm=null,d=le(x),d=nu(d),d!==null)if(p=As(d),p===null)d=null;else if(y=p.tag,y===13){if(d=rp(p),d!==null)return d;d=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null);return Tm=d,null}function JI(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($()){case pe:return 1;case Ee:return 4;case ve:case ye:return 16;case et:return 536870912;default:return 16}default:return 16}}var Qo=null,Fv=null,wm=null;function ek(){if(wm)return wm;var d,p=Fv,y=p.length,x,T="value"in Qo?Qo.value:Qo.textContent,N=T.length;for(d=0;d<y&&p[d]===T[d];d++);var F=y-d;for(x=1;x<=F&&p[y-x]===T[N-x];x++);return wm=T.slice(d,1<x?1-x:void 0)}function Am(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Rm(){return!0}function tk(){return!1}function us(d){function p(y,x,T,N,F){this._reactName=y,this._targetInst=T,this.type=x,this.nativeEvent=N,this.target=F,this.currentTarget=null;for(var ee in d)d.hasOwnProperty(ee)&&(y=d[ee],this[ee]=y?y(N):N[ee]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Rm:tk,this.isPropagationStopped=tk,this}return D(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),p}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uv=us(vc),cp=D({},vc,{view:0,detail:0}),hj=us(cp),Bv,zv,dp,Nm=D({},cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==dp&&(dp&&d.type==="mousemove"?(Bv=d.screenX-dp.screenX,zv=d.screenY-dp.screenY):zv=Bv=0,dp=d),Bv)},movementY:function(d){return"movementY"in d?d.movementY:zv}}),nk=us(Nm),pj=D({},Nm,{dataTransfer:0}),fj=us(pj),gj=D({},cp,{relatedTarget:0}),Gv=us(gj),mj=D({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),yj=us(mj),bj=D({},vc,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),_j=us(bj),vj=D({},vc,{data:0}),rk=us(vj),xj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ej={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tj(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Ej[d])?!!p[d]:!1}function Vv(){return Tj}var wj=D({},cp,{key:function(d){if(d.key){var p=xj[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=Am(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Sj[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(d){return d.type==="keypress"?Am(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Am(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Aj=us(wj),Rj=D({},Nm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ik=us(Rj),Nj=D({},cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),Cj=us(Nj),Mj=D({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ij=us(Mj),kj=D({},Nm,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Lj=us(kj),Dj=[9,13,27,32],$v=o&&"CompositionEvent"in window,hp=null;o&&"documentMode"in document&&(hp=document.documentMode);var Oj=o&&"TextEvent"in window&&!hp,sk=o&&(!$v||hp&&8<hp&&11>=hp),ak=" ",ok=!1;function lk(d,p){switch(d){case"keyup":return Dj.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uk(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var xc=!1;function Pj(d,p){switch(d){case"compositionend":return uk(p);case"keypress":return p.which!==32?null:(ok=!0,ak);case"textInput":return d=p.data,d===ak&&ok?null:d;default:return null}}function Fj(d,p){if(xc)return d==="compositionend"||!$v&&lk(d,p)?(d=ek(),wm=Fv=Qo=null,xc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return sk&&p.locale!=="ko"?null:p.data;default:return null}}var Uj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ck(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!Uj[d.type]:p==="textarea"}function dk(d,p,y,x){Le(x),p=Lm(p,"onChange"),0<p.length&&(y=new Uv("onChange","change",null,y,x),d.push({event:y,listeners:p}))}var pp=null,fp=null;function Bj(d){Ck(d,0)}function Cm(d){var p=Ac(d);if(ln(p))return d}function zj(d,p){if(d==="change")return p}var hk=!1;if(o){var Hv;if(o){var jv="oninput"in document;if(!jv){var pk=document.createElement("div");pk.setAttribute("oninput","return;"),jv=typeof pk.oninput=="function"}Hv=jv}else Hv=!1;hk=Hv&&(!document.documentMode||9<document.documentMode)}function fk(){pp&&(pp.detachEvent("onpropertychange",gk),fp=pp=null)}function gk(d){if(d.propertyName==="value"&&Cm(fp)){var p=[];dk(p,fp,d,le(d)),ls(Bj,p)}}function Gj(d,p,y){d==="focusin"?(fk(),pp=p,fp=y,pp.attachEvent("onpropertychange",gk)):d==="focusout"&&fk()}function Vj(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Cm(fp)}function $j(d,p){if(d==="click")return Cm(p)}function Hj(d,p){if(d==="input"||d==="change")return Cm(p)}function jj(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Xs=typeof Object.is=="function"?Object.is:jj;function gp(d,p){if(Xs(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var y=Object.keys(d),x=Object.keys(p);if(y.length!==x.length)return!1;for(x=0;x<y.length;x++){var T=y[x];if(!l.call(p,T)||!Xs(d[T],p[T]))return!1}return!0}function mk(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function yk(d,p){var y=mk(d);d=0;for(var x;y;){if(y.nodeType===3){if(x=d+y.textContent.length,d<=p&&x>=p)return{node:y,offset:p-d};d=x}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=mk(y)}}function bk(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?bk(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function _k(){for(var d=window,p=Se();p instanceof d.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)d=p.contentWindow;else break;p=Se(d.document)}return p}function Wv(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}function Wj(d){var p=_k(),y=d.focusedElem,x=d.selectionRange;if(p!==y&&y&&y.ownerDocument&&bk(y.ownerDocument.documentElement,y)){if(x!==null&&Wv(y)){if(p=x.start,d=x.end,d===void 0&&(d=p),"selectionStart"in y)y.selectionStart=p,y.selectionEnd=Math.min(d,y.value.length);else if(d=(p=y.ownerDocument||document)&&p.defaultView||window,d.getSelection){d=d.getSelection();var T=y.textContent.length,N=Math.min(x.start,T);x=x.end===void 0?N:Math.min(x.end,T),!d.extend&&N>x&&(T=x,x=N,N=T),T=yk(y,N);var F=yk(y,x);T&&F&&(d.rangeCount!==1||d.anchorNode!==T.node||d.anchorOffset!==T.offset||d.focusNode!==F.node||d.focusOffset!==F.offset)&&(p=p.createRange(),p.setStart(T.node,T.offset),d.removeAllRanges(),N>x?(d.addRange(p),d.extend(F.node,F.offset)):(p.setEnd(F.node,F.offset),d.addRange(p)))}}for(p=[],d=y;d=d.parentNode;)d.nodeType===1&&p.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<p.length;y++)d=p[y],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var qj=o&&"documentMode"in document&&11>=document.documentMode,Sc=null,qv=null,mp=null,Xv=!1;function vk(d,p,y){var x=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Xv||Sc==null||Sc!==Se(x)||(x=Sc,"selectionStart"in x&&Wv(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),mp&&gp(mp,x)||(mp=x,x=Lm(qv,"onSelect"),0<x.length&&(p=new Uv("onSelect","select",null,p,y),d.push({event:p,listeners:x}),p.target=Sc)))}function Mm(d,p){var y={};return y[d.toLowerCase()]=p.toLowerCase(),y["Webkit"+d]="webkit"+p,y["Moz"+d]="moz"+p,y}var Ec={animationend:Mm("Animation","AnimationEnd"),animationiteration:Mm("Animation","AnimationIteration"),animationstart:Mm("Animation","AnimationStart"),transitionend:Mm("Transition","TransitionEnd")},Yv={},xk={};o&&(xk=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Im(d){if(Yv[d])return Yv[d];if(!Ec[d])return d;var p=Ec[d],y;for(y in p)if(p.hasOwnProperty(y)&&y in xk)return Yv[d]=p[y];return d}var Sk=Im("animationend"),Ek=Im("animationiteration"),Tk=Im("animationstart"),wk=Im("transitionend"),Ak=new Map,Rk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jo(d,p){Ak.set(d,p),s(p,[d])}for(var Kv=0;Kv<Rk.length;Kv++){var Zv=Rk[Kv],Xj=Zv.toLowerCase(),Yj=Zv[0].toUpperCase()+Zv.slice(1);Jo(Xj,"on"+Yj)}Jo(Sk,"onAnimationEnd"),Jo(Ek,"onAnimationIteration"),Jo(Tk,"onAnimationStart"),Jo("dblclick","onDoubleClick"),Jo("focusin","onFocus"),Jo("focusout","onBlur"),Jo(wk,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(yp));function Nk(d,p,y){var x=d.type||"unknown-event";d.currentTarget=y,mm(x,p,void 0,d),d.currentTarget=null}function Ck(d,p){p=(p&4)!==0;for(var y=0;y<d.length;y++){var x=d[y],T=x.event;x=x.listeners;e:{var N=void 0;if(p)for(var F=x.length-1;0<=F;F--){var ee=x[F],oe=ee.instance,xe=ee.currentTarget;if(ee=ee.listener,oe!==N&&T.isPropagationStopped())break e;Nk(T,ee,xe),N=oe}else for(F=0;F<x.length;F++){if(ee=x[F],oe=ee.instance,xe=ee.currentTarget,ee=ee.listener,oe!==N&&T.isPropagationStopped())break e;Nk(T,ee,xe),N=oe}}}if(Jl)throw d=qs,Jl=!1,qs=null,d}function Xn(d,p){var y=p[sx];y===void 0&&(y=p[sx]=new Set);var x=d+"__bubble";y.has(x)||(Mk(p,d,2,!1),y.add(x))}function Qv(d,p,y){var x=0;p&&(x|=4),Mk(y,d,x,p)}var km="_reactListening"+Math.random().toString(36).slice(2);function bp(d){if(!d[km]){d[km]=!0,r.forEach(function(y){y!=="selectionchange"&&(Kj.has(y)||Qv(y,!1,d),Qv(y,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[km]||(p[km]=!0,Qv("selectionchange",!1,p))}}function Mk(d,p,y,x){switch(JI(p)){case 1:var T=cj;break;case 4:T=dj;break;default:T=Ov}y=T.bind(null,p,y,d),T=void 0,!ep||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(T=!0),x?T!==void 0?d.addEventListener(p,y,{capture:!0,passive:T}):d.addEventListener(p,y,!0):T!==void 0?d.addEventListener(p,y,{passive:T}):d.addEventListener(p,y,!1)}function Jv(d,p,y,x,T){var N=x;if((p&1)===0&&(p&2)===0&&x!==null)e:for(;;){if(x===null)return;var F=x.tag;if(F===3||F===4){var ee=x.stateNode.containerInfo;if(ee===T||ee.nodeType===8&&ee.parentNode===T)break;if(F===4)for(F=x.return;F!==null;){var oe=F.tag;if((oe===3||oe===4)&&(oe=F.stateNode.containerInfo,oe===T||oe.nodeType===8&&oe.parentNode===T))return;F=F.return}for(;ee!==null;){if(F=nu(ee),F===null)return;if(oe=F.tag,oe===5||oe===6){x=N=F;continue e}ee=ee.parentNode}}x=x.return}ls(function(){var xe=N,Be=le(y),Ve=[];e:{var Ue=Ak.get(d);if(Ue!==void 0){var ht=Uv,_t=d;switch(d){case"keypress":if(Am(y)===0)break e;case"keydown":case"keyup":ht=Aj;break;case"focusin":_t="focus",ht=Gv;break;case"focusout":_t="blur",ht=Gv;break;case"beforeblur":case"afterblur":ht=Gv;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=nk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=fj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Cj;break;case Sk:case Ek:case Tk:ht=yj;break;case wk:ht=Ij;break;case"scroll":ht=hj;break;case"wheel":ht=Lj;break;case"copy":case"cut":case"paste":ht=_j;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=ik}var vt=(p&4)!==0,fr=!vt&&d==="scroll",me=vt?Ue!==null?Ue+"Capture":null:Ue;vt=[];for(var ce=xe,be;ce!==null;){be=ce;var Ye=be.stateNode;if(be.tag===5&&Ye!==null&&(be=Ye,me!==null&&(Ye=Si(ce,me),Ye!=null&&vt.push(_p(ce,Ye,be)))),fr)break;ce=ce.return}0<vt.length&&(Ue=new ht(Ue,_t,null,y,Be),Ve.push({event:Ue,listeners:vt}))}}if((p&7)===0){e:{if(Ue=d==="mouseover"||d==="pointerover",ht=d==="mouseout"||d==="pointerout",Ue&&y!==Mt&&(_t=y.relatedTarget||y.fromElement)&&(nu(_t)||_t[ao]))break e;if((ht||Ue)&&(Ue=Be.window===Be?Be:(Ue=Be.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,ht?(_t=y.relatedTarget||y.toElement,ht=xe,_t=_t?nu(_t):null,_t!==null&&(fr=As(_t),_t!==fr||_t.tag!==5&&_t.tag!==6)&&(_t=null)):(ht=null,_t=xe),ht!==_t)){if(vt=nk,Ye="onMouseLeave",me="onMouseEnter",ce="mouse",(d==="pointerout"||d==="pointerover")&&(vt=ik,Ye="onPointerLeave",me="onPointerEnter",ce="pointer"),fr=ht==null?Ue:Ac(ht),be=_t==null?Ue:Ac(_t),Ue=new vt(Ye,ce+"leave",ht,y,Be),Ue.target=fr,Ue.relatedTarget=be,Ye=null,nu(Be)===xe&&(vt=new vt(me,ce+"enter",_t,y,Be),vt.target=be,vt.relatedTarget=fr,Ye=vt),fr=Ye,ht&&_t)t:{for(vt=ht,me=_t,ce=0,be=vt;be;be=Tc(be))ce++;for(be=0,Ye=me;Ye;Ye=Tc(Ye))be++;for(;0<ce-be;)vt=Tc(vt),ce--;for(;0<be-ce;)me=Tc(me),be--;for(;ce--;){if(vt===me||me!==null&&vt===me.alternate)break t;vt=Tc(vt),me=Tc(me)}vt=null}else vt=null;ht!==null&&Ik(Ve,Ue,ht,vt,!1),_t!==null&&fr!==null&&Ik(Ve,fr,_t,vt,!0)}}e:{if(Ue=xe?Ac(xe):window,ht=Ue.nodeName&&Ue.nodeName.toLowerCase(),ht==="select"||ht==="input"&&Ue.type==="file")var St=zj;else if(ck(Ue))if(hk)St=Hj;else{St=Vj;var It=Gj}else(ht=Ue.nodeName)&&ht.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(St=$j);if(St&&(St=St(d,xe))){dk(Ve,St,y,Be);break e}It&&It(d,Ue,xe),d==="focusout"&&(It=Ue._wrapperState)&&It.controlled&&Ue.type==="number"&&Qt(Ue,"number",Ue.value)}switch(It=xe?Ac(xe):window,d){case"focusin":(ck(It)||It.contentEditable==="true")&&(Sc=It,qv=xe,mp=null);break;case"focusout":mp=qv=Sc=null;break;case"mousedown":Xv=!0;break;case"contextmenu":case"mouseup":case"dragend":Xv=!1,vk(Ve,y,Be);break;case"selectionchange":if(qj)break;case"keydown":case"keyup":vk(Ve,y,Be)}var kt;if($v)e:{switch(d){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else xc?lk(d,y)&&(Gt="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(Gt="onCompositionStart");Gt&&(sk&&y.locale!=="ko"&&(xc||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&xc&&(kt=ek()):(Qo=Be,Fv="value"in Qo?Qo.value:Qo.textContent,xc=!0)),It=Lm(xe,Gt),0<It.length&&(Gt=new rk(Gt,d,null,y,Be),Ve.push({event:Gt,listeners:It}),kt?Gt.data=kt:(kt=uk(y),kt!==null&&(Gt.data=kt)))),(kt=Oj?Pj(d,y):Fj(d,y))&&(xe=Lm(xe,"onBeforeInput"),0<xe.length&&(Be=new rk("onBeforeInput","beforeinput",null,y,Be),Ve.push({event:Be,listeners:xe}),Be.data=kt))}Ck(Ve,p)})}function _p(d,p,y){return{instance:d,listener:p,currentTarget:y}}function Lm(d,p){for(var y=p+"Capture",x=[];d!==null;){var T=d,N=T.stateNode;T.tag===5&&N!==null&&(T=N,N=Si(d,y),N!=null&&x.unshift(_p(d,N,T)),N=Si(d,p),N!=null&&x.push(_p(d,N,T))),d=d.return}return x}function Tc(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Ik(d,p,y,x,T){for(var N=p._reactName,F=[];y!==null&&y!==x;){var ee=y,oe=ee.alternate,xe=ee.stateNode;if(oe!==null&&oe===x)break;ee.tag===5&&xe!==null&&(ee=xe,T?(oe=Si(y,N),oe!=null&&F.unshift(_p(y,oe,ee))):T||(oe=Si(y,N),oe!=null&&F.push(_p(y,oe,ee)))),y=y.return}F.length!==0&&d.push({event:p,listeners:F})}var Zj=/\r\n?/g,Qj=/\u0000|\uFFFD/g;function kk(d){return(typeof d=="string"?d:""+d).replace(Zj,`
`).replace(Qj,"")}function Dm(d,p,y){if(p=kk(p),kk(d)!==p&&y)throw Error(t(425))}function Om(){}var ex=null,tx=null;function nx(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var rx=typeof setTimeout=="function"?setTimeout:void 0,Jj=typeof clearTimeout=="function"?clearTimeout:void 0,Lk=typeof Promise=="function"?Promise:void 0,e5=typeof queueMicrotask=="function"?queueMicrotask:typeof Lk<"u"?function(d){return Lk.resolve(null).then(d).catch(t5)}:rx;function t5(d){setTimeout(function(){throw d})}function ix(d,p){var y=p,x=0;do{var T=y.nextSibling;if(d.removeChild(y),T&&T.nodeType===8)if(y=T.data,y==="/$"){if(x===0){d.removeChild(T),up(p);return}x--}else y!=="$"&&y!=="$?"&&y!=="$!"||x++;y=T}while(y);up(p)}function el(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return d}function Dk(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"){if(p===0)return d;p--}else y==="/$"&&p++}d=d.previousSibling}return null}var wc=Math.random().toString(36).slice(2),Sa="__reactFiber$"+wc,vp="__reactProps$"+wc,ao="__reactContainer$"+wc,sx="__reactEvents$"+wc,n5="__reactListeners$"+wc,r5="__reactHandles$"+wc;function nu(d){var p=d[Sa];if(p)return p;for(var y=d.parentNode;y;){if(p=y[ao]||y[Sa]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(d=Dk(d);d!==null;){if(y=d[Sa])return y;d=Dk(d)}return p}d=y,y=d.parentNode}return null}function xp(d){return d=d[Sa]||d[ao],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ac(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Pm(d){return d[vp]||null}var ax=[],Rc=-1;function tl(d){return{current:d}}function Yn(d){0>Rc||(d.current=ax[Rc],ax[Rc]=null,Rc--)}function $n(d,p){Rc++,ax[Rc]=d.current,d.current=p}var nl={},si=tl(nl),zi=tl(!1),ru=nl;function Nc(d,p){var y=d.type.contextTypes;if(!y)return nl;var x=d.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===p)return x.__reactInternalMemoizedMaskedChildContext;var T={},N;for(N in y)T[N]=p[N];return x&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=T),T}function Gi(d){return d=d.childContextTypes,d!=null}function Fm(){Yn(zi),Yn(si)}function Ok(d,p,y){if(si.current!==nl)throw Error(t(168));$n(si,p),$n(zi,y)}function Pk(d,p,y){var x=d.stateNode;if(p=p.childContextTypes,typeof x.getChildContext!="function")return y;x=x.getChildContext();for(var T in x)if(!(T in p))throw Error(t(108,ae(d)||"Unknown",T));return D({},y,x)}function Um(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||nl,ru=si.current,$n(si,d),$n(zi,zi.current),!0}function Fk(d,p,y){var x=d.stateNode;if(!x)throw Error(t(169));y?(d=Pk(d,p,ru),x.__reactInternalMemoizedMergedChildContext=d,Yn(zi),Yn(si),$n(si,d)):Yn(zi),$n(zi,y)}var oo=null,Bm=!1,ox=!1;function Uk(d){oo===null?oo=[d]:oo.push(d)}function i5(d){Bm=!0,Uk(d)}function rl(){if(!ox&&oo!==null){ox=!0;var d=0,p=qt;try{var y=oo;for(qt=1;d<y.length;d++){var x=y[d];do x=x(!0);while(x!==null)}oo=null,Bm=!1}catch(T){throw oo!==null&&(oo=oo.slice(d+1)),_m(pe,rl),T}finally{qt=p,ox=!1}}return null}var Cc=[],Mc=0,zm=null,Gm=0,Rs=[],Ns=0,iu=null,lo=1,uo="";function su(d,p){Cc[Mc++]=Gm,Cc[Mc++]=zm,zm=d,Gm=p}function Bk(d,p,y){Rs[Ns++]=lo,Rs[Ns++]=uo,Rs[Ns++]=iu,iu=d;var x=lo;d=uo;var T=32-gt(x)-1;x&=~(1<<T),y+=1;var N=32-gt(p)+T;if(30<N){var F=T-T%5;N=(x&(1<<F)-1).toString(32),x>>=F,T-=F,lo=1<<32-gt(p)+T|y<<T|x,uo=N+d}else lo=1<<N|y<<T|x,uo=d}function lx(d){d.return!==null&&(su(d,1),Bk(d,1,0))}function ux(d){for(;d===zm;)zm=Cc[--Mc],Cc[Mc]=null,Gm=Cc[--Mc],Cc[Mc]=null;for(;d===iu;)iu=Rs[--Ns],Rs[Ns]=null,uo=Rs[--Ns],Rs[Ns]=null,lo=Rs[--Ns],Rs[Ns]=null}var cs=null,ds=null,Zn=!1,Ys=null;function zk(d,p){var y=ks(5,null,null,0);y.elementType="DELETED",y.stateNode=p,y.return=d,p=d.deletions,p===null?(d.deletions=[y],d.flags|=16):p.push(y)}function Gk(d,p){switch(d.tag){case 5:var y=d.type;return p=p.nodeType!==1||y.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(d.stateNode=p,cs=d,ds=el(p.firstChild),!0):!1;case 6:return p=d.pendingProps===""||p.nodeType!==3?null:p,p!==null?(d.stateNode=p,cs=d,ds=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(y=iu!==null?{id:lo,overflow:uo}:null,d.memoizedState={dehydrated:p,treeContext:y,retryLane:1073741824},y=ks(18,null,null,0),y.stateNode=p,y.return=d,d.child=y,cs=d,ds=null,!0):!1;default:return!1}}function cx(d){return(d.mode&1)!==0&&(d.flags&128)===0}function dx(d){if(Zn){var p=ds;if(p){var y=p;if(!Gk(d,p)){if(cx(d))throw Error(t(418));p=el(y.nextSibling);var x=cs;p&&Gk(d,p)?zk(x,y):(d.flags=d.flags&-4097|2,Zn=!1,cs=d)}}else{if(cx(d))throw Error(t(418));d.flags=d.flags&-4097|2,Zn=!1,cs=d}}}function Vk(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;cs=d}function Vm(d){if(d!==cs)return!1;if(!Zn)return Vk(d),Zn=!0,!1;var p;if((p=d.tag!==3)&&!(p=d.tag!==5)&&(p=d.type,p=p!=="head"&&p!=="body"&&!nx(d.type,d.memoizedProps)),p&&(p=ds)){if(cx(d))throw $k(),Error(t(418));for(;p;)zk(d,p),p=el(p.nextSibling)}if(Vk(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"){if(p===0){ds=el(d.nextSibling);break e}p--}else y!=="$"&&y!=="$!"&&y!=="$?"||p++}d=d.nextSibling}ds=null}}else ds=cs?el(d.stateNode.nextSibling):null;return!0}function $k(){for(var d=ds;d;)d=el(d.nextSibling)}function Ic(){ds=cs=null,Zn=!1}function hx(d){Ys===null?Ys=[d]:Ys.push(d)}var s5=A.ReactCurrentBatchConfig;function Sp(d,p,y){if(d=y.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var x=y.stateNode}if(!x)throw Error(t(147,d));var T=x,N=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===N?p.ref:(p=function(F){var ee=T.refs;F===null?delete ee[N]:ee[N]=F},p._stringRef=N,p)}if(typeof d!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,d))}return d}function $m(d,p){throw d=Object.prototype.toString.call(p),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function Hk(d){var p=d._init;return p(d._payload)}function jk(d){function p(me,ce){if(d){var be=me.deletions;be===null?(me.deletions=[ce],me.flags|=16):be.push(ce)}}function y(me,ce){if(!d)return null;for(;ce!==null;)p(me,ce),ce=ce.sibling;return null}function x(me,ce){for(me=new Map;ce!==null;)ce.key!==null?me.set(ce.key,ce):me.set(ce.index,ce),ce=ce.sibling;return me}function T(me,ce){return me=dl(me,ce),me.index=0,me.sibling=null,me}function N(me,ce,be){return me.index=be,d?(be=me.alternate,be!==null?(be=be.index,be<ce?(me.flags|=2,ce):be):(me.flags|=2,ce)):(me.flags|=1048576,ce)}function F(me){return d&&me.alternate===null&&(me.flags|=2),me}function ee(me,ce,be,Ye){return ce===null||ce.tag!==6?(ce=rS(be,me.mode,Ye),ce.return=me,ce):(ce=T(ce,be),ce.return=me,ce)}function oe(me,ce,be,Ye){var St=be.type;return St===M?Be(me,ce,be.props.children,Ye,be.key):ce!==null&&(ce.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Q&&Hk(St)===ce.type)?(Ye=T(ce,be.props),Ye.ref=Sp(me,ce,be),Ye.return=me,Ye):(Ye=py(be.type,be.key,be.props,null,me.mode,Ye),Ye.ref=Sp(me,ce,be),Ye.return=me,Ye)}function xe(me,ce,be,Ye){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==be.containerInfo||ce.stateNode.implementation!==be.implementation?(ce=iS(be,me.mode,Ye),ce.return=me,ce):(ce=T(ce,be.children||[]),ce.return=me,ce)}function Be(me,ce,be,Ye,St){return ce===null||ce.tag!==7?(ce=pu(be,me.mode,Ye,St),ce.return=me,ce):(ce=T(ce,be),ce.return=me,ce)}function Ve(me,ce,be){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=rS(""+ce,me.mode,be),ce.return=me,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case R:return be=py(ce.type,ce.key,ce.props,null,me.mode,be),be.ref=Sp(me,null,ce),be.return=me,be;case w:return ce=iS(ce,me.mode,be),ce.return=me,ce;case Q:var Ye=ce._init;return Ve(me,Ye(ce._payload),be)}if(Ot(ce)||re(ce))return ce=pu(ce,me.mode,be,null),ce.return=me,ce;$m(me,ce)}return null}function Ue(me,ce,be,Ye){var St=ce!==null?ce.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return St!==null?null:ee(me,ce,""+be,Ye);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case R:return be.key===St?oe(me,ce,be,Ye):null;case w:return be.key===St?xe(me,ce,be,Ye):null;case Q:return St=be._init,Ue(me,ce,St(be._payload),Ye)}if(Ot(be)||re(be))return St!==null?null:Be(me,ce,be,Ye,null);$m(me,be)}return null}function ht(me,ce,be,Ye,St){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return me=me.get(be)||null,ee(ce,me,""+Ye,St);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case R:return me=me.get(Ye.key===null?be:Ye.key)||null,oe(ce,me,Ye,St);case w:return me=me.get(Ye.key===null?be:Ye.key)||null,xe(ce,me,Ye,St);case Q:var It=Ye._init;return ht(me,ce,be,It(Ye._payload),St)}if(Ot(Ye)||re(Ye))return me=me.get(be)||null,Be(ce,me,Ye,St,null);$m(ce,Ye)}return null}function _t(me,ce,be,Ye){for(var St=null,It=null,kt=ce,Gt=ce=0,Br=null;kt!==null&&Gt<be.length;Gt++){kt.index>Gt?(Br=kt,kt=null):Br=kt.sibling;var bn=Ue(me,kt,be[Gt],Ye);if(bn===null){kt===null&&(kt=Br);break}d&&kt&&bn.alternate===null&&p(me,kt),ce=N(bn,ce,Gt),It===null?St=bn:It.sibling=bn,It=bn,kt=Br}if(Gt===be.length)return y(me,kt),Zn&&su(me,Gt),St;if(kt===null){for(;Gt<be.length;Gt++)kt=Ve(me,be[Gt],Ye),kt!==null&&(ce=N(kt,ce,Gt),It===null?St=kt:It.sibling=kt,It=kt);return Zn&&su(me,Gt),St}for(kt=x(me,kt);Gt<be.length;Gt++)Br=ht(kt,me,Gt,be[Gt],Ye),Br!==null&&(d&&Br.alternate!==null&&kt.delete(Br.key===null?Gt:Br.key),ce=N(Br,ce,Gt),It===null?St=Br:It.sibling=Br,It=Br);return d&&kt.forEach(function(hl){return p(me,hl)}),Zn&&su(me,Gt),St}function vt(me,ce,be,Ye){var St=re(be);if(typeof St!="function")throw Error(t(150));if(be=St.call(be),be==null)throw Error(t(151));for(var It=St=null,kt=ce,Gt=ce=0,Br=null,bn=be.next();kt!==null&&!bn.done;Gt++,bn=be.next()){kt.index>Gt?(Br=kt,kt=null):Br=kt.sibling;var hl=Ue(me,kt,bn.value,Ye);if(hl===null){kt===null&&(kt=Br);break}d&&kt&&hl.alternate===null&&p(me,kt),ce=N(hl,ce,Gt),It===null?St=hl:It.sibling=hl,It=hl,kt=Br}if(bn.done)return y(me,kt),Zn&&su(me,Gt),St;if(kt===null){for(;!bn.done;Gt++,bn=be.next())bn=Ve(me,bn.value,Ye),bn!==null&&(ce=N(bn,ce,Gt),It===null?St=bn:It.sibling=bn,It=bn);return Zn&&su(me,Gt),St}for(kt=x(me,kt);!bn.done;Gt++,bn=be.next())bn=ht(kt,me,Gt,bn.value,Ye),bn!==null&&(d&&bn.alternate!==null&&kt.delete(bn.key===null?Gt:bn.key),ce=N(bn,ce,Gt),It===null?St=bn:It.sibling=bn,It=bn);return d&&kt.forEach(function(U5){return p(me,U5)}),Zn&&su(me,Gt),St}function fr(me,ce,be,Ye){if(typeof be=="object"&&be!==null&&be.type===M&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case R:e:{for(var St=be.key,It=ce;It!==null;){if(It.key===St){if(St=be.type,St===M){if(It.tag===7){y(me,It.sibling),ce=T(It,be.props.children),ce.return=me,me=ce;break e}}else if(It.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Q&&Hk(St)===It.type){y(me,It.sibling),ce=T(It,be.props),ce.ref=Sp(me,It,be),ce.return=me,me=ce;break e}y(me,It);break}else p(me,It);It=It.sibling}be.type===M?(ce=pu(be.props.children,me.mode,Ye,be.key),ce.return=me,me=ce):(Ye=py(be.type,be.key,be.props,null,me.mode,Ye),Ye.ref=Sp(me,ce,be),Ye.return=me,me=Ye)}return F(me);case w:e:{for(It=be.key;ce!==null;){if(ce.key===It)if(ce.tag===4&&ce.stateNode.containerInfo===be.containerInfo&&ce.stateNode.implementation===be.implementation){y(me,ce.sibling),ce=T(ce,be.children||[]),ce.return=me,me=ce;break e}else{y(me,ce);break}else p(me,ce);ce=ce.sibling}ce=iS(be,me.mode,Ye),ce.return=me,me=ce}return F(me);case Q:return It=be._init,fr(me,ce,It(be._payload),Ye)}if(Ot(be))return _t(me,ce,be,Ye);if(re(be))return vt(me,ce,be,Ye);$m(me,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,ce!==null&&ce.tag===6?(y(me,ce.sibling),ce=T(ce,be),ce.return=me,me=ce):(y(me,ce),ce=rS(be,me.mode,Ye),ce.return=me,me=ce),F(me)):y(me,ce)}return fr}var kc=jk(!0),Wk=jk(!1),Hm=tl(null),jm=null,Lc=null,px=null;function fx(){px=Lc=jm=null}function gx(d){var p=Hm.current;Yn(Hm),d._currentValue=p}function mx(d,p,y){for(;d!==null;){var x=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,x!==null&&(x.childLanes|=p)):x!==null&&(x.childLanes&p)!==p&&(x.childLanes|=p),d===y)break;d=d.return}}function Dc(d,p){jm=d,px=Lc=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Vi=!0),d.firstContext=null)}function Cs(d){var p=d._currentValue;if(px!==d)if(d={context:d,memoizedValue:p,next:null},Lc===null){if(jm===null)throw Error(t(308));Lc=d,jm.dependencies={lanes:0,firstContext:d}}else Lc=Lc.next=d;return p}var au=null;function yx(d){au===null?au=[d]:au.push(d)}function qk(d,p,y,x){var T=p.interleaved;return T===null?(y.next=y,yx(p)):(y.next=T.next,T.next=y),p.interleaved=y,co(d,x)}function co(d,p){d.lanes|=p;var y=d.alternate;for(y!==null&&(y.lanes|=p),y=d,d=d.return;d!==null;)d.childLanes|=p,y=d.alternate,y!==null&&(y.childLanes|=p),y=d,d=d.return;return y.tag===3?y.stateNode:null}var il=!1;function bx(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xk(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ho(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function sl(d,p,y){var x=d.updateQueue;if(x===null)return null;if(x=x.shared,(gn&2)!==0){var T=x.pending;return T===null?p.next=p:(p.next=T.next,T.next=p),x.pending=p,co(d,y)}return T=x.interleaved,T===null?(p.next=p,yx(x)):(p.next=T.next,T.next=p),x.interleaved=p,co(d,y)}function Wm(d,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194240)!==0)){var x=p.lanes;x&=d.pendingLanes,y|=x,p.lanes=y,Tn(d,y)}}function Yk(d,p){var y=d.updateQueue,x=d.alternate;if(x!==null&&(x=x.updateQueue,y===x)){var T=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var F={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};N===null?T=N=F:N=N.next=F,y=y.next}while(y!==null);N===null?T=N=p:N=N.next=p}else T=N=p;y={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:N,shared:x.shared,effects:x.effects},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=p:d.next=p,y.lastBaseUpdate=p}function qm(d,p,y,x){var T=d.updateQueue;il=!1;var N=T.firstBaseUpdate,F=T.lastBaseUpdate,ee=T.shared.pending;if(ee!==null){T.shared.pending=null;var oe=ee,xe=oe.next;oe.next=null,F===null?N=xe:F.next=xe,F=oe;var Be=d.alternate;Be!==null&&(Be=Be.updateQueue,ee=Be.lastBaseUpdate,ee!==F&&(ee===null?Be.firstBaseUpdate=xe:ee.next=xe,Be.lastBaseUpdate=oe))}if(N!==null){var Ve=T.baseState;F=0,Be=xe=oe=null,ee=N;do{var Ue=ee.lane,ht=ee.eventTime;if((x&Ue)===Ue){Be!==null&&(Be=Be.next={eventTime:ht,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var _t=d,vt=ee;switch(Ue=p,ht=y,vt.tag){case 1:if(_t=vt.payload,typeof _t=="function"){Ve=_t.call(ht,Ve,Ue);break e}Ve=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=vt.payload,Ue=typeof _t=="function"?_t.call(ht,Ve,Ue):_t,Ue==null)break e;Ve=D({},Ve,Ue);break e;case 2:il=!0}}ee.callback!==null&&ee.lane!==0&&(d.flags|=64,Ue=T.effects,Ue===null?T.effects=[ee]:Ue.push(ee))}else ht={eventTime:ht,lane:Ue,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Be===null?(xe=Be=ht,oe=Ve):Be=Be.next=ht,F|=Ue;if(ee=ee.next,ee===null){if(ee=T.shared.pending,ee===null)break;Ue=ee,ee=Ue.next,Ue.next=null,T.lastBaseUpdate=Ue,T.shared.pending=null}}while(!0);if(Be===null&&(oe=Ve),T.baseState=oe,T.firstBaseUpdate=xe,T.lastBaseUpdate=Be,p=T.shared.interleaved,p!==null){T=p;do F|=T.lane,T=T.next;while(T!==p)}else N===null&&(T.shared.lanes=0);uu|=F,d.lanes=F,d.memoizedState=Ve}}function Kk(d,p,y){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var x=d[p],T=x.callback;if(T!==null){if(x.callback=null,x=y,typeof T!="function")throw Error(t(191,T));T.call(x)}}}var Ep={},Ea=tl(Ep),Tp=tl(Ep),wp=tl(Ep);function ou(d){if(d===Ep)throw Error(t(174));return d}function _x(d,p){switch($n(wp,p),$n(Tp,d),$n(Ea,Ep),d=p.nodeType,d){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:de(null,"");break;default:d=d===8?p.parentNode:p,p=d.namespaceURI||null,d=d.tagName,p=de(p,d)}Yn(Ea),$n(Ea,p)}function Oc(){Yn(Ea),Yn(Tp),Yn(wp)}function Zk(d){ou(wp.current);var p=ou(Ea.current),y=de(p,d.type);p!==y&&($n(Tp,d),$n(Ea,y))}function vx(d){Tp.current===d&&(Yn(Ea),Yn(Tp))}var sr=tl(0);function Xm(d){for(var p=d;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var xx=[];function Sx(){for(var d=0;d<xx.length;d++)xx[d]._workInProgressVersionPrimary=null;xx.length=0}var Ym=A.ReactCurrentDispatcher,Ex=A.ReactCurrentBatchConfig,lu=0,ar=null,Cr=null,Fr=null,Km=!1,Ap=!1,Rp=0,a5=0;function ai(){throw Error(t(321))}function Tx(d,p){if(p===null)return!1;for(var y=0;y<p.length&&y<d.length;y++)if(!Xs(d[y],p[y]))return!1;return!0}function wx(d,p,y,x,T,N){if(lu=N,ar=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Ym.current=d===null||d.memoizedState===null?c5:d5,d=y(x,T),Ap){N=0;do{if(Ap=!1,Rp=0,25<=N)throw Error(t(301));N+=1,Fr=Cr=null,p.updateQueue=null,Ym.current=h5,d=y(x,T)}while(Ap)}if(Ym.current=Jm,p=Cr!==null&&Cr.next!==null,lu=0,Fr=Cr=ar=null,Km=!1,p)throw Error(t(300));return d}function Ax(){var d=Rp!==0;return Rp=0,d}function Ta(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?ar.memoizedState=Fr=d:Fr=Fr.next=d,Fr}function Ms(){if(Cr===null){var d=ar.alternate;d=d!==null?d.memoizedState:null}else d=Cr.next;var p=Fr===null?ar.memoizedState:Fr.next;if(p!==null)Fr=p,Cr=d;else{if(d===null)throw Error(t(310));Cr=d,d={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Fr===null?ar.memoizedState=Fr=d:Fr=Fr.next=d}return Fr}function Np(d,p){return typeof p=="function"?p(d):p}function Rx(d){var p=Ms(),y=p.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=d;var x=Cr,T=x.baseQueue,N=y.pending;if(N!==null){if(T!==null){var F=T.next;T.next=N.next,N.next=F}x.baseQueue=T=N,y.pending=null}if(T!==null){N=T.next,x=x.baseState;var ee=F=null,oe=null,xe=N;do{var Be=xe.lane;if((lu&Be)===Be)oe!==null&&(oe=oe.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),x=xe.hasEagerState?xe.eagerState:d(x,xe.action);else{var Ve={lane:Be,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};oe===null?(ee=oe=Ve,F=x):oe=oe.next=Ve,ar.lanes|=Be,uu|=Be}xe=xe.next}while(xe!==null&&xe!==N);oe===null?F=x:oe.next=ee,Xs(x,p.memoizedState)||(Vi=!0),p.memoizedState=x,p.baseState=F,p.baseQueue=oe,y.lastRenderedState=x}if(d=y.interleaved,d!==null){T=d;do N=T.lane,ar.lanes|=N,uu|=N,T=T.next;while(T!==d)}else T===null&&(y.lanes=0);return[p.memoizedState,y.dispatch]}function Nx(d){var p=Ms(),y=p.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=d;var x=y.dispatch,T=y.pending,N=p.memoizedState;if(T!==null){y.pending=null;var F=T=T.next;do N=d(N,F.action),F=F.next;while(F!==T);Xs(N,p.memoizedState)||(Vi=!0),p.memoizedState=N,p.baseQueue===null&&(p.baseState=N),y.lastRenderedState=N}return[N,x]}function Qk(){}function Jk(d,p){var y=ar,x=Ms(),T=p(),N=!Xs(x.memoizedState,T);if(N&&(x.memoizedState=T,Vi=!0),x=x.queue,Cx(nL.bind(null,y,x,d),[d]),x.getSnapshot!==p||N||Fr!==null&&Fr.memoizedState.tag&1){if(y.flags|=2048,Cp(9,tL.bind(null,y,x,T,p),void 0,null),Ur===null)throw Error(t(349));(lu&30)!==0||eL(y,p,T)}return T}function eL(d,p,y){d.flags|=16384,d={getSnapshot:p,value:y},p=ar.updateQueue,p===null?(p={lastEffect:null,stores:null},ar.updateQueue=p,p.stores=[d]):(y=p.stores,y===null?p.stores=[d]:y.push(d))}function tL(d,p,y,x){p.value=y,p.getSnapshot=x,rL(p)&&iL(d)}function nL(d,p,y){return y(function(){rL(p)&&iL(d)})}function rL(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!Xs(d,y)}catch{return!0}}function iL(d){var p=co(d,1);p!==null&&Js(p,d,1,-1)}function sL(d){var p=Ta();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:d},p.queue=d,d=d.dispatch=u5.bind(null,ar,d),[p.memoizedState,d]}function Cp(d,p,y,x){return d={tag:d,create:p,destroy:y,deps:x,next:null},p=ar.updateQueue,p===null?(p={lastEffect:null,stores:null},ar.updateQueue=p,p.lastEffect=d.next=d):(y=p.lastEffect,y===null?p.lastEffect=d.next=d:(x=y.next,y.next=d,d.next=x,p.lastEffect=d)),d}function aL(){return Ms().memoizedState}function Zm(d,p,y,x){var T=Ta();ar.flags|=d,T.memoizedState=Cp(1|p,y,void 0,x===void 0?null:x)}function Qm(d,p,y,x){var T=Ms();x=x===void 0?null:x;var N=void 0;if(Cr!==null){var F=Cr.memoizedState;if(N=F.destroy,x!==null&&Tx(x,F.deps)){T.memoizedState=Cp(p,y,N,x);return}}ar.flags|=d,T.memoizedState=Cp(1|p,y,N,x)}function oL(d,p){return Zm(8390656,8,d,p)}function Cx(d,p){return Qm(2048,8,d,p)}function lL(d,p){return Qm(4,2,d,p)}function uL(d,p){return Qm(4,4,d,p)}function cL(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function dL(d,p,y){return y=y!=null?y.concat([d]):null,Qm(4,4,cL.bind(null,p,d),y)}function Mx(){}function hL(d,p){var y=Ms();p=p===void 0?null:p;var x=y.memoizedState;return x!==null&&p!==null&&Tx(p,x[1])?x[0]:(y.memoizedState=[d,p],d)}function pL(d,p){var y=Ms();p=p===void 0?null:p;var x=y.memoizedState;return x!==null&&p!==null&&Tx(p,x[1])?x[0]:(d=d(),y.memoizedState=[d,p],d)}function fL(d,p,y){return(lu&21)===0?(d.baseState&&(d.baseState=!1,Vi=!0),d.memoizedState=y):(Xs(y,p)||(y=ii(),ar.lanes|=y,uu|=y,d.baseState=!0),p)}function o5(d,p){var y=qt;qt=y!==0&&4>y?y:4,d(!0);var x=Ex.transition;Ex.transition={};try{d(!1),p()}finally{qt=y,Ex.transition=x}}function gL(){return Ms().memoizedState}function l5(d,p,y){var x=ul(d);if(y={lane:x,action:y,hasEagerState:!1,eagerState:null,next:null},mL(d))yL(p,y);else if(y=qk(d,p,y,x),y!==null){var T=wi();Js(y,d,x,T),bL(y,p,x)}}function u5(d,p,y){var x=ul(d),T={lane:x,action:y,hasEagerState:!1,eagerState:null,next:null};if(mL(d))yL(p,T);else{var N=d.alternate;if(d.lanes===0&&(N===null||N.lanes===0)&&(N=p.lastRenderedReducer,N!==null))try{var F=p.lastRenderedState,ee=N(F,y);if(T.hasEagerState=!0,T.eagerState=ee,Xs(ee,F)){var oe=p.interleaved;oe===null?(T.next=T,yx(p)):(T.next=oe.next,oe.next=T),p.interleaved=T;return}}catch{}finally{}y=qk(d,p,T,x),y!==null&&(T=wi(),Js(y,d,x,T),bL(y,p,x))}}function mL(d){var p=d.alternate;return d===ar||p!==null&&p===ar}function yL(d,p){Ap=Km=!0;var y=d.pending;y===null?p.next=p:(p.next=y.next,y.next=p),d.pending=p}function bL(d,p,y){if((y&4194240)!==0){var x=p.lanes;x&=d.pendingLanes,y|=x,p.lanes=y,Tn(d,y)}}var Jm={readContext:Cs,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},c5={readContext:Cs,useCallback:function(d,p){return Ta().memoizedState=[d,p===void 0?null:p],d},useContext:Cs,useEffect:oL,useImperativeHandle:function(d,p,y){return y=y!=null?y.concat([d]):null,Zm(4194308,4,cL.bind(null,p,d),y)},useLayoutEffect:function(d,p){return Zm(4194308,4,d,p)},useInsertionEffect:function(d,p){return Zm(4,2,d,p)},useMemo:function(d,p){var y=Ta();return p=p===void 0?null:p,d=d(),y.memoizedState=[d,p],d},useReducer:function(d,p,y){var x=Ta();return p=y!==void 0?y(p):p,x.memoizedState=x.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},x.queue=d,d=d.dispatch=l5.bind(null,ar,d),[x.memoizedState,d]},useRef:function(d){var p=Ta();return d={current:d},p.memoizedState=d},useState:sL,useDebugValue:Mx,useDeferredValue:function(d){return Ta().memoizedState=d},useTransition:function(){var d=sL(!1),p=d[0];return d=o5.bind(null,d[1]),Ta().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,y){var x=ar,T=Ta();if(Zn){if(y===void 0)throw Error(t(407));y=y()}else{if(y=p(),Ur===null)throw Error(t(349));(lu&30)!==0||eL(x,p,y)}T.memoizedState=y;var N={value:y,getSnapshot:p};return T.queue=N,oL(nL.bind(null,x,N,d),[d]),x.flags|=2048,Cp(9,tL.bind(null,x,N,y,p),void 0,null),y},useId:function(){var d=Ta(),p=Ur.identifierPrefix;if(Zn){var y=uo,x=lo;y=(x&~(1<<32-gt(x)-1)).toString(32)+y,p=":"+p+"R"+y,y=Rp++,0<y&&(p+="H"+y.toString(32)),p+=":"}else y=a5++,p=":"+p+"r"+y.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},d5={readContext:Cs,useCallback:hL,useContext:Cs,useEffect:Cx,useImperativeHandle:dL,useInsertionEffect:lL,useLayoutEffect:uL,useMemo:pL,useReducer:Rx,useRef:aL,useState:function(){return Rx(Np)},useDebugValue:Mx,useDeferredValue:function(d){var p=Ms();return fL(p,Cr.memoizedState,d)},useTransition:function(){var d=Rx(Np)[0],p=Ms().memoizedState;return[d,p]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:gL,unstable_isNewReconciler:!1},h5={readContext:Cs,useCallback:hL,useContext:Cs,useEffect:Cx,useImperativeHandle:dL,useInsertionEffect:lL,useLayoutEffect:uL,useMemo:pL,useReducer:Nx,useRef:aL,useState:function(){return Nx(Np)},useDebugValue:Mx,useDeferredValue:function(d){var p=Ms();return Cr===null?p.memoizedState=d:fL(p,Cr.memoizedState,d)},useTransition:function(){var d=Nx(Np)[0],p=Ms().memoizedState;return[d,p]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:gL,unstable_isNewReconciler:!1};function Ks(d,p){if(d&&d.defaultProps){p=D({},p),d=d.defaultProps;for(var y in d)p[y]===void 0&&(p[y]=d[y]);return p}return p}function Ix(d,p,y,x){p=d.memoizedState,y=y(x,p),y=y==null?p:D({},p,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var ey={isMounted:function(d){return(d=d._reactInternals)?As(d)===d:!1},enqueueSetState:function(d,p,y){d=d._reactInternals;var x=wi(),T=ul(d),N=ho(x,T);N.payload=p,y!=null&&(N.callback=y),p=sl(d,N,T),p!==null&&(Js(p,d,T,x),Wm(p,d,T))},enqueueReplaceState:function(d,p,y){d=d._reactInternals;var x=wi(),T=ul(d),N=ho(x,T);N.tag=1,N.payload=p,y!=null&&(N.callback=y),p=sl(d,N,T),p!==null&&(Js(p,d,T,x),Wm(p,d,T))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var y=wi(),x=ul(d),T=ho(y,x);T.tag=2,p!=null&&(T.callback=p),p=sl(d,T,x),p!==null&&(Js(p,d,x,y),Wm(p,d,x))}};function _L(d,p,y,x,T,N,F){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(x,N,F):p.prototype&&p.prototype.isPureReactComponent?!gp(y,x)||!gp(T,N):!0}function vL(d,p,y){var x=!1,T=nl,N=p.contextType;return typeof N=="object"&&N!==null?N=Cs(N):(T=Gi(p)?ru:si.current,x=p.contextTypes,N=(x=x!=null)?Nc(d,T):nl),p=new p(y,N),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ey,d.stateNode=p,p._reactInternals=d,x&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=T,d.__reactInternalMemoizedMaskedChildContext=N),p}function xL(d,p,y,x){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,x),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,x),p.state!==d&&ey.enqueueReplaceState(p,p.state,null)}function kx(d,p,y,x){var T=d.stateNode;T.props=y,T.state=d.memoizedState,T.refs={},bx(d);var N=p.contextType;typeof N=="object"&&N!==null?T.context=Cs(N):(N=Gi(p)?ru:si.current,T.context=Nc(d,N)),T.state=d.memoizedState,N=p.getDerivedStateFromProps,typeof N=="function"&&(Ix(d,p,N,y),T.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(p=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),p!==T.state&&ey.enqueueReplaceState(T,T.state,null),qm(d,y,T,x),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308)}function Pc(d,p){try{var y="",x=p;do y+=Y(x),x=x.return;while(x);var T=y}catch(N){T=`
Error generating stack: `+N.message+`
`+N.stack}return{value:d,source:p,stack:T,digest:null}}function Lx(d,p,y){return{value:d,source:null,stack:y??null,digest:p??null}}function Dx(d,p){try{console.error(p.value)}catch(y){setTimeout(function(){throw y})}}var p5=typeof WeakMap=="function"?WeakMap:Map;function SL(d,p,y){y=ho(-1,y),y.tag=3,y.payload={element:null};var x=p.value;return y.callback=function(){oy||(oy=!0,Yx=x),Dx(d,p)},y}function EL(d,p,y){y=ho(-1,y),y.tag=3;var x=d.type.getDerivedStateFromError;if(typeof x=="function"){var T=p.value;y.payload=function(){return x(T)},y.callback=function(){Dx(d,p)}}var N=d.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(y.callback=function(){Dx(d,p),typeof x!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})}),y}function TL(d,p,y){var x=d.pingCache;if(x===null){x=d.pingCache=new p5;var T=new Set;x.set(p,T)}else T=x.get(p),T===void 0&&(T=new Set,x.set(p,T));T.has(y)||(T.add(y),d=R5.bind(null,d,p,y),p.then(d,d))}function wL(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function AL(d,p,y,x,T){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(p=ho(-1,1),p.tag=2,sl(y,p,1))),y.lanes|=1),d):(d.flags|=65536,d.lanes=T,d)}var f5=A.ReactCurrentOwner,Vi=!1;function Ti(d,p,y,x){p.child=d===null?Wk(p,null,y,x):kc(p,d.child,y,x)}function RL(d,p,y,x,T){y=y.render;var N=p.ref;return Dc(p,T),x=wx(d,p,y,x,N,T),y=Ax(),d!==null&&!Vi?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~T,po(d,p,T)):(Zn&&y&&lx(p),p.flags|=1,Ti(d,p,x,T),p.child)}function NL(d,p,y,x,T){if(d===null){var N=y.type;return typeof N=="function"&&!nS(N)&&N.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(p.tag=15,p.type=N,CL(d,p,N,x,T)):(d=py(y.type,null,x,p,p.mode,T),d.ref=p.ref,d.return=p,p.child=d)}if(N=d.child,(d.lanes&T)===0){var F=N.memoizedProps;if(y=y.compare,y=y!==null?y:gp,y(F,x)&&d.ref===p.ref)return po(d,p,T)}return p.flags|=1,d=dl(N,x),d.ref=p.ref,d.return=p,p.child=d}function CL(d,p,y,x,T){if(d!==null){var N=d.memoizedProps;if(gp(N,x)&&d.ref===p.ref)if(Vi=!1,p.pendingProps=x=N,(d.lanes&T)!==0)(d.flags&131072)!==0&&(Vi=!0);else return p.lanes=d.lanes,po(d,p,T)}return Ox(d,p,y,x,T)}function ML(d,p,y){var x=p.pendingProps,T=x.children,N=d!==null?d.memoizedState:null;if(x.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Uc,hs),hs|=y;else{if((y&1073741824)===0)return d=N!==null?N.baseLanes|y:y,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,$n(Uc,hs),hs|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=N!==null?N.baseLanes:y,$n(Uc,hs),hs|=x}else N!==null?(x=N.baseLanes|y,p.memoizedState=null):x=y,$n(Uc,hs),hs|=x;return Ti(d,p,T,y),p.child}function IL(d,p){var y=p.ref;(d===null&&y!==null||d!==null&&d.ref!==y)&&(p.flags|=512,p.flags|=2097152)}function Ox(d,p,y,x,T){var N=Gi(y)?ru:si.current;return N=Nc(p,N),Dc(p,T),y=wx(d,p,y,x,N,T),x=Ax(),d!==null&&!Vi?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~T,po(d,p,T)):(Zn&&x&&lx(p),p.flags|=1,Ti(d,p,y,T),p.child)}function kL(d,p,y,x,T){if(Gi(y)){var N=!0;Um(p)}else N=!1;if(Dc(p,T),p.stateNode===null)ny(d,p),vL(p,y,x),kx(p,y,x,T),x=!0;else if(d===null){var F=p.stateNode,ee=p.memoizedProps;F.props=ee;var oe=F.context,xe=y.contextType;typeof xe=="object"&&xe!==null?xe=Cs(xe):(xe=Gi(y)?ru:si.current,xe=Nc(p,xe));var Be=y.getDerivedStateFromProps,Ve=typeof Be=="function"||typeof F.getSnapshotBeforeUpdate=="function";Ve||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ee!==x||oe!==xe)&&xL(p,F,x,xe),il=!1;var Ue=p.memoizedState;F.state=Ue,qm(p,x,F,T),oe=p.memoizedState,ee!==x||Ue!==oe||zi.current||il?(typeof Be=="function"&&(Ix(p,y,Be,x),oe=p.memoizedState),(ee=il||_L(p,y,ee,x,Ue,oe,xe))?(Ve||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(p.flags|=4194308)):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=x,p.memoizedState=oe),F.props=x,F.state=oe,F.context=xe,x=ee):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),x=!1)}else{F=p.stateNode,Xk(d,p),ee=p.memoizedProps,xe=p.type===p.elementType?ee:Ks(p.type,ee),F.props=xe,Ve=p.pendingProps,Ue=F.context,oe=y.contextType,typeof oe=="object"&&oe!==null?oe=Cs(oe):(oe=Gi(y)?ru:si.current,oe=Nc(p,oe));var ht=y.getDerivedStateFromProps;(Be=typeof ht=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ee!==Ve||Ue!==oe)&&xL(p,F,x,oe),il=!1,Ue=p.memoizedState,F.state=Ue,qm(p,x,F,T);var _t=p.memoizedState;ee!==Ve||Ue!==_t||zi.current||il?(typeof ht=="function"&&(Ix(p,y,ht,x),_t=p.memoizedState),(xe=il||_L(p,y,xe,x,Ue,_t,oe)||!1)?(Be||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(x,_t,oe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(x,_t,oe)),typeof F.componentDidUpdate=="function"&&(p.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof F.componentDidUpdate!="function"||ee===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ee===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),p.memoizedProps=x,p.memoizedState=_t),F.props=x,F.state=_t,F.context=oe,x=xe):(typeof F.componentDidUpdate!="function"||ee===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ee===d.memoizedProps&&Ue===d.memoizedState||(p.flags|=1024),x=!1)}return Px(d,p,y,x,N,T)}function Px(d,p,y,x,T,N){IL(d,p);var F=(p.flags&128)!==0;if(!x&&!F)return T&&Fk(p,y,!1),po(d,p,N);x=p.stateNode,f5.current=p;var ee=F&&typeof y.getDerivedStateFromError!="function"?null:x.render();return p.flags|=1,d!==null&&F?(p.child=kc(p,d.child,null,N),p.child=kc(p,null,ee,N)):Ti(d,p,ee,N),p.memoizedState=x.state,T&&Fk(p,y,!0),p.child}function LL(d){var p=d.stateNode;p.pendingContext?Ok(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Ok(d,p.context,!1),_x(d,p.containerInfo)}function DL(d,p,y,x,T){return Ic(),hx(T),p.flags|=256,Ti(d,p,y,x),p.child}var Fx={dehydrated:null,treeContext:null,retryLane:0};function Ux(d){return{baseLanes:d,cachePool:null,transitions:null}}function OL(d,p,y){var x=p.pendingProps,T=sr.current,N=!1,F=(p.flags&128)!==0,ee;if((ee=F)||(ee=d!==null&&d.memoizedState===null?!1:(T&2)!==0),ee?(N=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(T|=1),$n(sr,T&1),d===null)return dx(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:d.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(F=x.children,d=x.fallback,N?(x=p.mode,N=p.child,F={mode:"hidden",children:F},(x&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=F):N=fy(F,x,0,null),d=pu(d,x,y,null),N.return=p,d.return=p,N.sibling=d,p.child=N,p.child.memoizedState=Ux(y),p.memoizedState=Fx,d):Bx(p,F));if(T=d.memoizedState,T!==null&&(ee=T.dehydrated,ee!==null))return g5(d,p,F,x,ee,T,y);if(N){N=x.fallback,F=p.mode,T=d.child,ee=T.sibling;var oe={mode:"hidden",children:x.children};return(F&1)===0&&p.child!==T?(x=p.child,x.childLanes=0,x.pendingProps=oe,p.deletions=null):(x=dl(T,oe),x.subtreeFlags=T.subtreeFlags&14680064),ee!==null?N=dl(ee,N):(N=pu(N,F,y,null),N.flags|=2),N.return=p,x.return=p,x.sibling=N,p.child=x,x=N,N=p.child,F=d.child.memoizedState,F=F===null?Ux(y):{baseLanes:F.baseLanes|y,cachePool:null,transitions:F.transitions},N.memoizedState=F,N.childLanes=d.childLanes&~y,p.memoizedState=Fx,x}return N=d.child,d=N.sibling,x=dl(N,{mode:"visible",children:x.children}),(p.mode&1)===0&&(x.lanes=y),x.return=p,x.sibling=null,d!==null&&(y=p.deletions,y===null?(p.deletions=[d],p.flags|=16):y.push(d)),p.child=x,p.memoizedState=null,x}function Bx(d,p){return p=fy({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function ty(d,p,y,x){return x!==null&&hx(x),kc(p,d.child,null,y),d=Bx(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function g5(d,p,y,x,T,N,F){if(y)return p.flags&256?(p.flags&=-257,x=Lx(Error(t(422))),ty(d,p,F,x)):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(N=x.fallback,T=p.mode,x=fy({mode:"visible",children:x.children},T,0,null),N=pu(N,T,F,null),N.flags|=2,x.return=p,N.return=p,x.sibling=N,p.child=x,(p.mode&1)!==0&&kc(p,d.child,null,F),p.child.memoizedState=Ux(F),p.memoizedState=Fx,N);if((p.mode&1)===0)return ty(d,p,F,null);if(T.data==="$!"){if(x=T.nextSibling&&T.nextSibling.dataset,x)var ee=x.dgst;return x=ee,N=Error(t(419)),x=Lx(N,x,void 0),ty(d,p,F,x)}if(ee=(F&d.childLanes)!==0,Vi||ee){if(x=Ur,x!==null){switch(F&-F){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(x.suspendedLanes|F))!==0?0:T,T!==0&&T!==N.retryLane&&(N.retryLane=T,co(d,T),Js(x,d,T,-1))}return tS(),x=Lx(Error(t(421))),ty(d,p,F,x)}return T.data==="$?"?(p.flags|=128,p.child=d.child,p=N5.bind(null,d),T._reactRetry=p,null):(d=N.treeContext,ds=el(T.nextSibling),cs=p,Zn=!0,Ys=null,d!==null&&(Rs[Ns++]=lo,Rs[Ns++]=uo,Rs[Ns++]=iu,lo=d.id,uo=d.overflow,iu=p),p=Bx(p,x.children),p.flags|=4096,p)}function PL(d,p,y){d.lanes|=p;var x=d.alternate;x!==null&&(x.lanes|=p),mx(d.return,p,y)}function zx(d,p,y,x,T){var N=d.memoizedState;N===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:x,tail:y,tailMode:T}:(N.isBackwards=p,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=y,N.tailMode=T)}function FL(d,p,y){var x=p.pendingProps,T=x.revealOrder,N=x.tail;if(Ti(d,p,x.children,y),x=sr.current,(x&2)!==0)x=x&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&PL(d,y,p);else if(d.tag===19)PL(d,y,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}x&=1}if($n(sr,x),(p.mode&1)===0)p.memoizedState=null;else switch(T){case"forwards":for(y=p.child,T=null;y!==null;)d=y.alternate,d!==null&&Xm(d)===null&&(T=y),y=y.sibling;y=T,y===null?(T=p.child,p.child=null):(T=y.sibling,y.sibling=null),zx(p,!1,T,y,N);break;case"backwards":for(y=null,T=p.child,p.child=null;T!==null;){if(d=T.alternate,d!==null&&Xm(d)===null){p.child=T;break}d=T.sibling,T.sibling=y,y=T,T=d}zx(p,!0,y,null,N);break;case"together":zx(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ny(d,p){(p.mode&1)===0&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function po(d,p,y){if(d!==null&&(p.dependencies=d.dependencies),uu|=p.lanes,(y&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(t(153));if(p.child!==null){for(d=p.child,y=dl(d,d.pendingProps),p.child=y,y.return=p;d.sibling!==null;)d=d.sibling,y=y.sibling=dl(d,d.pendingProps),y.return=p;y.sibling=null}return p.child}function m5(d,p,y){switch(p.tag){case 3:LL(p),Ic();break;case 5:Zk(p);break;case 1:Gi(p.type)&&Um(p);break;case 4:_x(p,p.stateNode.containerInfo);break;case 10:var x=p.type._context,T=p.memoizedProps.value;$n(Hm,x._currentValue),x._currentValue=T;break;case 13:if(x=p.memoizedState,x!==null)return x.dehydrated!==null?($n(sr,sr.current&1),p.flags|=128,null):(y&p.child.childLanes)!==0?OL(d,p,y):($n(sr,sr.current&1),d=po(d,p,y),d!==null?d.sibling:null);$n(sr,sr.current&1);break;case 19:if(x=(y&p.childLanes)!==0,(d.flags&128)!==0){if(x)return FL(d,p,y);p.flags|=128}if(T=p.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),$n(sr,sr.current),x)break;return null;case 22:case 23:return p.lanes=0,ML(d,p,y)}return po(d,p,y)}var UL,Gx,BL,zL;UL=function(d,p){for(var y=p.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Gx=function(){},BL=function(d,p,y,x){var T=d.memoizedProps;if(T!==x){d=p.stateNode,ou(Ea.current);var N=null;switch(y){case"input":T=Me(d,T),x=Me(d,x),N=[];break;case"select":T=D({},T,{value:void 0}),x=D({},x,{value:void 0}),N=[];break;case"textarea":T=it(d,T),x=it(d,x),N=[];break;default:typeof T.onClick!="function"&&typeof x.onClick=="function"&&(d.onclick=Om)}rt(y,x);var F;y=null;for(xe in T)if(!x.hasOwnProperty(xe)&&T.hasOwnProperty(xe)&&T[xe]!=null)if(xe==="style"){var ee=T[xe];for(F in ee)ee.hasOwnProperty(F)&&(y||(y={}),y[F]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(i.hasOwnProperty(xe)?N||(N=[]):(N=N||[]).push(xe,null));for(xe in x){var oe=x[xe];if(ee=T!=null?T[xe]:void 0,x.hasOwnProperty(xe)&&oe!==ee&&(oe!=null||ee!=null))if(xe==="style")if(ee){for(F in ee)!ee.hasOwnProperty(F)||oe&&oe.hasOwnProperty(F)||(y||(y={}),y[F]="");for(F in oe)oe.hasOwnProperty(F)&&ee[F]!==oe[F]&&(y||(y={}),y[F]=oe[F])}else y||(N||(N=[]),N.push(xe,y)),y=oe;else xe==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,ee=ee?ee.__html:void 0,oe!=null&&ee!==oe&&(N=N||[]).push(xe,oe)):xe==="children"?typeof oe!="string"&&typeof oe!="number"||(N=N||[]).push(xe,""+oe):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(xe)?(oe!=null&&xe==="onScroll"&&Xn("scroll",d),N||ee===oe||(N=[])):(N=N||[]).push(xe,oe))}y&&(N=N||[]).push("style",y);var xe=N;(p.updateQueue=xe)&&(p.flags|=4)}},zL=function(d,p,y,x){y!==x&&(p.flags|=4)};function Mp(d,p){if(!Zn)switch(d.tailMode){case"hidden":p=d.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var x=null;y!==null;)y.alternate!==null&&(x=y),y=y.sibling;x===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:x.sibling=null}}function oi(d){var p=d.alternate!==null&&d.alternate.child===d.child,y=0,x=0;if(p)for(var T=d.child;T!==null;)y|=T.lanes|T.childLanes,x|=T.subtreeFlags&14680064,x|=T.flags&14680064,T.return=d,T=T.sibling;else for(T=d.child;T!==null;)y|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=d,T=T.sibling;return d.subtreeFlags|=x,d.childLanes=y,p}function y5(d,p,y){var x=p.pendingProps;switch(ux(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(p),null;case 1:return Gi(p.type)&&Fm(),oi(p),null;case 3:return x=p.stateNode,Oc(),Yn(zi),Yn(si),Sx(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(d===null||d.child===null)&&(Vm(p)?p.flags|=4:d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Ys!==null&&(Qx(Ys),Ys=null))),Gx(d,p),oi(p),null;case 5:vx(p);var T=ou(wp.current);if(y=p.type,d!==null&&p.stateNode!=null)BL(d,p,y,x,T),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!x){if(p.stateNode===null)throw Error(t(166));return oi(p),null}if(d=ou(Ea.current),Vm(p)){x=p.stateNode,y=p.type;var N=p.memoizedProps;switch(x[Sa]=p,x[vp]=N,d=(p.mode&1)!==0,y){case"dialog":Xn("cancel",x),Xn("close",x);break;case"iframe":case"object":case"embed":Xn("load",x);break;case"video":case"audio":for(T=0;T<yp.length;T++)Xn(yp[T],x);break;case"source":Xn("error",x);break;case"img":case"image":case"link":Xn("error",x),Xn("load",x);break;case"details":Xn("toggle",x);break;case"input":nt(x,N),Xn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!N.multiple},Xn("invalid",x);break;case"textarea":K(x,N),Xn("invalid",x)}rt(y,N),T=null;for(var F in N)if(N.hasOwnProperty(F)){var ee=N[F];F==="children"?typeof ee=="string"?x.textContent!==ee&&(N.suppressHydrationWarning!==!0&&Dm(x.textContent,ee,d),T=["children",ee]):typeof ee=="number"&&x.textContent!==""+ee&&(N.suppressHydrationWarning!==!0&&Dm(x.textContent,ee,d),T=["children",""+ee]):i.hasOwnProperty(F)&&ee!=null&&F==="onScroll"&&Xn("scroll",x)}switch(y){case"input":ft(x),J(x,N,!0);break;case"textarea":ft(x),he(x);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(x.onclick=Om)}x=T,p.updateQueue=x,x!==null&&(p.flags|=4)}else{F=T.nodeType===9?T:T.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=te(y)),d==="http://www.w3.org/1999/xhtml"?y==="script"?(d=F.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof x.is=="string"?d=F.createElement(y,{is:x.is}):(d=F.createElement(y),y==="select"&&(F=d,x.multiple?F.multiple=!0:x.size&&(F.size=x.size))):d=F.createElementNS(d,y),d[Sa]=p,d[vp]=x,UL(d,p,!1,!1),p.stateNode=d;e:{switch(F=Xe(y,x),y){case"dialog":Xn("cancel",d),Xn("close",d),T=x;break;case"iframe":case"object":case"embed":Xn("load",d),T=x;break;case"video":case"audio":for(T=0;T<yp.length;T++)Xn(yp[T],d);T=x;break;case"source":Xn("error",d),T=x;break;case"img":case"image":case"link":Xn("error",d),Xn("load",d),T=x;break;case"details":Xn("toggle",d),T=x;break;case"input":nt(d,x),T=Me(d,x),Xn("invalid",d);break;case"option":T=x;break;case"select":d._wrapperState={wasMultiple:!!x.multiple},T=D({},x,{value:void 0}),Xn("invalid",d);break;case"textarea":K(d,x),T=it(d,x),Xn("invalid",d);break;default:T=x}rt(y,T),ee=T;for(N in ee)if(ee.hasOwnProperty(N)){var oe=ee[N];N==="style"?Ze(d,oe):N==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&ze(d,oe)):N==="children"?typeof oe=="string"?(y!=="textarea"||oe!=="")&&ke(d,oe):typeof oe=="number"&&ke(d,""+oe):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(i.hasOwnProperty(N)?oe!=null&&N==="onScroll"&&Xn("scroll",d):oe!=null&&E(d,N,oe,F))}switch(y){case"input":ft(d),J(d,x,!1);break;case"textarea":ft(d),he(d);break;case"option":x.value!=null&&d.setAttribute("value",""+_e(x.value));break;case"select":d.multiple=!!x.multiple,N=x.value,N!=null?Dt(d,!!x.multiple,N,!1):x.defaultValue!=null&&Dt(d,!!x.multiple,x.defaultValue,!0);break;default:typeof T.onClick=="function"&&(d.onclick=Om)}switch(y){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return oi(p),null;case 6:if(d&&p.stateNode!=null)zL(d,p,d.memoizedProps,x);else{if(typeof x!="string"&&p.stateNode===null)throw Error(t(166));if(y=ou(wp.current),ou(Ea.current),Vm(p)){if(x=p.stateNode,y=p.memoizedProps,x[Sa]=p,(N=x.nodeValue!==y)&&(d=cs,d!==null))switch(d.tag){case 3:Dm(x.nodeValue,y,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Dm(x.nodeValue,y,(d.mode&1)!==0)}N&&(p.flags|=4)}else x=(y.nodeType===9?y:y.ownerDocument).createTextNode(x),x[Sa]=p,p.stateNode=x}return oi(p),null;case 13:if(Yn(sr),x=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Zn&&ds!==null&&(p.mode&1)!==0&&(p.flags&128)===0)$k(),Ic(),p.flags|=98560,N=!1;else if(N=Vm(p),x!==null&&x.dehydrated!==null){if(d===null){if(!N)throw Error(t(318));if(N=p.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[Sa]=p}else Ic(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;oi(p),N=!1}else Ys!==null&&(Qx(Ys),Ys=null),N=!0;if(!N)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=y,p):(x=x!==null,x!==(d!==null&&d.memoizedState!==null)&&x&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(sr.current&1)!==0?Mr===0&&(Mr=3):tS())),p.updateQueue!==null&&(p.flags|=4),oi(p),null);case 4:return Oc(),Gx(d,p),d===null&&bp(p.stateNode.containerInfo),oi(p),null;case 10:return gx(p.type._context),oi(p),null;case 17:return Gi(p.type)&&Fm(),oi(p),null;case 19:if(Yn(sr),N=p.memoizedState,N===null)return oi(p),null;if(x=(p.flags&128)!==0,F=N.rendering,F===null)if(x)Mp(N,!1);else{if(Mr!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(F=Xm(d),F!==null){for(p.flags|=128,Mp(N,!1),x=F.updateQueue,x!==null&&(p.updateQueue=x,p.flags|=4),p.subtreeFlags=0,x=y,y=p.child;y!==null;)N=y,d=x,N.flags&=14680066,F=N.alternate,F===null?(N.childLanes=0,N.lanes=d,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=F.childLanes,N.lanes=F.lanes,N.child=F.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=F.memoizedProps,N.memoizedState=F.memoizedState,N.updateQueue=F.updateQueue,N.type=F.type,d=F.dependencies,N.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),y=y.sibling;return $n(sr,sr.current&1|2),p.child}d=d.sibling}N.tail!==null&&ir()>Bc&&(p.flags|=128,x=!0,Mp(N,!1),p.lanes=4194304)}else{if(!x)if(d=Xm(F),d!==null){if(p.flags|=128,x=!0,y=d.updateQueue,y!==null&&(p.updateQueue=y,p.flags|=4),Mp(N,!0),N.tail===null&&N.tailMode==="hidden"&&!F.alternate&&!Zn)return oi(p),null}else 2*ir()-N.renderingStartTime>Bc&&y!==1073741824&&(p.flags|=128,x=!0,Mp(N,!1),p.lanes=4194304);N.isBackwards?(F.sibling=p.child,p.child=F):(y=N.last,y!==null?y.sibling=F:p.child=F,N.last=F)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=ir(),p.sibling=null,y=sr.current,$n(sr,x?y&1|2:y&1),p):(oi(p),null);case 22:case 23:return eS(),x=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==x&&(p.flags|=8192),x&&(p.mode&1)!==0?(hs&1073741824)!==0&&(oi(p),p.subtreeFlags&6&&(p.flags|=8192)):oi(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function b5(d,p){switch(ux(p),p.tag){case 1:return Gi(p.type)&&Fm(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Oc(),Yn(zi),Yn(si),Sx(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return vx(p),null;case 13:if(Yn(sr),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(t(340));Ic()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return Yn(sr),null;case 4:return Oc(),null;case 10:return gx(p.type._context),null;case 22:case 23:return eS(),null;case 24:return null;default:return null}}var ry=!1,li=!1,_5=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Fc(d,p){var y=d.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(x){cr(d,p,x)}else y.current=null}function Vx(d,p,y){try{y()}catch(x){cr(d,p,x)}}var GL=!1;function v5(d,p){if(ex=Em,d=_k(),Wv(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var x=y.getSelection&&y.getSelection();if(x&&x.rangeCount!==0){y=x.anchorNode;var T=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{y.nodeType,N.nodeType}catch{y=null;break e}var F=0,ee=-1,oe=-1,xe=0,Be=0,Ve=d,Ue=null;t:for(;;){for(var ht;Ve!==y||T!==0&&Ve.nodeType!==3||(ee=F+T),Ve!==N||x!==0&&Ve.nodeType!==3||(oe=F+x),Ve.nodeType===3&&(F+=Ve.nodeValue.length),(ht=Ve.firstChild)!==null;)Ue=Ve,Ve=ht;for(;;){if(Ve===d)break t;if(Ue===y&&++xe===T&&(ee=F),Ue===N&&++Be===x&&(oe=F),(ht=Ve.nextSibling)!==null)break;Ve=Ue,Ue=Ve.parentNode}Ve=ht}y=ee===-1||oe===-1?null:{start:ee,end:oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(tx={focusedElem:d,selectionRange:y},Em=!1,mt=p;mt!==null;)if(p=mt,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,mt=d;else for(;mt!==null;){p=mt;try{var _t=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(_t!==null){var vt=_t.memoizedProps,fr=_t.memoizedState,me=p.stateNode,ce=me.getSnapshotBeforeUpdate(p.elementType===p.type?vt:Ks(p.type,vt),fr);me.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var be=p.stateNode.containerInfo;be.nodeType===1?be.textContent="":be.nodeType===9&&be.documentElement&&be.removeChild(be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){cr(p,p.return,Ye)}if(d=p.sibling,d!==null){d.return=p.return,mt=d;break}mt=p.return}return _t=GL,GL=!1,_t}function Ip(d,p,y){var x=p.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var T=x=x.next;do{if((T.tag&d)===d){var N=T.destroy;T.destroy=void 0,N!==void 0&&Vx(p,y,N)}T=T.next}while(T!==x)}}function iy(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&d)===d){var x=y.create;y.destroy=x()}y=y.next}while(y!==p)}}function $x(d){var p=d.ref;if(p!==null){var y=d.stateNode;switch(d.tag){case 5:d=y;break;default:d=y}typeof p=="function"?p(d):p.current=d}}function VL(d){var p=d.alternate;p!==null&&(d.alternate=null,VL(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&(delete p[Sa],delete p[vp],delete p[sx],delete p[n5],delete p[r5])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function $L(d){return d.tag===5||d.tag===3||d.tag===4}function HL(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||$L(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Hx(d,p,y){var x=d.tag;if(x===5||x===6)d=d.stateNode,p?y.nodeType===8?y.parentNode.insertBefore(d,p):y.insertBefore(d,p):(y.nodeType===8?(p=y.parentNode,p.insertBefore(d,y)):(p=y,p.appendChild(d)),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=Om));else if(x!==4&&(d=d.child,d!==null))for(Hx(d,p,y),d=d.sibling;d!==null;)Hx(d,p,y),d=d.sibling}function jx(d,p,y){var x=d.tag;if(x===5||x===6)d=d.stateNode,p?y.insertBefore(d,p):y.appendChild(d);else if(x!==4&&(d=d.child,d!==null))for(jx(d,p,y),d=d.sibling;d!==null;)jx(d,p,y),d=d.sibling}var Wr=null,Zs=!1;function al(d,p,y){for(y=y.child;y!==null;)jL(d,p,y),y=y.sibling}function jL(d,p,y){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ct,y)}catch{}switch(y.tag){case 5:li||Fc(y,p);case 6:var x=Wr,T=Zs;Wr=null,al(d,p,y),Wr=x,Zs=T,Wr!==null&&(Zs?(d=Wr,y=y.stateNode,d.nodeType===8?d.parentNode.removeChild(y):d.removeChild(y)):Wr.removeChild(y.stateNode));break;case 18:Wr!==null&&(Zs?(d=Wr,y=y.stateNode,d.nodeType===8?ix(d.parentNode,y):d.nodeType===1&&ix(d,y),up(d)):ix(Wr,y.stateNode));break;case 4:x=Wr,T=Zs,Wr=y.stateNode.containerInfo,Zs=!0,al(d,p,y),Wr=x,Zs=T;break;case 0:case 11:case 14:case 15:if(!li&&(x=y.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){T=x=x.next;do{var N=T,F=N.destroy;N=N.tag,F!==void 0&&((N&2)!==0||(N&4)!==0)&&Vx(y,p,F),T=T.next}while(T!==x)}al(d,p,y);break;case 1:if(!li&&(Fc(y,p),x=y.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=y.memoizedProps,x.state=y.memoizedState,x.componentWillUnmount()}catch(ee){cr(y,p,ee)}al(d,p,y);break;case 21:al(d,p,y);break;case 22:y.mode&1?(li=(x=li)||y.memoizedState!==null,al(d,p,y),li=x):al(d,p,y);break;default:al(d,p,y)}}function WL(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var y=d.stateNode;y===null&&(y=d.stateNode=new _5),p.forEach(function(x){var T=C5.bind(null,d,x);y.has(x)||(y.add(x),x.then(T,T))})}}function Qs(d,p){var y=p.deletions;if(y!==null)for(var x=0;x<y.length;x++){var T=y[x];try{var N=d,F=p,ee=F;e:for(;ee!==null;){switch(ee.tag){case 5:Wr=ee.stateNode,Zs=!1;break e;case 3:Wr=ee.stateNode.containerInfo,Zs=!0;break e;case 4:Wr=ee.stateNode.containerInfo,Zs=!0;break e}ee=ee.return}if(Wr===null)throw Error(t(160));jL(N,F,T),Wr=null,Zs=!1;var oe=T.alternate;oe!==null&&(oe.return=null),T.return=null}catch(xe){cr(T,p,xe)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)qL(p,d),p=p.sibling}function qL(d,p){var y=d.alternate,x=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Qs(p,d),wa(d),x&4){try{Ip(3,d,d.return),iy(3,d)}catch(vt){cr(d,d.return,vt)}try{Ip(5,d,d.return)}catch(vt){cr(d,d.return,vt)}}break;case 1:Qs(p,d),wa(d),x&512&&y!==null&&Fc(y,y.return);break;case 5:if(Qs(p,d),wa(d),x&512&&y!==null&&Fc(y,y.return),d.flags&32){var T=d.stateNode;try{ke(T,"")}catch(vt){cr(d,d.return,vt)}}if(x&4&&(T=d.stateNode,T!=null)){var N=d.memoizedProps,F=y!==null?y.memoizedProps:N,ee=d.type,oe=d.updateQueue;if(d.updateQueue=null,oe!==null)try{ee==="input"&&N.type==="radio"&&N.name!=null&&qe(T,N),Xe(ee,F);var xe=Xe(ee,N);for(F=0;F<oe.length;F+=2){var Be=oe[F],Ve=oe[F+1];Be==="style"?Ze(T,Ve):Be==="dangerouslySetInnerHTML"?ze(T,Ve):Be==="children"?ke(T,Ve):E(T,Be,Ve,xe)}switch(ee){case"input":je(T,N);break;case"textarea":P(T,N);break;case"select":var Ue=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!N.multiple;var ht=N.value;ht!=null?Dt(T,!!N.multiple,ht,!1):Ue!==!!N.multiple&&(N.defaultValue!=null?Dt(T,!!N.multiple,N.defaultValue,!0):Dt(T,!!N.multiple,N.multiple?[]:"",!1))}T[vp]=N}catch(vt){cr(d,d.return,vt)}}break;case 6:if(Qs(p,d),wa(d),x&4){if(d.stateNode===null)throw Error(t(162));T=d.stateNode,N=d.memoizedProps;try{T.nodeValue=N}catch(vt){cr(d,d.return,vt)}}break;case 3:if(Qs(p,d),wa(d),x&4&&y!==null&&y.memoizedState.isDehydrated)try{up(p.containerInfo)}catch(vt){cr(d,d.return,vt)}break;case 4:Qs(p,d),wa(d);break;case 13:Qs(p,d),wa(d),T=d.child,T.flags&8192&&(N=T.memoizedState!==null,T.stateNode.isHidden=N,!N||T.alternate!==null&&T.alternate.memoizedState!==null||(Xx=ir())),x&4&&WL(d);break;case 22:if(Be=y!==null&&y.memoizedState!==null,d.mode&1?(li=(xe=li)||Be,Qs(p,d),li=xe):Qs(p,d),wa(d),x&8192){if(xe=d.memoizedState!==null,(d.stateNode.isHidden=xe)&&!Be&&(d.mode&1)!==0)for(mt=d,Be=d.child;Be!==null;){for(Ve=mt=Be;mt!==null;){switch(Ue=mt,ht=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:Ip(4,Ue,Ue.return);break;case 1:Fc(Ue,Ue.return);var _t=Ue.stateNode;if(typeof _t.componentWillUnmount=="function"){x=Ue,y=Ue.return;try{p=x,_t.props=p.memoizedProps,_t.state=p.memoizedState,_t.componentWillUnmount()}catch(vt){cr(x,y,vt)}}break;case 5:Fc(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){KL(Ve);continue}}ht!==null?(ht.return=Ue,mt=ht):KL(Ve)}Be=Be.sibling}e:for(Be=null,Ve=d;;){if(Ve.tag===5){if(Be===null){Be=Ve;try{T=Ve.stateNode,xe?(N=T.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(ee=Ve.stateNode,oe=Ve.memoizedProps.style,F=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,ee.style.display=Fe("display",F))}catch(vt){cr(d,d.return,vt)}}}else if(Ve.tag===6){if(Be===null)try{Ve.stateNode.nodeValue=xe?"":Ve.memoizedProps}catch(vt){cr(d,d.return,vt)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===d)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===d)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===d)break e;Be===Ve&&(Be=null),Ve=Ve.return}Be===Ve&&(Be=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:Qs(p,d),wa(d),x&4&&WL(d);break;case 21:break;default:Qs(p,d),wa(d)}}function wa(d){var p=d.flags;if(p&2){try{e:{for(var y=d.return;y!==null;){if($L(y)){var x=y;break e}y=y.return}throw Error(t(160))}switch(x.tag){case 5:var T=x.stateNode;x.flags&32&&(ke(T,""),x.flags&=-33);var N=HL(d);jx(d,N,T);break;case 3:case 4:var F=x.stateNode.containerInfo,ee=HL(d);Hx(d,ee,F);break;default:throw Error(t(161))}}catch(oe){cr(d,d.return,oe)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function x5(d,p,y){mt=d,XL(d)}function XL(d,p,y){for(var x=(d.mode&1)!==0;mt!==null;){var T=mt,N=T.child;if(T.tag===22&&x){var F=T.memoizedState!==null||ry;if(!F){var ee=T.alternate,oe=ee!==null&&ee.memoizedState!==null||li;ee=ry;var xe=li;if(ry=F,(li=oe)&&!xe)for(mt=T;mt!==null;)F=mt,oe=F.child,F.tag===22&&F.memoizedState!==null?ZL(T):oe!==null?(oe.return=F,mt=oe):ZL(T);for(;N!==null;)mt=N,XL(N),N=N.sibling;mt=T,ry=ee,li=xe}YL(d)}else(T.subtreeFlags&8772)!==0&&N!==null?(N.return=T,mt=N):YL(d)}}function YL(d){for(;mt!==null;){var p=mt;if((p.flags&8772)!==0){var y=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:li||iy(5,p);break;case 1:var x=p.stateNode;if(p.flags&4&&!li)if(y===null)x.componentDidMount();else{var T=p.elementType===p.type?y.memoizedProps:Ks(p.type,y.memoizedProps);x.componentDidUpdate(T,y.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var N=p.updateQueue;N!==null&&Kk(p,N,x);break;case 3:var F=p.updateQueue;if(F!==null){if(y=null,p.child!==null)switch(p.child.tag){case 5:y=p.child.stateNode;break;case 1:y=p.child.stateNode}Kk(p,F,y)}break;case 5:var ee=p.stateNode;if(y===null&&p.flags&4){y=ee;var oe=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&y.focus();break;case"img":oe.src&&(y.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var xe=p.alternate;if(xe!==null){var Be=xe.memoizedState;if(Be!==null){var Ve=Be.dehydrated;Ve!==null&&up(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}li||p.flags&512&&$x(p)}catch(Ue){cr(p,p.return,Ue)}}if(p===d){mt=null;break}if(y=p.sibling,y!==null){y.return=p.return,mt=y;break}mt=p.return}}function KL(d){for(;mt!==null;){var p=mt;if(p===d){mt=null;break}var y=p.sibling;if(y!==null){y.return=p.return,mt=y;break}mt=p.return}}function ZL(d){for(;mt!==null;){var p=mt;try{switch(p.tag){case 0:case 11:case 15:var y=p.return;try{iy(4,p)}catch(oe){cr(p,y,oe)}break;case 1:var x=p.stateNode;if(typeof x.componentDidMount=="function"){var T=p.return;try{x.componentDidMount()}catch(oe){cr(p,T,oe)}}var N=p.return;try{$x(p)}catch(oe){cr(p,N,oe)}break;case 5:var F=p.return;try{$x(p)}catch(oe){cr(p,F,oe)}}}catch(oe){cr(p,p.return,oe)}if(p===d){mt=null;break}var ee=p.sibling;if(ee!==null){ee.return=p.return,mt=ee;break}mt=p.return}}var S5=Math.ceil,sy=A.ReactCurrentDispatcher,Wx=A.ReactCurrentOwner,Is=A.ReactCurrentBatchConfig,gn=0,Ur=null,yr=null,qr=0,hs=0,Uc=tl(0),Mr=0,kp=null,uu=0,ay=0,qx=0,Lp=null,$i=null,Xx=0,Bc=1/0,fo=null,oy=!1,Yx=null,ol=null,ly=!1,ll=null,uy=0,Dp=0,Kx=null,cy=-1,dy=0;function wi(){return(gn&6)!==0?ir():cy!==-1?cy:cy=ir()}function ul(d){return(d.mode&1)===0?1:(gn&2)!==0&&qr!==0?qr&-qr:s5.transition!==null?(dy===0&&(dy=ii()),dy):(d=qt,d!==0||(d=window.event,d=d===void 0?16:JI(d.type)),d)}function Js(d,p,y,x){if(50<Dp)throw Dp=0,Kx=null,Error(t(185));Nr(d,y,x),((gn&2)===0||d!==Ur)&&(d===Ur&&((gn&2)===0&&(ay|=y),Mr===4&&cl(d,qr)),Hi(d,x),y===1&&gn===0&&(p.mode&1)===0&&(Bc=ir()+500,Bm&&rl()))}function Hi(d,p){var y=d.callbackNode;vn(d,p);var x=yn(d,d===Ur?qr:0);if(x===0)y!==null&&vm(y),d.callbackNode=null,d.callbackPriority=0;else if(p=x&-x,d.callbackPriority!==p){if(y!=null&&vm(y),p===1)d.tag===0?i5(JL.bind(null,d)):Uk(JL.bind(null,d)),e5(function(){(gn&6)===0&&rl()}),y=null;else{switch(Ei(x)){case 1:y=pe;break;case 4:y=Ee;break;case 16:y=ve;break;case 536870912:y=et;break;default:y=ve}y=oD(y,QL.bind(null,d))}d.callbackPriority=p,d.callbackNode=y}}function QL(d,p){if(cy=-1,dy=0,(gn&6)!==0)throw Error(t(327));var y=d.callbackNode;if(zc()&&d.callbackNode!==y)return null;var x=yn(d,d===Ur?qr:0);if(x===0)return null;if((x&30)!==0||(x&d.expiredLanes)!==0||p)p=hy(d,x);else{p=x;var T=gn;gn|=2;var N=tD();(Ur!==d||qr!==p)&&(fo=null,Bc=ir()+500,du(d,p));do try{w5();break}catch(ee){eD(d,ee)}while(!0);fx(),sy.current=N,gn=T,yr!==null?p=0:(Ur=null,qr=0,p=Mr)}if(p!==0){if(p===2&&(T=un(d),T!==0&&(x=T,p=Zx(d,T))),p===1)throw y=kp,du(d,0),cl(d,x),Hi(d,ir()),y;if(p===6)cl(d,x);else{if(T=d.current.alternate,(x&30)===0&&!E5(T)&&(p=hy(d,x),p===2&&(N=un(d),N!==0&&(x=N,p=Zx(d,N))),p===1))throw y=kp,du(d,0),cl(d,x),Hi(d,ir()),y;switch(d.finishedWork=T,d.finishedLanes=x,p){case 0:case 1:throw Error(t(345));case 2:hu(d,$i,fo);break;case 3:if(cl(d,x),(x&130023424)===x&&(p=Xx+500-ir(),10<p)){if(yn(d,0)!==0)break;if(T=d.suspendedLanes,(T&x)!==x){wi(),d.pingedLanes|=d.suspendedLanes&T;break}d.timeoutHandle=rx(hu.bind(null,d,$i,fo),p);break}hu(d,$i,fo);break;case 4:if(cl(d,x),(x&4194240)===x)break;for(p=d.eventTimes,T=-1;0<x;){var F=31-gt(x);N=1<<F,F=p[F],F>T&&(T=F),x&=~N}if(x=T,x=ir()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*S5(x/1960))-x,10<x){d.timeoutHandle=rx(hu.bind(null,d,$i,fo),x);break}hu(d,$i,fo);break;case 5:hu(d,$i,fo);break;default:throw Error(t(329))}}}return Hi(d,ir()),d.callbackNode===y?QL.bind(null,d):null}function Zx(d,p){var y=Lp;return d.current.memoizedState.isDehydrated&&(du(d,p).flags|=256),d=hy(d,p),d!==2&&(p=$i,$i=y,p!==null&&Qx(p)),d}function Qx(d){$i===null?$i=d:$i.push.apply($i,d)}function E5(d){for(var p=d;;){if(p.flags&16384){var y=p.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var x=0;x<y.length;x++){var T=y[x],N=T.getSnapshot;T=T.value;try{if(!Xs(N(),T))return!1}catch{return!1}}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function cl(d,p){for(p&=~qx,p&=~ay,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var y=31-gt(p),x=1<<y;d[y]=-1,p&=~x}}function JL(d){if((gn&6)!==0)throw Error(t(327));zc();var p=yn(d,0);if((p&1)===0)return Hi(d,ir()),null;var y=hy(d,p);if(d.tag!==0&&y===2){var x=un(d);x!==0&&(p=x,y=Zx(d,x))}if(y===1)throw y=kp,du(d,0),cl(d,p),Hi(d,ir()),y;if(y===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,hu(d,$i,fo),Hi(d,ir()),null}function Jx(d,p){var y=gn;gn|=1;try{return d(p)}finally{gn=y,gn===0&&(Bc=ir()+500,Bm&&rl())}}function cu(d){ll!==null&&ll.tag===0&&(gn&6)===0&&zc();var p=gn;gn|=1;var y=Is.transition,x=qt;try{if(Is.transition=null,qt=1,d)return d()}finally{qt=x,Is.transition=y,gn=p,(gn&6)===0&&rl()}}function eS(){hs=Uc.current,Yn(Uc)}function du(d,p){d.finishedWork=null,d.finishedLanes=0;var y=d.timeoutHandle;if(y!==-1&&(d.timeoutHandle=-1,Jj(y)),yr!==null)for(y=yr.return;y!==null;){var x=y;switch(ux(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Fm();break;case 3:Oc(),Yn(zi),Yn(si),Sx();break;case 5:vx(x);break;case 4:Oc();break;case 13:Yn(sr);break;case 19:Yn(sr);break;case 10:gx(x.type._context);break;case 22:case 23:eS()}y=y.return}if(Ur=d,yr=d=dl(d.current,null),qr=hs=p,Mr=0,kp=null,qx=ay=uu=0,$i=Lp=null,au!==null){for(p=0;p<au.length;p++)if(y=au[p],x=y.interleaved,x!==null){y.interleaved=null;var T=x.next,N=y.pending;if(N!==null){var F=N.next;N.next=T,x.next=F}y.pending=x}au=null}return d}function eD(d,p){do{var y=yr;try{if(fx(),Ym.current=Jm,Km){for(var x=ar.memoizedState;x!==null;){var T=x.queue;T!==null&&(T.pending=null),x=x.next}Km=!1}if(lu=0,Fr=Cr=ar=null,Ap=!1,Rp=0,Wx.current=null,y===null||y.return===null){Mr=1,kp=p,yr=null;break}e:{var N=d,F=y.return,ee=y,oe=p;if(p=qr,ee.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var xe=oe,Be=ee,Ve=Be.tag;if((Be.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var Ue=Be.alternate;Ue?(Be.updateQueue=Ue.updateQueue,Be.memoizedState=Ue.memoizedState,Be.lanes=Ue.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var ht=wL(F);if(ht!==null){ht.flags&=-257,AL(ht,F,ee,N,p),ht.mode&1&&TL(N,xe,p),p=ht,oe=xe;var _t=p.updateQueue;if(_t===null){var vt=new Set;vt.add(oe),p.updateQueue=vt}else _t.add(oe);break e}else{if((p&1)===0){TL(N,xe,p),tS();break e}oe=Error(t(426))}}else if(Zn&&ee.mode&1){var fr=wL(F);if(fr!==null){(fr.flags&65536)===0&&(fr.flags|=256),AL(fr,F,ee,N,p),hx(Pc(oe,ee));break e}}N=oe=Pc(oe,ee),Mr!==4&&(Mr=2),Lp===null?Lp=[N]:Lp.push(N),N=F;do{switch(N.tag){case 3:N.flags|=65536,p&=-p,N.lanes|=p;var me=SL(N,oe,p);Yk(N,me);break e;case 1:ee=oe;var ce=N.type,be=N.stateNode;if((N.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&(ol===null||!ol.has(be)))){N.flags|=65536,p&=-p,N.lanes|=p;var Ye=EL(N,ee,p);Yk(N,Ye);break e}}N=N.return}while(N!==null)}rD(y)}catch(St){p=St,yr===y&&y!==null&&(yr=y=y.return);continue}break}while(!0)}function tD(){var d=sy.current;return sy.current=Jm,d===null?Jm:d}function tS(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Ur===null||(uu&268435455)===0&&(ay&268435455)===0||cl(Ur,qr)}function hy(d,p){var y=gn;gn|=2;var x=tD();(Ur!==d||qr!==p)&&(fo=null,du(d,p));do try{T5();break}catch(T){eD(d,T)}while(!0);if(fx(),gn=y,sy.current=x,yr!==null)throw Error(t(261));return Ur=null,qr=0,Mr}function T5(){for(;yr!==null;)nD(yr)}function w5(){for(;yr!==null&&!kv();)nD(yr)}function nD(d){var p=aD(d.alternate,d,hs);d.memoizedProps=d.pendingProps,p===null?rD(d):yr=p,Wx.current=null}function rD(d){var p=d;do{var y=p.alternate;if(d=p.return,(p.flags&32768)===0){if(y=y5(y,p,hs),y!==null){yr=y;return}}else{if(y=b5(y,p),y!==null){y.flags&=32767,yr=y;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Mr=6,yr=null;return}}if(p=p.sibling,p!==null){yr=p;return}yr=p=d}while(p!==null);Mr===0&&(Mr=5)}function hu(d,p,y){var x=qt,T=Is.transition;try{Is.transition=null,qt=1,A5(d,p,y,x)}finally{Is.transition=T,qt=x}return null}function A5(d,p,y,x){do zc();while(ll!==null);if((gn&6)!==0)throw Error(t(327));y=d.finishedWork;var T=d.finishedLanes;if(y===null)return null;if(d.finishedWork=null,d.finishedLanes=0,y===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var N=y.lanes|y.childLanes;if(tu(d,N),d===Ur&&(yr=Ur=null,qr=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||ly||(ly=!0,oD(ve,function(){return zc(),null})),N=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||N){N=Is.transition,Is.transition=null;var F=qt;qt=1;var ee=gn;gn|=4,Wx.current=null,v5(d,y),qL(y,d),Wj(tx),Em=!!ex,tx=ex=null,d.current=y,x5(y),Lv(),gn=ee,qt=F,Is.transition=N}else d.current=y;if(ly&&(ly=!1,ll=d,uy=T),N=d.pendingLanes,N===0&&(ol=null),bt(y.stateNode),Hi(d,ir()),p!==null)for(x=d.onRecoverableError,y=0;y<p.length;y++)T=p[y],x(T.value,{componentStack:T.stack,digest:T.digest});if(oy)throw oy=!1,d=Yx,Yx=null,d;return(uy&1)!==0&&d.tag!==0&&zc(),N=d.pendingLanes,(N&1)!==0?d===Kx?Dp++:(Dp=0,Kx=d):Dp=0,rl(),null}function zc(){if(ll!==null){var d=Ei(uy),p=Is.transition,y=qt;try{if(Is.transition=null,qt=16>d?16:d,ll===null)var x=!1;else{if(d=ll,ll=null,uy=0,(gn&6)!==0)throw Error(t(331));var T=gn;for(gn|=4,mt=d.current;mt!==null;){var N=mt,F=N.child;if((mt.flags&16)!==0){var ee=N.deletions;if(ee!==null){for(var oe=0;oe<ee.length;oe++){var xe=ee[oe];for(mt=xe;mt!==null;){var Be=mt;switch(Be.tag){case 0:case 11:case 15:Ip(8,Be,N)}var Ve=Be.child;if(Ve!==null)Ve.return=Be,mt=Ve;else for(;mt!==null;){Be=mt;var Ue=Be.sibling,ht=Be.return;if(VL(Be),Be===xe){mt=null;break}if(Ue!==null){Ue.return=ht,mt=Ue;break}mt=ht}}}var _t=N.alternate;if(_t!==null){var vt=_t.child;if(vt!==null){_t.child=null;do{var fr=vt.sibling;vt.sibling=null,vt=fr}while(vt!==null)}}mt=N}}if((N.subtreeFlags&2064)!==0&&F!==null)F.return=N,mt=F;else e:for(;mt!==null;){if(N=mt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Ip(9,N,N.return)}var me=N.sibling;if(me!==null){me.return=N.return,mt=me;break e}mt=N.return}}var ce=d.current;for(mt=ce;mt!==null;){F=mt;var be=F.child;if((F.subtreeFlags&2064)!==0&&be!==null)be.return=F,mt=be;else e:for(F=ce;mt!==null;){if(ee=mt,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:iy(9,ee)}}catch(St){cr(ee,ee.return,St)}if(ee===F){mt=null;break e}var Ye=ee.sibling;if(Ye!==null){Ye.return=ee.return,mt=Ye;break e}mt=ee.return}}if(gn=T,rl(),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ct,d)}catch{}x=!0}return x}finally{qt=y,Is.transition=p}}return!1}function iD(d,p,y){p=Pc(y,p),p=SL(d,p,1),d=sl(d,p,1),p=wi(),d!==null&&(Nr(d,1,p),Hi(d,p))}function cr(d,p,y){if(d.tag===3)iD(d,d,y);else for(;p!==null;){if(p.tag===3){iD(p,d,y);break}else if(p.tag===1){var x=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ol===null||!ol.has(x))){d=Pc(y,d),d=EL(p,d,1),p=sl(p,d,1),d=wi(),p!==null&&(Nr(p,1,d),Hi(p,d));break}}p=p.return}}function R5(d,p,y){var x=d.pingCache;x!==null&&x.delete(p),p=wi(),d.pingedLanes|=d.suspendedLanes&y,Ur===d&&(qr&y)===y&&(Mr===4||Mr===3&&(qr&130023424)===qr&&500>ir()-Xx?du(d,0):qx|=y),Hi(d,p)}function sD(d,p){p===0&&((d.mode&1)===0?p=1:(p=Pn,Pn<<=1,(Pn&130023424)===0&&(Pn=4194304)));var y=wi();d=co(d,p),d!==null&&(Nr(d,p,y),Hi(d,y))}function N5(d){var p=d.memoizedState,y=0;p!==null&&(y=p.retryLane),sD(d,y)}function C5(d,p){var y=0;switch(d.tag){case 13:var x=d.stateNode,T=d.memoizedState;T!==null&&(y=T.retryLane);break;case 19:x=d.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(p),sD(d,y)}var aD;aD=function(d,p,y){if(d!==null)if(d.memoizedProps!==p.pendingProps||zi.current)Vi=!0;else{if((d.lanes&y)===0&&(p.flags&128)===0)return Vi=!1,m5(d,p,y);Vi=(d.flags&131072)!==0}else Vi=!1,Zn&&(p.flags&1048576)!==0&&Bk(p,Gm,p.index);switch(p.lanes=0,p.tag){case 2:var x=p.type;ny(d,p),d=p.pendingProps;var T=Nc(p,si.current);Dc(p,y),T=wx(null,p,x,d,T,y);var N=Ax();return p.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Gi(x)?(N=!0,Um(p)):N=!1,p.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,bx(p),T.updater=ey,p.stateNode=T,T._reactInternals=p,kx(p,x,d,y),p=Px(null,p,x,!0,N,y)):(p.tag=0,Zn&&N&&lx(p),Ti(null,p,T,y),p=p.child),p;case 16:x=p.elementType;e:{switch(ny(d,p),d=p.pendingProps,T=x._init,x=T(x._payload),p.type=x,T=p.tag=I5(x),d=Ks(x,d),T){case 0:p=Ox(null,p,x,d,y);break e;case 1:p=kL(null,p,x,d,y);break e;case 11:p=RL(null,p,x,d,y);break e;case 14:p=NL(null,p,x,Ks(x.type,d),y);break e}throw Error(t(306,x,""))}return p;case 0:return x=p.type,T=p.pendingProps,T=p.elementType===x?T:Ks(x,T),Ox(d,p,x,T,y);case 1:return x=p.type,T=p.pendingProps,T=p.elementType===x?T:Ks(x,T),kL(d,p,x,T,y);case 3:e:{if(LL(p),d===null)throw Error(t(387));x=p.pendingProps,N=p.memoizedState,T=N.element,Xk(d,p),qm(p,x,null,y);var F=p.memoizedState;if(x=F.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},p.updateQueue.baseState=N,p.memoizedState=N,p.flags&256){T=Pc(Error(t(423)),p),p=DL(d,p,x,y,T);break e}else if(x!==T){T=Pc(Error(t(424)),p),p=DL(d,p,x,y,T);break e}else for(ds=el(p.stateNode.containerInfo.firstChild),cs=p,Zn=!0,Ys=null,y=Wk(p,null,x,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ic(),x===T){p=po(d,p,y);break e}Ti(d,p,x,y)}p=p.child}return p;case 5:return Zk(p),d===null&&dx(p),x=p.type,T=p.pendingProps,N=d!==null?d.memoizedProps:null,F=T.children,nx(x,T)?F=null:N!==null&&nx(x,N)&&(p.flags|=32),IL(d,p),Ti(d,p,F,y),p.child;case 6:return d===null&&dx(p),null;case 13:return OL(d,p,y);case 4:return _x(p,p.stateNode.containerInfo),x=p.pendingProps,d===null?p.child=kc(p,null,x,y):Ti(d,p,x,y),p.child;case 11:return x=p.type,T=p.pendingProps,T=p.elementType===x?T:Ks(x,T),RL(d,p,x,T,y);case 7:return Ti(d,p,p.pendingProps,y),p.child;case 8:return Ti(d,p,p.pendingProps.children,y),p.child;case 12:return Ti(d,p,p.pendingProps.children,y),p.child;case 10:e:{if(x=p.type._context,T=p.pendingProps,N=p.memoizedProps,F=T.value,$n(Hm,x._currentValue),x._currentValue=F,N!==null)if(Xs(N.value,F)){if(N.children===T.children&&!zi.current){p=po(d,p,y);break e}}else for(N=p.child,N!==null&&(N.return=p);N!==null;){var ee=N.dependencies;if(ee!==null){F=N.child;for(var oe=ee.firstContext;oe!==null;){if(oe.context===x){if(N.tag===1){oe=ho(-1,y&-y),oe.tag=2;var xe=N.updateQueue;if(xe!==null){xe=xe.shared;var Be=xe.pending;Be===null?oe.next=oe:(oe.next=Be.next,Be.next=oe),xe.pending=oe}}N.lanes|=y,oe=N.alternate,oe!==null&&(oe.lanes|=y),mx(N.return,y,p),ee.lanes|=y;break}oe=oe.next}}else if(N.tag===10)F=N.type===p.type?null:N.child;else if(N.tag===18){if(F=N.return,F===null)throw Error(t(341));F.lanes|=y,ee=F.alternate,ee!==null&&(ee.lanes|=y),mx(F,y,p),F=N.sibling}else F=N.child;if(F!==null)F.return=N;else for(F=N;F!==null;){if(F===p){F=null;break}if(N=F.sibling,N!==null){N.return=F.return,F=N;break}F=F.return}N=F}Ti(d,p,T.children,y),p=p.child}return p;case 9:return T=p.type,x=p.pendingProps.children,Dc(p,y),T=Cs(T),x=x(T),p.flags|=1,Ti(d,p,x,y),p.child;case 14:return x=p.type,T=Ks(x,p.pendingProps),T=Ks(x.type,T),NL(d,p,x,T,y);case 15:return CL(d,p,p.type,p.pendingProps,y);case 17:return x=p.type,T=p.pendingProps,T=p.elementType===x?T:Ks(x,T),ny(d,p),p.tag=1,Gi(x)?(d=!0,Um(p)):d=!1,Dc(p,y),vL(p,x,T),kx(p,x,T,y),Px(null,p,x,!0,d,y);case 19:return FL(d,p,y);case 22:return ML(d,p,y)}throw Error(t(156,p.tag))};function oD(d,p){return _m(d,p)}function M5(d,p,y,x){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(d,p,y,x){return new M5(d,p,y,x)}function nS(d){return d=d.prototype,!(!d||!d.isReactComponent)}function I5(d){if(typeof d=="function")return nS(d)?1:0;if(d!=null){if(d=d.$$typeof,d===z)return 11;if(d===X)return 14}return 2}function dl(d,p){var y=d.alternate;return y===null?(y=ks(d.tag,p,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=p,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&14680064,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,p=d.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y}function py(d,p,y,x,T,N){var F=2;if(x=d,typeof d=="function")nS(d)&&(F=1);else if(typeof d=="string")F=5;else e:switch(d){case M:return pu(y.children,T,N,p);case I:F=8,T|=8;break;case C:return d=ks(12,y,p,T|2),d.elementType=C,d.lanes=N,d;case W:return d=ks(13,y,p,T),d.elementType=W,d.lanes=N,d;case q:return d=ks(19,y,p,T),d.elementType=q,d.lanes=N,d;case H:return fy(y,T,N,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:F=10;break e;case O:F=9;break e;case z:F=11;break e;case X:F=14;break e;case Q:F=16,x=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return p=ks(F,y,p,T),p.elementType=d,p.type=x,p.lanes=N,p}function pu(d,p,y,x){return d=ks(7,d,x,p),d.lanes=y,d}function fy(d,p,y,x){return d=ks(22,d,x,p),d.elementType=H,d.lanes=y,d.stateNode={isHidden:!1},d}function rS(d,p,y){return d=ks(6,d,null,p),d.lanes=y,d}function iS(d,p,y){return p=ks(4,d.children!==null?d.children:[],d.key,p),p.lanes=y,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function k5(d,p,y,x,T){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=x,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function sS(d,p,y,x,T,N,F,ee,oe){return d=new k5(d,p,y,ee,oe),p===1?(p=1,N===!0&&(p|=8)):p=0,N=ks(3,null,null,p),d.current=N,N.stateNode=d,N.memoizedState={element:x,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},bx(N),d}function L5(d,p,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:x==null?null:""+x,children:d,containerInfo:p,implementation:y}}function lD(d){if(!d)return nl;d=d._reactInternals;e:{if(As(d)!==d||d.tag!==1)throw Error(t(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Gi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(d.tag===1){var y=d.type;if(Gi(y))return Pk(d,y,p)}return p}function uD(d,p,y,x,T,N,F,ee,oe){return d=sS(y,x,!0,d,T,N,F,ee,oe),d.context=lD(null),y=d.current,x=wi(),T=ul(y),N=ho(x,T),N.callback=p??null,sl(y,N,T),d.current.lanes=T,Nr(d,T,x),Hi(d,x),d}function gy(d,p,y,x){var T=p.current,N=wi(),F=ul(T);return y=lD(y),p.context===null?p.context=y:p.pendingContext=y,p=ho(N,F),p.payload={element:d},x=x===void 0?null:x,x!==null&&(p.callback=x),d=sl(T,p,F),d!==null&&(Js(d,T,F,N),Wm(d,T,F)),F}function my(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function cD(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<p?y:p}}function aS(d,p){cD(d,p),(d=d.alternate)&&cD(d,p)}function D5(){return null}var dD=typeof reportError=="function"?reportError:function(d){console.error(d)};function oS(d){this._internalRoot=d}yy.prototype.render=oS.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(t(409));gy(d,p,null,null)},yy.prototype.unmount=oS.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;cu(function(){gy(null,d,null,null)}),p[ao]=null}};function yy(d){this._internalRoot=d}yy.prototype.unstable_scheduleHydration=function(d){if(d){var p=xa();d={blockedOn:null,target:d,priority:p};for(var y=0;y<Zo.length&&p!==0&&p<Zo[y].priority;y++);Zo.splice(y,0,d),y===0&&ZI(d)}};function lS(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function by(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function hD(){}function O5(d,p,y,x,T){if(T){if(typeof x=="function"){var N=x;x=function(){var xe=my(F);N.call(xe)}}var F=uD(p,x,d,0,null,!1,!1,"",hD);return d._reactRootContainer=F,d[ao]=F.current,bp(d.nodeType===8?d.parentNode:d),cu(),F}for(;T=d.lastChild;)d.removeChild(T);if(typeof x=="function"){var ee=x;x=function(){var xe=my(oe);ee.call(xe)}}var oe=sS(d,0,!1,null,null,!1,!1,"",hD);return d._reactRootContainer=oe,d[ao]=oe.current,bp(d.nodeType===8?d.parentNode:d),cu(function(){gy(p,oe,y,x)}),oe}function _y(d,p,y,x,T){var N=y._reactRootContainer;if(N){var F=N;if(typeof T=="function"){var ee=T;T=function(){var oe=my(F);ee.call(oe)}}gy(p,F,d,T)}else F=O5(y,p,d,T,x);return my(F)}Or=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var y=kn(p.pendingLanes);y!==0&&(Tn(p,y|1),Hi(p,ir()),(gn&6)===0&&(Bc=ir()+500,rl()))}break;case 13:cu(function(){var x=co(d,1);if(x!==null){var T=wi();Js(x,d,1,T)}}),aS(d,1)}},Pr=function(d){if(d.tag===13){var p=co(d,134217728);if(p!==null){var y=wi();Js(p,d,134217728,y)}aS(d,134217728)}},bc=function(d){if(d.tag===13){var p=ul(d),y=co(d,p);if(y!==null){var x=wi();Js(y,d,p,x)}aS(d,p)}},xa=function(){return qt},YI=function(d,p){var y=qt;try{return qt=d,p()}finally{qt=y}},st=function(d,p,y){switch(p){case"input":if(je(d,y),p=y.name,y.type==="radio"&&p!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<y.length;p++){var x=y[p];if(x!==d&&x.form===d.form){var T=Pm(x);if(!T)throw Error(t(90));ln(x),je(x,T)}}}break;case"textarea":P(d,y);break;case"select":p=y.value,p!=null&&Dt(d,!!y.multiple,p,!1)}},zt=Jx,Nn=cu;var P5={usingClientEntryPoint:!1,Events:[xp,Ac,Pm,Le,Je,Jx]},Op={findFiberByHostInstance:nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F5={bundleType:Op.bundleType,version:Op.version,rendererPackageName:Op.rendererPackageName,rendererConfig:Op.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=ip(d),d===null?null:d.stateNode},findFiberByHostInstance:Op.findFiberByHostInstance||D5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vy.isDisabled&&vy.supportsFiber)try{ct=vy.inject(F5),Qe=vy}catch{}}return ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P5,ji.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lS(p))throw Error(t(200));return L5(d,p,null,y)},ji.createRoot=function(d,p){if(!lS(d))throw Error(t(299));var y=!1,x="",T=dD;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onRecoverableError!==void 0&&(T=p.onRecoverableError)),p=sS(d,1,!1,null,null,y,!1,x,T),d[ao]=p.current,bp(d.nodeType===8?d.parentNode:d),new oS(p)},ji.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=ip(p),d=d===null?null:d.stateNode,d},ji.flushSync=function(d){return cu(d)},ji.hydrate=function(d,p,y){if(!by(p))throw Error(t(200));return _y(null,d,p,!0,y)},ji.hydrateRoot=function(d,p,y){if(!lS(d))throw Error(t(405));var x=y!=null&&y.hydratedSources||null,T=!1,N="",F=dD;if(y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onRecoverableError!==void 0&&(F=y.onRecoverableError)),p=uD(p,null,d,1,y??null,T,!1,N,F),d[ao]=p.current,bp(d),x)for(d=0;d<x.length;d++)y=x[d],T=y._getVersion,T=T(y._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[y,T]:p.mutableSourceEagerHydrationData.push(y,T);return new yy(p)},ji.render=function(d,p,y){if(!by(p))throw Error(t(200));return _y(null,d,p,!1,y)},ji.unmountComponentAtNode=function(d){if(!by(d))throw Error(t(40));return d._reactRootContainer?(cu(function(){_y(null,null,d,!1,function(){d._reactRootContainer=null,d[ao]=null})}),!0):!1},ji.unstable_batchedUpdates=Jx,ji.unstable_renderSubtreeIntoContainer=function(d,p,y,x){if(!by(y))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return _y(d,p,y,!1,x)},ji.version="18.3.1-next-f1338f8080-20240426",ji}var vD;function n3(){if(vD)return dS.exports;vD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dS.exports=W5(),dS.exports}var xD;function q5(){if(xD)return xy;xD=1;var n=n3();return xy.createRoot=n.createRoot,xy.hydrateRoot=n.hydrateRoot,xy}var X5=q5();n3();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jf.apply(this,arguments)}var Rl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Rl||(Rl={}));const SD="popstate";function Y5(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return DE("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:r3(i)}return Z5(e,t,null,n)}function Sr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Sw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function K5(){return Math.random().toString(36).substr(2,8)}function ED(n,e){return{usr:n.state,key:n.key,idx:e}}function DE(n,e,t,r){return t===void 0&&(t=null),Jf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Nh(e):e,{state:t,key:e&&e.key||r||K5()})}function r3(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Nh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Z5(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Rl.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(Jf({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Rl.Pop;let _=c(),b=_==null?null:_-u;u=_,l&&l({action:o,location:v.location,delta:b})}function f(_,b){o=Rl.Push;let S=DE(v.location,_,b);u=c()+1;let E=ED(S,u),A=v.createHref(S);try{a.pushState(E,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(A)}s&&l&&l({action:o,location:v.location,delta:1})}function g(_,b){o=Rl.Replace;let S=DE(v.location,_,b);u=c();let E=ED(S,u),A=v.createHref(S);a.replaceState(E,"",A),s&&l&&l({action:o,location:v.location,delta:0})}function m(_){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof _=="string"?_:r3(_);return S=S.replace(/ $/,"%20"),Sr(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let v={get action(){return o},get location(){return n(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(SD,h),l=_,()=>{i.removeEventListener(SD,h),l=null}},createHref(_){return e(i,_)},createURL:m,encodeLocation(_){let b=m(_);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:g,go(_){return a.go(_)}};return v}var TD;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(TD||(TD={}));function Q5(n,e,t){return t===void 0&&(t="/"),J5(n,e,t)}function J5(n,e,t,r){let i=typeof e=="string"?Nh(e):e,s=a3(i.pathname||"/",t);if(s==null)return null;let a=i3(n);eW(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=hW(s);o=uW(a[l],u)}return o}function i3(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Sr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Bu([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Sr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),i3(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:oW(u,s.index),routesMeta:c})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of s3(s.path))i(s,a,l)}),e}function s3(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=s3(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function eW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lW(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const tW=/^:[\w-]+$/,nW=3,rW=2,iW=1,sW=10,aW=-2,wD=n=>n==="*";function oW(n,e){let t=n.split("/"),r=t.length;return t.some(wD)&&(r+=aW),e&&(r+=rW),t.filter(i=>!wD(i)).reduce((i,s)=>i+(tW.test(s)?nW:s===""?iW:sW),r)}function lW(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function uW(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=cW({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:Bu([s,h.pathname]),pathnameBase:yW(Bu([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Bu([s,h.pathnameBase]))}return a}function cW(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=dW(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:f,isOptional:g}=c;if(f==="*"){let v=o[h]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=o[h];return g&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:n}}function dW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function hW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function a3(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const pW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fW=n=>pW.test(n);function gW(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Nh(n):n,s;if(t)if(fW(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Sw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=AD(t.substring(1),"/"):s=AD(t,e)}else s=e;return{pathname:s,search:bW(r),hash:_W(i)}}function AD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function fS(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function o3(n,e){let t=mW(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function l3(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Nh(n):(i=Jf({},n),Sr(!i.pathname||!i.pathname.includes("?"),fS("?","pathname","search",i)),Sr(!i.pathname||!i.pathname.includes("#"),fS("#","pathname","hash",i)),Sr(!i.search||!i.search.includes("#"),fS("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=gW(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Bu=n=>n.join("/").replace(/\/\/+/g,"/"),yW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_W=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vW(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const u3=["post","put","patch","delete"];new Set(u3);const xW=["get",...u3];new Set(xW);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eg.apply(this,arguments)}const Ew=se.createContext(null),SW=se.createContext(null),Dg=se.createContext(null),D_=se.createContext(null),Hl=se.createContext({outlet:null,matches:[],isDataRoute:!1}),c3=se.createContext(null);function Og(){return se.useContext(D_)!=null}function Tw(){return Og()||Sr(!1),se.useContext(D_).location}function d3(n){se.useContext(Dg).static||se.useLayoutEffect(n)}function Pg(){let{isDataRoute:n}=se.useContext(Hl);return n?FW():EW()}function EW(){Og()||Sr(!1);let n=se.useContext(Ew),{basename:e,future:t,navigator:r}=se.useContext(Dg),{matches:i}=se.useContext(Hl),{pathname:s}=Tw(),a=JSON.stringify(o3(i,t.v7_relativeSplatPath)),o=se.useRef(!1);return d3(()=>{o.current=!0}),se.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=l3(u,JSON.parse(a),s,c.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bu([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,a,s,n])}const TW=se.createContext(null);function wW(n){let e=se.useContext(Hl).outlet;return e&&se.createElement(TW.Provider,{value:n},e)}function AW(n,e){return RW(n,e)}function RW(n,e,t,r){Og()||Sr(!1);let{navigator:i}=se.useContext(Dg),{matches:s}=se.useContext(Hl),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Tw(),c;if(e){var h;let _=typeof e=="string"?Nh(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||Sr(!1),c=_}else c=u;let f=c.pathname||"/",g=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let m=Q5(n,{pathname:g}),v=kW(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Bu([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Bu([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&v?se.createElement(D_.Provider,{value:{location:eg({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Rl.Pop}},v):v}function NW(){let n=PW(),e=vW(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),t?se.createElement("pre",{style:i},t):null,null)}const CW=se.createElement(NW,null);class MW extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?se.createElement(Hl.Provider,{value:this.props.routeContext},se.createElement(c3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IW(n){let{routeContext:e,match:t,children:r}=n,i=se.useContext(Ew);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),se.createElement(Hl.Provider,{value:e},r)}function kW(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||Sr(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:g}=t,m=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,f)=>{let g,m=!1,v=null,_=null;t&&(g=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||CW,l&&(u<0&&f===0?(UW("route-fallback"),m=!0,_=null):u===f&&(m=!0,_=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),S=()=>{let E;return g?E=v:m?E=_:h.route.Component?E=se.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=c,se.createElement(IW,{match:h,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:E})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?se.createElement(MW,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var h3=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(h3||{}),p3=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(p3||{});function LW(n){let e=se.useContext(Ew);return e||Sr(!1),e}function DW(n){let e=se.useContext(SW);return e||Sr(!1),e}function OW(n){let e=se.useContext(Hl);return e||Sr(!1),e}function f3(n){let e=OW(),t=e.matches[e.matches.length-1];return t.route.id||Sr(!1),t.route.id}function PW(){var n;let e=se.useContext(c3),t=DW(),r=f3();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function FW(){let{router:n}=LW(h3.UseNavigateStable),e=f3(p3.UseNavigateStable),t=se.useRef(!1);return d3(()=>{t.current=!0}),se.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,eg({fromRouteId:e},s)))},[n,e])}const RD={};function UW(n,e,t){RD[n]||(RD[n]=!0)}function BW(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function zW(n){let{to:e,replace:t,state:r,relative:i}=n;Og()||Sr(!1);let{future:s,static:a}=se.useContext(Dg),{matches:o}=se.useContext(Hl),{pathname:l}=Tw(),u=Pg(),c=l3(e,o3(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return se.useEffect(()=>u(JSON.parse(h),{replace:t,state:r,relative:i}),[u,h,i,t,r]),null}function GW(n){return wW(n.context)}function yf(n){Sr(!1)}function VW(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Rl.Pop,navigator:s,static:a=!1,future:o}=n;Og()&&Sr(!1);let l=e.replace(/^\/*/,"/"),u=se.useMemo(()=>({basename:l,navigator:s,static:a,future:eg({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Nh(r));let{pathname:c="/",search:h="",hash:f="",state:g=null,key:m="default"}=r,v=se.useMemo(()=>{let _=a3(c,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:g,key:m},navigationType:i}},[l,c,h,f,g,m,i]);return v==null?null:se.createElement(Dg.Provider,{value:u},se.createElement(D_.Provider,{children:t,value:v}))}function $W(n){let{children:e,location:t}=n;return AW(OE(e),t)}new Promise(()=>{});function OE(n,e){e===void 0&&(e=[]);let t=[];return se.Children.forEach(n,(r,i)=>{if(!se.isValidElement(r))return;let s=[...e,i];if(r.type===se.Fragment){t.push.apply(t,OE(r.props.children,s));return}r.type!==yf&&Sr(!1),!r.props.index||!r.props.children||Sr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=OE(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const HW="6";try{window.__reactRouterVersion=HW}catch{}const jW="startTransition",ND=$5[jW];function WW(n){let{basename:e,children:t,future:r,window:i}=n,s=se.useRef();s.current==null&&(s.current=Y5({window:i,v5Compat:!0}));let a=s.current,[o,l]=se.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=se.useCallback(h=>{u&&ND?ND(()=>l(h)):l(h)},[l,u]);return se.useLayoutEffect(()=>a.listen(c),[a,c]),se.useEffect(()=>BW(r),[r]),se.createElement(VW,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}var CD;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(CD||(CD={}));var MD;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(MD||(MD={}));const qW=(n,e,t,r)=>{var s,a,o,l;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);zu(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&l.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},ID={},PE=(n,e,t,r)=>{zu(t)&&ID[t]||(zu(t)&&(ID[t]=new Date),qW(n,e,t,r))},g3=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},FE=(n,e,t)=>{n.loadNamespaces(e,g3(n,t))},kD=(n,e,t,r)=>{if(zu(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return FE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,g3(n,r))},XW=(n,e,t={})=>!e.languages||!e.languages.length?(PE(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),zu=n=>typeof n=="string",YW=n=>typeof n=="object"&&n!==null,KW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ZW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},QW=n=>ZW[n],JW=n=>n.replace(KW,QW);let UE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:JW};const e6=(n={})=>{UE={...UE,...n}},t6=()=>UE;let m3;const n6=n=>{m3=n},r6=()=>m3,i6={type:"3rdParty",init(n){e6(n.options.react),n6(n)}},s6=se.createContext();class a6{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const o6=(n,e)=>{const t=se.useRef();return se.useEffect(()=>{t.current=n},[n,e]),t.current},y3=(n,e,t,r)=>n.getFixedT(e,t,r),l6=(n,e,t,r)=>se.useCallback(y3(n,e,t,r),[n,e,t,r]),Fg=(n,e={})=>{var A,R,w,M;const{i18n:t}=e,{i18n:r,defaultNS:i}=se.useContext(s6)||{},s=t||r||r6();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new a6),!s){PE(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const I=(k,O)=>zu(O)?O:YW(O)&&zu(O.defaultValue)?O.defaultValue:Array.isArray(k)?k[k.length-1]:k,C=[I,{},!1];return C.t=I,C.i18n={},C.ready=!1,C}(A=s.options.react)!=null&&A.wait&&PE(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...t6(),...s.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=i||((R=s.options)==null?void 0:R.defaultNS);u=zu(u)?[u]:u||["translation"],(M=(w=s.reportNamespaces).addUsedNamespaces)==null||M.call(w,u);const c=(s.isInitialized||s.initializedStoreOnce)&&u.every(I=>XW(I,s,a)),h=l6(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),f=()=>h,g=()=>y3(s,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[m,v]=se.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const b=o6(_),S=se.useRef(!0);se.useEffect(()=>{const{bindI18n:I,bindI18nStore:C}=a;S.current=!0,!c&&!o&&(e.lng?kD(s,e.lng,u,()=>{S.current&&v(g)}):FE(s,u,()=>{S.current&&v(g)})),c&&b&&b!==_&&S.current&&v(g);const k=()=>{S.current&&v(g)};return I&&(s==null||s.on(I,k)),C&&(s==null||s.store.on(C,k)),()=>{S.current=!1,s&&I&&(I==null||I.split(" ").forEach(O=>s.off(O,k))),C&&s&&C.split(" ").forEach(O=>s.store.off(O,k))}},[s,_]),se.useEffect(()=>{S.current&&c&&v(f)},[s,l,c]);const E=[m,s,c];if(E.t=m,E.i18n=s,E.ready=c,c||!c&&!o)return E;throw new Promise(I=>{e.lng?kD(s,e.lng,u,()=>I()):FE(s,u,()=>I())})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c6=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),LD=n=>{const e=c6(n);return e.charAt(0).toUpperCase()+e.slice(1)},b3=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),d6=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=se.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>se.createElement("svg",{ref:l,...h6,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:b3("lucide",i),...!s&&!d6(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,c])=>se.createElement(u,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(n,e)=>{const t=se.forwardRef(({className:r,...i},s)=>se.createElement(p6,{ref:s,iconNode:e,className:b3(`lucide-${u6(LD(n))}`,`lucide-${n}`,r),...i}));return t.displayName=LD(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],g6=Bt("arrow-right",f6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],y6=Bt("arrow-up",m6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_6=Bt("check",b6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],x6=Bt("chevron-down",v6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_3=Bt("chevron-right",S6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],T6=Bt("circle-check-big",E6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A6=Bt("circle-check",w6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N6=Bt("circle-x",R6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],DD=Bt("code",C6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],I6=Bt("copy",M6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],OD=Bt("cpu",k6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],D6=Bt("ellipsis-vertical",L6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],v3=Bt("eye-off",O6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ww=Bt("eye",P6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],PD=Bt("file-code",F6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],B6=Bt("folder-plus",U6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],G6=Bt("folder",z6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],x3=Bt("globe",V6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H6=Bt("link",$6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],md=Bt("loader-circle",j6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],q6=Bt("lock",W6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],S3=Bt("log-in",X6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],K6=Bt("log-out",Y6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Q6=Bt("mail",Z6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],e8=Bt("message-square",J6);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],n8=Bt("mic-off",t8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],FD=Bt("mic",r8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],s8=Bt("moon",i8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],o8=Bt("panel-left-close",a8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],u8=Bt("panel-left-open",l8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],d8=Bt("paperclip",c8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],UD=Bt("pin",h8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],f8=Bt("rotate-ccw",p8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],E3=Bt("search",g8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],y8=Bt("send",m8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_8=Bt("share-2",b8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],x8=Bt("shield-alert",v8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],BE=Bt("sparkles",S8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],T8=Bt("sun",E8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],A8=Bt("terminal",w8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jb=Bt("trash-2",R8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],C8=Bt("user-plus",N8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I8=Bt("user",M8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zE=Bt("users",k8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],D8=Bt("video",L8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],P8=Bt("volume-2",O8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],e_=Bt("x",F8);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],GE=Bt("zap",U8),T3=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",B8="http://localhost:8080",or=T3?"http://localhost:8080":B8,z8="ws://localhost:8080/ws";let Nl=z8;Nl||(T3?Nl="ws://localhost:8080/ws":or.includes("api.xelitesolutions.com")?Nl="wss://api.xelitesolutions.com/ws":Nl=or.replace(/^http/,"ws")+"/ws");Nl.startsWith("http")&&(Nl=Nl.replace(/^http/,"ws"));const w3=Nl;function G8(){const[n,e]=se.useState([]),[t,r]=se.useState(!1);se.useEffect(()=>{const s=new WebSocket(w3);return s.onopen=()=>r(!0),s.onclose=()=>r(!1),s.onmessage=a=>{try{const o=JSON.parse(a.data);o.type==="sentinel:alert"&&e(l=>{const u=new Set(o.data.map(h=>h.id)),c=l.filter(h=>!u.has(h.id));return[...o.data,...c].slice(0,10)})}catch{}},()=>s.close()},[]);const i=n.filter(s=>s.severity==="high").length;return L.jsxs("div",{className:"relative group",children:[L.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-[var(--bg-secondary)] border border-[var(--border-color)] hover:bg-[var(--bg-hover)] transition-colors",children:[i>0?L.jsx(x8,{size:16,className:"text-red-500 animate-pulse"}):L.jsx(T6,{size:16,className:"text-green-500"}),L.jsx("span",{className:"text-xs font-medium",children:"Sentinel"}),n.length>0&&L.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full",children:n.length})]}),L.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-xl shadow-2xl p-0 hidden group-hover:block z-50 backdrop-blur-xl",children:[L.jsxs("div",{className:"p-3 border-b border-[var(--border-color)] font-bold text-sm flex justify-between items-center",children:[L.jsx("span",{children:"Sentinel Alerts"}),L.jsx("span",{className:`w-2 h-2 rounded-full ${t?"bg-green-500":"bg-red-500"}`})]}),L.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.length===0?L.jsx("div",{className:"p-6 text-center text-gray-500 text-xs",children:"No active threats detected."}):n.map(s=>L.jsxs("div",{className:"p-3 border-b border-[var(--border-color)] hover:bg-[var(--bg-hover)]",children:[L.jsxs("div",{className:"flex justify-between items-start mb-1",children:[L.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded uppercase font-bold ${s.severity==="high"?"bg-red-500/20 text-red-500":s.severity==="medium"?"bg-yellow-500/20 text-yellow-500":"bg-blue-500/20 text-blue-500"}`,children:s.severity}),L.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(s.timestamp).toLocaleTimeString()})]}),L.jsx("div",{className:"text-sm font-medium text-gray-200",children:s.message}),L.jsx("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:s.file})]},s.id))})]})]})}const BD=[{code:"en",label:"English"},{code:"ar",label:""},{code:"fr",label:"Franais"},{code:"de",label:"Deutsch"},{code:"ru",label:""},{code:"es",label:"Espaol"}];function V8(){var h;const{i18n:n,t:e}=Fg(),[t,r]=se.useState(()=>localStorage.getItem("theme")||"dark"),[i,s]=se.useState(()=>localStorage.getItem("lang")||"en"),[a,o]=se.useState(!1),l=se.useRef(null),u=Pg();se.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.dataset.theme=t},[t]),se.useEffect(()=>{localStorage.setItem("lang",i),n.changeLanguage(i),document.documentElement.setAttribute("lang",i),document.documentElement.setAttribute("dir",i==="ar"?"rtl":"ltr")},[i,n]),se.useEffect(()=>{function f(g){l.current&&!l.current.contains(g.target)&&o(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=((h=BD.find(f=>f.code===i))==null?void 0:h.label)||"English";return L.jsxs("div",{className:"topbar",children:[L.jsx("div",{className:"brand",onClick:()=>u("/"),children:"JOE"}),L.jsx("div",{className:"spacer"}),L.jsxs("div",{className:"topbar-actions",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"8px",marginInlineStart:"auto"},children:[L.jsx(G8,{}),L.jsxs("div",{className:"lang-dropdown",ref:l,style:{position:"relative"},children:[L.jsx("button",{className:`lang-btn ${a?"active":""}`,onClick:()=>o(!a),title:c,children:L.jsx(x3,{size:20})}),a&&L.jsx("div",{className:"lang-menu",style:{position:"absolute",top:"100%",right:"0",zIndex:1e3,marginTop:"8px"},children:BD.map(f=>L.jsx("button",{className:`lang-option ${i===f.code?"active":""}`,onClick:()=>{s(f.code),o(!1)},children:f.label},f.code))})]}),L.jsx("button",{className:"action-btn","aria-label":e("toggleTheme"),title:e("toggleTheme"),onClick:()=>{document.documentElement.classList.add("theme-switching"),r(t==="dark"?"light":"dark"),window.setTimeout(()=>{document.documentElement.classList.remove("theme-switching")},300)},children:t==="dark"?L.jsx(T8,{size:20}):L.jsx(s8,{size:20})}),L.jsx("button",{className:localStorage.getItem("token")?"logout-btn":"login-btn",onClick:()=>{localStorage.getItem("token")?confirm(e("confirmLogout","Are you sure you want to logout?"))&&(localStorage.removeItem("token"),u("/login")):u("/login")},title:localStorage.getItem("token")?e("logout","Logout"):e("login"),children:localStorage.getItem("token")?L.jsx(K6,{size:20}):L.jsx(S3,{size:20})})]})]})}const Aw=se.createContext({});function Rw(n){const e=se.useRef(null);return e.current===null&&(e.current=n()),e.current}const Nw=typeof window<"u",A3=Nw?se.useLayoutEffect:se.useEffect,O_=se.createContext(null);function Cw(n,e){n.indexOf(e)===-1&&n.push(e)}function Mw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Go=(n,e,t)=>t>e?e:t<n?n:t;let Iw=()=>{};const Vo={},R3=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function N3(n){return typeof n=="object"&&n!==null}const C3=n=>/^0[^.\s]+$/u.test(n);function kw(n){let e;return()=>(e===void 0&&(e=n()),e)}const Vs=n=>n,$8=(n,e)=>t=>e(n(t)),Ug=(...n)=>n.reduce($8),tg=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Lw{constructor(){this.subscriptions=[]}add(e){return Cw(this.subscriptions,e),()=>Mw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wa=n=>n*1e3,Bs=n=>n/1e3;function M3(n,e){return e?n*(1e3/e):0}const I3=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,H8=1e-7,j8=12;function W8(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=I3(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>H8&&++o<j8);return a}function Bg(n,e,t,r){if(n===e&&t===r)return Vs;const i=s=>W8(s,0,1,n,t);return s=>s===0||s===1?s:I3(i(s),e,r)}const k3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,L3=n=>e=>1-n(1-e),D3=Bg(.33,1.53,.69,.99),Dw=L3(D3),O3=k3(Dw),P3=n=>(n*=2)<1?.5*Dw(n):.5*(2-Math.pow(2,-10*(n-1))),Ow=n=>1-Math.sin(Math.acos(n)),F3=L3(Ow),U3=k3(Ow),q8=Bg(.42,0,1,1),X8=Bg(0,0,.58,1),B3=Bg(.42,0,.58,1),Y8=n=>Array.isArray(n)&&typeof n[0]!="number",z3=n=>Array.isArray(n)&&typeof n[0]=="number",K8={linear:Vs,easeIn:q8,easeInOut:B3,easeOut:X8,circIn:Ow,circInOut:U3,circOut:F3,backIn:Dw,backInOut:O3,backOut:D3,anticipate:P3},Z8=n=>typeof n=="string",zD=n=>{if(z3(n)){Iw(n.length===4);const[e,t,r,i]=n;return Bg(e,t,r,i)}else if(Z8(n))return K8[n];return n},Sy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Q8(n,e){let t=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){a.has(c)&&(u.schedule(c),n()),c(o)}const u={schedule:(c,h=!1,f=!1)=>{const m=f&&i?t:r;return h&&a.add(c),m.has(c)||m.add(c),c},cancel:c=>{r.delete(c),a.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const J8=40;function G3(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=Sy.reduce((E,A)=>(E[A]=Q8(s),E),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:f,render:g,postRender:m}=a,v=()=>{const E=Vo.useManualTiming?i.timestamp:performance.now();t=!1,Vo.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,J8),1)),i.timestamp=E,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),f.process(i),g.process(i),m.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(v))},_=()=>{t=!0,r=!0,i.isProcessing||n(v)};return{schedule:Sy.reduce((E,A)=>{const R=a[A];return E[A]=(w,M=!1,I=!1)=>(t||_(),R.schedule(w,M,I)),E},{}),cancel:E=>{for(let A=0;A<Sy.length;A++)a[Sy[A]].cancel(E)},state:i,steps:a}}const{schedule:er,cancel:Bl,state:Kr,steps:gS}=G3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vs,!0);let Ob;function e9(){Ob=void 0}const Zi={now:()=>(Ob===void 0&&Zi.set(Kr.isProcessing||Vo.useManualTiming?Kr.timestamp:performance.now()),Ob),set:n=>{Ob=n,queueMicrotask(e9)}},V3=n=>e=>typeof e=="string"&&e.startsWith(n),$3=V3("--"),t9=V3("var(--"),Pw=n=>t9(n)?n9.test(n.split("/*")[0].trim()):!1,n9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ch={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ng={...Ch,transform:n=>Go(0,1,n)},Ey={...Ch,default:1},Rf=n=>Math.round(n*1e5)/1e5,Fw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function r9(n){return n==null}const i9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uw=(n,e)=>t=>!!(typeof t=="string"&&i9.test(t)&&t.startsWith(n)||e&&!r9(t)&&Object.prototype.hasOwnProperty.call(t,e)),H3=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(Fw);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},s9=n=>Go(0,255,n),mS={...Ch,transform:n=>Math.round(s9(n))},Pu={test:Uw("rgb","red"),parse:H3("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+mS.transform(n)+", "+mS.transform(e)+", "+mS.transform(t)+", "+Rf(ng.transform(r))+")"};function a9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const VE={test:Uw("#"),parse:a9,transform:Pu.transform},zg=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Tl=zg("deg"),qa=zg("%"),Ut=zg("px"),o9=zg("vh"),l9=zg("vw"),GD={...qa,parse:n=>qa.parse(n)/100,transform:n=>qa.transform(n*100)},bd={test:Uw("hsl","hue"),parse:H3("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qa.transform(Rf(e))+", "+qa.transform(Rf(t))+", "+Rf(ng.transform(r))+")"},vr={test:n=>Pu.test(n)||VE.test(n)||bd.test(n),parse:n=>Pu.test(n)?Pu.parse(n):bd.test(n)?bd.parse(n):VE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Pu.transform(n):bd.transform(n),getAnimatableNone:n=>{const e=vr.parse(n);return e.alpha=0,vr.transform(e)}},u9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function c9(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Fw))==null?void 0:e.length)||0)+(((t=n.match(u9))==null?void 0:t.length)||0)>0}const j3="number",W3="color",d9="var",h9="var(",VD="${}",p9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rg(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(p9,l=>(vr.test(l)?(r.color.push(s),i.push(W3),t.push(vr.parse(l))):l.startsWith(h9)?(r.var.push(s),i.push(d9),t.push(l)):(r.number.push(s),i.push(j3),t.push(parseFloat(l))),++s,VD)).split(VD);return{values:t,split:o,indexes:r,types:i}}function q3(n){return rg(n).values}function X3(n){const{split:e,types:t}=rg(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===j3?s+=Rf(i[a]):o===W3?s+=vr.transform(i[a]):s+=i[a]}return s}}const f9=n=>typeof n=="number"?0:vr.test(n)?vr.getAnimatableNone(n):n;function g9(n){const e=q3(n);return X3(n)(e.map(f9))}const zl={test:c9,parse:q3,createTransformer:X3,getAnimatableNone:g9};function yS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function m9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=yS(l,o,n+1/3),s=yS(l,o,n),a=yS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function t_(n,e){return t=>t>0?e:n}const lr=(n,e,t)=>n+(e-n)*t,bS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},y9=[VE,Pu,bd],b9=n=>y9.find(e=>e.test(n));function $D(n){const e=b9(n);if(!e)return!1;let t=e.parse(n);return e===bd&&(t=m9(t)),t}const HD=(n,e)=>{const t=$D(n),r=$D(e);if(!t||!r)return t_(n,e);const i={...t};return s=>(i.red=bS(t.red,r.red,s),i.green=bS(t.green,r.green,s),i.blue=bS(t.blue,r.blue,s),i.alpha=lr(t.alpha,r.alpha,s),Pu.transform(i))},$E=new Set(["none","hidden"]);function _9(n,e){return $E.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function v9(n,e){return t=>lr(n,e,t)}function Bw(n){return typeof n=="number"?v9:typeof n=="string"?Pw(n)?t_:vr.test(n)?HD:E9:Array.isArray(n)?Y3:typeof n=="object"?vr.test(n)?HD:x9:t_}function Y3(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>Bw(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function x9(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Bw(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function S9(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=n.indexes[s][r[s]],o=n.values[a]??0;t[i]=o,r[s]++}return t}const E9=(n,e)=>{const t=zl.createTransformer(e),r=rg(n),i=rg(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?$E.has(n)&&!i.values.length||$E.has(e)&&!r.values.length?_9(n,e):Ug(Y3(S9(r,i),i.values),t):t_(n,e)};function K3(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?lr(n,e,t):Bw(n)(n,e)}const T9=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>er.update(e,t),stop:()=>Bl(e),now:()=>Kr.isProcessing?Kr.timestamp:Zi.now()}},Z3=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},n_=2e4;function zw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<n_;)e+=t,r=n.next(e);return e>=n_?1/0:e}function w9(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(zw(r),n_);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Bs(i)}}const A9=5;function Q3(n,e,t){const r=Math.max(e-A9,0);return M3(t-n(r),e-r)}const dr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_S=.001;function R9({duration:n=dr.duration,bounce:e=dr.bounce,velocity:t=dr.velocity,mass:r=dr.mass}){let i,s,a=1-e;a=Go(dr.minDamping,dr.maxDamping,a),n=Go(dr.minDuration,dr.maxDuration,Bs(n)),a<1?(i=u=>{const c=u*a,h=c*n,f=c-t,g=HE(u,a),m=Math.exp(-h);return _S-f/g*m},s=u=>{const h=u*a*n,f=h*t+t,g=Math.pow(a,2)*Math.pow(u,2)*n,m=Math.exp(-h),v=HE(Math.pow(u,2),a);return(-i(u)+_S>0?-1:1)*((f-g)*m)/v}):(i=u=>{const c=Math.exp(-u*n),h=(u-t)*n+1;return-_S+c*h},s=u=>{const c=Math.exp(-u*n),h=(t-u)*(n*n);return c*h});const o=5/n,l=C9(i,s,o);if(n=Wa(n),isNaN(l))return{stiffness:dr.stiffness,damping:dr.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const N9=12;function C9(n,e,t){let r=t;for(let i=1;i<N9;i++)r=r-n(r)/e(r);return r}function HE(n,e){return n*Math.sqrt(1-e*e)}const M9=["duration","bounce"],I9=["stiffness","damping","mass"];function jD(n,e){return e.some(t=>n[t]!==void 0)}function k9(n){let e={velocity:dr.velocity,stiffness:dr.stiffness,damping:dr.damping,mass:dr.mass,isResolvedFromDuration:!1,...n};if(!jD(n,I9)&&jD(n,M9))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Go(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:dr.mass,stiffness:i,damping:s}}else{const t=R9(n);e={...e,...t,mass:dr.mass},e.isResolvedFromDuration=!0}return e}function r_(n=dr.visualDuration,e=dr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:g}=k9({...t,velocity:-Bs(t.velocity||0)}),m=f||0,v=u/(2*Math.sqrt(l*c)),_=a-s,b=Bs(Math.sqrt(l/c)),S=Math.abs(_)<5;r||(r=S?dr.restSpeed.granular:dr.restSpeed.default),i||(i=S?dr.restDelta.granular:dr.restDelta.default);let E;if(v<1){const R=HE(b,v);E=w=>{const M=Math.exp(-v*b*w);return a-M*((m+v*b*_)/R*Math.sin(R*w)+_*Math.cos(R*w))}}else if(v===1)E=R=>a-Math.exp(-b*R)*(_+(m+b*_)*R);else{const R=b*Math.sqrt(v*v-1);E=w=>{const M=Math.exp(-v*b*w),I=Math.min(R*w,300);return a-M*((m+v*b*_)*Math.sinh(I)+R*_*Math.cosh(I))/R}}const A={calculatedDuration:g&&h||null,next:R=>{const w=E(R);if(g)o.done=R>=h;else{let M=R===0?m:0;v<1&&(M=R===0?Wa(m):Q3(E,R,w));const I=Math.abs(M)<=r,C=Math.abs(a-w)<=i;o.done=I&&C}return o.value=o.done?a:w,o},toString:()=>{const R=Math.min(zw(A),n_),w=Z3(M=>A.next(R*M).value,R,30);return R+"ms "+w},toTransition:()=>{}};return A}r_.applyToOptions=n=>{const e=w9(n,100,r_);return n.ease=e.ease,n.duration=Wa(e.duration),n.type="keyframes",n};function jE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const h=n[0],f={done:!1,value:h},g=I=>o!==void 0&&I<o||l!==void 0&&I>l,m=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let v=t*e;const _=h+v,b=a===void 0?_:a(_);b!==_&&(v=b-h);const S=I=>-v*Math.exp(-I/r),E=I=>b+S(I),A=I=>{const C=S(I),k=E(I);f.done=Math.abs(C)<=u,f.value=f.done?b:k};let R,w;const M=I=>{g(f.value)&&(R=I,w=r_({keyframes:[f.value,m(f.value)],velocity:Q3(E,I,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:I=>{let C=!1;return!w&&R===void 0&&(C=!0,A(I),M(I)),R!==void 0&&I>=R?w.next(I-R):(!C&&A(I),f)}}}function L9(n,e,t){const r=[],i=t||Vo.mix||K3,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Vs:e;o=Ug(l,o)}r.push(o)}return r}function D9(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Iw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=L9(e,r,i),l=o.length,u=c=>{if(a&&c<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(c<n[h+1]);h++);const f=tg(n[h],n[h+1],c);return o[h](f)};return t?c=>u(Go(n[0],n[s-1],c)):u}function O9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=tg(0,e,r);n.push(lr(t,1,i))}}function P9(n){const e=[0];return O9(e,n.length-1),e}function F9(n,e){return n.map(t=>t*e)}function U9(n,e){return n.map(()=>e||B3).splice(0,n.length-1)}function Nf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Y8(r)?r.map(zD):zD(r),s={done:!1,value:e[0]},a=F9(t&&t.length===e.length?t:P9(e),n),o=D9(a,e,{ease:Array.isArray(i)?i:U9(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const B9=n=>n!==null;function Gw(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(B9),o=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const z9={decay:jE,inertia:jE,tween:Nf,keyframes:Nf,spring:r_};function J3(n){typeof n.type=="string"&&(n.type=z9[n.type])}class Vw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const G9=n=>n/100;class $w extends Vw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==Zi.now()&&this.tick(Zi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;J3(e);const{type:t=Nf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=t||Nf;l!==Nf&&typeof o[0]!="number"&&(this.mixKeyframes=Ug(G9,K3(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=zw(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:f,repeatDelay:g,type:m,onUpdate:v,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,A=r;if(h){const I=Math.min(this.currentTime,i)/o;let C=Math.floor(I),k=I%1;!k&&I>=1&&(k=1),k===1&&C--,C=Math.min(C,h+1),!!(C%2)&&(f==="reverse"?(k=1-k,g&&(k-=g/o)):f==="mirror"&&(A=a)),E=Go(0,1,k)*o}const R=S?{done:!1,value:c[0]}:A.next(E);s&&(R.value=s(R.value));let{done:w}=R;!S&&l!==null&&(w=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return M&&m!==jE&&(R.value=Gw(c,this.options,_,this.speed)),v&&v(R.value),M&&this.finish(),R}then(e,t){return this.finished.then(e,t)}get duration(){return Bs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bs(e)}get time(){return Bs(this.currentTime)}set time(e){var t;e=Wa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zi.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Bs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=T9,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function V9(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Fu=n=>n*180/Math.PI,WE=n=>{const e=Fu(Math.atan2(n[1],n[0]));return qE(e)},$9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:WE,rotateZ:WE,skewX:n=>Fu(Math.atan(n[1])),skewY:n=>Fu(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},qE=n=>(n=n%360,n<0&&(n+=360),n),WD=WE,qD=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),XD=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),H9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qD,scaleY:XD,scale:n=>(qD(n)+XD(n))/2,rotateX:n=>qE(Fu(Math.atan2(n[6],n[5]))),rotateY:n=>qE(Fu(Math.atan2(-n[2],n[0]))),rotateZ:WD,rotate:WD,skewX:n=>Fu(Math.atan(n[4])),skewY:n=>Fu(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function XE(n){return n.includes("scale")?1:0}function YE(n,e){if(!n||n==="none")return XE(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=H9,i=t;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=$9,i=o}if(!i)return XE(e);const s=r[e],a=i[1].split(",").map(W9);return typeof s=="function"?s(a):a[s]}const j9=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return YE(t,e)};function W9(n){return parseFloat(n.trim())}const Mh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ih=new Set(Mh),YD=n=>n===Ch||n===Ut,q9=new Set(["x","y","z"]),X9=Mh.filter(n=>!q9.has(n));function Y9(n){const e=[];return X9.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Gu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>YE(e,"x"),y:(n,{transform:e})=>YE(e,"y")};Gu.translateX=Gu.x;Gu.translateY=Gu.y;const Vu=new Set;let KE=!1,ZE=!1,QE=!1;function ez(){if(ZE){const n=Array.from(Vu).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Y9(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ZE=!1,KE=!1,Vu.forEach(n=>n.complete(QE)),Vu.clear()}function tz(){Vu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ZE=!0)})}function K9(){QE=!0,tz(),ez(),QE=!1}class Hw{constructor(e,t,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Vu.add(this),KE||(KE=!0,er.read(tz),er.resolveKeyframes(ez))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const o=r.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}V9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Vu.delete(this)}cancel(){this.state==="scheduled"&&(Vu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z9=n=>n.startsWith("--");function Q9(n,e,t){Z9(e)?n.style.setProperty(e,t):n.style[e]=t}const J9=kw(()=>window.ScrollTimeline!==void 0),eq={};function tq(n,e){const t=kw(n);return()=>eq[e]??t()}const nz=tq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bf=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,KD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bf([0,.65,.55,1]),circOut:bf([.55,0,1,.45]),backIn:bf([.31,.01,.66,-.59]),backOut:bf([.33,1.53,.69,.99])};function rz(n,e){if(n)return typeof n=="function"?nz()?Z3(n,e):"ease-out":z3(n)?bf(n):Array.isArray(n)?n.map(t=>rz(t,e)||KD.easeOut):KD[n]}function nq(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=rz(o,i);Array.isArray(h)&&(c.easing=h);const f={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(c,f)}function iz(n){return typeof n=="function"&&"applyToOptions"in n}function rq({type:n,...e}){return iz(n)&&nz()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class iq extends Vw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,Iw(typeof e.type!="string");const u=rq(e);this.animation=nq(t,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=Gw(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Q9(t,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Bs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bs(e)}get time(){return Bs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Wa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&J9()?(this.animation.timeline=e,Vs):t(this)}}const sz={anticipate:P3,backInOut:O3,circInOut:U3};function sq(n){return n in sz}function aq(n){typeof n.ease=="string"&&sq(n.ease)&&(n.ease=sz[n.ease])}const ZD=10;class oq extends iq{constructor(e){aq(e),J3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new $w({...a,autoplay:!1}),l=Wa(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-ZD).value,o.sample(l).value,ZD),o.stop()}}const QD=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(zl.test(n)||n==="0")&&!n.startsWith("url("));function lq(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function uq(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=QD(i,e),o=QD(s,e);return!a||!o?!1:lq(n)||(t==="spring"||iz(t))&&r}function JE(n){n.duration=0,n.type="keyframes"}const cq=new Set(["opacity","clipPath","filter","transform"]),dq=kw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hq(n){var c;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return dq()&&t&&cq.has(t)&&(t!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const pq=40;class fq extends Vw{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:c,...h}){var m;super(),this.stop=()=>{var v,_;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Zi.now();const f={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:c,...h},g=(c==null?void 0:c.KeyframeResolver)||Hw;this.keyframeResolver=new g(o,(v,_,b)=>this.onKeyframesResolved(v,_,f,!b),l,u,c),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Zi.now(),uq(e,s,a,o)||((Vo.instantAnimations||!l)&&(c==null||c(Gw(e,r,t))),e[0]=e[e.length-1],JE(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>pq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},g=!u&&hq(f)?new oq({...f,element:f.motionValue.owner.current}):new $w(f);g.finished.then(()=>this.notifyFinished()).catch(Vs),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),K9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const gq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mq(n){const e=gq.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function az(n,e,t=1){const[r,i]=mq(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return R3(a)?parseFloat(a):a}return Pw(i)?az(i,e,t+1):i}function jw(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const oz=new Set(["width","height","top","left","right","bottom",...Mh]),yq={test:n=>n==="auto",parse:n=>n},lz=n=>e=>e.test(n),uz=[Ch,Ut,qa,Tl,l9,o9,yq],JD=n=>uz.find(lz(n));function bq(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||C3(n):!0}const _q=new Set(["brightness","contrast","saturate","opacity"]);function vq(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Fw)||[];if(!r)return n;const i=t.replace(r,"");let s=_q.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const xq=/\b([a-z-]*)\(.*?\)/gu,eT={...zl,getAnimatableNone:n=>{const e=n.match(xq);return e?e.map(vq).join(" "):n}},eO={...Ch,transform:Math.round},Sq={rotate:Tl,rotateX:Tl,rotateY:Tl,rotateZ:Tl,scale:Ey,scaleX:Ey,scaleY:Ey,scaleZ:Ey,skew:Tl,skewX:Tl,skewY:Tl,distance:Ut,translateX:Ut,translateY:Ut,translateZ:Ut,x:Ut,y:Ut,z:Ut,perspective:Ut,transformPerspective:Ut,opacity:ng,originX:GD,originY:GD,originZ:Ut},Ww={borderWidth:Ut,borderTopWidth:Ut,borderRightWidth:Ut,borderBottomWidth:Ut,borderLeftWidth:Ut,borderRadius:Ut,radius:Ut,borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomRightRadius:Ut,borderBottomLeftRadius:Ut,width:Ut,maxWidth:Ut,height:Ut,maxHeight:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,backgroundPositionX:Ut,backgroundPositionY:Ut,...Sq,zIndex:eO,fillOpacity:ng,strokeOpacity:ng,numOctaves:eO},Eq={...Ww,color:vr,backgroundColor:vr,outlineColor:vr,fill:vr,stroke:vr,borderColor:vr,borderTopColor:vr,borderRightColor:vr,borderBottomColor:vr,borderLeftColor:vr,filter:eT,WebkitFilter:eT},cz=n=>Eq[n];function dz(n,e){let t=cz(n);return t!==eT&&(t=zl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Tq=new Set(["auto","none","0"]);function wq(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Tq.has(s)&&rg(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=dz(t,i)}class Aq extends Hw{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Pw(u))){const c=az(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!oz.has(r)||e.length!==2)return;const[i,s]=e,a=JD(i),o=JD(s);if(a!==o)if(YD(a)&&YD(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Gu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||bq(e[i]))&&r.push(i);r.length&&wq(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Gu[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Rq(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const hz=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function pz(n){return N3(n)&&"offsetHeight"in n}const tO=30,Nq=n=>!isNaN(parseFloat(n));class Cq{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Zi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Nq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Lw);const r=this.events[e].add(t);return e==="change"?()=>{r(),er.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tO)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,tO);return M3(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bd(n,e){return new Cq(n,e)}const{schedule:qw}=G3(queueMicrotask,!1),aa={x:!1,y:!1};function fz(){return aa.x||aa.y}function Mq(n){return n==="x"||n==="y"?aa[n]?null:(aa[n]=!0,()=>{aa[n]=!1}):aa.x||aa.y?null:(aa.x=aa.y=!0,()=>{aa.x=aa.y=!1})}function gz(n,e){const t=Rq(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function nO(n){return!(n.pointerType==="touch"||fz())}function Iq(n,e,t={}){const[r,i,s]=gz(n,t),a=o=>{if(!nO(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=h=>{nO(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const mz=(n,e)=>e?n===e?!0:mz(n,e.parentElement):!1,Xw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,kq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Lq(n){return kq.has(n.tagName)||n.tabIndex!==-1}const Pb=new WeakSet;function rO(n){return e=>{e.key==="Enter"&&n(e)}}function vS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dq=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=rO(()=>{if(Pb.has(t))return;vS(t,"down");const i=rO(()=>{vS(t,"up")}),s=()=>vS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function iO(n){return Xw(n)&&!fz()}function Oq(n,e,t={}){const[r,i,s]=gz(n,t),a=o=>{const l=o.currentTarget;if(!iO(o))return;Pb.add(l);const u=e(l,o),c=(g,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Pb.has(l)&&Pb.delete(l),iO(g)&&typeof u=="function"&&u(g,{success:m})},h=g=>{c(g,l===window||l===document||t.useGlobalTarget||mz(l,g.target))},f=g=>{c(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),pz(o)&&(o.addEventListener("focus",u=>Dq(u,i)),!Lq(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function yz(n){return N3(n)&&"ownerSVGElement"in n}function Pq(n){return yz(n)&&n.tagName==="svg"}const gi=n=>!!(n&&n.getVelocity),Fq=[...uz,vr,zl],Uq=n=>Fq.find(lz(n)),Yw=se.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function sO(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Bq(...n){return e=>{let t=!1;const r=n.map(i=>{const s=sO(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():sO(n[i],null)}}}}function zq(...n){return se.useCallback(Bq(...n),n)}class Gq extends se.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=pz(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Vq({children:n,isPresent:e,anchorX:t,root:r}){const i=se.useId(),s=se.useRef(null),a=se.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=se.useContext(Yw),l=zq(s,n==null?void 0:n.ref);return se.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:f,right:g}=a.current;if(e||!s.current||!u||!c)return;const m=t==="left"?`left: ${f}`:`right: ${g}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");o&&(v.nonce=o);const _=r??document.head;return _.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(v)&&_.removeChild(v)}},[e]),L.jsx(Gq,{isPresent:e,childRef:s,sizeRef:a,children:se.cloneElement(n,{ref:l})})}const $q=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o,root:l})=>{const u=Rw(Hq),c=se.useId();let h=!0,f=se.useMemo(()=>(h=!1,{id:c,initial:e,isPresent:t,custom:i,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;r&&r()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[t,u,r]);return s&&h&&(f={...f}),se.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[t]),se.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),a==="popLayout"&&(n=L.jsx(Vq,{isPresent:t,anchorX:o,root:l,children:n})),L.jsx(O_.Provider,{value:f,children:n})};function Hq(){return new Map}function bz(n=!0){const e=se.useContext(O_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=se.useId();se.useEffect(()=>{if(n)return i(s)},[n]);const a=se.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const Ty=n=>n.key||"";function aO(n){const e=[];return se.Children.forEach(n,t=>{se.isValidElement(t)&&e.push(t)}),e}const jq=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[u,c]=bz(a),h=se.useMemo(()=>aO(n),[n]),f=a&&!u?[]:h.map(Ty),g=se.useRef(!0),m=se.useRef(h),v=Rw(()=>new Map),[_,b]=se.useState(h),[S,E]=se.useState(h);A3(()=>{g.current=!1,m.current=h;for(let w=0;w<S.length;w++){const M=Ty(S[w]);f.includes(M)?v.delete(M):v.get(M)!==!0&&v.set(M,!1)}},[S,f.length,f.join("-")]);const A=[];if(h!==_){let w=[...h];for(let M=0;M<S.length;M++){const I=S[M],C=Ty(I);f.includes(C)||(w.splice(M,0,I),A.push(I))}return s==="wait"&&A.length&&(w=A),E(aO(w)),b(h),null}const{forceRender:R}=se.useContext(Aw);return L.jsx(L.Fragment,{children:S.map(w=>{const M=Ty(w),I=a&&!u?!1:h===S||f.includes(M),C=()=>{if(v.has(M))v.set(M,!0);else return;let k=!0;v.forEach(O=>{O||(k=!1)}),k&&(R==null||R(),E(m.current),a&&(c==null||c()),r&&r())};return L.jsx($q,{isPresent:I,initial:!g.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:I?void 0:C,anchorX:o,children:w},M)})})},_z=se.createContext({strict:!1}),oO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zd={};for(const n in oO)zd[n]={isEnabled:e=>oO[n].some(t=>!!e[t])};function Wq(n){for(const e in n)zd[e]={...zd[e],...n[e]}}const qq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function i_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||qq.has(n)}let vz=n=>!i_(n);function Xq(n){typeof n=="function"&&(vz=e=>e.startsWith("on")?!i_(e):n(e))}try{Xq(require("@emotion/is-prop-valid").default)}catch{}function Yq(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(vz(i)||t===!0&&i_(i)||!e&&!i_(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const P_=se.createContext({});function F_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function ig(n){return typeof n=="string"||Array.isArray(n)}const Kw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zw=["initial",...Kw];function U_(n){return F_(n.animate)||Zw.some(e=>ig(n[e]))}function xz(n){return!!(U_(n)||n.variants)}function Kq(n,e){if(U_(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ig(t)?t:void 0,animate:ig(r)?r:void 0}}return n.inherit!==!1?e:{}}function Zq(n){const{initial:e,animate:t}=Kq(n,se.useContext(P_));return se.useMemo(()=>({initial:e,animate:t}),[lO(e),lO(t)])}function lO(n){return Array.isArray(n)?n.join(" "):n}function uO(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ut.test(n))n=parseFloat(n);else return n;const t=uO(n,e.target.x),r=uO(n,e.target.y);return`${t}% ${r}%`}},Qq={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=zl.parse(n);if(i.length>5)return r;const s=zl.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=lr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}},tT={borderRadius:{...Fp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fp,borderTopRightRadius:Fp,borderBottomLeftRadius:Fp,borderBottomRightRadius:Fp,boxShadow:Qq};function Sz(n,{layout:e,layoutId:t}){return Ih.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!tT[n]||n==="opacity")}const Jq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eX=Mh.length;function tX(n,e,t){let r="",i=!0;for(let s=0;s<eX;s++){const a=Mh[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=hz(o,Ww[a]);if(!l){i=!1;const c=Jq[a]||a;r+=`${c}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Qw(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(Ih.has(l)){a=!0;continue}else if($3(l)){i[l]=u;continue}else{const c=hz(u,Ww[l]);l.startsWith("origin")?(o=!0,s[l]=c):r[l]=c}}if(e.transform||(a||t?r.transform=tX(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const Jw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ez(n,e,t){for(const r in e)!gi(e[r])&&!Sz(r,t)&&(n[r]=e[r])}function nX({transformTemplate:n},e){return se.useMemo(()=>{const t=Jw();return Qw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function rX(n,e){const t=n.style||{},r={};return Ez(r,t,n),Object.assign(r,nX(n,e)),r}function iX(n,e){const t={},r=rX(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const sX={offset:"stroke-dashoffset",array:"stroke-dasharray"},aX={offset:"strokeDashoffset",array:"strokeDasharray"};function oX(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?sX:aX;n[s.offset]=Ut.transform(-r);const a=Ut.transform(e),o=Ut.transform(t);n[s.array]=`${a} ${o}`}function Tz(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,c){if(Qw(n,o,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:f}=n;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),i!==void 0&&oX(h,i,s,a,!1)}const wz=()=>({...Jw(),attrs:{}}),Az=n=>typeof n=="string"&&n.toLowerCase()==="svg";function lX(n,e,t,r){const i=se.useMemo(()=>{const s=wz();return Tz(s,e,Az(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};Ez(s,n.style,n),i.style={...s,...i.style}}return i}const uX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function eA(n){return typeof n!="string"||n.includes("-")?!1:!!(uX.indexOf(n)>-1||/[A-Z]/u.test(n))}function cX(n,e,t,{latestValues:r},i,s=!1){const o=(eA(n)?lX:iX)(e,r,i,n),l=Yq(e,typeof n=="string",s),u=n!==se.Fragment?{...l,...o,ref:t}:{},{children:c}=e,h=se.useMemo(()=>gi(c)?c.get():c,[c]);return se.createElement(n,{...u,children:h})}function cO(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function tA(n,e,t,r){if(typeof e=="function"){const[i,s]=cO(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=cO(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function Fb(n){return gi(n)?n.get():n}function dX({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:hX(t,r,i,n),renderState:e()}}function hX(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=Fb(s[f]);let{initial:a,animate:o}=n;const l=U_(n),u=xz(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||a===!1;const h=c?o:a;if(h&&typeof h!="boolean"&&!F_(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const m=tA(n,f[g]);if(m){const{transitionEnd:v,transition:_,...b}=m;for(const S in b){let E=b[S];if(Array.isArray(E)){const A=c?E.length-1:0;E=E[A]}E!==null&&(i[S]=E)}for(const S in v)i[S]=v[S]}}}return i}const Rz=n=>(e,t)=>{const r=se.useContext(P_),i=se.useContext(O_),s=()=>dX(n,e,r,i);return t?s():Rw(s)};function nA(n,e,t){var s;const{style:r}=n,i={};for(const a in r)(gi(r[a])||e.style&&gi(e.style[a])||Sz(a,n)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const pX=Rz({scrapeMotionValuesFromProps:nA,createRenderState:Jw});function Nz(n,e,t){const r=nA(n,e,t);for(const i in n)if(gi(n[i])||gi(e[i])){const s=Mh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const fX=Rz({scrapeMotionValuesFromProps:Nz,createRenderState:wz}),gX=Symbol.for("motionComponentSymbol");function _d(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function mX(n,e,t){return se.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):_d(t)&&(t.current=r))},[e])}const rA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yX="framerAppearId",Cz="data-"+rA(yX),Mz=se.createContext({});function bX(n,e,t,r,i){var v,_;const{visualElement:s}=se.useContext(P_),a=se.useContext(_z),o=se.useContext(O_),l=se.useContext(Yw).reducedMotion,u=se.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=se.useContext(Mz);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&_X(u.current,t,i,h);const f=se.useRef(!1);se.useInsertionEffect(()=>{c&&f.current&&c.update(t,o)});const g=t[Cz],m=se.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,g)));return A3(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),m.current&&c.animationState&&c.animationState.animateChanges())}),se.useEffect(()=>{c&&(!m.current&&c.animationState&&c.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,g)}),m.current=!1),c.enteringChildren=void 0)}),c}function _X(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Iz(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&_d(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function Iz(n){if(n)return n.options.allowProjection!==!1?n.projection:Iz(n.parent)}function xS(n,{forwardMotionProps:e=!1}={},t,r){t&&Wq(t);const i=eA(n)?fX:pX;function s(o,l){let u;const c={...se.useContext(Yw),...o,layoutId:vX(o)},{isStatic:h}=c,f=Zq(o),g=i(o,h);if(!h&&Nw){xX();const m=SX(c);u=m.MeasureLayout,f.visualElement=bX(n,g,c,r,m.ProjectionNode)}return L.jsxs(P_.Provider,{value:f,children:[u&&f.visualElement?L.jsx(u,{visualElement:f.visualElement,...c}):null,cX(n,o,mX(g,f.visualElement,l),g,h,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=se.forwardRef(s);return a[gX]=n,a}function vX({layoutId:n}){const e=se.useContext(Aw).id;return e&&n!==void 0?e+"-"+n:n}function xX(n,e){se.useContext(_z).strict}function SX(n){const{drag:e,layout:t}=zd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function EX(n,e){if(typeof Proxy>"u")return xS;const t=new Map,r=(s,a)=>xS(s,a,n,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(t.has(a)||t.set(a,xS(a,void 0,n,e)),t.get(a))})}function kz({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function TX({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function wX(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function SS(n){return n===void 0||n===1}function nT({scale:n,scaleX:e,scaleY:t}){return!SS(n)||!SS(e)||!SS(t)}function wu(n){return nT(n)||Lz(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Lz(n){return dO(n.x)||dO(n.y)}function dO(n){return n&&n!=="0%"}function s_(n,e,t){const r=n-t,i=e*r;return t+i}function hO(n,e,t,r,i){return i!==void 0&&(n=s_(n,i,r)),s_(n,t,r)+e}function rT(n,e=0,t=1,r,i){n.min=hO(n.min,e,t,r,i),n.max=hO(n.max,e,t,r,i)}function Dz(n,{x:e,y:t}){rT(n.x,e.translate,e.scale,e.originPoint),rT(n.y,t.translate,t.scale,t.originPoint)}const pO=.999999999999,fO=1.0000000000001;function AX(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Dz(n,a)),r&&wu(s.latestValues)&&xd(n,s.latestValues))}e.x<fO&&e.x>pO&&(e.x=1),e.y<fO&&e.y>pO&&(e.y=1)}function vd(n,e){n.min=n.min+e,n.max=n.max+e}function gO(n,e,t,r,i=.5){const s=lr(n.min,n.max,i);rT(n,e,t,s,r)}function xd(n,e){gO(n.x,e.x,e.scaleX,e.scale,e.originX),gO(n.y,e.y,e.scaleY,e.scale,e.originY)}function Oz(n,e){return kz(wX(n.getBoundingClientRect(),e))}function RX(n,e,t){const r=Oz(n,t),{scroll:i}=e;return i&&(vd(r.x,i.offset.x),vd(r.y,i.offset.y)),r}const mO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sd=()=>({x:mO(),y:mO()}),yO=()=>({min:0,max:0}),kr=()=>({x:yO(),y:yO()}),iT={current:null},Pz={current:!1};function NX(){if(Pz.current=!0,!!Nw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>iT.current=n.matches;n.addEventListener("change",e),e()}else iT.current=!1}const CX=new WeakMap;function MX(n,e,t){for(const r in e){const i=e[r],s=t[r];if(gi(i))n.addValue(r,i);else if(gi(s))n.addValue(r,Bd(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,Bd(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const bO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IX{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Zi.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,er.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=U_(t),this.isVariantNode=xz(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in h){const g=h[f];l[f]!==void 0&&gi(g)&&g.set(l[f])}}mount(e){var t;this.current=e,CX.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Pz.current||NX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iT.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Bl(this.notifyUpdate),Bl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ih.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&er.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in zd){const t=zd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<bO.length;r++){const i=bO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=MX(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Bd(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(R3(r)||C3(r))?r=parseFloat(r):!Uq(r)&&zl.test(t)&&(r=dz(e,t)),this.setBaseTarget(e,gi(r)?r.get():r)),gi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=tA(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Lw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){qw.render(this.render)}}class Fz extends IX{constructor(){super(...arguments),this.KeyframeResolver=Aq}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Uz(n,{style:e,vars:t},r,i){const s=n.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,r);for(a in t)s.setProperty(a,t[a])}function kX(n){return window.getComputedStyle(n)}class LX extends Fz{constructor(){super(...arguments),this.type="html",this.renderInstance=Uz}readValueFromInstance(e,t){var r;if(Ih.has(t))return(r=this.projection)!=null&&r.isProjecting?XE(t):j9(e,t);{const i=kX(e),s=($3(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Oz(e,t)}build(e,t,r){Qw(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return nA(e,t,r)}}const Bz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DX(n,e,t,r){Uz(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Bz.has(i)?i:rA(i),e.attrs[i])}class OX extends Fz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ih.has(t)){const r=cz(t);return r&&r.default||0}return t=Bz.has(t)?t:rA(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Nz(e,t,r)}build(e,t,r){Tz(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){DX(e,t,r,i)}mount(e){this.isSVGTag=Az(e.tagName),super.mount(e)}}const PX=(n,e)=>eA(n)?new OX(e):new LX(e,{allowProjection:n!==se.Fragment});function Cd(n,e,t){const r=n.getProps();return tA(r,e,t!==void 0?t:r.custom,n)}const sT=n=>Array.isArray(n);function FX(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Bd(t))}function UX(n){return sT(n)?n[n.length-1]||0:n}function BX(n,e){const t=Cd(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=UX(s[a]);FX(n,a,o)}}function zX(n){return!!(gi(n)&&n.add)}function aT(n,e){const t=n.getValue("willChange");if(zX(t))return t.add(e);if(!t&&Vo.WillChange){const r=new Vo.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function zz(n){return n.props[Cz]}const GX=n=>n!==null;function VX(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(GX),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const $X={type:"spring",stiffness:500,damping:25,restSpeed:10},HX=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),jX={type:"keyframes",duration:.8},WX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qX=(n,{keyframes:e})=>e.length>2?jX:Ih.has(n)?n.startsWith("scale")?HX(e[1]):$X:WX;function XX({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const iA=(n,e,t,r={},i,s)=>a=>{const o=jw(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Wa(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};XX(o)||Object.assign(c,qX(n,c)),c.duration&&(c.duration=Wa(c.duration)),c.repeatDelay&&(c.repeatDelay=Wa(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(JE(c),c.delay===0&&(h=!0)),(Vo.instantAnimations||Vo.skipAnimations)&&(h=!0,JE(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!s&&e.get()!==void 0){const f=VX(c.keyframes,o);if(f!==void 0){er.update(()=>{c.onUpdate(f),c.onComplete()});return}}return o.isSync?new $w(c):new fq(c)};function YX({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Gz(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(s=r);const l=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const c in o){const h=n.getValue(c,n.latestValues[c]??null),f=o[c];if(f===void 0||u&&YX(u,c))continue;const g={delay:t,...jw(s||{},c)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const b=zz(n);if(b){const S=window.MotionHandoffAnimation(b,c,er);S!==null&&(g.startTime=S,v=!0)}}aT(n,c),h.start(iA(c,h,f,n.shouldReduceMotion&&oz.has(c)?{type:!1}:g,n,v));const _=h.animation;_&&l.push(_)}return a&&Promise.all(l).then(()=>{er.update(()=>{a&&BX(n,a)})}),l}function Vz(n,e,t,r=0,i=1){const s=Array.from(n).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),a=n.size,o=(a-1)*r;return typeof t=="function"?t(s,a):i===1?s*r:o-s*r}function oT(n,e,t={}){var l;const r=Cd(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(Gz(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=i;return KX(n,e,u,c,h,f,t)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>c())}else return Promise.all([s(),a(t.delay)])}function KX(n,e,t=0,r=0,i=0,s=1,a){const o=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),o.push(oT(l,e,{...a,delay:t+(typeof r=="function"?0:r)+Vz(n.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function ZX(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>oT(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=oT(n,e,t);else{const i=typeof e=="function"?Cd(n,e,t.custom):e;r=Promise.all(Gz(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function $z(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const QX=Zw.length;function Hz(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Hz(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<QX;t++){const r=Zw[t],i=n.props[r];(ig(i)||i===!1)&&(e[r]=i)}return e}const JX=[...Kw].reverse(),e7=Kw.length;function t7(n){return e=>Promise.all(e.map(({animation:t,options:r})=>ZX(n,t,r)))}function n7(n){let e=t7(n),t=_O(),r=!0;const i=l=>(u,c)=>{var f;const h=Cd(n,c,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:g,transitionEnd:m,...v}=h;u={...u,...v,...m}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,c=Hz(n.parent)||{},h=[],f=new Set;let g={},m=1/0;for(let _=0;_<e7;_++){const b=JX[_],S=t[b],E=u[b]!==void 0?u[b]:c[b],A=ig(E),R=b===l?S.isActive:null;R===!1&&(m=_);let w=E===c[b]&&E!==u[b]&&A;if(w&&r&&n.manuallyAnimateOnMount&&(w=!1),S.protectedKeys={...g},!S.isActive&&R===null||!E&&!S.prevProp||F_(E)||typeof E=="boolean")continue;const M=r7(S.prevProp,E);let I=M||b===l&&S.isActive&&!w&&A||_>m&&A,C=!1;const k=Array.isArray(E)?E:[E];let O=k.reduce(i(b),{});R===!1&&(O={});const{prevResolvedValues:z={}}=S,W={...z,...O},q=H=>{I=!0,f.has(H)&&(C=!0,f.delete(H)),S.needsAnimating[H]=!0;const G=n.getValue(H);G&&(G.liveStyle=!1)};for(const H in W){const G=O[H],re=z[H];if(g.hasOwnProperty(H))continue;let D=!1;sT(G)&&sT(re)?D=!$z(G,re):D=G!==re,D?G!=null?q(H):f.add(H):G!==void 0&&f.has(H)?q(H):S.protectedKeys[H]=!0}S.prevProp=E,S.prevResolvedValues=O,S.isActive&&(g={...g,...O}),r&&n.blockInitialAnimation&&(I=!1);const X=w&&M;I&&(!X||C)&&h.push(...k.map(H=>{const G={type:b};if(typeof H=="string"&&r&&!X&&n.manuallyAnimateOnMount&&n.parent){const{parent:re}=n,D=Cd(re,H);if(re.enteringChildren&&D){const{delayChildren:U}=D.transition||{};G.delay=Vz(re.enteringChildren,n,U)}}return{animation:H,options:G}}))}if(f.size){const _={};if(typeof u.initial!="boolean"){const b=Cd(n,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(_.transition=b.transition)}f.forEach(b=>{const S=n.getBaseTarget(b),E=n.getValue(b);E&&(E.liveStyle=!0),_[b]=S??null}),h.push({animation:_})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)==null||h.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(l,u)}),t[l].isActive=u;const c=a(l);for(const f in t)t[f].protectedKeys={};return c}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=_O()}}}function r7(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!$z(e,n):!1}function fu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _O(){return{animate:fu(!0),whileInView:fu(),whileHover:fu(),whileTap:fu(),whileDrag:fu(),whileFocus:fu(),exit:fu()}}class jl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class i7 extends jl{constructor(e){super(e),e.animationState||(e.animationState=n7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();F_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let s7=0;class a7 extends jl{constructor(){super(...arguments),this.id=s7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const o7={animation:{Feature:i7},exit:{Feature:a7}};function sg(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Gg(n){return{point:{x:n.pageX,y:n.pageY}}}const l7=n=>e=>Xw(e)&&n(e,Gg(e));function Cf(n,e,t,r){return sg(n,e,l7(t),r)}const jz=1e-4,u7=1-jz,c7=1+jz,Wz=.01,d7=0-Wz,h7=0+Wz;function ki(n){return n.max-n.min}function p7(n,e,t){return Math.abs(n-e)<=t}function vO(n,e,t,r=.5){n.origin=r,n.originPoint=lr(e.min,e.max,n.origin),n.scale=ki(t)/ki(e),n.translate=lr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=u7&&n.scale<=c7||isNaN(n.scale))&&(n.scale=1),(n.translate>=d7&&n.translate<=h7||isNaN(n.translate))&&(n.translate=0)}function Mf(n,e,t,r){vO(n.x,e.x,t.x,r?r.originX:void 0),vO(n.y,e.y,t.y,r?r.originY:void 0)}function xO(n,e,t){n.min=t.min+e.min,n.max=n.min+ki(e)}function f7(n,e,t){xO(n.x,e.x,t.x),xO(n.y,e.y,t.y)}function SO(n,e,t){n.min=e.min-t.min,n.max=n.min+ki(e)}function a_(n,e,t){SO(n.x,e.x,t.x),SO(n.y,e.y,t.y)}function Ds(n){return[n("x"),n("y")]}const qz=({current:n})=>n?n.ownerDocument.defaultView:null,EO=(n,e)=>Math.abs(n-e);function g7(n,e){const t=EO(n.x,e.x),r=EO(n.y,e.y);return Math.sqrt(t**2+r**2)}class Xz{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=TS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,m=g7(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!m)return;const{point:v}=f,{timestamp:_}=Kr;this.history.push({...v,timestamp:_});const{onStart:b,onMove:S}=this.handlers;g||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ES(g,this.transformPagePoint),er.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=TS(f.type==="pointercancel"?this.lastMoveEventInfo:ES(g,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,b),v&&v(f,b)},!Xw(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=Gg(e),l=ES(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=Kr;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,TS(l,this.history)),this.removeListeners=Ug(Cf(this.contextWindow,"pointermove",this.handlePointerMove),Cf(this.contextWindow,"pointerup",this.handlePointerUp),Cf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bl(this.updatePoint)}}function ES(n,e){return e?{point:e(n.point)}:n}function TO(n,e){return{x:n.x-e.x,y:n.y-e.y}}function TS({point:n},e){return{point:n,delta:TO(n,Yz(e)),offset:TO(n,m7(e)),velocity:y7(e,.1)}}function m7(n){return n[0]}function Yz(n){return n[n.length-1]}function y7(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=Yz(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Wa(e)));)t--;if(!r)return{x:0,y:0};const s=Bs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function b7(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lr(t,n,r.max):Math.min(n,t)),n}function wO(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function _7(n,{top:e,left:t,bottom:r,right:i}){return{x:wO(n.x,t,i),y:wO(n.y,e,r)}}function AO(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function v7(n,e){return{x:AO(n.x,e.x),y:AO(n.y,e.y)}}function x7(n,e){let t=.5;const r=ki(n),i=ki(e);return i>r?t=tg(e.min,e.max-r,n.min):r>i&&(t=tg(n.min,n.max-i,e.min)),Go(0,1,t)}function S7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const lT=.35;function E7(n=lT){return n===!1?n=0:n===!0&&(n=lT),{x:RO(n,"left","right"),y:RO(n,"top","bottom")}}function RO(n,e,t){return{min:NO(n,e),max:NO(n,t)}}function NO(n,e){return typeof n=="number"?n:n[e]||0}const T7=new WeakMap;class w7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Gg(h).point)},a=(h,f)=>{const{drag:g,dragPropagation:m,onDragStart:v}=this.getProps();if(g&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Mq(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ds(b=>{let S=this.getAxisMotionValue(b).get()||0;if(qa.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const A=E.layout.layoutBox[b];A&&(S=ki(A)*(parseFloat(S)/100))}}this.originPoint[b]=S}),v&&er.postRender(()=>v(h,f)),aT(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:g,dragDirectionLock:m,onDirectionLock:v,onDrag:_}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:b}=f;if(m&&this.currentDirection===null){this.currentDirection=A7(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),_&&_(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ds(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Xz(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:qz(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&er.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!wy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=b7(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&_d(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=_7(r.layoutBox,e):this.constraints=!1,this.elastic=E7(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ds(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=S7(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!_d(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=RX(r,i.root,this.visualElement.getTransformPagePoint());let a=v7(i.layout.layoutBox,s);if(t){const o=t(TX(a));this.hasMutatedConstraints=!!o,o&&(a=kz(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ds(c=>{if(!wy(c,t,this.currentDirection))return;let h=l&&l[c]||{};a&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,m={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return aT(this.visualElement,e),r.start(iA(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ds(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ds(t=>{const{drag:r}=this.getProps();if(!wy(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-lr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!_d(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ds(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=x7({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ds(a=>{if(!wy(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(lr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;T7.set(this.visualElement,this);const e=this.visualElement.current,t=Cf(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();_d(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),er.read(r);const a=sg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ds(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=lT,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function wy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function A7(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class R7 extends jl{constructor(e){super(e),this.removeGroupControls=Vs,this.removeListeners=Vs,this.controls=new w7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vs}unmount(){this.removeGroupControls(),this.removeListeners()}}const CO=n=>(e,t)=>{n&&er.postRender(()=>n(e,t))};class N7 extends jl{constructor(){super(...arguments),this.removePointerDownListener=Vs}onPointerDown(e){this.session=new Xz(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qz(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:CO(e),onStart:CO(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&er.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Cf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ub={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let wS=!1;class C7 extends se.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),wS&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ub.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,wS=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||er.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;wS=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Kz(n){const[e,t]=bz(),r=se.useContext(Aw);return L.jsx(C7,{...n,layoutGroup:r,switchLayoutGroup:se.useContext(Mz),isPresent:e,safeToRemove:t})}function M7(n,e,t){const r=gi(n)?n:Bd(n);return r.start(iA("",r,e,t)),r.animation}const I7=(n,e)=>n.depth-e.depth;class k7{constructor(){this.children=[],this.isDirty=!1}add(e){Cw(this.children,e),this.isDirty=!0}remove(e){Mw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(I7),this.isDirty=!1,this.children.forEach(e)}}function L7(n,e){const t=Zi.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Bl(r),n(s-e))};return er.setup(r,!0),()=>Bl(r)}const Zz=["TopLeft","TopRight","BottomLeft","BottomRight"],D7=Zz.length,MO=n=>typeof n=="string"?parseFloat(n):n,IO=n=>typeof n=="number"||Ut.test(n);function O7(n,e,t,r,i,s){i?(n.opacity=lr(0,t.opacity??1,P7(r)),n.opacityExit=lr(e.opacity??1,0,F7(r))):s&&(n.opacity=lr(e.opacity??1,t.opacity??1,r));for(let a=0;a<D7;a++){const o=`border${Zz[a]}Radius`;let l=kO(e,o),u=kO(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||IO(l)===IO(u)?(n[o]=Math.max(lr(MO(l),MO(u),r),0),(qa.test(u)||qa.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=lr(e.rotate||0,t.rotate||0,r))}function kO(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const P7=Qz(0,.5,F3),F7=Qz(.5,.95,Vs);function Qz(n,e,t){return r=>r<n?0:r>e?1:t(tg(n,e,r))}function LO(n,e){n.min=e.min,n.max=e.max}function ea(n,e){LO(n.x,e.x),LO(n.y,e.y)}function DO(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function OO(n,e,t,r,i){return n-=e,n=s_(n,1/t,r),i!==void 0&&(n=s_(n,1/i,r)),n}function U7(n,e=0,t=1,r=.5,i,s=n,a=n){if(qa.test(e)&&(e=parseFloat(e),e=lr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=lr(s.min,s.max,r);n===s&&(o-=e),n.min=OO(n.min,e,t,o,i),n.max=OO(n.max,e,t,o,i)}function PO(n,e,[t,r,i],s,a){U7(n,e[t],e[r],e[i],e.scale,s,a)}const B7=["x","scaleX","originX"],z7=["y","scaleY","originY"];function FO(n,e,t,r){PO(n.x,e,B7,t?t.x:void 0,r?r.x:void 0),PO(n.y,e,z7,t?t.y:void 0,r?r.y:void 0)}function UO(n){return n.translate===0&&n.scale===1}function Jz(n){return UO(n.x)&&UO(n.y)}function BO(n,e){return n.min===e.min&&n.max===e.max}function G7(n,e){return BO(n.x,e.x)&&BO(n.y,e.y)}function zO(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function eG(n,e){return zO(n.x,e.x)&&zO(n.y,e.y)}function GO(n){return ki(n.x)/ki(n.y)}function VO(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class V7{constructor(){this.members=[]}add(e){Cw(this.members,e),e.scheduleRender()}remove(e){if(Mw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $7(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:g,skewY:m}=t;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const AS=["","X","Y","Z"],H7=1e3;let j7=0;function RS(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function tG(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=zz(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",er,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&tG(r)}function nG({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=j7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(X7),this.nodes.forEach(Q7),this.nodes.forEach(J7),this.nodes.forEach(Y7)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new k7)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Lw),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=yz(a)&&!Pq(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let c,h=0;const f=()=>this.root.updateBlockedByResize=!1;er.read(()=>{h=window.innerWidth}),n(a,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,c&&c(),c=L7(f,250),Ub.hasAnimatedSinceResize&&(Ub.hasAnimatedSinceResize=!1,this.nodes.forEach(jO)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||iY,{onLayoutAnimationStart:v,onLayoutAnimationComplete:_}=u.getProps(),b=!this.targetLayout||!eG(this.targetLayout,g),S=!h&&f;if(this.options.layoutRoot||this.resumeFrom||S||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...jw(m,"layout"),onPlay:v,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(c,S)}else h||jO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eY),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tG(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($O);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HO);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Z7),this.nodes.forEach(W7),this.nodes.forEach(q7)):this.nodes.forEach(HO),this.clearAllSnapshots();const o=Zi.now();Kr.delta=Go(0,1e3/60,o-Kr.timestamp),Kr.timestamp=o,Kr.isProcessing=!0,gS.update.process(Kr),gS.preRender.process(Kr),gS.render.process(Kr),Kr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(K7),this.sharedNodes.forEach(tY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,er.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ki(this.snapshot.measuredBox.x)&&!ki(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Jz(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||wu(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),sY(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return kr();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(aY))){const{scroll:c}=this.root;c&&(vd(o.x,c.offset.x),vd(o.y,c.offset.y))}return o}removeElementScroll(a){var l;const o=kr();if(ea(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&ea(o,a),vd(o.x,h.offset.x),vd(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=kr();ea(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&xd(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),wu(c.latestValues)&&xd(l,c.latestValues)}return wu(this.latestValues)&&xd(l,this.latestValues),l}removeTransform(a){const o=kr();ea(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!wu(u.latestValues))continue;nT(u.latestValues)&&u.updateSnapshot();const c=kr(),h=u.measurePageBox();ea(c,h),FO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return wu(this.latestValues)&&FO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var g;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!this.layout||!(c||h))return;this.resolvedRelativeTargetAt=Kr.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kr(),this.targetWithTransforms=kr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),f7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ea(this.target,this.layout.layoutBox),Dz(this.target,this.targetDelta)):ea(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||nT(this.parent.latestValues)||Lz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kr(),this.relativeTargetOrigin=kr(),a_(this.relativeTargetOrigin,o,l),ea(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Kr.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;ea(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;AX(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=kr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DO(this.prevProjectionDelta.x,this.projectionDelta.x),DO(this.prevProjectionDelta.y,this.projectionDelta.y)),Mf(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!VO(this.projectionDelta.x,this.prevProjectionDelta.x)||!VO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sd(),this.projectionDelta=Sd(),this.projectionDeltaWithTransform=Sd()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Sd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=kr(),g=l?l.source:void 0,m=this.layout?this.layout.source:void 0,v=g!==m,_=this.getStack(),b=!_||_.members.length<=1,S=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(rY));this.animationProgress=0;let E;this.mixTargetDelta=A=>{const R=A/1e3;WO(h.x,a.x,R),WO(h.y,a.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(a_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nY(this.relativeTarget,this.relativeTargetOrigin,f,R),E&&G7(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=kr()),ea(E,this.relativeTarget)),v&&(this.animationValues=c,O7(c,u,this.latestValues,R,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Bl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=er.update(()=>{Ub.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bd(0)),this.currentAnimation=M7(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(H7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&rG(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||kr();const h=ki(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const f=ki(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}ea(o,l),xd(o,c),Mf(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new V7),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&RS("z",a,u,this.animationValues);for(let c=0;c<AS.length;c++)RS(`rotate${AS[c]}`,a,u,this.animationValues),RS(`skew${AS[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Fb(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Fb(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!wu(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=$7(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),a.transform=h;const{x:f,y:g}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const m in tT){if(c[m]===void 0)continue;const{correct:v,applyTo:_,isCSSVariable:b}=tT[m],S=h==="none"?c[m]:v(c[m],u);if(_){const E=_.length;for(let A=0;A<E;A++)a[_[A]]=S}else b?this.options.visualElement.renderState.vars[m]=S:a[m]=S}this.options.layoutId&&(a.pointerEvents=u===this?Fb(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach($O),this.root.sharedNodes.clear()}}}function W7(n){n.updateLayout()}function q7(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=e.source!==n.layout.source;s==="size"?Ds(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],g=ki(f);f.min=r[h].min,f.max=f.min+g}):rG(s,e.layoutBox,r)&&Ds(h=>{const f=a?e.measuredBox[h]:e.layoutBox[h],g=ki(r[h]);f.max=f.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+g)});const o=Sd();Mf(o,r,e.layoutBox);const l=Sd();a?Mf(l,n.applyTransform(i,!0),e.measuredBox):Mf(l,r,e.layoutBox);const u=!Jz(o);let c=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const m=kr();a_(m,e.layoutBox,f.layoutBox);const v=kr();a_(v,r,g.layoutBox),eG(m,v)||(c=!0),h.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=m,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function X7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Y7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function K7(n){n.clearSnapshot()}function $O(n){n.clearMeasurements()}function HO(n){n.isLayoutDirty=!1}function Z7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function jO(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Q7(n){n.resolveTargetDelta()}function J7(n){n.calcProjection()}function eY(n){n.resetSkewAndRotation()}function tY(n){n.removeLeadSnapshot()}function WO(n,e,t){n.translate=lr(e.translate,0,t),n.scale=lr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function qO(n,e,t,r){n.min=lr(e.min,t.min,r),n.max=lr(e.max,t.max,r)}function nY(n,e,t,r){qO(n.x,e.x,t.x,r),qO(n.y,e.y,t.y,r)}function rY(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const iY={duration:.45,ease:[.4,0,.1,1]},XO=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),YO=XO("applewebkit/")&&!XO("chrome/")?Math.round:Vs;function KO(n){n.min=YO(n.min),n.max=YO(n.max)}function sY(n){KO(n.x),KO(n.y)}function rG(n,e,t){return n==="position"||n==="preserve-aspect"&&!p7(GO(e),GO(t),.2)}function aY(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const oY=nG({attachResizeListener:(n,e)=>sg(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),NS={current:void 0},iG=nG({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!NS.current){const n=new oY({});n.mount(window),n.setOptions({layoutScroll:!0}),NS.current=n}return NS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),lY={pan:{Feature:N7},drag:{Feature:R7,ProjectionNode:iG,MeasureLayout:Kz}};function ZO(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&er.postRender(()=>s(e,Gg(e)))}class uY extends jl{mount(){const{current:e}=this.node;e&&(this.unmount=Iq(e,(t,r)=>(ZO(this.node,r,"Start"),i=>ZO(this.node,i,"End"))))}unmount(){}}class cY extends jl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ug(sg(this.node.current,"focus",()=>this.onFocus()),sg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QO(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&er.postRender(()=>s(e,Gg(e)))}class dY extends jl{mount(){const{current:e}=this.node;e&&(this.unmount=Oq(e,(t,r)=>(QO(this.node,r,"Start"),(i,{success:s})=>QO(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uT=new WeakMap,CS=new WeakMap,hY=n=>{const e=uT.get(n.target);e&&e(n)},pY=n=>{n.forEach(hY)};function fY({root:n,...e}){const t=n||document;CS.has(t)||CS.set(t,{});const r=CS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pY,{root:n,...e})),r[i]}function gY(n,e,t){const r=fY(e);return uT.set(n,t),r.observe(n),()=>{uT.delete(n),r.unobserve(n)}}const mY={some:0,all:1};class yY extends jl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mY[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return gY(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(bY(e,t))&&this.startObserver()}unmount(){}}function bY({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _Y={inView:{Feature:yY},tap:{Feature:dY},focus:{Feature:cY},hover:{Feature:uY}},vY={layout:{ProjectionNode:iG,MeasureLayout:Kz}},xY={...o7,..._Y,...lY,...vY},la=EX(xY,PX),SY=()=>L.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,overflow:"hidden",background:"#0a0a0a"},children:[L.jsx(la.div,{style:{position:"absolute",top:"-10%",left:"-10%",width:"50vw",height:"50vw",borderRadius:"50%",background:"radial-gradient(circle, rgba(37,99,235,0.15) 0%, rgba(37,99,235,0) 70%)",filter:"blur(60px)"},animate:{x:[0,100,0],y:[0,50,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),L.jsx(la.div,{style:{position:"absolute",bottom:"-10%",right:"-10%",width:"60vw",height:"60vw",borderRadius:"50%",background:"radial-gradient(circle, rgba(147,51,234,0.15) 0%, rgba(147,51,234,0) 70%)",filter:"blur(80px)"},animate:{x:[0,-100,0],y:[0,-50,0],scale:[1,1.2,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),L.jsx(la.div,{style:{position:"absolute",top:"40%",left:"40%",width:"40vw",height:"40vw",borderRadius:"50%",background:"radial-gradient(circle, rgba(56,189,248,0.1) 0%, rgba(56,189,248,0) 70%)",filter:"blur(50px)"},animate:{x:[0,-30,0],y:[0,40,0],scale:[1,1.3,1]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}})]});function EY(){return L.jsxs("div",{className:"app",children:[L.jsx(SY,{}),L.jsx(V8,{}),L.jsx("div",{className:"content",children:L.jsx(GW,{})})]})}function TY(){const{t:n}=Fg(),e=Pg();return L.jsxs("div",{className:"home-page",children:[L.jsx("div",{className:"home-bg-glow-1"}),L.jsx("div",{className:"home-bg-glow-2"}),L.jsxs("div",{className:"home-content",children:[L.jsx("div",{className:"home-logo-container",children:L.jsx("div",{className:"home-logo-ring",children:L.jsx("span",{className:"home-logo-text",children:"J"})})}),L.jsxs("h1",{className:"home-title",children:["JOE ",L.jsx("span",{className:"home-title-accent",children:"AI"})]}),L.jsx("p",{className:"home-subtitle",children:n("homeSubtitle","Your intelligent coding companion")}),L.jsxs("div",{className:"home-actions",children:[L.jsxs("button",{className:"home-btn-primary",onClick:()=>e("/login"),children:[L.jsx("span",{children:n("start_now","Start Now")}),L.jsx(g6,{size:20})]}),L.jsxs("button",{className:"home-btn-secondary",onClick:()=>window.open("https://xelitesolutions.com","_blank"),children:[L.jsx("span",{children:n("learn_more","Learn More")}),L.jsx(GE,{size:18})]})]})]}),L.jsx("div",{className:"home-footer",children:" 2025 Xelite Solutions. All rights reserved."})]})}function wY(){const{t:n}=Fg(),e=Pg(),[t,r]=se.useState(""),[i,s]=se.useState(""),[a,o]=se.useState(!1),[l,u]=se.useState(null),[c,h]=se.useState(!1);async function f(){u(null),h(!0);try{const m=await fetch(`${or}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:i,role:"OWNER"})});if(!m.ok){const v=await m.text();u(v);return}await g()}catch{u("Registration failed")}finally{h(!1)}}async function g(){u(null),h(!0);try{const m=await fetch(`${or}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:i})}),v=await m.json();if(!m.ok){u((v==null?void 0:v.error)||"Login failed");return}localStorage.setItem("token",v.token),e("/joe")}catch{u("Network error")}finally{h(!1)}}return L.jsxs("div",{className:"login-page",children:[L.jsxs("div",{className:"login-card",style:{position:"relative"},children:[L.jsx("button",{className:"login-close-btn",onClick:()=>e("/"),title:n("close","Close"),children:L.jsx(e_,{size:24})}),L.jsxs("div",{className:"login-header",children:[L.jsx("div",{className:"login-logo-wrapper",children:L.jsx("div",{className:"login-logo",children:L.jsx("span",{className:"login-logo-text",children:"J"})})}),L.jsx("div",{className:"login-title",children:"JOE AI"}),L.jsxs("div",{className:"login-subtitle",children:[L.jsx(BE,{size:14,style:{display:"inline",marginInlineEnd:6,color:"var(--accent-primary)"}}),n("login_subtitle","Welcome back to your workspace"),L.jsx(BE,{size:14,style:{display:"inline",marginInlineStart:6,color:"var(--accent-primary)"}})]})]}),L.jsxs("div",{className:"login-form",children:[l&&L.jsx("div",{className:"login-error",children:l}),L.jsxs("div",{className:"login-input-group",children:[L.jsx("label",{className:"login-label",children:n("email")}),L.jsxs("div",{style:{position:"relative"},children:[L.jsx("input",{className:"login-input",value:t,onChange:m=>r(m.target.value),placeholder:"you@example.com"}),L.jsx(Q6,{size:18,style:{position:"absolute",top:16,left:16,color:"var(--text-muted)"},className:"input-icon-start"})]})]}),L.jsxs("div",{className:"login-input-group",children:[L.jsx("label",{className:"login-label",children:n("password")}),L.jsxs("div",{style:{position:"relative"},children:[L.jsx("input",{className:"login-input",value:i,onChange:m=>s(m.target.value),type:a?"text":"password",placeholder:"",onKeyDown:m=>m.key==="Enter"&&g()}),L.jsx(q6,{size:18,style:{position:"absolute",top:16,left:16,color:"var(--text-muted)"},className:"input-icon-start"}),L.jsx("button",{type:"button",onClick:()=>o(!a),style:{position:"absolute",top:14,right:16,background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},className:"input-icon-end",children:a?L.jsx(v3,{size:18}):L.jsx(ww,{size:18})})]})]}),L.jsxs("div",{className:"login-actions",children:[L.jsx("button",{className:"login-submit-btn",onClick:g,disabled:c,children:c?"...":L.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[L.jsx(S3,{size:20})," ",n("login")]})}),L.jsx("button",{className:"login-register-btn",onClick:f,disabled:c,children:L.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[L.jsx(C8,{size:18})," ",n("register")]})})]})]})]}),L.jsx("div",{style:{position:"absolute",top:"10%",left:"10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%)",filter:"blur(40px)",zIndex:0}}),L.jsx("div",{style:{position:"absolute",bottom:"10%",right:"10%",width:"400px",height:"400px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.1) 0%, transparent 70%)",filter:"blur(60px)",zIndex:0}})]})}const AY="modulepreload",RY=function(n){return"/"+n},JO={},NY=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(t.map(u=>{if(u=RY(u),u in JO)return;JO[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":AY,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((g,m)=>{f.addEventListener("load",g),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function eP(n){const e=[],t=String(n||"");let r=t.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=t.length,s=!0);const a=t.slice(i,r).trim();(a||!s)&&e.push(a),i=r+1,r=t.indexOf(",",i)}return e}function CY(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const MY=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IY=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kY={};function tP(n,e){return(kY.jsx?IY:MY).test(n)}const LY=/[ \t\n\f\r]/g;function DY(n){return typeof n=="object"?n.type==="text"?nP(n.value):!1:nP(n)}function nP(n){return n.replace(LY,"")===""}class Vg{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}Vg.prototype.normal={};Vg.prototype.property={};Vg.prototype.space=void 0;function sG(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new Vg(t,r,e)}function ag(n){return n.toLowerCase()}let as=class{constructor(e,t){this.attribute=t,this.property=e}};as.prototype.attribute="";as.prototype.booleanish=!1;as.prototype.boolean=!1;as.prototype.commaOrSpaceSeparated=!1;as.prototype.commaSeparated=!1;as.prototype.defined=!1;as.prototype.mustUseProperty=!1;as.prototype.number=!1;as.prototype.overloadedBoolean=!1;as.prototype.property="";as.prototype.spaceSeparated=!1;as.prototype.space=void 0;let OY=0;const Jt=uc(),_r=uc(),cT=uc(),We=uc(),Hn=uc(),Md=uc(),ys=uc();function uc(){return 2**++OY}const dT=Object.freeze(Object.defineProperty({__proto__:null,boolean:Jt,booleanish:_r,commaOrSpaceSeparated:ys,commaSeparated:Md,number:We,overloadedBoolean:cT,spaceSeparated:Hn},Symbol.toStringTag,{value:"Module"})),MS=Object.keys(dT);class sA extends as{constructor(e,t,r,i){let s=-1;if(super(e,t),rP(this,"space",i),typeof r=="number")for(;++s<MS.length;){const a=MS[s];rP(this,MS[s],(r&dT[a])===dT[a])}}}sA.prototype.defined=!0;function rP(n,e,t){t&&(n[e]=t)}function kh(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const s=new sA(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[ag(r)]=r,t[ag(s.attribute)]=r}return new Vg(e,t,n.space)}const aG=kh({properties:{ariaActiveDescendant:null,ariaAtomic:_r,ariaAutoComplete:null,ariaBusy:_r,ariaChecked:_r,ariaColCount:We,ariaColIndex:We,ariaColSpan:We,ariaControls:Hn,ariaCurrent:null,ariaDescribedBy:Hn,ariaDetails:null,ariaDisabled:_r,ariaDropEffect:Hn,ariaErrorMessage:null,ariaExpanded:_r,ariaFlowTo:Hn,ariaGrabbed:_r,ariaHasPopup:null,ariaHidden:_r,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Hn,ariaLevel:We,ariaLive:null,ariaModal:_r,ariaMultiLine:_r,ariaMultiSelectable:_r,ariaOrientation:null,ariaOwns:Hn,ariaPlaceholder:null,ariaPosInSet:We,ariaPressed:_r,ariaReadOnly:_r,ariaRelevant:null,ariaRequired:_r,ariaRoleDescription:Hn,ariaRowCount:We,ariaRowIndex:We,ariaRowSpan:We,ariaSelected:_r,ariaSetSize:We,ariaSort:null,ariaValueMax:We,ariaValueMin:We,ariaValueNow:We,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oG(n,e){return e in n?n[e]:e}function lG(n,e){return oG(n,e.toLowerCase())}const PY=kh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Md,acceptCharset:Hn,accessKey:Hn,action:null,allow:null,allowFullScreen:Jt,allowPaymentRequest:Jt,allowUserMedia:Jt,alt:null,as:null,async:Jt,autoCapitalize:null,autoComplete:Hn,autoFocus:Jt,autoPlay:Jt,blocking:Hn,capture:null,charSet:null,checked:Jt,cite:null,className:Hn,cols:We,colSpan:null,content:null,contentEditable:_r,controls:Jt,controlsList:Hn,coords:We|Md,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Jt,defer:Jt,dir:null,dirName:null,disabled:Jt,download:cT,draggable:_r,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Jt,formTarget:null,headers:Hn,height:We,hidden:cT,high:We,href:null,hrefLang:null,htmlFor:Hn,httpEquiv:Hn,id:null,imageSizes:null,imageSrcSet:null,inert:Jt,inputMode:null,integrity:null,is:null,isMap:Jt,itemId:null,itemProp:Hn,itemRef:Hn,itemScope:Jt,itemType:Hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Jt,low:We,manifest:null,max:null,maxLength:We,media:null,method:null,min:null,minLength:We,multiple:Jt,muted:Jt,name:null,nonce:null,noModule:Jt,noValidate:Jt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Jt,optimum:We,pattern:null,ping:Hn,placeholder:null,playsInline:Jt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Jt,referrerPolicy:null,rel:Hn,required:Jt,reversed:Jt,rows:We,rowSpan:We,sandbox:Hn,scope:null,scoped:Jt,seamless:Jt,selected:Jt,shadowRootClonable:Jt,shadowRootDelegatesFocus:Jt,shadowRootMode:null,shape:null,size:We,sizes:null,slot:null,span:We,spellCheck:_r,src:null,srcDoc:null,srcLang:null,srcSet:null,start:We,step:null,style:null,tabIndex:We,target:null,title:null,translate:null,type:null,typeMustMatch:Jt,useMap:null,value:_r,width:We,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Hn,axis:null,background:null,bgColor:null,border:We,borderColor:null,bottomMargin:We,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Jt,declare:Jt,event:null,face:null,frame:null,frameBorder:null,hSpace:We,leftMargin:We,link:null,longDesc:null,lowSrc:null,marginHeight:We,marginWidth:We,noResize:Jt,noHref:Jt,noShade:Jt,noWrap:Jt,object:null,profile:null,prompt:null,rev:null,rightMargin:We,rules:null,scheme:null,scrolling:_r,standby:null,summary:null,text:null,topMargin:We,valueType:null,version:null,vAlign:null,vLink:null,vSpace:We,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Jt,disableRemotePlayback:Jt,prefix:null,property:null,results:We,security:null,unselectable:null},space:"html",transform:lG}),FY=kh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ys,accentHeight:We,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:We,amplitude:We,arabicForm:null,ascent:We,attributeName:null,attributeType:null,azimuth:We,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:We,by:null,calcMode:null,capHeight:We,className:Hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:We,diffuseConstant:We,direction:null,display:null,dur:null,divisor:We,dominantBaseline:null,download:Jt,dx:null,dy:null,edgeMode:null,editable:null,elevation:We,enableBackground:null,end:null,event:null,exponent:We,externalResourcesRequired:null,fill:null,fillOpacity:We,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Md,g2:Md,glyphName:Md,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:We,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:We,horizOriginX:We,horizOriginY:We,id:null,ideographic:We,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:We,k:We,k1:We,k2:We,k3:We,k4:We,kernelMatrix:ys,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:We,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:We,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:We,overlineThickness:We,paintOrder:null,panose1:null,path:null,pathLength:We,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:We,pointsAtY:We,pointsAtZ:We,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ys,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ys,rev:ys,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ys,requiredFeatures:ys,requiredFonts:ys,requiredFormats:ys,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:We,specularExponent:We,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:We,strikethroughThickness:We,string:null,stroke:null,strokeDashArray:ys,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:We,strokeOpacity:We,strokeWidth:null,style:null,surfaceScale:We,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ys,tabIndex:We,tableValues:null,target:null,targetX:We,targetY:We,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ys,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:We,underlineThickness:We,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:We,values:null,vAlphabetic:We,vMathematical:We,vectorEffect:null,vHanging:We,vIdeographic:We,version:null,vertAdvY:We,vertOriginX:We,vertOriginY:We,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:We,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oG}),uG=kh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),cG=kh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:lG}),dG=kh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),UY={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},BY=/[A-Z]/g,iP=/-[a-z]/g,zY=/^data[-\w.:]+$/i;function hG(n,e){const t=ag(e);let r=e,i=as;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&zY.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(iP,VY);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!iP.test(s)){let a=s.replace(BY,GY);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=sA}return new i(r,e)}function GY(n){return"-"+n.toLowerCase()}function VY(n){return n.charAt(1).toUpperCase()}const pG=sG([aG,PY,uG,cG,dG],"html"),B_=sG([aG,FY,uG,cG,dG],"svg");function sP(n){const e=String(n||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function $Y(n){return n.join(" ").trim()}var Gc={},IS,aP;function HY(){if(aP)return IS;aP=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,u="/",c="*",h="",f="comment",g="declaration";function m(_,b){if(typeof _!="string")throw new TypeError("First argument must be a string");if(!_)return[];b=b||{};var S=1,E=1;function A(q){var X=q.match(e);X&&(S+=X.length);var Q=q.lastIndexOf(l);E=~Q?q.length-Q:E+q.length}function R(){var q={line:S,column:E};return function(X){return X.position=new w(q),C(),X}}function w(q){this.start=q,this.end={line:S,column:E},this.source=b.source}w.prototype.content=_;function M(q){var X=new Error(b.source+":"+S+":"+E+": "+q);if(X.reason=q,X.filename=b.source,X.line=S,X.column=E,X.source=_,!b.silent)throw X}function I(q){var X=q.exec(_);if(X){var Q=X[0];return A(Q),_=_.slice(Q.length),X}}function C(){I(t)}function k(q){var X;for(q=q||[];X=O();)X!==!1&&q.push(X);return q}function O(){var q=R();if(!(u!=_.charAt(0)||c!=_.charAt(1))){for(var X=2;h!=_.charAt(X)&&(c!=_.charAt(X)||u!=_.charAt(X+1));)++X;if(X+=2,h===_.charAt(X-1))return M("End of comment missing");var Q=_.slice(2,X-2);return E+=2,A(Q),_=_.slice(X),E+=2,q({type:f,comment:Q})}}function z(){var q=R(),X=I(r);if(X){if(O(),!I(i))return M("property missing ':'");var Q=I(s),H=q({type:g,property:v(X[0].replace(n,h)),value:Q?v(Q[0].replace(n,h)):h});return I(a),H}}function W(){var q=[];k(q);for(var X;X=z();)X!==!1&&(q.push(X),k(q));return q}return C(),W()}function v(_){return _?_.replace(o,h):h}return IS=m,IS}var oP;function jY(){if(oP)return Gc;oP=1;var n=Gc&&Gc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.default=t;const e=n(HY());function t(r,i){let s=null;if(!r||typeof r!="string")return s;const a=(0,e.default)(r),o=typeof i=="function";return a.forEach(l=>{if(l.type!=="declaration")return;const{property:u,value:c}=l;o?i(u,c,l):c&&(s=s||{},s[u]=c)}),s}return Gc}var Up={},lP;function WY(){if(lP)return Up;lP=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(u){return!u||t.test(u)||n.test(u)},a=function(u,c){return c.toUpperCase()},o=function(u,c){return"".concat(c,"-")},l=function(u,c){return c===void 0&&(c={}),s(u)?u:(u=u.toLowerCase(),c.reactCompat?u=u.replace(i,o):u=u.replace(r,o),u.replace(e,a))};return Up.camelCase=l,Up}var Bp,uP;function qY(){if(uP)return Bp;uP=1;var n=Bp&&Bp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(jY()),t=WY();function r(i,s){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(o,l){o&&l&&(a[(0,t.camelCase)(o,s)]=l)}),a}return r.default=r,Bp=r,Bp}var XY=qY();const YY=Lg(XY),fG=gG("end"),aA=gG("start");function gG(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function KY(n){const e=aA(n),t=fG(n);if(e&&t)return{start:e,end:t}}function If(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?cP(n.position):"start"in n||"end"in n?cP(n):"line"in n||"column"in n?hT(n):""}function hT(n){return dP(n&&n.line)+":"+dP(n&&n.column)}function cP(n){return hT(n&&n.start)+"-"+hT(n&&n.end)}function dP(n){return n&&typeof n=="number"?n:1}class bi extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",s={},a=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=If(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}bi.prototype.file="";bi.prototype.name="";bi.prototype.reason="";bi.prototype.message="";bi.prototype.stack="";bi.prototype.column=void 0;bi.prototype.line=void 0;bi.prototype.ancestors=void 0;bi.prototype.cause=void 0;bi.prototype.fatal=void 0;bi.prototype.place=void 0;bi.prototype.ruleId=void 0;bi.prototype.source=void 0;const oA={}.hasOwnProperty,ZY=new Map,QY=/[A-Z]/g,JY=new Set(["table","tbody","thead","tfoot","tr"]),eK=new Set(["td","th"]),mG="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tK(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=uK(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=lK(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?B_:pG,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=yG(i,n,void 0);return s&&typeof s!="string"?s:i.create(n,i.Fragment,{children:s||void 0},void 0)}function yG(n,e,t){if(e.type==="element")return nK(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return rK(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return sK(n,e,t);if(e.type==="mdxjsEsm")return iK(n,e);if(e.type==="root")return aK(n,e,t);if(e.type==="text")return oK(n,e)}function nK(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=B_,n.schema=i),n.ancestors.push(e);const s=_G(n,e.tagName,!1),a=cK(n,e);let o=uA(n,e);return JY.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!DY(l):!0})),bG(n,a,s,e),lA(a,o),n.ancestors.pop(),n.schema=r,n.create(e,s,a,t)}function rK(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}og(n,e.position)}function iK(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);og(n,e.position)}function sK(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=B_,n.schema=i),n.ancestors.push(e);const s=e.name===null?n.Fragment:_G(n,e.name,!0),a=dK(n,e),o=uA(n,e);return bG(n,a,s,e),lA(a,o),n.ancestors.pop(),n.schema=r,n.create(e,s,a,t)}function aK(n,e,t){const r={};return lA(r,uA(n,e)),n.create(e,n.Fragment,r,t)}function oK(n,e){return e.value}function bG(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function lA(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function lK(n,e,t){return r;function r(i,s,a,o){const u=Array.isArray(a.children)?t:e;return o?u(s,a,o):u(s,a)}}function uK(n,e){return t;function t(r,i,s,a){const o=Array.isArray(s.children),l=aA(r);return e(i,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function cK(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&oA.call(e.properties,i)){const s=hK(n,i,e.properties[i]);if(s){const[a,o]=s;n.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&eK.has(e.tagName)?r=o:t[a]=o}}if(r){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function dK(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(t,n.evaluater.evaluateExpression(o.argument))}else og(n,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const o=r.value.data.estree.body[0];o.type,s=n.evaluater.evaluateExpression(o.expression)}else og(n,e.position);else s=r.value===null?!0:r.value;t[i]=s}return t}function uA(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:ZY;for(;++r<e.children.length;){const s=e.children[r];let a;if(n.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;a=l+"-"+u,i.set(l,u+1)}}const o=yG(n,s,a);o!==void 0&&t.push(o)}return t}function hK(n,e,t){const r=hG(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?CY(t):$Y(t)),r.property==="style"){let i=typeof t=="object"?t:pK(n,String(t));return n.stylePropertyNameCase==="css"&&(i=fK(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?UY[r.property]||r.property:r.attribute,t]}}function pK(n,e){try{return YY(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new bi("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=mG+"#cannot-parse-style-attribute",i}}function _G(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,a;for(;++s<i.length;){const o=tP(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=tP(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return oA.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);og(n)}function og(n,e){const t=new bi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=mG+"#cannot-handle-mdx-estrees-without-createevaluater",t}function fK(n){const e={};let t;for(t in n)oA.call(n,t)&&(e[gK(t)]=n[t]);return e}function gK(n){let e=n.replace(QY,mK);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function mK(n){return"-"+n.toLowerCase()}const kS={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yK={};function bK(n,e){const t=yK,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return vG(n,r,i)}function vG(n,e,t){if(_K(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return hP(n.children,e,t)}return Array.isArray(n)?hP(n,e,t):""}function hP(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=vG(n[i],e,t);return r.join("")}function _K(n){return!!(n&&typeof n=="object")}const pP=document.createElement("i");function lg(n){const e="&"+n+";";pP.innerHTML=e;const t=pP.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Ya(n,e,t,r){const i=n.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)a=Array.from(r),a.unshift(e,t),n.splice(...a);else for(t&&n.splice(e,t);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),n.splice(...a),s+=1e4,e+=1e4}function Fs(n,e){return n.length>0?(Ya(n,n.length,0,e),n):e}const fP={}.hasOwnProperty;function vK(n){const e={};let t=-1;for(;++t<n.length;)xK(e,n[t]);return e}function xK(n,e){let t;for(t in e){const i=(fP.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let a;if(s)for(a in s){fP.call(i,a)||(i[a]=[]);const o=s[a];SK(i[a],Array.isArray(o)?o:o?[o]:[])}}}function SK(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Ya(n,0,0,r)}function xG(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Id(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ba=Wl(/[A-Za-z]/),xs=Wl(/[\dA-Za-z]/),EK=Wl(/[#-'*+\--9=?A-Z^-~]/);function pT(n){return n!==null&&(n<32||n===127)}const fT=Wl(/\d/),TK=Wl(/[\dA-Fa-f]/),wK=Wl(/[!-/:-@[-`{-~]/);function Vt(n){return n!==null&&n<-2}function rs(n){return n!==null&&(n<0||n===32)}function En(n){return n===-2||n===-1||n===32}const AK=Wl(new RegExp("\\p{P}|\\p{S}","u")),RK=Wl(/\s/);function Wl(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Lh(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const s=n.charCodeAt(t);let a="";if(s===37&&xs(n.charCodeAt(t+1))&&xs(n.charCodeAt(t+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=n.charCodeAt(t+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(e.push(n.slice(r,t),encodeURIComponent(a)),r=t+i+1,a=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Wn(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return En(l)?(n.enter(t),o(l)):e(l)}function o(l){return En(l)&&s++<i?(n.consume(l),o):(n.exit(t),e(l))}}const NK={tokenize:CK};function CK(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Wn(n,e,"linePrefix")}function i(o){return n.enter("paragraph"),s(o)}function s(o){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,a(o)}function a(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return Vt(o)?(n.consume(o),n.exit("chunkText"),s):(n.consume(o),a)}}const MK={tokenize:IK},gP={tokenize:kK};function IK(n){const e=this,t=[];let r=0,i,s,a;return o;function o(E){if(r<t.length){const A=t[r];return e.containerState=A[1],n.attempt(A[0].continuation,l,u)(E)}return u(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const A=e.events.length;let R=A,w;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){w=e.events[R][1].end;break}b(r);let M=A;for(;M<e.events.length;)e.events[M][1].end={...w},M++;return Ya(e.events,R+1,0,e.events.slice(A)),e.events.length=M,u(E)}return o(E)}function u(E){if(r===t.length){if(!i)return f(E);if(i.currentConstruct&&i.currentConstruct.concrete)return m(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(gP,c,h)(E)}function c(E){return i&&S(),b(r),f(E)}function h(E){return e.parser.lazy[e.now().line]=r!==t.length,a=e.now().offset,m(E)}function f(E){return e.containerState={},n.attempt(gP,g,m)(E)}function g(E){return r++,t.push([e.currentConstruct,e.containerState]),f(E)}function m(E){if(E===null){i&&S(),b(0),n.consume(E);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(E)}function v(E){if(E===null){_(n.exit("chunkFlow"),!0),b(0),n.consume(E);return}return Vt(E)?(n.consume(E),_(n.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(n.consume(E),v)}function _(E,A){const R=e.sliceStream(E);if(A&&R.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(R),e.parser.lazy[E.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<a&&(!i.events[w][1].end||i.events[w][1].end.offset>a))return;const M=e.events.length;let I=M,C,k;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(C){k=e.events[I][1].end;break}C=!0}for(b(r),w=M;w<e.events.length;)e.events[w][1].end={...k},w++;Ya(e.events,I+1,0,e.events.slice(M)),e.events.length=w}}function b(E){let A=t.length;for(;A-- >E;){const R=t[A];e.containerState=R[1],R[0].exit.call(e,n)}t.length=E}function S(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function kK(n,e,t){return Wn(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function mP(n){if(n===null||rs(n)||RK(n))return 1;if(AK(n))return 2}function cA(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const gT={name:"attention",resolveAll:LK,tokenize:DK};function LK(n,e){let t=-1,r,i,s,a,o,l,u,c;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const h={...n[r][1].end},f={...n[t][1].start};yP(h,-l),yP(f,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...n[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},n[r][1].end={...a.start},n[t][1].start={...o.end},u=[],n[r][1].end.offset-n[r][1].start.offset&&(u=Fs(u,[["enter",n[r][1],e],["exit",n[r][1],e]])),u=Fs(u,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=Fs(u,cA(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),u=Fs(u,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(c=2,u=Fs(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):c=0,Ya(n,r-1,t-r+3,u),t=r+u.length-c-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function DK(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=mP(r);let s;return a;function a(l){return s=l,n.enter("attentionSequence"),o(l)}function o(l){if(l===s)return n.consume(l),o;const u=n.exit("attentionSequence"),c=mP(l),h=!c||c===2&&i||t.includes(l),f=!i||i===2&&c||t.includes(r);return u._open=!!(s===42?h:h&&(i||!f)),u._close=!!(s===42?f:f&&(c||!h)),e(l)}}function yP(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const OK={name:"autolink",tokenize:PK};function PK(n,e,t){let r=0;return i;function i(g){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(g){return Ba(g)?(n.consume(g),a):g===64?t(g):u(g)}function a(g){return g===43||g===45||g===46||xs(g)?(r=1,o(g)):u(g)}function o(g){return g===58?(n.consume(g),r=0,l):(g===43||g===45||g===46||xs(g))&&r++<32?(n.consume(g),o):(r=0,u(g))}function l(g){return g===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.exit("autolink"),e):g===null||g===32||g===60||pT(g)?t(g):(n.consume(g),l)}function u(g){return g===64?(n.consume(g),c):EK(g)?(n.consume(g),u):t(g)}function c(g){return xs(g)?h(g):t(g)}function h(g){return g===46?(n.consume(g),r=0,c):g===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.exit("autolink"),e):f(g)}function f(g){if((g===45||xs(g))&&r++<63){const m=g===45?f:h;return n.consume(g),m}return t(g)}}const z_={partial:!0,tokenize:FK};function FK(n,e,t){return r;function r(s){return En(s)?Wn(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||Vt(s)?e(s):t(s)}}const SG={continuation:{tokenize:BK},exit:zK,name:"blockQuote",tokenize:UK};function UK(n,e,t){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),s}return t(a)}function s(a){return En(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function BK(n,e,t){const r=this;return i;function i(a){return En(a)?Wn(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return n.attempt(SG,e,t)(a)}}function zK(n){n.exit("blockQuote")}const EG={name:"characterEscape",tokenize:GK};function GK(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return wK(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const TG={name:"characterReference",tokenize:VK};function VK(n,e,t){const r=this;let i=0,s,a;return o;function o(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),l}function l(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,a=xs,c(h))}function u(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,a=TK,c):(n.enter("characterReferenceValue"),s=7,a=fT,c(h))}function c(h){if(h===59&&i){const f=n.exit("characterReferenceValue");return a===xs&&!lg(r.sliceSerialize(f))?t(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(h)&&i++<s?(n.consume(h),c):t(h)}}const bP={partial:!0,tokenize:HK},_P={concrete:!0,name:"codeFenced",tokenize:$K};function $K(n,e,t){const r=this,i={partial:!0,tokenize:R};let s=0,a=0,o;return l;function l(w){return u(w)}function u(w){const M=r.events[r.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,o=w,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),c(w)}function c(w){return w===o?(a++,n.consume(w),c):a<3?t(w):(n.exit("codeFencedFenceSequence"),En(w)?Wn(n,h,"whitespace")(w):h(w))}function h(w){return w===null||Vt(w)?(n.exit("codeFencedFence"),r.interrupt?e(w):n.check(bP,v,A)(w)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||Vt(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(w)):En(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Wn(n,g,"whitespace")(w)):w===96&&w===o?t(w):(n.consume(w),f)}function g(w){return w===null||Vt(w)?h(w):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Vt(w)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(w)):w===96&&w===o?t(w):(n.consume(w),m)}function v(w){return n.attempt(i,A,_)(w)}function _(w){return n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),b}function b(w){return s>0&&En(w)?Wn(n,S,"linePrefix",s+1)(w):S(w)}function S(w){return w===null||Vt(w)?n.check(bP,v,A)(w):(n.enter("codeFlowValue"),E(w))}function E(w){return w===null||Vt(w)?(n.exit("codeFlowValue"),S(w)):(n.consume(w),E)}function A(w){return n.exit("codeFenced"),e(w)}function R(w,M,I){let C=0;return k;function k(X){return w.enter("lineEnding"),w.consume(X),w.exit("lineEnding"),O}function O(X){return w.enter("codeFencedFence"),En(X)?Wn(w,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):z(X)}function z(X){return X===o?(w.enter("codeFencedFenceSequence"),W(X)):I(X)}function W(X){return X===o?(C++,w.consume(X),W):C>=a?(w.exit("codeFencedFenceSequence"),En(X)?Wn(w,q,"whitespace")(X):q(X)):I(X)}function q(X){return X===null||Vt(X)?(w.exit("codeFencedFence"),M(X)):I(X)}}}function HK(n,e,t){const r=this;return i;function i(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}const LS={name:"codeIndented",tokenize:WK},jK={partial:!0,tokenize:qK};function WK(n,e,t){const r=this;return i;function i(u){return n.enter("codeIndented"),Wn(n,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(u):t(u)}function a(u){return u===null?l(u):Vt(u)?n.attempt(jK,a,l)(u):(n.enter("codeFlowValue"),o(u))}function o(u){return u===null||Vt(u)?(n.exit("codeFlowValue"),a(u)):(n.consume(u),o)}function l(u){return n.exit("codeIndented"),e(u)}}function qK(n,e,t){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?t(a):Vt(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):Wn(n,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):Vt(a)?i(a):t(a)}}const XK={name:"codeText",previous:KK,resolve:YK,tokenize:ZK};function YK(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function KK(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ZK(n,e,t){let r=0,i,s;return a;function a(h){return n.enter("codeText"),n.enter("codeTextSequence"),o(h)}function o(h){return h===96?(n.consume(h),r++,o):(n.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),l):h===96?(s=n.enter("codeTextSequence"),i=0,c(h)):Vt(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),l):(n.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Vt(h)?(n.exit("codeTextData"),l(h)):(n.consume(h),u)}function c(h){return h===96?(n.consume(h),i++,c):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class QK{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&zp(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),zp(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),zp(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);zp(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);zp(this.left,t.reverse())}}}function zp(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function wG(n){const e={};let t=-1,r,i,s,a,o,l,u;const c=new QK(n);for(;++t<c.length;){for(;t in e;)t=e[t];if(r=c.get(t),t&&r[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,JK(c,t)),t=e[t],u=!0);else if(r[1]._container){for(s=t,i=void 0;s--;)if(a=c.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},o=c.slice(i,t),o.unshift(r),c.splice(i,t-i+1,o))}}return Ya(n,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function JK(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const s=[];let a=t._tokenizer;a||(a=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let c,h,f=-1,g=t,m=0,v=0;const _=[v];for(;g;){for(;n.get(++i)[1]!==g;);s.push(i),g._tokenizer||(c=r.sliceStream(g),g.next||c.push(null),h&&a.defineSkip(g.start),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=t;++f<o.length;)o[f][0]==="exit"&&o[f-1][0]==="enter"&&o[f][1].type===o[f-1][1].type&&o[f][1].start.line!==o[f][1].end.line&&(v=f+1,_.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(a.events=[],g?(g._tokenizer=void 0,g.previous=void 0):_.pop(),f=_.length;f--;){const b=o.slice(_[f],_[f+1]),S=s.pop();l.push([S,S+b.length-1]),n.splice(S,2,b)}for(l.reverse(),f=-1;++f<l.length;)u[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return u}const eZ={resolve:nZ,tokenize:rZ},tZ={partial:!0,tokenize:iZ};function nZ(n){return wG(n),n}function rZ(n,e){let t;return r;function r(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):Vt(o)?n.check(tZ,a,s)(o):(n.consume(o),i)}function s(o){return n.exit("chunkContent"),n.exit("content"),e(o)}function a(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function iZ(n,e,t){const r=this;return i;function i(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Wn(n,s,"linePrefix")}function s(a){if(a===null||Vt(a))return t(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):n.interrupt(r.parser.constructs.flow,t,e)(a)}}function AG(n,e,t,r,i,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(b){return b===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(b),n.exit(s),f):b===null||b===32||b===41||pT(b)?t(b):(n.enter(r),n.enter(a),n.enter(o),n.enter("chunkString",{contentType:"string"}),v(b))}function f(b){return b===62?(n.enter(s),n.consume(b),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(o),n.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===62?(n.exit("chunkString"),n.exit(o),f(b)):b===null||b===60||Vt(b)?t(b):(n.consume(b),b===92?m:g)}function m(b){return b===60||b===62||b===92?(n.consume(b),g):g(b)}function v(b){return!c&&(b===null||b===41||rs(b))?(n.exit("chunkString"),n.exit(o),n.exit(a),n.exit(r),e(b)):c<u&&b===40?(n.consume(b),c++,v):b===41?(n.consume(b),c--,v):b===null||b===32||b===40||pT(b)?t(b):(n.consume(b),b===92?_:v)}function _(b){return b===40||b===41||b===92?(n.consume(b),v):v(b)}}function RG(n,e,t,r,i,s){const a=this;let o=0,l;return u;function u(g){return n.enter(r),n.enter(i),n.consume(g),n.exit(i),n.enter(s),c}function c(g){return o>999||g===null||g===91||g===93&&!l||g===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?t(g):g===93?(n.exit(s),n.enter(i),n.consume(g),n.exit(i),n.exit(r),e):Vt(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),c):(n.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Vt(g)||o++>999?(n.exit("chunkString"),c(g)):(n.consume(g),l||(l=!En(g)),g===92?f:h)}function f(g){return g===91||g===92||g===93?(n.consume(g),o++,h):h(g)}}function NG(n,e,t,r,i,s){let a;return o;function o(f){return f===34||f===39||f===40?(n.enter(r),n.enter(i),n.consume(f),n.exit(i),a=f===40?41:f,l):t(f)}function l(f){return f===a?(n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):(n.enter(s),u(f))}function u(f){return f===a?(n.exit(s),l(a)):f===null?t(f):Vt(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),Wn(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===a||f===null||Vt(f)?(n.exit("chunkString"),u(f)):(n.consume(f),f===92?h:c)}function h(f){return f===a||f===92?(n.consume(f),c):c(f)}}function kf(n,e){let t;return r;function r(i){return Vt(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):En(i)?Wn(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const sZ={name:"definition",tokenize:oZ},aZ={partial:!0,tokenize:lZ};function oZ(n,e,t){const r=this;let i;return s;function s(g){return n.enter("definition"),a(g)}function a(g){return RG.call(r,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function o(g){return i=Id(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(n.enter("definitionMarker"),n.consume(g),n.exit("definitionMarker"),l):t(g)}function l(g){return rs(g)?kf(n,u)(g):u(g)}function u(g){return AG(n,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function c(g){return n.attempt(aZ,h,h)(g)}function h(g){return En(g)?Wn(n,f,"whitespace")(g):f(g)}function f(g){return g===null||Vt(g)?(n.exit("definition"),r.parser.defined.push(i),e(g)):t(g)}}function lZ(n,e,t){return r;function r(o){return rs(o)?kf(n,i)(o):t(o)}function i(o){return NG(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return En(o)?Wn(n,a,"whitespace")(o):a(o)}function a(o){return o===null||Vt(o)?e(o):t(o)}}const uZ={name:"hardBreakEscape",tokenize:cZ};function cZ(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return Vt(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const dZ={name:"headingAtx",resolve:hZ,tokenize:pZ};function hZ(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Ya(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function pZ(n,e,t){let r=0;return i;function i(c){return n.enter("atxHeading"),s(c)}function s(c){return n.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(n.consume(c),a):c===null||rs(c)?(n.exit("atxHeadingSequence"),o(c)):t(c)}function o(c){return c===35?(n.enter("atxHeadingSequence"),l(c)):c===null||Vt(c)?(n.exit("atxHeading"),e(c)):En(c)?Wn(n,o,"whitespace")(c):(n.enter("atxHeadingText"),u(c))}function l(c){return c===35?(n.consume(c),l):(n.exit("atxHeadingSequence"),o(c))}function u(c){return c===null||c===35||rs(c)?(n.exit("atxHeadingText"),o(c)):(n.consume(c),u)}}const fZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],vP=["pre","script","style","textarea"],gZ={concrete:!0,name:"htmlFlow",resolveTo:bZ,tokenize:_Z},mZ={partial:!0,tokenize:xZ},yZ={partial:!0,tokenize:vZ};function bZ(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function _Z(n,e,t){const r=this;let i,s,a,o,l;return u;function u(B){return c(B)}function c(B){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(B),h}function h(B){return B===33?(n.consume(B),f):B===47?(n.consume(B),s=!0,v):B===63?(n.consume(B),i=3,r.interrupt?e:D):Ba(B)?(n.consume(B),a=String.fromCharCode(B),_):t(B)}function f(B){return B===45?(n.consume(B),i=2,g):B===91?(n.consume(B),i=5,o=0,m):Ba(B)?(n.consume(B),i=4,r.interrupt?e:D):t(B)}function g(B){return B===45?(n.consume(B),r.interrupt?e:D):t(B)}function m(B){const Oe="CDATA[";return B===Oe.charCodeAt(o++)?(n.consume(B),o===Oe.length?r.interrupt?e:z:m):t(B)}function v(B){return Ba(B)?(n.consume(B),a=String.fromCharCode(B),_):t(B)}function _(B){if(B===null||B===47||B===62||rs(B)){const Oe=B===47,Y=a.toLowerCase();return!Oe&&!s&&vP.includes(Y)?(i=1,r.interrupt?e(B):z(B)):fZ.includes(a.toLowerCase())?(i=6,Oe?(n.consume(B),b):r.interrupt?e(B):z(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(B):s?S(B):E(B))}return B===45||xs(B)?(n.consume(B),a+=String.fromCharCode(B),_):t(B)}function b(B){return B===62?(n.consume(B),r.interrupt?e:z):t(B)}function S(B){return En(B)?(n.consume(B),S):k(B)}function E(B){return B===47?(n.consume(B),k):B===58||B===95||Ba(B)?(n.consume(B),A):En(B)?(n.consume(B),E):k(B)}function A(B){return B===45||B===46||B===58||B===95||xs(B)?(n.consume(B),A):R(B)}function R(B){return B===61?(n.consume(B),w):En(B)?(n.consume(B),R):E(B)}function w(B){return B===null||B===60||B===61||B===62||B===96?t(B):B===34||B===39?(n.consume(B),l=B,M):En(B)?(n.consume(B),w):I(B)}function M(B){return B===l?(n.consume(B),l=null,C):B===null||Vt(B)?t(B):(n.consume(B),M)}function I(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||rs(B)?R(B):(n.consume(B),I)}function C(B){return B===47||B===62||En(B)?E(B):t(B)}function k(B){return B===62?(n.consume(B),O):t(B)}function O(B){return B===null||Vt(B)?z(B):En(B)?(n.consume(B),O):t(B)}function z(B){return B===45&&i===2?(n.consume(B),Q):B===60&&i===1?(n.consume(B),H):B===62&&i===4?(n.consume(B),U):B===63&&i===3?(n.consume(B),D):B===93&&i===5?(n.consume(B),re):Vt(B)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(mZ,ne,W)(B)):B===null||Vt(B)?(n.exit("htmlFlowData"),W(B)):(n.consume(B),z)}function W(B){return n.check(yZ,q,ne)(B)}function q(B){return n.enter("lineEnding"),n.consume(B),n.exit("lineEnding"),X}function X(B){return B===null||Vt(B)?W(B):(n.enter("htmlFlowData"),z(B))}function Q(B){return B===45?(n.consume(B),D):z(B)}function H(B){return B===47?(n.consume(B),a="",G):z(B)}function G(B){if(B===62){const Oe=a.toLowerCase();return vP.includes(Oe)?(n.consume(B),U):z(B)}return Ba(B)&&a.length<8?(n.consume(B),a+=String.fromCharCode(B),G):z(B)}function re(B){return B===93?(n.consume(B),D):z(B)}function D(B){return B===62?(n.consume(B),U):B===45&&i===2?(n.consume(B),D):z(B)}function U(B){return B===null||Vt(B)?(n.exit("htmlFlowData"),ne(B)):(n.consume(B),U)}function ne(B){return n.exit("htmlFlow"),e(B)}}function vZ(n,e,t){const r=this;return i;function i(a){return Vt(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):t(a)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}function xZ(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(z_,e,t)}}const SZ={name:"htmlText",tokenize:EZ};function EZ(n,e,t){const r=this;let i,s,a;return o;function o(D){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(D),l}function l(D){return D===33?(n.consume(D),u):D===47?(n.consume(D),R):D===63?(n.consume(D),E):Ba(D)?(n.consume(D),I):t(D)}function u(D){return D===45?(n.consume(D),c):D===91?(n.consume(D),s=0,m):Ba(D)?(n.consume(D),S):t(D)}function c(D){return D===45?(n.consume(D),g):t(D)}function h(D){return D===null?t(D):D===45?(n.consume(D),f):Vt(D)?(a=h,H(D)):(n.consume(D),h)}function f(D){return D===45?(n.consume(D),g):h(D)}function g(D){return D===62?Q(D):D===45?f(D):h(D)}function m(D){const U="CDATA[";return D===U.charCodeAt(s++)?(n.consume(D),s===U.length?v:m):t(D)}function v(D){return D===null?t(D):D===93?(n.consume(D),_):Vt(D)?(a=v,H(D)):(n.consume(D),v)}function _(D){return D===93?(n.consume(D),b):v(D)}function b(D){return D===62?Q(D):D===93?(n.consume(D),b):v(D)}function S(D){return D===null||D===62?Q(D):Vt(D)?(a=S,H(D)):(n.consume(D),S)}function E(D){return D===null?t(D):D===63?(n.consume(D),A):Vt(D)?(a=E,H(D)):(n.consume(D),E)}function A(D){return D===62?Q(D):E(D)}function R(D){return Ba(D)?(n.consume(D),w):t(D)}function w(D){return D===45||xs(D)?(n.consume(D),w):M(D)}function M(D){return Vt(D)?(a=M,H(D)):En(D)?(n.consume(D),M):Q(D)}function I(D){return D===45||xs(D)?(n.consume(D),I):D===47||D===62||rs(D)?C(D):t(D)}function C(D){return D===47?(n.consume(D),Q):D===58||D===95||Ba(D)?(n.consume(D),k):Vt(D)?(a=C,H(D)):En(D)?(n.consume(D),C):Q(D)}function k(D){return D===45||D===46||D===58||D===95||xs(D)?(n.consume(D),k):O(D)}function O(D){return D===61?(n.consume(D),z):Vt(D)?(a=O,H(D)):En(D)?(n.consume(D),O):C(D)}function z(D){return D===null||D===60||D===61||D===62||D===96?t(D):D===34||D===39?(n.consume(D),i=D,W):Vt(D)?(a=z,H(D)):En(D)?(n.consume(D),z):(n.consume(D),q)}function W(D){return D===i?(n.consume(D),i=void 0,X):D===null?t(D):Vt(D)?(a=W,H(D)):(n.consume(D),W)}function q(D){return D===null||D===34||D===39||D===60||D===61||D===96?t(D):D===47||D===62||rs(D)?C(D):(n.consume(D),q)}function X(D){return D===47||D===62||rs(D)?C(D):t(D)}function Q(D){return D===62?(n.consume(D),n.exit("htmlTextData"),n.exit("htmlText"),e):t(D)}function H(D){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),G}function G(D){return En(D)?Wn(n,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):re(D)}function re(D){return n.enter("htmlTextData"),a(D)}}const dA={name:"labelEnd",resolveAll:RZ,resolveTo:NZ,tokenize:CZ},TZ={tokenize:MZ},wZ={tokenize:IZ},AZ={tokenize:kZ};function RZ(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&Ya(n,0,n.length,t),n}function NZ(n,e){let t=n.length,r=0,i,s,a,o;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=t);const l={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[a][1].end}},c={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[a-2][1].start}};return o=[["enter",l,e],["enter",u,e]],o=Fs(o,n.slice(s+1,s+r+3)),o=Fs(o,[["enter",c,e]]),o=Fs(o,cA(e.parser.constructs.insideSpan.null,n.slice(s+r+4,a-3),e)),o=Fs(o,[["exit",c,e],n[a-2],n[a-1],["exit",u,e]]),o=Fs(o,n.slice(a+1)),o=Fs(o,[["exit",l,e]]),Ya(n,s,n.length,o),n}function CZ(n,e,t){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(f){return s?s._inactive?h(f):(a=r.parser.defined.includes(Id(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(f),n.exit("labelMarker"),n.exit("labelEnd"),l):t(f)}function l(f){return f===40?n.attempt(TZ,c,a?c:h)(f):f===91?n.attempt(wZ,c,a?u:h)(f):a?c(f):h(f)}function u(f){return n.attempt(AZ,c,h)(f)}function c(f){return e(f)}function h(f){return s._balanced=!0,t(f)}}function MZ(n,e,t){return r;function r(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),i}function i(h){return rs(h)?kf(n,s)(h):s(h)}function s(h){return h===41?c(h):AG(n,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return rs(h)?kf(n,l)(h):c(h)}function o(h){return t(h)}function l(h){return h===34||h===39||h===40?NG(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return rs(h)?kf(n,c)(h):c(h)}function c(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):t(h)}}function IZ(n,e,t){const r=this;return i;function i(o){return RG.call(r,n,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Id(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function a(o){return t(o)}}function kZ(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const LZ={name:"labelStartImage",resolveAll:dA.resolveAll,tokenize:DZ};function DZ(n,e,t){const r=this;return i;function i(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),s}function s(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),a):t(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const OZ={name:"labelStartLink",resolveAll:dA.resolveAll,tokenize:PZ};function PZ(n,e,t){const r=this;return i;function i(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const DS={name:"lineEnding",tokenize:FZ};function FZ(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Wn(n,e,"linePrefix")}}const Bb={name:"thematicBreak",tokenize:UZ};function UZ(n,e,t){let r=0,i;return s;function s(u){return n.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(n.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Vt(u))?(n.exit("thematicBreak"),e(u)):t(u)}function l(u){return u===i?(n.consume(u),r++,l):(n.exit("thematicBreakSequence"),En(u)?Wn(n,o,"whitespace")(u):o(u))}}const qi={continuation:{tokenize:VZ},exit:HZ,name:"list",tokenize:GZ},BZ={partial:!0,tokenize:jZ},zZ={partial:!0,tokenize:$Z};function GZ(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(g){const m=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:fT(g)){if(r.containerState.type||(r.containerState.type=m,n.enter(m,{_container:!0})),m==="listUnordered")return n.enter("listItemPrefix"),g===42||g===45?n.check(Bb,t,u)(g):u(g);if(!r.interrupt||g===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(g)}return t(g)}function l(g){return fT(g)&&++a<10?(n.consume(g),l):(!r.interrupt||a<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(n.exit("listItemValue"),u(g)):t(g)}function u(g){return n.enter("listItemMarker"),n.consume(g),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,n.check(z_,r.interrupt?t:c,n.attempt(BZ,f,h))}function c(g){return r.containerState.initialBlankLine=!0,s++,f(g)}function h(g){return En(g)?(n.enter("listItemPrefixWhitespace"),n.consume(g),n.exit("listItemPrefixWhitespace"),f):t(g)}function f(g){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(g)}}function VZ(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(z_,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Wn(n,e,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!En(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(zZ,e,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Wn(n,n.attempt(qi,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function $Z(n,e,t){const r=this;return Wn(n,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):t(s)}}function HZ(n){n.exit(this.containerState.type)}function jZ(n,e,t){const r=this;return Wn(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!En(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const xP={name:"setextUnderline",resolveTo:WZ,tokenize:qZ};function WZ(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const a={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",a,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=a,n.push(["exit",a,e]),n}function qZ(n,e,t){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(n.enter("setextHeadingLine"),i=u,a(u)):t(u)}function a(u){return n.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(n.consume(u),o):(n.exit("setextHeadingLineSequence"),En(u)?Wn(n,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Vt(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const XZ={tokenize:YZ};function YZ(n){const e=this,t=n.attempt(z_,r,n.attempt(this.parser.constructs.flowInitial,i,Wn(n,n.attempt(this.parser.constructs.flow,i,n.attempt(eZ,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const KZ={resolveAll:MG()},ZZ=CG("string"),QZ=CG("text");function CG(n){return{resolveAll:MG(n==="text"?JZ:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,a,o);return a;function a(c){return u(c)?s(c):o(c)}function o(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),l}function l(c){return u(c)?(t.exit("data"),s(c)):(t.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let f=-1;if(h)for(;++f<h.length;){const g=h[f];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function MG(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function JZ(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,a=-1,o=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(o=0),o){const u={type:t===n.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const eQ={42:qi,43:qi,45:qi,48:qi,49:qi,50:qi,51:qi,52:qi,53:qi,54:qi,55:qi,56:qi,57:qi,62:SG},tQ={91:sZ},nQ={[-2]:LS,[-1]:LS,32:LS},rQ={35:dZ,42:Bb,45:[xP,Bb],60:gZ,61:xP,95:Bb,96:_P,126:_P},iQ={38:TG,92:EG},sQ={[-5]:DS,[-4]:DS,[-3]:DS,33:LZ,38:TG,42:gT,60:[OK,SZ],91:OZ,92:[uZ,EG],93:dA,95:gT,96:XK},aQ={null:[gT,KZ]},oQ={null:[42,95]},lQ={null:[]},uQ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:oQ,contentInitial:tQ,disable:lQ,document:eQ,flow:rQ,flowInitial:nQ,insideSpan:aQ,string:iQ,text:sQ},Symbol.toStringTag,{value:"Module"}));function cQ(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},s=[];let a=[],o=[];const l={attempt:M(R),check:M(w),consume:S,enter:E,exit:A,interrupt:M(w,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:n,previous:null,sliceSerialize:f,sliceStream:g,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(O){return a=Fs(a,O),_(),a[a.length-1]!==null?[]:(I(e,0),u.events=cA(s,u.events,u),u.events)}function f(O,z){return hQ(g(O),z)}function g(O){return dQ(a,O)}function m(){const{_bufferIndex:O,_index:z,line:W,column:q,offset:X}=r;return{_bufferIndex:O,_index:z,line:W,column:q,offset:X}}function v(O){i[O.line]=O.column,k()}function _(){let O;for(;r._index<a.length;){const z=a[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)b(z.charCodeAt(r._bufferIndex));else b(z)}}function b(O){c=c(O)}function S(O){Vt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,k()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=O}function E(O,z){const W=z||{};return W.type=O,W.start=m(),u.events.push(["enter",W,u]),o.push(W),W}function A(O){const z=o.pop();return z.end=m(),u.events.push(["exit",z,u]),z}function R(O,z){I(O,z.from)}function w(O,z){z.restore()}function M(O,z){return W;function W(q,X,Q){let H,G,re,D;return Array.isArray(q)?ne(q):"tokenize"in q?ne([q]):U(q);function U(V){return ae;function ae(_e){const Pe=_e!==null&&V[_e],De=_e!==null&&V.null,ft=[...Array.isArray(Pe)?Pe:Pe?[Pe]:[],...Array.isArray(De)?De:De?[De]:[]];return ne(ft)(_e)}}function ne(V){return H=V,G=0,V.length===0?Q:B(V[G])}function B(V){return ae;function ae(_e){return D=C(),re=V,V.partial||(u.currentConstruct=V),V.name&&u.parser.constructs.disable.null.includes(V.name)?Y():V.tokenize.call(z?Object.assign(Object.create(u),z):u,l,Oe,Y)(_e)}}function Oe(V){return O(re,D),X}function Y(V){return D.restore(),++G<H.length?B(H[G]):Q}}}function I(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Ya(u.events,z,u.events.length-z,O.resolve(u.events.slice(z),u)),O.resolveTo&&(u.events=O.resolveTo(u.events,u))}function C(){const O=m(),z=u.previous,W=u.currentConstruct,q=u.events.length,X=Array.from(o);return{from:q,restore:Q};function Q(){r=O,u.previous=z,u.currentConstruct=W,u.events.length=q,o=X,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function dQ(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(t===i)a=[n[t].slice(r,s)];else{if(a=n.slice(t,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(n[i].slice(0,s))}return a}function hQ(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function pQ(n){const r={constructs:vK([uQ,...(n||{}).extensions||[]]),content:i(NK),defined:[],document:i(MK),flow:i(XZ),lazy:{},string:i(ZZ),text:i(QZ)};return r;function i(s){return a;function a(o){return cQ(r,s,o)}}}function fQ(n){for(;!wG(n););return n}const SP=/[\0\t\n\r]/g;function gQ(){let n=1,e="",t=!0,r;return i;function i(s,a,o){const l=[];let u,c,h,f,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,e="",t&&(s.charCodeAt(0)===65279&&h++,t=void 0);h<s.length;){if(SP.lastIndex=h,u=SP.exec(s),f=u&&u.index!==void 0?u.index:s.length,g=s.charCodeAt(f),!u){e=s.slice(h);break}if(g===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),n+=f-h),g){case 0:{l.push(65533),n++;break}case 9:{for(c=Math.ceil(n/4)*4,l.push(-2);n++<c;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}h=f+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const mQ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yQ(n){return n.replace(mQ,bQ)}function bQ(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return xG(t.slice(s?2:1),s?16:10)}return lg(t)||n}const IG={}.hasOwnProperty;function _Q(n,e,t){return typeof e!="string"&&(t=e,e=void 0),vQ(t)(fQ(pQ(t).document().write(gQ()(n,e,!0))))}function vQ(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Qt),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(nt),blockQuote:s(De),characterEscape:C,characterReference:C,codeFenced:s(ft),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(ft,a),codeText:s(ln,a),codeTextData:C,data:C,codeFlowValue:C,definition:s(Se),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Me),hardBreakEscape:s(qe),hardBreakTrailing:s(qe),htmlFlow:s(je,a),htmlFlowData:C,htmlText:s(je,a),htmlTextData:C,image:s(J),label:a,link:s(Qt),listItem:s(Dt),listItemValue:f,listOrdered:s(Ot,h),listUnordered:s(Ot),paragraph:s(it),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(nt),strong:s(K),thematicBreak:s(he)},exit:{atxHeading:l(),atxHeadingSequence:R,autolink:l(),autolinkEmail:Pe,autolinkProtocol:_e,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:V,characterReference:ae,codeFenced:l(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:m,codeFlowValue:k,codeIndented:l(b),codeText:l(X),codeTextData:k,data:k,definition:l(),definitionDestinationString:A,definitionLabelString:S,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(W),htmlFlowData:k,htmlText:l(q),htmlTextData:k,image:l(H),label:re,labelText:G,lineEnding:O,link:l(Q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Oe,resourceDestinationString:D,resourceTitleString:U,resource:ne,setextHeading:l(I),setextHeadingLineSequence:M,setextHeadingText:w,strong:l(),thematicBreak:l()}};kG(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(te){let de={type:"root",children:[]};const fe={stack:[de],tokenStack:[],config:e,enter:o,exit:u,buffer:a,resume:c,data:t},ze=[];let ke=-1;for(;++ke<te.length;)if(te[ke][1].type==="listOrdered"||te[ke][1].type==="listUnordered")if(te[ke][0]==="enter")ze.push(ke);else{const tt=ze.pop();ke=i(te,tt,ke)}for(ke=-1;++ke<te.length;){const tt=e[te[ke][0]];IG.call(tt,te[ke][1].type)&&tt[te[ke][1].type].call(Object.assign({sliceSerialize:te[ke][2].sliceSerialize},fe),te[ke][1])}if(fe.tokenStack.length>0){const tt=fe.tokenStack[fe.tokenStack.length-1];(tt[1]||EP).call(fe,void 0,tt[0])}for(de.position={start:pl(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:pl(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},ke=-1;++ke<e.transforms.length;)de=e.transforms[ke](de)||de;return de}function i(te,de,fe){let ze=de-1,ke=-1,tt=!1,wt,Fe,Ze,dt;for(;++ze<=fe;){const rt=te[ze];switch(rt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{rt[0]==="enter"?ke++:ke--,dt=void 0;break}case"lineEndingBlank":{rt[0]==="enter"&&(wt&&!dt&&!ke&&!Ze&&(Ze=ze),dt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dt=void 0}if(!ke&&rt[0]==="enter"&&rt[1].type==="listItemPrefix"||ke===-1&&rt[0]==="exit"&&(rt[1].type==="listUnordered"||rt[1].type==="listOrdered")){if(wt){let Xe=ze;for(Fe=void 0;Xe--;){const Mt=te[Xe];if(Mt[1].type==="lineEnding"||Mt[1].type==="lineEndingBlank"){if(Mt[0]==="exit")continue;Fe&&(te[Fe][1].type="lineEndingBlank",tt=!0),Mt[1].type="lineEnding",Fe=Xe}else if(!(Mt[1].type==="linePrefix"||Mt[1].type==="blockQuotePrefix"||Mt[1].type==="blockQuotePrefixWhitespace"||Mt[1].type==="blockQuoteMarker"||Mt[1].type==="listItemIndent"))break}Ze&&(!Fe||Ze<Fe)&&(wt._spread=!0),wt.end=Object.assign({},Fe?te[Fe][1].start:rt[1].end),te.splice(Fe||ze,0,["exit",wt,rt[2]]),ze++,fe++}if(rt[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},rt[1].start),end:void 0};wt=Xe,te.splice(ze,0,["enter",Xe,rt[2]]),ze++,fe++,Ze=void 0,dt=!0}}}return te[de][1]._spread=tt,fe}function s(te,de){return fe;function fe(ze){o.call(this,te(ze),ze),de&&de.call(this,ze)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(te,de,fe){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([de,fe||void 0]),te.position={start:pl(de.start),end:void 0}}function l(te){return de;function de(fe){te&&te.call(this,fe),u.call(this,fe)}}function u(te,de){const fe=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==te.type&&(de?de.call(this,te,ze[0]):(ze[1]||EP).call(this,te,ze[0]));else throw new Error("Cannot close `"+te.type+"` ("+If({start:te.start,end:te.end})+"): its not open");fe.position.end=pl(te.end)}function c(){return bK(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(te){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function g(){const te=this.resume(),de=this.stack[this.stack.length-1];de.lang=te}function m(){const te=this.resume(),de=this.stack[this.stack.length-1];de.meta=te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const te=this.resume(),de=this.stack[this.stack.length-1];de.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const te=this.resume(),de=this.stack[this.stack.length-1];de.value=te.replace(/(\r?\n|\r)$/g,"")}function S(te){const de=this.resume(),fe=this.stack[this.stack.length-1];fe.label=de,fe.identifier=Id(this.sliceSerialize(te)).toLowerCase()}function E(){const te=this.resume(),de=this.stack[this.stack.length-1];de.title=te}function A(){const te=this.resume(),de=this.stack[this.stack.length-1];de.url=te}function R(te){const de=this.stack[this.stack.length-1];if(!de.depth){const fe=this.sliceSerialize(te).length;de.depth=fe}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function M(te){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function C(te){const fe=this.stack[this.stack.length-1].children;let ze=fe[fe.length-1];(!ze||ze.type!=="text")&&(ze=P(),ze.position={start:pl(te.start),end:void 0},fe.push(ze)),this.stack.push(ze)}function k(te){const de=this.stack.pop();de.value+=this.sliceSerialize(te),de.position.end=pl(te.end)}function O(te){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const fe=de.children[de.children.length-1];fe.position.end=pl(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(de.type)&&(C.call(this,te),k.call(this,te))}function z(){this.data.atHardBreak=!0}function W(){const te=this.resume(),de=this.stack[this.stack.length-1];de.value=te}function q(){const te=this.resume(),de=this.stack[this.stack.length-1];de.value=te}function X(){const te=this.resume(),de=this.stack[this.stack.length-1];de.value=te}function Q(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=de,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function H(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=de,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function G(te){const de=this.sliceSerialize(te),fe=this.stack[this.stack.length-2];fe.label=yQ(de),fe.identifier=Id(de).toLowerCase()}function re(){const te=this.stack[this.stack.length-1],de=this.resume(),fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,fe.type==="link"){const ze=te.children;fe.children=ze}else fe.alt=de}function D(){const te=this.resume(),de=this.stack[this.stack.length-1];de.url=te}function U(){const te=this.resume(),de=this.stack[this.stack.length-1];de.title=te}function ne(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function Oe(te){const de=this.resume(),fe=this.stack[this.stack.length-1];fe.label=de,fe.identifier=Id(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function Y(te){this.data.characterReferenceType=te.type}function V(te){const de=this.sliceSerialize(te),fe=this.data.characterReferenceType;let ze;fe?(ze=xG(de,fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=lg(de);const ke=this.stack[this.stack.length-1];ke.value+=ze}function ae(te){const de=this.stack.pop();de.position.end=pl(te.end)}function _e(te){k.call(this,te);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(te)}function Pe(te){k.call(this,te);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(te)}function De(){return{type:"blockquote",children:[]}}function ft(){return{type:"code",lang:null,meta:null,value:""}}function ln(){return{type:"inlineCode",value:""}}function Se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function nt(){return{type:"heading",depth:0,children:[]}}function qe(){return{type:"break"}}function je(){return{type:"html",value:""}}function J(){return{type:"image",title:null,url:"",alt:null}}function Qt(){return{type:"link",title:null,url:"",children:[]}}function Ot(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function Dt(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function it(){return{type:"paragraph",children:[]}}function K(){return{type:"strong",children:[]}}function P(){return{type:"text",value:""}}function he(){return{type:"thematicBreak"}}}function pl(n){return{line:n.line,column:n.column,offset:n.offset}}function kG(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?kG(n,r):xQ(n,r)}}function xQ(n,e){let t;for(t in e)if(IG.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function EP(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+If({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+If({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+If({start:e.start,end:e.end})+") is still open")}function SQ(n){const e=this;e.parser=t;function t(r){return _Q(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function EQ(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function TQ(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function wQ(n,e){const t=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),n.patch(e,s),s=n.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},n.patch(e,s),s}function AQ(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function RQ(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function NQ(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Lh(r.toLowerCase()),s=n.footnoteOrder.indexOf(r);let a,o=n.footnoteCounts.get(r);o===void 0?(o=0,n.footnoteOrder.push(r),a=n.footnoteOrder.length):a=s+1,o+=1,n.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};n.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,u),n.applyData(e,u)}function CQ(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function MQ(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function LG(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function IQ(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return LG(n,e);const i={src:Lh(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,s),n.applyData(e,s)}function kQ(n,e){const t={src:Lh(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function LQ(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function DQ(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return LG(n,e);const i={href:Lh(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function OQ(n,e){const t={href:Lh(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function PQ(n,e,t){const r=n.all(e),i=t?FQ(t):DG(e),s={},a=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?a.push(...c.children):a.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return n.patch(e,u),n.applyData(e,u)}function FQ(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=DG(t[r])}return e}function DG(n){const e=n.spread;return e??n.children.length>1}function UQ(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function BQ(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function zQ(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function GQ(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function VQ(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],a),i.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},o=aA(e.children[1]),l=fG(e.children[e.children.length-1]);o&&l&&(a.position={start:o,end:l}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function $Q(n,e,t){const r=t?t.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,o=a?a.length:e.children.length;let l=-1;const u=[];for(;++l<o;){const h=e.children[l],f={},g=a?a[l]:void 0;g&&(f.align=g);let m={type:"element",tagName:s,properties:f,children:[]};h&&(m.children=n.all(h),n.patch(h,m),m=n.applyData(h,m)),u.push(m)}const c={type:"element",tagName:"tr",properties:{},children:n.wrap(u,!0)};return n.patch(e,c),n.applyData(e,c)}function HQ(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const TP=9,wP=32;function jQ(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const s=[];for(;r;)s.push(AP(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return s.push(AP(e.slice(i),i>0,!1)),s.join("")}function AP(n,e,t){let r=0,i=n.length;if(e){let s=n.codePointAt(r);for(;s===TP||s===wP;)r++,s=n.codePointAt(r)}if(t){let s=n.codePointAt(i-1);for(;s===TP||s===wP;)i--,s=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function WQ(n,e){const t={type:"text",value:jQ(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function qQ(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const XQ={blockquote:EQ,break:TQ,code:wQ,delete:AQ,emphasis:RQ,footnoteReference:NQ,heading:CQ,html:MQ,imageReference:IQ,image:kQ,inlineCode:LQ,linkReference:DQ,link:OQ,listItem:PQ,list:UQ,paragraph:BQ,root:zQ,strong:GQ,table:VQ,tableCell:HQ,tableRow:$Q,text:WQ,thematicBreak:qQ,toml:Ay,yaml:Ay,definition:Ay,footnoteDefinition:Ay};function Ay(){}const OG=-1,G_=0,Lf=1,o_=2,hA=3,pA=4,fA=5,gA=6,PG=7,FG=8,RP=typeof self=="object"?self:globalThis,YQ=(n,e)=>{const t=(i,s)=>(n.set(s,i),i),r=i=>{if(n.has(i))return n.get(i);const[s,a]=e[i];switch(s){case G_:case OG:return t(a,i);case Lf:{const o=t([],i);for(const l of a)o.push(r(l));return o}case o_:{const o=t({},i);for(const[l,u]of a)o[r(l)]=r(u);return o}case hA:return t(new Date(a),i);case pA:{const{source:o,flags:l}=a;return t(new RegExp(o,l),i)}case fA:{const o=t(new Map,i);for(const[l,u]of a)o.set(r(l),r(u));return o}case gA:{const o=t(new Set,i);for(const l of a)o.add(r(l));return o}case PG:{const{name:o,message:l}=a;return t(new RP[o](l),i)}case FG:return t(BigInt(a),i);case"BigInt":return t(Object(BigInt(a)),i);case"ArrayBuffer":return t(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return t(new DataView(o),a)}}return t(new RP[s](a),i)};return r},NP=n=>YQ(new Map,n)(0),Vc="",{toString:KQ}={},{keys:ZQ}=Object,Gp=n=>{const e=typeof n;if(e!=="object"||!n)return[G_,e];const t=KQ.call(n).slice(8,-1);switch(t){case"Array":return[Lf,Vc];case"Object":return[o_,Vc];case"Date":return[hA,Vc];case"RegExp":return[pA,Vc];case"Map":return[fA,Vc];case"Set":return[gA,Vc];case"DataView":return[Lf,t]}return t.includes("Array")?[Lf,t]:t.includes("Error")?[PG,t]:[o_,t]},Ry=([n,e])=>n===G_&&(e==="function"||e==="symbol"),QQ=(n,e,t,r)=>{const i=(a,o)=>{const l=r.push(a)-1;return t.set(o,l),l},s=a=>{if(t.has(a))return t.get(a);let[o,l]=Gp(a);switch(o){case G_:{let c=a;switch(l){case"bigint":o=FG,c=a.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([OG],a)}return i([o,c],a)}case Lf:{if(l){let f=a;return l==="DataView"?f=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(a)),i([l,[...f]],a)}const c=[],h=i([o,c],a);for(const f of a)c.push(s(f));return h}case o_:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const c=[],h=i([o,c],a);for(const f of ZQ(a))(n||!Ry(Gp(a[f])))&&c.push([s(f),s(a[f])]);return h}case hA:return i([o,a.toISOString()],a);case pA:{const{source:c,flags:h}=a;return i([o,{source:c,flags:h}],a)}case fA:{const c=[],h=i([o,c],a);for(const[f,g]of a)(n||!(Ry(Gp(f))||Ry(Gp(g))))&&c.push([s(f),s(g)]);return h}case gA:{const c=[],h=i([o,c],a);for(const f of a)(n||!Ry(Gp(f)))&&c.push(s(f));return h}}const{message:u}=a;return i([o,{name:l,message:u}],a)};return s},CP=(n,{json:e,lossy:t}={})=>{const r=[];return QQ(!(e||t),!!e,new Map,r)(n),r},l_=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?NP(CP(n,e)):structuredClone(n):(n,e)=>NP(CP(n,e));function JQ(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function eJ(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function tJ(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||JQ,r=n.options.footnoteBackLabel||eJ,i=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",a=n.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<n.footnoteOrder.length;){const u=n.footnoteById.get(n.footnoteOrder[l]);if(!u)continue;const c=n.all(u),h=String(u.identifier).toUpperCase(),f=Lh(h.toLowerCase());let g=0;const m=[],v=n.footnoteCounts.get(h);for(;v!==void 0&&++g<=v;){m.length>0&&m.push({type:"text",value:" "});let S=typeof t=="string"?t:t(l,g);typeof S=="string"&&(S={type:"text",value:S}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const _=c[c.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const S=_.children[_.children.length-1];S&&S.type==="text"?S.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...m)}else c.push(...m);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:n.wrap(c,!0)};n.patch(u,b),o.push(b)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...l_(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(o,!0)},{type:"text",value:`
`}]}}const UG=(function(n){if(n==null)return sJ;if(typeof n=="function")return V_(n);if(typeof n=="object")return Array.isArray(n)?nJ(n):rJ(n);if(typeof n=="string")return iJ(n);throw new Error("Expected function, string, or object as test")});function nJ(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=UG(n[t]);return V_(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function rJ(n){const e=n;return V_(t);function t(r){const i=r;let s;for(s in n)if(i[s]!==e[s])return!1;return!0}}function iJ(n){return V_(e);function e(t){return t&&t.type===n}}function V_(n){return e;function e(t,r,i){return!!(aJ(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function sJ(){return!0}function aJ(n){return n!==null&&typeof n=="object"&&"type"in n}const BG=[],oJ=!0,MP=!1,lJ="skip";function uJ(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const s=UG(i),a=r?-1:1;o(n,void 0,[])();function o(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return f;function f(){let g=BG,m,v,_;if((!e||s(l,u,c[c.length-1]||void 0))&&(g=cJ(t(l,c)),g[0]===MP))return g;if("children"in l&&l.children){const b=l;if(b.children&&g[0]!==lJ)for(v=(r?b.children.length:-1)+a,_=c.concat(b);v>-1&&v<b.children.length;){const S=b.children[v];if(m=o(S,v,_)(),m[0]===MP)return m;v=typeof m[1]=="number"?m[1]:v+a}}return g}}}function cJ(n){return Array.isArray(n)?n:typeof n=="number"?[oJ,n]:n==null?BG:[n]}function zG(n,e,t,r){let i,s,a;typeof e=="function"&&typeof t!="function"?(s=void 0,a=e,i=t):(s=e,a=t,i=r),uJ(n,s,o,i);function o(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return a(l,h,c)}}const mT={}.hasOwnProperty,dJ={};function hJ(n,e){const t=e||dJ,r=new Map,i=new Map,s=new Map,a={...XQ,...t.handlers},o={all:u,applyData:fJ,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:t,patch:pJ,wrap:mJ};return zG(n,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();h.has(f)||h.set(f,c)}}),o;function l(c,h){const f=c.type,g=o.handlers[f];if(mT.call(o.handlers,f)&&g)return g(o,c,h);if(o.options.passThrough&&o.options.passThrough.includes(f)){if("children"in c){const{children:v,..._}=c,b=l_(_);return b.children=o.all(c),b}return l_(c)}return(o.options.unknownHandler||gJ)(o,c,h)}function u(c){const h=[];if("children"in c){const f=c.children;let g=-1;for(;++g<f.length;){const m=o.one(f[g],c);if(m){if(g&&f[g-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=IP(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=IP(v.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function pJ(n,e){n.position&&(e.position=KY(n))}function fJ(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,s=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const a="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:a}}t.type==="element"&&s&&Object.assign(t.properties,l_(s)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function gJ(n,e){const t=e.data||{},r="value"in e&&!(mT.call(t,"hProperties")||mT.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function mJ(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function IP(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function kP(n,e){const t=hJ(n,e),r=t.one(n,void 0),i=tJ(t),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function yJ(n,e){return n&&"run"in n?async function(t,r){const i=kP(t,{file:r,...e});await n.run(i,r)}:function(t,r){return kP(t,{file:r,...n||e})}}function LP(n){if(n)throw n}var OS,DP;function bJ(){if(DP)return OS;DP=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var c=n.call(u,"constructor"),h=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!h)return!1;var f;for(f in u);return typeof f>"u"||n.call(u,f)},a=function(u,c){t&&c.name==="__proto__"?t(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},o=function(u,c){if(c==="__proto__")if(n.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return OS=function l(){var u,c,h,f,g,m,v=arguments[0],_=1,b=arguments.length,S=!1;for(typeof v=="boolean"&&(S=v,v=arguments[1]||{},_=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});_<b;++_)if(u=arguments[_],u!=null)for(c in u)h=o(v,c),f=o(u,c),v!==f&&(S&&f&&(s(f)||(g=i(f)))?(g?(g=!1,m=h&&i(h)?h:[]):m=h&&s(h)?h:{},a(v,{name:c,newValue:l(S,m,f)})):typeof f<"u"&&a(v,{name:c,newValue:f}));return v},OS}var _J=bJ();const PS=Lg(_J);function yT(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function vJ(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(l,...u){const c=n[++s];let h=-1;if(l){a(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?xJ(c,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function xJ(n,e){let t;return r;function r(...a){const o=n.length>a.length;let l;o&&a.push(i);try{l=n.apply(this,a)}catch(u){const c=u;if(o&&t)throw c;return i(c)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(a,...o){t||(t=!0,e(a,...o))}function s(a){i(null,a)}}const Oa={basename:SJ,dirname:EJ,extname:TJ,join:wJ,sep:"/"};function SJ(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');$g(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let a=-1,o=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(n.codePointAt(i)===e.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return t===r?r=a:r<0&&(r=n.length),n.slice(t,r)}function EJ(n){if($g(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function TJ(n){$g(n);let e=n.length,t=-1,r=0,i=-1,s=0,a;for(;e--;){const o=n.codePointAt(e);if(o===47){if(a){r=e+1;break}continue}t<0&&(a=!0,t=e+1),o===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function wJ(...n){let e=-1,t;for(;++e<n.length;)$g(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":AJ(t)}function AJ(n){$g(n);const e=n.codePointAt(0)===47;let t=RJ(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function RJ(n,e){let t="",r=0,i=-1,s=0,a=-1,o,l;for(;++a<=n.length;){if(a<n.length)o=n.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length>0){t="",r=0,i=a,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,a):t=n.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return t}function $g(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const NJ={cwd:CJ};function CJ(){return"/"}function bT(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function MJ(n){if(typeof n=="string")n=new URL(n);else if(!bT(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return IJ(n)}function IJ(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const FS=["history","path","basename","stem","extname","dirname"];class GG{constructor(e){let t;e?bT(e)?t={path:e}:typeof e=="string"||kJ(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":NJ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<FS.length;){const s=FS[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)FS.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?Oa.basename(this.path):void 0}set basename(e){BS(e,"basename"),US(e,"basename"),this.path=Oa.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Oa.dirname(this.path):void 0}set dirname(e){OP(this.basename,"dirname"),this.path=Oa.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Oa.extname(this.path):void 0}set extname(e){if(US(e,"extname"),OP(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Oa.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){bT(e)&&(e=MJ(e)),BS(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Oa.basename(this.path,this.extname):void 0}set stem(e){BS(e,"stem"),US(e,"stem"),this.path=Oa.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new bi(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function US(n,e){if(n&&n.includes(Oa.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Oa.sep+"`")}function BS(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function OP(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function kJ(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const LJ=(function(n){const r=this.constructor.prototype,i=r[n],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),DJ={}.hasOwnProperty;class mA extends LJ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=vJ()}copy(){const e=new mA;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(PS(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(VS("data",this.frozen),this.namespace[e]=t,this):DJ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(VS("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Ny(e),r=this.parser||this.Parser;return zS("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),zS("process",this.parser||this.Parser),GS("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(s,a){const o=Ny(e),l=r.parse(o);r.run(l,o,function(c,h,f){if(c||!h||!f)return u(c);const g=h,m=r.stringify(g,f);FJ(m)?f.value=m:f.result=m,u(c,f)});function u(c,h){c||!h?a(c):s?s(h):t(void 0,h)}}}processSync(e){let t=!1,r;return this.freeze(),zS("processSync",this.parser||this.Parser),GS("processSync",this.compiler||this.Compiler),this.process(e,i),FP("processSync","process",t),r;function i(s,a){t=!0,LP(s),r=a}}run(e,t,r){PP(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const l=Ny(t);i.run(e,l,u);function u(c,h,f){const g=h||e;c?o(c):a?a(g):r(void 0,g,f)}}}runSync(e,t){let r=!1,i;return this.run(e,t,s),FP("runSync","run",r),i;function s(a,o){LP(a),i=o,r=!0}}stringify(e,t){this.freeze();const r=Ny(t),i=this.compiler||this.Compiler;return GS("stringify",i),PP(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(VS("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=PS(!0,i.settings,u.settings))}function o(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[g,...m]=c;const v=r[f][1];yT(v)&&yT(g)&&(g=PS(!0,v,g)),r[f]=[u,g,...m]}}}}const OJ=new mA().freeze();function zS(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function GS(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function VS(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PP(n){if(!yT(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function FP(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Ny(n){return PJ(n)?n:new GG(n)}function PJ(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function FJ(n){return typeof n=="string"||UJ(n)}function UJ(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const BJ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",UP=[],BP={allowDangerousHtml:!0},zJ=/^(https?|ircs?|mailto|xmpp)$/i,GJ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function VG(n){const e=VJ(n),t=$J(n);return HJ(e.runSync(e.parse(t),t),n)}function VJ(n){const e=n.rehypePlugins||UP,t=n.remarkPlugins||UP,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...BP}:BP;return OJ().use(SQ).use(t).use(yJ,r).use(e)}function $J(n){const e=n.children||"",t=new GG;return typeof e=="string"&&(t.value=e),t}function HJ(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,a=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||jJ;for(const c of GJ)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+BJ+c.id,void 0);return zG(n,u),tK(n,{Fragment:L.Fragment,components:i,ignoreInvalidStyle:!0,jsx:L.jsx,jsxs:L.jsxs,passKeys:!0,passNode:!0});function u(c,h,f){if(c.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let g;for(g in kS)if(Object.hasOwn(kS,g)&&Object.hasOwn(c.properties,g)){const m=c.properties[g],v=kS[g];(v===null||v.includes(c.tagName))&&(c.properties[g]=l(String(m||""),g,c))}}if(c.type==="element"){let g=t?!t.includes(c.tagName):s?s.includes(c.tagName):!1;if(!g&&r&&typeof h=="number"&&(g=!r(c,h,f)),g&&f&&typeof h=="number")return o&&c.children?f.children.splice(h,1,...c.children):f.children.splice(h,1),h}}}function jJ(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||zJ.test(n.slice(0,e))?n:""}function WJ(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function qJ(n,e){if(n==null)return{};var t,r,i=WJ(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function _T(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function XJ(n){if(Array.isArray(n))return _T(n)}function YJ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function KJ(n,e){if(n){if(typeof n=="string")return _T(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_T(n,e):void 0}}function ZJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vT(n){return XJ(n)||YJ(n)||KJ(n)||ZJ()}function ug(n){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(n)}function QJ(n,e){if(ug(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JJ(n){var e=QJ(n,"string");return ug(e)=="symbol"?e:e+""}function $G(n,e,t){return(e=JJ(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ui(){return Ui=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ui.apply(null,arguments)}function zP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ed(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(t),!0).forEach(function(r){$G(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eee(n){var e=n.length;if(e===0||e===1)return n;if(e===2)return[n[0],n[1],"".concat(n[0],".").concat(n[1]),"".concat(n[1],".").concat(n[0])];if(e===3)return[n[0],n[1],n[2],"".concat(n[0],".").concat(n[1]),"".concat(n[0],".").concat(n[2]),"".concat(n[1],".").concat(n[0]),"".concat(n[1],".").concat(n[2]),"".concat(n[2],".").concat(n[0]),"".concat(n[2],".").concat(n[1]),"".concat(n[0],".").concat(n[1],".").concat(n[2]),"".concat(n[0],".").concat(n[2],".").concat(n[1]),"".concat(n[1],".").concat(n[0],".").concat(n[2]),"".concat(n[1],".").concat(n[2],".").concat(n[0]),"".concat(n[2],".").concat(n[0],".").concat(n[1]),"".concat(n[2],".").concat(n[1],".").concat(n[0])];if(e>=4)return[n[0],n[1],n[2],n[3],"".concat(n[0],".").concat(n[1]),"".concat(n[0],".").concat(n[2]),"".concat(n[0],".").concat(n[3]),"".concat(n[1],".").concat(n[0]),"".concat(n[1],".").concat(n[2]),"".concat(n[1],".").concat(n[3]),"".concat(n[2],".").concat(n[0]),"".concat(n[2],".").concat(n[1]),"".concat(n[2],".").concat(n[3]),"".concat(n[3],".").concat(n[0]),"".concat(n[3],".").concat(n[1]),"".concat(n[3],".").concat(n[2]),"".concat(n[0],".").concat(n[1],".").concat(n[2]),"".concat(n[0],".").concat(n[1],".").concat(n[3]),"".concat(n[0],".").concat(n[2],".").concat(n[1]),"".concat(n[0],".").concat(n[2],".").concat(n[3]),"".concat(n[0],".").concat(n[3],".").concat(n[1]),"".concat(n[0],".").concat(n[3],".").concat(n[2]),"".concat(n[1],".").concat(n[0],".").concat(n[2]),"".concat(n[1],".").concat(n[0],".").concat(n[3]),"".concat(n[1],".").concat(n[2],".").concat(n[0]),"".concat(n[1],".").concat(n[2],".").concat(n[3]),"".concat(n[1],".").concat(n[3],".").concat(n[0]),"".concat(n[1],".").concat(n[3],".").concat(n[2]),"".concat(n[2],".").concat(n[0],".").concat(n[1]),"".concat(n[2],".").concat(n[0],".").concat(n[3]),"".concat(n[2],".").concat(n[1],".").concat(n[0]),"".concat(n[2],".").concat(n[1],".").concat(n[3]),"".concat(n[2],".").concat(n[3],".").concat(n[0]),"".concat(n[2],".").concat(n[3],".").concat(n[1]),"".concat(n[3],".").concat(n[0],".").concat(n[1]),"".concat(n[3],".").concat(n[0],".").concat(n[2]),"".concat(n[3],".").concat(n[1],".").concat(n[0]),"".concat(n[3],".").concat(n[1],".").concat(n[2]),"".concat(n[3],".").concat(n[2],".").concat(n[0]),"".concat(n[3],".").concat(n[2],".").concat(n[1]),"".concat(n[0],".").concat(n[1],".").concat(n[2],".").concat(n[3]),"".concat(n[0],".").concat(n[1],".").concat(n[3],".").concat(n[2]),"".concat(n[0],".").concat(n[2],".").concat(n[1],".").concat(n[3]),"".concat(n[0],".").concat(n[2],".").concat(n[3],".").concat(n[1]),"".concat(n[0],".").concat(n[3],".").concat(n[1],".").concat(n[2]),"".concat(n[0],".").concat(n[3],".").concat(n[2],".").concat(n[1]),"".concat(n[1],".").concat(n[0],".").concat(n[2],".").concat(n[3]),"".concat(n[1],".").concat(n[0],".").concat(n[3],".").concat(n[2]),"".concat(n[1],".").concat(n[2],".").concat(n[0],".").concat(n[3]),"".concat(n[1],".").concat(n[2],".").concat(n[3],".").concat(n[0]),"".concat(n[1],".").concat(n[3],".").concat(n[0],".").concat(n[2]),"".concat(n[1],".").concat(n[3],".").concat(n[2],".").concat(n[0]),"".concat(n[2],".").concat(n[0],".").concat(n[1],".").concat(n[3]),"".concat(n[2],".").concat(n[0],".").concat(n[3],".").concat(n[1]),"".concat(n[2],".").concat(n[1],".").concat(n[0],".").concat(n[3]),"".concat(n[2],".").concat(n[1],".").concat(n[3],".").concat(n[0]),"".concat(n[2],".").concat(n[3],".").concat(n[0],".").concat(n[1]),"".concat(n[2],".").concat(n[3],".").concat(n[1],".").concat(n[0]),"".concat(n[3],".").concat(n[0],".").concat(n[1],".").concat(n[2]),"".concat(n[3],".").concat(n[0],".").concat(n[2],".").concat(n[1]),"".concat(n[3],".").concat(n[1],".").concat(n[0],".").concat(n[2]),"".concat(n[3],".").concat(n[1],".").concat(n[2],".").concat(n[0]),"".concat(n[3],".").concat(n[2],".").concat(n[0],".").concat(n[1]),"".concat(n[3],".").concat(n[2],".").concat(n[1],".").concat(n[0])]}var $S={};function tee(n){if(n.length===0||n.length===1)return n;var e=n.join(".");return $S[e]||($S[e]=eee(n)),$S[e]}function nee(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,r=n.filter(function(s){return s!=="token"}),i=tee(r);return i.reduce(function(s,a){return Ed(Ed({},s),t[a])},e)}function GP(n){return n.join(" ")}function ree(n,e){var t=0;return function(r){return t+=1,r.map(function(i,s){return HG({node:i,stylesheet:n,useInlineStyles:e,key:"code-segment-".concat(t,"-").concat(s)})})}}function HG(n){var e=n.node,t=n.stylesheet,r=n.style,i=r===void 0?{}:r,s=n.useInlineStyles,a=n.key,o=e.properties,l=e.type,u=e.tagName,c=e.value;if(l==="text")return c;if(u){var h=ree(t,s),f;if(!s)f=Ed(Ed({},o),{},{className:GP(o.className)});else{var g=Object.keys(t).reduce(function(b,S){return S.split(".").forEach(function(E){b.includes(E)||b.push(E)}),b},[]),m=o.className&&o.className.includes("token")?["token"]:[],v=o.className&&m.concat(o.className.filter(function(b){return!g.includes(b)}));f=Ed(Ed({},o),{},{className:GP(v)||void 0,style:nee(o.className,Object.assign({},o.style,i),t)})}var _=h(e.children);return ca.createElement(u,Ui({key:a},f),_)}}const iee=(function(n,e){var t=n.listLanguages();return t.indexOf(e)!==-1});var see=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function VP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(t),!0).forEach(function(r){$G(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var aee=/\n/g;function oee(n){return n.match(aee)}function lee(n){var e=n.lines,t=n.startingLineNumber,r=n.style;return e.map(function(i,s){var a=s+t;return ca.createElement("span",{key:"line-".concat(s),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(a):r},"".concat(a,`
`))})}function uee(n){var e=n.codeString,t=n.codeStyle,r=n.containerStyle,i=r===void 0?{float:"left",paddingRight:"10px"}:r,s=n.numberStyle,a=s===void 0?{}:s,o=n.startingLineNumber;return ca.createElement("code",{style:Object.assign({},t,i)},lee({lines:e.replace(/\n$/,"").split(`
`),style:a,startingLineNumber:o}))}function cee(n){return"".concat(n.toString().length,".25em")}function jG(n,e){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(n),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:e},children:[{type:"text",value:n}]}}function WG(n,e,t){var r={display:"inline-block",minWidth:cee(t),paddingRight:"1em",textAlign:"right",userSelect:"none"},i=typeof n=="function"?n(e):n,s=Cl(Cl({},r),i);return s}function zb(n){var e=n.children,t=n.lineNumber,r=n.lineNumberStyle,i=n.largestLineNumber,s=n.showInlineLineNumbers,a=n.lineProps,o=a===void 0?{}:a,l=n.className,u=l===void 0?[]:l,c=n.showLineNumbers,h=n.wrapLongLines,f=n.wrapLines,g=f===void 0?!1:f,m=g?Cl({},typeof o=="function"?o(t):o):{};if(m.className=m.className?[].concat(vT(m.className.trim().split(/\s+/)),vT(u)):u,t&&s){var v=WG(r,t,i);e.unshift(jG(t,v))}return h&c&&(m.style=Cl({display:"flex"},m.style)),{type:"element",tagName:"span",properties:m,children:e}}function qG(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];n.length===void 0&&(n=[n]);for(var r=0;r<n.length;r++){var i=n[r];if(i.type==="text")t.push(zb({children:[i],className:vT(new Set(e))}));else if(i.children){var s,a=e.concat(((s=i.properties)===null||s===void 0?void 0:s.className)||[]);qG(i.children,a).forEach(function(o){return t.push(o)})}}return t}function dee(n,e,t,r,i,s,a,o,l){var u,c=qG(n.value),h=[],f=-1,g=0;function m(R,w){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return zb({children:R,lineNumber:w,lineNumberStyle:o,largestLineNumber:a,showInlineLineNumbers:i,lineProps:t,className:M,showLineNumbers:r,wrapLongLines:l,wrapLines:e})}function v(R,w){if(r&&w&&i){var M=WG(o,w,a);R.unshift(jG(w,M))}return R}function _(R,w){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return e||M.length>0?m(R,w,M):v(R,w)}for(var b=function(){var w=c[g],M=w.children[0].value,I=oee(M);if(I){var C=M.split(`
`);C.forEach(function(k,O){var z=r&&h.length+s,W={type:"text",value:"".concat(k,`
`)};if(O===0){var q=c.slice(f+1,g).concat(zb({children:[W],className:w.properties.className})),X=_(q,z);h.push(X)}else if(O===C.length-1){var Q=c[g+1]&&c[g+1].children&&c[g+1].children[0],H={type:"text",value:"".concat(k)};if(Q){var G=zb({children:[H],className:w.properties.className});c.splice(g+1,0,G)}else{var re=[H],D=_(re,z,w.properties.className);h.push(D)}}else{var U=[W],ne=_(U,z,w.properties.className);h.push(ne)}}),f=g}g++};g<c.length;)b();if(f!==c.length-1){var S=c.slice(f+1,c.length);if(S&&S.length){var E=r&&h.length+s,A=_(S,E);h.push(A)}}return e?h:(u=[]).concat.apply(u,h)}function hee(n){var e=n.rows,t=n.stylesheet,r=n.useInlineStyles;return e.map(function(i,s){return HG({node:i,stylesheet:t,useInlineStyles:r,key:"code-segment-".concat(s)})})}function XG(n){return n&&typeof n.highlightAuto<"u"}function pee(n){var e=n.astGenerator,t=n.language,r=n.code,i=n.defaultCodeValue;if(XG(e)){var s=iee(e,t);return t==="text"?{value:i,language:"text"}:s?e.highlight(t,r):e.highlightAuto(r)}try{return t&&t!=="text"?{value:e.highlight(r,t)}:{value:i}}catch{return{value:i}}}function fee(n,e){return function(r){var i,s,a=r.language,o=r.children,l=r.style,u=l===void 0?e:l,c=r.customStyle,h=c===void 0?{}:c,f=r.codeTagProps,g=f===void 0?{className:a?"language-".concat(a):void 0,style:Cl(Cl({},u['code[class*="language-"]']),u['code[class*="language-'.concat(a,'"]')])}:f,m=r.useInlineStyles,v=m===void 0?!0:m,_=r.showLineNumbers,b=_===void 0?!1:_,S=r.showInlineLineNumbers,E=S===void 0?!0:S,A=r.startingLineNumber,R=A===void 0?1:A,w=r.lineNumberContainerStyle,M=r.lineNumberStyle,I=M===void 0?{}:M,C=r.wrapLines,k=r.wrapLongLines,O=k===void 0?!1:k,z=r.lineProps,W=z===void 0?{}:z,q=r.renderer,X=r.PreTag,Q=X===void 0?"pre":X,H=r.CodeTag,G=H===void 0?"code":H,re=r.code,D=re===void 0?(Array.isArray(o)?o[0]:o)||"":re,U=r.astGenerator,ne=qJ(r,see);U=U||n;var B=b?ca.createElement(uee,{containerStyle:w,codeStyle:g.style||{},numberStyle:I,startingLineNumber:R,codeString:D}):null,Oe=u.hljs||u['pre[class*="language-"]']||{backgroundColor:"#fff"},Y=XG(U)?"hljs":"prismjs",V=v?Object.assign({},ne,{style:Object.assign({},Oe,h)}):Object.assign({},ne,{className:ne.className?"".concat(Y," ").concat(ne.className):Y,style:Object.assign({},h)});if(O?g.style=Cl({whiteSpace:"pre-wrap"},g.style):g.style=Cl({whiteSpace:"pre"},g.style),!U)return ca.createElement(Q,V,B,ca.createElement(G,g,D));(C===void 0&&q||O)&&(C=!0),q=q||hee;var ae=[{type:"text",value:D}],_e=pee({astGenerator:U,language:a,code:D,defaultCodeValue:ae});_e.language===null&&(_e.value=ae);var Pe=(i=(s=D.match(/\n/g))===null||s===void 0?void 0:s.length)!==null&&i!==void 0?i:0,De=R+Pe,ft=dee(_e,C,W,b,E,R,De,I,O);return ca.createElement(Q,V,ca.createElement(G,g,!E&&B,q({rows:ft,stylesheet:u,useInlineStyles:v})))}}function gee(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xT(n){return xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xT(n)}function cg(n,e){return cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},cg(n,e)}const mee=["abap","abnf","actionscript","ada","agda","al","antlr4","apacheconf","apex","apl","applescript","aql","arduino","arff","armasm","arturo","asciidoc","asm6502","asmatmel","aspnet","autohotkey","autoit","avisynth","avro-idl","awk","bash","basic","batch","bbcode","bbj","bicep","birb","bison","bnf","bqn","brainfuck","brightscript","bro","bsl","c","cfscript","chaiscript","cil","cilkc","cilkcpp","clike","clojure","cmake","cobol","coffeescript","concurnas","cooklang","coq","cpp","crystal","csharp","cshtml","csp","css-extras","css","csv","cue","cypher","d","dart","dataweave","dax","dhall","diff","django","dns-zone-file","docker","dot","ebnf","editorconfig","eiffel","ejs","elixir","elm","erb","erlang","etlua","excel-formula","factor","false","firestore-security-rules","flow","fortran","fsharp","ftl","gap","gcode","gdscript","gedcom","gettext","gherkin","git","glsl","gml","gn","go-module","go","gradle","graphql","groovy","haml","handlebars","haskell","haxe","hcl","hlsl","hoon","hpkp","hsts","http","ichigojam","icon","icu-message-format","idris","iecst","ignore","inform7","ini","io","j","java","javadoc","javadoclike","javascript","javastacktrace","jexl","jolie","jq","js-extras","js-templates","jsdoc","json","json5","jsonp","jsstacktrace","jsx","julia","keepalived","keyman","kotlin","kumir","kusto","latex","latte","less","lilypond","linker-script","liquid","lisp","livescript","llvm","log","lolcode","lua","magma","makefile","markdown","markup-templating","markup","mata","matlab","maxscript","mel","mermaid","metafont","mizar","mongodb","monkey","moonscript","n1ql","n4js","nand2tetris-hdl","naniscript","nasm","neon","nevod","nginx","nim","nix","nsis","objectivec","ocaml","odin","opencl","openqasm","oz","parigp","parser","pascal","pascaligo","pcaxis","peoplecode","perl","php-extras","php","phpdoc","plant-uml","plsql","powerquery","powershell","processing","prolog","promql","properties","protobuf","psl","pug","puppet","pure","purebasic","purescript","python","q","qml","qore","qsharp","r","racket","reason","regex","rego","renpy","rescript","rest","rip","roboconf","robotframework","ruby","rust","sas","sass","scala","scheme","scss","shell-session","smali","smalltalk","smarty","sml","solidity","solution-file","soy","sparql","splunk-spl","sqf","sql","squirrel","stan","stata","stylus","supercollider","swift","systemd","t4-cs","t4-templating","t4-vb","tap","tcl","textile","toml","tremor","tsx","tt2","turtle","twig","typescript","typoscript","unrealscript","uorazor","uri","v","vala","vbnet","velocity","verilog","vhdl","vim","visual-basic","warpscript","wasm","web-idl","wgsl","wiki","wolfram","wren","xeora","xml-doc","xojo","xquery","yaml","yang","zig"],$P=/[#.]/g;function yee(n,e){const t=n||"",r={};let i=0,s,a;for(;i<t.length;){$P.lastIndex=i;const o=$P.exec(t),l=t.slice(i,o?o.index:t.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:a=l,i+=l.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||e||"div",properties:r,children:[]}}function YG(n,e,t){const r=t?xee(t):void 0;function i(s,a,...o){let l;if(s==null){l={type:"root",children:[]};const u=a;o.unshift(u)}else{l=yee(s,e);const u=l.tagName.toLowerCase(),c=r?r.get(u):void 0;if(l.tagName=c||u,bee(a))o.unshift(a);else for(const[h,f]of Object.entries(a))_ee(n,l.properties,h,f)}for(const u of o)ST(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function bee(n){if(n===null||typeof n!="object"||Array.isArray(n))return!0;if(typeof n.type!="string")return!1;const e=n,t=Object.keys(n);for(const r of t){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in n&&Array.isArray(n.children))}function _ee(n,e,t,r){const i=hG(n,t);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=sP(r):i.commaSeparated?s=eP(r):i.commaOrSpaceSeparated?s=sP(eP(r).join(" ")):s=HP(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?vee(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(HP(i,i.property,o));s=a}i.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[i.property]=s}}function ST(n,e){if(e!=null)if(typeof e=="number"||typeof e=="string")n.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const t of e)ST(n,t);else if(typeof e=="object"&&"type"in e)e.type==="root"?ST(n,e.children):n.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function HP(n,e,t){if(typeof t=="string"){if(n.number&&t&&!Number.isNaN(Number(t)))return Number(t);if((n.boolean||n.overloadedBoolean)&&(t===""||ag(t)===ag(e)))return!0}return t}function vee(n){const e=[];for(const[t,r]of Object.entries(n))e.push([t,r].join(": "));return e.join("; ")}function xee(n){const e=new Map;for(const t of n)e.set(t.toLowerCase(),t);return e}const See=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Eee=YG(pG,"div");YG(B_,"g",See);const Tee=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],jP={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function KG(n){const e=typeof n=="string"?n.charCodeAt(0):n;return e>=48&&e<=57}function wee(n){const e=typeof n=="string"?n.charCodeAt(0):n;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function Aee(n){const e=typeof n=="string"?n.charCodeAt(0):n;return e>=97&&e<=122||e>=65&&e<=90}function WP(n){return Aee(n)||KG(n)}const Ree=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function Nee(n,e){const t={},r=typeof t.additional=="string"?t.additional.charCodeAt(0):t.additional,i=[];let s=0,a=-1,o="",l,u;t.position&&("start"in t.position||"indent"in t.position?(u=t.position.indent,l=t.position.start):l=t.position);let c=(l?l.line:0)||1,h=(l?l.column:0)||1,f=m(),g;for(s--;++s<=n.length;)if(g===10&&(h=(u?u[a]:0)||1),g=n.charCodeAt(s),g===38){const b=n.charCodeAt(s+1);if(b===9||b===10||b===12||b===32||b===38||b===60||Number.isNaN(b)||r&&b===r){o+=String.fromCharCode(g),h++;continue}const S=s+1;let E=S,A=S,R;if(b===35){A=++E;const W=n.charCodeAt(A);W===88||W===120?(R="hexadecimal",A=++E):R="decimal"}else R="named";let w="",M="",I="";const C=R==="named"?WP:R==="decimal"?KG:wee;for(A--;++A<=n.length;){const W=n.charCodeAt(A);if(!C(W))break;I+=String.fromCharCode(W),R==="named"&&Tee.includes(I)&&(w=I,M=lg(I))}let k=n.charCodeAt(A)===59;if(k){A++;const W=R==="named"?lg(I):!1;W&&(w=I,M=W)}let O=1+A-S,z="";if(!(!k&&t.nonTerminated===!1))if(!I)R!=="named"&&v(4,O);else if(R==="named"){if(k&&!M)v(5,1);else if(w!==I&&(A=E+w.length,O=1+A-E,k=!1),!k){const W=w?1:3;if(t.attribute){const q=n.charCodeAt(A);q===61?(v(W,O),M=""):WP(q)?M="":v(W,O)}else v(W,O)}z=M}else{k||v(2,O);let W=Number.parseInt(I,R==="hexadecimal"?16:10);if(Cee(W))v(7,O),z="";else if(W in jP)v(6,O),z=jP[W];else{let q="";Mee(W)&&v(6,O),W>65535&&(W-=65536,q+=String.fromCharCode(W>>>10|55296),W=56320|W&1023),z=q+String.fromCharCode(W)}}if(z){_(),f=m(),s=A-1,h+=A-S+1,i.push(z);const W=m();W.offset++,t.reference&&t.reference.call(t.referenceContext||void 0,z,{start:f,end:W},n.slice(S-1,A)),f=W}else I=n.slice(S-1,A),o+=I,h+=I.length,s=A-1}else g===10&&(c++,a++,h=0),Number.isNaN(g)?_():(o+=String.fromCharCode(g),h++);return i.join("");function m(){return{line:c,column:h,offset:s+((l?l.offset:0)||0)}}function v(b,S){let E;t.warning&&(E=m(),E.column+=S,E.offset+=S,t.warning.call(t.warningContext||void 0,Ree[b],E,b))}function _(){o&&(i.push(o),t.text&&t.text.call(t.textContext||void 0,o,{start:f,end:m()}),o="")}}function Cee(n){return n>=55296&&n<=57343||n>1114111}function Mee(n){return n>=1&&n<=8||n===11||n>=13&&n<=31||n>=127&&n<=159||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534}var Iee=0,Cy={},Gr={util:{type:function(n){return Object.prototype.toString.call(n).slice(8,-1)},objId:function(n){return n.__id||Object.defineProperty(n,"__id",{value:++Iee}),n.__id},clone:function n(e,t){t=t||{};var r,i;switch(Gr.util.type(e)){case"Object":if(i=Gr.util.objId(e),t[i])return t[i];r={},t[i]=r;for(var s in e)e.hasOwnProperty(s)&&(r[s]=n(e[s],t));return r;case"Array":return i=Gr.util.objId(e),t[i]?t[i]:(r=[],t[i]=r,e.forEach(function(a,o){r[o]=n(a,t)}),r);default:return e}}},languages:{plain:Cy,plaintext:Cy,text:Cy,txt:Cy,extend:function(n,e){var t=Gr.util.clone(Gr.languages[n]);for(var r in e)t[r]=e[r];return t},insertBefore:function(n,e,t,r){r=r||Gr.languages;var i=r[n],s={};for(var a in i)if(i.hasOwnProperty(a)){if(a==e)for(var o in t)t.hasOwnProperty(o)&&(s[o]=t[o]);t.hasOwnProperty(a)||(s[a]=i[a])}var l=r[n];return r[n]=s,Gr.languages.DFS(Gr.languages,function(u,c){c===l&&u!=n&&(this[u]=s)}),s},DFS:function n(e,t,r,i){i=i||{};var s=Gr.util.objId;for(var a in e)if(e.hasOwnProperty(a)){t.call(e,a,e[a],r||a);var o=e[a],l=Gr.util.type(o);l==="Object"&&!i[s(o)]?(i[s(o)]=!0,n(o,t,null,i)):l==="Array"&&!i[s(o)]&&(i[s(o)]=!0,n(o,t,a,i))}}},plugins:{},highlight:function(n,e,t){var r={code:n,grammar:e,language:t};if(Gr.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=Gr.tokenize(r.code,r.grammar),Gr.hooks.run("after-tokenize",r),Df.stringify(Gr.util.encode(r.tokens),r.language)},tokenize:function(n,e){var t=e.rest;if(t){for(var r in t)e[r]=t[r];delete e.rest}var i=new kee;return Gb(i,i.head,n),ZG(n,i,e,i.head,0),Dee(i)},hooks:{all:{},add:function(n,e){var t=Gr.hooks.all;t[n]=t[n]||[],t[n].push(e)},run:function(n,e){var t=Gr.hooks.all[n];if(!(!t||!t.length))for(var r=0,i;i=t[r++];)i(e)}},Token:Df};function Df(n,e,t,r){this.type=n,this.content=e,this.alias=t,this.length=(r||"").length|0}function qP(n,e,t,r){n.lastIndex=e;var i=n.exec(t);if(i&&r&&i[1]){var s=i[1].length;i.index+=s,i[0]=i[0].slice(s)}return i}function ZG(n,e,t,r,i,s){for(var a in t)if(!(!t.hasOwnProperty(a)||!t[a])){var o=t[a];o=Array.isArray(o)?o:[o];for(var l=0;l<o.length;++l){if(s&&s.cause==a+","+l)return;var u=o[l],c=u.inside,h=!!u.lookbehind,f=!!u.greedy,g=u.alias;if(f&&!u.pattern.global){var m=u.pattern.toString().match(/[imsuy]*$/)[0];u.pattern=RegExp(u.pattern.source,m+"g")}for(var v=u.pattern||u,_=r.next,b=i;_!==e.tail&&!(s&&b>=s.reach);b+=_.value.length,_=_.next){var S=_.value;if(e.length>n.length)return;if(!(S instanceof Df)){var E=1,A;if(f){if(A=qP(v,b,n,h),!A||A.index>=n.length)break;var I=A.index,R=A.index+A[0].length,w=b;for(w+=_.value.length;I>=w;)_=_.next,w+=_.value.length;if(w-=_.value.length,b=w,_.value instanceof Df)continue;for(var M=_;M!==e.tail&&(w<R||typeof M.value=="string");M=M.next)E++,w+=M.value.length;E--,S=n.slice(b,w),A.index-=b}else if(A=qP(v,0,S,h),!A)continue;var I=A.index,C=A[0],k=S.slice(0,I),O=S.slice(I+C.length),z=b+S.length;s&&z>s.reach&&(s.reach=z);var W=_.prev;k&&(W=Gb(e,W,k),b+=k.length),Lee(e,W,E);var q=new Df(a,c?Gr.tokenize(C,c):C,g,C);if(_=Gb(e,W,q),O&&Gb(e,_,O),E>1){var X={cause:a+","+l,reach:z};ZG(n,e,t,_.prev,b,X),s&&X.reach>s.reach&&(s.reach=X.reach)}}}}}}function kee(){var n={value:null,prev:null,next:null},e={value:null,prev:n,next:null};n.next=e,this.head=n,this.tail=e,this.length=0}function Gb(n,e,t){var r=e.next,i={value:t,prev:e,next:r};return e.next=i,r.prev=i,n.length++,i}function Lee(n,e,t){for(var r=e.next,i=0;i<t&&r!==n.tail;i++)r=r.next;e.next=r,r.prev=e,n.length-=i}function Dee(n){for(var e=[],t=n.head.next;t!==n.tail;)e.push(t.value),t=t.next;return e}const QG=Gr;function JG(){}JG.prototype=QG;const j=new JG;j.highlight=Oee;j.register=Pee;j.alias=Fee;j.registered=Uee;j.listLanguages=Bee;j.util.encode=zee;j.Token.stringify=ET;function Oee(n,e){if(typeof n!="string")throw new TypeError("Expected `string` for `value`, got `"+n+"`");let t,r;if(e&&typeof e=="object")t=e;else{if(r=e,typeof r!="string")throw new TypeError("Expected `string` for `name`, got `"+r+"`");if(Object.hasOwn(j.languages,r))t=j.languages[r];else throw new Error("Unknown language: `"+r+"` is not registered")}return{type:"root",children:QG.highlight.call(j,n,t,r)}}function Pee(n){if(typeof n!="function"||!n.displayName)throw new Error("Expected `function` for `syntax`, got `"+n+"`");Object.hasOwn(j.languages,n.displayName)||n(j)}function Fee(n,e){const t=j.languages;let r={};typeof n=="string"?e&&(r[n]=e):r=n;let i;for(i in r)if(Object.hasOwn(r,i)){const s=r[i],a=typeof s=="string"?[s]:s;let o=-1;for(;++o<a.length;)t[a[o]]=t[i]}}function Uee(n){if(typeof n!="string")throw new TypeError("Expected `string` for `aliasOrLanguage`, got `"+n+"`");return Object.hasOwn(j.languages,n)}function Bee(){const n=j.languages,e=[];let t;for(t in n)Object.hasOwn(n,t)&&typeof n[t]=="object"&&e.push(t);return e}function ET(n,e){if(typeof n=="string")return{type:"text",value:n};if(Array.isArray(n)){const r=[];let i=-1;for(;++i<n.length;)n[i]!==null&&n[i]!==void 0&&n[i]!==""&&r.push(ET(n[i],e));return r}const t={attributes:{},classes:["token",n.type],content:ET(n.content,e),language:e,tag:"span",type:n.type};return n.alias&&t.classes.push(...typeof n.alias=="string"?[n.alias]:n.alias),j.hooks.run("wrap",t),Eee(t.tag+"."+t.classes.join("."),Gee(t.attributes),t.content)}function zee(n){return n}function Gee(n){let e;for(e in n)Object.hasOwn(n,e)&&(n[e]=Nee(n[e]));return n}const Vee={'code[class*="language-"]':{color:"black",background:"none",textShadow:"0 1px white",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"black",background:"#f5f2f0",textShadow:"0 1px white",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"]::selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#b3d4fc"},':not(pre) > code[class*="language-"]':{background:"#f5f2f0",padding:".1em",borderRadius:".3em",whiteSpace:"normal"},comment:{color:"slategray"},prolog:{color:"slategray"},doctype:{color:"slategray"},cdata:{color:"slategray"},punctuation:{color:"#999"},namespace:{Opacity:".7"},property:{color:"#905"},tag:{color:"#905"},boolean:{color:"#905"},number:{color:"#905"},constant:{color:"#905"},symbol:{color:"#905"},deleted:{color:"#905"},selector:{color:"#690"},"attr-name":{color:"#690"},string:{color:"#690"},char:{color:"#690"},builtin:{color:"#690"},inserted:{color:"#690"},operator:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},entity:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)",cursor:"help"},url:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},".language-css .token.string":{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},".style .token.string":{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},atrule:{color:"#07a"},"attr-value":{color:"#07a"},keyword:{color:"#07a"},function:{color:"#DD4A68"},"class-name":{color:"#DD4A68"},regex:{color:"#e90"},important:{color:"#e90",fontWeight:"bold"},variable:{color:"#e90"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"}};ni.displayName="markup";ni.aliases=["atom","html","mathml","rss","ssml","svg","xml"];function ni(n){n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.value.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(t,r){var i={};i["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[r]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};s["language-"+r]={pattern:/[\s\S]+/,inside:n.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",a)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(e,t){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:n.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml}cc.displayName="css";cc.aliases=[];function cc(n){(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(n)}cn.displayName="clike";cn.aliases=[];function cn(n){n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}}yA.displayName="regex";yA.aliases=[];function yA(n){(function(e){var t={pattern:/\\[\\(){}[\]^$+*?|.]/,alias:"escape"},r=/\\(?:x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,i={pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},s={pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},a="(?:[^\\\\-]|"+r.source+")",o=RegExp(a+"-"+a),l={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};e.languages.regex={"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:[^\\\]]|\\[\s\S])*\]/,lookbehind:!0,inside:{"char-class-negation":{pattern:/(^\[)\^/,lookbehind:!0,alias:"operator"},"char-class-punctuation":{pattern:/^\[|\]$/,alias:"punctuation"},range:{pattern:o,inside:{escape:r,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":t,"char-set":s,escape:r}},"special-escape":t,"char-set":i,backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":l}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:r,group:[{pattern:/\((?:\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,alias:"punctuation",inside:{"group-name":l}},{pattern:/\)/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}}})(n)}_i.displayName="javascript";_i.aliases=["js"];function _i(n){n.register(cn),n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript}bA.displayName="abap";bA.aliases=[];function bA(n){n.languages.abap={comment:/^\*.*/m,string:/(`|')(?:\\.|(?!\1)[^\\\r\n])*\1/,"string-template":{pattern:/([|}])(?:\\.|[^\\|{\r\n])*(?=[|{])/,lookbehind:!0,alias:"string"},"eol-comment":{pattern:/(^|\s)".*/m,lookbehind:!0,alias:"comment"},keyword:{pattern:/(\s|\.|^)(?:\*-INPUT|\?TO|ABAP-SOURCE|ABBREVIATED|ABS|ABSTRACT|ACCEPT|ACCEPTING|ACCESSPOLICY|ACCORDING|ACOS|ACTIVATION|ACTUAL|ADD|ADD-CORRESPONDING|ADJACENT|AFTER|ALIAS|ALIASES|ALIGN|ALL|ALLOCATE|ALPHA|ANALYSIS|ANALYZER|AND|ANY|APPEND|APPENDAGE|APPENDING|APPLICATION|ARCHIVE|AREA|ARITHMETIC|AS|ASCENDING|ASIN|ASPECT|ASSERT|ASSIGN|ASSIGNED|ASSIGNING|ASSOCIATION|ASYNCHRONOUS|AT|ATAN|ATTRIBUTES|AUTHORITY|AUTHORITY-CHECK|AVG|BACK|BACKGROUND|BACKUP|BACKWARD|BADI|BASE|BEFORE|BEGIN|BETWEEN|BIG|BINARY|BINDING|BIT|BIT-AND|BIT-NOT|BIT-OR|BIT-XOR|BLACK|BLANK|BLANKS|BLOB|BLOCK|BLOCKS|BLUE|BOUND|BOUNDARIES|BOUNDS|BOXED|BREAK-POINT|BT|BUFFER|BY|BYPASSING|BYTE|BYTE-CA|BYTE-CN|BYTE-CO|BYTE-CS|BYTE-NA|BYTE-NS|BYTE-ORDER|C|CA|CALL|CALLING|CASE|CAST|CASTING|CATCH|CEIL|CENTER|CENTERED|CHAIN|CHAIN-INPUT|CHAIN-REQUEST|CHANGE|CHANGING|CHANNELS|CHAR-TO-HEX|CHARACTER|CHARLEN|CHECK|CHECKBOX|CIRCULAR|CI_|CLASS|CLASS-CODING|CLASS-DATA|CLASS-EVENTS|CLASS-METHODS|CLASS-POOL|CLEANUP|CLEAR|CLIENT|CLOB|CLOCK|CLOSE|CN|CNT|CO|COALESCE|CODE|CODING|COLLECT|COLOR|COLUMN|COLUMNS|COL_BACKGROUND|COL_GROUP|COL_HEADING|COL_KEY|COL_NEGATIVE|COL_NORMAL|COL_POSITIVE|COL_TOTAL|COMMENT|COMMENTS|COMMIT|COMMON|COMMUNICATION|COMPARING|COMPONENT|COMPONENTS|COMPRESSION|COMPUTE|CONCAT|CONCATENATE|COND|CONDENSE|CONDITION|CONNECT|CONNECTION|CONSTANTS|CONTEXT|CONTEXTS|CONTINUE|CONTROL|CONTROLS|CONV|CONVERSION|CONVERT|COPIES|COPY|CORRESPONDING|COS|COSH|COUNT|COUNTRY|COVER|CP|CPI|CREATE|CREATING|CRITICAL|CS|CURRENCY|CURRENCY_CONVERSION|CURRENT|CURSOR|CURSOR-SELECTION|CUSTOMER|CUSTOMER-FUNCTION|DANGEROUS|DATA|DATABASE|DATAINFO|DATASET|DATE|DAYLIGHT|DBMAXLEN|DD\/MM\/YY|DD\/MM\/YYYY|DDMMYY|DEALLOCATE|DECIMALS|DECIMAL_SHIFT|DECLARATIONS|DEEP|DEFAULT|DEFERRED|DEFINE|DEFINING|DEFINITION|DELETE|DELETING|DEMAND|DEPARTMENT|DESCENDING|DESCRIBE|DESTINATION|DETAIL|DIALOG|DIRECTORY|DISCONNECT|DISPLAY|DISPLAY-MODE|DISTANCE|DISTINCT|DIV|DIVIDE|DIVIDE-CORRESPONDING|DIVISION|DO|DUMMY|DUPLICATE|DUPLICATES|DURATION|DURING|DYNAMIC|DYNPRO|E|EACH|EDIT|EDITOR-CALL|ELSE|ELSEIF|EMPTY|ENABLED|ENABLING|ENCODING|END|END-ENHANCEMENT-SECTION|END-LINES|END-OF-DEFINITION|END-OF-FILE|END-OF-PAGE|END-OF-SELECTION|ENDAT|ENDCASE|ENDCATCH|ENDCHAIN|ENDCLASS|ENDDO|ENDENHANCEMENT|ENDEXEC|ENDFOR|ENDFORM|ENDFUNCTION|ENDIAN|ENDIF|ENDING|ENDINTERFACE|ENDLOOP|ENDMETHOD|ENDMODULE|ENDON|ENDPROVIDE|ENDSELECT|ENDTRY|ENDWHILE|ENGINEERING|ENHANCEMENT|ENHANCEMENT-POINT|ENHANCEMENT-SECTION|ENHANCEMENTS|ENTRIES|ENTRY|ENVIRONMENT|EQ|EQUAL|EQUIV|ERRORMESSAGE|ERRORS|ESCAPE|ESCAPING|EVENT|EVENTS|EXACT|EXCEPT|EXCEPTION|EXCEPTION-TABLE|EXCEPTIONS|EXCLUDE|EXCLUDING|EXEC|EXECUTE|EXISTS|EXIT|EXIT-COMMAND|EXP|EXPAND|EXPANDING|EXPIRATION|EXPLICIT|EXPONENT|EXPORT|EXPORTING|EXTEND|EXTENDED|EXTENSION|EXTRACT|FAIL|FETCH|FIELD|FIELD-GROUPS|FIELD-SYMBOL|FIELD-SYMBOLS|FIELDS|FILE|FILTER|FILTER-TABLE|FILTERS|FINAL|FIND|FIRST|FIRST-LINE|FIXED-POINT|FKEQ|FKGE|FLOOR|FLUSH|FONT|FOR|FORM|FORMAT|FORWARD|FOUND|FRAC|FRAME|FRAMES|FREE|FRIENDS|FROM|FUNCTION|FUNCTION-POOL|FUNCTIONALITY|FURTHER|GAPS|GE|GENERATE|GET|GIVING|GKEQ|GKGE|GLOBAL|GRANT|GREATER|GREEN|GROUP|GROUPS|GT|HANDLE|HANDLER|HARMLESS|HASHED|HAVING|HDB|HEAD-LINES|HEADER|HEADERS|HEADING|HELP-ID|HELP-REQUEST|HIDE|HIGH|HINT|HOLD|HOTSPOT|I|ICON|ID|IDENTIFICATION|IDENTIFIER|IDS|IF|IGNORE|IGNORING|IMMEDIATELY|IMPLEMENTATION|IMPLEMENTATIONS|IMPLEMENTED|IMPLICIT|IMPORT|IMPORTING|IN|INACTIVE|INCL|INCLUDE|INCLUDES|INCLUDING|INCREMENT|INDEX|INDEX-LINE|INFOTYPES|INHERITING|INIT|INITIAL|INITIALIZATION|INNER|INOUT|INPUT|INSERT|INSTANCES|INTENSIFIED|INTERFACE|INTERFACE-POOL|INTERFACES|INTERNAL|INTERVALS|INTO|INVERSE|INVERTED-DATE|IS|ISO|ITERATOR|ITNO|JOB|JOIN|KEEP|KEEPING|KERNEL|KEY|KEYS|KEYWORDS|KIND|LANGUAGE|LAST|LATE|LAYOUT|LE|LEADING|LEAVE|LEFT|LEFT-JUSTIFIED|LEFTPLUS|LEFTSPACE|LEGACY|LENGTH|LESS|LET|LEVEL|LEVELS|LIKE|LINE|LINE-COUNT|LINE-SELECTION|LINE-SIZE|LINEFEED|LINES|LIST|LIST-PROCESSING|LISTBOX|LITTLE|LLANG|LOAD|LOAD-OF-PROGRAM|LOB|LOCAL|LOCALE|LOCATOR|LOG|LOG-POINT|LOG10|LOGFILE|LOGICAL|LONG|LOOP|LOW|LOWER|LPAD|LPI|LT|M|MAIL|MAIN|MAJOR-ID|MAPPING|MARGIN|MARK|MASK|MATCH|MATCHCODE|MAX|MAXIMUM|MEDIUM|MEMBERS|MEMORY|MESH|MESSAGE|MESSAGE-ID|MESSAGES|MESSAGING|METHOD|METHODS|MIN|MINIMUM|MINOR-ID|MM\/DD\/YY|MM\/DD\/YYYY|MMDDYY|MOD|MODE|MODIF|MODIFIER|MODIFY|MODULE|MOVE|MOVE-CORRESPONDING|MULTIPLY|MULTIPLY-CORRESPONDING|NA|NAME|NAMETAB|NATIVE|NB|NE|NESTED|NESTING|NEW|NEW-LINE|NEW-PAGE|NEW-SECTION|NEXT|NO|NO-DISPLAY|NO-EXTENSION|NO-GAP|NO-GAPS|NO-GROUPING|NO-HEADING|NO-SCROLLING|NO-SIGN|NO-TITLE|NO-TOPOFPAGE|NO-ZERO|NODE|NODES|NON-UNICODE|NON-UNIQUE|NOT|NP|NS|NULL|NUMBER|NUMOFCHAR|O|OBJECT|OBJECTS|OBLIGATORY|OCCURRENCE|OCCURRENCES|OCCURS|OF|OFF|OFFSET|OLE|ON|ONLY|OPEN|OPTION|OPTIONAL|OPTIONS|OR|ORDER|OTHER|OTHERS|OUT|OUTER|OUTPUT|OUTPUT-LENGTH|OVERFLOW|OVERLAY|PACK|PACKAGE|PAD|PADDING|PAGE|PAGES|PARAMETER|PARAMETER-TABLE|PARAMETERS|PART|PARTIALLY|PATTERN|PERCENTAGE|PERFORM|PERFORMING|PERSON|PF|PF-STATUS|PINK|PLACES|POOL|POSITION|POS_HIGH|POS_LOW|PRAGMAS|PRECOMPILED|PREFERRED|PRESERVING|PRIMARY|PRINT|PRINT-CONTROL|PRIORITY|PRIVATE|PROCEDURE|PROCESS|PROGRAM|PROPERTY|PROTECTED|PROVIDE|PUBLIC|PUSHBUTTON|PUT|QUEUE-ONLY|QUICKINFO|RADIOBUTTON|RAISE|RAISING|RANGE|RANGES|RAW|READ|READ-ONLY|READER|RECEIVE|RECEIVED|RECEIVER|RECEIVING|RED|REDEFINITION|REDUCE|REDUCED|REF|REFERENCE|REFRESH|REGEX|REJECT|REMOTE|RENAMING|REPLACE|REPLACEMENT|REPLACING|REPORT|REQUEST|REQUESTED|RESERVE|RESET|RESOLUTION|RESPECTING|RESPONSIBLE|RESULT|RESULTS|RESUMABLE|RESUME|RETRY|RETURN|RETURNCODE|RETURNING|RIGHT|RIGHT-JUSTIFIED|RIGHTPLUS|RIGHTSPACE|RISK|RMC_COMMUNICATION_FAILURE|RMC_INVALID_STATUS|RMC_SYSTEM_FAILURE|ROLE|ROLLBACK|ROUND|ROWS|RTTI|RUN|SAP|SAP-SPOOL|SAVING|SCALE_PRESERVING|SCALE_PRESERVING_SCIENTIFIC|SCAN|SCIENTIFIC|SCIENTIFIC_WITH_LEADING_ZERO|SCREEN|SCROLL|SCROLL-BOUNDARY|SCROLLING|SEARCH|SECONDARY|SECONDS|SECTION|SELECT|SELECT-OPTIONS|SELECTION|SELECTION-SCREEN|SELECTION-SET|SELECTION-SETS|SELECTION-TABLE|SELECTIONS|SELECTOR|SEND|SEPARATE|SEPARATED|SET|SHARED|SHIFT|SHORT|SHORTDUMP-ID|SIGN|SIGN_AS_POSTFIX|SIMPLE|SIN|SINGLE|SINH|SIZE|SKIP|SKIPPING|SMART|SOME|SORT|SORTABLE|SORTED|SOURCE|SPACE|SPECIFIED|SPLIT|SPOOL|SPOTS|SQL|SQLSCRIPT|SQRT|STABLE|STAMP|STANDARD|START-OF-SELECTION|STARTING|STATE|STATEMENT|STATEMENTS|STATIC|STATICS|STATUSINFO|STEP-LOOP|STOP|STRLEN|STRUCTURE|STRUCTURES|STYLE|SUBKEY|SUBMATCHES|SUBMIT|SUBROUTINE|SUBSCREEN|SUBSTRING|SUBTRACT|SUBTRACT-CORRESPONDING|SUFFIX|SUM|SUMMARY|SUMMING|SUPPLIED|SUPPLY|SUPPRESS|SWITCH|SWITCHSTATES|SYMBOL|SYNCPOINTS|SYNTAX|SYNTAX-CHECK|SYNTAX-TRACE|SYSTEM-CALL|SYSTEM-EXCEPTIONS|SYSTEM-EXIT|TAB|TABBED|TABLE|TABLES|TABLEVIEW|TABSTRIP|TAN|TANH|TARGET|TASK|TASKS|TEST|TESTING|TEXT|TEXTPOOL|THEN|THROW|TIME|TIMES|TIMESTAMP|TIMEZONE|TITLE|TITLE-LINES|TITLEBAR|TO|TOKENIZATION|TOKENS|TOP-LINES|TOP-OF-PAGE|TRACE-FILE|TRACE-TABLE|TRAILING|TRANSACTION|TRANSFER|TRANSFORMATION|TRANSLATE|TRANSPORTING|TRMAC|TRUNC|TRUNCATE|TRUNCATION|TRY|TYPE|TYPE-POOL|TYPE-POOLS|TYPES|ULINE|UNASSIGN|UNDER|UNICODE|UNION|UNIQUE|UNIT|UNIT_CONVERSION|UNIX|UNPACK|UNTIL|UNWIND|UP|UPDATE|UPPER|USER|USER-COMMAND|USING|UTF-8|VALID|VALUE|VALUE-REQUEST|VALUES|VARY|VARYING|VERIFICATION-MESSAGE|VERSION|VIA|VIEW|VISIBLE|WAIT|WARNING|WHEN|WHENEVER|WHERE|WHILE|WIDTH|WINDOW|WINDOWS|WITH|WITH-HEADING|WITH-TITLE|WITHOUT|WORD|WORK|WRITE|WRITER|X|XML|XOR|XSD|XSTRLEN|YELLOW|YES|YYMMDD|Z|ZERO|ZONE)(?![\w-])/i,lookbehind:!0},number:/\b\d+\b/,operator:{pattern:/(\s)(?:\*\*?|<[=>]?|>=?|\?=|[-+\/=])(?=\s)/,lookbehind:!0},"string-operator":{pattern:/(\s)&&?(?=\s)/,lookbehind:!0,alias:"keyword"},"token-operator":[{pattern:/(\w)(?:->?|=>|[~|{}])(?=\w)/,lookbehind:!0,alias:"punctuation"},{pattern:/[|{}]/,alias:"punctuation"}],punctuation:/[,.:()]/}}_A.displayName="abnf";_A.aliases=[];function _A(n){(function(e){var t="(?:ALPHA|BIT|CHAR|CR|CRLF|CTL|DIGIT|DQUOTE|HEXDIG|HTAB|LF|LWSP|OCTET|SP|VCHAR|WSP)";e.languages.abnf={comment:/;.*/,string:{pattern:/(?:%[is])?"[^"\n\r]*"/,greedy:!0,inside:{punctuation:/^%[is]/}},range:{pattern:/%(?:b[01]+-[01]+|d\d+-\d+|x[A-F\d]+-[A-F\d]+)/i,alias:"number"},terminal:{pattern:/%(?:b[01]+(?:\.[01]+)*|d\d+(?:\.\d+)*|x[A-F\d]+(?:\.[A-F\d]+)*)/i,alias:"number"},repetition:{pattern:/(^|[^\w-])(?:\d*\*\d*|\d+)/,lookbehind:!0,alias:"operator"},definition:{pattern:/(^[ \t]*)(?:[a-z][\w-]*|<[^<>\r\n]*>)(?=\s*=)/m,lookbehind:!0,alias:"keyword",inside:{punctuation:/<|>/}},"core-rule":{pattern:RegExp("(?:(^|[^<\\w-])"+t+"|<"+t+">)(?![\\w-])","i"),lookbehind:!0,alias:["rule","constant"],inside:{punctuation:/<|>/}},rule:{pattern:/(^|[^<\w-])[a-z][\w-]*|<[^<>\r\n]*>/i,lookbehind:!0,inside:{punctuation:/<|>/}},operator:/=\/?|\//,punctuation:/[()\[\]]/}})(n)}vA.displayName="actionscript";vA.aliases=[];function vA(n){n.register(_i),n.languages.actionscript=n.languages.extend("javascript",{keyword:/\b(?:as|break|case|catch|class|const|default|delete|do|dynamic|each|else|extends|final|finally|for|function|get|if|implements|import|in|include|instanceof|interface|internal|is|namespace|native|new|null|override|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|use|var|void|while|with)\b/,operator:/\+\+|--|(?:[+\-*\/%^]|&&?|\|\|?|<<?|>>?>?|[!=]=?)=?|[~?@]/}),n.languages.actionscript["class-name"].alias="function",delete n.languages.actionscript.parameter,delete n.languages.actionscript["literal-property"],n.languages.markup&&n.languages.insertBefore("actionscript","string",{xml:{pattern:/(^|[^.])<\/?\w+(?:\s+[^\s>\/=]+=("|')(?:\\[\s\S]|(?!\2)[^\\])*\2)*\s*\/?>/,lookbehind:!0,inside:n.languages.markup}})}xA.displayName="ada";xA.aliases=[];function xA(n){n.languages.ada={comment:/--.*/,string:/"(?:""|[^"\r\f\n])*"/,number:[{pattern:/\b\d(?:_?\d)*#[\dA-F](?:_?[\dA-F])*(?:\.[\dA-F](?:_?[\dA-F])*)?#(?:E[+-]?\d(?:_?\d)*)?/i},{pattern:/\b\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:E[+-]?\d(?:_?\d)*)?\b/i}],attribute:{pattern:/\b'\w+/,alias:"attr-name"},keyword:/\b(?:abort|abs|abstract|accept|access|aliased|all|and|array|at|begin|body|case|constant|declare|delay|delta|digits|do|else|elsif|end|entry|exception|exit|for|function|generic|goto|if|in|interface|is|limited|loop|mod|new|not|null|of|or|others|out|overriding|package|pragma|private|procedure|protected|raise|range|record|rem|renames|requeue|return|reverse|select|separate|some|subtype|synchronized|tagged|task|terminate|then|type|until|use|when|while|with|xor)\b/i,boolean:/\b(?:false|true)\b/i,operator:/<[=>]?|>=?|=>?|:=|\/=?|\*\*?|[&+-]/,punctuation:/\.\.?|[,;():]/,char:/'.'/,variable:/\b[a-z](?:\w)*\b/i}}SA.displayName="agda";SA.aliases=[];function SA(n){(function(e){e.languages.agda={comment:/\{-[\s\S]*?(?:-\}|$)|--.*/,string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},punctuation:/[(){}.;@]/,"class-name":{pattern:/((?:data|record) +)\S+/,lookbehind:!0},function:{pattern:/(^[ \t]*)(?!\s)[^:\r\n]+(?=:)/m,lookbehind:!0},operator:{pattern:/(^\s*|\s)(?:[=|:\\?_]|->)(?=\s)/,lookbehind:!0},keyword:/\b(?:Set|abstract|constructor|data|eta-equality|field|forall|hiding|import|in|inductive|infix|infixl|infixr|instance|let|macro|module|mutual|no-eta-equality|open|overlap|pattern|postulate|primitive|private|public|quote|quoteContext|quoteGoal|quoteTerm|record|renaming|rewrite|syntax|tactic|unquote|unquoteDecl|unquoteDef|using|variable|where|with)\b/}})(n)}EA.displayName="al";EA.aliases=[];function EA(n){n.languages.al={comment:/\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/'(?:''|[^'\r\n])*'(?!')|"(?:""|[^"\r\n])*"(?!")/,greedy:!0},function:{pattern:/(\b(?:event|procedure|trigger)\s+|(?:^|[^.])\.\s*)[a-z_]\w*(?=\s*\()/i,lookbehind:!0},keyword:[/\b(?:array|asserterror|begin|break|case|do|downto|else|end|event|exit|for|foreach|function|if|implements|in|indataset|interface|internal|local|of|procedure|program|protected|repeat|runonclient|securityfiltering|suppressdispose|temporary|then|to|trigger|until|var|while|with|withevents)\b/i,/\b(?:action|actions|addafter|addbefore|addfirst|addlast|area|assembly|chartpart|codeunit|column|controladdin|cuegroup|customizes|dataitem|dataset|dotnet|elements|enum|enumextension|extends|field|fieldattribute|fieldelement|fieldgroup|fieldgroups|fields|filter|fixed|grid|group|key|keys|label|labels|layout|modify|moveafter|movebefore|movefirst|movelast|page|pagecustomization|pageextension|part|profile|query|repeater|report|requestpage|schema|separator|systempart|table|tableelement|tableextension|textattribute|textelement|type|usercontrol|value|xmlport)\b/i],number:/\b(?:0x[\da-f]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)(?:F|LL?|U(?:LL?)?)?\b/i,boolean:/\b(?:false|true)\b/i,variable:/\b(?:Curr(?:FieldNo|Page|Report)|x?Rec|RequestOptionsPage)\b/,"class-name":/\b(?:automation|biginteger|bigtext|blob|boolean|byte|char|clienttype|code|completiontriggererrorlevel|connectiontype|database|dataclassification|datascope|date|dateformula|datetime|decimal|defaultlayout|dialog|dictionary|dotnetassembly|dotnettypedeclaration|duration|errorinfo|errortype|executioncontext|executionmode|fieldclass|fieldref|fieldtype|file|filterpagebuilder|guid|httpclient|httpcontent|httpheaders|httprequestmessage|httpresponsemessage|instream|integer|joker|jsonarray|jsonobject|jsontoken|jsonvalue|keyref|list|moduledependencyinfo|moduleinfo|none|notification|notificationscope|objecttype|option|outstream|pageresult|record|recordid|recordref|reportformat|securityfilter|sessionsettings|tableconnectiontype|tablefilter|testaction|testfield|testfilterfield|testpage|testpermissions|testrequestpage|text|textbuilder|textconst|textencoding|time|transactionmodel|transactiontype|variant|verbosity|version|view|views|webserviceactioncontext|webserviceactionresultcode|xmlattribute|xmlattributecollection|xmlcdata|xmlcomment|xmldeclaration|xmldocument|xmldocumenttype|xmlelement|xmlnamespacemanager|xmlnametable|xmlnode|xmlnodelist|xmlprocessinginstruction|xmlreadoptions|xmltext|xmlwriteoptions)\b/i,operator:/\.\.|:[=:]|[-+*/]=?|<>|[<>]=?|=|\b(?:and|div|mod|not|or|xor)\b/i,punctuation:/[()\[\]{}:.;,]/}}TA.displayName="antlr4";TA.aliases=["g4"];function TA(n){n.languages.antlr4={comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,string:{pattern:/'(?:\\.|[^\\'\r\n])*'/,greedy:!0},"character-class":{pattern:/\[(?:\\.|[^\\\]\r\n])*\]/,greedy:!0,alias:"regex",inside:{range:{pattern:/([^[]|(?:^|[^\\])(?:\\\\)*\\\[)-(?!\])/,lookbehind:!0,alias:"punctuation"},escape:/\\(?:u(?:[a-fA-F\d]{4}|\{[a-fA-F\d]+\})|[pP]\{[=\w-]+\}|[^\r\nupP])/,punctuation:/[\[\]]/}},action:{pattern:/\{(?:[^{}]|\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*\}/,greedy:!0,inside:{content:{pattern:/(\{)[\s\S]+(?=\})/,lookbehind:!0},punctuation:/[{}]/}},command:{pattern:/(->\s*(?!\s))(?:\s*(?:,\s*)?\b[a-z]\w*(?:\s*\([^()\r\n]*\))?)+(?=\s*;)/i,lookbehind:!0,inside:{function:/\b\w+(?=\s*(?:[,(]|$))/,punctuation:/[,()]/}},annotation:{pattern:/@\w+(?:::\w+)*/,alias:"keyword"},label:{pattern:/#[ \t]*\w+/,alias:"punctuation"},keyword:/\b(?:catch|channels|finally|fragment|grammar|import|lexer|locals|mode|options|parser|returns|throws|tokens)\b/,definition:[{pattern:/\b[a-z]\w*(?=\s*:)/,alias:["rule","class-name"]},{pattern:/\b[A-Z]\w*(?=\s*:)/,alias:["token","constant"]}],constant:/\b[A-Z][A-Z_]*\b/,operator:/\.\.|->|[|~]|[*+?]\??/,punctuation:/[;:()=]/},n.languages.g4=n.languages.antlr4}wA.displayName="apacheconf";wA.aliases=[];function wA(n){n.languages.apacheconf={comment:/#.*/,"directive-inline":{pattern:/(^[\t ]*)\b(?:AcceptFilter|AcceptPathInfo|AccessFileName|Action|Add(?:Alt|AltByEncoding|AltByType|Charset|DefaultCharset|Description|Encoding|Handler|Icon|IconByEncoding|IconByType|InputFilter|Language|ModuleInfo|OutputFilter|OutputFilterByType|Type)|Alias|AliasMatch|Allow(?:CONNECT|EncodedSlashes|Methods|Override|OverrideList)?|Anonymous(?:_LogEmail|_MustGiveEmail|_NoUserID|_VerifyEmail)?|AsyncRequestWorkerFactor|Auth(?:BasicAuthoritative|BasicFake|BasicProvider|BasicUseDigestAlgorithm|DBDUserPWQuery|DBDUserRealmQuery|DBMGroupFile|DBMType|DBMUserFile|Digest(?:Algorithm|Domain|NonceLifetime|Provider|Qop|ShmemSize)|Form(?:Authoritative|Body|DisableNoStore|FakeBasicAuth|Location|LoginRequiredLocation|LoginSuccessLocation|LogoutLocation|Method|Mimetype|Password|Provider|SitePassphrase|Size|Username)|GroupFile|LDAP(?:AuthorizePrefix|BindAuthoritative|BindDN|BindPassword|CharsetConfig|CompareAsUser|CompareDNOnServer|DereferenceAliases|GroupAttribute|GroupAttributeIsDN|InitialBindAsUser|InitialBindPattern|MaxSubGroupDepth|RemoteUserAttribute|RemoteUserIsDN|SearchAsUser|SubGroupAttribute|SubGroupClass|Url)|Merging|Name|nCache(?:Context|Enable|ProvideFor|SOCache|Timeout)|nzFcgiCheckAuthnProvider|nzFcgiDefineProvider|Type|UserFile|zDBDLoginToReferer|zDBDQuery|zDBDRedirectQuery|zDBMType|zSendForbiddenOnFailure)|BalancerGrowth|BalancerInherit|BalancerMember|BalancerPersist|BrowserMatch|BrowserMatchNoCase|BufferedLogs|BufferSize|Cache(?:DefaultExpire|DetailHeader|DirLength|DirLevels|Disable|Enable|File|Header|IgnoreCacheControl|IgnoreHeaders|IgnoreNoLastMod|IgnoreQueryString|IgnoreURLSessionIdentifiers|KeyBaseURL|LastModifiedFactor|Lock|LockMaxAge|LockPath|MaxExpire|MaxFileSize|MinExpire|MinFileSize|NegotiatedDocs|QuickHandler|ReadSize|ReadTime|Root|Socache(?:MaxSize|MaxTime|MinTime|ReadSize|ReadTime)?|StaleOnError|StoreExpired|StoreNoStore|StorePrivate)|CGIDScriptTimeout|CGIMapExtension|CharsetDefault|CharsetOptions|CharsetSourceEnc|CheckCaseOnly|CheckSpelling|ChrootDir|ContentDigest|CookieDomain|CookieExpires|CookieName|CookieStyle|CookieTracking|CoreDumpDirectory|CustomLog|Dav|DavDepthInfinity|DavGenericLockDB|DavLockDB|DavMinTimeout|DBDExptime|DBDInitSQL|DBDKeep|DBDMax|DBDMin|DBDParams|DBDPersist|DBDPrepareSQL|DBDriver|DefaultIcon|DefaultLanguage|DefaultRuntimeDir|DefaultType|Define|Deflate(?:BufferSize|CompressionLevel|FilterNote|InflateLimitRequestBody|InflateRatio(?:Burst|Limit)|MemLevel|WindowSize)|Deny|DirectoryCheckHandler|DirectoryIndex|DirectoryIndexRedirect|DirectorySlash|DocumentRoot|DTracePrivileges|DumpIOInput|DumpIOOutput|EnableExceptionHook|EnableMMAP|EnableSendfile|Error|ErrorDocument|ErrorLog|ErrorLogFormat|Example|ExpiresActive|ExpiresByType|ExpiresDefault|ExtendedStatus|ExtFilterDefine|ExtFilterOptions|FallbackResource|FileETag|FilterChain|FilterDeclare|FilterProtocol|FilterProvider|FilterTrace|ForceLanguagePriority|ForceType|ForensicLog|GprofDir|GracefulShutdownTimeout|Group|Header|HeaderName|Heartbeat(?:Address|Listen|MaxServers|Storage)|HostnameLookups|IdentityCheck|IdentityCheckTimeout|ImapBase|ImapDefault|ImapMenu|Include|IncludeOptional|Index(?:HeadInsert|Ignore|IgnoreReset|Options|OrderDefault|StyleSheet)|InputSed|ISAPI(?:AppendLogToErrors|AppendLogToQuery|CacheFile|FakeAsync|LogNotSupported|ReadAheadBuffer)|KeepAlive|KeepAliveTimeout|KeptBodySize|LanguagePriority|LDAP(?:CacheEntries|CacheTTL|ConnectionPoolTTL|ConnectionTimeout|LibraryDebug|OpCacheEntries|OpCacheTTL|ReferralHopLimit|Referrals|Retries|RetryDelay|SharedCacheFile|SharedCacheSize|Timeout|TrustedClientCert|TrustedGlobalCert|TrustedMode|VerifyServerCert)|Limit(?:InternalRecursion|Request(?:Body|Fields|FieldSize|Line)|XMLRequestBody)|Listen|ListenBackLog|LoadFile|LoadModule|LogFormat|LogLevel|LogMessage|LuaAuthzProvider|LuaCodeCache|Lua(?:Hook(?:AccessChecker|AuthChecker|CheckUserID|Fixups|InsertFilter|Log|MapToStorage|TranslateName|TypeChecker)|Inherit|InputFilter|MapHandler|OutputFilter|PackageCPath|PackagePath|QuickHandler|Root|Scope)|Max(?:ConnectionsPerChild|KeepAliveRequests|MemFree|RangeOverlaps|RangeReversals|Ranges|RequestWorkers|SpareServers|SpareThreads|Threads)|MergeTrailers|MetaDir|MetaFiles|MetaSuffix|MimeMagicFile|MinSpareServers|MinSpareThreads|MMapFile|ModemStandard|ModMimeUsePathInfo|MultiviewsMatch|Mutex|NameVirtualHost|NoProxy|NWSSLTrustedCerts|NWSSLUpgradeable|Options|Order|OutputSed|PassEnv|PidFile|PrivilegesMode|Protocol|ProtocolEcho|Proxy(?:AddHeaders|BadHeader|Block|Domain|ErrorOverride|ExpressDBMFile|ExpressDBMType|ExpressEnable|FtpDirCharset|FtpEscapeWildcards|FtpListOnWildcard|HTML(?:BufSize|CharsetOut|DocType|Enable|Events|Extended|Fixups|Interp|Links|Meta|StripComments|URLMap)|IOBufferSize|MaxForwards|Pass(?:Inherit|InterpolateEnv|Match|Reverse|ReverseCookieDomain|ReverseCookiePath)?|PreserveHost|ReceiveBufferSize|Remote|RemoteMatch|Requests|SCGIInternalRedirect|SCGISendfile|Set|SourceAddress|Status|Timeout|Via)|ReadmeName|ReceiveBufferSize|Redirect|RedirectMatch|RedirectPermanent|RedirectTemp|ReflectorHeader|RemoteIP(?:Header|InternalProxy|InternalProxyList|ProxiesHeader|TrustedProxy|TrustedProxyList)|RemoveCharset|RemoveEncoding|RemoveHandler|RemoveInputFilter|RemoveLanguage|RemoveOutputFilter|RemoveType|RequestHeader|RequestReadTimeout|Require|Rewrite(?:Base|Cond|Engine|Map|Options|Rule)|RLimitCPU|RLimitMEM|RLimitNPROC|Satisfy|ScoreBoardFile|Script(?:Alias|AliasMatch|InterpreterSource|Log|LogBuffer|LogLength|Sock)?|SecureListen|SeeRequestTail|SendBufferSize|Server(?:Admin|Alias|Limit|Name|Path|Root|Signature|Tokens)|Session(?:Cookie(?:Name|Name2|Remove)|Crypto(?:Cipher|Driver|Passphrase|PassphraseFile)|DBD(?:CookieName|CookieName2|CookieRemove|DeleteLabel|InsertLabel|PerUser|SelectLabel|UpdateLabel)|Env|Exclude|Header|Include|MaxAge)?|SetEnv|SetEnvIf|SetEnvIfExpr|SetEnvIfNoCase|SetHandler|SetInputFilter|SetOutputFilter|SSIEndTag|SSIErrorMsg|SSIETag|SSILastModified|SSILegacyExprParser|SSIStartTag|SSITimeFormat|SSIUndefinedEcho|SSL(?:CACertificateFile|CACertificatePath|CADNRequestFile|CADNRequestPath|CARevocationCheck|CARevocationFile|CARevocationPath|CertificateChainFile|CertificateFile|CertificateKeyFile|CipherSuite|Compression|CryptoDevice|Engine|FIPS|HonorCipherOrder|InsecureRenegotiation|OCSP(?:DefaultResponder|Enable|OverrideResponder|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|UseRequestNonce)|OpenSSLConfCmd|Options|PassPhraseDialog|Protocol|Proxy(?:CACertificateFile|CACertificatePath|CARevocation(?:Check|File|Path)|CheckPeer(?:CN|Expire|Name)|CipherSuite|Engine|MachineCertificate(?:ChainFile|File|Path)|Protocol|Verify|VerifyDepth)|RandomSeed|RenegBufferSize|Require|RequireSSL|Session(?:Cache|CacheTimeout|TicketKeyFile|Tickets)|SRPUnknownUserSeed|SRPVerifierFile|Stapling(?:Cache|ErrorCacheTimeout|FakeTryLater|ForceURL|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|ReturnResponderErrors|StandardCacheTimeout)|StrictSNIVHostCheck|UserName|UseStapling|VerifyClient|VerifyDepth)|StartServers|StartThreads|Substitute|Suexec|SuexecUserGroup|ThreadLimit|ThreadsPerChild|ThreadStackSize|TimeOut|TraceEnable|TransferLog|TypesConfig|UnDefine|UndefMacro|UnsetEnv|Use|UseCanonicalName|UseCanonicalPhysicalPort|User|UserDir|VHostCGIMode|VHostCGIPrivs|VHostGroup|VHostPrivs|VHostSecure|VHostUser|Virtual(?:DocumentRoot|ScriptAlias)(?:IP)?|WatchdogInterval|XBitHack|xml2EncAlias|xml2EncDefault|xml2StartParse)\b/im,lookbehind:!0,alias:"property"},"directive-block":{pattern:/<\/?\b(?:Auth[nz]ProviderAlias|Directory|DirectoryMatch|Else|ElseIf|Files|FilesMatch|If|IfDefine|IfModule|IfVersion|Limit|LimitExcept|Location|LocationMatch|Macro|Proxy|Require(?:All|Any|None)|VirtualHost)\b.*>/i,inside:{"directive-block":{pattern:/^<\/?\w+/,inside:{punctuation:/^<\/?/},alias:"tag"},"directive-block-parameter":{pattern:/.*[^>]/,inside:{punctuation:/:/,string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}}},alias:"attr-value"},punctuation:/>/},alias:"tag"},"directive-flags":{pattern:/\[(?:[\w=],?)+\]/,alias:"keyword"},string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}},variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/,regex:/\^?.*\$|\^.*\$?/}}Hg.displayName="sql";Hg.aliases=[];function Hg(n){n.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}}AA.displayName="apex";AA.aliases=[];function AA(n){n.register(cn),n.register(Hg),(function(e){var t=/\b(?:(?:after|before)(?=\s+[a-z])|abstract|activate|and|any|array|as|asc|autonomous|begin|bigdecimal|blob|boolean|break|bulk|by|byte|case|cast|catch|char|class|collect|commit|const|continue|currency|date|datetime|decimal|default|delete|desc|do|double|else|end|enum|exception|exit|export|extends|final|finally|float|for|from|get(?=\s*[{};])|global|goto|group|having|hint|if|implements|import|in|inner|insert|instanceof|int|integer|interface|into|join|like|limit|list|long|loop|map|merge|new|not|null|nulls|number|object|of|on|or|outer|override|package|parallel|pragma|private|protected|public|retrieve|return|rollback|select|set|short|sObject|sort|static|string|super|switch|synchronized|system|testmethod|then|this|throw|time|transaction|transient|trigger|try|undelete|update|upsert|using|virtual|void|webservice|when|where|while|(?:inherited|with|without)\s+sharing)\b/i,r=/\b(?:(?=[a-z_]\w*\s*[<\[])|(?!<keyword>))[A-Z_]\w*(?:\s*\.\s*[A-Z_]\w*)*\b(?:\s*(?:\[\s*\]|<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>))*/.source.replace(/<keyword>/g,function(){return t.source});function i(a){return RegExp(a.replace(/<CLASS-NAME>/g,function(){return r}),"i")}var s={keyword:t,punctuation:/[()\[\]{};,:.<>]/};e.languages.apex={comment:e.languages.clike.comment,string:e.languages.clike.string,sql:{pattern:/((?:[=,({:]|\breturn)\s*)\[[^\[\]]*\]/i,lookbehind:!0,greedy:!0,alias:"language-sql",inside:e.languages.sql},annotation:{pattern:/@\w+\b/,alias:"punctuation"},"class-name":[{pattern:i(/(\b(?:class|enum|extends|implements|instanceof|interface|new|trigger\s+\w+\s+on)\s+)<CLASS-NAME>/.source),lookbehind:!0,inside:s},{pattern:i(/(\(\s*)<CLASS-NAME>(?=\s*\)\s*[\w(])/.source),lookbehind:!0,inside:s},{pattern:i(/<CLASS-NAME>(?=\s*\w+\s*[;=,(){:])/.source),inside:s}],trigger:{pattern:/(\btrigger\s+)\w+\b/i,lookbehind:!0,alias:"class-name"},keyword:t,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/i,number:/(?:\B\.\d+|\b\d+(?:\.\d+|L)?)\b/i,operator:/[!=](?:==?)?|\?\.?|&&|\|\||--|\+\+|[-+*/^&|]=?|:|<<?=?|>{1,3}=?/,punctuation:/[()\[\]{};,.]/}})(n)}RA.displayName="apl";RA.aliases=[];function RA(n){n.languages.apl={comment:/(?:|#[! ]).*$/m,string:{pattern:/'(?:[^'\r\n]|'')*'/,greedy:!0},number:/?(?:\d*\.?\b\d+(?:e[+]?\d+)?||)(?:j?(?:(?:\d+(?:\.\d+)?|\.\d+)(?:e[+]?\d+)?||))?/i,statement:/:[A-Z][a-z][A-Za-z]*\b/,"system-function":{pattern:/[A-Z]+/i,alias:"function"},constant:/[#]/,function:/[-+|?*!<=>~,]/,"monadic-operator":{pattern:/[\\\/&]/,alias:"operator"},"dyadic-operator":{pattern:/[.@]/,alias:"operator"},assignment:{pattern://,alias:"keyword"},punctuation:/[\[;\]()]/,dfn:{pattern:/[{}:]/,alias:"builtin"}}}NA.displayName="applescript";NA.aliases=[];function NA(n){n.languages.applescript={comment:[/\(\*(?:\(\*(?:[^*]|\*(?!\)))*\*\)|(?!\(\*)[\s\S])*?\*\)/,/--.+/,/#.+/],string:/"(?:\\.|[^"\\\r\n])*"/,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e-?\d+)?\b/i,operator:[/[&=*+\-\/^]|[<>]=?/,/\b(?:(?:begin|end|start)s? with|(?:contains?|(?:does not|doesn't) contain)|(?:is|isn't|is not) (?:contained by|in)|(?:(?:is|isn't|is not) )?(?:greater|less) than(?: or equal)?(?: to)?|(?:comes|(?:does not|doesn't) come) (?:after|before)|(?:is|isn't|is not) equal(?: to)?|(?:(?:does not|doesn't) equal|equal to|equals|is not|isn't)|(?:a )?(?:ref(?: to)?|reference to)|(?:and|as|div|mod|not|or))\b/],keyword:/\b(?:about|above|after|against|apart from|around|aside from|at|back|before|beginning|behind|below|beneath|beside|between|but|by|considering|continue|copy|does|eighth|else|end|equal|error|every|exit|false|fifth|first|for|fourth|from|front|get|given|global|if|ignoring|in|instead of|into|is|it|its|last|local|me|middle|my|ninth|of|on|onto|out of|over|prop|property|put|repeat|return|returning|second|set|seventh|since|sixth|some|tell|tenth|that|the|then|third|through|thru|timeout|times|to|transaction|true|try|until|where|while|whose|with|without)\b/,"class-name":/\b(?:POSIX file|RGB color|alias|application|boolean|centimeters|centimetres|class|constant|cubic centimeters|cubic centimetres|cubic feet|cubic inches|cubic meters|cubic metres|cubic yards|date|degrees Celsius|degrees Fahrenheit|degrees Kelvin|feet|file|gallons|grams|inches|integer|kilograms|kilometers|kilometres|list|liters|litres|meters|metres|miles|number|ounces|pounds|quarts|real|record|reference|script|square feet|square kilometers|square kilometres|square meters|square metres|square miles|square yards|text|yards)\b/,punctuation:/[{}():,]/}}CA.displayName="aql";CA.aliases=[];function CA(n){n.languages.aql={comment:/\/\/.*|\/\*[\s\S]*?\*\//,property:{pattern:/([{,]\s*)(?:(?!\d)\w+|(["'`])(?:(?!\2)[^\\\r\n]|\\.)*\2)(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\.)*\1/,greedy:!0},identifier:{pattern:/([`])(?:(?!\1)[^\\\r\n]|\\.)*\1/,greedy:!0},variable:/@@?\w+/,keyword:[{pattern:/(\bWITH\s+)COUNT(?=\s+INTO\b)/i,lookbehind:!0},/\b(?:AGGREGATE|ALL|AND|ANY|ASC|COLLECT|DESC|DISTINCT|FILTER|FOR|GRAPH|IN|INBOUND|INSERT|INTO|K_PATHS|K_SHORTEST_PATHS|LET|LIKE|LIMIT|NONE|NOT|NULL|OR|OUTBOUND|REMOVE|REPLACE|RETURN|SHORTEST_PATH|SORT|UPDATE|UPSERT|WINDOW|WITH)\b/i,{pattern:/(^|[^\w.[])(?:KEEP|PRUNE|SEARCH|TO)\b/i,lookbehind:!0},{pattern:/(^|[^\w.[])(?:CURRENT|NEW|OLD)\b/,lookbehind:!0},{pattern:/\bOPTIONS(?=\s*\{)/i}],function:/\b(?!\d)\w+(?=\s*\()/,boolean:/\b(?:false|true)\b/i,range:{pattern:/\.\./,alias:"operator"},number:[/\b0b[01]+/i,/\b0x[0-9a-f]+/i,/(?:\B\.\d+|\b(?:0|[1-9]\d*)(?:\.\d+)?)(?:e[+-]?\d+)?/i],operator:/\*{2,}|[=!]~|[!=<>]=?|&&|\|\||[-+*/%]/,punctuation:/::|[?.:,;()[\]{}]/}}no.displayName="c";no.aliases=[];function no(n){n.register(cn),n.languages.c=n.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),n.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),n.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},n.languages.c.string],char:n.languages.c.char,comment:n.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:n.languages.c}}}}),n.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete n.languages.c.boolean}Dh.displayName="cpp";Dh.aliases=[];function Dh(n){n.register(no),(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(n)}MA.displayName="arduino";MA.aliases=["ino"];function MA(n){n.register(Dh),n.languages.arduino=n.languages.extend("cpp",{keyword:/\b(?:String|array|bool|boolean|break|byte|case|catch|continue|default|do|double|else|finally|for|function|goto|if|in|instanceof|int|integer|long|loop|new|null|return|setup|string|switch|throw|try|void|while|word)\b/,constant:/\b(?:ANALOG_MESSAGE|DEFAULT|DIGITAL_MESSAGE|EXTERNAL|FIRMATA_STRING|HIGH|INPUT|INPUT_PULLUP|INTERNAL|INTERNAL1V1|INTERNAL2V56|LED_BUILTIN|LOW|OUTPUT|REPORT_ANALOG|REPORT_DIGITAL|SET_PIN_MODE|SYSEX_START|SYSTEM_RESET)\b/,builtin:/\b(?:Audio|BSSID|Bridge|Client|Console|EEPROM|Esplora|EsploraTFT|Ethernet|EthernetClient|EthernetServer|EthernetUDP|File|FileIO|FileSystem|Firmata|GPRS|GSM|GSMBand|GSMClient|GSMModem|GSMPIN|GSMScanner|GSMServer|GSMVoiceCall|GSM_SMS|HttpClient|IPAddress|IRread|Keyboard|KeyboardController|LiquidCrystal|LiquidCrystal_I2C|Mailbox|Mouse|MouseController|PImage|Process|RSSI|RobotControl|RobotMotor|SD|SPI|SSID|Scheduler|Serial|Server|Servo|SoftwareSerial|Stepper|Stream|TFT|Task|USBHost|WiFi|WiFiClient|WiFiServer|WiFiUDP|Wire|YunClient|YunServer|abs|addParameter|analogRead|analogReadResolution|analogReference|analogWrite|analogWriteResolution|answerCall|attach|attachGPRS|attachInterrupt|attached|autoscroll|available|background|beep|begin|beginPacket|beginSD|beginSMS|beginSpeaker|beginTFT|beginTransmission|beginWrite|bit|bitClear|bitRead|bitSet|bitWrite|blink|blinkVersion|buffer|changePIN|checkPIN|checkPUK|checkReg|circle|cityNameRead|cityNameWrite|clear|clearScreen|click|close|compassRead|config|connect|connected|constrain|cos|countryNameRead|countryNameWrite|createChar|cursor|debugPrint|delay|delayMicroseconds|detach|detachInterrupt|digitalRead|digitalWrite|disconnect|display|displayLogos|drawBMP|drawCompass|encryptionType|end|endPacket|endSMS|endTransmission|endWrite|exists|exitValue|fill|find|findUntil|flush|gatewayIP|get|getAsynchronously|getBand|getButton|getCurrentCarrier|getIMEI|getKey|getModifiers|getOemKey|getPINUsed|getResult|getSignalStrength|getSocket|getVoiceCallStatus|getXChange|getYChange|hangCall|height|highByte|home|image|interrupts|isActionDone|isDirectory|isListening|isPIN|isPressed|isValid|keyPressed|keyReleased|keyboardRead|knobRead|leftToRight|line|lineFollowConfig|listen|listenOnLocalhost|loadImage|localIP|lowByte|macAddress|maintain|map|max|messageAvailable|micros|millis|min|mkdir|motorsStop|motorsWrite|mouseDragged|mouseMoved|mousePressed|mouseReleased|move|noAutoscroll|noBlink|noBuffer|noCursor|noDisplay|noFill|noInterrupts|noListenOnLocalhost|noStroke|noTone|onReceive|onRequest|open|openNextFile|overflow|parseCommand|parseFloat|parseInt|parsePacket|pauseMode|peek|pinMode|playFile|playMelody|point|pointTo|position|pow|prepare|press|print|printFirmwareVersion|printVersion|println|process|processInput|pulseIn|put|random|randomSeed|read|readAccelerometer|readBlue|readButton|readBytes|readBytesUntil|readGreen|readJoystickButton|readJoystickSwitch|readJoystickX|readJoystickY|readLightSensor|readMessage|readMicrophone|readNetworks|readRed|readSlider|readString|readStringUntil|readTemperature|ready|rect|release|releaseAll|remoteIP|remoteNumber|remotePort|remove|requestFrom|retrieveCallingNumber|rewindDirectory|rightToLeft|rmdir|robotNameRead|robotNameWrite|run|runAsynchronously|runShellCommand|runShellCommandAsynchronously|running|scanNetworks|scrollDisplayLeft|scrollDisplayRight|seek|sendAnalog|sendDigitalPortPair|sendDigitalPorts|sendString|sendSysex|serialEvent|setBand|setBitOrder|setClockDivider|setCursor|setDNS|setDataMode|setFirmwareVersion|setMode|setPINUsed|setSpeed|setTextSize|setTimeout|shiftIn|shiftOut|shutdown|sin|size|sqrt|startLoop|step|stop|stroke|subnetMask|switchPIN|tan|tempoWrite|text|tone|transfer|tuneWrite|turn|updateIR|userNameRead|userNameWrite|voiceCall|waitContinue|width|write|writeBlue|writeGreen|writeJSON|writeMessage|writeMicroseconds|writeRGB|writeRed|yield)\b/}),n.languages.ino=n.languages.arduino}IA.displayName="arff";IA.aliases=[];function IA(n){n.languages.arff={comment:/%.*/,string:{pattern:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:/@(?:attribute|data|end|relation)\b/i,number:/\b\d+(?:\.\d+)?\b/,punctuation:/[{},]/}}kA.displayName="armasm";kA.aliases=["arm-asm"];function kA(n){n.languages.armasm={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/"(?:[^"\r\n]|"")*"/,greedy:!0,inside:{variable:{pattern:/((?:^|[^$])(?:\${2})*)\$\w+/,lookbehind:!0}}},char:{pattern:/'(?:[^'\r\n]{0,4}|'')'/,greedy:!0},"version-symbol":{pattern:/\|[\w@]+\|/,greedy:!0,alias:"property"},boolean:/\b(?:FALSE|TRUE)\b/,directive:{pattern:/\b(?:ALIAS|ALIGN|AREA|ARM|ASSERT|ATTR|CN|CODE|CODE16|CODE32|COMMON|CP|DATA|DCB|DCD|DCDO|DCDU|DCFD|DCFDU|DCI|DCQ|DCQU|DCW|DCWU|DN|ELIF|ELSE|END|ENDFUNC|ENDIF|ENDP|ENTRY|EQU|EXPORT|EXPORTAS|EXTERN|FIELD|FILL|FN|FUNCTION|GBLA|GBLL|GBLS|GET|GLOBAL|IF|IMPORT|INCBIN|INCLUDE|INFO|KEEP|LCLA|LCLL|LCLS|LTORG|MACRO|MAP|MEND|MEXIT|NOFP|OPT|PRESERVE8|PROC|QN|READONLY|RELOC|REQUIRE|REQUIRE8|RLIST|ROUT|SETA|SETL|SETS|SN|SPACE|SUBT|THUMB|THUMBX|TTL|WEND|WHILE)\b/,alias:"property"},instruction:{pattern:/((?:^|(?:^|[^\\])(?:\r\n?|\n))[ \t]*(?:(?:[A-Z][A-Z0-9_]*[a-z]\w*|[a-z]\w*|\d+)[ \t]+)?)\b[A-Z.]+\b/,lookbehind:!0,alias:"keyword"},variable:/\$\w+/,number:/(?:\b[2-9]_\d+|(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e-?\d+)?|\b0(?:[fd]_|x)[0-9a-f]+|&[0-9a-f]+)\b/i,register:{pattern:/\b(?:r\d|lr)\b/,alias:"symbol"},operator:/<>|<<|>>|&&|\|\||[=!<>/]=?|[+\-*%#?&|^]|:[A-Z]+:/,punctuation:/[()[\],]/},n.languages["arm-asm"]=n.languages.armasm}$_.displayName="bash";$_.aliases=["sh","shell"];function $_(n){(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",r={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},i={bash:r,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:i},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:r}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:i},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:i.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:i.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},r.inside=e.languages.bash;for(var s=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],a=i.variable[1].inside,o=0;o<s.length;o++)a[s[o]]=e.languages.bash[s[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(n)}H_.displayName="yaml";H_.aliases=["yml"];function H_(n){(function(e){var t=/[*&][^\s[\]{},]+/,r=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,i="(?:"+r.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+r.source+")?)",s=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),a=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(l,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return i}).replace(/<<value>>/g,function(){return l});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return i})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return i}).replace(/<<key>>/g,function(){return"(?:"+s+"|"+a+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(a),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:r,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(n)}LA.displayName="markdown";LA.aliases=["md"];function LA(n){n.register(ni),(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(o){return o=o.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+o+")")}var i=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return i}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(i),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(i),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(o){["url","bold","italic","strike","code-snippet"].forEach(function(l){o!==l&&(e.languages.markdown[o].inside.content.inside[l]=e.languages.markdown[l])})}),e.hooks.add("after-tokenize",function(o){if(o.language!=="markdown"&&o.language!=="md")return;function l(u){if(!(!u||typeof u=="string"))for(var c=0,h=u.length;c<h;c++){var f=u[c];if(f.type!=="code"){l(f.content);continue}var g=f.content[1],m=f.content[3];if(g&&m&&g.type==="code-language"&&m.type==="code-block"&&typeof g.content=="string"){var v=g.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");v=(/[a-z][\w-]*/i.exec(v)||[""])[0].toLowerCase();var _="language-"+v;m.alias?typeof m.alias=="string"?m.alias=[m.alias,_]:m.alias.push(_):m.alias=[_]}}}l(o.tokens)}),e.hooks.add("wrap",function(o){if(o.type==="code-block"){for(var l="",u=0,c=o.classes.length;u<c;u++){var h=o.classes[u],f=/language-(.+)/.exec(h);if(f){l=f[1];break}}var g=e.languages[l];if(g)o.content=e.highlight(o.content.value,g,l);else if(l&&l!=="none"&&e.plugins.autoloader){var m="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);o.attributes.id=m,e.plugins.autoloader.loadLanguages(l,function(){var v=document.getElementById(m);v&&(v.innerHTML=e.highlight(v.textContent,e.languages[l],l))})}}}),RegExp(e.languages.markup.tag.pattern.source,"gi"),e.languages.md=e.languages.markdown})(n)}DA.displayName="arturo";DA.aliases=["art"];function DA(n){(function(e){var t=function(r,i){return{pattern:RegExp(/\{!/.source+"(?:"+(i||r)+")"+/$[\s\S]*\}/.source,"m"),greedy:!0,inside:{embedded:{pattern:/(^\{!\w+\b)[\s\S]+(?=\}$)/,lookbehind:!0,alias:"language-"+r,inside:e.languages[r]},string:/[\s\S]+/}}};e.languages.arturo={comment:{pattern:/;.*/,greedy:!0},character:{pattern:/`.`/,alias:"char",greedy:!0},number:{pattern:/\b\d+(?:\.\d+(?:\.\d+(?:-[\w+-]+)?)?)?\b/},string:{pattern:/"(?:[^"\\\r\n]|\\.)*"/,greedy:!0},regex:{pattern:/\{\/.*?\/\}/,greedy:!0},"html-string":t("html"),"css-string":t("css"),"js-string":t("js"),"md-string":t("md"),"sql-string":t("sql"),"sh-string":t("shell","sh"),multistring:{pattern:/.*|\{:[\s\S]*?:\}|\{[\s\S]*?\}|^-{6}$[\s\S]*/m,alias:"string",greedy:!0},label:{pattern:/\w+\b\??:/,alias:"property"},literal:{pattern:/'(?:\w+\b\??:?)/,alias:"constant"},type:{pattern:/:(?:\w+\b\??:?)/,alias:"class-name"},color:/#\w+/,predicate:{pattern:/\b(?:all|and|any|ascii|attr|attribute|attributeLabel|binary|block|char|contains|database|date|dictionary|empty|equal|even|every|exists|false|floating|function|greater|greaterOrEqual|if|in|inline|integer|is|key|label|leap|less|lessOrEqual|literal|logical|lower|nand|negative|nor|not|notEqual|null|numeric|odd|or|path|pathLabel|positive|prefix|prime|regex|same|set|some|sorted|standalone|string|subset|suffix|superset|symbol|symbolLiteral|true|try|type|unless|upper|when|whitespace|word|xnor|xor|zero)\?/,alias:"keyword"},"builtin-function":{pattern:/\b(?:abs|acos|acosh|acsec|acsech|actan|actanh|add|after|alert|alias|and|angle|append|arg|args|arity|array|as|asec|asech|asin|asinh|atan|atan2|atanh|attr|attrs|average|before|benchmark|blend|break|call|capitalize|case|ceil|chop|clear|clip|close|color|combine|conj|continue|copy|cos|cosh|crc|csec|csech|ctan|ctanh|cursor|darken|dec|decode|define|delete|desaturate|deviation|dialog|dictionary|difference|digest|digits|div|do|download|drop|dup|e|else|empty|encode|ensure|env|escape|execute|exit|exp|extend|extract|factors|fdiv|filter|first|flatten|floor|fold|from|function|gamma|gcd|get|goto|hash|hypot|if|inc|indent|index|infinity|info|input|insert|inspect|intersection|invert|jaro|join|keys|kurtosis|last|let|levenshtein|lighten|list|ln|log|loop|lower|mail|map|match|max|median|min|mod|module|mul|nand|neg|new|nor|normalize|not|now|null|open|or|outdent|pad|palette|panic|path|pause|permissions|permutate|pi|pop|popup|pow|powerset|powmod|prefix|print|prints|process|product|query|random|range|read|relative|remove|rename|render|repeat|replace|request|return|reverse|round|sample|saturate|script|sec|sech|select|serve|set|shl|shr|shuffle|sin|sinh|size|skewness|slice|sort|spin|split|sqrt|squeeze|stack|strip|sub|suffix|sum|switch|symbols|symlink|sys|take|tan|tanh|terminal|terminate|to|truncate|try|type|unclip|union|unique|unless|until|unzip|upper|values|var|variance|volume|webview|while|with|wordwrap|write|xnor|xor|zip)\b/,alias:"keyword"},sugar:{pattern:/->|=>|\||::/,alias:"operator"},punctuation:/[()[\],]/,symbol:{pattern:/<:|-:||@|#|\+|\||\*|\$|---|-|%|\/|\.\.|\^|~|=|<|>|\\/},boolean:{pattern:/\b(?:false|maybe|true)\b/}},e.languages.art=e.languages.arturo})(n)}OA.displayName="asciidoc";OA.aliases=["adoc"];function OA(n){(function(e){var t={pattern:/(^[ \t]*)\[(?!\[)(?:(["'$`])(?:(?!\2)[^\\]|\\.)*\2|\[(?:[^\[\]\\]|\\.)*\]|[^\[\]\\"'$`]|\\.)*\]/m,lookbehind:!0,inside:{quoted:{pattern:/([$`])(?:(?!\1)[^\\]|\\.)*\1/,inside:{punctuation:/^[$`]|[$`]$/}},interpreted:{pattern:/'(?:[^'\\]|\\.)*'/,inside:{punctuation:/^'|'$/}},string:/"(?:[^"\\]|\\.)*"/,variable:/\w+(?==)/,punctuation:/^\[|\]$|,/,operator:/=/,"attr-value":/(?!^\s+$).+/}},r=e.languages.asciidoc={"comment-block":{pattern:/^(\/{4,})$[\s\S]*?^\1/m,alias:"comment"},table:{pattern:/^\|={3,}(?:(?:\r?\n|\r(?!\n)).*)*?(?:\r?\n|\r)\|={3,}$/m,inside:{specifiers:{pattern:/(?:(?:(?:\d+(?:\.\d+)?|\.\d+)[+*](?:[<^>](?:\.[<^>])?|\.[<^>])?|[<^>](?:\.[<^>])?|\.[<^>])[a-z]*|[a-z]+)(?=\|)/,alias:"attr-value"},punctuation:{pattern:/(^|[^\\])[|!]=*/,lookbehind:!0}}},"passthrough-block":{pattern:/^(\+{4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^\++|\++$/}},"literal-block":{pattern:/^(-{4,}|\.{4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^(?:-+|\.+)|(?:-+|\.+)$/}},"other-block":{pattern:/^(--|\*{4,}|_{4,}|={4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^(?:-+|\*+|_+|=+)|(?:-+|\*+|_+|=+)$/}},"list-punctuation":{pattern:/(^[ \t]*)(?:-|\*{1,5}|\.{1,5}|(?:[a-z]|\d+)\.|[xvi]+\))(?= )/im,lookbehind:!0,alias:"punctuation"},"list-label":{pattern:/(^[ \t]*)[a-z\d].+(?::{2,4}|;;)(?=\s)/im,lookbehind:!0,alias:"symbol"},"indented-block":{pattern:/((\r?\n|\r)\2)([ \t]+)\S.*(?:(?:\r?\n|\r)\3.+)*(?=\2{2}|$)/,lookbehind:!0},comment:/^\/\/.*/m,title:{pattern:/^.+(?:\r?\n|\r)(?:={3,}|-{3,}|~{3,}|\^{3,}|\+{3,})$|^={1,5} .+|^\.(?![\s.]).*/m,alias:"important",inside:{punctuation:/^(?:\.|=+)|(?:=+|-+|~+|\^+|\++)$/}},"attribute-entry":{pattern:/^:[^:\r\n]+:(?: .*?(?: \+(?:\r?\n|\r).*?)*)?$/m,alias:"tag"},attributes:t,hr:{pattern:/^'{3,}$/m,alias:"punctuation"},"page-break":{pattern:/^<{3,}$/m,alias:"punctuation"},admonition:{pattern:/^(?:CAUTION|IMPORTANT|NOTE|TIP|WARNING):/m,alias:"keyword"},callout:[{pattern:/(^[ \t]*)<?\d*>/m,lookbehind:!0,alias:"symbol"},{pattern:/<\d+>/,alias:"symbol"}],macro:{pattern:/\b[a-z\d][a-z\d-]*::?(?:[^\s\[\]]*\[(?:[^\]\\"']|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,inside:{function:/^[a-z\d-]+(?=:)/,punctuation:/^::?/,attributes:{pattern:/(?:\[(?:[^\]\\"']|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,inside:t.inside}}},inline:{pattern:/(^|[^\\])(?:(?:\B\[(?:[^\]\\"']|(["'])(?:(?!\2)[^\\]|\\.)*\2|\\.)*\])?(?:\b_(?!\s)(?: _|[^_\\\r\n]|\\.)+(?:(?:\r?\n|\r)(?: _|[^_\\\r\n]|\\.)+)*_\b|\B``(?!\s).+?(?:(?:\r?\n|\r).+?)*''\B|\B`(?!\s)(?:[^`'\s]|\s+\S)+['`]\B|\B(['*+#])(?!\s)(?: \3|(?!\3)[^\\\r\n]|\\.)+(?:(?:\r?\n|\r)(?: \3|(?!\3)[^\\\r\n]|\\.)+)*\3\B)|(?:\[(?:[^\]\\"']|(["'])(?:(?!\4)[^\\]|\\.)*\4|\\.)*\])?(?:(__|\*\*|\+\+\+?|##|\$\$|[~^]).+?(?:(?:\r?\n|\r).+?)*\5|\{[^}\r\n]+\}|\[\[\[?.+?(?:(?:\r?\n|\r).+?)*\]?\]\]|<<.+?(?:(?:\r?\n|\r).+?)*>>|\(\(\(?.+?(?:(?:\r?\n|\r).+?)*\)?\)\)))/m,lookbehind:!0,inside:{attributes:t,url:{pattern:/^(?:\[\[\[?.+?\]?\]\]|<<.+?>>)$/,inside:{punctuation:/^(?:\[\[\[?|<<)|(?:\]\]\]?|>>)$/}},"attribute-ref":{pattern:/^\{.+\}$/,inside:{variable:{pattern:/(^\{)[a-z\d,+_-]+/,lookbehind:!0},operator:/^[=?!#%@$]|!(?=[:}])/,punctuation:/^\{|\}$|::?/}},italic:{pattern:/^(['_])[\s\S]+\1$/,inside:{punctuation:/^(?:''?|__?)|(?:''?|__?)$/}},bold:{pattern:/^\*[\s\S]+\*$/,inside:{punctuation:/^\*\*?|\*\*?$/}},punctuation:/^(?:``?|\+{1,3}|##?|\$\$|[~^]|\(\(\(?)|(?:''?|\+{1,3}|##?|\$\$|[~^`]|\)?\)\))$/}},replacement:{pattern:/\((?:C|R|TM)\)/,alias:"builtin"},entity:/&#?[\da-z]{1,8};/i,"line-continuation":{pattern:/(^| )\+$/m,lookbehind:!0,alias:"punctuation"}};function i(s){s=s.split(" ");for(var a={},o=0,l=s.length;o<l;o++)a[s[o]]=r[s[o]];return a}t.inside.interpreted.inside.rest=i("macro inline replacement entity"),r["passthrough-block"].inside.rest=i("macro"),r["literal-block"].inside.rest=i("callout"),r.table.inside.rest=i("comment-block passthrough-block literal-block other-block list-punctuation indented-block comment title attribute-entry attributes hr page-break admonition list-label callout macro inline replacement entity line-continuation"),r["other-block"].inside.rest=i("table list-punctuation indented-block comment attribute-entry attributes hr page-break admonition list-label macro inline replacement entity line-continuation"),r.title.inside.rest=i("macro inline replacement entity"),e.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.value.replace(/&amp;/,"&"))}),e.languages.adoc=e.languages.asciidoc})(n)}Oh.displayName="csharp";Oh.aliases=["cs","dotnet"];function Oh(n){n.register(cn),(function(e){function t(D,U){return D.replace(/<<(\d+)>>/g,function(ne,B){return"(?:"+U[+B]+")"})}function r(D,U,ne){return RegExp(t(D,U),"")}function i(D,U){for(var ne=0;ne<U;ne++)D=D.replace(/<<self>>/g,function(){return"(?:"+D+")"});return D.replace(/<<self>>/g,"[^\\s\\S]")}var s={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function a(D){return"\\b(?:"+D.trim().replace(/ /g,"|")+")\\b"}var o=a(s.typeDeclaration),l=RegExp(a(s.type+" "+s.typeDeclaration+" "+s.contextual+" "+s.other)),u=a(s.typeDeclaration+" "+s.contextual+" "+s.other),c=a(s.type+" "+s.typeDeclaration+" "+s.other),h=i(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),f=i(/\((?:[^()]|<<self>>)*\)/.source,2),g=/@?\b[A-Za-z_]\w*\b/.source,m=t(/<<0>>(?:\s*<<1>>)?/.source,[g,h]),v=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[u,m]),_=/\[\s*(?:,\s*)*\]/.source,b=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[v,_]),S=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[h,f,_]),E=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[S]),A=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[E,v,_]),R={keyword:l,punctuation:/[<>()?,.:[\]]/},w=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,M=/"(?:\\.|[^\\"\r\n])*"/.source,I=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:r(/(^|[^$\\])<<0>>/.source,[I]),lookbehind:!0,greedy:!0},{pattern:r(/(^|[^@$\\])<<0>>/.source,[M]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:r(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[v]),lookbehind:!0,inside:R},{pattern:r(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[g,A]),lookbehind:!0,inside:R},{pattern:r(/(\busing\s+)<<0>>(?=\s*=)/.source,[g]),lookbehind:!0},{pattern:r(/(\b<<0>>\s+)<<1>>/.source,[o,m]),lookbehind:!0,inside:R},{pattern:r(/(\bcatch\s*\(\s*)<<0>>/.source,[v]),lookbehind:!0,inside:R},{pattern:r(/(\bwhere\s+)<<0>>/.source,[g]),lookbehind:!0},{pattern:r(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[b]),lookbehind:!0,inside:R},{pattern:r(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[A,c,g]),inside:R}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:r(/([(,]\s*)<<0>>(?=\s*:)/.source,[g]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:r(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[g]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:r(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[f]),lookbehind:!0,alias:"class-name",inside:R},"return-type":{pattern:r(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[A,v]),inside:R,alias:"class-name"},"constructor-invocation":{pattern:r(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[A]),lookbehind:!0,inside:R,alias:"class-name"},"generic-method":{pattern:r(/<<0>>\s*<<1>>(?=\s*\()/.source,[g,h]),inside:{function:r(/^<<0>>/.source,[g]),generic:{pattern:RegExp(h),alias:"class-name",inside:R}}},"type-list":{pattern:r(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[o,m,g,A,l.source,f,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:r(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[m,f]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:l,"class-name":{pattern:RegExp(A),greedy:!0,inside:R},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var C=M+"|"+w,k=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[C]),O=i(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[k]),2),z=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,W=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[v,O]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:r(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[z,W]),lookbehind:!0,greedy:!0,inside:{target:{pattern:r(/^<<0>>(?=\s*:)/.source,[z]),alias:"keyword"},"attribute-arguments":{pattern:r(/\(<<0>>*\)/.source,[O]),inside:e.languages.csharp},"class-name":{pattern:RegExp(v),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var q=/:[^}\r\n]+/.source,X=i(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[k]),2),Q=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[X,q]),H=i(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[C]),2),G=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[H,q]);function re(D,U){return{interpolation:{pattern:r(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[D]),lookbehind:!0,inside:{"format-string":{pattern:r(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[U,q]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:r(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Q]),lookbehind:!0,greedy:!0,inside:re(Q,X)},{pattern:r(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[G]),lookbehind:!0,greedy:!0,inside:re(G,H)}],char:{pattern:RegExp(w),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp})(n)}PA.displayName="aspnet";PA.aliases=[];function PA(n){n.register(Oh),n.register(ni),n.languages.aspnet=n.languages.extend("markup",{"page-directive":{pattern:/<%\s*@.*%>/,alias:"tag",inside:{"page-directive":{pattern:/<%\s*@\s*(?:Assembly|Control|Implements|Import|Master(?:Type)?|OutputCache|Page|PreviousPageType|Reference|Register)?|%>/i,alias:"tag"},rest:n.languages.markup.tag.inside}},directive:{pattern:/<%.*%>/,alias:"tag",inside:{directive:{pattern:/<%\s*?[$=%#:]{0,2}|%>/,alias:"tag"},rest:n.languages.csharp}}}),n.languages.aspnet.tag.pattern=/<(?!%)\/?[^\s>\/]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/,n.languages.insertBefore("inside","punctuation",{directive:n.languages.aspnet.directive},n.languages.aspnet.tag.inside["attr-value"]),n.languages.insertBefore("aspnet","comment",{"asp-comment":{pattern:/<%--[\s\S]*?--%>/,alias:["asp","comment"]}}),n.languages.insertBefore("aspnet",n.languages.javascript?"script":"tag",{"asp-script":{pattern:/(<script(?=.*runat=['"]?server\b)[^>]*>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,alias:["asp","script"],inside:n.languages.csharp||{}}})}FA.displayName="asm6502";FA.aliases=[];function FA(n){n.languages.asm6502={comment:/;.*/,directive:{pattern:/\.\w+(?= )/,alias:"property"},string:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,"op-code":{pattern:/\b(?:ADC|AND|ASL|BCC|BCS|BEQ|BIT|BMI|BNE|BPL|BRK|BVC|BVS|CLC|CLD|CLI|CLV|CMP|CPX|CPY|DEC|DEX|DEY|EOR|INC|INX|INY|JMP|JSR|LDA|LDX|LDY|LSR|NOP|ORA|PHA|PHP|PLA|PLP|ROL|ROR|RTI|RTS|SBC|SEC|SED|SEI|STA|STX|STY|TAX|TAY|TSX|TXA|TXS|TYA|adc|and|asl|bcc|bcs|beq|bit|bmi|bne|bpl|brk|bvc|bvs|clc|cld|cli|clv|cmp|cpx|cpy|dec|dex|dey|eor|inc|inx|iny|jmp|jsr|lda|ldx|ldy|lsr|nop|ora|pha|php|pla|plp|rol|ror|rti|rts|sbc|sec|sed|sei|sta|stx|sty|tax|tay|tsx|txa|txs|tya)\b/,alias:"keyword"},"hex-number":{pattern:/#?\$[\da-f]{1,4}\b/i,alias:"number"},"binary-number":{pattern:/#?%[01]+\b/,alias:"number"},"decimal-number":{pattern:/#?\b\d+\b/,alias:"number"},register:{pattern:/\b[xya]\b/i,alias:"variable"},punctuation:/[(),:]/}}UA.displayName="asmatmel";UA.aliases=[];function UA(n){n.languages.asmatmel={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},constant:/\b(?:PORT[A-Z]|DDR[A-Z]|(?:DD|P)[A-Z](?:\d|[0-2]\d|3[01]))\b/,directive:{pattern:/\.\w+(?= )/,alias:"property"},"r-register":{pattern:/\br(?:\d|[12]\d|3[01])\b/,alias:"variable"},"op-code":{pattern:/\b(?:ADC|ADD|ADIW|AND|ANDI|ASR|BCLR|BLD|BRBC|BRBS|BRCC|BRCS|BREAK|BREQ|BRGE|BRHC|BRHS|BRID|BRIE|BRLO|BRLT|BRMI|BRNE|BRPL|BRSH|BRTC|BRTS|BRVC|BRVS|BSET|BST|CALL|CBI|CBR|CLC|CLH|CLI|CLN|CLR|CLS|CLT|CLV|CLZ|COM|CP|CPC|CPI|CPSE|DEC|DES|EICALL|EIJMP|ELPM|EOR|FMUL|FMULS|FMULSU|ICALL|IJMP|IN|INC|JMP|LAC|LAS|LAT|LD|LD[A-Za-z0-9]|LPM|LSL|LSR|MOV|MOVW|MUL|MULS|MULSU|NEG|NOP|OR|ORI|OUT|POP|PUSH|RCALL|RET|RETI|RJMP|ROL|ROR|SBC|SBCI|SBI|SBIC|SBIS|SBIW|SBR|SBRC|SBRS|SEC|SEH|SEI|SEN|SER|SES|SET|SEV|SEZ|SLEEP|SPM|ST|ST[A-Z0-9]|SUB|SUBI|SWAP|TST|WDR|XCH|adc|add|adiw|and|andi|asr|bclr|bld|brbc|brbs|brcc|brcs|break|breq|brge|brhc|brhs|brid|brie|brlo|brlt|brmi|brne|brpl|brsh|brtc|brts|brvc|brvs|bset|bst|call|cbi|cbr|clc|clh|cli|cln|clr|cls|clt|clv|clz|com|cp|cpc|cpi|cpse|dec|des|eicall|eijmp|elpm|eor|fmul|fmuls|fmulsu|icall|ijmp|in|inc|jmp|lac|las|lat|ld|ld[a-z0-9]|lpm|lsl|lsr|mov|movw|mul|muls|mulsu|neg|nop|or|ori|out|pop|push|rcall|ret|reti|rjmp|rol|ror|sbc|sbci|sbi|sbic|sbis|sbiw|sbr|sbrc|sbrs|sec|seh|sei|sen|ser|ses|set|sev|sez|sleep|spm|st|st[a-zA-Z0-9]|sub|subi|swap|tst|wdr|xch)\b/,alias:"keyword"},"hex-number":{pattern:/#?\$[\da-f]{2,4}\b/i,alias:"number"},"binary-number":{pattern:/#?%[01]+\b/,alias:"number"},"decimal-number":{pattern:/#?\b\d+\b/,alias:"number"},register:{pattern:/\b[acznvshtixy]\b/i,alias:"variable"},operator:/>>=?|<<=?|&[&=]?|\|[\|=]?|[-+*/%^!=<>?]=?/,punctuation:/[(),:]/}}BA.displayName="autohotkey";BA.aliases=[];function BA(n){n.languages.autohotkey={comment:[{pattern:/(^|\s);.*/,lookbehind:!0},{pattern:/(^[\t ]*)\/\*(?:[\r\n](?![ \t]*\*\/)|[^\r\n])*(?:[\r\n][ \t]*\*\/)?/m,lookbehind:!0,greedy:!0}],tag:{pattern:/^([ \t]*)[^\s,`":]+(?=:[ \t]*$)/m,lookbehind:!0},string:/"(?:[^"\n\r]|"")*"/,variable:/%\w+%/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/\?|\/\/?=?|:=|\|[=|]?|&[=&]?|\+[=+]?|-[=-]?|\*[=*]?|<(?:<=?|>|=)?|>>?=?|[.^!=~]=?|\b(?:AND|NOT|OR)\b/,boolean:/\b(?:false|true)\b/,command:{pattern:/\b(?:AutoTrim|BlockInput|Break|Click|ClipWait|Continue|Control|ControlClick|ControlFocus|ControlGet|ControlGetFocus|ControlGetPos|ControlGetText|ControlMove|ControlSend|ControlSendRaw|ControlSetText|CoordMode|Critical|DetectHiddenText|DetectHiddenWindows|Drive|DriveGet|DriveSpaceFree|EnvAdd|EnvDiv|EnvGet|EnvMult|EnvSet|EnvSub|EnvUpdate|Exit|ExitApp|FileAppend|FileCopy|FileCopyDir|FileCreateDir|FileCreateShortcut|FileDelete|FileEncoding|FileGetAttrib|FileGetShortcut|FileGetSize|FileGetTime|FileGetVersion|FileInstall|FileMove|FileMoveDir|FileRead|FileReadLine|FileRecycle|FileRecycleEmpty|FileRemoveDir|FileSelectFile|FileSelectFolder|FileSetAttrib|FileSetTime|FormatTime|GetKeyState|Gosub|Goto|GroupActivate|GroupAdd|GroupClose|GroupDeactivate|Gui|GuiControl|GuiControlGet|Hotkey|ImageSearch|IniDelete|IniRead|IniWrite|Input|InputBox|KeyWait|ListHotkeys|ListLines|ListVars|Loop|Menu|MouseClick|MouseClickDrag|MouseGetPos|MouseMove|MsgBox|OnExit|OutputDebug|Pause|PixelGetColor|PixelSearch|PostMessage|Process|Progress|Random|RegDelete|RegRead|RegWrite|Reload|Repeat|Return|Run|RunAs|RunWait|Send|SendEvent|SendInput|SendMessage|SendMode|SendPlay|SendRaw|SetBatchLines|SetCapslockState|SetControlDelay|SetDefaultMouseSpeed|SetEnv|SetFormat|SetKeyDelay|SetMouseDelay|SetNumlockState|SetRegView|SetScrollLockState|SetStoreCapslockMode|SetTimer|SetTitleMatchMode|SetWinDelay|SetWorkingDir|Shutdown|Sleep|Sort|SoundBeep|SoundGet|SoundGetWaveVolume|SoundPlay|SoundSet|SoundSetWaveVolume|SplashImage|SplashTextOff|SplashTextOn|SplitPath|StatusBarGetText|StatusBarWait|StringCaseSense|StringGetPos|StringLeft|StringLen|StringLower|StringMid|StringReplace|StringRight|StringSplit|StringTrimLeft|StringTrimRight|StringUpper|Suspend|SysGet|Thread|ToolTip|Transform|TrayTip|URLDownloadToFile|WinActivate|WinActivateBottom|WinClose|WinGet|WinGetActiveStats|WinGetActiveTitle|WinGetClass|WinGetPos|WinGetText|WinGetTitle|WinHide|WinKill|WinMaximize|WinMenuSelectItem|WinMinimize|WinMinimizeAll|WinMinimizeAllUndo|WinMove|WinRestore|WinSet|WinSetTitle|WinShow|WinWait|WinWaitActive|WinWaitClose|WinWaitNotActive)\b/i,alias:"selector"},constant:/\b(?:a_ahkpath|a_ahkversion|a_appdata|a_appdatacommon|a_autotrim|a_batchlines|a_caretx|a_carety|a_computername|a_controldelay|a_cursor|a_dd|a_ddd|a_dddd|a_defaultmousespeed|a_desktop|a_desktopcommon|a_detecthiddentext|a_detecthiddenwindows|a_endchar|a_eventinfo|a_exitreason|a_fileencoding|a_formatfloat|a_formatinteger|a_gui|a_guicontrol|a_guicontrolevent|a_guievent|a_guiheight|a_guiwidth|a_guix|a_guiy|a_hour|a_iconfile|a_iconhidden|a_iconnumber|a_icontip|a_index|a_ipaddress1|a_ipaddress2|a_ipaddress3|a_ipaddress4|a_is64bitos|a_isadmin|a_iscompiled|a_iscritical|a_ispaused|a_issuspended|a_isunicode|a_keydelay|a_language|a_lasterror|a_linefile|a_linenumber|a_loopfield|a_loopfileattrib|a_loopfiledir|a_loopfileext|a_loopfilefullpath|a_loopfilelongpath|a_loopfilename|a_loopfileshortname|a_loopfileshortpath|a_loopfilesize|a_loopfilesizekb|a_loopfilesizemb|a_loopfiletimeaccessed|a_loopfiletimecreated|a_loopfiletimemodified|a_loopreadline|a_loopregkey|a_loopregname|a_loopregsubkey|a_loopregtimemodified|a_loopregtype|a_mday|a_min|a_mm|a_mmm|a_mmmm|a_mon|a_mousedelay|a_msec|a_mydocuments|a_now|a_nowutc|a_numbatchlines|a_ostype|a_osversion|a_priorhotkey|a_priorkey|a_programfiles|a_programs|a_programscommon|a_ptrsize|a_regview|a_screendpi|a_screenheight|a_screenwidth|a_scriptdir|a_scriptfullpath|a_scripthwnd|a_scriptname|a_sec|a_space|a_startmenu|a_startmenucommon|a_startup|a_startupcommon|a_stringcasesense|a_tab|a_temp|a_thisfunc|a_thishotkey|a_thislabel|a_thismenu|a_thismenuitem|a_thismenuitempos|a_tickcount|a_timeidle|a_timeidlephysical|a_timesincepriorhotkey|a_timesincethishotkey|a_titlematchmode|a_titlematchmodespeed|a_username|a_wday|a_windelay|a_windir|a_workingdir|a_yday|a_year|a_yweek|a_yyyy|clipboard|clipboardall|comspec|errorlevel|programfiles)\b/i,builtin:/\b(?:abs|acos|asc|asin|atan|ceil|chr|class|comobjactive|comobjarray|comobjconnect|comobjcreate|comobjerror|comobjflags|comobjget|comobjquery|comobjtype|comobjvalue|cos|dllcall|exp|fileexist|Fileopen|floor|format|il_add|il_create|il_destroy|instr|isfunc|islabel|IsObject|ln|log|ltrim|lv_add|lv_delete|lv_deletecol|lv_getcount|lv_getnext|lv_gettext|lv_insert|lv_insertcol|lv_modify|lv_modifycol|lv_setimagelist|mod|numget|numput|onmessage|regexmatch|regexreplace|registercallback|round|rtrim|sb_seticon|sb_setparts|sb_settext|sin|sqrt|strlen|strreplace|strsplit|substr|tan|tv_add|tv_delete|tv_get|tv_getchild|tv_getcount|tv_getnext|tv_getparent|tv_getprev|tv_getselection|tv_gettext|tv_modify|varsetcapacity|winactive|winexist|__Call|__Get|__New|__Set)\b/i,symbol:/\b(?:alt|altdown|altup|appskey|backspace|browser_back|browser_favorites|browser_forward|browser_home|browser_refresh|browser_search|browser_stop|bs|capslock|ctrl|ctrlbreak|ctrldown|ctrlup|del|delete|down|end|enter|esc|escape|f1|f10|f11|f12|f13|f14|f15|f16|f17|f18|f19|f2|f20|f21|f22|f23|f24|f3|f4|f5|f6|f7|f8|f9|home|ins|insert|joy1|joy10|joy11|joy12|joy13|joy14|joy15|joy16|joy17|joy18|joy19|joy2|joy20|joy21|joy22|joy23|joy24|joy25|joy26|joy27|joy28|joy29|joy3|joy30|joy31|joy32|joy4|joy5|joy6|joy7|joy8|joy9|joyaxes|joybuttons|joyinfo|joyname|joypov|joyr|joyu|joyv|joyx|joyy|joyz|lalt|launch_app1|launch_app2|launch_mail|launch_media|lbutton|lcontrol|lctrl|left|lshift|lwin|lwindown|lwinup|mbutton|media_next|media_play_pause|media_prev|media_stop|numlock|numpad0|numpad1|numpad2|numpad3|numpad4|numpad5|numpad6|numpad7|numpad8|numpad9|numpadadd|numpadclear|numpaddel|numpaddiv|numpaddot|numpaddown|numpadend|numpadenter|numpadhome|numpadins|numpadleft|numpadmult|numpadpgdn|numpadpgup|numpadright|numpadsub|numpadup|pgdn|pgup|printscreen|ralt|rbutton|rcontrol|rctrl|right|rshift|rwin|rwindown|rwinup|scrolllock|shift|shiftdown|shiftup|space|tab|up|volume_down|volume_mute|volume_up|wheeldown|wheelleft|wheelright|wheelup|xbutton1|xbutton2)\b/i,directive:{pattern:/#[a-z]+\b/i,alias:"important"},keyword:/\b(?:Abort|AboveNormal|Add|ahk_class|ahk_exe|ahk_group|ahk_id|ahk_pid|All|Alnum|Alpha|AltSubmit|AltTab|AltTabAndMenu|AltTabMenu|AltTabMenuDismiss|AlwaysOnTop|AutoSize|Background|BackgroundTrans|BelowNormal|between|BitAnd|BitNot|BitOr|BitShiftLeft|BitShiftRight|BitXOr|Bold|Border|Button|ByRef|Catch|Checkbox|Checked|CheckedGray|Choose|ChooseString|Close|Color|ComboBox|Contains|ControlList|Count|Date|DateTime|Days|DDL|Default|DeleteAll|Delimiter|Deref|Destroy|Digit|Disable|Disabled|DropDownList|Edit|Eject|Else|Enable|Enabled|Error|Exist|Expand|ExStyle|FileSystem|Finally|First|Flash|Float|FloatFast|Focus|Font|for|global|Grid|Group|GroupBox|GuiClose|GuiContextMenu|GuiDropFiles|GuiEscape|GuiSize|Hdr|Hidden|Hide|High|HKCC|HKCR|HKCU|HKEY_CLASSES_ROOT|HKEY_CURRENT_CONFIG|HKEY_CURRENT_USER|HKEY_LOCAL_MACHINE|HKEY_USERS|HKLM|HKU|Hours|HScroll|Icon|IconSmall|ID|IDLast|If|IfEqual|IfExist|IfGreater|IfGreaterOrEqual|IfInString|IfLess|IfLessOrEqual|IfMsgBox|IfNotEqual|IfNotExist|IfNotInString|IfWinActive|IfWinExist|IfWinNotActive|IfWinNotExist|Ignore|ImageList|in|Integer|IntegerFast|Interrupt|is|italic|Join|Label|LastFound|LastFoundExist|Limit|Lines|List|ListBox|ListView|local|Lock|Logoff|Low|Lower|Lowercase|MainWindow|Margin|Maximize|MaximizeBox|MaxSize|Minimize|MinimizeBox|MinMax|MinSize|Minutes|MonthCal|Mouse|Move|Multi|NA|No|NoActivate|NoDefault|NoHide|NoIcon|NoMainWindow|norm|Normal|NoSort|NoSortHdr|NoStandard|Not|NoTab|NoTimers|Number|Off|Ok|On|OwnDialogs|Owner|Parse|Password|Picture|Pixel|Pos|Pow|Priority|ProcessName|Radio|Range|Read|ReadOnly|Realtime|Redraw|Region|REG_BINARY|REG_DWORD|REG_EXPAND_SZ|REG_MULTI_SZ|REG_SZ|Relative|Rename|Report|Resize|Restore|Retry|RGB|Screen|Seconds|Section|Serial|SetLabel|ShiftAltTab|Show|Single|Slider|SortDesc|Standard|static|Status|StatusBar|StatusCD|strike|Style|Submit|SysMenu|Tab2|TabStop|Text|Theme|Throw|Tile|ToggleCheck|ToggleEnable|ToolWindow|Top|Topmost|TransColor|Transparent|Tray|TreeView|Try|TryAgain|Type|UnCheck|underline|Unicode|Unlock|Until|UpDown|Upper|Uppercase|UseErrorLevel|Vis|VisFirst|Visible|VScroll|Wait|WaitClose|WantCtrlA|WantF2|WantReturn|While|Wrap|Xdigit|xm|xp|xs|Yes|ym|yp|ys)\b/i,function:/[^(); \t,\n+*\-=?>:\\\/<&%\[\]]+(?=\()/,punctuation:/[{}[\]():,]/}}zA.displayName="autoit";zA.aliases=[];function zA(n){n.languages.autoit={comment:[/;.*/,{pattern:/(^[\t ]*)#(?:comments-start|cs)[\s\S]*?^[ \t]*#(?:ce|comments-end)/m,lookbehind:!0}],url:{pattern:/(^[\t ]*#include\s+)(?:<[^\r\n>]+>|"[^\r\n"]+")/m,lookbehind:!0},string:{pattern:/(["'])(?:\1\1|(?!\1)[^\r\n])*\1/,greedy:!0,inside:{variable:/([%$@])\w+\1/}},directive:{pattern:/(^[\t ]*)#[\w-]+/m,lookbehind:!0,alias:"keyword"},function:/\b\w+(?=\()/,variable:/[$@]\w+/,keyword:/\b(?:Case|Const|Continue(?:Case|Loop)|Default|Dim|Do|Else(?:If)?|End(?:Func|If|Select|Switch|With)|Enum|Exit(?:Loop)?|For|Func|Global|If|In|Local|Next|Null|ReDim|Select|Static|Step|Switch|Then|To|Until|Volatile|WEnd|While|With)\b/i,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,boolean:/\b(?:False|True)\b/i,operator:/<[=>]?|[-+*\/=&>]=?|[?^]|\b(?:And|Not|Or)\b/i,punctuation:/[\[\]().,:]/}}GA.displayName="avisynth";GA.aliases=["avs"];function GA(n){(function(e){function t(u,c){return u.replace(/<<(\d+)>>/g,function(h,f){return c[+f]})}function r(u,c,h){return RegExp(t(u,c),h)}var i=/bool|clip|float|int|string|val/.source,s=[/is(?:bool|clip|float|int|string)|defined|(?:(?:internal)?function|var)?exists?/.source,/apply|assert|default|eval|import|nop|select|undefined/.source,/opt_(?:allowfloataudio|avipadscanlines|dwchannelmask|enable_(?:b64a|planartopackedrgb|v210|y3_10_10|y3_10_16)|usewaveextensible|vdubplanarhack)|set(?:cachemode|maxcpu|memorymax|planarlegacyalignment|workingdir)/.source,/hex(?:value)?|value/.source,/abs|ceil|continued(?:denominator|numerator)?|exp|floor|fmod|frac|log(?:10)?|max|min|muldiv|pi|pow|rand|round|sign|spline|sqrt/.source,/a?sinh?|a?cosh?|a?tan[2h]?/.source,/(?:bit(?:and|not|x?or|[lr]?shift[aslu]?|sh[lr]|sa[lr]|[lr]rotatel?|ro[rl]|te?st|set(?:count)?|cl(?:ea)?r|ch(?:an)?ge?))/.source,/average(?:[bgr]|chroma[uv]|luma)|(?:[rgb]|chroma[uv]|luma|rgb|[yuv](?=difference(?:fromprevious|tonext)))difference(?:fromprevious|tonext)?|[yuvrgb]plane(?:median|min|max|minmaxdifference)/.source,/getprocessinfo|logmsg|script(?:dir(?:utf8)?|file(?:utf8)?|name(?:utf8)?)|setlogparams/.source,/chr|(?:fill|find|left|mid|replace|rev|right)str|format|[lu]case|ord|str(?:cmpi?|fromutf8|len|toutf8)|time|trim(?:all|left|right)/.source,/isversionorgreater|version(?:number|string)/.source,/buildpixeltype|colorspacenametopixeltype/.source,/addautoloaddir|on(?:cpu|cuda)|prefetch|setfiltermtmode/.source].join("|"),a=[/has(?:audio|video)/.source,/height|width/.source,/frame(?:count|rate)|framerate(?:denominator|numerator)/.source,/getparity|is(?:field|frame)based/.source,/bitspercomponent|componentsize|hasalpha|is(?:planar(?:rgba?)?|interleaved|rgb(?:24|32|48|64)?|y(?:8|u(?:va?|y2))?|yv(?:12|16|24|411)|420|422|444|packedrgb)|numcomponents|pixeltype/.source,/audio(?:bits|channels|duration|length(?:[fs]|hi|lo)?|rate)|isaudio(?:float|int)/.source].join("|"),o=[/avi(?:file)?source|directshowsource|image(?:reader|source|sourceanim)|opendmlsource|segmented(?:avisource|directshowsource)|wavsource/.source,/coloryuv|convertbacktoyuy2|convertto(?:RGB(?:24|32|48|64)|(?:planar)?RGBA?|Y8?|YV(?:12|16|24|411)|YUVA?(?:411|420|422|444)|YUY2)|fixluminance|gr[ae]yscale|invert|levels|limiter|mergea?rgb|merge(?:chroma|luma)|rgbadjust|show(?:alpha|blue|green|red)|swapuv|tweak|[uv]toy8?|ytouv/.source,/(?:colorkey|reset)mask|layer|mask(?:hs)?|merge|overlay|subtract/.source,/addborders|(?:bicubic|bilinear|blackman|gauss|lanczos4|lanczos|point|sinc|spline(?:16|36|64))resize|crop(?:bottom)?|flip(?:horizontal|vertical)|(?:horizontal|vertical)?reduceby2|letterbox|skewrows|turn(?:180|left|right)/.source,/blur|fixbrokenchromaupsampling|generalconvolution|(?:spatial|temporal)soften|sharpen/.source,/trim|(?:un)?alignedsplice|(?:assume|assumescaled|change|convert)FPS|(?:delete|duplicate)frame|dissolve|fade(?:in|io|out)[02]?|freezeframe|interleave|loop|reverse|select(?:even|odd|(?:range)?every)/.source,/assume[bt]ff|assume(?:field|frame)based|bob|complementparity|doubleweave|peculiarblend|pulldown|separate(?:columns|fields|rows)|swapfields|weave(?:columns|rows)?/.source,/amplify(?:db)?|assumesamplerate|audiodub(?:ex)?|audiotrim|convertaudioto(?:(?:8|16|24|32)bit|float)|converttomono|delayaudio|ensurevbrmp3sync|get(?:left|right)?channel|kill(?:audio|video)|mergechannels|mixaudio|monotostereo|normalize|resampleaudio|ssrc|supereq|timestretch/.source,/animate|applyrange|conditional(?:filter|reader|select)|frameevaluate|scriptclip|tcp(?:server|source)|writefile(?:end|if|start)?/.source,/imagewriter/.source,/blackness|blankclip|colorbars(?:hd)?|compare|dumpfiltergraph|echo|histogram|info|messageclip|preroll|setgraphanalysis|show(?:framenumber|smpte|time)|showfiveversions|stack(?:horizontal|vertical)|subtitle|tone|version/.source].join("|"),l=[s,a,o].join("|");e.languages.avisynth={comment:[{pattern:/(^|[^\\])\[\*(?:[^\[*]|\[(?!\*)|\*(?!\])|\[\*(?:[^\[*]|\[(?!\*)|\*(?!\]))*\*\])*\*\]/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],argument:{pattern:r(/\b(?:<<0>>)\s+("?)\w+\1/.source,[i],"i"),inside:{keyword:/^\w+/}},"argument-label":{pattern:/([,(][\s\\]*)\w+\s*=(?!=)/,lookbehind:!0,inside:{"argument-name":{pattern:/^\w+/,alias:"punctuation"},punctuation:/=$/}},string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0,inside:{constant:{pattern:/\b(?:DEFAULT_MT_MODE|(?:MAINSCRIPT|PROGRAM|SCRIPT)DIR|(?:MACHINE|USER)_(?:CLASSIC|PLUS)_PLUGINS)\b/}}}],variable:/\b(?:last)\b/i,boolean:/\b(?:false|no|true|yes)\b/i,keyword:/\b(?:catch|else|for|function|global|if|return|try|while|__END__)\b/i,constant:/\bMT_(?:MULTI_INSTANCE|NICE_FILTER|SERIALIZED|SPECIAL_MT)\b/,"builtin-function":{pattern:r(/\b(?:<<0>>)\b/.source,[l],"i"),alias:"function"},"type-cast":{pattern:r(/\b(?:<<0>>)(?=\s*\()/.source,[i],"i"),alias:"keyword"},function:{pattern:/\b[a-z_]\w*(?=\s*\()|(\.)[a-z_]\w*\b/i,lookbehind:!0},"line-continuation":{pattern:/(^[ \t]*)\\|\\(?=[ \t]*$)/m,lookbehind:!0,alias:"punctuation"},number:/\B\$(?:[\da-f]{6}|[\da-f]{8})\b|(?:(?:\b|\B-)\d+(?:\.\d*)?\b|\B\.\d+\b)/i,operator:/\+\+?|[!=<>]=?|&&|\|\||[?:*/%-]/,punctuation:/[{}\[\]();,.]/},e.languages.avs=e.languages.avisynth})(n)}VA.displayName="avro-idl";VA.aliases=["avdl"];function VA(n){n.languages["avro-idl"]={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^\r\n"\\]|\\.)*"/,lookbehind:!0,greedy:!0},annotation:{pattern:/@(?:[$\w.-]|`[^\r\n`]+`)+/,greedy:!0,alias:"function"},"function-identifier":{pattern:/`[^\r\n`]+`(?=\s*\()/,greedy:!0,alias:"function"},identifier:{pattern:/`[^\r\n`]+`/,greedy:!0},"class-name":{pattern:/(\b(?:enum|error|protocol|record|throws)\b\s+)[$\w]+/,lookbehind:!0,greedy:!0},keyword:/\b(?:array|boolean|bytes|date|decimal|double|enum|error|false|fixed|float|idl|import|int|local_timestamp_ms|long|map|null|oneway|protocol|record|schema|string|throws|time_ms|timestamp_ms|true|union|uuid|void)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:[{pattern:/(^|[^\w.])-?(?:(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|0x(?:[a-f0-9]+(?:\.[a-f0-9]*)?|\.[a-f0-9]+)(?:p[+-]?\d+)?)[dfl]?(?![\w.])/i,lookbehind:!0},/-?\b(?:Infinity|NaN)\b/],operator:/=/,punctuation:/[()\[\]{}<>.:,;-]/},n.languages.avdl=n.languages["avro-idl"]}$A.displayName="awk";$A.aliases=["gawk"];function $A(n){n.languages.awk={hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^\\"\r\n]|\\.)*"/,lookbehind:!0,greedy:!0},regex:{pattern:/((?:^|[^\w\s)])\s*)\/(?:[^\/\\\r\n]|\\.)*\//,lookbehind:!0,greedy:!0},variable:/\$\w+/,keyword:/\b(?:BEGIN|BEGINFILE|END|ENDFILE|break|case|continue|default|delete|do|else|exit|for|function|getline|if|in|next|nextfile|printf?|return|switch|while)\b|@(?:include|load)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0x[a-fA-F0-9]+)\b/,operator:/--|\+\+|!?~|>&|>>|<<|(?:\*\*|[<>!=+\-*/%^])=?|&&|\|[|&]|[?:]/,punctuation:/[()[\]{},;]/},n.languages.gawk=n.languages.awk}j_.displayName="basic";j_.aliases=[];function j_(n){n.languages.basic={comment:{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\$|\b)/i,function:/\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\$|\b)/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:AND|EQV|IMP|NOT|OR|XOR)\b/i,punctuation:/[,;:()]/}}HA.displayName="batch";HA.aliases=[];function HA(n){(function(e){var t=/%%?[~:\w]+%?|!\S+!/,r={pattern:/\/[a-z?]+(?=[ :]|$):?|-[a-z]\b|--[a-z-]+\b/im,alias:"attr-name",inside:{punctuation:/:/}},i=/"(?:[\\"]"|[^"])*"(?!")/,s=/(?:\b|-)\d+\b/;e.languages.batch={comment:[/^::.*/m,{pattern:/((?:^|[&(])[ \t]*)rem\b(?:[^^&)\r\n]|\^(?:\r\n|[\s\S]))*/im,lookbehind:!0}],label:{pattern:/^:.*/m,alias:"property"},command:[{pattern:/((?:^|[&(])[ \t]*)for(?: \/[a-z?](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* \S+ in \([^)]+\) do/im,lookbehind:!0,inside:{keyword:/\b(?:do|in)\b|^for\b/i,string:i,parameter:r,variable:t,number:s,punctuation:/[()',]/}},{pattern:/((?:^|[&(])[ \t]*)if(?: \/[a-z?](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* (?:not )?(?:cmdextversion \d+|defined \w+|errorlevel \d+|exist \S+|(?:"[^"]*"|(?!")(?:(?!==)\S)+)?(?:==| (?:equ|geq|gtr|leq|lss|neq) )(?:"[^"]*"|[^\s"]\S*))/im,lookbehind:!0,inside:{keyword:/\b(?:cmdextversion|defined|errorlevel|exist|not)\b|^if\b/i,string:i,parameter:r,variable:t,number:s,operator:/\^|==|\b(?:equ|geq|gtr|leq|lss|neq)\b/i}},{pattern:/((?:^|[&()])[ \t]*)else\b/im,lookbehind:!0,inside:{keyword:/^else\b/i}},{pattern:/((?:^|[&(])[ \t]*)set(?: \/[a-z](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* (?:[^^&)\r\n]|\^(?:\r\n|[\s\S]))*/im,lookbehind:!0,inside:{keyword:/^set\b/i,string:i,parameter:r,variable:[t,/\w+(?=(?:[*\/%+\-&^|]|<<|>>)?=)/],number:s,operator:/[*\/%+\-&^|]=?|<<=?|>>=?|[!~_=]/,punctuation:/[()',]/}},{pattern:/((?:^|[&(])[ \t]*@?)\w+\b(?:"(?:[\\"]"|[^"])*"(?!")|[^"^&)\r\n]|\^(?:\r\n|[\s\S]))*/m,lookbehind:!0,inside:{keyword:/^\w+\b/,string:i,parameter:r,label:{pattern:/(^\s*):\S+/m,lookbehind:!0,alias:"property"},variable:t,number:s,operator:/\^/}}],operator:/[&@]/,punctuation:/[()']/}})(n)}jA.displayName="bbcode";jA.aliases=["shortcode"];function jA(n){n.languages.bbcode={tag:{pattern:/\[\/?[^\s=\]]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+))?(?:\s+[^\s=\]]+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+))*\s*\]/,inside:{tag:{pattern:/^\[\/?[^\s=\]]+/,inside:{punctuation:/^\[\/?/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+)/,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\]/,"attr-name":/[^\s=\]]+/}}},n.languages.shortcode=n.languages.bbcode}WA.displayName="bbj";WA.aliases=[];function WA(n){(function(e){e.languages.bbj={comment:{pattern:/(^|[^\\:])rem\s+.*/i,lookbehind:!0,greedy:!0},string:{pattern:/(['"])(?:(?!\1|\\).|\\.)*\1/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:abstract|all|argc|begin|bye|callback|case|chn|class|classend|ctl|day|declare|delete|dim|dom|dread|dsz|else|end|endif|err|exitto|extends|fi|field|for|from|gosub|goto|if|implements|interface|interfaceend|iol|iolist|let|list|load|method|methodend|methodret|on|opts|pfx|print|private|process_events|protected|psz|public|read|read_resource|release|remove_callback|repeat|restore|return|rev|seterr|setesc|sqlchn|sqlunt|ssn|start|static|swend|switch|sys|then|tim|unt|until|use|void|wend|where|while)\b/i,function:/\b\w+(?=\()/,boolean:/\b(?:BBjAPI\.TRUE|BBjAPI\.FALSE)\b/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:and|not|or|xor)\b/i,punctuation:/[.,;:()]/}})(n)}qA.displayName="bicep";qA.aliases=[];function qA(n){n.languages.bicep={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],property:[{pattern:/([\r\n][ \t]*)[a-z_]\w*(?=[ \t]*:)/i,lookbehind:!0},{pattern:/([\r\n][ \t]*)'(?:\\.|\$(?!\{)|[^'\\\r\n$])*'(?=[ \t]*:)/,lookbehind:!0,greedy:!0}],string:[{pattern:/'''[^'][\s\S]*?'''/,greedy:!0},{pattern:/(^|[^\\'])'(?:\\.|\$(?!\{)|[^'\\\r\n$])*'/,lookbehind:!0,greedy:!0}],"interpolated-string":{pattern:/(^|[^\\'])'(?:\\.|\$(?:(?!\{)|\{[^{}\r\n]*\})|[^'\\\r\n$])*'/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}\r\n]*\}/,inside:{expression:{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0},punctuation:/^\$\{|\}$/}},string:/[\s\S]+/}},datatype:{pattern:/(\b(?:output|param)\b[ \t]+\w+[ \t]+)\w+\b/,lookbehind:!0,alias:"class-name"},boolean:/\b(?:false|true)\b/,keyword:/\b(?:existing|for|if|in|module|null|output|param|resource|targetScope|var)\b/,decorator:/@\w+\b/,function:/\b[a-z_]\w*(?=[ \t]*\()/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/,punctuation:/[{}[\];(),.:]/},n.languages.bicep["interpolated-string"].inside.interpolation.inside.expression.inside=n.languages.bicep}XA.displayName="birb";XA.aliases=[];function XA(n){n.register(cn),n.languages.birb=n.languages.extend("clike",{string:{pattern:/r?("|')(?:\\.|(?!\1)[^\\])*\1/,greedy:!0},"class-name":[/\b[A-Z](?:[\d_]*[a-zA-Z]\w*)?\b/,/\b(?:[A-Z]\w*|(?!(?:var|void)\b)[a-z]\w*)(?=\s+\w+\s*[;,=()])/],keyword:/\b(?:assert|break|case|class|const|default|else|enum|final|follows|for|grab|if|nest|new|next|noSeeb|return|static|switch|throw|var|void|while)\b/,operator:/\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?|:/,variable:/\b[a-z_]\w*\b/}),n.languages.insertBefore("birb","function",{metadata:{pattern:/<\w+>/,greedy:!0,alias:"symbol"}})}YA.displayName="bison";YA.aliases=[];function YA(n){n.register(no),n.languages.bison=n.languages.extend("c",{}),n.languages.insertBefore("bison","comment",{bison:{pattern:/^(?:[^%]|%(?!%))*%%[\s\S]*?%%/,inside:{c:{pattern:/%\{[\s\S]*?%\}|\{(?:\{[^}]*\}|[^{}])*\}/,inside:{delimiter:{pattern:/^%?\{|%?\}$/,alias:"punctuation"},"bison-variable":{pattern:/[$@](?:<[^\s>]+>)?[\w$]+/,alias:"variable",inside:{punctuation:/<|>/}},rest:n.languages.c}},comment:n.languages.c.comment,string:n.languages.c.string,property:/\S+(?=:)/,keyword:/%\w+/,number:{pattern:/(^|[^@])\b(?:0x[\da-f]+|\d+)/i,lookbehind:!0},punctuation:/%[%?]|[|:;\[\]<>]/}}})}KA.displayName="bnf";KA.aliases=["rbnf"];function KA(n){n.languages.bnf={string:{pattern:/"[^\r\n"]*"|'[^\r\n']*'/},definition:{pattern:/<[^<>\r\n\t]+>(?=\s*::=)/,alias:["rule","keyword"],inside:{punctuation:/^<|>$/}},rule:{pattern:/<[^<>\r\n\t]+>/,inside:{punctuation:/^<|>$/}},operator:/::=|[|()[\]{}*+?]|\.{3}/},n.languages.rbnf=n.languages.bnf}ZA.displayName="bqn";ZA.aliases=[];function ZA(n){n.languages.bqn={shebang:{pattern:/^#![ \t]*\/.*/,alias:"important",greedy:!0},comment:{pattern:/#.*/,greedy:!0},"string-literal":{pattern:/"(?:[^"]|"")*"/,greedy:!0,alias:"string"},"character-literal":{pattern:/'(?:[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])'/,greedy:!0,alias:"char"},function:/[\w.]+[\w.]*/,"dot-notation-on-brackets":{pattern:/\{(?=.*\}\.)|\}\./,alias:"namespace"},"special-name":{pattern:/(?:|||||||||||__|_)/,alias:"keyword"},"dot-notation-on-name":{pattern:/[A-Za-z_][\w]*\./,alias:"namespace"},"word-number-scientific":{pattern:/\d+(?:\.\d+)?[eE]?\d+/,alias:"number"},"word-name":{pattern:/[A-Za-z_][\w]*/,alias:"symbol"},"word-number":{pattern:/[]?(?:\d*\.?\b\d+(?:e[+]?\d+|E[+]?\d+)?|||)(?:j?(?:(?:\d+(?:\.\d+)?|\.\d+)(?:e[+]?\d+|E[+]?\d+)?|||))?/,alias:"number"},"null-literal":{pattern:/@/,alias:"char"},"primitive-functions":{pattern:/[-+|<>=/!]/,alias:"operator"},"primitive-1-operators":{pattern:/[`]/,alias:"operator"},"primitive-2-operators":{pattern:/[]/,alias:"operator"},punctuation:/[(){}[\],.;:?]/}}QA.displayName="brainfuck";QA.aliases=[];function QA(n){n.languages.brainfuck={pointer:{pattern:/<|>/,alias:"keyword"},increment:{pattern:/\+/,alias:"inserted"},decrement:{pattern:/-/,alias:"deleted"},branching:{pattern:/\[|\]/,alias:"important"},operator:/[.,]/,comment:/\S+/}}JA.displayName="brightscript";JA.aliases=[];function JA(n){n.languages.brightscript={comment:/(?:\brem|').*/i,"directive-statement":{pattern:/(^[\t ]*)#(?:const|else(?:[\t ]+if)?|end[\t ]+if|error|if).*/im,lookbehind:!0,alias:"property",inside:{"error-message":{pattern:/(^#error).+/,lookbehind:!0},directive:{pattern:/^#(?:const|else(?:[\t ]+if)?|end[\t ]+if|error|if)/,alias:"keyword"},expression:{pattern:/[\s\S]+/,inside:null}}},property:{pattern:/([\r\n{,][\t ]*)(?:(?!\d)\w+|"(?:[^"\r\n]|"")*"(?!"))(?=[ \t]*:)/,lookbehind:!0,greedy:!0},string:{pattern:/"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},"class-name":{pattern:/(\bAs[\t ]+)\w+/i,lookbehind:!0},keyword:/\b(?:As|Dim|Each|Else|Elseif|End|Exit|For|Function|Goto|If|In|Print|Return|Step|Stop|Sub|Then|To|While)\b/i,boolean:/\b(?:false|true)\b/i,function:/\b(?!\d)\w+(?=[\t ]*\()/,number:/(?:\b\d+(?:\.\d+)?(?:[ed][+-]\d+)?|&h[a-f\d]+)\b[%&!#]?/i,operator:/--|\+\+|>>=?|<<=?|<>|[-+*/\\<>]=?|[:^=?]|\b(?:and|mod|not|or)\b/i,punctuation:/[.,;()[\]{}]/,constant:/\b(?:LINE_NUM)\b/i},n.languages.brightscript["directive-statement"].inside.expression.inside=n.languages.brightscript}eR.displayName="bro";eR.aliases=[];function eR(n){n.languages.bro={comment:{pattern:/(^|[^\\$])#.*/,lookbehind:!0,inside:{italic:/\b(?:FIXME|TODO|XXX)\b/}},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},boolean:/\b[TF]\b/,function:{pattern:/(\b(?:event|function|hook)[ \t]+)\w+(?:::\w+)?/,lookbehind:!0},builtin:/(?:@(?:load(?:-(?:plugin|sigs))?|unload|prefixes|ifn?def|else|(?:end)?if|DIR|FILENAME))|(?:&?(?:add_func|create_expire|default|delete_func|encrypt|error_handler|expire_func|group|log|mergeable|optional|persistent|priority|raw_output|read_expire|redef|rotate_interval|rotate_size|synchronized|type_column|write_expire))/,constant:{pattern:/(\bconst[ \t]+)\w+/i,lookbehind:!0},keyword:/\b(?:add|addr|alarm|any|bool|break|const|continue|count|delete|double|else|enum|event|export|file|for|function|global|hook|if|in|int|interval|local|module|next|of|opaque|pattern|port|print|record|return|schedule|set|string|subnet|table|time|timeout|using|vector|when)\b/,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&|\|\|?|\?|\*|\/|~|\^|%/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,punctuation:/[{}[\];(),.:]/}}tR.displayName="bsl";tR.aliases=["oscript"];function tR(n){n.languages.bsl={comment:/\/\/.*/,string:[{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},{pattern:/'(?:[^'\r\n\\]|\\.)*'/}],keyword:[{pattern:/(^|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:|||||||||||||||||||||||||||||)(?![\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])/i,lookbehind:!0},{pattern:/\b(?:break|do|each|else|elseif|enddo|endfunction|endif|endprocedure|endtry|except|execute|export|false|for|function|if|in|new|null|procedure|raise|return|then|to|true|try|undefined|val|var|while)\b/i}],number:{pattern:/(^(?=\d)|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:\d+(?:\.\d*)?|\.\d+)(?:E[+-]?\d+)?/i,lookbehind:!0},operator:[/[<>+\-*/]=?|[%=]/,{pattern:/(^|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:||)(?![\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])/i,lookbehind:!0},{pattern:/\b(?:and|not|or)\b/i}],punctuation:/\(\.|\.\)|[()\[\]:;,.]/,directive:[{pattern:/^([ \t]*)&.*/m,lookbehind:!0,greedy:!0,alias:"important"},{pattern:/^([ \t]*)#.*/gm,lookbehind:!0,greedy:!0,alias:"important"}]},n.languages.oscript=n.languages.bsl}nR.displayName="cfscript";nR.aliases=["cfc"];function nR(n){n.register(cn),n.languages.cfscript=n.languages.extend("clike",{comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,inside:{annotation:{pattern:/(?:^|[^.])@[\w\.]+/,alias:"punctuation"}}},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],keyword:/\b(?:abstract|break|catch|component|continue|default|do|else|extends|final|finally|for|function|if|in|include|package|private|property|public|remote|required|rethrow|return|static|switch|throw|try|var|while|xml)\b(?!\s*=)/,operator:[/\+\+|--|&&|\|\||::|=>|[!=]==|[-+*/%&|^!=<>]=?|\?(?:\.|:)?|:/,/\b(?:and|contains|eq|equal|eqv|gt|gte|imp|is|lt|lte|mod|not|or|xor)\b/],scope:{pattern:/\b(?:application|arguments|cgi|client|cookie|local|session|super|this|variables)\b/,alias:"global"},type:{pattern:/\b(?:any|array|binary|boolean|date|guid|numeric|query|string|struct|uuid|void|xml)\b/,alias:"builtin"}}),n.languages.insertBefore("cfscript","keyword",{"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"}}),delete n.languages.cfscript["class-name"],n.languages.cfc=n.languages.cfscript}rR.displayName="chaiscript";rR.aliases=[];function rR(n){n.register(cn),n.register(Dh),n.languages.chaiscript=n.languages.extend("clike",{string:{pattern:/(^|[^\\])'(?:[^'\\]|\\[\s\S])*'/,lookbehind:!0,greedy:!0},"class-name":[{pattern:/(\bclass\s+)\w+/,lookbehind:!0},{pattern:/(\b(?:attr|def)\s+)\w+(?=\s*::)/,lookbehind:!0}],keyword:/\b(?:attr|auto|break|case|catch|class|continue|def|default|else|finally|for|fun|global|if|return|switch|this|try|var|while)\b/,number:[n.languages.cpp.number,/\b(?:Infinity|NaN)\b/],operator:/>>=?|<<=?|\|\||&&|:[:=]?|--|\+\+|[=!<>+\-*/%|&^]=?|[?~]|`[^`\r\n]{1,4}`/}),n.languages.insertBefore("chaiscript","operator",{"parameter-type":{pattern:/([,(]\s*)\w+(?=\s+\w)/,lookbehind:!0,alias:"class-name"}}),n.languages.insertBefore("chaiscript","string",{"string-interpolation":{pattern:/(^|[^\\])"(?:[^"$\\]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\}/,lookbehind:!0,inside:{"interpolation-expression":{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.chaiscript},"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"}}},string:/[\s\S]+/}}})}iR.displayName="cil";iR.aliases=[];function iR(n){n.languages.cil={comment:/\/\/.*/,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},directive:{pattern:/(^|\W)\.[a-z]+(?=\s)/,lookbehind:!0,alias:"class-name"},variable:/\[[\w\.]+\]/,keyword:/\b(?:abstract|ansi|assembly|auto|autochar|beforefieldinit|bool|bstr|byvalstr|catch|char|cil|class|currency|date|decimal|default|enum|error|explicit|extends|extern|famandassem|family|famorassem|final(?:ly)?|float32|float64|hidebysig|u?int(?:8|16|32|64)?|iant|idispatch|implements|import|initonly|instance|interface|iunknown|literal|lpstr|lpstruct|lptstr|lpwstr|managed|method|native(?:Type)?|nested|newslot|object(?:ref)?|pinvokeimpl|private|privatescope|public|reqsecobj|rtspecialname|runtime|sealed|sequential|serializable|specialname|static|string|struct|syschar|tbstr|unicode|unmanagedexp|unsigned|value(?:type)?|variant|virtual|void)\b/,function:/\b(?:(?:constrained|no|readonly|tail|unaligned|volatile)\.)?(?:conv\.(?:[iu][1248]?|ovf\.[iu][1248]?(?:\.un)?|r\.un|r4|r8)|ldc\.(?:i4(?:\.\d+|\.[mM]1|\.s)?|i8|r4|r8)|ldelem(?:\.[iu][1248]?|\.r[48]|\.ref|a)?|ldind\.(?:[iu][1248]?|r[48]|ref)|stelem\.?(?:i[1248]?|r[48]|ref)?|stind\.(?:i[1248]?|r[48]|ref)?|end(?:fault|filter|finally)|ldarg(?:\.[0-3s]|a(?:\.s)?)?|ldloc(?:\.\d+|\.s)?|sub(?:\.ovf(?:\.un)?)?|mul(?:\.ovf(?:\.un)?)?|add(?:\.ovf(?:\.un)?)?|stloc(?:\.[0-3s])?|refany(?:type|val)|blt(?:\.un)?(?:\.s)?|ble(?:\.un)?(?:\.s)?|bgt(?:\.un)?(?:\.s)?|bge(?:\.un)?(?:\.s)?|unbox(?:\.any)?|init(?:blk|obj)|call(?:i|virt)?|brfalse(?:\.s)?|bne\.un(?:\.s)?|ldloca(?:\.s)?|brzero(?:\.s)?|brtrue(?:\.s)?|brnull(?:\.s)?|brinst(?:\.s)?|starg(?:\.s)?|leave(?:\.s)?|shr(?:\.un)?|rem(?:\.un)?|div(?:\.un)?|clt(?:\.un)?|alignment|castclass|ldvirtftn|beq(?:\.s)?|ckfinite|ldsflda|ldtoken|localloc|mkrefany|rethrow|cgt\.un|arglist|switch|stsfld|sizeof|newobj|newarr|ldsfld|ldnull|ldflda|isinst|throw|stobj|stfld|ldstr|ldobj|ldlen|ldftn|ldfld|cpobj|cpblk|break|br\.s|xor|shl|ret|pop|not|nop|neg|jmp|dup|cgt|ceq|box|and|or|br)\b/,boolean:/\b(?:false|true)\b/,number:/\b-?(?:0x[0-9a-f]+|\d+)(?:\.[0-9a-f]+)?\b/i,punctuation:/[{}[\];(),:=]|IL_[0-9A-Za-z]+/}}sR.displayName="cilkc";sR.aliases=["cilk-c"];function sR(n){n.register(no),n.languages.cilkc=n.languages.insertBefore("c","function",{"parallel-keyword":{pattern:/\bcilk_(?:for|reducer|s(?:cope|pawn|ync))\b/,alias:"keyword"}}),n.languages["cilk-c"]=n.languages.cilkc}aR.displayName="cilkcpp";aR.aliases=["cilk","cilk-cpp"];function aR(n){n.register(Dh),n.languages.cilkcpp=n.languages.insertBefore("cpp","function",{"parallel-keyword":{pattern:/\bcilk_(?:for|reducer|s(?:cope|pawn|ync))\b/,alias:"keyword"}}),n.languages["cilk-cpp"]=n.languages.cilkcpp,n.languages.cilk=n.languages.cilkcpp}oR.displayName="clojure";oR.aliases=[];function oR(n){n.languages.clojure={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},char:/\\\w+/,symbol:{pattern:/(^|[\s()\[\]{},])::?[\w*+!?'<>=/.-]+/,lookbehind:!0},keyword:{pattern:/(\()(?:-|->|->>|\.|\.\.|\*|\/|\+|<|<=|=|==|>|>=|accessor|agent|agent-errors|aget|alength|all-ns|alter|and|append-child|apply|array-map|aset|aset-boolean|aset-byte|aset-char|aset-double|aset-float|aset-int|aset-long|aset-short|assert|assoc|await|await-for|bean|binding|bit-and|bit-not|bit-or|bit-shift-left|bit-shift-right|bit-xor|boolean|branch\?|butlast|byte|cast|char|children|class|clear-agent-errors|comment|commute|comp|comparator|complement|concat|cond|conj|cons|constantly|construct-proxy|contains\?|count|create-ns|create-struct|cycle|dec|declare|def|def-|definline|definterface|defmacro|defmethod|defmulti|defn|defn-|defonce|defproject|defprotocol|defrecord|defstruct|deftype|deref|difference|disj|dissoc|distinct|do|doall|doc|dorun|doseq|dosync|dotimes|doto|double|down|drop|drop-while|edit|end\?|ensure|eval|every\?|false\?|ffirst|file-seq|filter|find|find-doc|find-ns|find-var|first|float|flush|fn|fnseq|for|frest|gensym|get|get-proxy-class|hash-map|hash-set|identical\?|identity|if|if-let|if-not|import|in-ns|inc|index|insert-child|insert-left|insert-right|inspect-table|inspect-tree|instance\?|int|interleave|intersection|into|into-array|iterate|join|key|keys|keyword|keyword\?|last|lazy-cat|lazy-cons|left|lefts|let|line-seq|list|list\*|load|load-file|locking|long|loop|macroexpand|macroexpand-1|make-array|make-node|map|map-invert|map\?|mapcat|max|max-key|memfn|merge|merge-with|meta|min|min-key|monitor-enter|name|namespace|neg\?|new|newline|next|nil\?|node|not|not-any\?|not-every\?|not=|ns|ns-imports|ns-interns|ns-map|ns-name|ns-publics|ns-refers|ns-resolve|ns-unmap|nth|nthrest|or|parse|partial|path|peek|pop|pos\?|pr|pr-str|print|print-str|println|println-str|prn|prn-str|project|proxy|proxy-mappings|quot|quote|rand|rand-int|range|re-find|re-groups|re-matcher|re-matches|re-pattern|re-seq|read|read-line|recur|reduce|ref|ref-set|refer|rem|remove|remove-method|remove-ns|rename|rename-keys|repeat|replace|replicate|resolve|rest|resultset-seq|reverse|rfirst|right|rights|root|rrest|rseq|second|select|select-keys|send|send-off|seq|seq-zip|seq\?|set|set!|short|slurp|some|sort|sort-by|sorted-map|sorted-map-by|sorted-set|special-symbol\?|split-at|split-with|str|string\?|struct|struct-map|subs|subvec|symbol|symbol\?|sync|take|take-nth|take-while|test|throw|time|to-array|to-array-2d|tree-seq|true\?|try|union|up|update-proxy|val|vals|var|var-get|var-set|var\?|vector|vector-zip|vector\?|when|when-first|when-let|when-not|with-local-vars|with-meta|with-open|with-out-str|xml-seq|xml-zip|zero\?|zipmap|zipper)(?=[\s)]|$)/,lookbehind:!0},boolean:/\b(?:false|nil|true)\b/,number:{pattern:/(^|[^\w$@])(?:\d+(?:[/.]\d+)?(?:e[+-]?\d+)?|0x[a-f0-9]+|[1-9]\d?r[a-z0-9]+)[lmn]?(?![\w$@])/i,lookbehind:!0},function:{pattern:/((?:^|[^'])\()[\w*+!?'<>=/.-]+(?=[\s)]|$)/,lookbehind:!0},operator:/[#@^`~]/,punctuation:/[{}\[\](),]/}}lR.displayName="cmake";lR.aliases=[];function lR(n){n.languages.cmake={comment:/#.*/,string:{pattern:/"(?:[^\\"]|\\.)*"/,greedy:!0,inside:{interpolation:{pattern:/\$\{(?:[^{}$]|\$\{[^{}$]*\})*\}/,inside:{punctuation:/\$\{|\}/,variable:/\w+/}}}},variable:/\b(?:CMAKE_\w+|\w+_(?:(?:BINARY|SOURCE)_DIR|DESCRIPTION|HOMEPAGE_URL|ROOT|VERSION(?:_MAJOR|_MINOR|_PATCH|_TWEAK)?)|(?:ANDROID|APPLE|BORLAND|BUILD_SHARED_LIBS|CACHE|CPACK_(?:ABSOLUTE_DESTINATION_FILES|COMPONENT_INCLUDE_TOPLEVEL_DIRECTORY|ERROR_ON_ABSOLUTE_INSTALL_DESTINATION|INCLUDE_TOPLEVEL_DIRECTORY|INSTALL_DEFAULT_DIRECTORY_PERMISSIONS|INSTALL_SCRIPT|PACKAGING_INSTALL_PREFIX|SET_DESTDIR|WARN_ON_ABSOLUTE_INSTALL_DESTINATION)|CTEST_(?:BINARY_DIRECTORY|BUILD_COMMAND|BUILD_NAME|BZR_COMMAND|BZR_UPDATE_OPTIONS|CHANGE_ID|CHECKOUT_COMMAND|CONFIGURATION_TYPE|CONFIGURE_COMMAND|COVERAGE_COMMAND|COVERAGE_EXTRA_FLAGS|CURL_OPTIONS|CUSTOM_(?:COVERAGE_EXCLUDE|ERROR_EXCEPTION|ERROR_MATCH|ERROR_POST_CONTEXT|ERROR_PRE_CONTEXT|MAXIMUM_FAILED_TEST_OUTPUT_SIZE|MAXIMUM_NUMBER_OF_(?:ERRORS|WARNINGS)|MAXIMUM_PASSED_TEST_OUTPUT_SIZE|MEMCHECK_IGNORE|POST_MEMCHECK|POST_TEST|PRE_MEMCHECK|PRE_TEST|TESTS_IGNORE|WARNING_EXCEPTION|WARNING_MATCH)|CVS_CHECKOUT|CVS_COMMAND|CVS_UPDATE_OPTIONS|DROP_LOCATION|DROP_METHOD|DROP_SITE|DROP_SITE_CDASH|DROP_SITE_PASSWORD|DROP_SITE_USER|EXTRA_COVERAGE_GLOB|GIT_COMMAND|GIT_INIT_SUBMODULES|GIT_UPDATE_CUSTOM|GIT_UPDATE_OPTIONS|HG_COMMAND|HG_UPDATE_OPTIONS|LABELS_FOR_SUBPROJECTS|MEMORYCHECK_(?:COMMAND|COMMAND_OPTIONS|SANITIZER_OPTIONS|SUPPRESSIONS_FILE|TYPE)|NIGHTLY_START_TIME|P4_CLIENT|P4_COMMAND|P4_OPTIONS|P4_UPDATE_OPTIONS|RUN_CURRENT_SCRIPT|SCP_COMMAND|SITE|SOURCE_DIRECTORY|SUBMIT_URL|SVN_COMMAND|SVN_OPTIONS|SVN_UPDATE_OPTIONS|TEST_LOAD|TEST_TIMEOUT|TRIGGER_SITE|UPDATE_COMMAND|UPDATE_OPTIONS|UPDATE_VERSION_ONLY|USE_LAUNCHERS)|CYGWIN|ENV|EXECUTABLE_OUTPUT_PATH|GHS-MULTI|IOS|LIBRARY_OUTPUT_PATH|MINGW|MSVC(?:10|11|12|14|60|70|71|80|90|_IDE|_TOOLSET_VERSION|_VERSION)?|MSYS|PROJECT_NAME|UNIX|WIN32|WINCE|WINDOWS_PHONE|WINDOWS_STORE|XCODE))\b/,property:/\b(?:cxx_\w+|(?:ARCHIVE_OUTPUT_(?:DIRECTORY|NAME)|COMPILE_DEFINITIONS|COMPILE_PDB_NAME|COMPILE_PDB_OUTPUT_DIRECTORY|EXCLUDE_FROM_DEFAULT_BUILD|IMPORTED_(?:IMPLIB|LIBNAME|LINK_DEPENDENT_LIBRARIES|LINK_INTERFACE_LANGUAGES|LINK_INTERFACE_LIBRARIES|LINK_INTERFACE_MULTIPLICITY|LOCATION|NO_SONAME|OBJECTS|SONAME)|INTERPROCEDURAL_OPTIMIZATION|LIBRARY_OUTPUT_DIRECTORY|LIBRARY_OUTPUT_NAME|LINK_FLAGS|LINK_INTERFACE_LIBRARIES|LINK_INTERFACE_MULTIPLICITY|LOCATION|MAP_IMPORTED_CONFIG|OSX_ARCHITECTURES|OUTPUT_NAME|PDB_NAME|PDB_OUTPUT_DIRECTORY|RUNTIME_OUTPUT_DIRECTORY|RUNTIME_OUTPUT_NAME|STATIC_LIBRARY_FLAGS|VS_CSHARP|VS_DOTNET_REFERENCEPROP|VS_DOTNET_REFERENCE|VS_GLOBAL_SECTION_POST|VS_GLOBAL_SECTION_PRE|VS_GLOBAL|XCODE_ATTRIBUTE)_\w+|\w+_(?:CLANG_TIDY|COMPILER_LAUNCHER|CPPCHECK|CPPLINT|INCLUDE_WHAT_YOU_USE|OUTPUT_NAME|POSTFIX|VISIBILITY_PRESET)|ABSTRACT|ADDITIONAL_MAKE_CLEAN_FILES|ADVANCED|ALIASED_TARGET|ALLOW_DUPLICATE_CUSTOM_TARGETS|ANDROID_(?:ANT_ADDITIONAL_OPTIONS|API|API_MIN|ARCH|ASSETS_DIRECTORIES|GUI|JAR_DEPENDENCIES|NATIVE_LIB_DEPENDENCIES|NATIVE_LIB_DIRECTORIES|PROCESS_MAX|PROGUARD|PROGUARD_CONFIG_PATH|SECURE_PROPS_PATH|SKIP_ANT_STEP|STL_TYPE)|ARCHIVE_OUTPUT_DIRECTORY|ATTACHED_FILES|ATTACHED_FILES_ON_FAIL|AUTOGEN_(?:BUILD_DIR|ORIGIN_DEPENDS|PARALLEL|SOURCE_GROUP|TARGETS_FOLDER|TARGET_DEPENDS)|AUTOMOC|AUTOMOC_(?:COMPILER_PREDEFINES|DEPEND_FILTERS|EXECUTABLE|MACRO_NAMES|MOC_OPTIONS|SOURCE_GROUP|TARGETS_FOLDER)|AUTORCC|AUTORCC_EXECUTABLE|AUTORCC_OPTIONS|AUTORCC_SOURCE_GROUP|AUTOUIC|AUTOUIC_EXECUTABLE|AUTOUIC_OPTIONS|AUTOUIC_SEARCH_PATHS|BINARY_DIR|BUILDSYSTEM_TARGETS|BUILD_RPATH|BUILD_RPATH_USE_ORIGIN|BUILD_WITH_INSTALL_NAME_DIR|BUILD_WITH_INSTALL_RPATH|BUNDLE|BUNDLE_EXTENSION|CACHE_VARIABLES|CLEAN_NO_CUSTOM|COMMON_LANGUAGE_RUNTIME|COMPATIBLE_INTERFACE_(?:BOOL|NUMBER_MAX|NUMBER_MIN|STRING)|COMPILE_(?:DEFINITIONS|FEATURES|FLAGS|OPTIONS|PDB_NAME|PDB_OUTPUT_DIRECTORY)|COST|CPACK_DESKTOP_SHORTCUTS|CPACK_NEVER_OVERWRITE|CPACK_PERMANENT|CPACK_STARTUP_SHORTCUTS|CPACK_START_MENU_SHORTCUTS|CPACK_WIX_ACL|CROSSCOMPILING_EMULATOR|CUDA_EXTENSIONS|CUDA_PTX_COMPILATION|CUDA_RESOLVE_DEVICE_SYMBOLS|CUDA_SEPARABLE_COMPILATION|CUDA_STANDARD|CUDA_STANDARD_REQUIRED|CXX_EXTENSIONS|CXX_STANDARD|CXX_STANDARD_REQUIRED|C_EXTENSIONS|C_STANDARD|C_STANDARD_REQUIRED|DEBUG_CONFIGURATIONS|DEFINE_SYMBOL|DEFINITIONS|DEPENDS|DEPLOYMENT_ADDITIONAL_FILES|DEPLOYMENT_REMOTE_DIRECTORY|DISABLED|DISABLED_FEATURES|ECLIPSE_EXTRA_CPROJECT_CONTENTS|ECLIPSE_EXTRA_NATURES|ENABLED_FEATURES|ENABLED_LANGUAGES|ENABLE_EXPORTS|ENVIRONMENT|EXCLUDE_FROM_ALL|EXCLUDE_FROM_DEFAULT_BUILD|EXPORT_NAME|EXPORT_PROPERTIES|EXTERNAL_OBJECT|EchoString|FAIL_REGULAR_EXPRESSION|FIND_LIBRARY_USE_LIB32_PATHS|FIND_LIBRARY_USE_LIB64_PATHS|FIND_LIBRARY_USE_LIBX32_PATHS|FIND_LIBRARY_USE_OPENBSD_VERSIONING|FIXTURES_CLEANUP|FIXTURES_REQUIRED|FIXTURES_SETUP|FOLDER|FRAMEWORK|Fortran_FORMAT|Fortran_MODULE_DIRECTORY|GENERATED|GENERATOR_FILE_NAME|GENERATOR_IS_MULTI_CONFIG|GHS_INTEGRITY_APP|GHS_NO_SOURCE_GROUP_FILE|GLOBAL_DEPENDS_DEBUG_MODE|GLOBAL_DEPENDS_NO_CYCLES|GNUtoMS|HAS_CXX|HEADER_FILE_ONLY|HELPSTRING|IMPLICIT_DEPENDS_INCLUDE_TRANSFORM|IMPORTED|IMPORTED_(?:COMMON_LANGUAGE_RUNTIME|CONFIGURATIONS|GLOBAL|IMPLIB|LIBNAME|LINK_DEPENDENT_LIBRARIES|LINK_INTERFACE_(?:LANGUAGES|LIBRARIES|MULTIPLICITY)|LOCATION|NO_SONAME|OBJECTS|SONAME)|IMPORT_PREFIX|IMPORT_SUFFIX|INCLUDE_DIRECTORIES|INCLUDE_REGULAR_EXPRESSION|INSTALL_NAME_DIR|INSTALL_RPATH|INSTALL_RPATH_USE_LINK_PATH|INTERFACE_(?:AUTOUIC_OPTIONS|COMPILE_DEFINITIONS|COMPILE_FEATURES|COMPILE_OPTIONS|INCLUDE_DIRECTORIES|LINK_DEPENDS|LINK_DIRECTORIES|LINK_LIBRARIES|LINK_OPTIONS|POSITION_INDEPENDENT_CODE|SOURCES|SYSTEM_INCLUDE_DIRECTORIES)|INTERPROCEDURAL_OPTIMIZATION|IN_TRY_COMPILE|IOS_INSTALL_COMBINED|JOB_POOLS|JOB_POOL_COMPILE|JOB_POOL_LINK|KEEP_EXTENSION|LABELS|LANGUAGE|LIBRARY_OUTPUT_DIRECTORY|LINKER_LANGUAGE|LINK_(?:DEPENDS|DEPENDS_NO_SHARED|DIRECTORIES|FLAGS|INTERFACE_LIBRARIES|INTERFACE_MULTIPLICITY|LIBRARIES|OPTIONS|SEARCH_END_STATIC|SEARCH_START_STATIC|WHAT_YOU_USE)|LISTFILE_STACK|LOCATION|MACOSX_BUNDLE|MACOSX_BUNDLE_INFO_PLIST|MACOSX_FRAMEWORK_INFO_PLIST|MACOSX_PACKAGE_LOCATION|MACOSX_RPATH|MACROS|MANUALLY_ADDED_DEPENDENCIES|MEASUREMENT|MODIFIED|NAME|NO_SONAME|NO_SYSTEM_FROM_IMPORTED|OBJECT_DEPENDS|OBJECT_OUTPUTS|OSX_ARCHITECTURES|OUTPUT_NAME|PACKAGES_FOUND|PACKAGES_NOT_FOUND|PARENT_DIRECTORY|PASS_REGULAR_EXPRESSION|PDB_NAME|PDB_OUTPUT_DIRECTORY|POSITION_INDEPENDENT_CODE|POST_INSTALL_SCRIPT|PREDEFINED_TARGETS_FOLDER|PREFIX|PRE_INSTALL_SCRIPT|PRIVATE_HEADER|PROCESSORS|PROCESSOR_AFFINITY|PROJECT_LABEL|PUBLIC_HEADER|REPORT_UNDEFINED_PROPERTIES|REQUIRED_FILES|RESOURCE|RESOURCE_LOCK|RULE_LAUNCH_COMPILE|RULE_LAUNCH_CUSTOM|RULE_LAUNCH_LINK|RULE_MESSAGES|RUNTIME_OUTPUT_DIRECTORY|RUN_SERIAL|SKIP_AUTOGEN|SKIP_AUTOMOC|SKIP_AUTORCC|SKIP_AUTOUIC|SKIP_BUILD_RPATH|SKIP_RETURN_CODE|SOURCES|SOURCE_DIR|SOVERSION|STATIC_LIBRARY_FLAGS|STATIC_LIBRARY_OPTIONS|STRINGS|SUBDIRECTORIES|SUFFIX|SYMBOLIC|TARGET_ARCHIVES_MAY_BE_SHARED_LIBS|TARGET_MESSAGES|TARGET_SUPPORTS_SHARED_LIBS|TESTS|TEST_INCLUDE_FILE|TEST_INCLUDE_FILES|TIMEOUT|TIMEOUT_AFTER_MATCH|TYPE|USE_FOLDERS|VALUE|VARIABLES|VERSION|VISIBILITY_INLINES_HIDDEN|VS_(?:CONFIGURATION_TYPE|COPY_TO_OUT_DIR|DEBUGGER_(?:COMMAND|COMMAND_ARGUMENTS|ENVIRONMENT|WORKING_DIRECTORY)|DEPLOYMENT_CONTENT|DEPLOYMENT_LOCATION|DOTNET_REFERENCES|DOTNET_REFERENCES_COPY_LOCAL|INCLUDE_IN_VSIX|IOT_STARTUP_TASK|KEYWORD|RESOURCE_GENERATOR|SCC_AUXPATH|SCC_LOCALPATH|SCC_PROJECTNAME|SCC_PROVIDER|SDK_REFERENCES|SHADER_(?:DISABLE_OPTIMIZATIONS|ENABLE_DEBUG|ENTRYPOINT|FLAGS|MODEL|OBJECT_FILE_NAME|OUTPUT_HEADER_FILE|TYPE|VARIABLE_NAME)|STARTUP_PROJECT|TOOL_OVERRIDE|USER_PROPS|WINRT_COMPONENT|WINRT_EXTENSIONS|WINRT_REFERENCES|XAML_TYPE)|WILL_FAIL|WIN32_EXECUTABLE|WINDOWS_EXPORT_ALL_SYMBOLS|WORKING_DIRECTORY|WRAP_EXCLUDE|XCODE_(?:EMIT_EFFECTIVE_PLATFORM_NAME|EXPLICIT_FILE_TYPE|FILE_ATTRIBUTES|LAST_KNOWN_FILE_TYPE|PRODUCT_TYPE|SCHEME_(?:ADDRESS_SANITIZER|ADDRESS_SANITIZER_USE_AFTER_RETURN|ARGUMENTS|DISABLE_MAIN_THREAD_CHECKER|DYNAMIC_LIBRARY_LOADS|DYNAMIC_LINKER_API_USAGE|ENVIRONMENT|EXECUTABLE|GUARD_MALLOC|MAIN_THREAD_CHECKER_STOP|MALLOC_GUARD_EDGES|MALLOC_SCRIBBLE|MALLOC_STACK|THREAD_SANITIZER(?:_STOP)?|UNDEFINED_BEHAVIOUR_SANITIZER(?:_STOP)?|ZOMBIE_OBJECTS))|XCTEST)\b/,keyword:/\b(?:add_compile_definitions|add_compile_options|add_custom_command|add_custom_target|add_definitions|add_dependencies|add_executable|add_library|add_link_options|add_subdirectory|add_test|aux_source_directory|break|build_command|build_name|cmake_host_system_information|cmake_minimum_required|cmake_parse_arguments|cmake_policy|configure_file|continue|create_test_sourcelist|ctest_build|ctest_configure|ctest_coverage|ctest_empty_binary_directory|ctest_memcheck|ctest_read_custom_files|ctest_run_script|ctest_sleep|ctest_start|ctest_submit|ctest_test|ctest_update|ctest_upload|define_property|else|elseif|enable_language|enable_testing|endforeach|endfunction|endif|endmacro|endwhile|exec_program|execute_process|export|export_library_dependencies|file|find_file|find_library|find_package|find_path|find_program|fltk_wrap_ui|foreach|function|get_cmake_property|get_directory_property|get_filename_component|get_property|get_source_file_property|get_target_property|get_test_property|if|include|include_directories|include_external_msproject|include_guard|include_regular_expression|install|install_files|install_programs|install_targets|link_directories|link_libraries|list|load_cache|load_command|macro|make_directory|mark_as_advanced|math|message|option|output_required_files|project|qt_wrap_cpp|qt_wrap_ui|remove|remove_definitions|return|separate_arguments|set|set_directory_properties|set_property|set_source_files_properties|set_target_properties|set_tests_properties|site_name|source_group|string|subdir_depends|subdirs|target_compile_definitions|target_compile_features|target_compile_options|target_include_directories|target_link_directories|target_link_libraries|target_link_options|target_sources|try_compile|try_run|unset|use_mangled_mesa|utility_source|variable_requires|variable_watch|while|write_file)(?=\s*\()\b/,boolean:/\b(?:FALSE|OFF|ON|TRUE)\b/,namespace:/\b(?:INTERFACE|PRIVATE|PROPERTIES|PUBLIC|SHARED|STATIC|TARGET_OBJECTS)\b/,operator:/\b(?:AND|DEFINED|EQUAL|GREATER|LESS|MATCHES|NOT|OR|STREQUAL|STRGREATER|STRLESS|VERSION_EQUAL|VERSION_GREATER|VERSION_LESS)\b/,inserted:{pattern:/\b\w+::\w+\b/,alias:"class-name"},number:/\b\d+(?:\.\d+)*\b/,function:/\b[a-z_]\w*(?=\s*\()\b/i,punctuation:/[()>}]|\$[<{]/}}uR.displayName="cobol";uR.aliases=[];function uR(n){n.languages.cobol={comment:{pattern:/\*>.*|(^[ \t]*)\*.*/m,lookbehind:!0,greedy:!0},string:{pattern:/[xzgn]?(?:"(?:[^\r\n"]|"")*"(?!")|'(?:[^\r\n']|'')*'(?!'))/i,greedy:!0},level:{pattern:/(^[ \t]*)\d+\b/m,lookbehind:!0,greedy:!0,alias:"number"},"class-name":{pattern:/(\bpic(?:ture)?\s+)(?:(?:[-\w$/,:*+<>]|\.(?!\s|$))(?:\(\d+\))?)+/i,lookbehind:!0,inside:{number:{pattern:/(\()\d+/,lookbehind:!0},punctuation:/[()]/}},keyword:{pattern:/(^|[^\w-])(?:ABORT|ACCEPT|ACCESS|ADD|ADDRESS|ADVANCING|AFTER|ALIGNED|ALL|ALPHABET|ALPHABETIC|ALPHABETIC-LOWER|ALPHABETIC-UPPER|ALPHANUMERIC|ALPHANUMERIC-EDITED|ALSO|ALTER|ALTERNATE|ANY|ARE|AREA|AREAS|AS|ASCENDING|ASCII|ASSIGN|ASSOCIATED-DATA|ASSOCIATED-DATA-LENGTH|AT|ATTRIBUTE|AUTHOR|AUTO|AUTO-SKIP|BACKGROUND-COLOR|BACKGROUND-COLOUR|BASIS|BEEP|BEFORE|BEGINNING|BELL|BINARY|BIT|BLANK|BLINK|BLOCK|BOTTOM|BOUNDS|BY|BYFUNCTION|BYTITLE|CALL|CANCEL|CAPABLE|CCSVERSION|CD|CF|CH|CHAINING|CHANGED|CHANNEL|CHARACTER|CHARACTERS|CLASS|CLASS-ID|CLOCK-UNITS|CLOSE|CLOSE-DISPOSITION|COBOL|CODE|CODE-SET|COL|COLLATING|COLUMN|COM-REG|COMMA|COMMITMENT|COMMON|COMMUNICATION|COMP|COMP-1|COMP-2|COMP-3|COMP-4|COMP-5|COMPUTATIONAL|COMPUTATIONAL-1|COMPUTATIONAL-2|COMPUTATIONAL-3|COMPUTATIONAL-4|COMPUTATIONAL-5|COMPUTE|CONFIGURATION|CONTAINS|CONTENT|CONTINUE|CONTROL|CONTROL-POINT|CONTROLS|CONVENTION|CONVERTING|COPY|CORR|CORRESPONDING|COUNT|CRUNCH|CURRENCY|CURSOR|DATA|DATA-BASE|DATE|DATE-COMPILED|DATE-WRITTEN|DAY|DAY-OF-WEEK|DBCS|DE|DEBUG-CONTENTS|DEBUG-ITEM|DEBUG-LINE|DEBUG-NAME|DEBUG-SUB-1|DEBUG-SUB-2|DEBUG-SUB-3|DEBUGGING|DECIMAL-POINT|DECLARATIVES|DEFAULT|DEFAULT-DISPLAY|DEFINITION|DELETE|DELIMITED|DELIMITER|DEPENDING|DESCENDING|DESTINATION|DETAIL|DFHRESP|DFHVALUE|DISABLE|DISK|DISPLAY|DISPLAY-1|DIVIDE|DIVISION|DONTCARE|DOUBLE|DOWN|DUPLICATES|DYNAMIC|EBCDIC|EGCS|EGI|ELSE|EMI|EMPTY-CHECK|ENABLE|END|END-ACCEPT|END-ADD|END-CALL|END-COMPUTE|END-DELETE|END-DIVIDE|END-EVALUATE|END-IF|END-MULTIPLY|END-OF-PAGE|END-PERFORM|END-READ|END-RECEIVE|END-RETURN|END-REWRITE|END-SEARCH|END-START|END-STRING|END-SUBTRACT|END-UNSTRING|END-WRITE|ENDING|ENTER|ENTRY|ENTRY-PROCEDURE|ENVIRONMENT|EOL|EOP|EOS|ERASE|ERROR|ESCAPE|ESI|EVALUATE|EVENT|EVERY|EXCEPTION|EXCLUSIVE|EXHIBIT|EXIT|EXPORT|EXTEND|EXTENDED|EXTERNAL|FD|FILE|FILE-CONTROL|FILLER|FINAL|FIRST|FOOTING|FOR|FOREGROUND-COLOR|FOREGROUND-COLOUR|FROM|FULL|FUNCTION|FUNCTION-POINTER|FUNCTIONNAME|GENERATE|GIVING|GLOBAL|GO|GOBACK|GRID|GROUP|HEADING|HIGH-VALUE|HIGH-VALUES|HIGHLIGHT|I-O|I-O-CONTROL|ID|IDENTIFICATION|IF|IMPLICIT|IMPORT|IN|INDEX|INDEXED|INDICATE|INITIAL|INITIALIZE|INITIATE|INPUT|INPUT-OUTPUT|INSPECT|INSTALLATION|INTEGER|INTO|INVALID|INVOKE|IS|JUST|JUSTIFIED|KANJI|KEPT|KEY|KEYBOARD|LABEL|LANGUAGE|LAST|LB|LD|LEADING|LEFT|LEFTLINE|LENGTH|LENGTH-CHECK|LIBACCESS|LIBPARAMETER|LIBRARY|LIMIT|LIMITS|LINAGE|LINAGE-COUNTER|LINE|LINE-COUNTER|LINES|LINKAGE|LIST|LOCAL|LOCAL-STORAGE|LOCK|LONG-DATE|LONG-TIME|LOW-VALUE|LOW-VALUES|LOWER|LOWLIGHT|MEMORY|MERGE|MESSAGE|MMDDYYYY|MODE|MODULES|MORE-LABELS|MOVE|MULTIPLE|MULTIPLY|NAMED|NATIONAL|NATIONAL-EDITED|NATIVE|NEGATIVE|NETWORK|NEXT|NO|NO-ECHO|NULL|NULLS|NUMBER|NUMERIC|NUMERIC-DATE|NUMERIC-EDITED|NUMERIC-TIME|OBJECT-COMPUTER|OCCURS|ODT|OF|OFF|OMITTED|ON|OPEN|OPTIONAL|ORDER|ORDERLY|ORGANIZATION|OTHER|OUTPUT|OVERFLOW|OVERLINE|OWN|PACKED-DECIMAL|PADDING|PAGE|PAGE-COUNTER|PASSWORD|PERFORM|PF|PH|PIC|PICTURE|PLUS|POINTER|PORT|POSITION|POSITIVE|PRINTER|PRINTING|PRIVATE|PROCEDURE|PROCEDURE-POINTER|PROCEDURES|PROCEED|PROCESS|PROGRAM|PROGRAM-ID|PROGRAM-LIBRARY|PROMPT|PURGE|QUEUE|QUOTE|QUOTES|RANDOM|RD|READ|READER|REAL|RECEIVE|RECEIVED|RECORD|RECORDING|RECORDS|RECURSIVE|REDEFINES|REEL|REF|REFERENCE|REFERENCES|RELATIVE|RELEASE|REMAINDER|REMARKS|REMOTE|REMOVAL|REMOVE|RENAMES|REPLACE|REPLACING|REPORT|REPORTING|REPORTS|REQUIRED|RERUN|RESERVE|RESET|RETURN|RETURN-CODE|RETURNING|REVERSE-VIDEO|REVERSED|REWIND|REWRITE|RF|RH|RIGHT|ROUNDED|RUN|SAME|SAVE|SCREEN|SD|SEARCH|SECTION|SECURE|SECURITY|SEGMENT|SEGMENT-LIMIT|SELECT|SEND|SENTENCE|SEPARATE|SEQUENCE|SEQUENTIAL|SET|SHARED|SHAREDBYALL|SHAREDBYRUNUNIT|SHARING|SHIFT-IN|SHIFT-OUT|SHORT-DATE|SIGN|SIZE|SORT|SORT-CONTROL|SORT-CORE-SIZE|SORT-FILE-SIZE|SORT-MERGE|SORT-MESSAGE|SORT-MODE-SIZE|SORT-RETURN|SOURCE|SOURCE-COMPUTER|SPACE|SPACES|SPECIAL-NAMES|STANDARD|STANDARD-1|STANDARD-2|START|STATUS|STOP|STRING|SUB-QUEUE-1|SUB-QUEUE-2|SUB-QUEUE-3|SUBTRACT|SUM|SUPPRESS|SYMBOL|SYMBOLIC|SYNC|SYNCHRONIZED|TABLE|TALLY|TALLYING|TAPE|TASK|TERMINAL|TERMINATE|TEST|TEXT|THEN|THREAD|THREAD-LOCAL|THROUGH|THRU|TIME|TIMER|TIMES|TITLE|TO|TODAYS-DATE|TODAYS-NAME|TOP|TRAILING|TRUNCATED|TYPE|TYPEDEF|UNDERLINE|UNIT|UNSTRING|UNTIL|UP|UPON|USAGE|USE|USING|VALUE|VALUES|VARYING|VIRTUAL|WAIT|WHEN|WHEN-COMPILED|WITH|WORDS|WORKING-STORAGE|WRITE|YEAR|YYYYDDD|YYYYMMDD|ZERO-FILL|ZEROES|ZEROS)(?![\w-])/i,lookbehind:!0},boolean:{pattern:/(^|[^\w-])(?:false|true)(?![\w-])/i,lookbehind:!0},number:{pattern:/(^|[^\w-])(?:[+-]?(?:(?:\d+(?:[.,]\d+)?|[.,]\d+)(?:e[+-]?\d+)?|zero))(?![\w-])/i,lookbehind:!0},operator:[/<>|[<>]=?|[=+*/&]/,{pattern:/(^|[^\w-])(?:-|and|equal|greater|less|not|or|than)(?![\w-])/i,lookbehind:!0}],punctuation:/[.:,()]/}}cR.displayName="coffeescript";cR.aliases=["coffee"];function cR(n){n.register(_i),(function(e){var t=/#(?!\{).+/,r={pattern:/#\{[^}]+\}/,alias:"variable"};e.languages.coffeescript=e.languages.extend("javascript",{comment:t,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:r}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),e.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:t,interpolation:r}}}),e.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:e.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:r}}]}),e.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete e.languages.coffeescript["template-string"],e.languages.coffee=e.languages.coffeescript})(n)}dR.displayName="concurnas";dR.aliases=["conc"];function dR(n){n.languages.concurnas={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\/\/.*)/,lookbehind:!0,greedy:!0},langext:{pattern:/\b\w+\s*\|\|[\s\S]+?\|\|/,greedy:!0,inside:{"class-name":/^\w+/,string:{pattern:/(^\s*\|\|)[\s\S]+(?=\|\|$)/,lookbehind:!0},punctuation:/\|\|/}},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/,lookbehind:!0},keyword:/\b(?:abstract|actor|also|annotation|assert|async|await|bool|boolean|break|byte|case|catch|changed|char|class|closed|constant|continue|def|default|del|double|elif|else|enum|every|extends|false|finally|float|for|from|global|gpudef|gpukernel|if|import|in|init|inject|int|lambda|local|long|loop|match|new|nodefault|null|of|onchange|open|out|override|package|parfor|parforsync|post|pre|private|protected|provide|provider|public|return|shared|short|single|size_t|sizeof|super|sync|this|throw|trait|trans|transient|true|try|typedef|unchecked|using|val|var|void|while|with)\b/,boolean:/\b(?:false|true)\b/,number:/\b0b[01][01_]*L?\b|\b0x(?:[\da-f_]*\.)?[\da-f_p+-]+\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfls]?/i,punctuation:/[{}[\];(),.:]/,operator:/<==|>==|=>|->|<-|<>|&==|&<>|\?:?|\.\?|\+\+|--|[-+*/=<>]=?|[!^~]|\b(?:and|as|band|bor|bxor|comp|is|isnot|mod|or)\b=?/,annotation:{pattern:/@(?:\w+:)?(?:\w+|\[[^\]]+\])?/,alias:"builtin"}},n.languages.insertBefore("concurnas","langext",{"regex-literal":{pattern:/\br("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:n.languages.concurnas},regex:/[\s\S]+/}},"string-literal":{pattern:/(?:\B|\bs)("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:n.languages.concurnas},string:/[\s\S]+/}}}),n.languages.conc=n.languages.concurnas}hR.displayName="csp";hR.aliases=[];function hR(n){(function(e){function t(r){return RegExp(/([ \t])/.source+"(?:"+r+")"+/(?=[\s;]|$)/.source,"i")}e.languages.csp={directive:{pattern:/(^|[\s;])(?:base-uri|block-all-mixed-content|(?:child|connect|default|font|frame|img|manifest|media|object|prefetch|script|style|worker)-src|disown-opener|form-action|frame-(?:ancestors|options)|input-protection(?:-(?:clip|selectors))?|navigate-to|plugin-types|policy-uri|referrer|reflected-xss|report-(?:to|uri)|require-sri-for|sandbox|(?:script|style)-src-(?:attr|elem)|upgrade-insecure-requests)(?=[\s;]|$)/i,lookbehind:!0,alias:"property"},scheme:{pattern:t(/[a-z][a-z0-9.+-]*:/.source),lookbehind:!0},none:{pattern:t(/'none'/.source),lookbehind:!0,alias:"keyword"},nonce:{pattern:t(/'nonce-[-+/\w=]+'/.source),lookbehind:!0,alias:"number"},hash:{pattern:t(/'sha(?:256|384|512)-[-+/\w=]+'/.source),lookbehind:!0,alias:"number"},host:{pattern:t(/[a-z][a-z0-9.+-]*:\/\/[^\s;,']*/.source+"|"+/\*[^\s;,']*/.source+"|"+/[a-z0-9-]+(?:\.[a-z0-9-]+)+(?::[\d*]+)?(?:\/[^\s;,']*)?/.source),lookbehind:!0,alias:"url",inside:{important:/\*/}},keyword:[{pattern:t(/'unsafe-[a-z-]+'/.source),lookbehind:!0,alias:"unsafe"},{pattern:t(/'[a-z-]+'/.source),lookbehind:!0,alias:"safe"}],punctuation:/;/}})(n)}pR.displayName="cooklang";pR.aliases=[];function pR(n){(function(e){var t=/(?:(?!\s)[\d$+<=a-zA-Z\x80-\uFFFF])+/.source,r=/[^{}@#]+/.source,i=/\{[^}#@]*\}/.source,s=r+i,a=/(?:h|hours|hrs|m|min|minutes)/.source,o={pattern:/\{[^{}]*\}/,inside:{amount:{pattern:/([\{|])[^{}|*%]+/,lookbehind:!0,alias:"number"},unit:{pattern:/(%)[^}]+/,lookbehind:!0,alias:"symbol"},"servings-scaler":{pattern:/\*/,alias:"operator"},"servings-alternative-separator":{pattern:/\|/,alias:"operator"},"unit-separator":{pattern:/(?:%|(\*)%)/,lookbehind:!0,alias:"operator"},punctuation:/[{}]/}};e.languages.cooklang={comment:{pattern:/\[-[\s\S]*?-\]|--.*/,greedy:!0},meta:{pattern:/>>.*:.*/,inside:{property:{pattern:/(>>\s*)[^\s:](?:[^:]*[^\s:])?/,lookbehind:!0}}},"cookware-group":{pattern:new RegExp("#(?:"+s+"|"+t+")"),inside:{cookware:{pattern:new RegExp("(^#)(?:"+r+")"),lookbehind:!0,alias:"variable"},"cookware-keyword":{pattern:/^#/,alias:"keyword"},"quantity-group":{pattern:new RegExp(/\{[^{}@#]*\}/),inside:{quantity:{pattern:new RegExp(/(^\{)/.source+r),lookbehind:!0,alias:"number"},punctuation:/[{}]/}}}},"ingredient-group":{pattern:new RegExp("@(?:"+s+"|"+t+")"),inside:{ingredient:{pattern:new RegExp("(^@)(?:"+r+")"),lookbehind:!0,alias:"variable"},"ingredient-keyword":{pattern:/^@/,alias:"keyword"},"amount-group":o}},"timer-group":{pattern:/~(?!\s)[^@#~{}]*\{[^{}]*\}/,inside:{timer:{pattern:/(^~)[^{]+/,lookbehind:!0,alias:"variable"},"duration-group":{pattern:/\{[^{}]*\}/,inside:{punctuation:/[{}]/,unit:{pattern:new RegExp(/(%\s*)/.source+a+/\b/.source),lookbehind:!0,alias:"symbol"},operator:/%/,duration:{pattern:/\d+/,alias:"number"}}},"timer-keyword":{pattern:/^~/,alias:"keyword"}}}}})(n)}fR.displayName="coq";fR.aliases=[];function fR(n){(function(e){for(var t=/\(\*(?:[^(*]|\((?!\*)|\*(?!\))|<self>)*\*\)/.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,"[]"),e.languages.coq={comment:RegExp(t),string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},attribute:[{pattern:RegExp(/#\[(?:[^\[\]("]|"(?:[^"]|"")*"(?!")|\((?!\*)|<comment>)*\]/.source.replace(/<comment>/g,function(){return t})),greedy:!0,alias:"attr-name",inside:{comment:RegExp(t),string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},operator:/=/,punctuation:/^#\[|\]$|[,()]/}},{pattern:/\b(?:Cumulative|Global|Local|Monomorphic|NonCumulative|Polymorphic|Private|Program)\b/,alias:"attr-name"}],keyword:/\b(?:Abort|About|Add|Admit|Admitted|All|Arguments|As|Assumptions|Axiom|Axioms|Back|BackTo|Backtrace|BinOp|BinOpSpec|BinRel|Bind|Blacklist|Canonical|Case|Cd|Check|Class|Classes|Close|CoFixpoint|CoInductive|Coercion|Coercions|Collection|Combined|Compute|Conjecture|Conjectures|Constant|Constants|Constraint|Constructors|Context|Corollary|Create|CstOp|Custom|Cut|Debug|Declare|Defined|Definition|Delimit|Dependencies|Dependent|Derive|Diffs|Drop|Elimination|End|Entry|Equality|Eval|Example|Existential|Existentials|Existing|Export|Extern|Extraction|Fact|Fail|Field|File|Firstorder|Fixpoint|Flags|Focus|From|Funclass|Function|Functional|GC|Generalizable|Goal|Grab|Grammar|Graph|Guarded|Haskell|Heap|Hide|Hint|HintDb|Hints|Hypotheses|Hypothesis|IF|Identity|Immediate|Implicit|Implicits|Import|Include|Induction|Inductive|Infix|Info|Initial|InjTyp|Inline|Inspect|Instance|Instances|Intro|Intros|Inversion|Inversion_clear|JSON|Language|Left|Lemma|Let|Lia|Libraries|Library|Load|LoadPath|Locate|Ltac|Ltac2|ML|Match|Method|Minimality|Module|Modules|Morphism|Next|NoInline|Notation|Number|OCaml|Obligation|Obligations|Opaque|Open|Optimize|Parameter|Parameters|Parametric|Path|Paths|Prenex|Preterm|Primitive|Print|Profile|Projections|Proof|Prop|PropBinOp|PropOp|PropUOp|Property|Proposition|Pwd|Qed|Quit|Rec|Record|Recursive|Redirect|Reduction|Register|Relation|Remark|Remove|Require|Reserved|Reset|Resolve|Restart|Rewrite|Right|Ring|Rings|SProp|Saturate|Save|Scheme|Scope|Scopes|Search|SearchHead|SearchPattern|SearchRewrite|Section|Separate|Set|Setoid|Show|Signatures|Solve|Solver|Sort|Sortclass|Sorted|Spec|Step|Strategies|Strategy|String|Structure|SubClass|Subgraph|SuchThat|Tactic|Term|TestCompile|Theorem|Time|Timeout|To|Transparent|Type|Typeclasses|Types|Typing|UnOp|UnOpSpec|Undelimit|Undo|Unfocus|Unfocused|Unfold|Universe|Universes|Unshelve|Variable|Variables|Variant|Verbose|View|Visibility|Zify|_|apply|as|at|by|cofix|else|end|exists|exists2|fix|for|forall|fun|if|in|let|match|measure|move|removed|return|struct|then|using|wf|where|with)\b/,number:/\b(?:0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]+)?(?:p[+-]?\d[\d_]*)?|\d[\d_]*(?:\.[\d_]+)?(?:e[+-]?\d[\d_]*)?)\b/i,punct:{pattern:/@\{|\{\||\[=|:>/,alias:"punctuation"},operator:/\/\\|\\\/|\.{2,3}|:{1,2}=|\*\*|[-=]>|<(?:->?|[+:=>]|<:)|>(?:=|->)|\|[-|]?|[-!%&*+/<=>?@^~']/,punctuation:/\.\(|`\(|@\{|`\{|\{\||\[=|:>|[:.,;(){}\[\]]/}})(n)}Ph.displayName="ruby";Ph.aliases=["rb"];function Ph(n){n.register(cn),(function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var r="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",i=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+r+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+i),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+i+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+r),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+r),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby})(n)}gR.displayName="crystal";gR.aliases=[];function gR(n){n.register(Ph),(function(e){e.languages.crystal=e.languages.extend("ruby",{keyword:[/\b(?:__DIR__|__END_LINE__|__FILE__|__LINE__|abstract|alias|annotation|as|asm|begin|break|case|class|def|do|else|elsif|end|ensure|enum|extend|for|fun|if|ifdef|include|instance_sizeof|lib|macro|module|next|of|out|pointerof|private|protected|ptr|require|rescue|return|select|self|sizeof|struct|super|then|type|typeof|undef|uninitialized|union|unless|until|when|while|with|yield)\b/,{pattern:/(\.\s*)(?:is_a|responds_to)\?/,lookbehind:!0}],number:/\b(?:0b[01_]*[01]|0o[0-7_]*[0-7]|0x[\da-fA-F_]*[\da-fA-F]|(?:\d(?:[\d_]*\d)?)(?:\.[\d_]*\d)?(?:[eE][+-]?[\d_]*\d)?)(?:_(?:[uif](?:8|16|32|64))?)?\b/,operator:[/->/,e.languages.ruby.operator],punctuation:/[(){}[\].,;\\]/}),e.languages.insertBefore("crystal","string-literal",{attribute:{pattern:/@\[.*?\]/,inside:{delimiter:{pattern:/^@\[|\]$/,alias:"punctuation"},attribute:{pattern:/^(\s*)\w+/,lookbehind:!0,alias:"class-name"},args:{pattern:/\S(?:[\s\S]*\S)?/,inside:e.languages.crystal}}},expansion:{pattern:/\{(?:\{.*?\}|%.*?%)\}/,inside:{content:{pattern:/^(\{.)[\s\S]+(?=.\}$)/,lookbehind:!0,inside:e.languages.crystal},delimiter:{pattern:/^\{[\{%]|[\}%]\}$/,alias:"operator"}}},char:{pattern:/'(?:[^\\\r\n]{1,2}|\\(?:.|u(?:[A-Fa-f0-9]{1,4}|\{[A-Fa-f0-9]{1,6}\})))'/,greedy:!0}})})(n)}mR.displayName="css-extras";mR.aliases=[];function mR(n){n.register(cc),(function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,r;e.languages.css.selector={pattern:e.languages.css.selector.pattern,lookbehind:!0,inside:r={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp(`\\[(?:[^[\\]"']|`+t.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[t,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},e.languages.css.atrule.inside["selector-function-argument"].inside=r,e.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var i={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},s={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};e.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|RebeccaPurple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:i,number:s,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:i,number:s})})(n)}yR.displayName="csv";yR.aliases=[];function yR(n){n.languages.csv={value:/[^\r\n,"]+|"(?:[^"]|"")*"(?!")/,punctuation:/,/}}bR.displayName="cue";bR.aliases=[];function bR(n){(function(e){var t=/\\(?:(?!\2)|\2(?:[^()\r\n]|\([^()]*\)))/.source,r=/"""(?:[^\\"]|"(?!""\2)|<esc>)*"""/.source+"|"+/'''(?:[^\\']|'(?!''\2)|<esc>)*'''/.source+"|"+/"(?:[^\\\r\n"]|"(?!\2)|<esc>)*"/.source+"|"+/'(?:[^\\\r\n']|'(?!\2)|<esc>)*'/.source,i="(?:"+r.replace(/<esc>/g,t)+")";e.languages.cue={comment:{pattern:/\/\/.*/,greedy:!0},"string-literal":{pattern:RegExp(/(^|[^#"'\\])(#*)/.source+i+/(?!["'])\2/.source),lookbehind:!0,greedy:!0,inside:{escape:{pattern:/(?=[\s\S]*["'](#*)$)\\\1(?:U[a-fA-F0-9]{1,8}|u[a-fA-F0-9]{1,4}|x[a-fA-F0-9]{1,2}|\d{2,3}|[^(])/,greedy:!0,alias:"string"},interpolation:{pattern:/(?=[\s\S]*["'](#*)$)\\\1\([^()]*\)/,greedy:!0,inside:{punctuation:/^\\#*\(|\)$/,expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},keyword:{pattern:/(^|[^\w$])(?:for|if|import|in|let|null|package)(?![\w$])/,lookbehind:!0},boolean:{pattern:/(^|[^\w$])(?:false|true)(?![\w$])/,lookbehind:!0},builtin:{pattern:/(^|[^\w$])(?:bool|bytes|float|float(?:32|64)|u?int(?:8|16|32|64|128)?|number|rune|string)(?![\w$])/,lookbehind:!0},attribute:{pattern:/@[\w$]+(?=\s*\()/,alias:"function"},function:{pattern:/(^|[^\w$])[a-z_$][\w$]*(?=\s*\()/i,lookbehind:!0},number:{pattern:/(^|[^\w$.])(?:0b[01]+(?:_[01]+)*|0o[0-7]+(?:_[0-7]+)*|0[xX][0-9A-Fa-f]+(?:_[0-9A-Fa-f]+)*|(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[eE][+-]?\d+(?:_\d+)*)?(?:[KMGTP]i?)?)(?![\w$])/,lookbehind:!0},operator:/\.{3}|_\|_|&&?|\|\|?|[=!]~|[<>=!]=?|[+\-*/?]/,punctuation:/[()[\]{},.:]/},e.languages.cue["string-literal"].inside.interpolation.inside.expression.inside=e.languages.cue})(n)}_R.displayName="cypher";_R.aliases=[];function _R(n){n.languages.cypher={comment:/\/\/.*/,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/,greedy:!0},"class-name":{pattern:/(:\s*)(?:\w+|`(?:[^`\\\r\n])*`)(?=\s*[{):])/,lookbehind:!0,greedy:!0},relationship:{pattern:/(-\[\s*(?:\w+\s*|`(?:[^`\\\r\n])*`\s*)?:\s*|\|\s*:\s*)(?:\w+|`(?:[^`\\\r\n])*`)/,lookbehind:!0,greedy:!0,alias:"property"},identifier:{pattern:/`(?:[^`\\\r\n])*`/,greedy:!0},variable:/\$\w+/,keyword:/\b(?:ADD|ALL|AND|AS|ASC|ASCENDING|ASSERT|BY|CALL|CASE|COMMIT|CONSTRAINT|CONTAINS|CREATE|CSV|DELETE|DESC|DESCENDING|DETACH|DISTINCT|DO|DROP|ELSE|END|ENDS|EXISTS|FOR|FOREACH|IN|INDEX|IS|JOIN|KEY|LIMIT|LOAD|MANDATORY|MATCH|MERGE|NODE|NOT|OF|ON|OPTIONAL|OR|ORDER(?=\s+BY)|PERIODIC|REMOVE|REQUIRE|RETURN|SCALAR|SCAN|SET|SKIP|START|STARTS|THEN|UNION|UNIQUE|UNWIND|USING|WHEN|WHERE|WITH|XOR|YIELD)\b/i,function:/\b\w+\b(?=\s*\()/,boolean:/\b(?:false|null|true)\b/i,number:/\b(?:0x[\da-fA-F]+|\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)\b/,operator:/:|<--?|--?>?|<>|=~?|[<>]=?|[+*/%^|]|\.\.\.?/,punctuation:/[()[\]{},;.]/}}vR.displayName="d";vR.aliases=[];function vR(n){n.register(cn),n.languages.d=n.languages.extend("clike",{comment:[{pattern:/^\s*#!.+/,greedy:!0},{pattern:RegExp(/(^|[^\\])/.source+"(?:"+[/\/\+(?:\/\+(?:[^+]|\+(?!\/))*\+\/|(?!\/\+)[\s\S])*?\+\//.source,/\/\/.*/.source,/\/\*[\s\S]*?\*\//.source].join("|")+")"),lookbehind:!0,greedy:!0}],string:[{pattern:RegExp([/\b[rx]"(?:\\[\s\S]|[^\\"])*"[cwd]?/.source,/\bq"(?:\[[\s\S]*?\]|\([\s\S]*?\)|<[\s\S]*?>|\{[\s\S]*?\})"/.source,/\bq"((?!\d)\w+)$[\s\S]*?^\1"/.source,/\bq"(.)[\s\S]*?\2"/.source,/(["`])(?:\\[\s\S]|(?!\3)[^\\])*\3[cwd]?/.source].join("|"),"m"),greedy:!0},{pattern:/\bq\{(?:\{[^{}]*\}|[^{}])*\}/,greedy:!0,alias:"token-string"}],keyword:/\$|\b(?:__(?:(?:DATE|EOF|FILE|FUNCTION|LINE|MODULE|PRETTY_FUNCTION|TIMESTAMP|TIME|VENDOR|VERSION)__|gshared|parameters|traits|vector)|abstract|alias|align|asm|assert|auto|body|bool|break|byte|case|cast|catch|cdouble|cent|cfloat|char|class|const|continue|creal|dchar|debug|default|delegate|delete|deprecated|do|double|dstring|else|enum|export|extern|false|final|finally|float|for|foreach|foreach_reverse|function|goto|idouble|if|ifloat|immutable|import|inout|int|interface|invariant|ireal|lazy|long|macro|mixin|module|new|nothrow|null|out|override|package|pragma|private|protected|ptrdiff_t|public|pure|real|ref|return|scope|shared|short|size_t|static|string|struct|super|switch|synchronized|template|this|throw|true|try|typedef|typeid|typeof|ubyte|ucent|uint|ulong|union|unittest|ushort|version|void|volatile|wchar|while|with|wstring)\b/,number:[/\b0x\.?[a-f\d_]+(?:(?!\.\.)\.[a-f\d_]*)?(?:p[+-]?[a-f\d_]+)?[ulfi]{0,4}/i,{pattern:/((?:\.\.)?)(?:\b0b\.?|\b|\.)\d[\d_]*(?:(?!\.\.)\.[\d_]*)?(?:e[+-]?\d[\d_]*)?[ulfi]{0,4}/i,lookbehind:!0}],operator:/\|[|=]?|&[&=]?|\+[+=]?|-[-=]?|\.?\.\.|=[>=]?|!(?:i[ns]\b|<>?=?|>=?|=)?|\bi[ns]\b|(?:<[<>]?|>>?>?|\^\^|[*\/%^~])=?/}),n.languages.insertBefore("d","string",{char:/'(?:\\(?:\W|\w+)|[^\\])'/}),n.languages.insertBefore("d","keyword",{property:/\B@\w*/}),n.languages.insertBefore("d","function",{register:{pattern:/\b(?:[ABCD][LHX]|E?(?:BP|DI|SI|SP)|[BS]PL|[ECSDGF]S|CR[0234]|[DS]IL|DR[012367]|E[ABCD]X|X?MM[0-7]|R(?:1[0-5]|[89])[BWD]?|R[ABCD]X|R[BS]P|R[DS]I|TR[3-7]|XMM(?:1[0-5]|[89])|YMM(?:1[0-5]|\d))\b|\bST(?:\([0-7]\)|\b)/,alias:"variable"}})}xR.displayName="dart";xR.aliases=[];function xR(n){n.register(cn),(function(e){var t=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],r=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,i={pattern:RegExp(r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};e.languages.dart=e.languages.extend("clike",{"class-name":[i,{pattern:RegExp(r+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:i.inside}],keyword:t,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),e.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.dart}}},string:/[\s\S]+/}},string:void 0}),e.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),e.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":i,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})})(n)}SR.displayName="dataweave";SR.aliases=[];function SR(n){(function(e){e.languages.dataweave={url:/\b[A-Za-z]+:\/\/[\w/:.?=&-]+|\burn:[\w:.?=&-]+/,property:{pattern:/(?:\b\w+#)?(?:"(?:\\.|[^\\"\r\n])*"|\b\w+)(?=\s*[:@])/,greedy:!0},string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},"mime-type":/\b(?:application|audio|image|multipart|text|video)\/[\w+-]+/,date:{pattern:/\|[\w:+-]+\|/,greedy:!0},comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],regex:{pattern:/\/(?:[^\\\/\r\n]|\\[^\r\n])+\//,greedy:!0},keyword:/\b(?:and|as|at|case|do|else|fun|if|input|is|match|not|ns|null|or|output|type|unless|update|using|var)\b/,function:/\b[A-Z_]\w*(?=\s*\()/i,number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\];(),.:@]/,operator:/<<|>>|->|[<>~=]=?|!=|--?-?|\+\+?|!|\?/,boolean:/\b(?:false|true)\b/}})(n)}ER.displayName="dax";ER.aliases=[];function ER(n){n.languages.dax={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/).*)/,lookbehind:!0},"data-field":{pattern:/'(?:[^']|'')*'(?!')(?:\[[ \w\xA0-\uFFFF]+\])?|\w+\[[ \w\xA0-\uFFFF]+\]/,alias:"symbol"},measure:{pattern:/\[[ \w\xA0-\uFFFF]+\]/,alias:"constant"},string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},function:/\b(?:ABS|ACOS|ACOSH|ACOT|ACOTH|ADDCOLUMNS|ADDMISSINGITEMS|ALL|ALLCROSSFILTERED|ALLEXCEPT|ALLNOBLANKROW|ALLSELECTED|AND|APPROXIMATEDISTINCTCOUNT|ASIN|ASINH|ATAN|ATANH|AVERAGE|AVERAGEA|AVERAGEX|BETA\.DIST|BETA\.INV|BLANK|CALCULATE|CALCULATETABLE|CALENDAR|CALENDARAUTO|CEILING|CHISQ\.DIST|CHISQ\.DIST\.RT|CHISQ\.INV|CHISQ\.INV\.RT|CLOSINGBALANCEMONTH|CLOSINGBALANCEQUARTER|CLOSINGBALANCEYEAR|COALESCE|COMBIN|COMBINA|COMBINEVALUES|CONCATENATE|CONCATENATEX|CONFIDENCE\.NORM|CONFIDENCE\.T|CONTAINS|CONTAINSROW|CONTAINSSTRING|CONTAINSSTRINGEXACT|CONVERT|COS|COSH|COT|COTH|COUNT|COUNTA|COUNTAX|COUNTBLANK|COUNTROWS|COUNTX|CROSSFILTER|CROSSJOIN|CURRENCY|CURRENTGROUP|CUSTOMDATA|DATATABLE|DATE|DATEADD|DATEDIFF|DATESBETWEEN|DATESINPERIOD|DATESMTD|DATESQTD|DATESYTD|DATEVALUE|DAY|DEGREES|DETAILROWS|DISTINCT|DISTINCTCOUNT|DISTINCTCOUNTNOBLANK|DIVIDE|EARLIER|EARLIEST|EDATE|ENDOFMONTH|ENDOFQUARTER|ENDOFYEAR|EOMONTH|ERROR|EVEN|EXACT|EXCEPT|EXP|EXPON\.DIST|FACT|FALSE|FILTER|FILTERS|FIND|FIRSTDATE|FIRSTNONBLANK|FIRSTNONBLANKVALUE|FIXED|FLOOR|FORMAT|GCD|GENERATE|GENERATEALL|GENERATESERIES|GEOMEAN|GEOMEANX|GROUPBY|HASONEFILTER|HASONEVALUE|HOUR|IF|IF\.EAGER|IFERROR|IGNORE|INT|INTERSECT|ISBLANK|ISCROSSFILTERED|ISEMPTY|ISERROR|ISEVEN|ISFILTERED|ISINSCOPE|ISLOGICAL|ISNONTEXT|ISNUMBER|ISO\.CEILING|ISODD|ISONORAFTER|ISSELECTEDMEASURE|ISSUBTOTAL|ISTEXT|KEEPFILTERS|KEYWORDMATCH|LASTDATE|LASTNONBLANK|LASTNONBLANKVALUE|LCM|LEFT|LEN|LN|LOG|LOG10|LOOKUPVALUE|LOWER|MAX|MAXA|MAXX|MEDIAN|MEDIANX|MID|MIN|MINA|MINUTE|MINX|MOD|MONTH|MROUND|NATURALINNERJOIN|NATURALLEFTOUTERJOIN|NEXTDAY|NEXTMONTH|NEXTQUARTER|NEXTYEAR|NONVISUAL|NORM\.DIST|NORM\.INV|NORM\.S\.DIST|NORM\.S\.INV|NOT|NOW|ODD|OPENINGBALANCEMONTH|OPENINGBALANCEQUARTER|OPENINGBALANCEYEAR|OR|PARALLELPERIOD|PATH|PATHCONTAINS|PATHITEM|PATHITEMREVERSE|PATHLENGTH|PERCENTILE\.EXC|PERCENTILE\.INC|PERCENTILEX\.EXC|PERCENTILEX\.INC|PERMUT|PI|POISSON\.DIST|POWER|PREVIOUSDAY|PREVIOUSMONTH|PREVIOUSQUARTER|PREVIOUSYEAR|PRODUCT|PRODUCTX|QUARTER|QUOTIENT|RADIANS|RAND|RANDBETWEEN|RANK\.EQ|RANKX|RELATED|RELATEDTABLE|REMOVEFILTERS|REPLACE|REPT|RIGHT|ROLLUP|ROLLUPADDISSUBTOTAL|ROLLUPGROUP|ROLLUPISSUBTOTAL|ROUND|ROUNDDOWN|ROUNDUP|ROW|SAMEPERIODLASTYEAR|SAMPLE|SEARCH|SECOND|SELECTCOLUMNS|SELECTEDMEASURE|SELECTEDMEASUREFORMATSTRING|SELECTEDMEASURENAME|SELECTEDVALUE|SIGN|SIN|SINH|SQRT|SQRTPI|STARTOFMONTH|STARTOFQUARTER|STARTOFYEAR|STDEV\.P|STDEV\.S|STDEVX\.P|STDEVX\.S|SUBSTITUTE|SUBSTITUTEWITHINDEX|SUM|SUMMARIZE|SUMMARIZECOLUMNS|SUMX|SWITCH|T\.DIST|T\.DIST\.2T|T\.DIST\.RT|T\.INV|T\.INV\.2T|TAN|TANH|TIME|TIMEVALUE|TODAY|TOPN|TOPNPERLEVEL|TOPNSKIP|TOTALMTD|TOTALQTD|TOTALYTD|TREATAS|TRIM|TRUE|TRUNC|UNICHAR|UNICODE|UNION|UPPER|USERELATIONSHIP|USERNAME|USEROBJECTID|USERPRINCIPALNAME|UTCNOW|UTCTODAY|VALUE|VALUES|VAR\.P|VAR\.S|VARX\.P|VARX\.S|WEEKDAY|WEEKNUM|XIRR|XNPV|YEAR|YEARFRAC)(?=\s*\()/i,keyword:/\b(?:DEFINE|EVALUATE|MEASURE|ORDER\s+BY|RETURN|VAR|START\s+AT|ASC|DESC)\b/i,boolean:{pattern:/\b(?:FALSE|NULL|TRUE)\b/i,alias:"constant"},number:/\b\d+(?:\.\d*)?|\B\.\d+\b/,operator:/:=|[-+*\/=^]|&&?|\|\||<(?:=>?|<|>)?|>[>=]?|\b(?:IN|NOT)\b/i,punctuation:/[;\[\](){}`,.]/}}TR.displayName="dhall";TR.aliases=[];function TR(n){n.languages.dhall={comment:/--.*|\{-(?:[^-{]|-(?!\})|\{(?!-)|\{-(?:[^-{]|-(?!\})|\{(?!-))*-\})*-\}/,string:{pattern:/"(?:[^"\\]|\\.)*"|''(?:[^']|'(?!')|'''|''\$\{)*''(?!'|\$)/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}]*\}/,inside:{expression:{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0,alias:"language-dhall",inside:null},punctuation:/\$\{|\}/}}}},label:{pattern:/`[^`]*`/,greedy:!0},url:{pattern:/\bhttps?:\/\/[\w.:%!$&'*+;=@~-]+(?:\/[\w.:%!$&'*+;=@~-]*)*(?:\?[/?\w.:%!$&'*+;=@~-]*)?/,greedy:!0},env:{pattern:/\benv:(?:(?!\d)\w+|"(?:[^"\\=]|\\.)*")/,greedy:!0,inside:{function:/^env/,operator:/^:/,variable:/[\s\S]+/}},hash:{pattern:/\bsha256:[\da-fA-F]{64}\b/,inside:{function:/sha256/,operator:/:/,number:/[\da-fA-F]{64}/}},keyword:/\b(?:as|assert|else|forall|if|in|let|merge|missing|then|toMap|using|with)\b|\u2200/,builtin:/\b(?:None|Some)\b/,boolean:/\b(?:False|True)\b/,number:/\bNaN\b|-?\bInfinity\b|[+-]?\b(?:0x[\da-fA-F]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/,operator:/\/\\|\/\/\\\\|&&|\|\||===|[!=]=|\/\/|->|\+\+|::|[+*#@=:?<>|\\\u2227\u2a53\u2261\u2afd\u03bb\u2192]/,punctuation:/\.\.|[{}\[\](),./]/,"class-name":/\b[A-Z]\w*\b/},n.languages.dhall.string.inside.interpolation.inside.expression.inside=n.languages.dhall}wR.displayName="diff";wR.aliases=[];function wR(n){(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(r){var i=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+i+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(n)}vi.displayName="markup-templating";vi.aliases=[];function vi(n){n.register(ni),(function(e){function t(r,i){return"___"+r.toUpperCase()+i+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(r,i,s,a){if(r.language===i){var o=r.tokenStack=[];r.code=r.code.replace(s,function(l){if(typeof a=="function"&&!a(l))return l;for(var u=o.length,c;r.code.indexOf(c=t(i,u))!==-1;)++u;return o[u]=l,c}),r.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(r,i){if(r.language!==i||!r.tokenStack)return;r.grammar=e.languages[i];var s=0,a=Object.keys(r.tokenStack);function o(l){for(var u=0;u<l.length&&!(s>=a.length);u++){var c=l[u];if(typeof c=="string"||c.content&&typeof c.content=="string"){var h=a[s],f=r.tokenStack[h],g=typeof c=="string"?c:c.content,m=t(i,h),v=g.indexOf(m);if(v>-1){++s;var _=g.substring(0,v),b=new e.Token(i,e.tokenize(f,r.grammar),"language-"+i,f),S=g.substring(v+m.length),E=[];_&&E.push.apply(E,o([_])),E.push(b),S&&E.push.apply(E,o([S])),typeof c=="string"?l.splice.apply(l,[u,1].concat(E)):c.content=E}}else c.content&&o(c.content)}return l}o(r.tokens)}}})})(n)}AR.displayName="django";AR.aliases=["jinja2"];function AR(n){n.register(vi),(function(e){e.languages.django={comment:/^\{#[\s\S]*?#\}$/,tag:{pattern:/(^\{%[+-]?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%][+-]?|[+-]?[}%]\}$/,alias:"punctuation"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},filter:{pattern:/(\|)\w+/,lookbehind:!0,alias:"function"},test:{pattern:/(\bis\s+(?:not\s+)?)(?!not\b)\w+/,lookbehind:!0,alias:"function"},function:/\b[a-z_]\w+(?=\s*\()/i,keyword:/\b(?:and|as|by|else|for|if|import|in|is|loop|not|or|recursive|with|without)\b/,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,number:/\b\d+(?:\.\d+)?\b/,boolean:/[Ff]alse|[Nn]one|[Tt]rue/,variable:/\b\w+\b/,punctuation:/[{}[\](),.:;]/};var t=/\{\{[\s\S]*?\}\}|\{%[\s\S]*?%\}|\{#[\s\S]*?#\}/g,r=e.languages["markup-templating"];e.hooks.add("before-tokenize",function(i){r.buildPlaceholders(i,"django",t)}),e.hooks.add("after-tokenize",function(i){r.tokenizePlaceholders(i,"django")}),e.languages.jinja2=e.languages.django,e.hooks.add("before-tokenize",function(i){r.buildPlaceholders(i,"jinja2",t)}),e.hooks.add("after-tokenize",function(i){r.tokenizePlaceholders(i,"jinja2")})})(n)}RR.displayName="dns-zone-file";RR.aliases=["dns-zone"];function RR(n){n.languages["dns-zone-file"]={comment:/;.*/,string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},variable:[{pattern:/(^\$ORIGIN[ \t]+)\S+/m,lookbehind:!0},{pattern:/(^|\s)@(?=\s|$)/,lookbehind:!0}],keyword:/^\$(?:INCLUDE|ORIGIN|TTL)(?=\s|$)/m,class:{pattern:/(^|\s)(?:CH|CS|HS|IN)(?=\s|$)/,lookbehind:!0,alias:"keyword"},type:{pattern:/(^|\s)(?:A|A6|AAAA|AFSDB|APL|ATMA|CAA|CDNSKEY|CDS|CERT|CNAME|DHCID|DLV|DNAME|DNSKEY|DS|EID|GID|GPOS|HINFO|HIP|IPSECKEY|ISDN|KEY|KX|LOC|MAILA|MAILB|MB|MD|MF|MG|MINFO|MR|MX|NAPTR|NB|NBSTAT|NIMLOC|NINFO|NS|NSAP|NSAP-PTR|NSEC|NSEC3|NSEC3PARAM|NULL|NXT|OPENPGPKEY|PTR|PX|RKEY|RP|RRSIG|RT|SIG|SINK|SMIMEA|SOA|SPF|SRV|SSHFP|TA|TKEY|TLSA|TSIG|TXT|UID|UINFO|UNSPEC|URI|WKS|X25)(?=\s|$)/,lookbehind:!0,alias:"keyword"},punctuation:/[()]/},n.languages["dns-zone"]=n.languages["dns-zone-file"]}NR.displayName="docker";NR.aliases=["dockerfile"];function NR(n){(function(e){var t=/\\[\r\n](?:\s|\\[\r\n]|#.*(?!.))*(?![\s#]|\\[\r\n])/.source,r=/(?:[ \t]+(?![ \t])(?:<SP_BS>)?|<SP_BS>)/.source.replace(/<SP_BS>/g,function(){return t}),i=/"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*"|'(?:[^'\\\r\n]|\\(?:\r\n|[\s\S]))*'/.source,s=/--[\w-]+=(?:<STR>|(?!["'])(?:[^\s\\]|\\.)+)/.source.replace(/<STR>/g,function(){return i}),a={pattern:RegExp(i),greedy:!0},o={pattern:/(^[ \t]*)#.*/m,lookbehind:!0,greedy:!0};function l(u,c){return u=u.replace(/<OPT>/g,function(){return s}).replace(/<SP>/g,function(){return r}),RegExp(u,c)}e.languages.docker={instruction:{pattern:/(^[ \t]*)(?:ADD|ARG|CMD|COPY|ENTRYPOINT|ENV|EXPOSE|FROM|HEALTHCHECK|LABEL|MAINTAINER|ONBUILD|RUN|SHELL|STOPSIGNAL|USER|VOLUME|WORKDIR)(?=\s)(?:\\.|[^\r\n\\])*(?:\\$(?:\s|#.*$)*(?![\s#])(?:\\.|[^\r\n\\])*)*/im,lookbehind:!0,greedy:!0,inside:{options:{pattern:l(/(^(?:ONBUILD<SP>)?\w+<SP>)<OPT>(?:<SP><OPT>)*/.source,"i"),lookbehind:!0,greedy:!0,inside:{property:{pattern:/(^|\s)--[\w-]+/,lookbehind:!0},string:[a,{pattern:/(=)(?!["'])(?:[^\s\\]|\\.)+/,lookbehind:!0}],operator:/\\$/m,punctuation:/=/}},keyword:[{pattern:l(/(^(?:ONBUILD<SP>)?HEALTHCHECK<SP>(?:<OPT><SP>)*)(?:CMD|NONE)\b/.source,"i"),lookbehind:!0,greedy:!0},{pattern:l(/(^(?:ONBUILD<SP>)?FROM<SP>(?:<OPT><SP>)*(?!--)[^ \t\\]+<SP>)AS/.source,"i"),lookbehind:!0,greedy:!0},{pattern:l(/(^ONBUILD<SP>)\w+/.source,"i"),lookbehind:!0,greedy:!0},{pattern:/^\w+/,greedy:!0}],comment:o,string:a,variable:/\$(?:\w+|\{[^{}"'\\]*\})/,operator:/\\$/m}},comment:o},e.languages.dockerfile=e.languages.docker})(n)}CR.displayName="dot";CR.aliases=["gv"];function CR(n){(function(e){var t="(?:"+[/[a-zA-Z_\x80-\uFFFF][\w\x80-\uFFFF]*/.source,/-?(?:\.\d+|\d+(?:\.\d*)?)/.source,/"[^"\\]*(?:\\[\s\S][^"\\]*)*"/.source,/<(?:[^<>]|(?!<!--)<(?:[^<>"']|"[^"]*"|'[^']*')+>|<!--(?:[^-]|-(?!->))*-->)*>/.source].join("|")+")",r={markup:{pattern:/(^<)[\s\S]+(?=>$)/,lookbehind:!0,alias:["language-markup","language-html","language-xml"],inside:e.languages.markup}};function i(s,a){return RegExp(s.replace(/<ID>/g,function(){return t}),a)}e.languages.dot={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\/|^#.*/m,greedy:!0},"graph-name":{pattern:i(/(\b(?:digraph|graph|subgraph)[ \t\r\n]+)<ID>/.source,"i"),lookbehind:!0,greedy:!0,alias:"class-name",inside:r},"attr-value":{pattern:i(/(=[ \t\r\n]*)<ID>/.source),lookbehind:!0,greedy:!0,inside:r},"attr-name":{pattern:i(/([\[;, \t\r\n])<ID>(?=[ \t\r\n]*=)/.source),lookbehind:!0,greedy:!0,inside:r},keyword:/\b(?:digraph|edge|graph|node|strict|subgraph)\b/i,"compass-point":{pattern:/(:[ \t\r\n]*)(?:[ewc_]|[ns][ew]?)(?![\w\x80-\uFFFF])/,lookbehind:!0,alias:"builtin"},node:{pattern:i(/(^|[^-.\w\x80-\uFFFF\\])<ID>/.source),lookbehind:!0,greedy:!0,inside:r},operator:/[=:]|-[->]/,punctuation:/[\[\]{};,]/},e.languages.gv=e.languages.dot})(n)}MR.displayName="ebnf";MR.aliases=[];function MR(n){n.languages.ebnf={comment:/\(\*[\s\S]*?\*\)/,string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0},special:{pattern:/\?[^?\r\n]*\?/,greedy:!0,alias:"class-name"},definition:{pattern:/^([\t ]*)[a-z]\w*(?:[ \t]+[a-z]\w*)*(?=\s*=)/im,lookbehind:!0,alias:["rule","keyword"]},rule:/\b[a-z]\w*(?:[ \t]+[a-z]\w*)*\b/i,punctuation:/\([:/]|[:/]\)|[.,;()[\]{}]/,operator:/[-=|*/!]/}}IR.displayName="editorconfig";IR.aliases=[];function IR(n){n.languages.editorconfig={comment:/[;#].*/,section:{pattern:/(^[ \t]*)\[.+\]/m,lookbehind:!0,alias:"selector",inside:{regex:/\\\\[\[\]{},!?.*]/,operator:/[!?]|\.\.|\*{1,2}/,punctuation:/[\[\]{},]/}},key:{pattern:/(^[ \t]*)[^\s=]+(?=[ \t]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/=.*/,alias:"attr-value",inside:{punctuation:/^=/}}}}kR.displayName="eiffel";kR.aliases=[];function kR(n){n.languages.eiffel={comment:/--.*/,string:[{pattern:/"([^[]*)\[[\s\S]*?\]\1"/,greedy:!0},{pattern:/"([^{]*)\{[\s\S]*?\}\1"/,greedy:!0},{pattern:/"(?:%(?:(?!\n)\s)*\n\s*%|%\S|[^%"\r\n])*"/,greedy:!0}],char:/'(?:%.|[^%'\r\n])+'/,keyword:/\b(?:across|agent|alias|all|and|as|assign|attached|attribute|check|class|convert|create|Current|debug|deferred|detachable|do|else|elseif|end|ensure|expanded|export|external|feature|from|frozen|if|implies|inherit|inspect|invariant|like|local|loop|not|note|obsolete|old|once|or|Precursor|redefine|rename|require|rescue|Result|retry|select|separate|some|then|undefine|until|variant|Void|when|xor)\b/i,boolean:/\b(?:False|True)\b/i,"class-name":/\b[A-Z][\dA-Z_]*\b/,number:[/\b0[xcb][\da-f](?:_*[\da-f])*\b/i,/(?:\b\d(?:_*\d)*)?\.(?:(?:\d(?:_*\d)*)?e[+-]?)?\d(?:_*\d)*\b|\b\d(?:_*\d)*\b\.?/i],punctuation:/:=|<<|>>|\(\||\|\)|->|\.(?=\w)|[{}[\];(),:?]/,operator:/\\\\|\|\.\.\||\.\.|\/[~\/=]?|[><]=?|[-+*^=~]/}}LR.displayName="ejs";LR.aliases=["eta"];function LR(n){n.register(_i),n.register(vi),(function(e){e.languages.ejs={delimiter:{pattern:/^<%[-_=]?|[-_]?%>$/,alias:"punctuation"},comment:/^#[\s\S]*/,"language-javascript":{pattern:/[\s\S]+/,inside:e.languages.javascript}},e.hooks.add("before-tokenize",function(t){var r=/<%(?!%)[\s\S]+?%>/g;e.languages["markup-templating"].buildPlaceholders(t,"ejs",r)}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"ejs")}),e.languages.eta=e.languages.ejs})(n)}DR.displayName="elixir";DR.aliases=[];function DR(n){n.languages.elixir={doc:{pattern:/@(?:doc|moduledoc)\s+(?:("""|''')[\s\S]*?\1|("|')(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2)/,inside:{attribute:/^@\w+/,string:/['"][\s\S]+/}},comment:{pattern:/#.*/,greedy:!0},regex:{pattern:/~[rR](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[uismxfr]*/,greedy:!0},string:[{pattern:/~[cCsSwW](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|#\{[^}]+\}|#(?!\{)|[^#\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[csa]?/,greedy:!0,inside:{}},{pattern:/("""|''')[\s\S]*?\1/,greedy:!0,inside:{}},{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{}}],atom:{pattern:/(^|[^:]):\w+/,lookbehind:!0,alias:"symbol"},module:{pattern:/\b[A-Z]\w*\b/,alias:"class-name"},"attr-name":/\b\w+\??:(?!:)/,argument:{pattern:/(^|[^&])&\d+/,lookbehind:!0,alias:"variable"},attribute:{pattern:/@\w+/,alias:"variable"},function:/\b[_a-zA-Z]\w*[?!]?(?:(?=\s*(?:\.\s*)?\()|(?=\/\d))/,number:/\b(?:0[box][a-f\d_]+|\d[\d_]*)(?:\.[\d_]+)?(?:e[+-]?[\d_]+)?\b/i,keyword:/\b(?:after|alias|and|case|catch|cond|def(?:callback|delegate|exception|impl|macro|module|n|np|p|protocol|struct)?|do|else|end|fn|for|if|import|not|or|quote|raise|require|rescue|try|unless|unquote|use|when)\b/,boolean:/\b(?:false|nil|true)\b/,operator:[/\bin\b|&&?|\|[|>]?|\\\\|::|\.\.\.?|\+\+?|-[->]?|<[-=>]|>=|!==?|\B!|=(?:==?|[>~])?|[*\/^]/,{pattern:/([^<])<(?!<)/,lookbehind:!0},{pattern:/([^>])>(?!>)/,lookbehind:!0}],punctuation:/<<|>>|[.,%\[\]{}()]/},n.languages.elixir.string.forEach(function(e){e.inside={interpolation:{pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"},rest:n.languages.elixir}}}})}OR.displayName="elm";OR.aliases=[];function OR(n){n.languages.elm={comment:/--.*|\{-[\s\S]*?-\}/,char:{pattern:/'(?:[^\\'\r\n]|\\(?:[abfnrtv\\']|\d+|x[0-9a-fA-F]+|u\{[0-9a-fA-F]+\}))'/,greedy:!0},string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/"(?:[^\\"\r\n]|\\.)*"/,greedy:!0}],"import-statement":{pattern:/(^[\t ]*)import\s+[A-Z]\w*(?:\.[A-Z]\w*)*(?:\s+as\s+(?:[A-Z]\w*)(?:\.[A-Z]\w*)*)?(?:\s+exposing\s+)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|exposing|import)\b/}},keyword:/\b(?:alias|as|case|else|exposing|if|in|infixl|infixr|let|module|of|then|type)\b/,builtin:/\b(?:abs|acos|always|asin|atan|atan2|ceiling|clamp|compare|cos|curry|degrees|e|flip|floor|fromPolar|identity|isInfinite|isNaN|logBase|max|min|negate|never|not|pi|radians|rem|round|sin|sqrt|tan|toFloat|toPolar|toString|truncate|turns|uncurry|xor)\b/,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0x[0-9a-f]+)\b/i,operator:/\s\.\s|[+\-/*=.$<>:&|^?%#@~!]{2,}|[+\-/*=$<>:&|^?%#@~!]/,hvariable:/\b(?:[A-Z]\w*\.)*[a-z]\w*\b/,constant:/\b(?:[A-Z]\w*\.)*[A-Z]\w*\b/,punctuation:/[{}[\]|(),.:]/}}W_.displayName="lua";W_.aliases=[];function W_(n){n.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[^z]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+(?:\.[a-f\d]*)?(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|(?:\.\d*)?(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/}}PR.displayName="etlua";PR.aliases=[];function PR(n){n.register(W_),n.register(vi),(function(e){e.languages.etlua={delimiter:{pattern:/^<%[-=]?|-?%>$/,alias:"punctuation"},"language-lua":{pattern:/[\s\S]+/,inside:e.languages.lua}},e.hooks.add("before-tokenize",function(t){var r=/<%[\s\S]+?%>/g;e.languages["markup-templating"].buildPlaceholders(t,"etlua",r)}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"etlua")})})(n)}FR.displayName="erb";FR.aliases=[];function FR(n){n.register(vi),n.register(Ph),(function(e){e.languages.erb={delimiter:{pattern:/^(\s*)<%=?|%>(?=\s*$)/,lookbehind:!0,alias:"punctuation"},ruby:{pattern:/\s*\S[\s\S]*/,alias:"language-ruby",inside:e.languages.ruby}},e.hooks.add("before-tokenize",function(t){var r=/<%=?(?:[^\r\n]|[\r\n](?!=begin)|[\r\n]=begin\s(?:[^\r\n]|[\r\n](?!=end))*[\r\n]=end)+?%>/g;e.languages["markup-templating"].buildPlaceholders(t,"erb",r)}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"erb")})})(n)}UR.displayName="erlang";UR.aliases=[];function UR(n){n.languages.erlang={comment:/%.+/,string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},"quoted-function":{pattern:/'(?:\\.|[^\\'\r\n])+'(?=\()/,alias:"function"},"quoted-atom":{pattern:/'(?:\\.|[^\\'\r\n])+'/,alias:"atom"},boolean:/\b(?:false|true)\b/,keyword:/\b(?:after|begin|case|catch|end|fun|if|of|receive|try|when)\b/,number:[/\$\\?./,/\b\d+#[a-z0-9]+/i,/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i],function:/\b[a-z][\w@]*(?=\()/,variable:{pattern:/(^|[^@])(?:\b|\?)[A-Z_][\w@]*/,lookbehind:!0},operator:[/[=\/<>:]=|=[:\/]=|\+\+?|--?|[=*\/!]|\b(?:and|andalso|band|bnot|bor|bsl|bsr|bxor|div|not|or|orelse|rem|xor)\b/,{pattern:/(^|[^<])<(?!<)/,lookbehind:!0},{pattern:/(^|[^>])>(?!>)/,lookbehind:!0}],atom:/\b[a-z][\w@]*/,punctuation:/[()[\]{}:;,.#|]|<<|>>/}}BR.displayName="excel-formula";BR.aliases=["xls","xlsx"];function BR(n){n.languages["excel-formula"]={comment:{pattern:/(\bN\(\s*)"(?:[^"]|"")*"(?=\s*\))/i,lookbehind:!0,greedy:!0},string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},reference:{pattern:/(?:'[^']*'|(?:[^\s()[\]{}<>*?"';,$&]*\[[^^\s()[\]{}<>*?"']+\])?\w+)!/,greedy:!0,alias:"string",inside:{operator:/!$/,punctuation:/'/,sheet:{pattern:/[^[\]]+$/,alias:"function"},file:{pattern:/\[[^[\]]+\]$/,inside:{punctuation:/[[\]]/}},path:/[\s\S]+/}},"function-name":{pattern:/\b[A-Z]\w*(?=\()/i,alias:"builtin"},range:{pattern:/\$?\b(?:[A-Z]+\$?\d+:\$?[A-Z]+\$?\d+|[A-Z]+:\$?[A-Z]+|\d+:\$?\d+)\b/i,alias:"selector",inside:{operator:/:/,cell:/\$?[A-Z]+\$?\d+/i,column:/\$?[A-Z]+/i,row:/\$?\d+/}},cell:{pattern:/\b[A-Z]+\d+\b|\$[A-Za-z]+\$?\d+\b|\b[A-Za-z]+\$\d+\b/,alias:"selector"},number:/(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e[+-]?\d+)?\b/i,boolean:/\b(?:FALSE|TRUE)\b/i,operator:/[-+*/^%=&,]|<[=>]?|>=?/,punctuation:/[[\]();{}|]/},n.languages.xlsx=n.languages.xls=n.languages["excel-formula"]}zR.displayName="fsharp";zR.aliases=[];function zR(n){n.register(cn),n.languages.fsharp=n.languages.extend("clike",{comment:[{pattern:/(^|[^\\])\(\*(?!\))[\s\S]*?\*\)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(?:"""[\s\S]*?"""|@"(?:""|[^"])*"|"(?:\\[\s\S]|[^\\"])*")B?/,greedy:!0},"class-name":{pattern:/(\b(?:exception|inherit|interface|new|of|type)\s+|\w\s*:\s*|\s:\??>\s*)[.\w]+\b(?:\s*(?:->|\*)\s*[.\w]+\b)*(?!\s*[:.])/,lookbehind:!0,inside:{operator:/->|\*/,punctuation:/\./}},keyword:/\b(?:let|return|use|yield)(?:!\B|\b)|\b(?:abstract|and|as|asr|assert|atomic|base|begin|break|checked|class|component|const|constraint|constructor|continue|default|delegate|do|done|downcast|downto|eager|elif|else|end|event|exception|extern|external|false|finally|fixed|for|fun|function|functor|global|if|in|include|inherit|inline|interface|internal|land|lazy|lor|lsl|lsr|lxor|match|member|method|mixin|mod|module|mutable|namespace|new|not|null|object|of|open|or|override|parallel|private|process|protected|public|pure|rec|sealed|select|sig|static|struct|tailcall|then|to|trait|true|try|type|upcast|val|virtual|void|volatile|when|while|with)\b/,number:[/\b0x[\da-fA-F]+(?:LF|lf|un)?\b/,/\b0b[01]+(?:uy|y)?\b/,/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[fm]|e[+-]?\d+)?\b/i,/\b\d+(?:[IlLsy]|UL|u[lsy]?)?\b/],operator:/([<>~&^])\1\1|([*.:<>&])\2|<-|->|[!=:]=|<?\|{1,3}>?|\??(?:<=|>=|<>|[-+*/%=<>])\??|[!?^&]|~[+~-]|:>|:\?>?/}),n.languages.insertBefore("fsharp","keyword",{preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(^#)\b(?:else|endif|if|light|line|nowarn)\b/,lookbehind:!0,alias:"keyword"}}}}),n.languages.insertBefore("fsharp","punctuation",{"computation-expression":{pattern:/\b[_a-z]\w*(?=\s*\{)/i,alias:"keyword"}}),n.languages.insertBefore("fsharp","string",{annotation:{pattern:/\[<.+?>\]/,greedy:!0,inside:{punctuation:/^\[<|>\]$/,"class-name":{pattern:/^\w+$|(^|;\s*)[A-Z]\w*(?=\()/,lookbehind:!0},"annotation-content":{pattern:/[\s\S]+/,inside:n.languages.fsharp}}},char:{pattern:/'(?:[^\\']|\\(?:.|\d{3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}|U[a-fA-F\d]{8}))'B?/,greedy:!0}})}GR.displayName="factor";GR.aliases=[];function GR(n){(function(e){var t={function:/\b(?:BUGS?|FIX(?:MES?)?|NOTES?|TODOS?|XX+|HACKS?|WARN(?:ING)?|\?{2,}|!{2,})\b/},r={number:/\\[^\s']|%\w/},i={comment:[{pattern:/(^|\s)(?:! .*|!$)/,lookbehind:!0,inside:t},{pattern:/(^|\s)\/\*\s[\s\S]*?\*\/(?=\s|$)/,lookbehind:!0,greedy:!0,inside:t},{pattern:/(^|\s)!\[(={0,6})\[\s[\s\S]*?\]\2\](?=\s|$)/,lookbehind:!0,greedy:!0,inside:t}],number:[{pattern:/(^|\s)[+-]?\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?0(?:b[01]+|o[0-7]+|d\d+|x[\dA-F]+)(?=\s|$)/i,lookbehind:!0},{pattern:/(^|\s)[+-]?\d+\/\d+\.?(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)\+?\d+\+\d+\/\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)-\d+-\d+\/\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?(?:\d*\.\d+|\d+\.\d*|\d+)(?:e[+-]?\d+)?(?=\s|$)/i,lookbehind:!0},{pattern:/(^|\s)NAN:\s+[\da-fA-F]+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?0(?:b1\.[01]*|o1\.[0-7]*|d1\.\d*|x1\.[\dA-F]*)p\d+(?=\s|$)/i,lookbehind:!0}],regexp:{pattern:/(^|\s)R\/\s(?:\\\S|[^\\/])*\/(?:[idmsr]*|[idmsr]+-[idmsr]+)(?=\s|$)/,lookbehind:!0,alias:"number",inside:{variable:/\\\S/,keyword:/[+?*\[\]^$(){}.|]/,operator:{pattern:/(\/)[idmsr]+(?:-[idmsr]+)?/,lookbehind:!0}}},boolean:{pattern:/(^|\s)[tf](?=\s|$)/,lookbehind:!0},"custom-string":{pattern:/(^|\s)[A-Z0-9\-]+"\s(?:\\\S|[^"\\])*"/,lookbehind:!0,greedy:!0,alias:"string",inside:{number:/\\\S|%\w|\//}},"multiline-string":[{pattern:/(^|\s)STRING:\s+\S+(?:\n|\r\n).*(?:\n|\r\n)\s*;(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:{number:r.number,"semicolon-or-setlocal":{pattern:/([\r\n][ \t]*);(?=\s|$)/,lookbehind:!0,alias:"function"}}},{pattern:/(^|\s)HEREDOC:\s+\S+(?:\n|\r\n).*(?:\n|\r\n)\s*\S+(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:r},{pattern:/(^|\s)\[(={0,6})\[\s[\s\S]*?\]\2\](?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:r}],"special-using":{pattern:/(^|\s)USING:(?:\s\S+)*(?=\s+;(?:\s|$))/,lookbehind:!0,alias:"function",inside:{string:{pattern:/(\s)[^:\s]+/,lookbehind:!0}}},"stack-effect-delimiter":[{pattern:/(^|\s)(?:call|eval|execute)?\((?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)--(?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)\)(?=\s|$)/,lookbehind:!0,alias:"operator"}],combinators:{pattern:null,lookbehind:!0,alias:"keyword"},"kernel-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"sequences-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"math-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"constructor-word":{pattern:/(^|\s)<(?!=+>|-+>)\S+>(?=\s|$)/,lookbehind:!0,alias:"keyword"},"other-builtin-syntax":{pattern:null,lookbehind:!0,alias:"operator"},"conventionally-named-word":{pattern:/(^|\s)(?!")(?:(?:change|new|set|with)-\S+|\$\S+|>[^>\s]+|[^:>\s]+>|[^>\s]+>[^>\s]+|\+[^+\s]+\+|[^?\s]+\?|\?[^?\s]+|[^>\s]+>>|>>[^>\s]+|[^<\s]+<<|\([^()\s]+\)|[^!\s]+!|[^*\s]\S*\*|[^.\s]\S*\.)(?=\s|$)/,lookbehind:!0,alias:"keyword"},"colon-syntax":{pattern:/(^|\s)(?:[A-Z0-9\-]+#?)?:{1,2}\s+(?:;\S+|(?!;)\S+)(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"function"},"semicolon-or-setlocal":{pattern:/(\s)(?:;|:>)(?=\s|$)/,lookbehind:!0,alias:"function"},"curly-brace-literal-delimiter":[{pattern:/(^|\s)[a-z]*\{(?=\s)/i,lookbehind:!0,alias:"operator"},{pattern:/(\s)\}(?=\s|$)/,lookbehind:!0,alias:"operator"}],"quotation-delimiter":[{pattern:/(^|\s)\[(?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)\](?=\s|$)/,lookbehind:!0,alias:"operator"}],"normal-word":{pattern:/(^|\s)[^"\s]\S*(?=\s|$)/,lookbehind:!0},string:{pattern:/"(?:\\\S|[^"\\])*"/,greedy:!0,inside:r}},s=function(u){return(u+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},a=function(u){return new RegExp("(^|\\s)(?:"+u.map(s).join("|")+")(?=\\s|$)")},o={"kernel-builtin":["or","2nipd","4drop","tuck","wrapper","nip","wrapper?","callstack>array","die","dupd","callstack","callstack?","3dup","hashcode","pick","4nip","build",">boolean","nipd","clone","5nip","eq?","?","=","swapd","2over","clear","2dup","get-retainstack","not","tuple?","dup","3nipd","call","-rotd","object","drop","assert=","assert?","-rot","execute","boa","get-callstack","curried?","3drop","pickd","overd","over","roll","3nip","swap","and","2nip","rotd","throw","(clone)","hashcode*","spin","reach","4dup","equal?","get-datastack","assert","2drop","<wrapper>","boolean?","identity-hashcode","identity-tuple?","null","composed?","new","5drop","rot","-roll","xor","identity-tuple","boolean"],"other-builtin-syntax":["=======","recursive","flushable",">>","<<<<<<","M\\","B","PRIVATE>","\\","======","final","inline","delimiter","deprecated","<PRIVATE",">>>>>>","<<<<<<<","parse-complex","malformed-complex","read-only",">>>>>>>","call-next-method","<<","foldable","$","$[","${"],"sequences-builtin":["member-eq?","mismatch","append","assert-sequence=","longer","repetition","clone-like","3sequence","assert-sequence?","last-index-from","reversed","index-from","cut*","pad-tail","join-as","remove-eq!","concat-as","but-last","snip","nths","nth","sequence","longest","slice?","<slice>","remove-nth","tail-slice","empty?","tail*","member?","virtual-sequence?","set-length","drop-prefix","iota","unclip","bounds-error?","unclip-last-slice","non-negative-integer-expected","non-negative-integer-expected?","midpoint@","longer?","?set-nth","?first","rest-slice","prepend-as","prepend","fourth","sift","subseq-start","new-sequence","?last","like","first4","1sequence","reverse","slice","virtual@","repetition?","set-last","index","4sequence","max-length","set-second","immutable-sequence","first2","first3","supremum","unclip-slice","suffix!","insert-nth","tail","3append","short","suffix","concat","flip","immutable?","reverse!","2sequence","sum","delete-all","indices","snip-slice","<iota>","check-slice","sequence?","head","append-as","halves","sequence=","collapse-slice","?second","slice-error?","product","bounds-check?","bounds-check","immutable","virtual-exemplar","harvest","remove","pad-head","last","set-fourth","cartesian-product","remove-eq","shorten","shorter","reversed?","shorter?","shortest","head-slice","pop*","tail-slice*","but-last-slice","iota?","append!","cut-slice","new-resizable","head-slice*","sequence-hashcode","pop","set-nth","?nth","second","join","immutable-sequence?","<reversed>","3append-as","virtual-sequence","subseq?","remove-nth!","length","last-index","lengthen","assert-sequence","copy","move","third","first","tail?","set-first","prefix","bounds-error","<repetition>","exchange","surround","cut","min-length","set-third","push-all","head?","subseq-start-from","delete-slice","rest","sum-lengths","head*","infimum","remove!","glue","slice-error","subseq","push","replace-slice","subseq-as","unclip-last"],"math-builtin":["number=","next-power-of-2","?1+","fp-special?","imaginary-part","float>bits","number?","fp-infinity?","bignum?","fp-snan?","denominator","gcd","*","+","fp-bitwise=","-","u>=","/",">=","bitand","power-of-2?","log2-expects-positive","neg?","<","log2",">","integer?","number","bits>double","2/","zero?","bits>float","float?","shift","ratio?","rect>","even?","ratio","fp-sign","bitnot",">fixnum","complex?","/i","integer>fixnum","/f","sgn",">bignum","next-float","u<","u>","mod","recip","rational",">float","2^","integer","fixnum?","neg","fixnum","sq","bignum",">rect","bit?","fp-qnan?","simple-gcd","complex","<fp-nan>","real",">fraction","double>bits","bitor","rem","fp-nan-payload","real-part","log2-expects-positive?","prev-float","align","unordered?","float","fp-nan?","abs","bitxor","integer>fixnum-strict","u<=","odd?","<=","/mod",">integer","real?","rational?","numerator"]};Object.keys(o).forEach(function(u){i[u].pattern=a(o[u])});var l=["2bi","while","2tri","bi*","4dip","both?","same?","tri@","curry","prepose","3bi","?if","tri*","2keep","3keep","curried","2keepd","when","2bi*","2tri*","4keep","bi@","keepdd","do","unless*","tri-curry","if*","loop","bi-curry*","when*","2bi@","2tri@","with","2with","either?","bi","until","3dip","3curry","tri-curry*","tri-curry@","bi-curry","keepd","compose","2dip","if","3tri","unless","tuple","keep","2curry","tri","most","while*","dip","composed","bi-curry@","find-last-from","trim-head-slice","map-as","each-from","none?","trim-tail","partition","if-empty","accumulate*","reject!","find-from","accumulate-as","collector-for-as","reject","map","map-sum","accumulate!","2each-from","follow","supremum-by","map!","unless-empty","collector","padding","reduce-index","replicate-as","infimum-by","trim-tail-slice","count","find-index","filter","accumulate*!","reject-as","map-integers","map-find","reduce","selector","interleave","2map","filter-as","binary-reduce","map-index-as","find","produce","filter!","replicate","cartesian-map","cartesian-each","find-index-from","map-find-last","3map-as","3map","find-last","selector-as","2map-as","2map-reduce","accumulate","each","each-index","accumulate*-as","when-empty","all?","collector-as","push-either","new-like","collector-for","2selector","push-if","2all?","map-reduce","3each","any?","trim-slice","2reduce","change-nth","produce-as","2each","trim","trim-head","cartesian-find","map-index","if-zero","each-integer","unless-zero","(find-integer)","when-zero","find-last-integer","(all-integers?)","times","(each-integer)","find-integer","all-integers?","unless-negative","if-positive","when-positive","when-negative","unless-positive","if-negative","case","2cleave","cond>quot","case>quot","3cleave","wrong-values","to-fixed-point","alist>quot","cond","cleave","call-effect","recursive-hashcode","spread","deep-spread>quot","2||","0||","n||","0&&","2&&","3||","1||","1&&","n&&","3&&","smart-unless*","keep-inputs","reduce-outputs","smart-when*","cleave>array","smart-with","smart-apply","smart-if","inputs/outputs","output>sequence-n","map-outputs","map-reduce-outputs","dropping","output>array","smart-map-reduce","smart-2map-reduce","output>array-n","nullary","input<sequence","append-outputs","drop-inputs","inputs","smart-2reduce","drop-outputs","smart-reduce","preserving","smart-when","outputs","append-outputs-as","smart-unless","smart-if*","sum-outputs","input<sequence-unsafe","output>sequence"];i.combinators.pattern=a(l),e.languages.factor=i})(n)}VR.displayName="false";VR.aliases=[];function VR(n){(function(e){e.languages.false={comment:{pattern:/\{[^}]*\}/},string:{pattern:/"[^"]*"/,greedy:!0},"character-code":{pattern:/'(?:[^\r]|\r\n?)/,alias:"number"},"assembler-code":{pattern:/\d+`/,alias:"important"},number:/\d+/,operator:/[-!#$%&'*+,./:;=>?@\\^_`|~]/,punctuation:/\[|\]/,variable:/[a-z]/,"non-standard":{pattern:/[()<BDO]/,alias:"bold"}}})(n)}$R.displayName="firestore-security-rules";$R.aliases=[];function $R(n){n.register(cn),n.languages["firestore-security-rules"]=n.languages.extend("clike",{comment:/\/\/.*/,keyword:/\b(?:allow|function|if|match|null|return|rules_version|service)\b/,operator:/&&|\|\||[<>!=]=?|[-+*/%]|\b(?:in|is)\b/}),delete n.languages["firestore-security-rules"]["class-name"],n.languages.insertBefore("firestore-security-rules","keyword",{path:{pattern:/(^|[\s(),])(?:\/(?:[\w\xA0-\uFFFF]+|\{[\w\xA0-\uFFFF]+(?:=\*\*)?\}|\$\([\w\xA0-\uFFFF.]+\)))+/,lookbehind:!0,greedy:!0,inside:{variable:{pattern:/\{[\w\xA0-\uFFFF]+(?:=\*\*)?\}|\$\([\w\xA0-\uFFFF.]+\)/,inside:{operator:/=/,keyword:/\*\*/,punctuation:/[.$(){}]/}},punctuation:/\//}},method:{pattern:/(\ballow\s+)[a-z]+(?:\s*,\s*[a-z]+)*(?=\s*[:;])/,lookbehind:!0,alias:"builtin",inside:{punctuation:/,/}}})}HR.displayName="flow";HR.aliases=[];function HR(n){n.register(_i),(function(e){e.languages.flow=e.languages.extend("javascript",{}),e.languages.insertBefore("flow","keyword",{type:[{pattern:/\b(?:[Bb]oolean|Function|[Nn]umber|[Ss]tring|[Ss]ymbol|any|mixed|null|void)\b/,alias:"class-name"}]}),e.languages.flow["function-variable"].pattern=/(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=\s*(?:function\b|(?:\([^()]*\)(?:\s*:\s*\w+)?|(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/i,delete e.languages.flow.parameter,e.languages.insertBefore("flow","operator",{"flow-punctuation":{pattern:/\{\||\|\}/,alias:"punctuation"}}),Array.isArray(e.languages.flow.keyword)||(e.languages.flow.keyword=[e.languages.flow.keyword]),e.languages.flow.keyword.unshift({pattern:/(^|[^$]\b)(?:Class|declare|opaque|type)\b(?!\$)/,lookbehind:!0},{pattern:/(^|[^$]\B)\$(?:Diff|Enum|Exact|Keys|ObjMap|PropertyType|Record|Shape|Subtype|Supertype|await)\b(?!\$)/,lookbehind:!0})})(n)}jR.displayName="fortran";jR.aliases=[];function jR(n){n.languages.fortran={"quoted-number":{pattern:/[BOZ](['"])[A-F0-9]+\1/i,alias:"number"},string:{pattern:/(?:\b\w+_)?(['"])(?:\1\1|&(?:\r\n?|\n)(?:[ \t]*!.*(?:\r\n?|\n)|(?![ \t]*!))|(?!\1).)*(?:\1|&)/,inside:{comment:{pattern:/(&(?:\r\n?|\n)\s*)!.*/,lookbehind:!0}}},comment:{pattern:/!.*/,greedy:!0},boolean:/\.(?:FALSE|TRUE)\.(?:_\w+)?/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[ED][+-]?\d+)?(?:_\w+)?/i,keyword:[/\b(?:CHARACTER|COMPLEX|DOUBLE ?PRECISION|INTEGER|LOGICAL|REAL)\b/i,/\b(?:END ?)?(?:BLOCK ?DATA|DO|FILE|FORALL|FUNCTION|IF|INTERFACE|MODULE(?! PROCEDURE)|PROGRAM|SELECT|SUBROUTINE|TYPE|WHERE)\b/i,/\b(?:ALLOCATABLE|ALLOCATE|BACKSPACE|CALL|CASE|CLOSE|COMMON|CONTAINS|CONTINUE|CYCLE|DATA|DEALLOCATE|DIMENSION|DO|END|EQUIVALENCE|EXIT|EXTERNAL|FORMAT|GO ?TO|IMPLICIT(?: NONE)?|INQUIRE|INTENT|INTRINSIC|MODULE PROCEDURE|NAMELIST|NULLIFY|OPEN|OPTIONAL|PARAMETER|POINTER|PRINT|PRIVATE|PUBLIC|READ|RETURN|REWIND|SAVE|SELECT|STOP|TARGET|WHILE|WRITE)\b/i,/\b(?:ASSIGNMENT|DEFAULT|ELEMENTAL|ELSE|ELSEIF|ELSEWHERE|ENTRY|IN|INCLUDE|INOUT|KIND|NULL|ONLY|OPERATOR|OUT|PURE|RECURSIVE|RESULT|SEQUENCE|STAT|THEN|USE)\b/i],operator:[/\*\*|\/\/|=>|[=\/]=|[<>]=?|::|[+\-*=%]|\.[A-Z]+\./i,{pattern:/(^|(?!\().)\/(?!\))/,lookbehind:!0}],punctuation:/\(\/|\/\)|[(),;:&]/}}WR.displayName="ftl";WR.aliases=[];function WR(n){n.register(vi),(function(e){for(var t=/[^<()"']|\((?:<expr>)*\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|"(?:[^\\"]|\\.)*"|'(?:[^\\']|\\.)*'/.source,r=0;r<2;r++)t=t.replace(/<expr>/g,function(){return t});t=t.replace(/<expr>/g,/[^\s\S]/.source);var i={comment:/<#--[\s\S]*?-->/,string:[{pattern:/\br("|')(?:(?!\1)[^\\]|\\.)*\1/,greedy:!0},{pattern:RegExp(/("|')(?:(?!\1|\$\{)[^\\]|\\.|\$\{(?:(?!\})(?:<expr>))*\})*\1/.source.replace(/<expr>/g,function(){return t})),greedy:!0,inside:{interpolation:{pattern:RegExp(/((?:^|[^\\])(?:\\\\)*)\$\{(?:(?!\})(?:<expr>))*\}/.source.replace(/<expr>/g,function(){return t})),lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:null}}}}],keyword:/\b(?:as)\b/,boolean:/\b(?:false|true)\b/,"builtin-function":{pattern:/((?:^|[^?])\?\s*)\w+/,lookbehind:!0,alias:"function"},function:/\b\w+(?=\s*\()/,number:/\b\d+(?:\.\d+)?\b/,operator:/\.\.[<*!]?|->|--|\+\+|&&|\|\||\?{1,2}|[-+*/%!=<>]=?|\b(?:gt|gte|lt|lte)\b/,punctuation:/[,;.:()[\]{}]/};i.string[1].inside.interpolation.inside.rest=i,e.languages.ftl={"ftl-comment":{pattern:/^<#--[\s\S]*/,alias:"comment"},"ftl-directive":{pattern:/^<[\s\S]+>$/,inside:{directive:{pattern:/(^<\/?)[#@][a-z]\w*/i,lookbehind:!0,alias:"keyword"},punctuation:/^<\/?|\/?>$/,content:{pattern:/\s*\S[\s\S]*/,alias:"ftl",inside:i}}},"ftl-interpolation":{pattern:/^\$\{[\s\S]*\}$/,inside:{punctuation:/^\$\{|\}$/,content:{pattern:/\s*\S[\s\S]*/,alias:"ftl",inside:i}}}},e.hooks.add("before-tokenize",function(s){var a=RegExp(/<#--[\s\S]*?-->|<\/?[#@][a-zA-Z](?:<expr>)*?>|\$\{(?:<expr>)*?\}/.source.replace(/<expr>/g,function(){return t}),"gi");e.languages["markup-templating"].buildPlaceholders(s,"ftl",a)}),e.hooks.add("after-tokenize",function(s){e.languages["markup-templating"].tokenizePlaceholders(s,"ftl")})})(n)}qR.displayName="gml";qR.aliases=["gamemakerlanguage"];function qR(n){n.register(cn),n.languages.gamemakerlanguage=n.languages.gml=n.languages.extend("clike",{keyword:/\b(?:break|case|continue|default|do|else|enum|exit|for|globalvar|if|repeat|return|switch|until|var|while)\b/,number:/(?:\b0x[\da-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ulf]{0,4}/i,operator:/--|\+\+|[-+%/=]=?|!=|\*\*?=?|<[<=>]?|>[=>]?|&&?|\^\^?|\|\|?|~|\b(?:and|at|not|or|with|xor)\b/,constant:/\b(?:GM_build_date|GM_version|action_(?:continue|restart|reverse|stop)|all|gamespeed_(?:fps|microseconds)|global|local|noone|other|pi|pointer_(?:invalid|null)|self|timezone_(?:local|utc)|undefined|ev_(?:create|destroy|step|alarm|keyboard|mouse|collision|other|draw|draw_(?:begin|end|post|pre)|keypress|keyrelease|trigger|(?:left|middle|no|right)_button|(?:left|middle|right)_press|(?:left|middle|right)_release|mouse_(?:enter|leave|wheel_down|wheel_up)|global_(?:left|middle|right)_button|global_(?:left|middle|right)_press|global_(?:left|middle|right)_release|joystick(?:1|2)_(?:button1|button2|button3|button4|button5|button6|button7|button8|down|left|right|up)|outside|boundary|game_start|game_end|room_start|room_end|no_more_lives|animation_end|end_of_path|no_more_health|user\d|gui|gui_begin|gui_end|step_(?:begin|end|normal))|vk_(?:alt|anykey|backspace|control|delete|down|end|enter|escape|home|insert|left|nokey|pagedown|pageup|pause|printscreen|return|right|shift|space|tab|up|f\d|numpad\d|add|decimal|divide|lalt|lcontrol|lshift|multiply|ralt|rcontrol|rshift|subtract)|achievement_(?:filter_(?:all_players|favorites_only|friends_only)|friends_info|info|leaderboard_info|our_info|pic_loaded|show_(?:achievement|bank|friend_picker|leaderboard|profile|purchase_prompt|ui)|type_challenge|type_score_challenge)|asset_(?:font|object|path|room|script|shader|sound|sprite|tiles|timeline|unknown)|audio_(?:3d|falloff_(?:exponent_distance|exponent_distance_clamped|inverse_distance|inverse_distance_clamped|linear_distance|linear_distance_clamped|none)|mono|new_system|old_system|stereo)|bm_(?:add|complex|dest_alpha|dest_color|dest_colour|inv_dest_alpha|inv_dest_color|inv_dest_colour|inv_src_alpha|inv_src_color|inv_src_colour|max|normal|one|src_alpha|src_alpha_sat|src_color|src_colour|subtract|zero)|browser_(?:chrome|firefox|ie|ie_mobile|not_a_browser|opera|safari|safari_mobile|tizen|unknown|windows_store)|buffer_(?:bool|f16|f32|f64|fast|fixed|generalerror|grow|invalidtype|network|outofbounds|outofspace|s16|s32|s8|seek_end|seek_relative|seek_start|string|text|u16|u32|u64|u8|vbuffer|wrap)|c_(?:aqua|black|blue|dkgray|fuchsia|gray|green|lime|ltgray|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)|cmpfunc_(?:always|equal|greater|greaterequal|less|lessequal|never|notequal)|cr_(?:appstart|arrow|beam|cross|default|drag|handpoint|hourglass|none|size_all|size_nesw|size_ns|size_nwse|size_we|uparrow)|cull_(?:clockwise|counterclockwise|noculling)|device_(?:emulator|tablet)|device_ios_(?:ipad|ipad_retina|iphone|iphone5|iphone6|iphone6plus|iphone_retina|unknown)|display_(?:landscape|landscape_flipped|portrait|portrait_flipped)|dll_(?:cdecl|cdel|stdcall)|ds_type_(?:grid|list|map|priority|queue|stack)|ef_(?:cloud|ellipse|explosion|firework|flare|rain|ring|smoke|smokeup|snow|spark|star)|fa_(?:archive|bottom|center|directory|hidden|left|middle|readonly|right|sysfile|top|volumeid)|fb_login_(?:default|fallback_to_webview|forcing_safari|forcing_webview|no_fallback_to_webview|use_system_account)|iap_(?:available|canceled|ev_consume|ev_product|ev_purchase|ev_restore|ev_storeload|failed|purchased|refunded|status_available|status_loading|status_processing|status_restoring|status_unavailable|status_uninitialised|storeload_failed|storeload_ok|unavailable)|leaderboard_type_(?:number|time_mins_secs)|lighttype_(?:dir|point)|matrix_(?:projection|view|world)|mb_(?:any|left|middle|none|right)|network_(?:config_(?:connect_timeout|disable_reliable_udp|enable_reliable_udp|use_non_blocking_socket)|socket_(?:bluetooth|tcp|udp)|type_(?:connect|data|disconnect|non_blocking_connect))|of_challenge_(?:lose|tie|win)|os_(?:android|ios|linux|macosx|ps3|ps4|psvita|unknown|uwp|win32|win8native|windows|winphone|xboxone)|phy_debug_render_(?:aabb|collision_pairs|coms|core_shapes|joints|obb|shapes)|phy_joint_(?:anchor_1_x|anchor_1_y|anchor_2_x|anchor_2_y|angle|angle_limits|damping_ratio|frequency|length_1|length_2|lower_angle_limit|max_force|max_length|max_motor_force|max_motor_torque|max_torque|motor_force|motor_speed|motor_torque|reaction_force_x|reaction_force_y|reaction_torque|speed|translation|upper_angle_limit)|phy_particle_data_flag_(?:category|color|colour|position|typeflags|velocity)|phy_particle_flag_(?:colormixing|colourmixing|elastic|powder|spring|tensile|viscous|wall|water|zombie)|phy_particle_group_flag_(?:rigid|solid)|pr_(?:linelist|linestrip|pointlist|trianglefan|trianglelist|trianglestrip)|ps_(?:distr|shape)_(?:diamond|ellipse|gaussian|invgaussian|line|linear|rectangle)|pt_shape_(?:circle|cloud|disk|explosion|flare|line|pixel|ring|smoke|snow|spark|sphere|square|star)|ty_(?:real|string)|gp_(?:face\d|axislh|axislv|axisrh|axisrv|padd|padl|padr|padu|select|shoulderl|shoulderlb|shoulderr|shoulderrb|start|stickl|stickr)|lb_disp_(?:none|numeric|time_ms|time_sec)|lb_sort_(?:ascending|descending|none)|ov_(?:achievements|community|friends|gamegroup|players|settings)|ugc_(?:filetype_(?:community|microtrans)|list_(?:Favorited|Followed|Published|Subscribed|UsedOrPlayed|VotedDown|VotedOn|VotedUp|WillVoteLater)|match_(?:AllGuides|Artwork|Collections|ControllerBindings|IntegratedGuides|Items|Items_Mtx|Items_ReadyToUse|Screenshots|UsableInGame|Videos|WebGuides)|query_(?:AcceptedForGameRankedByAcceptanceDate|CreatedByFriendsRankedByPublicationDate|FavoritedByFriendsRankedByPublicationDate|NotYetRated)|query_RankedBy(?:NumTimesReported|PublicationDate|TextSearch|TotalVotesAsc|Trend|Vote|VotesUp)|result_success|sortorder_CreationOrder(?:Asc|Desc)|sortorder_(?:ForModeration|LastUpdatedDesc|SubscriptionDateDesc|TitleAsc|VoteScoreDesc)|visibility_(?:friends_only|private|public))|vertex_usage_(?:binormal|blendindices|blendweight|color|colour|depth|fog|normal|position|psize|sample|tangent|texcoord|textcoord)|vertex_type_(?:float\d|color|colour|ubyte4)|input_type|layerelementtype_(?:background|instance|oldtilemap|particlesystem|sprite|tile|tilemap|undefined)|se_(?:chorus|compressor|echo|equalizer|flanger|gargle|none|reverb)|text_type|tile_(?:flip|index_mask|mirror|rotate)|(?:obj|rm|scr|spr)\w+)\b/,variable:/\b(?:alarm|application_surface|async_load|background_(?:alpha|blend|color|colour|foreground|height|hspeed|htiled|index|showcolor|showcolour|visible|vspeed|vtiled|width|x|xscale|y|yscale)|bbox_(?:bottom|left|right|top)|browser_(?:height|width)|caption_(?:health|lives|score)|current_(?:day|hour|minute|month|second|time|weekday|year)|cursor_sprite|debug_mode|delta_time|direction|display_aa|error_(?:last|occurred)|event_(?:action|number|object|type)|fps|fps_real|friction|game_(?:display|project|save)_(?:id|name)|gamemaker_(?:pro|registered|version)|gravity|gravity_direction|(?:h|v)speed|health|iap_data|id|image_(?:alpha|angle|blend|depth|index|number|speed|xscale|yscale)|instance_(?:count|id)|keyboard_(?:key|lastchar|lastkey|string)|layer|lives|mask_index|mouse_(?:button|lastbutton|x|y)|object_index|os_(?:browser|device|type|version)|path_(?:endaction|index|orientation|position|positionprevious|scale|speed)|persistent|phy_(?:rotation|(?:col_normal|collision|com|linear_velocity|position|speed)_(?:x|y)|angular_(?:damping|velocity)|position_(?:x|y)previous|speed|linear_damping|bullet|fixed_rotation|active|mass|inertia|dynamic|kinematic|sleeping|collision_points)|pointer_(?:invalid|null)|room|room_(?:caption|first|height|last|persistent|speed|width)|score|secure_mode|show_(?:health|lives|score)|solid|speed|sprite_(?:height|index|width|xoffset|yoffset)|temp_directory|timeline_(?:index|loop|position|running|speed)|transition_(?:color|kind|steps)|undefined|view_(?:angle|current|enabled|(?:h|v)(?:border|speed)|(?:h|w|x|y)port|(?:h|w|x|y)view|object|surface_id|visible)|visible|webgl_enabled|working_directory|(?:x|y)(?:previous|start)|x|y|argument(?:_relitive|_count|\d)|argument|global|local|other|self)\b/})}XR.displayName="gap";XR.aliases=[];function XR(n){n.languages.gap={shell:{pattern:/^gap>[\s\S]*?(?=^gap>|$(?![\s\S]))/m,greedy:!0,inside:{gap:{pattern:/^(gap>).+(?:(?:\r(?:\n|(?!\n))|\n)>.*)*/,lookbehind:!0,inside:null},punctuation:/^gap>/}},comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(^|[^\\'"])(?:'(?:[^\r\n\\']|\\.){1,10}'|"(?:[^\r\n\\"]|\\.)*"(?!")|"""[\s\S]*?""")/,lookbehind:!0,greedy:!0,inside:{continuation:{pattern:/([\r\n])>/,lookbehind:!0,alias:"punctuation"}}},keyword:/\b(?:Assert|Info|IsBound|QUIT|TryNextMethod|Unbind|and|atomic|break|continue|do|elif|else|end|fi|for|function|if|in|local|mod|not|od|or|quit|readonly|readwrite|rec|repeat|return|then|until|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:{pattern:/(^|[^\w.]|\.\.)(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?(?:_[a-z]?)?(?=$|[^\w.]|\.\.)/,lookbehind:!0},continuation:{pattern:/([\r\n])>/,lookbehind:!0,alias:"punctuation"},operator:/->|[-+*/^~=!]|<>|[<>]=?|:=|\.\./,punctuation:/[()[\]{},;.:]/},n.languages.gap.shell.inside.gap.inside=n.languages.gap}YR.displayName="gcode";YR.aliases=[];function YR(n){n.languages.gcode={comment:/;.*|\B\(.*?\)\B/,string:{pattern:/"(?:""|[^"])*"/,greedy:!0},keyword:/\b[GM]\d+(?:\.\d+)?\b/,property:/\b[A-Z]/,checksum:{pattern:/(\*)\d+/,lookbehind:!0,alias:"number"},punctuation:/[:*]/}}KR.displayName="gdscript";KR.aliases=[];function KR(n){n.languages.gdscript={comment:/#.*/,string:{pattern:/@?(?:("|')(?:(?!\1)[^\n\\]|\\[\s\S])*\1(?!"|')|"""(?:[^\\]|\\[\s\S])*?""")/,greedy:!0},"class-name":{pattern:/(^(?:class|class_name|extends)[ \t]+|^export\([ \t]*|\bas[ \t]+|(?:\b(?:const|var)[ \t]|[,(])[ \t]*\w+[ \t]*:[ \t]*|->[ \t]*)[a-zA-Z_]\w*/m,lookbehind:!0},keyword:/\b(?:and|as|assert|break|breakpoint|class|class_name|const|continue|elif|else|enum|export|extends|for|func|if|in|is|master|mastersync|match|not|null|onready|or|pass|preload|puppet|puppetsync|remote|remotesync|return|self|setget|signal|static|tool|var|while|yield)\b/,function:/\b[a-z_]\w*(?=[ \t]*\()/i,variable:/\$\w+/,number:[/\b0b[01_]+\b|\b0x[\da-fA-F_]+\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.[\d_]+)(?:e[+-]?[\d_]+)?\b/,/\b(?:INF|NAN|PI|TAU)\b/],constant:/\b[A-Z][A-Z_\d]*\b/,boolean:/\b(?:false|true)\b/,operator:/->|:=|&&|\|\||<<|>>|[-+*/%&|!<>=]=?|[~^]/,punctuation:/[.:,;()[\]{}]/}}ZR.displayName="gedcom";ZR.aliases=[];function ZR(n){n.languages.gedcom={"line-value":{pattern:/(^[\t ]*\d+ +(?:@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@ +)?\w+ ).+/m,lookbehind:!0,inside:{pointer:{pattern:/^@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@$/,alias:"variable"}}},record:{pattern:/(^[\t ]*\d+ +(?:@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@ +)?)\w+/m,lookbehind:!0,alias:"tag"},level:{pattern:/(^[\t ]*)\d+/m,lookbehind:!0,alias:"number"},pointer:{pattern:/@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@/,alias:"variable"}}}QR.displayName="gettext";QR.aliases=["po"];function QR(n){n.languages.gettext={comment:[{pattern:/# .*/,greedy:!0,alias:"translator-comment"},{pattern:/#\..*/,greedy:!0,alias:"extracted-comment"},{pattern:/#:.*/,greedy:!0,alias:"reference-comment"},{pattern:/#,.*/,greedy:!0,alias:"flag-comment"},{pattern:/#\|.*/,greedy:!0,alias:"previously-untranslated-comment"},{pattern:/#.*/,greedy:!0}],string:{pattern:/(^|[^\\])"(?:[^"\\]|\\.)*"/,lookbehind:!0,greedy:!0},keyword:/^msg(?:ctxt|id|id_plural|str)\b/m,number:/\b\d+\b/,punctuation:/[\[\]]/},n.languages.po=n.languages.gettext}JR.displayName="gherkin";JR.aliases=[];function JR(n){(function(e){var t=/(?:\r?\n|\r)[ \t]*\|.+\|(?:(?!\|).)*/.source;e.languages.gherkin={pystring:{pattern:/("""|''')[\s\S]+?\1/,alias:"string"},comment:{pattern:/(^[ \t]*)#.*/m,lookbehind:!0},tag:{pattern:/(^[ \t]*)@\S*/m,lookbehind:!0},feature:{pattern:/((?:^|\r?\n|\r)[ \t]*)(?:Ability|Ahoy matey!|Arwedd|Aspekt|Besigheid Behoefte|Business Need|Caracteristica|Caracterstica|Egenskab|Egenskap|Eiginleiki|Feature|Fa|Fitur|Fonctionnalit|Fonksyonalite|Funcionalidade|Funcionalitat|Functionalitate|Funcionalitate|Funcionalitate|Functionaliteit|Fungsi|Funkcia|Funkcija|Funkcionalitte|Funkcionalnost|Funkcja|Funksie|Funktionalitt|Funktionalitit|Funzionalit|Hwaet|Hwt|Jellemz|Karakteristik|Lastnost|Mak|Mogucnost|laH|Mogunost|Moznosti|Monosti|OH HAI|Omadus|Ominaisuus|Osobina|zellik|Potrzeba biznesowa|perbogh|poQbogh malja'|Poadavek|Poiadavka|Pretty much|Qap|Qu'meH 'ut|Savyb|Tnh nng|Trajto|Vermo|Vlastnos|Waciwo|Znailnost||||||||||||||||  || || ||||||||||):(?:[^:\r\n]+(?:\r?\n|\r|$))*/,lookbehind:!0,inside:{important:{pattern:/(:)[^\r\n]+/,lookbehind:!0},keyword:/[^:\r\n]+:/}},scenario:{pattern:/(^[ \t]*)(?:Abstract Scenario|Abstrakt Scenario|Achtergrond|Aer|r|Agtergrond|All y'all|Antecedentes|Antecedents|Atburars|Atburarsir|Awww, look mate|B4|Background|Baggrund|Bakgrund|Bakgrunn|Bakgrunnur|Beispiele|Beispiller|Bi cnh|Cefndir|Cenario|Cenrio|Cenario de Fundo|Cenrio de Fundo|Cenarios|Cenrios|Contesto|Context|Contexte|Contexto|Conto|Contoh|Contone|Dmi|Dasar|Dead men tell no tales|Delineacao do Cenario|Delineao do Cenrio|Dis is what went down|D liu|Dyagram Senaryo|Dyagram senaryo|Egzanp|Ejemplos|Eksempler|Ekzemploj|Enghreifftiau|Esbozo do escenario|Escenari|Escenario|Esempi|Esquema de l'escenari|Esquema del escenario|Esquema do Cenario|Esquema do Cenrio|EXAMPLZ|Examples|Exempel|Exemple|Exemples|Exemplos|First off|Fono|Forgatknyv|Forgatknyv vzlat|Fundo|Gemi|Grundlage|Hannergrond|ghantoH|Httr|Heave to|Istorik|Juhtumid|Keadaan|Khung kch bn|Khung tnh hung|Kch bn|Koncept|Konsep skenario|Kontks|Kontekst|Kontekstas|Konteksts|Kontext|Konturo de la scenaro|Latar Belakang|lut chovnatlh|lut|lutmey|Lsing Atburarsar|Lsing Dma|MISHUN SRSLY|MISHUN|Menggariskan Senario|mo'|Nrt Scenra|Nrt Scne|Nrt Scenru|Oris scenarija|rnekler|Osnova|Osnova Scenra|Osnova scne|Osnutek|Ozadje|Paraugs|Pavyzdiai|Pldk|Piemri|Plan du scnario|Plan du Scnario|Plan Senaryo|Plan senaryo|Plang vum Szenario|Pozad|Pozadie|Pozadina|Prklady|Pklady|Primer|Primeri|Primjeri|Przykady|Raamstsenaarium|Reckon it's like|Rerefons|Scenr|Scn|Scenarie|Scenarij|Scenarijai|Scenarijaus ablonas|Scenariji|Scenrijs|Scenrijs pc parauga|Scenarijus|Scenario|Scnario|Scenario Amlinellol|Scenario Outline|Scenario Template|Scenariomal|Scenariomall|Scenarios|Scenariu|Scenariusz|Scenaro|Schema dello scenario|Se e|Se the|Se e|Senario|Senaryo Deskripsyon|Senaryo deskripsyon|Senaryo|Senaryo tasla|Shiver me timbers|Situcija|Situai|Situasie Uiteensetting|Situasie|Skenario konsep|Skenario|Skica|Structura scenariu|Structur scenariu|Struktura scenarija|Stsenaarium|Swa hwaer swa|Swa|Swa hwr swa|Szablon scenariusza|Szenario|Szenariogrundriss|Tapaukset|Tapaus|Tapausaihio|Taust|Tausta|Template Keadaan|Template Senario|Template Situai|The thing of it is|Tnh hung|Variantai|Voorbeelde|Voorbeelden|Wharrimean is|Yo-ho-ho|You'll wanna|Zaoenia|| ||||||||||||||||||  || | | || | |||||||| ||| || |||| ||   || ||| |||| |  |||||||||||||||||| ||||||||||||||||||):[^:\r\n]*/m,lookbehind:!0,inside:{important:{pattern:/(:)[^\r\n]*/,lookbehind:!0},keyword:/[^:\r\n]+:/}},"table-body":{pattern:RegExp("("+t+")(?:"+t+")+"),lookbehind:!0,inside:{outline:{pattern:/<[^>]+>/,alias:"variable"},td:{pattern:/\s*[^\s|][^|]*/,alias:"string"},punctuation:/\|/}},"table-head":{pattern:RegExp(t),inside:{th:{pattern:/\s*[^\s|][^|]*/,alias:"variable"},punctuation:/\|/}},atrule:{pattern:/(^[ \t]+)(?:'a|'ach|'ej|7|a|A tak|A taktie|A tie|A zrove|Aber|Ac|Adott|Akkor|Ak|Aleshores|Ale|Ali|Allora|Alors|Als|Ama|Amennyiben|Amikor|Ampak|an|AN|Ananging|And y'all|And|Angenommen|Anrhegedig a|An|Apabila|Ats|Atesa|Atunci|Avast!|Aye|A|awer|Bagi|Banjur|Bet|Bit|Blimey!|Buh|But at the end of the day I reckon|But y'all|But|BUT|Cal|Cnd|Cand|Cando|Ce|Cuando|e|a e|a|Dadas|Dada|Dados|Dado|DaH ghu' bejlu'|dann|Dann|Dano|Dan|Dar|Dat fiind|Data|Date fiind|Date|Dati fiind|Dati|Dai fiind|Dai fiind|DEN|Dato|De|Den youse gotta|Dengan|Diberi|Diyelim ki|Donada|Donat|Donitao|Do|Dun|Duota|urh|Eeldades|Ef|Eer ki|Entao|Ento|Entn|E|En|Entonces|Epi|s|Etant donne|Etant donn|Et|tant donnes|tant donne|tant donn|Etant donnes|Etant donns|tant donns|Fakat|Gangway!|Gdy|Gegeben seien|Gegeben sei|Gegeven|Gegewe|ghu' noblu'|Gitt|Given y'all|Given|Givet|Givun|Ha|Cho|I CAN HAZ|In|Ir|It's just unbelievable|I|Ja|Jeli|Jeeli|Kad|Kada|Kadar|Kai|Kaj|Kdy|Ke|Kemudian|Ketika|Khi|Kiedy|Ko|Kuid|Kui|Kun|Lan|latlh|Le sa a|Let go and haul|Le|L sa a|L|Logo|Lorsqu'<|Lorsque|m|Maar|Mais|Majc|Ma|Majd|Maka|Manawa|Mas|Men|Menawa|Mutta|Nalika|Nalikaning|Nanging|Nr|Nr|Nato|Nhng|Niin|Njuk|O zaman|Och|Og|Oletetaan|Ond|Onda|Oraz|Pak|Pero|Per|Podano|Pokia|Pokud|Potem|Potom|Privzeto|Pryd|Quan|Quand|Quando|qaSDI'|S|Sed|Se|Siis|Sipoze ke|Sipoze Ke|Sipoze|Si|i|i|Soit|Stel|Tada|Tad|Takrat|Tak|Tapi|Ter|Tetapi|Tha the|Tha|Then y'all|Then|Th|Thurh|Toda|Too right|Un|Und|ugeholl|V|vaj|Vendar|Ve|wann|Wanneer|WEN|Wenn|When y'all|When|Wtedy|Wun|Y'know|Yeah nah|Yna|Youse know like when|Youse know when youse got|Y|Za predpokladu|Za pedpokladu|Zadan|Zadani|Zadano|Zadate|Zadato|Zakadajc|Zaradi|Zatati|a e|a||egar|urh|||||| |||||||||||||||||||||  ||||||||||||, |||||||||||||||||||||| |||||||| |||||||||||||||||||| ||||| ||||||||||||||<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<)(?=[ \t])/m,lookbehind:!0},string:{pattern:/"(?:\\.|[^"\\\r\n])*"|'(?:\\.|[^'\\\r\n])*'/,inside:{outline:{pattern:/<[^>]+>/,alias:"variable"}}},outline:{pattern:/<[^>]+>/,alias:"variable"}}})(n)}eN.displayName="git";eN.aliases=[];function eN(n){n.languages.git={comment:/^#.*/m,deleted:/^[-].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m}}tN.displayName="glsl";tN.aliases=[];function tN(n){n.register(no),n.languages.glsl=n.languages.extend("c",{keyword:/\b(?:active|asm|atomic_uint|attribute|[ibdu]?vec[234]|bool|break|buffer|case|cast|centroid|class|coherent|common|const|continue|d?mat[234](?:x[234])?|default|discard|do|double|else|enum|extern|external|false|filter|fixed|flat|float|for|fvec[234]|goto|half|highp|hvec[234]|[iu]?sampler2DMS(?:Array)?|[iu]?sampler2DRect|[iu]?samplerBuffer|[iu]?samplerCube|[iu]?samplerCubeArray|[iu]?sampler[123]D|[iu]?sampler[12]DArray|[iu]?image2DMS(?:Array)?|[iu]?image2DRect|[iu]?imageBuffer|[iu]?imageCube|[iu]?imageCubeArray|[iu]?image[123]D|[iu]?image[12]DArray|if|in|inline|inout|input|int|interface|invariant|layout|long|lowp|mediump|namespace|noinline|noperspective|out|output|partition|patch|precise|precision|public|readonly|resource|restrict|return|sample|sampler[12]DArrayShadow|sampler[12]DShadow|sampler2DRectShadow|sampler3DRect|samplerCubeArrayShadow|samplerCubeShadow|shared|short|sizeof|smooth|static|struct|subroutine|superp|switch|template|this|true|typedef|uint|uniform|union|unsigned|using|varying|void|volatile|while|writeonly)\b/})}nN.displayName="gn";nN.aliases=["gni"];function nN(n){n.languages.gn={comment:{pattern:/#.*/,greedy:!0},"string-literal":{pattern:/(^|[^\\"])"(?:[^\r\n"\\]|\\.)*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\{[\s\S]*?\}|[a-zA-Z_]\w*|0x[a-fA-F0-9]{2})/,lookbehind:!0,inside:{number:/^\$0x[\s\S]{2}$/,variable:/^\$\w+$/,"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},keyword:/\b(?:else|if)\b/,boolean:/\b(?:false|true)\b/,"builtin-function":{pattern:/\b(?:assert|defined|foreach|import|pool|print|template|tool|toolchain)(?=\s*\()/i,alias:"keyword"},function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:current_cpu|current_os|current_toolchain|default_toolchain|host_cpu|host_os|root_build_dir|root_gen_dir|root_out_dir|target_cpu|target_gen_dir|target_os|target_out_dir)\b/,number:/-?\b\d+\b/,operator:/[-+!=<>]=?|&&|\|\|/,punctuation:/[(){}[\],.]/},n.languages.gn["string-literal"].inside.interpolation.inside.expression.inside=n.languages.gn,n.languages.gni=n.languages.gn}rN.displayName="linker-script";rN.aliases=["ld"];function rN(n){n.languages["linker-script"]={comment:{pattern:/(^|\s)\/\*[\s\S]*?(?:$|\*\/)/,lookbehind:!0,greedy:!0},identifier:{pattern:/"[^"\r\n]*"/,greedy:!0},"location-counter":{pattern:/\B\.\B/,alias:"important"},section:{pattern:/(^|[^\w*])\.\w+\b/,lookbehind:!0,alias:"keyword"},function:/\b[A-Z][A-Z_]*(?=\s*\()/,number:/\b(?:0[xX][a-fA-F0-9]+|\d+)[KM]?\b/,operator:/>>=?|<<=?|->|\+\+|--|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?/,punctuation:/[(){},;]/},n.languages.ld=n.languages["linker-script"]}iN.displayName="go";iN.aliases=[];function iN(n){n.register(cn),n.languages.go=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),n.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete n.languages.go["class-name"]}sN.displayName="go-module";sN.aliases=["go-mod"];function sN(n){n.languages["go-mod"]=n.languages["go-module"]={comment:{pattern:/\/\/.*/,greedy:!0},version:{pattern:/(^|[\s()[\],])v\d+\.\d+\.\d+(?:[+-][-+.\w]*)?(?![^\s()[\],])/,lookbehind:!0,alias:"number"},"go-version":{pattern:/((?:^|\s)go\s+)\d+(?:\.\d+){1,2}/,lookbehind:!0,alias:"number"},keyword:{pattern:/^([ \t]*)(?:exclude|go|module|replace|require|retract)\b/m,lookbehind:!0},operator:/=>/,punctuation:/[()[\],]/}}aN.displayName="gradle";aN.aliases=[];function aN(n){n.register(cn),(function(e){var t={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};e.languages.gradle=e.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:apply|def|dependencies|else|if|implementation|import|plugin|plugins|project|repositories|repository|sourceSets|tasks|val)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),e.languages.insertBefore("gradle","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}}}),e.languages.insertBefore("gradle","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),e.languages.insertBefore("gradle","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),t.inside.expression.inside=e.languages.gradle})(n)}oN.displayName="graphql";oN.aliases=[];function oN(n){n.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:n.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},n.hooks.add("after-tokenize",function(t){if(t.language!=="graphql")return;var r=t.tokens.filter(function(_){return typeof _!="string"&&_.type!=="comment"&&_.type!=="scalar"}),i=0;function s(_){return r[i+_]}function a(_,b){b=b||0;for(var S=0;S<_.length;S++){var E=s(S+b);if(!E||E.type!==_[S])return!1}return!0}function o(_,b){for(var S=1,E=i;E<r.length;E++){var A=r[E],R=A.content;if(A.type==="punctuation"&&typeof R=="string"){if(_.test(R))S++;else if(b.test(R)&&(S--,S===0))return E}}return-1}function l(_,b){var S=_.alias;S?Array.isArray(S)||(_.alias=S=[S]):_.alias=S=[],S.push(b)}for(;i<r.length;){var u=r[i++];if(u.type==="keyword"&&u.content==="mutation"){var c=[];if(a(["definition-mutation","punctuation"])&&s(1).content==="("){i+=2;var h=o(/^\($/,/^\)$/);if(h===-1)continue;for(;i<h;i++){var f=s(0);f.type==="variable"&&(l(f,"variable-input"),c.push(f.content))}i=h+1}if(a(["punctuation","property-query"])&&s(0).content==="{"&&(i++,l(s(0),"property-mutation"),c.length>0)){var g=o(/^\{$/,/^\}$/);if(g===-1)continue;for(var m=i;m<g;m++){var v=r[m];v.type==="variable"&&c.indexOf(v.content)>=0&&l(v,"variable-input")}}}}})}lN.displayName="groovy";lN.aliases=[];function lN(n){n.register(cn),(function(e){var t={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};e.languages.groovy=e.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:abstract|as|assert|boolean|break|byte|case|catch|char|class|const|continue|def|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|in|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|trait|transient|try|void|volatile|while)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),e.languages.insertBefore("groovy","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}}}),e.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),e.languages.insertBefore("groovy","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),t.inside.expression.inside=e.languages.groovy})(n)}uN.displayName="less";uN.aliases=[];function uN(n){n.register(cc),n.languages.less=n.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),n.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}})}cN.displayName="scss";cN.aliases=[];function cN(n){n.register(cc),n.languages.scss=n.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),n.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),n.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),n.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),n.languages.scss.atrule.inside.rest=n.languages.scss}dN.displayName="textile";dN.aliases=[];function dN(n){n.register(ni),(function(e){var t=/\([^|()\n]+\)|\[[^\]\n]+\]|\{[^}\n]+\}/.source,r=/\)|\((?![^|()\n]+\))/.source;function i(h,f){return RegExp(h.replace(/<MOD>/g,function(){return"(?:"+t+")"}).replace(/<PAR>/g,function(){return"(?:"+r+")"}),f||"")}var s={css:{pattern:/\{[^{}]+\}/,inside:{rest:e.languages.css}},"class-id":{pattern:/(\()[^()]+(?=\))/,lookbehind:!0,alias:"attr-value"},lang:{pattern:/(\[)[^\[\]]+(?=\])/,lookbehind:!0,alias:"attr-value"},punctuation:/[\\\/]\d+|\S/},a=e.languages.textile=e.languages.extend("markup",{phrase:{pattern:/(^|\r|\n)\S[\s\S]*?(?=$|\r?\n\r?\n|\r\r)/,lookbehind:!0,inside:{"block-tag":{pattern:i(/^[a-z]\w*(?:<MOD>|<PAR>|[<>=])*\./.source),inside:{modifier:{pattern:i(/(^[a-z]\w*)(?:<MOD>|<PAR>|[<>=])+(?=\.)/.source),lookbehind:!0,inside:s},tag:/^[a-z]\w*/,punctuation:/\.$/}},list:{pattern:i(/^[*#]+<MOD>*\s+\S.*/.source,"m"),inside:{modifier:{pattern:i(/(^[*#]+)<MOD>+/.source),lookbehind:!0,inside:s},punctuation:/^[*#]+/}},table:{pattern:i(/^(?:(?:<MOD>|<PAR>|[<>=^~])+\.\s*)?(?:\|(?:(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+\.|(?!(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+\.))[^|]*)+\|/.source,"m"),inside:{modifier:{pattern:i(/(^|\|(?:\r?\n|\r)?)(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+(?=\.)/.source),lookbehind:!0,inside:s},punctuation:/\||^\./}},inline:{pattern:i(/(^|[^a-zA-Z\d])(\*\*|__|\?\?|[*_%@+\-^~])<MOD>*.+?\2(?![a-zA-Z\d])/.source),lookbehind:!0,inside:{bold:{pattern:i(/(^(\*\*?)<MOD>*).+?(?=\2)/.source),lookbehind:!0},italic:{pattern:i(/(^(__?)<MOD>*).+?(?=\2)/.source),lookbehind:!0},cite:{pattern:i(/(^\?\?<MOD>*).+?(?=\?\?)/.source),lookbehind:!0,alias:"string"},code:{pattern:i(/(^@<MOD>*).+?(?=@)/.source),lookbehind:!0,alias:"keyword"},inserted:{pattern:i(/(^\+<MOD>*).+?(?=\+)/.source),lookbehind:!0},deleted:{pattern:i(/(^-<MOD>*).+?(?=-)/.source),lookbehind:!0},span:{pattern:i(/(^%<MOD>*).+?(?=%)/.source),lookbehind:!0},modifier:{pattern:i(/(^\*\*|__|\?\?|[*_%@+\-^~])<MOD>+/.source),lookbehind:!0,inside:s},punctuation:/[*_%?@+\-^~]+/}},"link-ref":{pattern:/^\[[^\]]+\]\S+$/m,inside:{string:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0},url:{pattern:/(^\])\S+$/,lookbehind:!0},punctuation:/[\[\]]/}},link:{pattern:i(/"<MOD>*[^"]+":.+?(?=[^\w/]?(?:\s|$))/.source),inside:{text:{pattern:i(/(^"<MOD>*)[^"]+(?=")/.source),lookbehind:!0},modifier:{pattern:i(/(^")<MOD>+/.source),lookbehind:!0,inside:s},url:{pattern:/(:).+/,lookbehind:!0},punctuation:/[":]/}},image:{pattern:i(/!(?:<MOD>|<PAR>|[<>=])*(?![<>=])[^!\s()]+(?:\([^)]+\))?!(?::.+?(?=[^\w/]?(?:\s|$)))?/.source),inside:{source:{pattern:i(/(^!(?:<MOD>|<PAR>|[<>=])*)(?![<>=])[^!\s()]+(?:\([^)]+\))?(?=!)/.source),lookbehind:!0,alias:"url"},modifier:{pattern:i(/(^!)(?:<MOD>|<PAR>|[<>=])+/.source),lookbehind:!0,inside:s},url:{pattern:/(:).+/,lookbehind:!0},punctuation:/[!:]/}},footnote:{pattern:/\b\[\d+\]/,alias:"comment",inside:{punctuation:/\[|\]/}},acronym:{pattern:/\b[A-Z\d]+\([^)]+\)/,inside:{comment:{pattern:/(\()[^()]+(?=\))/,lookbehind:!0},punctuation:/[()]/}},mark:{pattern:/\b\((?:C|R|TM)\)/,alias:"comment",inside:{punctuation:/[()]/}}}}}),o=a.phrase.inside,l={inline:o.inline,link:o.link,image:o.image,footnote:o.footnote,acronym:o.acronym,mark:o.mark};a.tag.pattern=/<\/?(?!\d)[a-z0-9]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i;var u=o.inline.inside;u.bold.inside=l,u.italic.inside=l,u.inserted.inside=l,u.deleted.inside=l,u.span.inside=l;var c=o.table.inside;c.inline=l.inline,c.link=l.link,c.image=l.image,c.footnote=l.footnote,c.acronym=l.acronym,c.mark=l.mark})(n)}hN.displayName="haml";hN.aliases=[];function hN(n){n.register(Ph),(function(e){e.languages.haml={"multiline-comment":{pattern:/((?:^|\r?\n|\r)([\t ]*))(?:\/|-#).*(?:(?:\r?\n|\r)\2[\t ].+)*/,lookbehind:!0,alias:"comment"},"multiline-code":[{pattern:/((?:^|\r?\n|\r)([\t ]*)(?:[~-]|[&!]?=)).*,[\t ]*(?:(?:\r?\n|\r)\2[\t ].*,[\t ]*)*(?:(?:\r?\n|\r)\2[\t ].+)/,lookbehind:!0,inside:e.languages.ruby},{pattern:/((?:^|\r?\n|\r)([\t ]*)(?:[~-]|[&!]?=)).*\|[\t ]*(?:(?:\r?\n|\r)\2[\t ].*\|[\t ]*)*/,lookbehind:!0,inside:e.languages.ruby}],filter:{pattern:/((?:^|\r?\n|\r)([\t ]*)):[\w-]+(?:(?:\r?\n|\r)(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/,lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"symbol"}}},markup:{pattern:/((?:^|\r?\n|\r)[\t ]*)<.+/,lookbehind:!0,inside:e.languages.markup},doctype:{pattern:/((?:^|\r?\n|\r)[\t ]*)!!!(?: .+)?/,lookbehind:!0},tag:{pattern:/((?:^|\r?\n|\r)[\t ]*)[%.#][\w\-#.]*[\w\-](?:\([^)]+\)|\{(?:\{[^}]+\}|[^{}])+\}|\[[^\]]+\])*[\/<>]*/,lookbehind:!0,inside:{attributes:[{pattern:/(^|[^#])\{(?:\{[^}]+\}|[^{}])+\}/,lookbehind:!0,inside:e.languages.ruby},{pattern:/\([^)]+\)/,inside:{"attr-value":{pattern:/(=\s*)(?:"(?:\\.|[^\\"\r\n])*"|[^)\s]+)/,lookbehind:!0},"attr-name":/[\w:-]+(?=\s*!?=|\s*[,)])/,punctuation:/[=(),]/}},{pattern:/\[[^\]]+\]/,inside:e.languages.ruby}],punctuation:/[<>]/}},code:{pattern:/((?:^|\r?\n|\r)[\t ]*(?:[~-]|[&!]?=)).+/,lookbehind:!0,inside:e.languages.ruby},interpolation:{pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"},ruby:{pattern:/[\s\S]+/,inside:e.languages.ruby}}},punctuation:{pattern:/((?:^|\r?\n|\r)[\t ]*)[~=\-&!]+/,lookbehind:!0}};for(var t="((?:^|\\r?\\n|\\r)([\\t ]*)):{{filter_name}}(?:(?:\\r?\\n|\\r)(?:\\2[\\t ].+|\\s*?(?=\\r?\\n|\\r)))+",r=["css",{filter:"coffee",language:"coffeescript"},"erb","javascript","less","markdown","ruby","scss","textile"],i={},s=0,a=r.length;s<a;s++){var o=r[s];o=typeof o=="string"?{filter:o,language:o}:o,e.languages[o.language]&&(i["filter-"+o.filter]={pattern:RegExp(t.replace("{{filter_name}}",function(){return o.filter})),lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"symbol"},text:{pattern:/[\s\S]+/,alias:[o.language,"language-"+o.language],inside:e.languages[o.language]}}})}e.languages.insertBefore("haml","filter",i)})(n)}pN.displayName="handlebars";pN.aliases=["hbs","mustache"];function pN(n){n.register(vi),(function(e){e.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},e.hooks.add("before-tokenize",function(t){var r=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;e.languages["markup-templating"].buildPlaceholders(t,"handlebars",r)}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"handlebars")}),e.languages.hbs=e.languages.handlebars,e.languages.mustache=e.languages.handlebars})(n)}jg.displayName="haskell";jg.aliases=["hs"];function jg(n){n.languages.haskell={comment:{pattern:/(^|[^-!#$%*+=?&@|~.:<>^\\\/])(?:--(?:(?=.)[^-!#$%*+=?&@|~.:<>^\\\/].*|$)|\{-[\s\S]*?-\})/m,lookbehind:!0},char:{pattern:/'(?:[^\\']|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|ACK|BEL|BS|CAN|CR|DC1|DC2|DC3|DC4|DEL|DLE|EM|ENQ|EOT|ESC|ETB|ETX|FF|FS|GS|HT|LF|NAK|NUL|RS|SI|SO|SOH|SP|STX|SUB|SYN|US|VT|\d+|o[0-7]+|x[0-9a-fA-F]+))'/,alias:"string"},string:{pattern:/"(?:[^\\"]|\\(?:\S|\s+\\))*"/,greedy:!0},keyword:/\b(?:case|class|data|deriving|do|else|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b/,"import-statement":{pattern:/(^[\t ]*)import\s+(?:qualified\s+)?(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*(?:\s+as\s+(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|hiding|import|qualified)\b/,punctuation:/\./}},builtin:/\b(?:abs|acos|acosh|all|and|any|appendFile|approxRational|asTypeOf|asin|asinh|atan|atan2|atanh|basicIORun|break|catch|ceiling|chr|compare|concat|concatMap|const|cos|cosh|curry|cycle|decodeFloat|denominator|digitToInt|div|divMod|drop|dropWhile|either|elem|encodeFloat|enumFrom|enumFromThen|enumFromThenTo|enumFromTo|error|even|exp|exponent|fail|filter|flip|floatDigits|floatRadix|floatRange|floor|fmap|foldl|foldl1|foldr|foldr1|fromDouble|fromEnum|fromInt|fromInteger|fromIntegral|fromRational|fst|gcd|getChar|getContents|getLine|group|head|id|inRange|index|init|intToDigit|interact|ioError|isAlpha|isAlphaNum|isAscii|isControl|isDenormalized|isDigit|isHexDigit|isIEEE|isInfinite|isLower|isNaN|isNegativeZero|isOctDigit|isPrint|isSpace|isUpper|iterate|last|lcm|length|lex|lexDigits|lexLitChar|lines|log|logBase|lookup|map|mapM|mapM_|max|maxBound|maximum|maybe|min|minBound|minimum|mod|negate|not|notElem|null|numerator|odd|or|ord|otherwise|pack|pi|pred|primExitWith|print|product|properFraction|putChar|putStr|putStrLn|quot|quotRem|range|rangeSize|read|readDec|readFile|readFloat|readHex|readIO|readInt|readList|readLitChar|readLn|readOct|readParen|readSigned|reads|readsPrec|realToFrac|recip|rem|repeat|replicate|return|reverse|round|scaleFloat|scanl|scanl1|scanr|scanr1|seq|sequence|sequence_|show|showChar|showInt|showList|showLitChar|showParen|showSigned|showString|shows|showsPrec|significand|signum|sin|sinh|snd|sort|span|splitAt|sqrt|subtract|succ|sum|tail|take|takeWhile|tan|tanh|threadToIOResult|toEnum|toInt|toInteger|toLower|toRational|toUpper|truncate|uncurry|undefined|unlines|until|unwords|unzip|unzip3|userError|words|writeFile|zip|zip3|zipWith|zipWith3)\b/,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0o[0-7]+|0x[0-9a-f]+)\b/i,operator:[{pattern:/`(?:[A-Z][\w']*\.)*[_a-z][\w']*`/,greedy:!0},{pattern:/(\s)\.(?=\s)/,lookbehind:!0},/[-!#$%*+=?&@|~:<>^\\\/][-!#$%*+=?&@|~.:<>^\\\/]*|\.[-!#$%*+=?&@|~.:<>^\\\/]+/],hvariable:{pattern:/\b(?:[A-Z][\w']*\.)*[_a-z][\w']*/,inside:{punctuation:/\./}},constant:{pattern:/\b(?:[A-Z][\w']*\.)*[A-Z][\w']*/,inside:{punctuation:/\./}},punctuation:/[{}[\];(),.:]/},n.languages.hs=n.languages.haskell}fN.displayName="haxe";fN.aliases=[];function fN(n){n.register(cn),n.languages.haxe=n.languages.extend("clike",{string:{pattern:/"(?:[^"\\]|\\[\s\S])*"/,greedy:!0},"class-name":[{pattern:/(\b(?:abstract|class|enum|extends|implements|interface|new|typedef)\s+)[A-Z_]\w*/,lookbehind:!0},/\b[A-Z]\w*/],keyword:/\bthis\b|\b(?:abstract|as|break|case|cast|catch|class|continue|default|do|dynamic|else|enum|extends|extern|final|for|from|function|if|implements|import|in|inline|interface|macro|new|null|operator|overload|override|package|private|public|return|static|super|switch|throw|to|try|typedef|untyped|using|var|while)(?!\.)\b/,function:{pattern:/\b[a-z_]\w*(?=\s*(?:<[^<>]*>\s*)?\()/i,greedy:!0},operator:/\.{3}|\+\+|--|&&|\|\||->|=>|(?:<<?|>{1,3}|[-+*/%!=&|^])=?|[?:~]/}),n.languages.insertBefore("haxe","string",{"string-interpolation":{pattern:/'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{interpolation:{pattern:/(^|[^\\])\$(?:\w+|\{[^{}]+\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:n.languages.haxe}}},string:/[\s\S]+/}}}),n.languages.insertBefore("haxe","class-name",{regex:{pattern:/~\/(?:[^\/\\\r\n]|\\.)+\/[a-z]*/,greedy:!0,inside:{"regex-flags":/\b[a-z]+$/,"regex-source":{pattern:/^(~\/)[\s\S]+(?=\/$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^~\/|\/$/}}}),n.languages.insertBefore("haxe","keyword",{preprocessor:{pattern:/#(?:else|elseif|end|if)\b.*/,alias:"property"},metadata:{pattern:/@:?[\w.]+/,alias:"symbol"},reification:{pattern:/\$(?:\w+|(?=\{))/,alias:"important"}})}gN.displayName="hcl";gN.aliases=[];function gN(n){n.languages.hcl={comment:/(?:\/\/|#).*|\/\*[\s\S]*?(?:\*\/|$)/,heredoc:{pattern:/<<-?(\w+\b)[\s\S]*?^[ \t]*\1/m,greedy:!0,alias:"string"},keyword:[{pattern:/(?:data|resource)\s+(?:"(?:\\[\s\S]|[^\\"])*")(?=\s+"[\w-]+"\s+\{)/i,inside:{type:{pattern:/(resource|data|\s+)(?:"(?:\\[\s\S]|[^\\"])*")/i,lookbehind:!0,alias:"variable"}}},{pattern:/(?:backend|module|output|provider|provisioner|variable)\s+(?:[\w-]+|"(?:\\[\s\S]|[^\\"])*")\s+(?=\{)/i,inside:{type:{pattern:/(backend|module|output|provider|provisioner|variable)\s+(?:[\w-]+|"(?:\\[\s\S]|[^\\"])*")\s+/i,lookbehind:!0,alias:"variable"}}},/[\w-]+(?=\s+\{)/],property:[/[-\w\.]+(?=\s*=(?!=))/,/"(?:\\[\s\S]|[^\\"])+"(?=\s*[:=])/],string:{pattern:/"(?:[^\\$"]|\\[\s\S]|\$(?:(?=")|\$+(?!\$)|[^"${])|\$\{(?:[^{}"]|"(?:[^\\"]|\\[\s\S])*")*\})*"/,greedy:!0,inside:{interpolation:{pattern:/(^|[^$])\$\{(?:[^{}"]|"(?:[^\\"]|\\[\s\S])*")*\}/,lookbehind:!0,inside:{type:{pattern:/(\b(?:count|data|local|module|path|self|terraform|var)\b\.)[\w\*]+/i,lookbehind:!0,alias:"variable"},keyword:/\b(?:count|data|local|module|path|self|terraform|var)\b/i,function:/\w+(?=\()/,string:{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0},number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,punctuation:/[!\$#%&'()*+,.\/;<=>@\[\\\]^`{|}~?:]/}}}},number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,boolean:/\b(?:false|true)\b/i,punctuation:/[=\[\]{}]/}}mN.displayName="hlsl";mN.aliases=[];function mN(n){n.register(no),n.languages.hlsl=n.languages.extend("c",{"class-name":[n.languages.c["class-name"],/\b(?:AppendStructuredBuffer|BlendState|Buffer|ByteAddressBuffer|CompileShader|ComputeShader|ConsumeStructuredBuffer|DepthStencilState|DepthStencilView|DomainShader|GeometryShader|Hullshader|InputPatch|LineStream|OutputPatch|PixelShader|PointStream|RWBuffer|RWByteAddressBuffer|RWStructuredBuffer|RWTexture(?:1D|1DArray|2D|2DArray|3D)|RasterizerState|RenderTargetView|SamplerComparisonState|SamplerState|StructuredBuffer|Texture(?:1D|1DArray|2D|2DArray|2DMS|2DMSArray|3D|Cube|CubeArray)|TriangleStream|VertexShader)\b/],keyword:[/\b(?:asm|asm_fragment|auto|break|case|catch|cbuffer|centroid|char|class|column_major|compile|compile_fragment|const|const_cast|continue|default|delete|discard|do|dynamic_cast|else|enum|explicit|export|extern|for|friend|fxgroup|goto|groupshared|if|in|inline|inout|interface|line|lineadj|linear|long|matrix|mutable|namespace|new|nointerpolation|noperspective|operator|out|packoffset|pass|pixelfragment|point|precise|private|protected|public|register|reinterpret_cast|return|row_major|sample|sampler|shared|short|signed|sizeof|snorm|stateblock|stateblock_state|static|static_cast|string|struct|switch|tbuffer|technique|technique10|technique11|template|texture|this|throw|triangle|triangleadj|try|typedef|typename|uniform|union|unorm|unsigned|using|vector|vertexfragment|virtual|void|volatile|while)\b/,/\b(?:bool|double|dword|float|half|int|min(?:10float|12int|16(?:float|int|uint))|uint)(?:[1-4](?:x[1-4])?)?\b/],number:/(?:(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+)?|\b0x[\da-fA-F]+)[fFhHlLuU]?\b/,boolean:/\b(?:false|true)\b/})}yN.displayName="hoon";yN.aliases=[];function yN(n){n.languages.hoon={comment:{pattern:/::.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/,greedy:!0},constant:/%(?:\.[ny]|[\w-]+)/,"class-name":/@(?:[a-z0-9-]*[a-z0-9])?|\*/i,function:/(?:\+[-+] {2})?(?:[a-z](?:[a-z0-9-]*[a-z0-9])?)/,keyword:/\.[\^\+\*=\?]|![><:\.=\?!]|=[>|:,\.\-\^<+;/~\*\?]|\?[>|:\.\-\^<\+&~=@!]|\|[\$_%:\.\-\^~\*=@\?]|\+[|\$\+\*]|:[_\-\^\+~\*]|%[_:\.\-\^\+~\*=]|\^[|:\.\-\+&~\*=\?]|\$[|_%:<>\-\^&~@=\?]|;[:<\+;\/~\*=]|~[>|\$_%<\+\/&=\?!]|--|==/}}bN.displayName="hpkp";bN.aliases=[];function bN(n){n.languages.hpkp={directive:{pattern:/\b(?:includeSubDomains|max-age|pin-sha256|preload|report-to|report-uri|strict)(?=[\s;=]|$)/i,alias:"property"},operator:/=/,punctuation:/;/}}_N.displayName="hsts";_N.aliases=[];function _N(n){n.languages.hsts={directive:{pattern:/\b(?:includeSubDomains|max-age|preload)(?=[\s;=]|$)/i,alias:"property"},operator:/=/,punctuation:/;/}}Wg.displayName="json";Wg.aliases=["webmanifest"];function Wg(n){n.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},n.languages.webmanifest=n.languages.json}vN.displayName="uri";vN.aliases=["url"];function vN(n){n.languages.uri={scheme:{pattern:/^[a-z][a-z0-9+.-]*:/im,greedy:!0,inside:{"scheme-delimiter":/:$/}},fragment:{pattern:/#[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"fragment-delimiter":/^#/}},query:{pattern:/\?[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"query-delimiter":{pattern:/^\?/,greedy:!0},"pair-delimiter":/[&;]/,pair:{pattern:/^[^=][\s\S]*/,inside:{key:/^[^=]+/,value:{pattern:/(^=)[\s\S]+/,lookbehind:!0}}}}},authority:{pattern:RegExp(/^\/\//.source+/(?:[\w\-.~!$&'()*+,;=%:]*@)?/.source+("(?:"+/\[(?:[0-9a-fA-F:.]{2,48}|v[0-9a-fA-F]+\.[\w\-.~!$&'()*+,;=]+)\]/.source+"|"+/[\w\-.~!$&'()*+,;=%]*/.source+")")+/(?::\d*)?/.source,"m"),inside:{"authority-delimiter":/^\/\//,"user-info-segment":{pattern:/^[\w\-.~!$&'()*+,;=%:]*@/,inside:{"user-info-delimiter":/@$/,"user-info":/^[\w\-.~!$&'()*+,;=%:]+/}},"port-segment":{pattern:/:\d*$/,inside:{"port-delimiter":/^:/,port:/^\d+/}},host:{pattern:/[\s\S]+/,inside:{"ip-literal":{pattern:/^\[[\s\S]+\]$/,inside:{"ip-literal-delimiter":/^\[|\]$/,"ipv-future":/^v[\s\S]+/,"ipv6-address":/^[\s\S]+/}},"ipv4-address":/^(?:(?:[03-9]\d?|[12]\d{0,2})\.){3}(?:[03-9]\d?|[12]\d{0,2})$/}}}},path:{pattern:/^[\w\-.~!$&'()*+,;=%:@/]+/m,inside:{"path-separator":/\//}}},n.languages.url=n.languages.uri}xN.displayName="http";xN.aliases=[];function xN(n){(function(e){function t(c){return RegExp("(^(?:"+c+"):[ 	]*(?![ 	]))[^]+","i")}e.languages.http={"request-line":{pattern:/^(?:CONNECT|DELETE|GET|HEAD|OPTIONS|PATCH|POST|PRI|PUT|SEARCH|TRACE)\s(?:https?:\/\/|\/)\S*\sHTTP\/[\d.]+/m,inside:{method:{pattern:/^[A-Z]+\b/,alias:"property"},"request-target":{pattern:/^(\s)(?:https?:\/\/|\/)\S*(?=\s)/,lookbehind:!0,alias:"url",inside:e.languages.uri},"http-version":{pattern:/^(\s)HTTP\/[\d.]+/,lookbehind:!0,alias:"property"}}},"response-status":{pattern:/^HTTP\/[\d.]+ \d+ .+/m,inside:{"http-version":{pattern:/^HTTP\/[\d.]+/,alias:"property"},"status-code":{pattern:/^(\s)\d+(?=\s)/,lookbehind:!0,alias:"number"},"reason-phrase":{pattern:/^(\s).+/,lookbehind:!0,alias:"string"}}},header:{pattern:/^[\w-]+:.+(?:(?:\r\n?|\n)[ \t].+)*/m,inside:{"header-value":[{pattern:t(/Content-Security-Policy/.source),lookbehind:!0,alias:["csp","languages-csp"],inside:e.languages.csp},{pattern:t(/Public-Key-Pins(?:-Report-Only)?/.source),lookbehind:!0,alias:["hpkp","languages-hpkp"],inside:e.languages.hpkp},{pattern:t(/Strict-Transport-Security/.source),lookbehind:!0,alias:["hsts","languages-hsts"],inside:e.languages.hsts},{pattern:t(/[^:]+/.source),lookbehind:!0}],"header-name":{pattern:/^[^:]+/,alias:"keyword"},punctuation:/^:/}}};var r=e.languages,i={"application/javascript":r.javascript,"application/json":r.json||r.javascript,"application/xml":r.xml,"text/xml":r.xml,"text/html":r.html,"text/css":r.css,"text/plain":r.plain},s={"application/json":!0,"application/xml":!0};function a(c){var h=c.replace(/^[a-z]+\//,""),f="\\w+/(?:[\\w.-]+\\+)+"+h+"(?![+\\w.-])";return"(?:"+c+"|"+f+")"}var o;for(var l in i)if(i[l]){o=o||{};var u=s[l]?a(l):l;o[l.replace(/\//g,"-")]={pattern:RegExp("("+/content-type:\s*/.source+u+/(?:(?:\r\n?|\n)[\w-].*)*(?:\r(?:\n|(?!\n))|\n)/.source+")"+/[^ \t\w-][\s\S]*/.source,"i"),lookbehind:!0,inside:i[l]}}o&&e.languages.insertBefore("http","header",o)})(n)}SN.displayName="ichigojam";SN.aliases=[];function SN(n){n.languages.ichigojam={comment:/(?:\B'|REM)(?:[^\n\r]*)/i,string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/\B#[0-9A-F]+|\B`[01]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:BEEP|BPS|CASE|CLEAR|CLK|CLO|CLP|CLS|CLT|CLV|CONT|COPY|ELSE|END|FILE|FILES|FOR|GOSUB|GOTO|GSB|IF|INPUT|KBD|LED|LET|LIST|LOAD|LOCATE|LRUN|NEW|NEXT|OUT|PLAY|POKE|PRINT|PWM|REM|RENUM|RESET|RETURN|RIGHT|RTN|RUN|SAVE|SCROLL|SLEEP|SRND|STEP|STOP|SUB|TEMPO|THEN|TO|UART|VIDEO|WAIT)(?:\$|\b)/i,function:/\b(?:ABS|ANA|ASC|BIN|BTN|DEC|END|FREE|HELP|HEX|I2CR|I2CW|IN|INKEY|LEN|LINE|PEEK|RND|SCR|SOUND|STR|TICK|USR|VER|VPEEK|ZER)(?:\$|\b)/i,label:/(?:\B@\S+)/,operator:/<[=>]?|>=?|\|\||&&|[+\-*\/=|&^~!]|\b(?:AND|NOT|OR)\b/i,punctuation:/[\[,;:()\]]/}}EN.displayName="icon";EN.aliases=[];function EN(n){n.languages.icon={comment:/#.*/,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n_]|\\.|_(?!\1)(?:\r\n|[\s\S]))*\1/,greedy:!0},number:/\b(?:\d+r[a-z\d]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b|\.\d+\b/i,"builtin-keyword":{pattern:/&(?:allocated|ascii|clock|collections|cset|current|date|dateline|digits|dump|e|error(?:number|text|value)?|errout|fail|features|file|host|input|lcase|letters|level|line|main|null|output|phi|pi|pos|progname|random|regions|source|storage|subject|time|trace|ucase|version)\b/,alias:"variable"},directive:{pattern:/\$\w+/,alias:"builtin"},keyword:/\b(?:break|by|case|create|default|do|else|end|every|fail|global|if|initial|invocable|link|local|next|not|of|procedure|record|repeat|return|static|suspend|then|to|until|while)\b/,function:/\b(?!\d)\w+(?=\s*[({]|\s*!\s*\[)/,operator:/[+-]:(?!=)|(?:[\/?@^%&]|\+\+?|--?|==?=?|~==?=?|\*\*?|\|\|\|?|<(?:->?|<?=?)|>>?=?)(?::=)?|:(?:=:?)?|[!.\\|~]/,punctuation:/[\[\](){},;]/}}TN.displayName="icu-message-format";TN.aliases=[];function TN(n){(function(e){function t(l,u){return u<=0?/[]/.source:l.replace(/<SELF>/g,function(){return t(l,u-1)})}var r=/'[{}:=,](?:[^']|'')*'(?!')/,i={pattern:/''/,greedy:!0,alias:"operator"},s={pattern:r,greedy:!0,inside:{escape:i}},a=t(/\{(?:[^{}']|'(?![{},'])|''|<STR>|<SELF>)*\}/.source.replace(/<STR>/g,function(){return r.source}),8),o={pattern:RegExp(a),inside:{message:{pattern:/^(\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:null},"message-delimiter":{pattern:/./,alias:"punctuation"}}};e.languages["icu-message-format"]={argument:{pattern:RegExp(a),greedy:!0,inside:{content:{pattern:/^(\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:{"argument-name":{pattern:/^(\s*)[^{}:=,\s]+/,lookbehind:!0},"choice-style":{pattern:/^(\s*,\s*choice\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{punctuation:/\|/,range:{pattern:/^(\s*)[+-]?(?:\d+(?:\.\d*)?|\u221e)\s*[<#\u2264]/,lookbehind:!0,inside:{operator:/[<#\u2264]/,number:/\S+/}},rest:null}},"plural-style":{pattern:/^(\s*,\s*(?:plural|selectordinal)\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{offset:/^offset:\s*\d+/,"nested-message":o,selector:{pattern:/=\d+|[^{}:=,\s]+/,inside:{keyword:/^(?:few|many|one|other|two|zero)$/}}}},"select-style":{pattern:/^(\s*,\s*select\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{"nested-message":o,selector:{pattern:/[^{}:=,\s]+/,inside:{keyword:/^other$/}}}},keyword:/\b(?:choice|plural|select|selectordinal)\b/,"arg-type":{pattern:/\b(?:date|duration|number|ordinal|spellout|time)\b/,alias:"keyword"},"arg-skeleton":{pattern:/(,\s*)::[^{}:=,\s]+/,lookbehind:!0},"arg-style":{pattern:/(,\s*)(?:currency|full|integer|long|medium|percent|short)(?=\s*$)/,lookbehind:!0},"arg-style-text":{pattern:RegExp(/(^\s*,\s*(?=\S))/.source+t(/(?:[^{}']|'[^']*'|\{(?:<SELF>)?\})+/.source,8)+"$"),lookbehind:!0,alias:"string"},punctuation:/,/}},"argument-delimiter":{pattern:/./,alias:"operator"}}},escape:i,string:s},o.inside.message.inside=e.languages["icu-message-format"],e.languages["icu-message-format"].argument.inside.content.inside["choice-style"].inside.rest=e.languages["icu-message-format"]})(n)}wN.displayName="idris";wN.aliases=["idr"];function wN(n){n.register(jg),n.languages.idris=n.languages.extend("haskell",{comment:{pattern:/(?:(?:--|\|\|\|).*$|\{-[\s\S]*?-\})/m},keyword:/\b(?:Type|case|class|codata|constructor|corecord|data|do|dsl|else|export|if|implementation|implicit|import|impossible|in|infix|infixl|infixr|instance|interface|let|module|mutual|namespace|of|parameters|partial|postulate|private|proof|public|quoteGoal|record|rewrite|syntax|then|total|using|where|with)\b/,builtin:void 0}),n.languages.insertBefore("idris","keyword",{"import-statement":{pattern:/(^\s*import\s+)(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*/m,lookbehind:!0,inside:{punctuation:/\./}}}),n.languages.idr=n.languages.idris}AN.displayName="ignore";AN.aliases=["gitignore","hgignore","npmignore"];function AN(n){(function(e){e.languages.ignore={comment:/^#.*/m,entry:{pattern:/\S(?:.*(?:(?:\\ )|\S))?/,alias:"string",inside:{operator:/^!|\*\*?|\?/,regex:{pattern:/(^|[^\\])\[[^\[\]]*\]/,lookbehind:!0},punctuation:/\//}}},e.languages.gitignore=e.languages.ignore,e.languages.hgignore=e.languages.ignore,e.languages.npmignore=e.languages.ignore})(n)}RN.displayName="inform7";RN.aliases=[];function RN(n){n.languages.inform7={string:{pattern:/"[^"]*"/,inside:{substitution:{pattern:/\[[^\[\]]+\]/,inside:{delimiter:{pattern:/\[|\]/,alias:"punctuation"}}}}},comment:{pattern:/\[[^\[\]]+\]/,greedy:!0},title:{pattern:/^[ \t]*(?:book|chapter|part(?! of)|section|table|volume)\b.+/im,alias:"important"},number:{pattern:/(^|[^-])(?:\b\d+(?:\.\d+)?(?:\^\d+)?(?:(?!\d)\w+)?|\b(?:eight|eleven|five|four|nine|one|seven|six|ten|three|twelve|two))\b(?!-)/i,lookbehind:!0},verb:{pattern:/(^|[^-])\b(?:answering|applying to|are|asking|attacking|be(?:ing)?|burning|buying|called|carries|carry(?! out)|carrying|climbing|closing|conceal(?:ing|s)?|consulting|contain(?:ing|s)?|cutting|drinking|dropping|eating|enclos(?:es?|ing)|entering|examining|exiting|getting|giving|going|ha(?:s|ve|ving)|hold(?:ing|s)?|impl(?:ies|y)|incorporat(?:es?|ing)|inserting|is|jumping|kissing|listening|locking|looking|mean(?:ing|s)?|opening|provid(?:es?|ing)|pulling|pushing|putting|relat(?:es?|ing)|removing|searching|see(?:ing|s)?|setting|showing|singing|sleeping|smelling|squeezing|support(?:ing|s)?|swearing|switching|taking|tasting|telling|thinking|throwing|touching|turning|tying|unlock(?:ing|s)?|var(?:ies|y|ying)|waiting|waking|waving|wear(?:ing|s)?)\b(?!-)/i,lookbehind:!0,alias:"operator"},keyword:{pattern:/(^|[^-])\b(?:after|before|carry out|check|continue the action|definition(?= *:)|do nothing|else|end (?:if|the story|unless)|every turn|if|include|instead(?: of)?|let|move|no|now|otherwise|repeat|report|resume the story|rule for|running through|say(?:ing)?|stop the action|test|try(?:ing)?|understand|unless|use|when|while|yes)\b(?!-)/i,lookbehind:!0},property:{pattern:/(^|[^-])\b(?:adjacent(?! to)|carried|closed|concealed|contained|dark|described|edible|empty|enclosed|enterable|even|female|fixed in place|full|handled|held|improper-named|incorporated|inedible|invisible|lighted|lit|lock(?:able|ed)|male|marked for listing|mentioned|negative|neuter|non-(?:empty|full|recurring)|odd|opaque|open(?:able)?|plural-named|portable|positive|privately-named|proper-named|provided|publically-named|pushable between rooms|recurring|related|rubbing|scenery|seen|singular-named|supported|swinging|switch(?:able|ed(?: off| on)?)|touch(?:able|ed)|transparent|unconcealed|undescribed|unlit|unlocked|unmarked for listing|unmentioned|unopenable|untouchable|unvisited|variable|visible|visited|wearable|worn)\b(?!-)/i,lookbehind:!0,alias:"symbol"},position:{pattern:/(^|[^-])\b(?:above|adjacent to|back side of|below|between|down|east|everywhere|front side|here|in|inside(?: from)?|north(?:east|west)?|nowhere|on(?: top of)?|other side|outside(?: from)?|parts? of|regionally in|south(?:east|west)?|through|up|west|within)\b(?!-)/i,lookbehind:!0,alias:"keyword"},type:{pattern:/(^|[^-])\b(?:actions?|activit(?:ies|y)|actors?|animals?|backdrops?|containers?|devices?|directions?|doors?|holders?|kinds?|lists?|m[ae]n|nobody|nothing|nouns?|numbers?|objects?|people|persons?|player(?:'s holdall)?|regions?|relations?|rooms?|rule(?:book)?s?|scenes?|someone|something|supporters?|tables?|texts?|things?|time|vehicles?|wom[ae]n)\b(?!-)/i,lookbehind:!0,alias:"variable"},punctuation:/[.,:;(){}]/},n.languages.inform7.string.inside.substitution.inside.rest=n.languages.inform7,n.languages.inform7.string.inside.substitution.inside.rest.text={pattern:/\S(?:\s*\S)*/,alias:"comment"}}NN.displayName="ini";NN.aliases=[];function NN(n){n.languages.ini={comment:{pattern:/(^[ \f\t\v]*)[#;][^\n\r]*/m,lookbehind:!0},section:{pattern:/(^[ \f\t\v]*)\[[^\n\r\]]*\]?/m,lookbehind:!0,inside:{"section-name":{pattern:/(^\[[ \f\t\v]*)[^ \f\t\v\]]+(?:[ \f\t\v]+[^ \f\t\v\]]+)*/,lookbehind:!0,alias:"selector"},punctuation:/\[|\]/}},key:{pattern:/(^[ \f\t\v]*)[^ \f\n\r\t\v=]+(?:[ \f\t\v]+[^ \f\n\r\t\v=]+)*(?=[ \f\t\v]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/(=[ \f\t\v]*)[^ \f\n\r\t\v]+(?:[ \f\t\v]+[^ \f\n\r\t\v]+)*/,lookbehind:!0,alias:"attr-value",inside:{"inner-value":{pattern:/^("|').+(?=\1$)/,lookbehind:!0}}},punctuation:/=/}}CN.displayName="io";CN.aliases=[];function CN(n){n.languages.io={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\/\/.*|#.*)/,lookbehind:!0,greedy:!0},"triple-quoted-string":{pattern:/"""(?:\\[\s\S]|(?!""")[^\\])*"""/,greedy:!0,alias:"string"},string:{pattern:/"(?:\\.|[^\\\r\n"])*"/,greedy:!0},keyword:/\b(?:activate|activeCoroCount|asString|block|break|call|catch|clone|collectGarbage|compileString|continue|do|doFile|doMessage|doString|else|elseif|exit|for|foreach|forward|getEnvironmentVariable|getSlot|hasSlot|if|ifFalse|ifNil|ifNilEval|ifTrue|isActive|isNil|isResumable|list|message|method|parent|pass|pause|perform|performWithArgList|print|println|proto|raise|raiseResumable|removeSlot|resend|resume|schedulerSleepSeconds|self|sender|setSchedulerSleepSeconds|setSlot|shallowCopy|slotNames|super|system|then|thisBlock|thisContext|try|type|uniqueId|updateSlot|wait|while|write|yield)\b/,builtin:/\b(?:Array|AudioDevice|AudioMixer|BigNum|Block|Box|Buffer|CFunction|CGI|Color|Curses|DBM|DNSResolver|DOConnection|DOProxy|DOServer|Date|Directory|Duration|DynLib|Error|Exception|FFT|File|Fnmatch|Font|Future|GL|GLE|GLScissor|GLU|GLUCylinder|GLUQuadric|GLUSphere|GLUT|Host|Image|Importer|LinkList|List|Lobby|Locals|MD5|MP3Decoder|MP3Encoder|Map|Message|Movie|Notification|Number|Object|OpenGL|Point|Protos|Random|Regex|SGML|SGMLElement|SGMLParser|SQLite|Sequence|Server|ShowMessage|SleepyCat|SleepyCatCursor|Socket|SocketManager|Sound|Soup|Store|String|Tree|UDPSender|UPDReceiver|URL|User|Warning|WeakLink)\b/,boolean:/\b(?:false|nil|true)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e-?\d+)?/i,operator:/[=!*/%+\-^&|]=|>>?=?|<<?=?|:?:?=|\+\+?|--?|\*\*?|\/\/?|%|\|\|?|&&?|\b(?:and|not|or|return)\b|@@?|\?\??|\.\./,punctuation:/[{}[\];(),.:]/}}MN.displayName="j";MN.aliases=[];function MN(n){n.languages.j={comment:{pattern:/\bNB\..*/,greedy:!0},string:{pattern:/'(?:''|[^'\r\n])*'/,greedy:!0},keyword:/\b(?:(?:CR|LF|adverb|conjunction|def|define|dyad|monad|noun|verb)\b|(?:assert|break|case|catch[dt]?|continue|do|else|elseif|end|fcase|for|for_\w+|goto_\w+|if|label_\w+|return|select|throw|try|while|whilst)\.)/,verb:{pattern:/(?!\^:|;\.|[=!][.:])(?:\{(?:\.|::?)?|p(?:\.\.?|:)|[=!\]]|[<>+*\-%$|,#][.:]?|[?^]\.?|[;\[]:?|[~}"i][.:]|[ACeEIjLor]\.|(?:[_\/\\qsux]|_?\d):)/,alias:"keyword"},number:/\b_?(?:(?!\d:)\d+(?:\.\d+)?(?:(?:ad|ar|[ejpx])_?\d+(?:\.\d+)?)*(?:b_?[\da-z]+(?:\.[\da-z]+)?)?|_\b(?!\.))/,adverb:{pattern:/[~}]|[\/\\]\.?|[bfM]\.|t[.:]/,alias:"builtin"},operator:/[=a][.:]|_\./,conjunction:{pattern:/&(?:\.:?|:)?|[.:@][.:]?|[!D][.:]|[;dHT]\.|`:?|[\^LS]:|"/,alias:"variable"},punctuation:/[()]/}}Fh.displayName="java";Fh.aliases=[];function Fh(n){n.register(cn),(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,i={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[i,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:i.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:i.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":i,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:i.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:i.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(n)}Uh.displayName="php";Uh.aliases=[];function Uh(n){n.register(vi),(function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,r=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],i=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,s=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,a=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:r,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:i,operator:s,punctuation:a};var o={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},l=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:o}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:o}}];e.languages.insertBefore("php","variable",{string:l,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:l,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:r,number:i,operator:s,punctuation:a}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",function(u){if(/<\?/.test(u.code)){var c=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;e.languages["markup-templating"].buildPlaceholders(u,"php",c)}}),e.hooks.add("after-tokenize",function(u){e.languages["markup-templating"].tokenizePlaceholders(u,"php")})})(n)}Bh.displayName="javadoclike";Bh.aliases=[];function Bh(n){(function(e){var t=e.languages.javadoclike={parameter:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*@(?:arg|arguments|param)\s+)\w+/m,lookbehind:!0},keyword:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*|\{)@[a-z][a-zA-Z-]+\b/m,lookbehind:!0},punctuation:/[{}]/};function r(s,a){var o="doc-comment",l=e.languages[s];if(l){var u=l[o];if(!u){var c={};c[o]={pattern:/(^|[^\\])\/\*\*[^/][\s\S]*?(?:\*\/|$)/,lookbehind:!0,alias:"comment"},l=e.languages.insertBefore(s,"comment",c),u=l[o]}if(u instanceof RegExp&&(u=l[o]={pattern:u}),Array.isArray(u))for(var h=0,f=u.length;h<f;h++)u[h]instanceof RegExp&&(u[h]={pattern:u[h]}),a(u[h]);else a(u)}}function i(s,a){typeof s=="string"&&(s=[s]),s.forEach(function(o){r(o,function(l){l.inside||(l.inside={}),l.inside.rest=a})})}Object.defineProperty(t,"addSupport",{value:i}),t.addSupport(["java","javascript","php"],t)})(n)}IN.displayName="scala";IN.aliases=[];function IN(n){n.register(Fh),n.languages.scala=n.languages.extend("java",{"triple-quoted-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:/<-|=>|\b(?:abstract|case|catch|class|def|derives|do|else|enum|extends|extension|final|finally|for|forSome|given|if|implicit|import|infix|inline|lazy|match|new|null|object|opaque|open|override|package|private|protected|return|sealed|self|super|this|throw|trait|transparent|try|type|using|val|var|while|with|yield)\b/,number:/\b0x(?:[\da-f]*\.)?[\da-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e\d+)?[dfl]?/i,builtin:/\b(?:Any|AnyRef|AnyVal|Boolean|Byte|Char|Double|Float|Int|Long|Nothing|Short|String|Unit)\b/,symbol:/'[^\d\s\\]\w*/}),n.languages.insertBefore("scala","triple-quoted-string",{"string-interpolation":{pattern:/\b[a-z]\w*(?:"""(?:[^$]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*?"""|"(?:[^$"\r\n]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*")/i,greedy:!0,inside:{id:{pattern:/^\w+/,greedy:!0,alias:"function"},escape:{pattern:/\\\$"|\$[$"]/,greedy:!0,alias:"symbol"},interpolation:{pattern:/\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,greedy:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:n.languages.scala}}},string:/[\s\S]+/}}}),delete n.languages.scala["class-name"],delete n.languages.scala.function,delete n.languages.scala.constant}kN.displayName="javadoc";kN.aliases=[];function kN(n){n.register(Fh),n.register(Bh),n.register(ni),(function(e){var t=/(^(?:[\t ]*(?:\*\s*)*))[^*\s].*$/m,r=/#\s*\w+(?:\s*\([^()]*\))?/.source,i=/(?:\b[a-zA-Z]\w+\s*\.\s*)*\b[A-Z]\w*(?:\s*<mem>)?|<mem>/.source.replace(/<mem>/g,function(){return r});e.languages.javadoc=e.languages.extend("javadoclike",{}),e.languages.insertBefore("javadoc","keyword",{reference:{pattern:RegExp(/(@(?:exception|link|linkplain|see|throws|value)\s+(?:\*\s*)?)/.source+"(?:"+i+")"),lookbehind:!0,inside:{function:{pattern:/(#\s*)\w+(?=\s*\()/,lookbehind:!0},field:{pattern:/(#\s*)\w+/,lookbehind:!0},namespace:{pattern:/\b(?:[a-z]\w*\s*\.\s*)+/,inside:{punctuation:/\./}},"class-name":/\b[A-Z]\w*/,keyword:e.languages.java.keyword,punctuation:/[#()[\],.]/}},"class-name":{pattern:/(@param\s+)<[A-Z]\w*>/,lookbehind:!0,inside:{punctuation:/[.<>]/}},"code-section":[{pattern:/(\{@code\s+(?!\s))(?:[^\s{}]|\s+(?![\s}])|\{(?:[^{}]|\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*\})+(?=\s*\})/,lookbehind:!0,inside:{code:{pattern:t,lookbehind:!0,inside:e.languages.java,alias:"language-java"}}},{pattern:/(<(code|pre|tt)>(?!<code>)\s*)\S(?:\S|\s+\S)*?(?=\s*<\/\2>)/,lookbehind:!0,inside:{line:{pattern:t,lookbehind:!0,inside:{tag:e.languages.markup.tag,entity:e.languages.markup.entity,code:{pattern:/.+/,inside:e.languages.java,alias:"language-java"}}}}}],tag:e.languages.markup.tag,entity:e.languages.markup.entity}),e.languages.javadoclike.addSupport("java",e.languages.javadoc)})(n)}LN.displayName="javastacktrace";LN.aliases=[];function LN(n){n.languages.javastacktrace={summary:{pattern:/^([\t ]*)(?:(?:Caused by:|Suppressed:|Exception in thread "[^"]*")[\t ]+)?[\w$.]+(?::.*)?$/m,lookbehind:!0,inside:{keyword:{pattern:/^([\t ]*)(?:(?:Caused by|Suppressed)(?=:)|Exception in thread)/m,lookbehind:!0},string:{pattern:/^(\s*)"[^"]*"/,lookbehind:!0},exceptions:{pattern:/^(:?\s*)[\w$.]+(?=:|$)/,lookbehind:!0,inside:{"class-name":/[\w$]+$/,namespace:/\b[a-z]\w*\b/,punctuation:/\./}},message:{pattern:/(:\s*)\S.*/,lookbehind:!0,alias:"string"},punctuation:/:/}},"stack-frame":{pattern:/^([\t ]*)at (?:[\w$./]|@[\w$.+-]*\/)+(?:<init>)?\([^()]*\)/m,lookbehind:!0,inside:{keyword:{pattern:/^(\s*)at(?= )/,lookbehind:!0},source:[{pattern:/(\()\w+\.\w+:\d+(?=\))/,lookbehind:!0,inside:{file:/^\w+\.\w+/,punctuation:/:/,"line-number":{pattern:/\b\d+\b/,alias:"number"}}},{pattern:/(\()[^()]*(?=\))/,lookbehind:!0,inside:{keyword:/^(?:Native Method|Unknown Source)$/}}],"class-name":/[\w$]+(?=\.(?:<init>|[\w$]+)\()/,function:/(?:<init>|[\w$]+)(?=\()/,"class-loader":{pattern:/(\s)[a-z]\w*(?:\.[a-z]\w*)*(?=\/[\w@$.]*\/)/,lookbehind:!0,alias:"namespace",inside:{punctuation:/\./}},module:{pattern:/([\s/])[a-z]\w*(?:\.[a-z]\w*)*(?:@[\w$.+-]*)?(?=\/)/,lookbehind:!0,inside:{version:{pattern:/(@)[\s\S]+/,lookbehind:!0,alias:"number"},punctuation:/[@.]/}},namespace:{pattern:/(?:\b[a-z]\w*\.)+/,inside:{punctuation:/\./}},punctuation:/[()/.]/}},more:{pattern:/^([\t ]*)\.{3} \d+ [a-z]+(?: [a-z]+)*/m,lookbehind:!0,inside:{punctuation:/\.{3}/,number:/\d+/,keyword:/\b[a-z]+(?: [a-z]+)*\b/}}}}DN.displayName="jexl";DN.aliases=[];function DN(n){n.languages.jexl={string:/(["'])(?:\\[\s\S]|(?!\1)[^\\])*\1/,transform:{pattern:/(\|\s*)[a-zA-Z--_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][\w--\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*/,alias:"function",lookbehind:!0},function:/[a-zA-Z--_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][\w--\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*\s*(?=\()/,number:/\b\d+(?:\.\d+)?\b|\B\.\d+\b/,operator:/[<>!]=?|-|\+|&&|==|\|\|?|\/\/?|[?:*^%]/,boolean:/\b(?:false|true)\b/,keyword:/\bin\b/,punctuation:/[{}[\](),.]/}}ON.displayName="jolie";ON.aliases=[];function ON(n){n.register(cn),n.languages.jolie=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\[\s\S]|[^"\\])*"/,lookbehind:!0,greedy:!0},"class-name":{pattern:/((?:\b(?:as|courier|embed|in|inputPort|outputPort|service)\b|@)[ \t]*)\w+/,lookbehind:!0},keyword:/\b(?:as|cH|comp|concurrent|constants|courier|cset|csets|default|define|else|embed|embedded|execution|exit|extender|for|foreach|forward|from|global|if|import|in|include|init|inputPort|install|instanceof|interface|is_defined|linkIn|linkOut|main|new|nullProcess|outputPort|over|private|provide|public|scope|sequential|service|single|spawn|synchronized|this|throw|throws|type|undef|until|while|with)\b/,function:/\b[a-z_]\w*(?=[ \t]*[@(])/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?l?/i,operator:/-[-=>]?|\+[+=]?|<[<=]?|[>=*!]=?|&&|\|\||[?\/%^@|]/,punctuation:/[()[\]{},;.:]/,builtin:/\b(?:Byte|any|bool|char|double|enum|float|int|length|long|ranges|regex|string|undefined|void)\b/}),n.languages.insertBefore("jolie","keyword",{aggregates:{pattern:/(\bAggregates\s*:\s*)(?:\w+(?:\s+with\s+\w+)?\s*,\s*)*\w+(?:\s+with\s+\w+)?/,lookbehind:!0,inside:{keyword:/\bwith\b/,"class-name":/\w+/,punctuation:/,/}},redirects:{pattern:/(\bRedirects\s*:\s*)(?:\w+\s*=>\s*\w+\s*,\s*)*(?:\w+\s*=>\s*\w+)/,lookbehind:!0,inside:{punctuation:/,/,"class-name":/\w+/,operator:/=>/}},property:{pattern:/\b(?:Aggregates|[Ii]nterfaces|Java|Javascript|Jolie|[Ll]ocation|OneWay|[Pp]rotocol|Redirects|RequestResponse)\b(?=[ \t]*:)/}})}PN.displayName="jq";PN.aliases=[];function PN(n){(function(e){var t=/\\\((?:[^()]|\([^()]*\))*\)/.source,r=RegExp(/(^|[^\\])"(?:[^"\r\n\\]|\\[^\r\n(]|__)*"/.source.replace(/__/g,function(){return t})),i={interpolation:{pattern:RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+t),lookbehind:!0,inside:{content:{pattern:/^(\\\()[\s\S]+(?=\)$)/,lookbehind:!0,inside:null},punctuation:/^\\\(|\)$/}}},s=e.languages.jq={comment:/#.*/,property:{pattern:RegExp(r.source+/(?=\s*:(?!:))/.source),lookbehind:!0,greedy:!0,inside:i},string:{pattern:r,lookbehind:!0,greedy:!0,inside:i},function:{pattern:/(\bdef\s+)[a-z_]\w+/i,lookbehind:!0},variable:/\B\$\w+/,"property-literal":{pattern:/\b[a-z_]\w*(?=\s*:(?!:))/i,alias:"property"},keyword:/\b(?:as|break|catch|def|elif|else|end|foreach|if|import|include|label|module|modulemeta|null|reduce|then|try|while)\b/,boolean:/\b(?:false|true)\b/,number:/(?:\b\d+\.|\B\.)?\b\d+(?:[eE][+-]?\d+)?\b/,operator:[{pattern:/\|=?/,alias:"pipe"},/\.\.|[!=<>]?=|\?\/\/|\/\/=?|[-+*/%]=?|[<>?]|\b(?:and|not|or)\b/],"c-style-function":{pattern:/\b[a-z_]\w*(?=\s*\()/i,alias:"function"},punctuation:/::|[()\[\]{},:;]|\.(?=\s*[\[\w$])/,dot:{pattern:/\./,alias:"important"}};i.interpolation.inside.content.inside=s})(n)}FN.displayName="js-templates";FN.aliases=[];function FN(n){n.register(_i),(function(e){var t=e.languages.javascript["template-string"],r=t.pattern.source,i=t.inside.interpolation,s=i.inside["interpolation-punctuation"],a=i.pattern.source;function o(m,v){if(e.languages[m])return{pattern:RegExp("((?:"+v+")\\s*)"+r),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:m}}}}e.languages.javascript["template-string"]=[o("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),o("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),o("svg",/\bsvg/.source),o("markdown",/\b(?:markdown|md)/.source),o("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),o("sql",/\bsql/.source),t].filter(Boolean);function l(m,v){return"___"+v.toUpperCase()+"_"+m+"___"}function u(m,v,_){var b={code:m,grammar:v,language:_};return e.hooks.run("before-tokenize",b),b.tokens=e.tokenize(b.code,b.grammar),e.hooks.run("after-tokenize",b),b.tokens}function c(m){var v={};v["interpolation-punctuation"]=s;var _=e.tokenize(m,v);if(_.length===3){var b=[1,1];b.push.apply(b,u(_[1],e.languages.javascript,"javascript")),_.splice.apply(_,b)}return new e.Token("interpolation",_,i.alias,m)}function h(m,v,_){var b=e.tokenize(m,{interpolation:{pattern:RegExp(a),lookbehind:!0}}),S=0,E={},A=b.map(function(I){if(typeof I=="string")return I;for(var C=I.content,k;m.indexOf(k=l(S++,_))!==-1;);return E[k]=C,k}).join(""),R=u(A,v,_),w=Object.keys(E);S=0;function M(I){for(var C=0;C<I.length;C++){if(S>=w.length)return;var k=I[C];if(typeof k=="string"||typeof k.content=="string"){var O=w[S],z=typeof k=="string"?k:k.content,W=z.indexOf(O);if(W!==-1){++S;var q=z.substring(0,W),X=c(E[O]),Q=z.substring(W+O.length),H=[];if(q&&H.push(q),H.push(X),Q){var G=[Q];M(G),H.push.apply(H,G)}typeof k=="string"?(I.splice.apply(I,[C,1].concat(H)),C+=H.length-1):k.content=H}}else{var re=k.content;Array.isArray(re)?M(re):M([re])}}}return M(R),new e.Token(_,R,"language-"+_,m)}var f={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};e.hooks.add("after-tokenize",function(m){if(!(m.language in f))return;function v(_){for(var b=0,S=_.length;b<S;b++){var E=_[b];if(typeof E!="string"){var A=E.content;if(!Array.isArray(A)){typeof A!="string"&&v([A]);continue}if(E.type==="template-string"){var R=A[1];if(A.length===3&&typeof R!="string"&&R.type==="embedded-code"){var w=g(R),M=R.alias,I=Array.isArray(M)?M[0]:M,C=e.languages[I];if(!C)continue;A[1]=h(w,C,I)}}else v(A)}}}v(m.tokens)});function g(m){return typeof m=="string"?m:Array.isArray(m)?m.map(g).join(""):g(m.content)}})(n)}qg.displayName="typescript";qg.aliases=["ts"];function qg(n){n.register(_i),(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(n)}UN.displayName="jsdoc";UN.aliases=[];function UN(n){n.register(Bh),n.register(_i),n.register(qg),(function(e){var t=e.languages.javascript,r=/\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})+\}/.source,i="(@(?:arg|argument|param|property)\\s+(?:"+r+"\\s+)?)";e.languages.jsdoc=e.languages.extend("javadoclike",{parameter:{pattern:RegExp(i+/(?:(?!\s)[$\w\xA0-\uFFFF.])+(?=\s|$)/.source),lookbehind:!0,inside:{punctuation:/\./}}}),e.languages.insertBefore("jsdoc","keyword",{"optional-parameter":{pattern:RegExp(i+/\[(?:(?!\s)[$\w\xA0-\uFFFF.])+(?:=[^[\]]+)?\](?=\s|$)/.source),lookbehind:!0,inside:{parameter:{pattern:/(^\[)[$\w\xA0-\uFFFF\.]+/,lookbehind:!0,inside:{punctuation:/\./}},code:{pattern:/(=)[\s\S]*(?=\]$)/,lookbehind:!0,inside:t,alias:"language-javascript"},punctuation:/[=[\]]/}},"class-name":[{pattern:RegExp(/(@(?:augments|class|extends|interface|memberof!?|template|this|typedef)\s+(?:<TYPE>\s+)?)[A-Z]\w*(?:\.[A-Z]\w*)*/.source.replace(/<TYPE>/g,function(){return r})),lookbehind:!0,inside:{punctuation:/\./}},{pattern:RegExp("(@[a-z]+\\s+)"+r),lookbehind:!0,inside:{string:t.string,number:t.number,boolean:t.boolean,keyword:e.languages.typescript.keyword,operator:/=>|\.\.\.|[&|?:*]/,punctuation:/[.,;=<>{}()[\]]/}}],example:{pattern:/(@example\s+(?!\s))(?:[^@\s]|\s+(?!\s))+?(?=\s*(?:\*\s*)?(?:@\w|\*\/))/,lookbehind:!0,inside:{code:{pattern:/^([\t ]*(?:\*\s*)?)\S.*$/m,lookbehind:!0,inside:t,alias:"language-javascript"}}}}),e.languages.javadoclike.addSupport("javascript",e.languages.jsdoc)})(n)}BN.displayName="n4js";BN.aliases=["n4jsd"];function BN(n){n.register(_i),n.languages.n4js=n.languages.extend("javascript",{keyword:/\b(?:Array|any|boolean|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|module|new|null|number|package|private|protected|public|return|set|static|string|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/}),n.languages.insertBefore("n4js","constant",{annotation:{pattern:/@+\w+/,alias:"operator"}}),n.languages.n4jsd=n.languages.n4js}zN.displayName="js-extras";zN.aliases=[];function zN(n){n.register(_i),(function(e){e.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),e.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+e.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),e.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]});function t(l,u){return RegExp(l.replace(/<ID>/g,function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source}),u)}e.languages.insertBefore("javascript","keyword",{imports:{pattern:t(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:e.languages.javascript},exports:{pattern:t(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:e.languages.javascript}}),e.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),e.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),e.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:t(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var r=["function","function-variable","method","method-variable","property-access"],i=0;i<r.length;i++){var s=r[i],a=e.languages.javascript[s];e.util.type(a)==="RegExp"&&(a=e.languages.javascript[s]={pattern:a});var o=a.inside||{};a.inside=o,o["maybe-class-name"]=/^[A-Z][\s\S]*/}})(n)}GN.displayName="json5";GN.aliases=[];function GN(n){n.register(Wg),(function(e){var t=/("|')(?:\\(?:\r\n?|\n|.)|(?!\1)[^\\\r\n])*\1/;e.languages.json5=e.languages.extend("json",{property:[{pattern:RegExp(t.source+"(?=\\s*:)"),greedy:!0},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/,alias:"unquoted"}],string:{pattern:t,greedy:!0},number:/[+-]?\b(?:NaN|Infinity|0x[a-fA-F\d]+)\b|[+-]?(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+\b)?/})})(n)}VN.displayName="jsonp";VN.aliases=[];function VN(n){n.register(Wg),n.languages.jsonp=n.languages.extend("json",{punctuation:/[{}[\]();,.]/}),n.languages.insertBefore("jsonp","punctuation",{function:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*\()/})}$N.displayName="jsstacktrace";$N.aliases=[];function $N(n){n.languages.jsstacktrace={"error-message":{pattern:/^\S.*/m,alias:"string"},"stack-frame":{pattern:/(^[ \t]+)at[ \t].*/m,lookbehind:!0,inside:{"not-my-code":{pattern:/^at[ \t]+(?!\s)(?:node\.js|<unknown>|.*(?:node_modules|\(<anonymous>\)|\(<unknown>|<anonymous>$|\(internal\/|\(node\.js)).*/m,alias:"comment"},filename:{pattern:/(\bat\s+(?!\s)|\()(?:[a-zA-Z]:)?[^():]+(?=:)/,lookbehind:!0,alias:"url"},function:{pattern:/(\bat\s+(?:new\s+)?)(?!\s)[_$a-zA-Z\xA0-\uFFFF<][.$\w\xA0-\uFFFF<>]*/,lookbehind:!0,inside:{punctuation:/\./}},punctuation:/[()]/,keyword:/\b(?:at|new)\b/,alias:{pattern:/\[(?:as\s+)?(?!\s)[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\]/,alias:"variable"},"line-number":{pattern:/:\d+(?::\d+)?\b/,alias:"number",inside:{punctuation:/:/}}}}}}HN.displayName="julia";HN.aliases=[];function HN(n){n.languages.julia={comment:{pattern:/(^|[^\\])(?:#=(?:[^#=]|=(?!#)|#(?!=)|#=(?:[^#=]|=(?!#)|#(?!=))*=#)*=#|#.*)/,lookbehind:!0},regex:{pattern:/r"(?:\\.|[^"\\\r\n])*"[imsx]{0,4}/,greedy:!0},string:{pattern:/"""[\s\S]+?"""|(?:\b\w+)?"(?:\\.|[^"\\\r\n])*"|`(?:[^\\`\r\n]|\\.)*`/,greedy:!0},char:{pattern:/(^|[^\w'])'(?:\\[^\r\n][^'\r\n]*|[^\\\r\n])'/,lookbehind:!0,greedy:!0},keyword:/\b(?:abstract|baremodule|begin|bitstype|break|catch|ccall|const|continue|do|else|elseif|end|export|finally|for|function|global|if|immutable|import|importall|in|let|local|macro|module|print|println|quote|return|struct|try|type|typealias|using|while)\b/,boolean:/\b(?:false|true)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[box])?(?:[\da-f]+(?:_[\da-f]+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[efp][+-]?\d+(?:_\d+)*)?j?/i,operator:/&&|\|\||[-+*^%&$\\]=?|\/[\/=]?|!=?=?|\|[=>]?|<(?:<=?|[=:|])?|>(?:=|>>?=?)?|==?=?|[~']/,punctuation:/::?|[{}[\]();,.?]/,constant:/\b(?:(?:Inf|NaN)(?:16|32|64)?|im|pi)\b|[]/}}jN.displayName="keepalived";jN.aliases=[];function jN(n){n.languages.keepalived={comment:{pattern:/[#!].*/,greedy:!0},string:{pattern:/(^|[^\\])(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,lookbehind:!0,greedy:!0},ip:{pattern:RegExp(/\b(?:(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){5}:(?:[\da-f]{1,4}:)?[\da-f]{1,4}|(?:[\da-f]{1,4}:){4}:(?:[\da-f]{1,4}:){0,2}[\da-f]{1,4}|(?:[\da-f]{1,4}:){3}:(?:[\da-f]{1,4}:){0,3}[\da-f]{1,4}|(?:[\da-f]{1,4}:){2}:(?:[\da-f]{1,4}:){0,4}[\da-f]{1,4}|(?:[\da-f]{1,4}:){6}<ipv4>|(?:[\da-f]{1,4}:){0,5}:<ipv4>|::(?:[\da-f]{1,4}:){0,5}<ipv4>|[\da-f]{1,4}::(?:[\da-f]{1,4}:){0,5}[\da-f]{1,4}|::(?:[\da-f]{1,4}:){0,6}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:)(?:\/\d{1,3})?|<ipv4>(?:\/\d{1,2})?)\b/.source.replace(/<ipv4>/g,function(){return/(?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d))/.source}),"i"),alias:"number"},path:{pattern:/(\s)\/(?:[^\/\s]+\/)*[^\/\s]*|\b[a-zA-Z]:\\(?:[^\\\s]+\\)*[^\\\s]*/,lookbehind:!0,alias:"string"},variable:/\$\{?\w+\}?/,email:{pattern:/[\w-]+@[\w-]+(?:\.[\w-]{2,3}){1,2}/,alias:"string"},"conditional-configuration":{pattern:/@\^?[\w-]+/,alias:"variable"},operator:/=/,property:/\b(?:BFD_CHECK|DNS_CHECK|FILE_CHECK|HTTP_GET|MISC_CHECK|NAME|PING_CHECK|SCRIPTS|SMTP_CHECK|SSL|SSL_GET|TCP_CHECK|UDP_CHECK|accept|advert_int|alpha|auth_pass|auth_type|authentication|bfd_cpu_affinity|bfd_instance|bfd_no_swap|bfd_priority|bfd_process_name|bfd_rlimit_rttime|bfd_rt_priority|bind_if|bind_port|bindto|ca|certificate|check_unicast_src|checker|checker_cpu_affinity|checker_log_all_failures|checker_no_swap|checker_priority|checker_rlimit_rttime|checker_rt_priority|child_wait_time|connect_ip|connect_port|connect_timeout|dbus_service_name|debug|default_interface|delay|delay_before_retry|delay_loop|digest|dont_track_primary|dynamic|dynamic_interfaces|enable_(?:dbus|script_security|sni|snmp_checker|snmp_rfc|snmp_rfcv2|snmp_rfcv3|snmp_vrrp|traps)|end|fall|fast_recovery|file|flag-[123]|fork_delay|full_command|fwmark|garp_group|garp_interval|garp_lower_prio_delay|garp_lower_prio_repeat|garp_master_delay|garp_master_refresh|garp_master_refresh_repeat|garp_master_repeat|global_defs|global_tracking|gna_interval|group|ha_suspend|hashed|helo_name|higher_prio_send_advert|hoplimit|http_protocol|hysteresis|idle_tx|include|inhibit_on_failure|init_fail|init_file|instance|interface|interfaces|interval|ip_family|ipvs_process_name|keepalived.conf|kernel_rx_buf_size|key|linkbeat_interfaces|linkbeat_use_polling|log_all_failures|log_unknown_vrids|lower_prio_no_advert|lthreshold|lvs_flush|lvs_flush_onstop|lvs_method|lvs_netlink_cmd_rcv_bufs|lvs_netlink_cmd_rcv_bufs_force|lvs_netlink_monitor_rcv_bufs|lvs_netlink_monitor_rcv_bufs_force|lvs_notify_fifo|lvs_notify_fifo_script|lvs_sched|lvs_sync_daemon|max_auto_priority|max_hops|mcast_src_ip|mh-fallback|mh-port|min_auto_priority_delay|min_rx|min_tx|misc_dynamic|misc_path|misc_timeout|multiplier|name|namespace_with_ipsets|native_ipv6|neighbor_ip|net_namespace|net_namespace_ipvs|nftables|nftables_counters|nftables_ifindex|nftables_priority|no_accept|no_checker_emails|no_email_faults|nopreempt|notification_email|notification_email_from|notify|notify_backup|notify_deleted|notify_down|notify_fault|notify_fifo|notify_fifo_script|notify_master|notify_master_rx_lower_pri|notify_priority_changes|notify_stop|notify_up|old_unicast_checksum|omega|ops|param_match|passive|password|path|persistence_engine|persistence_granularity|persistence_timeout|preempt|preempt_delay|priority|process|process_monitor_rcv_bufs|process_monitor_rcv_bufs_force|process_name|process_names|promote_secondaries|protocol|proxy_arp|proxy_arp_pvlan|quorum|quorum_down|quorum_max|quorum_up|random_seed|real_server|regex|regex_max_offset|regex_min_offset|regex_no_match|regex_options|regex_stack|reload_repeat|reload_time_file|require_reply|retry|rise|router_id|rs_init_notifies|script|script_user|sh-fallback|sh-port|shutdown_script|shutdown_script_timeout|skip_check_adv_addr|smtp_alert|smtp_alert_checker|smtp_alert_vrrp|smtp_connect_timeout|smtp_helo_name|smtp_server|snmp_socket|sorry_server|sorry_server_inhibit|sorry_server_lvs_method|source_ip|start|startup_script|startup_script_timeout|state|static_ipaddress|static_routes|static_rules|status_code|step|strict_mode|sync_group_tracking_weight|terminate_delay|timeout|track_bfd|track_file|track_group|track_interface|track_process|track_script|track_src_ip|ttl|type|umask|unicast_peer|unicast_src_ip|unicast_ttl|url|use_ipvlan|use_pid_dir|use_vmac|user|uthreshold|val[123]|version|virtual_ipaddress|virtual_ipaddress_excluded|virtual_router_id|virtual_routes|virtual_rules|virtual_server|virtual_server_group|virtualhost|vmac_xmit_base|vrrp|vrrp_(?:check_unicast_src|cpu_affinity|garp_interval|garp_lower_prio_delay|garp_lower_prio_repeat|garp_master_delay|garp_master_refresh|garp_master_refresh_repeat|garp_master_repeat|gna_interval|higher_prio_send_advert|instance|ipsets|iptables|lower_prio_no_advert|mcast_group4|mcast_group6|min_garp|netlink_cmd_rcv_bufs|netlink_cmd_rcv_bufs_force|netlink_monitor_rcv_bufs|netlink_monitor_rcv_bufs_force|no_swap|notify_fifo|notify_fifo_script|notify_priority_changes|priority|process_name|rlimit_rttime|rt_priority|rx_bufs_multiplier|rx_bufs_policy|script|skip_check_adv_addr|startup_delay|strict|sync_group|track_process|version)|warmup|weight)\b/,constant:/\b(?:A|AAAA|AH|BACKUP|CNAME|DR|MASTER|MX|NAT|NS|PASS|SCTP|SOA|TCP|TUN|TXT|UDP|dh|fo|lblc|lblcr|lc|mh|nq|ovf|rr|sed|sh|wlc|wrr)\b/,number:{pattern:/(^|[^\w.-])-?\d+(?:\.\d+)?/,lookbehind:!0},boolean:/\b(?:false|no|off|on|true|yes)\b/,punctuation:/[\{\}]/}}WN.displayName="keyman";WN.aliases=[];function WN(n){n.languages.keyman={comment:{pattern:/\bc .*/i,greedy:!0},string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0},"virtual-key":{pattern:/\[\s*(?:(?:ALT|CAPS|CTRL|LALT|LCTRL|NCAPS|RALT|RCTRL|SHIFT)\s+)*(?:[TKU]_[\w?]+|[A-E]\d\d?|"[^"\r\n]*"|'[^'\r\n]*')\s*\]/i,greedy:!0,alias:"function"},"header-keyword":{pattern:/&\w+/,alias:"bold"},"header-statement":{pattern:/\b(?:bitmap|bitmaps|caps always off|caps on only|copyright|hotkey|language|layout|message|name|shift frees caps|version)\b/i,alias:"bold"},"rule-keyword":{pattern:/\b(?:any|baselayout|beep|call|context|deadkey|dk|if|index|layer|notany|nul|outs|platform|reset|return|save|set|store|use)\b/i,alias:"keyword"},"structural-keyword":{pattern:/\b(?:ansi|begin|group|match|newcontext|nomatch|postkeystroke|readonly|unicode|using keys)\b/i,alias:"keyword"},"compile-target":{pattern:/\$(?:keyman|keymanonly|keymanweb|kmfl|weaver):/i,alias:"property"},number:/\b(?:U\+[\dA-F]+|d\d+|x[\da-f]+|\d+)\b/i,operator:/[+>\\$]|\.\./,punctuation:/[()=,]/}}qN.displayName="kotlin";qN.aliases=["kt","kts"];function qN(n){n.register(cn),(function(e){e.languages.kotlin=e.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete e.languages.kotlin["class-name"];var t={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:e.languages.kotlin}};e.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:t},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:t},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete e.languages.kotlin.string,e.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),e.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),e.languages.kt=e.languages.kotlin,e.languages.kts=e.languages.kotlin})(n)}XN.displayName="kumir";XN.aliases=["kum"];function XN(n){(function(e){var t=/\s\x00-\x1f\x22-\x2f\x3a-\x3f\x5b-\x5e\x60\x7b-\x7e/.source;function r(i,s){return RegExp(i.replace(/<nonId>/g,t),s)}e.languages.kumir={comment:{pattern:/\|.*/},prolog:{pattern:/#.*/,greedy:!0},string:{pattern:/"[^\n\r"]*"|'[^\n\r']*'/,greedy:!0},boolean:{pattern:r(/(^|[<nonId>])(?:|)(?=[<nonId>]|$)/.source),lookbehind:!0},"operator-word":{pattern:r(/(^|[<nonId>])(?:||)(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"keyword"},"system-variable":{pattern:r(/(^|[<nonId>])(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"keyword"},type:[{pattern:r(/(^|[<nonId>])(?:||||)(?:\x20*)?(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"builtin"},{pattern:r(/(^|[<nonId>])(?:|||)(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"important"}],keyword:{pattern:r(/(^|[<nonId>])(?:|(?:\x20*)?|||[]||||||||||||(?:(?:\x20+|_))?|(?:(?:\x20+|_))?|||||||||?||||||)(?=[<nonId>]|$)/.source),lookbehind:!0},name:{pattern:r(/(^|[<nonId>])[^\d<nonId>][^<nonId>]*(?:\x20+[^<nonId>]+)*(?=[<nonId>]|$)/.source),lookbehind:!0},number:{pattern:r(/(^|[<nonId>])(?:\B\$[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)(?=[<nonId>]|$)/.source,"i"),lookbehind:!0},punctuation:/:=|[(),:;\[\]]/,"operator-char":{pattern:/\*\*?|<[=>]?|>=?|[-+/=]/,alias:"operator"}},e.languages.kum=e.languages.kumir})(n)}YN.displayName="kusto";YN.aliases=[];function YN(n){n.languages.kusto={comment:{pattern:/\/\/.*/,greedy:!0},string:{pattern:/```[\s\S]*?```|[hH]?(?:"(?:[^\r\n\\"]|\\.)*"|'(?:[^\r\n\\']|\\.)*'|@(?:"[^\r\n"]*"|'[^\r\n']*'))/,greedy:!0},verb:{pattern:/(\|\s*)[a-z][\w-]*/i,lookbehind:!0,alias:"keyword"},command:{pattern:/\.[a-z][a-z\d-]*\b/,alias:"keyword"},"class-name":/\b(?:bool|datetime|decimal|dynamic|guid|int|long|real|string|timespan)\b/,keyword:/\b(?:access|alias|and|anti|as|asc|auto|between|by|(?:contains|(?:ends|starts)with|has(?:perfix|suffix)?)(?:_cs)?|database|declare|desc|external|from|fullouter|has_all|in|ingestion|inline|inner|innerunique|into|(?:left|right)(?:anti(?:semi)?|inner|outer|semi)?|let|like|local|not|of|on|or|pattern|print|query_parameters|range|restrict|schema|set|step|table|tables|to|view|where|with|matches\s+regex|nulls\s+(?:first|last))(?![\w-])/,boolean:/\b(?:false|null|true)\b/,function:/\b[a-z_]\w*(?=\s*\()/,datetime:[{pattern:/\b(?:(?:Fri|Friday|Mon|Monday|Sat|Saturday|Sun|Sunday|Thu|Thursday|Tue|Tuesday|Wed|Wednesday)\s*,\s*)?\d{1,2}(?:\s+|-)(?:Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)(?:\s+|-)\d{2}\s+\d{2}:\d{2}(?::\d{2})?(?:\s*(?:\b(?:[A-Z]|(?:[ECMT][DS]|GM|U)T)|[+-]\d{4}))?\b/,alias:"number"},{pattern:/[+-]?\b(?:\d{4}-\d{2}-\d{2}(?:[ T]\d{2}:\d{2}(?::\d{2}(?:\.\d+)?)?)?|\d{2}:\d{2}(?::\d{2}(?:\.\d+)?)?)Z?/,alias:"number"}],number:/\b(?:0x[0-9A-Fa-f]+|\d+(?:\.\d+)?(?:[Ee][+-]?\d+)?)(?:(?:min|sec|[mn]s|[dhms]|microsecond|tick)\b)?|[+-]?\binf\b/,operator:/=>|[!=]~|[!=<>]=?|[-+*/%|]|\.\./,punctuation:/[()\[\]{},;.:]/}}KN.displayName="latex";KN.aliases=["context","tex"];function KN(n){(function(e){var t=/\\(?:[^a-z()[\]]|[a-z*]+)/i,r={"equation-command":{pattern:t,alias:"regex"}};e.languages.latex={comment:/%.*/,cdata:{pattern:/(\\begin\{((?:lstlisting|verbatim)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0},equation:[{pattern:/\$\$(?:\\[\s\S]|[^\\$])+\$\$|\$(?:\\[\s\S]|[^\\$])+\$|\\\([\s\S]*?\\\)|\\\[[\s\S]*?\\\]/,inside:r,alias:"string"},{pattern:/(\\begin\{((?:align|eqnarray|equation|gather|math|multline)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0,inside:r,alias:"string"}],keyword:{pattern:/(\\(?:begin|cite|documentclass|end|label|ref|usepackage)(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0},url:{pattern:/(\\url\{)[^}]+(?=\})/,lookbehind:!0},headline:{pattern:/(\\(?:chapter|frametitle|paragraph|part|section|subparagraph|subsection|subsubparagraph|subsubsection|subsubsubparagraph)\*?(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0,alias:"class-name"},function:{pattern:t,alias:"selector"},punctuation:/[[\]{}&]/},e.languages.tex=e.languages.latex,e.languages.context=e.languages.latex})(n)}ZN.displayName="latte";ZN.aliases=[];function ZN(n){n.register(cn),n.register(vi),n.register(Uh),(function(e){e.languages.latte={comment:/^\{\*[\s\S]*/,"latte-tag":{pattern:/(^\{(?:\/(?=[a-z]))?)(?:[=_]|[a-z]\w*\b(?!\())/i,lookbehind:!0,alias:"important"},delimiter:{pattern:/^\{\/?|\}$/,alias:"punctuation"},php:{pattern:/\S(?:[\s\S]*\S)?/,alias:"language-php",inside:e.languages.php}};var t=e.languages.extend("markup",{});e.languages.insertBefore("inside","attr-value",{"n-attr":{pattern:/n:[\w-]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+))?/,inside:{"attr-name":{pattern:/^[^\s=]+/,alias:"important"},"attr-value":{pattern:/=[\s\S]+/,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],php:{pattern:/\S(?:[\s\S]*\S)?/,inside:e.languages.php}}}}}},t.tag),e.hooks.add("before-tokenize",function(r){if(r.language==="latte"){var i=/\{\*[\s\S]*?\*\}|\{[^'"\s{}*](?:[^"'/{}]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|\/\*(?:[^*]|\*(?!\/))*\*\/)*\}/g;e.languages["markup-templating"].buildPlaceholders(r,"latte",i),r.grammar=t}}),e.hooks.add("after-tokenize",function(r){e.languages["markup-templating"].tokenizePlaceholders(r,"latte")})})(n)}Xg.displayName="scheme";Xg.aliases=[];function Xg(n){(function(e){e.languages.scheme={comment:/;.*|#;\s*(?:\((?:[^()]|\([^()]*\))*\)|\[(?:[^\[\]]|\[[^\[\]]*\])*\])|#\|(?:[^#|]|#(?!\|)|\|(?!#)|#\|(?:[^#|]|#(?!\|)|\|(?!#))*\|#)*\|#/,string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},symbol:{pattern:/'[^()\[\]#'\s]+/,greedy:!0},char:{pattern:/#\\(?:[ux][a-fA-F\d]+\b|[-a-zA-Z]+\b|[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,greedy:!0},"lambda-parameter":[{pattern:/((?:^|[^'`#])[(\[]lambda\s+)(?:[^|()\[\]'\s]+|\|(?:[^\\|]|\\.)*\|)/,lookbehind:!0},{pattern:/((?:^|[^'`#])[(\[]lambda\s+[(\[])[^()\[\]']+/,lookbehind:!0}],keyword:{pattern:/((?:^|[^'`#])[(\[])(?:begin|case(?:-lambda)?|cond(?:-expand)?|define(?:-library|-macro|-record-type|-syntax|-values)?|defmacro|delay(?:-force)?|do|else|except|export|guard|if|import|include(?:-ci|-library-declarations)?|lambda|let(?:rec)?(?:-syntax|-values|\*)?|let\*-values|only|parameterize|prefix|(?:quasi-?)?quote|rename|set!|syntax-(?:case|rules)|unless|unquote(?:-splicing)?|when)(?=[()\[\]\s]|$)/,lookbehind:!0},builtin:{pattern:/((?:^|[^'`#])[(\[])(?:abs|and|append|apply|assoc|ass[qv]|binary-port\?|boolean=?\?|bytevector(?:-append|-copy|-copy!|-length|-u8-ref|-u8-set!|\?)?|caar|cadr|call-with-(?:current-continuation|port|values)|call\/cc|car|cdar|cddr|cdr|ceiling|char(?:->integer|-ready\?|\?|<\?|<=\?|=\?|>\?|>=\?)|close-(?:input-port|output-port|port)|complex\?|cons|current-(?:error|input|output)-port|denominator|dynamic-wind|eof-object\??|eq\?|equal\?|eqv\?|error|error-object(?:-irritants|-message|\?)|eval|even\?|exact(?:-integer-sqrt|-integer\?|\?)?|expt|features|file-error\?|floor(?:-quotient|-remainder|\/)?|flush-output-port|for-each|gcd|get-output-(?:bytevector|string)|inexact\??|input-port(?:-open\?|\?)|integer(?:->char|\?)|lcm|length|list(?:->string|->vector|-copy|-ref|-set!|-tail|\?)?|make-(?:bytevector|list|parameter|string|vector)|map|max|member|memq|memv|min|modulo|negative\?|newline|not|null\?|number(?:->string|\?)|numerator|odd\?|open-(?:input|output)-(?:bytevector|string)|or|output-port(?:-open\?|\?)|pair\?|peek-char|peek-u8|port\?|positive\?|procedure\?|quotient|raise|raise-continuable|rational\?|rationalize|read-(?:bytevector|bytevector!|char|error\?|line|string|u8)|real\?|remainder|reverse|round|set-c[ad]r!|square|string(?:->list|->number|->symbol|->utf8|->vector|-append|-copy|-copy!|-fill!|-for-each|-length|-map|-ref|-set!|\?|<\?|<=\?|=\?|>\?|>=\?)?|substring|symbol(?:->string|\?|=\?)|syntax-error|textual-port\?|truncate(?:-quotient|-remainder|\/)?|u8-ready\?|utf8->string|values|vector(?:->list|->string|-append|-copy|-copy!|-fill!|-for-each|-length|-map|-ref|-set!|\?)?|with-exception-handler|write-(?:bytevector|char|string|u8)|zero\?)(?=[()\[\]\s]|$)/,lookbehind:!0},operator:{pattern:/((?:^|[^'`#])[(\[])(?:[-+*%/]|[<>]=?|=>?)(?=[()\[\]\s]|$)/,lookbehind:!0},number:{pattern:RegExp(t({"<ureal dec>":/\d+(?:\/\d+)|(?:\d+(?:\.\d*)?|\.\d+)(?:[esfdl][+-]?\d+)?/.source,"<real dec>":/[+-]?<ureal dec>|[+-](?:inf|nan)\.0/.source,"<imaginary dec>":/[+-](?:<ureal dec>|(?:inf|nan)\.0)?i/.source,"<complex dec>":/<real dec>(?:@<real dec>|<imaginary dec>)?|<imaginary dec>/.source,"<num dec>":/(?:#d(?:#[ei])?|#[ei](?:#d)?)?<complex dec>/.source,"<ureal box>":/[0-9a-f]+(?:\/[0-9a-f]+)?/.source,"<real box>":/[+-]?<ureal box>|[+-](?:inf|nan)\.0/.source,"<imaginary box>":/[+-](?:<ureal box>|(?:inf|nan)\.0)?i/.source,"<complex box>":/<real box>(?:@<real box>|<imaginary box>)?|<imaginary box>/.source,"<num box>":/#[box](?:#[ei])?|(?:#[ei])?#[box]<complex box>/.source,"<number>":/(^|[()\[\]\s])(?:<num dec>|<num box>)(?=[()\[\]\s]|$)/.source}),"i"),lookbehind:!0},boolean:{pattern:/(^|[()\[\]\s])#(?:[ft]|false|true)(?=[()\[\]\s]|$)/,lookbehind:!0},function:{pattern:/((?:^|[^'`#])[(\[])(?:[^|()\[\]'\s]+|\|(?:[^\\|]|\\.)*\|)(?=[()\[\]\s]|$)/,lookbehind:!0},identifier:{pattern:/(^|[()\[\]\s])\|(?:[^\\|]|\\.)*\|(?=[()\[\]\s]|$)/,lookbehind:!0,greedy:!0},punctuation:/[()\[\]']/};function t(r){for(var i in r)r[i]=r[i].replace(/<[\w\s]+>/g,function(s){return"(?:"+r[s].trim()+")"});return r[i]}})(n)}QN.displayName="lilypond";QN.aliases=["ly"];function QN(n){n.register(Xg),(function(e){for(var t=/\((?:[^();"#\\]|\\[\s\S]|;.*(?!.)|"(?:[^"\\]|\\.)*"|#(?:\{(?:(?!#\})[\s\S])*#\}|[^{])|<expr>)*\)/.source,r=5,i=0;i<r;i++)t=t.replace(/<expr>/g,function(){return t});t=t.replace(/<expr>/g,/[^\s\S]/.source);var s=e.languages.lilypond={comment:/%(?:(?!\{).*|\{[\s\S]*?%\})/,"embedded-scheme":{pattern:RegExp(/(^|[=\s])#(?:"(?:[^"\\]|\\.)*"|[^\s()"]*(?:[^\s()]|<expr>))/.source.replace(/<expr>/g,function(){return t}),"m"),lookbehind:!0,greedy:!0,inside:{scheme:{pattern:/^(#)[\s\S]+$/,lookbehind:!0,alias:"language-scheme",inside:{"embedded-lilypond":{pattern:/#\{[\s\S]*?#\}/,greedy:!0,inside:{punctuation:/^#\{|#\}$/,lilypond:{pattern:/[\s\S]+/,alias:"language-lilypond",inside:null}}},rest:e.languages.scheme}},punctuation:/#/}},string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},"class-name":{pattern:/(\\new\s+)[\w-]+/,lookbehind:!0},keyword:{pattern:/\\[a-z][-\w]*/i,inside:{punctuation:/^\\/}},operator:/[=|]|<<|>>/,punctuation:{pattern:/(^|[a-z\d])(?:'+|,+|[_^]?-[_^]?(?:[-+^!>._]|(?=\d))|[_^]\.?|[.!])|[{}()[\]<>^~]|\\[()[\]<>\\!]|--|__/,lookbehind:!0},number:/\b\d+(?:\/\d+)?\b/};s["embedded-scheme"].inside.scheme.inside["embedded-lilypond"].inside.lilypond.inside=s,e.languages.ly=s})(n)}JN.displayName="liquid";JN.aliases=[];function JN(n){n.register(vi),n.languages.liquid={comment:{pattern:/(^\{%\s*comment\s*%\})[\s\S]+(?=\{%\s*endcomment\s*%\}$)/,lookbehind:!0},delimiter:{pattern:/^\{(?:\{\{|[%\{])-?|-?(?:\}\}|[%\}])\}$/,alias:"punctuation"},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},keyword:/\b(?:as|assign|break|(?:end)?(?:capture|case|comment|for|form|if|paginate|raw|style|tablerow|unless)|continue|cycle|decrement|echo|else|elsif|in|include|increment|limit|liquid|offset|range|render|reversed|section|when|with)\b/,object:/\b(?:address|all_country_option_tags|article|block|blog|cart|checkout|collection|color|country|country_option_tags|currency|current_page|current_tags|customer|customer_address|date|discount_allocation|discount_application|external_video|filter|filter_value|font|forloop|fulfillment|generic_file|gift_card|group|handle|image|line_item|link|linklist|localization|location|measurement|media|metafield|model|model_source|order|page|page_description|page_image|page_title|part|policy|product|product_option|recommendations|request|robots|routes|rule|script|search|selling_plan|selling_plan_allocation|selling_plan_group|shipping_method|shop|shop_locale|sitemap|store_availability|tax_line|template|theme|transaction|unit_price_measurement|user_agent|variant|video|video_source)\b/,function:[{pattern:/(\|\s*)\w+/,lookbehind:!0,alias:"filter"},{pattern:/(\.\s*)(?:first|last|size)/,lookbehind:!0}],boolean:/\b(?:false|nil|true)\b/,range:{pattern:/\.\./,alias:"operator"},number:/\b\d+(?:\.\d+)?\b/,operator:/[!=]=|<>|[<>]=?|[|?:=-]|\b(?:and|contains(?=\s)|or)\b/,punctuation:/[.,\[\]()]/,empty:{pattern:/\bempty\b/,alias:"keyword"}},n.hooks.add("before-tokenize",function(e){var t=/\{%\s*comment\s*%\}[\s\S]*?\{%\s*endcomment\s*%\}|\{(?:%[\s\S]*?%|\{\{[\s\S]*?\}\}|\{[\s\S]*?\})\}/g,r=!1;n.languages["markup-templating"].buildPlaceholders(e,"liquid",t,function(i){var s=/^\{%-?\s*(\w+)/.exec(i);if(s){var a=s[1];if(a==="raw"&&!r)return r=!0,!0;if(a==="endraw")return r=!1,!0}return!r})}),n.hooks.add("after-tokenize",function(e){n.languages["markup-templating"].tokenizePlaceholders(e,"liquid")})}eC.displayName="lisp";eC.aliases=["elisp","emacs","emacs-lisp"];function eC(n){(function(e){function t(m){return RegExp(/(\()/.source+"(?:"+m+")"+/(?=[\s\)])/.source)}function r(m){return RegExp(/([\s([])/.source+"(?:"+m+")"+/(?=[\s)])/.source)}var i=/(?!\d)[-+*/~!@$%^=<>{}\w]+/.source,s="&"+i,a="(\\()",o="(?=\\))",l="(?=\\s)",u=/(?:[^()]|\((?:[^()]|\((?:[^()]|\((?:[^()]|\((?:[^()]|\([^()]*\))*\))*\))*\))*\))*/.source,c={heading:{pattern:/;;;.*/,alias:["comment","title"]},comment:/;.*/,string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0,inside:{argument:/[-A-Z]+(?=[.,\s])/,symbol:RegExp("`"+i+"'")}},"quoted-symbol":{pattern:RegExp("#?'"+i),alias:["variable","symbol"]},"lisp-property":{pattern:RegExp(":"+i),alias:"property"},splice:{pattern:RegExp(",@?"+i),alias:["symbol","variable"]},keyword:[{pattern:RegExp(a+"(?:and|(?:cl-)?letf|cl-loop|cond|cons|error|if|(?:lexical-)?let\\*?|message|not|null|or|provide|require|setq|unless|use-package|when|while)"+l),lookbehind:!0},{pattern:RegExp(a+"(?:append|by|collect|concat|do|finally|for|in|return)"+l),lookbehind:!0}],declare:{pattern:t(/declare/.source),lookbehind:!0,alias:"keyword"},interactive:{pattern:t(/interactive/.source),lookbehind:!0,alias:"keyword"},boolean:{pattern:r(/nil|t/.source),lookbehind:!0},number:{pattern:r(/[-+]?\d+(?:\.\d*)?/.source),lookbehind:!0},defvar:{pattern:RegExp(a+"def(?:const|custom|group|var)\\s+"+i),lookbehind:!0,inside:{keyword:/^def[a-z]+/,variable:RegExp(i)}},defun:{pattern:RegExp(a+/(?:cl-)?(?:defmacro|defun\*?)\s+/.source+i+/\s+\(/.source+u+/\)/.source),lookbehind:!0,greedy:!0,inside:{keyword:/^(?:cl-)?def\S+/,arguments:null,function:{pattern:RegExp("(^\\s)"+i),lookbehind:!0},punctuation:/[()]/}},lambda:{pattern:RegExp(a+"lambda\\s+\\(\\s*(?:&?"+i+"(?:\\s+&?"+i+")*\\s*)?\\)"),lookbehind:!0,greedy:!0,inside:{keyword:/^lambda/,arguments:null,punctuation:/[()]/}},car:{pattern:RegExp(a+i),lookbehind:!0},punctuation:[/(?:['`,]?\(|[)\[\]])/,{pattern:/(\s)\.(?=\s)/,lookbehind:!0}]},h={"lisp-marker":RegExp(s),varform:{pattern:RegExp(/\(/.source+i+/\s+(?=\S)/.source+u+/\)/.source),inside:c},argument:{pattern:RegExp(/(^|[\s(])/.source+i),lookbehind:!0,alias:"variable"},rest:c},f="\\S+(?:\\s+\\S+)*",g={pattern:RegExp(a+u+o),lookbehind:!0,inside:{"rest-vars":{pattern:RegExp("&(?:body|rest)\\s+"+f),inside:h},"other-marker-vars":{pattern:RegExp("&(?:aux|optional)\\s+"+f),inside:h},keys:{pattern:RegExp("&key\\s+"+f+"(?:\\s+&allow-other-keys)?"),inside:h},argument:{pattern:RegExp(i),alias:"variable"},punctuation:/[()]/}};c.lambda.inside.arguments=g,c.defun.inside.arguments=e.util.clone(g),c.defun.inside.arguments.inside.sublist=g,e.languages.lisp=c,e.languages.elisp=c,e.languages.emacs=c,e.languages["emacs-lisp"]=c})(n)}tC.displayName="livescript";tC.aliases=[];function tC(n){n.languages.livescript={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\])#.*/,lookbehind:!0}],"interpolated-string":{pattern:/(^|[^"])("""|")(?:\\[\s\S]|(?!\2)[^\\])*\2(?!")/,lookbehind:!0,greedy:!0,inside:{variable:{pattern:/(^|[^\\])#[a-z_](?:-?[a-z]|[\d_])*/m,lookbehind:!0},interpolation:{pattern:/(^|[^\\])#\{[^}]+\}/m,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^#\{|\}$/,alias:"variable"}}},string:/[\s\S]+/}},string:[{pattern:/('''|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/<\[[\s\S]*?\]>/,greedy:!0},/\\[^\s,;\])}]+/],regex:[{pattern:/\/\/(?:\[[^\r\n\]]*\]|\\.|(?!\/\/)[^\\\[])+\/\/[gimyu]{0,5}/,greedy:!0,inside:{comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0}}},{pattern:/\/(?:\[[^\r\n\]]*\]|\\.|[^/\\\r\n\[])+\/[gimyu]{0,5}/,greedy:!0}],keyword:{pattern:/(^|(?!-).)\b(?:break|case|catch|class|const|continue|default|do|else|extends|fallthrough|finally|for(?: ever)?|function|if|implements|it|let|loop|new|null|otherwise|own|return|super|switch|that|then|this|throw|try|unless|until|var|void|when|while|yield)(?!-)\b/m,lookbehind:!0},"keyword-operator":{pattern:/(^|[^-])\b(?:(?:delete|require|typeof)!|(?:and|by|delete|export|from|import(?: all)?|in|instanceof|is(?: not|nt)?|not|of|or|til|to|typeof|with|xor)(?!-)\b)/m,lookbehind:!0,alias:"operator"},boolean:{pattern:/(^|[^-])\b(?:false|no|off|on|true|yes)(?!-)\b/m,lookbehind:!0},argument:{pattern:/(^|(?!\.&\.)[^&])&(?!&)\d*/m,lookbehind:!0,alias:"variable"},number:/\b(?:\d+~[\da-z]+|\d[\d_]*(?:\.\d[\d_]*)?(?:[a-z]\w*)?)/i,identifier:/[a-z_](?:-?[a-z]|[\d_])*/i,operator:[{pattern:/( )\.(?= )/,lookbehind:!0},/\.(?:[=~]|\.\.?)|\.(?:[&|^]|<<|>>>?)\.|:(?:=|:=?)|&&|\|[|>]|<(?:<<?<?|--?!?|~~?!?|[|=?])?|>[>=?]?|-(?:->?|>)?|\+\+?|@@?|%%?|\*\*?|!(?:~?=|--?>|~?~>)?|~(?:~?>|=)?|==?|\^\^?|[\/?]/],punctuation:/[(){}\[\]|.,:;`]/},n.languages.livescript["interpolated-string"].inside.interpolation.inside.rest=n.languages.livescript}nC.displayName="llvm";nC.aliases=[];function nC(n){(function(e){e.languages.llvm={comment:/;.*/,string:{pattern:/"[^"]*"/,greedy:!0},boolean:/\b(?:false|true)\b/,variable:/[%@!#](?:(?!\d)(?:[-$.\w]|\\[a-f\d]{2})+|\d+)/i,label:/(?!\d)(?:[-$.\w]|\\[a-f\d]{2})+:/i,type:{pattern:/\b(?:double|float|fp128|half|i[1-9]\d*|label|metadata|ppc_fp128|token|void|x86_fp80|x86_mmx)\b/,alias:"class-name"},keyword:/\b[a-z_][a-z_0-9]*\b/,number:/[+-]?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\b0x[\dA-Fa-f]+\b|\b0xK[\dA-Fa-f]{20}\b|\b0x[ML][\dA-Fa-f]{32}\b|\b0xH[\dA-Fa-f]{4}\b/,punctuation:/[{}[\];(),.!*=<>]/}})(n)}rC.displayName="log";rC.aliases=[];function rC(n){n.languages.log={string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?![st] | \w)(?:[^'\\\r\n]|\\.)*'/,greedy:!0},exception:{pattern:/(^|[^\w.])[a-z][\w.]*(?:Error|Exception):.*(?:(?:\r\n?|\n)[ \t]*(?:at[ \t].+|\.{3}.*|Caused by:.*))+(?:(?:\r\n?|\n)[ \t]*\.\.\. .*)?/,lookbehind:!0,greedy:!0,alias:["javastacktrace","language-javastacktrace"],inside:n.languages.javastacktrace||{keyword:/\bat\b/,function:/[a-z_][\w$]*(?=\()/,punctuation:/[.:()]/}},level:[{pattern:/\b(?:ALERT|CRIT|CRITICAL|EMERG|EMERGENCY|ERR|ERROR|FAILURE|FATAL|SEVERE)\b/,alias:["error","important"]},{pattern:/\b(?:WARN|WARNING|WRN)\b/,alias:["warning","important"]},{pattern:/\b(?:DISPLAY|INF|INFO|NOTICE|STATUS)\b/,alias:["info","keyword"]},{pattern:/\b(?:DBG|DEBUG|FINE)\b/,alias:["debug","keyword"]},{pattern:/\b(?:FINER|FINEST|TRACE|TRC|VERBOSE|VRB)\b/,alias:["trace","comment"]}],property:{pattern:/((?:^|[\]|])[ \t]*)[a-z_](?:[\w-]|\b\/\b)*(?:[. ]\(?\w(?:[\w-]|\b\/\b)*\)?)*:(?=\s)/im,lookbehind:!0},separator:{pattern:/(^|[^-+])-{3,}|={3,}|\*{3,}|- - /m,lookbehind:!0,alias:"comment"},url:/\b(?:file|ftp|https?):\/\/[^\s|,;'"]*[^\s|,;'">.]/,email:{pattern:/(^|\s)[-\w+.]+@[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)+(?=\s)/,lookbehind:!0,alias:"url"},"ip-address":{pattern:/\b(?:\d{1,3}(?:\.\d{1,3}){3})\b/,alias:"constant"},"mac-address":{pattern:/\b[a-f0-9]{2}(?::[a-f0-9]{2}){5}\b/i,alias:"constant"},domain:{pattern:/(^|\s)[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)*\.[a-z][a-z0-9-]+(?=\s)/,lookbehind:!0,alias:"constant"},uuid:{pattern:/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/i,alias:"constant"},hash:{pattern:/\b(?:[a-f0-9]{32}){1,2}\b/i,alias:"constant"},"file-path":{pattern:/\b[a-z]:[\\/][^\s|,;:(){}\[\]"']+|(^|[\s:\[\](>|])\.{0,2}\/\w[^\s|,;:(){}\[\]"']*/i,lookbehind:!0,greedy:!0,alias:"string"},date:{pattern:RegExp(/\b\d{4}[-/]\d{2}[-/]\d{2}(?:T(?=\d{1,2}:)|(?=\s\d{1,2}:))/.source+"|"+/\b\d{1,4}[-/ ](?:\d{1,2}|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)[-/ ]\d{2,4}T?\b/.source+"|"+/\b(?:(?:Fri|Mon|Sat|Sun|Thu|Tue|Wed)(?:\s{1,2}(?:Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep))?|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)\s{1,2}\d{1,2}\b/.source,"i"),alias:"number"},time:{pattern:/\b\d{1,2}:\d{1,2}:\d{1,2}(?:[.,:]\d+)?(?:\s?[+-]\d{2}:?\d{2}|Z)?\b/,alias:"number"},boolean:/\b(?:false|null|true)\b/i,number:{pattern:/(^|[^.\w])(?:0x[a-f0-9]+|0o[0-7]+|0b[01]+|v?\d[\da-f]*(?:\.\d+)*(?:e[+-]?\d+)?[a-z]{0,3}\b)\b(?!\.\w)/i,lookbehind:!0},operator:/[;:?<=>~/@!$%&+\-|^(){}*#]/,punctuation:/[\[\].,]/}}iC.displayName="lolcode";iC.aliases=[];function iC(n){n.languages.lolcode={comment:[/\bOBTW\s[\s\S]*?\sTLDR\b/,/\bBTW.+/],string:{pattern:/"(?::.|[^":])*"/,inside:{variable:/:\{[^}]+\}/,symbol:[/:\([a-f\d]+\)/i,/:\[[^\]]+\]/,/:[)>o":]/]},greedy:!0},number:/(?:\B-)?(?:\b\d+(?:\.\d*)?|\B\.\d+)/,symbol:{pattern:/(^|\s)(?:A )?(?:BUKKIT|NOOB|NUMBAR|NUMBR|TROOF|YARN)(?=\s|,|$)/,lookbehind:!0,inside:{keyword:/A(?=\s)/}},label:{pattern:/((?:^|\s)(?:IM IN YR|IM OUTTA YR) )[a-zA-Z]\w*/,lookbehind:!0,alias:"string"},function:{pattern:/((?:^|\s)(?:HOW IZ I|I IZ|IZ) )[a-zA-Z]\w*/,lookbehind:!0},keyword:[{pattern:/(^|\s)(?:AN|FOUND YR|GIMMEH|GTFO|HAI|HAS A|HOW IZ I|I HAS A|I IZ|IF U SAY SO|IM IN YR|IM OUTTA YR|IS NOW(?: A)?|ITZ(?: A)?|IZ|KTHX|KTHXBYE|LIEK(?: A)?|MAEK|MEBBE|MKAY|NERFIN|NO WAI|O HAI IM|O RLY\?|OIC|OMG|OMGWTF|R|SMOOSH|SRS|TIL|UPPIN|VISIBLE|WILE|WTF\?|YA RLY|YR)(?=\s|,|$)/,lookbehind:!0},/'Z(?=\s|,|$)/],boolean:{pattern:/(^|\s)(?:FAIL|WIN)(?=\s|,|$)/,lookbehind:!0},variable:{pattern:/(^|\s)IT(?=\s|,|$)/,lookbehind:!0},operator:{pattern:/(^|\s)(?:NOT|BOTH SAEM|DIFFRINT|(?:ALL|ANY|BIGGR|BOTH|DIFF|EITHER|MOD|PRODUKT|QUOSHUNT|SMALLR|SUM|WON) OF)(?=\s|,|$)/,lookbehind:!0},punctuation:/\.{3}||,|!/}}sC.displayName="magma";sC.aliases=[];function sC(n){n.languages.magma={output:{pattern:/^(>.*(?:\r(?:\n|(?!\n))|\n))(?!>)(?:.+|(?:\r(?:\n|(?!\n))|\n)(?!>).*)(?:(?:\r(?:\n|(?!\n))|\n)(?!>).*)*/m,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/(^|[^\\"])"(?:[^\r\n\\"]|\\.)*"/,lookbehind:!0,greedy:!0},keyword:/\b(?:_|adj|and|assert|assert2|assert3|assigned|break|by|case|cat|catch|clear|cmpeq|cmpne|continue|declare|default|delete|diff|div|do|elif|else|end|eq|error|eval|exists|exit|for|forall|forward|fprintf|freeze|function|ge|gt|if|iload|import|in|intrinsic|is|join|le|load|local|lt|meet|mod|ne|not|notadj|notin|notsubset|or|print|printf|procedure|quit|random|read|readi|repeat|require|requirege|requirerange|restore|return|save|sdiff|select|subset|then|time|to|try|until|vprint|vprintf|vtime|when|where|while|xor)\b/,boolean:/\b(?:false|true)\b/,generator:{pattern:/\b[a-z_]\w*(?=\s*<)/i,alias:"class-name"},function:/\b[a-z_]\w*(?=\s*\()/i,number:{pattern:/(^|[^\w.]|\.\.)(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?(?:_[a-z]?)?(?=$|[^\w.]|\.\.)/,lookbehind:!0},operator:/->|[-+*/^~!|#=]|:=|\.\./,punctuation:/[()[\]{}<>,;.:]/}}aC.displayName="makefile";aC.aliases=[];function aC(n){n.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/}}q_.displayName="mata";q_.aliases=[];function q_(n){(function(e){var t=/\b(?:(?:col|row)?vector|matrix|scalar)\b/.source,r=/\bvoid\b|<org>|\b(?:complex|numeric|pointer(?:\s*\([^()]*\))?|real|string|(?:class|struct)\s+\w+|transmorphic)(?:\s*<org>)?/.source.replace(/<org>/g,t);e.languages.mata={comment:{pattern:/\/\/.*|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\//,greedy:!0},string:{pattern:/"[^"\r\n]*"|[`']".*?"[`']/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|struct)\s+)\w+(?=\s*(?:\{|\bextends\b))/,lookbehind:!0},type:{pattern:RegExp(r),alias:"class-name",inside:{punctuation:/[()]/,keyword:/\b(?:class|function|struct|void)\b/}},keyword:/\b(?:break|class|continue|do|else|end|extends|external|final|for|function|goto|if|pragma|private|protected|public|return|static|struct|unset|unused|version|virtual|while)\b/,constant:/\bNULL\b/,number:{pattern:/(^|[^\w.])(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|\d[a-f0-9]*(?:\.[a-f0-9]+)?x[+-]?\d+)i?(?![\w.])/i,lookbehind:!0},missing:{pattern:/(^|[^\w.])(?:\.[a-z]?)(?![\w.])/,lookbehind:!0,alias:"symbol"},function:/\b[a-z_]\w*(?=\s*\()/i,operator:/\.\.|\+\+|--|&&|\|\||:?(?:[!=<>]=|[+\-*/^<>&|:])|[!?=\\#`']/,punctuation:/[()[\]{},;.]/}})(n)}oC.displayName="matlab";oC.aliases=[];function oC(n){n.languages.matlab={comment:[/%\{[\s\S]*?\}%/,/%.+/],string:{pattern:/\B'(?:''|[^'\r\n])*'/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+)?(?:[ij])?|\b[ij]\b/,keyword:/\b(?:NaN|break|case|catch|continue|else|elseif|end|for|function|if|inf|otherwise|parfor|pause|pi|return|switch|try|while)\b/,function:/\b(?!\d)\w+(?=\s*\()/,operator:/\.?[*^\/\\']|[+\-:@]|[<>=~]=?|&&?|\|\|?/,punctuation:/\.{3}|[.,;\[\](){}!]/}}lC.displayName="maxscript";lC.aliases=[];function lC(n){(function(e){var t=/\b(?:about|and|animate|as|at|attributes|by|case|catch|collect|continue|coordsys|do|else|exit|fn|for|from|function|global|if|in|local|macroscript|mapped|max|not|of|off|on|or|parameters|persistent|plugin|rcmenu|return|rollout|set|struct|then|throw|to|tool|try|undo|utility|when|where|while|with)\b/i;e.languages.maxscript={comment:{pattern:/\/\*[\s\S]*?(?:\*\/|$)|--.*/,greedy:!0},string:{pattern:/(^|[^"\\@])(?:"(?:[^"\\]|\\[\s\S])*"|@"[^"]*")/,lookbehind:!0,greedy:!0},path:{pattern:/\$(?:[\w/\\.*?]|'[^']*')*/,greedy:!0,alias:"string"},"function-call":{pattern:RegExp("((?:"+(/^/.source+"|"+/[;=<>+\-*/^({\[]/.source+"|"+/\b(?:and|by|case|catch|collect|do|else|if|in|not|or|return|then|to|try|where|while|with)\b/.source)+")[ 	]*)(?!"+t.source+")"+/[a-z_]\w*\b/.source+"(?=[ 	]*(?:"+("(?!"+t.source+")"+/[a-z_]/.source+"|"+/\d|-\.?\d/.source+"|"+/[({'"$@#?]/.source)+"))","im"),lookbehind:!0,greedy:!0,alias:"function"},"function-definition":{pattern:/(\b(?:fn|function)\s+)\w+\b/i,lookbehind:!0,alias:"function"},argument:{pattern:/\b[a-z_]\w*(?=:)/i,alias:"attr-name"},keyword:t,boolean:/\b(?:false|true)\b/,time:{pattern:/(^|[^\w.])(?:(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eEdD][+-]\d+|[LP])?[msft])+|\d+:\d+(?:\.\d*)?)(?![\w.:])/,lookbehind:!0,alias:"number"},number:[{pattern:/(^|[^\w.])(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eEdD][+-]\d+|[LP])?|0x[a-fA-F0-9]+)(?![\w.:])/,lookbehind:!0},/\b(?:e|pi)\b/],constant:/\b(?:dontcollect|ok|silentValue|undefined|unsupplied)\b/,color:{pattern:/\b(?:black|blue|brown|gray|green|orange|red|white|yellow)\b/i,alias:"constant"},operator:/[-+*/<>=!]=?|[&^?]|#(?!\()/,punctuation:/[()\[\]{}.:,;]|#(?=\()|\\$/m}})(n)}uC.displayName="mel";uC.aliases=[];function uC(n){n.languages.mel={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},code:{pattern:/`(?:\\.|[^\\`])*`/,greedy:!0,alias:"italic",inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},statement:{pattern:/[\s\S]+/,inside:null}}},string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},variable:/\$\w+/,number:/\b0x[\da-fA-F]+\b|\b\d+(?:\.\d*)?|\B\.\d+/,flag:{pattern:/-[^\d\W]\w*/,alias:"operator"},keyword:/\b(?:break|case|continue|default|do|else|float|for|global|if|in|int|matrix|proc|return|string|switch|vector|while)\b/,function:{pattern:/((?:^|[{;])[ \t]*)[a-z_]\w*\b(?!\s*(?:\.(?!\.)|[[{=]))|\b[a-z_]\w*(?=[ \t]*\()/im,lookbehind:!0,greedy:!0},"tensor-punctuation":{pattern:/<<|>>/,alias:"punctuation"},operator:/\+[+=]?|-[-=]?|&&|\|\||[<>]=?|[*\/!=]=?|[%^]/,punctuation:/[.,:;?\[\](){}]/},n.languages.mel.code.inside.statement.inside=n.languages.mel}cC.displayName="mermaid";cC.aliases=[];function cC(n){n.languages.mermaid={comment:{pattern:/%%.*/,greedy:!0},style:{pattern:/^([ \t]*(?:classDef|linkStyle|style)[ \t]+[\w$-]+[ \t]+)\w.*[^\s;]/m,lookbehind:!0,inside:{property:/\b\w[\w-]*(?=[ \t]*:)/,operator:/:/,punctuation:/,/}},"inter-arrow-label":{pattern:/([^<>ox.=-])(?:-[-.]|==)(?![<>ox.=-])[ \t]*(?:"[^"\r\n]*"|[^\s".=-](?:[^\r\n.=-]*[^\s.=-])?)[ \t]*(?:\.+->?|--+[->]|==+[=>])(?![<>ox.=-])/,lookbehind:!0,greedy:!0,inside:{arrow:{pattern:/(?:\.+->?|--+[->]|==+[=>])$/,alias:"operator"},label:{pattern:/^([\s\S]{2}[ \t]*)\S(?:[\s\S]*\S)?/,lookbehind:!0,alias:"property"},"arrow-head":{pattern:/^\S+/,alias:["arrow","operator"]}}},arrow:[{pattern:/(^|[^{}|o.-])[|}][|o](?:--|\.\.)[|o][|{](?![{}|o.-])/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>ox.=-])(?:[<ox](?:==+|--+|-\.*-)[>ox]?|(?:==+|--+|-\.*-)[>ox]|===+|---+|-\.+-)(?![<>ox.=-])/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>()x-])(?:--?(?:>>|[x>)])(?![<>()x])|(?:<<|[x<(])--?(?!-))/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>|*o.-])(?:[*o]--|--[*o]|<\|?(?:--|\.\.)|(?:--|\.\.)\|?>|--|\.\.)(?![<>|*o.-])/,lookbehind:!0,alias:"operator"}],label:{pattern:/(^|[^|<])\|(?:[^\r\n"|]|"[^"\r\n]*")+\|/,lookbehind:!0,greedy:!0,alias:"property"},text:{pattern:/(?:[(\[{]+|\b>)(?:[^\r\n"()\[\]{}]|"[^"\r\n]*")+(?:[)\]}]+|>)/,alias:"string"},string:{pattern:/"[^"\r\n]*"/,greedy:!0},annotation:{pattern:/<<(?:abstract|choice|enumeration|fork|interface|join|service)>>|\[\[(?:choice|fork|join)\]\]/i,alias:"important"},keyword:[{pattern:/(^[ \t]*)(?:action|callback|class|classDef|classDiagram|click|direction|erDiagram|flowchart|gantt|gitGraph|graph|journey|link|linkStyle|pie|requirementDiagram|sequenceDiagram|stateDiagram|stateDiagram-v2|style|subgraph)(?![\w$-])/m,lookbehind:!0,greedy:!0},{pattern:/(^[ \t]*)(?:activate|alt|and|as|autonumber|deactivate|else|end(?:[ \t]+note)?|loop|opt|par|participant|rect|state|note[ \t]+(?:over|(?:left|right)[ \t]+of))(?![\w$-])/im,lookbehind:!0,greedy:!0}],entity:/#[a-z0-9]+;/,operator:{pattern:/(\w[ \t]*)&(?=[ \t]*\w)|:::|:/,lookbehind:!0},punctuation:/[(){};]/}}dC.displayName="metafont";dC.aliases=[];function dC(n){n.languages.metafont={comment:{pattern:/%.*/,greedy:!0},string:{pattern:/"[^\r\n"]*"/,greedy:!0},number:/\d*\.?\d+/,boolean:/\b(?:false|true)\b/,punctuation:[/[,;()]/,{pattern:/(^|[^{}])(?:\{|\})(?![{}])/,lookbehind:!0},{pattern:/(^|[^[])\[(?!\[)/,lookbehind:!0},{pattern:/(^|[^\]])\](?!\])/,lookbehind:!0}],constant:[{pattern:/(^|[^!?])\?\?\?(?![!?])/,lookbehind:!0},{pattern:/(^|[^/*\\])(?:\\|\\\\)(?![/*\\])/,lookbehind:!0},/\b(?:_|blankpicture|bp|cc|cm|dd|ditto|down|eps|epsilon|fullcircle|halfcircle|identity|in|infinity|left|mm|nullpen|nullpicture|origin|pc|penrazor|penspeck|pensquare|penstroke|proof|pt|quartercircle|relax|right|smoke|unitpixel|unitsquare|up)\b/],quantity:{pattern:/\b(?:autorounding|blacker|boundarychar|charcode|chardp|chardx|chardy|charext|charht|charic|charwd|currentwindow|day|designsize|displaying|fillin|fontmaking|granularity|hppp|join_radius|month|o_correction|pausing|pen_(?:bot|lft|rt|top)|pixels_per_inch|proofing|showstopping|smoothing|time|tolerance|tracingcapsules|tracingchoices|tracingcommands|tracingedges|tracingequations|tracingmacros|tracingonline|tracingoutput|tracingpens|tracingrestores|tracingspecs|tracingstats|tracingtitles|turningcheck|vppp|warningcheck|xoffset|year|yoffset)\b/,alias:"keyword"},command:{pattern:/\b(?:addto|batchmode|charlist|cull|display|errhelp|errmessage|errorstopmode|everyjob|extensible|fontdimen|headerbyte|inner|interim|let|ligtable|message|newinternal|nonstopmode|numspecial|openwindow|outer|randomseed|save|scrollmode|shipout|show|showdependencies|showstats|showtoken|showvariable|special)\b/,alias:"builtin"},operator:[{pattern:/(^|[^>=<:|])(?:<|<=|=|=:|\|=:|\|=:>|=:\|>|=:\||\|=:\||\|=:\|>|\|=:\|>>|>|>=|:|:=|<>|::|\|\|:)(?![>=<:|])/,lookbehind:!0},{pattern:/(^|[^+-])(?:\+|\+\+|-{1,3}|\+-\+)(?![+-])/,lookbehind:!0},{pattern:/(^|[^/*\\])(?:\*|\*\*|\/)(?![/*\\])/,lookbehind:!0},{pattern:/(^|[^.])(?:\.{2,3})(?!\.)/,lookbehind:!0},{pattern:/(^|[^@#&$])&(?![@#&$])/,lookbehind:!0},/\b(?:and|not|or)\b/],macro:{pattern:/\b(?:abs|beginchar|bot|byte|capsule_def|ceiling|change_width|clear_pen_memory|clearit|clearpen|clearxy|counterclockwise|cullit|cutdraw|cutoff|decr|define_blacker_pixels|define_corrected_pixels|define_good_x_pixels|define_good_y_pixels|define_horizontal_corrected_pixels|define_pixels|define_whole_blacker_pixels|define_whole_pixels|define_whole_vertical_blacker_pixels|define_whole_vertical_pixels|dir|direction|directionpoint|div|dotprod|downto|draw|drawdot|endchar|erase|fill|filldraw|fix_units|flex|font_coding_scheme|font_extra_space|font_identifier|font_normal_shrink|font_normal_space|font_normal_stretch|font_quad|font_size|font_slant|font_x_height|gfcorners|gobble|gobbled|good\.(?:bot|lft|rt|top|x|y)|grayfont|hide|hround|imagerules|incr|interact|interpath|intersectionpoint|inverse|italcorr|killtext|labelfont|labels|lft|loggingall|lowres_fix|makegrid|makelabel(?:\.(?:bot|lft|rt|top)(?:\.nodot)?)?|max|min|mod|mode_def|mode_setup|nodisplays|notransforms|numtok|openit|penlabels|penpos|pickup|proofoffset|proofrule|proofrulethickness|range|reflectedabout|rotatedabout|rotatedaround|round|rt|savepen|screenchars|screenrule|screenstrokes|shipit|showit|slantfont|softjoin|solve|stop|superellipse|tensepath|thru|titlefont|top|tracingall|tracingnone|undraw|undrawdot|unfill|unfilldraw|upto|vround)\b/,alias:"function"},builtin:/\b(?:ASCII|angle|char|cosd|decimal|directiontime|floor|hex|intersectiontimes|jobname|known|length|makepath|makepen|mexp|mlog|normaldeviate|oct|odd|pencircle|penoffset|point|postcontrol|precontrol|reverse|rotated|sind|sqrt|str|subpath|substring|totalweight|turningnumber|uniformdeviate|unknown|xpart|xxpart|xypart|ypart|yxpart|yypart)\b/,keyword:/\b(?:also|at|atleast|begingroup|charexists|contour|controls|curl|cycle|def|delimiters|doublepath|dropping|dump|else|elseif|end|enddef|endfor|endgroup|endinput|exitif|exitunless|expandafter|fi|for|forever|forsuffixes|from|if|input|inwindow|keeping|kern|of|primarydef|quote|readstring|scaled|scantokens|secondarydef|shifted|skipto|slanted|step|tension|tertiarydef|to|transformed|until|vardef|withpen|withweight|xscaled|yscaled|zscaled)\b/,type:{pattern:/\b(?:boolean|expr|numeric|pair|path|pen|picture|primary|secondary|string|suffix|tertiary|text|transform)\b/,alias:"property"},variable:{pattern:/(^|[^@#&$])(?:@#|#@|#|@)(?![@#&$])|\b(?:aspect_ratio|currentpen|currentpicture|currenttransform|d|extra_beginchar|extra_endchar|extra_setup|h|localfont|mag|mode|screen_cols|screen_rows|w|whatever|x|y|z)\b/,lookbehind:!0}}}hC.displayName="mizar";hC.aliases=[];function hC(n){n.languages.mizar={comment:/::.+/,keyword:/@proof\b|\b(?:according|aggregate|all|and|antonym|are|as|associativity|assume|asymmetry|attr|be|begin|being|by|canceled|case|cases|clusters?|coherence|commutativity|compatibility|connectedness|consider|consistency|constructors|contradiction|correctness|def|deffunc|define|definitions?|defpred|do|does|end|environ|equals|ex|exactly|existence|for|from|func|given|hence|hereby|holds|idempotence|identity|iff?|implies|involutiveness|irreflexivity|is|it|let|means|mode|non|not|notations?|now|of|or|otherwise|over|per|pred|prefix|projectivity|proof|provided|qua|reconsider|redefine|reduce|reducibility|reflexivity|registrations?|requirements|reserve|sch|schemes?|section|selector|set|sethood|st|struct|such|suppose|symmetry|synonym|take|that|the|then|theorems?|thesis|thus|to|transitivity|uniqueness|vocabular(?:ies|y)|when|where|with|wrt)\b/,parameter:{pattern:/\$(?:10|\d)/,alias:"variable"},variable:/\b\w+(?=:)/,number:/(?:\b|-)\d+\b/,operator:/\.\.\.|->|&|\.?=/,punctuation:/\(#|#\)|[,:;\[\](){}]/}}pC.displayName="mongodb";pC.aliases=[];function pC(n){n.register(_i),(function(e){var t=["$eq","$gt","$gte","$in","$lt","$lte","$ne","$nin","$and","$not","$nor","$or","$exists","$type","$expr","$jsonSchema","$mod","$regex","$text","$where","$geoIntersects","$geoWithin","$near","$nearSphere","$all","$elemMatch","$size","$bitsAllClear","$bitsAllSet","$bitsAnyClear","$bitsAnySet","$comment","$elemMatch","$meta","$slice","$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$each","$position","$slice","$sort","$bit","$addFields","$bucket","$bucketAuto","$collStats","$count","$currentOp","$facet","$geoNear","$graphLookup","$group","$indexStats","$limit","$listLocalSessions","$listSessions","$lookup","$match","$merge","$out","$planCacheStats","$project","$redact","$replaceRoot","$replaceWith","$sample","$set","$skip","$sort","$sortByCount","$unionWith","$unset","$unwind","$setWindowFields","$abs","$accumulator","$acos","$acosh","$add","$addToSet","$allElementsTrue","$and","$anyElementTrue","$arrayElemAt","$arrayToObject","$asin","$asinh","$atan","$atan2","$atanh","$avg","$binarySize","$bsonSize","$ceil","$cmp","$concat","$concatArrays","$cond","$convert","$cos","$dateFromParts","$dateToParts","$dateFromString","$dateToString","$dayOfMonth","$dayOfWeek","$dayOfYear","$degreesToRadians","$divide","$eq","$exp","$filter","$first","$floor","$function","$gt","$gte","$hour","$ifNull","$in","$indexOfArray","$indexOfBytes","$indexOfCP","$isArray","$isNumber","$isoDayOfWeek","$isoWeek","$isoWeekYear","$last","$last","$let","$literal","$ln","$log","$log10","$lt","$lte","$ltrim","$map","$max","$mergeObjects","$meta","$min","$millisecond","$minute","$mod","$month","$multiply","$ne","$not","$objectToArray","$or","$pow","$push","$radiansToDegrees","$range","$reduce","$regexFind","$regexFindAll","$regexMatch","$replaceOne","$replaceAll","$reverseArray","$round","$rtrim","$second","$setDifference","$setEquals","$setIntersection","$setIsSubset","$setUnion","$size","$sin","$slice","$split","$sqrt","$stdDevPop","$stdDevSamp","$strcasecmp","$strLenBytes","$strLenCP","$substr","$substrBytes","$substrCP","$subtract","$sum","$switch","$tan","$toBool","$toDate","$toDecimal","$toDouble","$toInt","$toLong","$toObjectId","$toString","$toLower","$toUpper","$trim","$trunc","$type","$week","$year","$zip","$count","$dateAdd","$dateDiff","$dateSubtract","$dateTrunc","$getField","$rand","$sampleRate","$setField","$unsetField","$comment","$explain","$hint","$max","$maxTimeMS","$min","$orderby","$query","$returnKey","$showDiskLoc","$natural"],r=["ObjectId","Code","BinData","DBRef","Timestamp","NumberLong","NumberDecimal","MaxKey","MinKey","RegExp","ISODate","UUID"];t=t.map(function(s){return s.replace("$","\\$")});var i="(?:"+t.join("|")+")\\b";e.languages.mongodb=e.languages.extend("javascript",{}),e.languages.insertBefore("mongodb","string",{property:{pattern:/(?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)(?=\s*:)/,greedy:!0,inside:{keyword:RegExp(`^(['"])?`+i+"(?:\\1)?$")}}}),e.languages.mongodb.string.inside={url:{pattern:/https?:\/\/[-\w@:%.+~#=]{1,256}\.[a-z0-9()]{1,6}\b[-\w()@:%+.~#?&/=]*/i,greedy:!0},entity:{pattern:/\b(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d\d?|2[0-4]\d|25[0-5])\b/,greedy:!0}},e.languages.insertBefore("mongodb","constant",{builtin:{pattern:RegExp("\\b(?:"+r.join("|")+")\\b"),alias:"keyword"}})})(n)}fC.displayName="monkey";fC.aliases=[];function fC(n){n.languages.monkey={comment:{pattern:/^#Rem\s[\s\S]*?^#End|'.+/im,greedy:!0},string:{pattern:/"[^"\r\n]*"/,greedy:!0},preprocessor:{pattern:/(^[ \t]*)#.+/m,lookbehind:!0,greedy:!0,alias:"property"},function:/\b\w+(?=\()/,"type-char":{pattern:/\b[?%#$]/,alias:"class-name"},number:{pattern:/((?:\.\.)?)(?:(?:\b|\B-\.?|\B\.)\d+(?:(?!\.\.)\.\d*)?|\$[\da-f]+)/i,lookbehind:!0},keyword:/\b(?:Abstract|Array|Bool|Case|Catch|Class|Const|Continue|Default|Eachin|Else|ElseIf|End|EndIf|Exit|Extends|Extern|False|Field|Final|Float|For|Forever|Function|Global|If|Implements|Import|Inline|Int|Interface|Local|Method|Module|New|Next|Null|Object|Private|Property|Public|Repeat|Return|Select|Self|Step|Strict|String|Super|Then|Throw|To|True|Try|Until|Void|Wend|While)\b/i,operator:/\.\.|<[=>]?|>=?|:?=|(?:[+\-*\/&~|]|\b(?:Mod|Shl|Shr)\b)=?|\b(?:And|Not|Or)\b/i,punctuation:/[.,:;()\[\]]/}}gC.displayName="moonscript";gC.aliases=["moon"];function gC(n){n.languages.moonscript={comment:/--.*/,string:[{pattern:/'[^']*'|\[(=*)\[[\s\S]*?\]\1\]/,greedy:!0},{pattern:/"[^"]*"/,greedy:!0,inside:{interpolation:{pattern:/#\{[^{}]*\}/,inside:{moonscript:{pattern:/(^#\{)[\s\S]+(?=\})/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/#\{|\}/,alias:"punctuation"}}}}}],"class-name":[{pattern:/(\b(?:class|extends)[ \t]+)\w+/,lookbehind:!0},/\b[A-Z]\w*/],keyword:/\b(?:class|continue|do|else|elseif|export|extends|for|from|if|import|in|local|nil|return|self|super|switch|then|unless|using|when|while|with)\b/,variable:/@@?\w*/,property:{pattern:/\b(?!\d)\w+(?=:)|(:)(?!\d)\w+/,lookbehind:!0},function:{pattern:/\b(?:_G|_VERSION|assert|collectgarbage|coroutine\.(?:create|resume|running|status|wrap|yield)|debug\.(?:debug|getfenv|gethook|getinfo|getlocal|getmetatable|getregistry|getupvalue|setfenv|sethook|setlocal|setmetatable|setupvalue|traceback)|dofile|error|getfenv|getmetatable|io\.(?:close|flush|input|lines|open|output|popen|read|stderr|stdin|stdout|tmpfile|type|write)|ipairs|load|loadfile|loadstring|math\.(?:abs|acos|asin|atan|atan2|ceil|cos|cosh|deg|exp|floor|fmod|frexp|ldexp|log|log10|max|min|modf|pi|pow|rad|random|randomseed|sin|sinh|sqrt|tan|tanh)|module|next|os\.(?:clock|date|difftime|execute|exit|getenv|remove|rename|setlocale|time|tmpname)|package\.(?:cpath|loaded|loadlib|path|preload|seeall)|pairs|pcall|print|rawequal|rawget|rawset|require|select|setfenv|setmetatable|string\.(?:byte|char|dump|find|format|gmatch|gsub|len|lower|match|rep|reverse|sub|upper)|table\.(?:concat|insert|maxn|remove|sort)|tonumber|tostring|type|unpack|xpcall)\b/,inside:{punctuation:/\./}},boolean:/\b(?:false|true)\b/,number:/(?:\B\.\d+|\b\d+\.\d+|\b\d+(?=[eE]))(?:[eE][-+]?\d+)?\b|\b(?:0x[a-fA-F\d]+|\d+)(?:U?LL)?\b/,operator:/\.{3}|[-=]>|~=|(?:[-+*/%<>!=]|\.\.)=?|[:#^]|\b(?:and|or)\b=?|\b(?:not)\b/,punctuation:/[.,()[\]{}\\]/},n.languages.moonscript.string[1].inside.interpolation.inside.moonscript.inside=n.languages.moonscript,n.languages.moon=n.languages.moonscript}mC.displayName="n1ql";mC.aliases=[];function mC(n){n.languages.n1ql={comment:{pattern:/\/\*[\s\S]*?(?:$|\*\/)|--.*/,greedy:!0},string:{pattern:/(["'])(?:\\[\s\S]|(?!\1)[^\\]|\1\1)*\1/,greedy:!0},identifier:{pattern:/`(?:\\[\s\S]|[^\\`]|``)*`/,greedy:!0},parameter:/\$[\w.]+/,keyword:/\b(?:ADVISE|ALL|ALTER|ANALYZE|AS|ASC|AT|BEGIN|BINARY|BOOLEAN|BREAK|BUCKET|BUILD|BY|CALL|CAST|CLUSTER|COLLATE|COLLECTION|COMMIT|COMMITTED|CONNECT|CONTINUE|CORRELATE|CORRELATED|COVER|CREATE|CURRENT|DATABASE|DATASET|DATASTORE|DECLARE|DECREMENT|DELETE|DERIVED|DESC|DESCRIBE|DISTINCT|DO|DROP|EACH|ELEMENT|EXCEPT|EXCLUDE|EXECUTE|EXPLAIN|FETCH|FILTER|FLATTEN|FLUSH|FOLLOWING|FOR|FORCE|FROM|FTS|FUNCTION|GOLANG|GRANT|GROUP|GROUPS|GSI|HASH|HAVING|IF|IGNORE|ILIKE|INCLUDE|INCREMENT|INDEX|INFER|INLINE|INNER|INSERT|INTERSECT|INTO|IS|ISOLATION|JAVASCRIPT|JOIN|KEY|KEYS|KEYSPACE|KNOWN|LANGUAGE|LAST|LEFT|LET|LETTING|LEVEL|LIMIT|LSM|MAP|MAPPING|MATCHED|MATERIALIZED|MERGE|MINUS|MISSING|NAMESPACE|NEST|NL|NO|NTH_VALUE|NULL|NULLS|NUMBER|OBJECT|OFFSET|ON|OPTION|OPTIONS|ORDER|OTHERS|OUTER|OVER|PARSE|PARTITION|PASSWORD|PATH|POOL|PRECEDING|PREPARE|PRIMARY|PRIVATE|PRIVILEGE|PROBE|PROCEDURE|PUBLIC|RANGE|RAW|REALM|REDUCE|RENAME|RESPECT|RETURN|RETURNING|REVOKE|RIGHT|ROLE|ROLLBACK|ROW|ROWS|SATISFIES|SAVEPOINT|SCHEMA|SCOPE|SELECT|SELF|SEMI|SET|SHOW|SOME|START|STATISTICS|STRING|SYSTEM|TIES|TO|TRAN|TRANSACTION|TRIGGER|TRUNCATE|UNBOUNDED|UNDER|UNION|UNIQUE|UNKNOWN|UNNEST|UNSET|UPDATE|UPSERT|USE|USER|USING|VALIDATE|VALUE|VALUES|VIA|VIEW|WHERE|WHILE|WINDOW|WITH|WORK|XOR)\b/i,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:FALSE|TRUE)\b/i,number:/(?:\b\d+\.|\B\.)\d+e[+\-]?\d+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/%]|!=|==?|\|\||<[>=]?|>=?|\b(?:AND|ANY|ARRAY|BETWEEN|CASE|ELSE|END|EVERY|EXISTS|FIRST|IN|LIKE|NOT|OR|THEN|VALUED|WHEN|WITHIN)\b/i,punctuation:/[;[\](),.{}:]/}}yC.displayName="nand2tetris-hdl";yC.aliases=[];function yC(n){n.languages["nand2tetris-hdl"]={comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,keyword:/\b(?:BUILTIN|CHIP|CLOCKED|IN|OUT|PARTS)\b/,boolean:/\b(?:false|true)\b/,function:/\b[A-Za-z][A-Za-z0-9]*(?=\()/,number:/\b\d+\b/,operator:/=|\.\./,punctuation:/[{}[\];(),:]/}}bC.displayName="naniscript";bC.aliases=["nani"];function bC(n){(function(e){var t=/\{[^\r\n\[\]{}]*\}/,r={"quoted-string":{pattern:/"(?:[^"\\]|\\.)*"/,alias:"operator"},"command-param-id":{pattern:/(\s)\w+:/,lookbehind:!0,alias:"property"},"command-param-value":[{pattern:t,alias:"selector"},{pattern:/([\t ])\S+/,lookbehind:!0,greedy:!0,alias:"operator"},{pattern:/\S(?:.*\S)?/,alias:"operator"}]};e.languages.naniscript={comment:{pattern:/^([\t ]*);.*/m,lookbehind:!0},define:{pattern:/^>.+/m,alias:"tag",inside:{value:{pattern:/(^>\w+[\t ]+)(?!\s)[^{}\r\n]+/,lookbehind:!0,alias:"operator"},key:{pattern:/(^>)\w+/,lookbehind:!0}}},label:{pattern:/^([\t ]*)#[\t ]*\w+[\t ]*$/m,lookbehind:!0,alias:"regex"},command:{pattern:/^([\t ]*)@\w+(?=[\t ]|$).*/m,lookbehind:!0,alias:"function",inside:{"command-name":/^@\w+/,expression:{pattern:t,greedy:!0,alias:"selector"},"command-params":{pattern:/\s*\S[\s\S]*/,inside:r}}},"generic-text":{pattern:/(^[ \t]*)[^#@>;\s].*/m,lookbehind:!0,alias:"punctuation",inside:{"escaped-char":/\\[{}\[\]"]/,expression:{pattern:t,greedy:!0,alias:"selector"},"inline-command":{pattern:/\[[\t ]*\w[^\r\n\[\]]*\]/,greedy:!0,alias:"function",inside:{"command-params":{pattern:/(^\[[\t ]*\w+\b)[\s\S]+(?=\]$)/,lookbehind:!0,inside:r},"command-param-name":{pattern:/^(\[[\t ]*)\w+/,lookbehind:!0,alias:"name"},"start-stop-char":/[\[\]]/}}}}},e.languages.nani=e.languages.naniscript,e.hooks.add("after-tokenize",function(a){var o=a.tokens;o.forEach(function(l){if(typeof l!="string"&&l.type==="generic-text"){var u=s(l);i(u)||(l.type="bad-line",l.content=u)}})});function i(a){for(var o="[]{}",l=[],u=0;u<a.length;u++){var c=a[u],h=o.indexOf(c);if(h!==-1){if(h%2===0)l.push(h+1);else if(l.pop()!==h)return!1}}return l.length===0}function s(a){return typeof a=="string"?a:Array.isArray(a)?a.map(s).join(""):s(a.content)}})(n)}_C.displayName="nasm";_C.aliases=[];function _C(n){n.languages.nasm={comment:/;.*$/m,string:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,label:{pattern:/(^\s*)[A-Za-z._?$][\w.?$@~#]*:/m,lookbehind:!0,alias:"function"},keyword:[/\[?BITS (?:16|32|64)\]?/,{pattern:/(^\s*)section\s*[a-z.]+:?/im,lookbehind:!0},/(?:extern|global)[^;\r\n]*/i,/(?:CPU|DEFAULT|FLOAT).*$/m],register:{pattern:/\b(?:st\d|[xyz]mm\d\d?|[cdt]r\d|r\d\d?[bwd]?|[er]?[abcd]x|[abcd][hl]|[er]?(?:bp|di|si|sp)|[cdefgs]s)\b/i,alias:"variable"},number:/(?:\b|(?=\$))(?:0[hx](?:\.[\da-f]+|[\da-f]+(?:\.[\da-f]+)?)(?:p[+-]?\d+)?|\d[\da-f]+[hx]|\$\d[\da-f]*|0[oq][0-7]+|[0-7]+[oq]|0[by][01]+|[01]+[by]|0[dt]\d+|(?:\d+(?:\.\d+)?|\.\d+)(?:\.?e[+-]?\d+)?[dt]?)\b/i,operator:/[\[\]*+\-\/%<>=&|$!]/}}vC.displayName="neon";vC.aliases=[];function vC(n){n.languages.neon={comment:{pattern:/#.*/,greedy:!0},datetime:{pattern:/(^|[[{(=:,\s])\d\d\d\d-\d\d?-\d\d?(?:(?:[Tt]| +)\d\d?:\d\d:\d\d(?:\.\d*)? *(?:Z|[-+]\d\d?(?::?\d\d)?)?)?(?=$|[\]}),\s])/,lookbehind:!0,alias:"number"},key:{pattern:/(^|[[{(,\s])[^,:=[\]{}()'"\s]+(?=\s*:(?:$|[\]}),\s])|\s*=)/,lookbehind:!0,alias:"property"},number:{pattern:/(^|[[{(=:,\s])[+-]?(?:0x[\da-fA-F]+|0o[0-7]+|0b[01]+|(?:\d+(?:\.\d*)?|\.?\d+)(?:[eE][+-]?\d+)?)(?=$|[\]}),:=\s])/,lookbehind:!0},boolean:{pattern:/(^|[[{(=:,\s])(?:false|no|true|yes)(?=$|[\]}),:=\s])/i,lookbehind:!0},null:{pattern:/(^|[[{(=:,\s])(?:null)(?=$|[\]}),:=\s])/i,lookbehind:!0,alias:"keyword"},string:{pattern:/(^|[[{(=:,\s])(?:('''|""")\r?\n(?:(?:[^\r\n]|\r?\n(?![\t ]*\2))*\r?\n)?[\t ]*\2|'[^'\r\n]*'|"(?:\\.|[^\\"\r\n])*")/,lookbehind:!0,greedy:!0},literal:{pattern:/(^|[[{(=:,\s])(?:[^#"',:=[\]{}()\s`-]|[:-][^"',=[\]{}()\s])(?:[^,:=\]})(\s]|:(?![\s,\]})]|$)|[ \t]+[^#,:=\]})(\s])*/,lookbehind:!0,alias:"string"},punctuation:/[,:=[\]{}()-]/}}xC.displayName="nevod";xC.aliases=[];function xC(n){n.languages.nevod={comment:/\/\/.*|(?:\/\*[\s\S]*?(?:\*\/|$))/,string:{pattern:/(?:"(?:""|[^"])*"(?!")|'(?:''|[^'])*'(?!'))!?\*?/,greedy:!0,inside:{"string-attrs":/!$|!\*$|\*$/}},namespace:{pattern:/(@namespace\s+)[a-zA-Z0-9\-.]+(?=\s*\{)/,lookbehind:!0},pattern:{pattern:/(@pattern\s+)?#?[a-zA-Z0-9\-.]+(?:\s*\(\s*(?:~\s*)?[a-zA-Z0-9\-.]+\s*(?:,\s*(?:~\s*)?[a-zA-Z0-9\-.]*)*\))?(?=\s*=)/,lookbehind:!0,inside:{"pattern-name":{pattern:/^#?[a-zA-Z0-9\-.]+/,alias:"class-name"},fields:{pattern:/\(.*\)/,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},punctuation:/[,()]/,operator:{pattern:/~/,alias:"field-hidden-mark"}}}}},search:{pattern:/(@search\s+|#)[a-zA-Z0-9\-.]+(?:\.\*)?(?=\s*;)/,alias:"function",lookbehind:!0},keyword:/@(?:having|inside|namespace|outside|pattern|require|search|where)\b/,"standard-pattern":{pattern:/\b(?:Alpha|AlphaNum|Any|Blank|End|LineBreak|Num|NumAlpha|Punct|Space|Start|Symbol|Word|WordBreak)\b(?:\([a-zA-Z0-9\-.,\s+]*\))?/,inside:{"standard-pattern-name":{pattern:/^[a-zA-Z0-9\-.]+/,alias:"builtin"},quantifier:{pattern:/\b\d+(?:\s*\+|\s*-\s*\d+)?(?!\w)/,alias:"number"},"standard-pattern-attr":{pattern:/[a-zA-Z0-9\-.]+/,alias:"builtin"},punctuation:/[,()]/}},quantifier:{pattern:/\b\d+(?:\s*\+|\s*-\s*\d+)?(?!\w)/,alias:"number"},operator:[{pattern:/=/,alias:"pattern-def"},{pattern:/&/,alias:"conjunction"},{pattern:/~/,alias:"exception"},{pattern:/\?/,alias:"optionality"},{pattern:/[[\]]/,alias:"repetition"},{pattern:/[{}]/,alias:"variation"},{pattern:/[+_]/,alias:"sequence"},{pattern:/\.{2,3}/,alias:"span"}],"field-capture":[{pattern:/([a-zA-Z0-9\-.]+\s*\()\s*[a-zA-Z0-9\-.]+\s*:\s*[a-zA-Z0-9\-.]+(?:\s*,\s*[a-zA-Z0-9\-.]+\s*:\s*[a-zA-Z0-9\-.]+)*(?=\s*\))/,lookbehind:!0,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},colon:/:/}},{pattern:/[a-zA-Z0-9\-.]+\s*:/,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},colon:/:/}}],punctuation:/[:;,()]/,name:/[a-zA-Z0-9\-.]+/}}SC.displayName="nginx";SC.aliases=[];function SC(n){(function(e){var t=/\$(?:\w[a-z\d]*(?:_[^\x00-\x1F\s"'\\()$]*)?|\{[^}\s"'\\]+\})/i;e.languages.nginx={comment:{pattern:/(^|[\s{};])#.*/,lookbehind:!0,greedy:!0},directive:{pattern:/(^|\s)\w(?:[^;{}"'\\\s]|\\.|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\s+(?:#.*(?!.)|(?![#\s])))*?(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:{string:{pattern:/((?:^|[^\\])(?:\\\\)*)(?:"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')/,lookbehind:!0,greedy:!0,inside:{escape:{pattern:/\\["'\\nrt]/,alias:"entity"},variable:t}},comment:{pattern:/(\s)#.*/,lookbehind:!0,greedy:!0},keyword:{pattern:/^\S+/,greedy:!0},boolean:{pattern:/(\s)(?:off|on)(?!\S)/,lookbehind:!0},number:{pattern:/(\s)\d+[a-z]*(?!\S)/i,lookbehind:!0},variable:t}},punctuation:/[{};]/}})(n)}EC.displayName="nim";EC.aliases=[];function EC(n){n.languages.nim={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(?:\b(?!\d)(?:\w|\\x[89a-fA-F][0-9a-fA-F])+)?(?:"""[\s\S]*?"""(?!")|"(?:\\[\s\S]|""|[^"\\])*")/,greedy:!0},char:{pattern:/'(?:\\(?:\d+|x[\da-fA-F]{0,2}|.)|[^'])'/,greedy:!0},function:{pattern:/(?:(?!\d)(?:\w|\\x[89a-fA-F][0-9a-fA-F])+|`[^`\r\n]+`)\*?(?:\[[^\]]+\])?(?=\s*\()/,greedy:!0,inside:{operator:/\*$/}},identifier:{pattern:/`[^`\r\n]+`/,greedy:!0,inside:{punctuation:/`/}},number:/\b(?:0[xXoObB][\da-fA-F_]+|\d[\d_]*(?:(?!\.\.)\.[\d_]*)?(?:[eE][+-]?\d[\d_]*)?)(?:'?[iuf]\d*)?/,keyword:/\b(?:addr|as|asm|atomic|bind|block|break|case|cast|concept|const|continue|converter|defer|discard|distinct|do|elif|else|end|enum|except|export|finally|for|from|func|generic|if|import|include|interface|iterator|let|macro|method|mixin|nil|object|out|proc|ptr|raise|ref|return|static|template|try|tuple|type|using|var|when|while|with|without|yield)\b/,operator:{pattern:/(^|[({\[](?=\.\.)|(?![({\[]\.).)(?:(?:[=+\-*\/<>@$~&%|!?^:\\]|\.\.|\.(?![)}\]]))+|\b(?:and|div|in|is|isnot|mod|not|notin|of|or|shl|shr|xor)\b)/m,lookbehind:!0},punctuation:/[({\[]\.|\.[)}\]]|[`(){}\[\],:]/}}TC.displayName="nix";TC.aliases=[];function TC(n){n.languages.nix={comment:{pattern:/\/\*[\s\S]*?\*\/|#.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\[\s\S])*"|''(?:(?!'')[\s\S]|''(?:'|\\|\$\{))*''/,greedy:!0,inside:{interpolation:{pattern:/(^|(?:^|(?!'').)[^\\])\$\{(?:[^{}]|\{[^}]*\})*\}/,lookbehind:!0,inside:null}}},url:[/\b(?:[a-z]{3,7}:\/\/)[\w\-+%~\/.:#=?&]+/,{pattern:/([^\/])(?:[\w\-+%~.:#=?&]*(?!\/\/)[\w\-+%~\/.:#=?&])?(?!\/\/)\/[\w\-+%~\/.:#=?&]*/,lookbehind:!0}],antiquotation:{pattern:/\$(?=\{)/,alias:"important"},number:/\b\d+\b/,keyword:/\b(?:assert|builtins|else|if|in|inherit|let|null|or|then|with)\b/,function:/\b(?:abort|add|all|any|attrNames|attrValues|baseNameOf|compareVersions|concatLists|currentSystem|deepSeq|derivation|dirOf|div|elem(?:At)?|fetch(?:Tarball|url)|filter(?:Source)?|fromJSON|genList|getAttr|getEnv|hasAttr|hashString|head|import|intersectAttrs|is(?:Attrs|Bool|Function|Int|List|Null|String)|length|lessThan|listToAttrs|map|mul|parseDrvName|pathExists|read(?:Dir|File)|removeAttrs|replaceStrings|seq|sort|stringLength|sub(?:string)?|tail|throw|to(?:File|JSON|Path|String|XML)|trace|typeOf)\b|\bfoldl'\B/,boolean:/\b(?:false|true)\b/,operator:/[=!<>]=?|\+\+?|\|\||&&|\/\/|->?|[?@]/,punctuation:/[{}()[\].,:;]/},n.languages.nix.string.inside.interpolation.inside=n.languages.nix}wC.displayName="nsis";wC.aliases=[];function wC(n){n.languages.nsis={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|[#;].*)/,lookbehind:!0,greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:{pattern:/(^[\t ]*)(?:Abort|Add(?:BrandingImage|Size)|AdvSplash|Allow(?:RootDirInstall|SkipFiles)|AutoCloseWindow|BG(?:Font|Gradient|Image)|Banner|BrandingText|BringToFront|CRCCheck|Call(?:InstDLL)?|Caption|ChangeUI|CheckBitmap|ClearErrors|CompletedText|ComponentText|CopyFiles|Create(?:Directory|Font|ShortCut)|Delete(?:INISec|INIStr|RegKey|RegValue)?|Detail(?:Print|sButtonText)|Dialer|Dir(?:Text|Var|Verify)|EnableWindow|Enum(?:RegKey|RegValue)|Exch|Exec(?:Shell(?:Wait)?|Wait)?|ExpandEnvStrings|File(?:BufSize|Close|ErrorText|Open|Read|ReadByte|ReadUTF16LE|ReadWord|Seek|Write|WriteByte|WriteUTF16LE|WriteWord)?|Find(?:Close|First|Next|Window)|FlushINI|Get(?:CurInstType|CurrentAddress|DLLVersion(?:Local)?|DlgItem|ErrorLevel|FileTime(?:Local)?|FullPathName|Function(?:Address|End)?|InstDirError|KnownFolderPath|LabelAddress|TempFileName|WinVer)|Goto|HideWindow|Icon|If(?:Abort|Errors|FileExists|RebootFlag|RtlLanguage|ShellVarContextAll|Silent)|InitPluginsDir|InstProgressFlags|Inst(?:Type(?:GetText|SetText)?)|Install(?:ButtonText|Colors|Dir(?:RegKey)?)|Int(?:64|Ptr)?CmpU?|Int(?:64)?Fmt|Int(?:Ptr)?Op|IsWindow|Lang(?:DLL|String)|License(?:BkColor|Data|ForceSelection|LangString|Text)|LoadLanguageFile|LockWindow|Log(?:Set|Text)|Manifest(?:DPIAware|SupportedOS)|Math|MessageBox|MiscButtonText|NSISdl|Name|Nop|OutFile|PE(?:DllCharacteristics|SubsysVer)|Page(?:Callbacks)?|Pop|Push|Quit|RMDir|Read(?:EnvStr|INIStr|RegDWORD|RegStr)|Reboot|RegDLL|Rename|RequestExecutionLevel|ReserveFile|Return|SearchPath|Section(?:End|GetFlags|GetInstTypes|GetSize|GetText|Group|In|SetFlags|SetInstTypes|SetSize|SetText)?|SendMessage|Set(?:AutoClose|BrandingImage|Compress|Compressor(?:DictSize)?|CtlColors|CurInstType|DatablockOptimize|DateSave|Details(?:Print|View)|ErrorLevel|Errors|FileAttributes|Font|OutPath|Overwrite|PluginUnload|RebootFlag|RegView|ShellVarContext|Silent)|Show(?:InstDetails|UninstDetails|Window)|Silent(?:Install|UnInstall)|Sleep|SpaceTexts|Splash|StartMenu|Str(?:CmpS?|Cpy|Len)|SubCaption|System|Target|UnRegDLL|Unicode|UninstPage|Uninstall(?:ButtonText|Caption|Icon|SubCaption|Text)|UserInfo|VI(?:AddVersionKey|FileVersion|ProductVersion)|VPatch|Var|WindowIcon|Write(?:INIStr|Reg(?:Bin|DWORD|ExpandStr|MultiStr|None|Str)|Uninstaller)|XPStyle|ns(?:Dialogs|Exec))\b/m,lookbehind:!0},property:/\b(?:ARCHIVE|FILE_(?:ATTRIBUTE_ARCHIVE|ATTRIBUTE_NORMAL|ATTRIBUTE_OFFLINE|ATTRIBUTE_READONLY|ATTRIBUTE_SYSTEM|ATTRIBUTE_TEMPORARY)|HK(?:(?:CR|CU|LM)(?:32|64)?|DD|PD|U)|HKEY_(?:CLASSES_ROOT|CURRENT_CONFIG|CURRENT_USER|DYN_DATA|LOCAL_MACHINE|PERFORMANCE_DATA|USERS)|ID(?:ABORT|CANCEL|IGNORE|NO|OK|RETRY|YES)|MB_(?:ABORTRETRYIGNORE|DEFBUTTON1|DEFBUTTON2|DEFBUTTON3|DEFBUTTON4|ICONEXCLAMATION|ICONINFORMATION|ICONQUESTION|ICONSTOP|OK|OKCANCEL|RETRYCANCEL|RIGHT|RTLREADING|SETFOREGROUND|TOPMOST|USERICON|YESNO)|NORMAL|OFFLINE|READONLY|SHCTX|SHELL_CONTEXT|SYSTEM|TEMPORARY|admin|all|auto|both|colored|false|force|hide|highest|lastused|leave|listonly|none|normal|notset|off|on|open|print|show|silent|silentlog|smooth|textonly|true|user)\b/,constant:/\$\{[!\w\.:\^-]+\}|\$\([!\w\.:\^-]+\)/,variable:/\$\w[\w\.]*/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|\+\+?|<=?|>=?|==?=?|&&?|\|\|?|[?*\/~^%]/,punctuation:/[{}[\];(),.:]/,important:{pattern:/(^[\t ]*)!(?:addincludedir|addplugindir|appendfile|cd|define|delfile|echo|else|endif|error|execute|finalize|getdllversion|gettlbversion|if|ifdef|ifmacrodef|ifmacrondef|ifndef|include|insertmacro|macro|macroend|makensis|packhdr|pragma|searchparse|searchreplace|system|tempfile|undef|verbose|warning)\b/im,lookbehind:!0}}}AC.displayName="objectivec";AC.aliases=["objc"];function AC(n){n.register(no),n.languages.objectivec=n.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete n.languages.objectivec["class-name"],n.languages.objc=n.languages.objectivec}RC.displayName="ocaml";RC.aliases=[];function RC(n){n.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/}}NC.displayName="odin";NC.aliases=[];function NC(n){(function(e){var t=/\\(?:["'\\abefnrtv]|0[0-7]{2}|U[\dA-Fa-f]{6}|u[\dA-Fa-f]{4}|x[\dA-Fa-f]{2})/;e.languages.odin={comment:[{pattern:/\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:\*(?!\/)|[^*])*(?:\*\/|$))*(?:\*\/|$)/,greedy:!0},{pattern:/#![^\n\r]*/,greedy:!0},{pattern:/\/\/[^\n\r]*/,greedy:!0}],char:{pattern:/'(?:\\(?:.|[0Uux][0-9A-Fa-f]{1,6})|[^\n\r'\\])'/,greedy:!0,inside:{symbol:t}},string:[{pattern:/`[^`]*`/,greedy:!0},{pattern:/"(?:\\.|[^\n\r"\\])*"/,greedy:!0,inside:{symbol:t}}],directive:{pattern:/#\w+/,alias:"property"},number:/\b0(?:b[01_]+|d[\d_]+|h_*(?:(?:(?:[\dA-Fa-f]_*){8}){1,2}|(?:[\dA-Fa-f]_*){4})|o[0-7_]+|x[\dA-F_a-f]+|z[\dAB_ab]+)\b|(?:\b\d+(?:\.(?!\.)\d*)?|\B\.\d+)(?:[Ee][+-]?\d*)?[ijk]?(?!\w)/,discard:{pattern:/\b_\b/,alias:"keyword"},"procedure-definition":{pattern:/\b\w+(?=[ \t]*(?::\s*){2}proc\b)/,alias:"function"},keyword:/\b(?:asm|auto_cast|bit_set|break|case|cast|context|continue|defer|distinct|do|dynamic|else|enum|fallthrough|for|foreign|if|import|in|map|matrix|not_in|or_else|or_return|package|proc|return|struct|switch|transmute|typeid|union|using|when|where)\b/,"procedure-name":{pattern:/\b\w+(?=[ \t]*\()/,alias:"function"},boolean:/\b(?:false|nil|true)\b/,"constant-parameter-sign":{pattern:/\$/,alias:"important"},undefined:{pattern:/---/,alias:"operator"},arrow:{pattern:/->/,alias:"punctuation"},operator:/\+\+|--|\.\.[<=]?|(?:&~|[-!*+/=~]|[%&<>|]{1,2})=?|[?^]/,punctuation:/[(),.:;@\[\]{}]/}})(n)}CC.displayName="opencl";CC.aliases=[];function CC(n){n.register(no),(function(e){e.languages.opencl=e.languages.extend("c",{keyword:/\b(?:(?:__)?(?:constant|global|kernel|local|private|read_only|read_write|write_only)|__attribute__|auto|(?:bool|u?(?:char|int|long|short)|half|quad)(?:2|3|4|8|16)?|break|case|complex|const|continue|(?:double|float)(?:16(?:x(?:1|2|4|8|16))?|1x(?:1|2|4|8|16)|2(?:x(?:1|2|4|8|16))?|3|4(?:x(?:1|2|4|8|16))?|8(?:x(?:1|2|4|8|16))?)?|default|do|else|enum|extern|for|goto|if|imaginary|inline|packed|pipe|register|restrict|return|signed|sizeof|static|struct|switch|typedef|uniform|union|unsigned|void|volatile|while)\b/,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[fuhl]{0,4}/i,boolean:/\b(?:false|true)\b/,"constant-opencl-kernel":{pattern:/\b(?:CHAR_(?:BIT|MAX|MIN)|CLK_(?:ADDRESS_(?:CLAMP(?:_TO_EDGE)?|NONE|REPEAT)|FILTER_(?:LINEAR|NEAREST)|(?:GLOBAL|LOCAL)_MEM_FENCE|NORMALIZED_COORDS_(?:FALSE|TRUE))|CL_(?:BGRA|(?:HALF_)?FLOAT|INTENSITY|LUMINANCE|A?R?G?B?[Ax]?|(?:(?:UN)?SIGNED|[US]NORM)_(?:INT(?:8|16|32))|UNORM_(?:INT_101010|SHORT_(?:555|565)))|(?:DBL|FLT|HALF)_(?:DIG|EPSILON|(?:MAX|MIN)(?:(?:_10)?_EXP)?|MANT_DIG)|FLT_RADIX|HUGE_VALF?|(?:INT|LONG|SCHAR|SHRT)_(?:MAX|MIN)|INFINITY|MAXFLOAT|M_(?:[12]_PI|2_SQRTPI|E|LN(?:2|10)|LOG(?:2|10)E?|PI(?:_[24])?|SQRT(?:1_2|2))(?:_F|_H)?|NAN|(?:UCHAR|UINT|ULONG|USHRT)_MAX)\b/,alias:"constant"}}),e.languages.insertBefore("opencl","class-name",{"builtin-type":{pattern:/\b(?:_cl_(?:command_queue|context|device_id|event|kernel|mem|platform_id|program|sampler)|cl_(?:image_format|mem_fence_flags)|clk_event_t|event_t|image(?:1d_(?:array_|buffer_)?t|2d_(?:array_(?:depth_|msaa_depth_|msaa_)?|depth_|msaa_depth_|msaa_)?t|3d_t)|intptr_t|ndrange_t|ptrdiff_t|queue_t|reserve_id_t|sampler_t|size_t|uintptr_t)\b/,alias:"keyword"}});var t={"type-opencl-host":{pattern:/\b(?:cl_(?:GLenum|GLint|GLuin|addressing_mode|bitfield|bool|buffer_create_type|build_status|channel_(?:order|type)|(?:u?(?:char|int|long|short)|double|float)(?:2|3|4|8|16)?|command_(?:queue(?:_info|_properties)?|type)|context(?:_info|_properties)?|device_(?:exec_capabilities|fp_config|id|info|local_mem_type|mem_cache_type|type)|(?:event|sampler)(?:_info)?|filter_mode|half|image_info|kernel(?:_info|_work_group_info)?|map_flags|mem(?:_flags|_info|_object_type)?|platform_(?:id|info)|profiling_info|program(?:_build_info|_info)?))\b/,alias:"keyword"},"boolean-opencl-host":{pattern:/\bCL_(?:FALSE|TRUE)\b/,alias:"boolean"},"constant-opencl-host":{pattern:/\bCL_(?:A|ABGR|ADDRESS_(?:CLAMP(?:_TO_EDGE)?|MIRRORED_REPEAT|NONE|REPEAT)|ARGB|BGRA|BLOCKING|BUFFER_CREATE_TYPE_REGION|BUILD_(?:ERROR|IN_PROGRESS|NONE|PROGRAM_FAILURE|SUCCESS)|COMMAND_(?:ACQUIRE_GL_OBJECTS|BARRIER|COPY_(?:BUFFER(?:_RECT|_TO_IMAGE)?|IMAGE(?:_TO_BUFFER)?)|FILL_(?:BUFFER|IMAGE)|MAP(?:_BUFFER|_IMAGE)|MARKER|MIGRATE(?:_SVM)?_MEM_OBJECTS|NATIVE_KERNEL|NDRANGE_KERNEL|READ_(?:BUFFER(?:_RECT)?|IMAGE)|RELEASE_GL_OBJECTS|SVM_(?:FREE|MAP|MEMCPY|MEMFILL|UNMAP)|TASK|UNMAP_MEM_OBJECT|USER|WRITE_(?:BUFFER(?:_RECT)?|IMAGE))|COMPILER_NOT_AVAILABLE|COMPILE_PROGRAM_FAILURE|COMPLETE|CONTEXT_(?:DEVICES|INTEROP_USER_SYNC|NUM_DEVICES|PLATFORM|PROPERTIES|REFERENCE_COUNT)|DEPTH(?:_STENCIL)?|DEVICE_(?:ADDRESS_BITS|AFFINITY_DOMAIN_(?:L[1-4]_CACHE|NEXT_PARTITIONABLE|NUMA)|AVAILABLE|BUILT_IN_KERNELS|COMPILER_AVAILABLE|DOUBLE_FP_CONFIG|ENDIAN_LITTLE|ERROR_CORRECTION_SUPPORT|EXECUTION_CAPABILITIES|EXTENSIONS|GLOBAL_(?:MEM_(?:CACHELINE_SIZE|CACHE_SIZE|CACHE_TYPE|SIZE)|VARIABLE_PREFERRED_TOTAL_SIZE)|HOST_UNIFIED_MEMORY|IL_VERSION|IMAGE(?:2D_MAX_(?:HEIGHT|WIDTH)|3D_MAX_(?:DEPTH|HEIGHT|WIDTH)|_BASE_ADDRESS_ALIGNMENT|_MAX_ARRAY_SIZE|_MAX_BUFFER_SIZE|_PITCH_ALIGNMENT|_SUPPORT)|LINKER_AVAILABLE|LOCAL_MEM_SIZE|LOCAL_MEM_TYPE|MAX_(?:CLOCK_FREQUENCY|COMPUTE_UNITS|CONSTANT_ARGS|CONSTANT_BUFFER_SIZE|GLOBAL_VARIABLE_SIZE|MEM_ALLOC_SIZE|NUM_SUB_GROUPS|ON_DEVICE_(?:EVENTS|QUEUES)|PARAMETER_SIZE|PIPE_ARGS|READ_IMAGE_ARGS|READ_WRITE_IMAGE_ARGS|SAMPLERS|WORK_GROUP_SIZE|WORK_ITEM_DIMENSIONS|WORK_ITEM_SIZES|WRITE_IMAGE_ARGS)|MEM_BASE_ADDR_ALIGN|MIN_DATA_TYPE_ALIGN_SIZE|NAME|NATIVE_VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT)|NOT_(?:AVAILABLE|FOUND)|OPENCL_C_VERSION|PARENT_DEVICE|PARTITION_(?:AFFINITY_DOMAIN|BY_AFFINITY_DOMAIN|BY_COUNTS|BY_COUNTS_LIST_END|EQUALLY|FAILED|MAX_SUB_DEVICES|PROPERTIES|TYPE)|PIPE_MAX_(?:ACTIVE_RESERVATIONS|PACKET_SIZE)|PLATFORM|PREFERRED_(?:GLOBAL_ATOMIC_ALIGNMENT|INTEROP_USER_SYNC|LOCAL_ATOMIC_ALIGNMENT|PLATFORM_ATOMIC_ALIGNMENT|VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT))|PRINTF_BUFFER_SIZE|PROFILE|PROFILING_TIMER_RESOLUTION|QUEUE_(?:ON_(?:DEVICE_(?:MAX_SIZE|PREFERRED_SIZE|PROPERTIES)|HOST_PROPERTIES)|PROPERTIES)|REFERENCE_COUNT|SINGLE_FP_CONFIG|SUB_GROUP_INDEPENDENT_FORWARD_PROGRESS|SVM_(?:ATOMICS|CAPABILITIES|COARSE_GRAIN_BUFFER|FINE_GRAIN_BUFFER|FINE_GRAIN_SYSTEM)|TYPE(?:_ACCELERATOR|_ALL|_CPU|_CUSTOM|_DEFAULT|_GPU)?|VENDOR(?:_ID)?|VERSION)|DRIVER_VERSION|EVENT_(?:COMMAND_(?:EXECUTION_STATUS|QUEUE|TYPE)|CONTEXT|REFERENCE_COUNT)|EXEC_(?:KERNEL|NATIVE_KERNEL|STATUS_ERROR_FOR_EVENTS_IN_WAIT_LIST)|FILTER_(?:LINEAR|NEAREST)|FLOAT|FP_(?:CORRECTLY_ROUNDED_DIVIDE_SQRT|DENORM|FMA|INF_NAN|ROUND_TO_INF|ROUND_TO_NEAREST|ROUND_TO_ZERO|SOFT_FLOAT)|GLOBAL|HALF_FLOAT|IMAGE_(?:ARRAY_SIZE|BUFFER|DEPTH|ELEMENT_SIZE|FORMAT|FORMAT_MISMATCH|FORMAT_NOT_SUPPORTED|HEIGHT|NUM_MIP_LEVELS|NUM_SAMPLES|ROW_PITCH|SLICE_PITCH|WIDTH)|INTENSITY|INVALID_(?:ARG_INDEX|ARG_SIZE|ARG_VALUE|BINARY|BUFFER_SIZE|BUILD_OPTIONS|COMMAND_QUEUE|COMPILER_OPTIONS|CONTEXT|DEVICE|DEVICE_PARTITION_COUNT|DEVICE_QUEUE|DEVICE_TYPE|EVENT|EVENT_WAIT_LIST|GLOBAL_OFFSET|GLOBAL_WORK_SIZE|GL_OBJECT|HOST_PTR|IMAGE_DESCRIPTOR|IMAGE_FORMAT_DESCRIPTOR|IMAGE_SIZE|KERNEL|KERNEL_ARGS|KERNEL_DEFINITION|KERNEL_NAME|LINKER_OPTIONS|MEM_OBJECT|MIP_LEVEL|OPERATION|PIPE_SIZE|PLATFORM|PROGRAM|PROGRAM_EXECUTABLE|PROPERTY|QUEUE_PROPERTIES|SAMPLER|VALUE|WORK_DIMENSION|WORK_GROUP_SIZE|WORK_ITEM_SIZE)|KERNEL_(?:ARG_(?:ACCESS_(?:NONE|QUALIFIER|READ_ONLY|READ_WRITE|WRITE_ONLY)|ADDRESS_(?:CONSTANT|GLOBAL|LOCAL|PRIVATE|QUALIFIER)|INFO_NOT_AVAILABLE|NAME|TYPE_(?:CONST|NAME|NONE|PIPE|QUALIFIER|RESTRICT|VOLATILE))|ATTRIBUTES|COMPILE_NUM_SUB_GROUPS|COMPILE_WORK_GROUP_SIZE|CONTEXT|EXEC_INFO_SVM_FINE_GRAIN_SYSTEM|EXEC_INFO_SVM_PTRS|FUNCTION_NAME|GLOBAL_WORK_SIZE|LOCAL_MEM_SIZE|LOCAL_SIZE_FOR_SUB_GROUP_COUNT|MAX_NUM_SUB_GROUPS|MAX_SUB_GROUP_SIZE_FOR_NDRANGE|NUM_ARGS|PREFERRED_WORK_GROUP_SIZE_MULTIPLE|PRIVATE_MEM_SIZE|PROGRAM|REFERENCE_COUNT|SUB_GROUP_COUNT_FOR_NDRANGE|WORK_GROUP_SIZE)|LINKER_NOT_AVAILABLE|LINK_PROGRAM_FAILURE|LOCAL|LUMINANCE|MAP_(?:FAILURE|READ|WRITE|WRITE_INVALIDATE_REGION)|MEM_(?:ALLOC_HOST_PTR|ASSOCIATED_MEMOBJECT|CONTEXT|COPY_HOST_PTR|COPY_OVERLAP|FLAGS|HOST_NO_ACCESS|HOST_PTR|HOST_READ_ONLY|HOST_WRITE_ONLY|KERNEL_READ_AND_WRITE|MAP_COUNT|OBJECT_(?:ALLOCATION_FAILURE|BUFFER|IMAGE1D|IMAGE1D_ARRAY|IMAGE1D_BUFFER|IMAGE2D|IMAGE2D_ARRAY|IMAGE3D|PIPE)|OFFSET|READ_ONLY|READ_WRITE|REFERENCE_COUNT|SIZE|SVM_ATOMICS|SVM_FINE_GRAIN_BUFFER|TYPE|USES_SVM_POINTER|USE_HOST_PTR|WRITE_ONLY)|MIGRATE_MEM_OBJECT_(?:CONTENT_UNDEFINED|HOST)|MISALIGNED_SUB_BUFFER_OFFSET|NONE|NON_BLOCKING|OUT_OF_(?:HOST_MEMORY|RESOURCES)|PIPE_(?:MAX_PACKETS|PACKET_SIZE)|PLATFORM_(?:EXTENSIONS|HOST_TIMER_RESOLUTION|NAME|PROFILE|VENDOR|VERSION)|PROFILING_(?:COMMAND_(?:COMPLETE|END|QUEUED|START|SUBMIT)|INFO_NOT_AVAILABLE)|PROGRAM_(?:BINARIES|BINARY_SIZES|BINARY_TYPE(?:_COMPILED_OBJECT|_EXECUTABLE|_LIBRARY|_NONE)?|BUILD_(?:GLOBAL_VARIABLE_TOTAL_SIZE|LOG|OPTIONS|STATUS)|CONTEXT|DEVICES|IL|KERNEL_NAMES|NUM_DEVICES|NUM_KERNELS|REFERENCE_COUNT|SOURCE)|QUEUED|QUEUE_(?:CONTEXT|DEVICE|DEVICE_DEFAULT|ON_DEVICE|ON_DEVICE_DEFAULT|OUT_OF_ORDER_EXEC_MODE_ENABLE|PROFILING_ENABLE|PROPERTIES|REFERENCE_COUNT|SIZE)|R|RA|READ_(?:ONLY|WRITE)_CACHE|RG|RGB|RGBA|RGBx|RGx|RUNNING|Rx|SAMPLER_(?:ADDRESSING_MODE|CONTEXT|FILTER_MODE|LOD_MAX|LOD_MIN|MIP_FILTER_MODE|NORMALIZED_COORDS|REFERENCE_COUNT)|(?:UN)?SIGNED_INT(?:8|16|32)|SNORM_INT(?:8|16)|SUBMITTED|SUCCESS|UNORM_INT(?:8|16|24|_101010|_101010_2)|UNORM_SHORT_(?:555|565)|VERSION_(?:1_0|1_1|1_2|2_0|2_1)|sBGRA|sRGB|sRGBA|sRGBx)\b/,alias:"constant"},"function-opencl-host":{pattern:/\bcl(?:BuildProgram|CloneKernel|CompileProgram|Create(?:Buffer|CommandQueue(?:WithProperties)?|Context|ContextFromType|Image|Image2D|Image3D|Kernel|KernelsInProgram|Pipe|ProgramWith(?:Binary|BuiltInKernels|IL|Source)|Sampler|SamplerWithProperties|SubBuffer|SubDevices|UserEvent)|Enqueue(?:(?:Barrier|Marker)(?:WithWaitList)?|Copy(?:Buffer(?:Rect|ToImage)?|Image(?:ToBuffer)?)|(?:Fill|Map)(?:Buffer|Image)|MigrateMemObjects|NDRangeKernel|NativeKernel|(?:Read|Write)(?:Buffer(?:Rect)?|Image)|SVM(?:Free|Map|MemFill|Memcpy|MigrateMem|Unmap)|Task|UnmapMemObject|WaitForEvents)|Finish|Flush|Get(?:CommandQueueInfo|ContextInfo|Device(?:AndHostTimer|IDs|Info)|Event(?:Profiling)?Info|ExtensionFunctionAddress(?:ForPlatform)?|HostTimer|ImageInfo|Kernel(?:ArgInfo|Info|SubGroupInfo|WorkGroupInfo)|MemObjectInfo|PipeInfo|Platform(?:IDs|Info)|Program(?:Build)?Info|SamplerInfo|SupportedImageFormats)|LinkProgram|(?:Release|Retain)(?:CommandQueue|Context|Device|Event|Kernel|MemObject|Program|Sampler)|SVM(?:Alloc|Free)|Set(?:CommandQueueProperty|DefaultDeviceCommandQueue|EventCallback|Kernel|Kernel(?:Arg(?:SVMPointer)?|ExecInfo)|MemObjectDestructorCallback|UserEventStatus)|Unload(?:Platform)?Compiler|WaitForEvents)\b/,alias:"function"}};e.languages.insertBefore("c","keyword",t),e.languages.cpp&&(t["type-opencl-host-cpp"]={pattern:/\b(?:Buffer|BufferGL|BufferRenderGL|CommandQueue|Context|Device|DeviceCommandQueue|EnqueueArgs|Event|Image|Image1D|Image1DArray|Image1DBuffer|Image2D|Image2DArray|Image2DGL|Image3D|Image3DGL|ImageFormat|ImageGL|Kernel|KernelFunctor|LocalSpaceArg|Memory|NDRange|Pipe|Platform|Program|SVMAllocator|SVMTraitAtomic|SVMTraitCoarse|SVMTraitFine|SVMTraitReadOnly|SVMTraitReadWrite|SVMTraitWriteOnly|Sampler|UserEvent)\b/,alias:"keyword"},e.languages.insertBefore("cpp","keyword",t))})(n)}MC.displayName="openqasm";MC.aliases=["qasm"];function MC(n){n.languages.openqasm={comment:/\/\*[\s\S]*?\*\/|\/\/.*/,string:{pattern:/"[^"\r\n\t]*"|'[^'\r\n\t]*'/,greedy:!0},keyword:/\b(?:CX|OPENQASM|U|barrier|boxas|boxto|break|const|continue|ctrl|def|defcal|defcalgrammar|delay|else|end|for|gate|gphase|if|in|include|inv|kernel|lengthof|let|measure|pow|reset|return|rotary|stretchinf|while)\b|#pragma\b/,"class-name":/\b(?:angle|bit|bool|creg|fixed|float|int|length|qreg|qubit|stretch|uint)\b/,function:/\b(?:cos|exp|ln|popcount|rotl|rotr|sin|sqrt|tan)\b(?=\s*\()/,constant:/\b(?:euler|pi|tau)\b|||/,number:{pattern:/(^|[^.\w$])(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?(?:dt|ns|us|s|ms|s)?/i,lookbehind:!0},operator:/->|>>=?|<<=?|&&|\|\||\+\+|--|[!=<>&|~^+\-*/%]=?|@/,punctuation:/[(){}\[\];,:.]/},n.languages.qasm=n.languages.openqasm}IC.displayName="oz";IC.aliases=[];function IC(n){n.languages.oz={comment:{pattern:/\/\*[\s\S]*?\*\/|%.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\[\s\S])*"/,greedy:!0},atom:{pattern:/'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,alias:"builtin"},keyword:/\$|\[\]|\b(?:_|at|attr|case|catch|choice|class|cond|declare|define|dis|else(?:case|if)?|end|export|fail|false|feat|finally|from|fun|functor|if|import|in|local|lock|meth|nil|not|of|or|prepare|proc|prop|raise|require|self|skip|then|thread|true|try|unit)\b/,function:[/\b[a-z][A-Za-z\d]*(?=\()/,{pattern:/(\{)[A-Z][A-Za-z\d]*\b/,lookbehind:!0}],number:/\b(?:0[bx][\da-f]+|\d+(?:\.\d*)?(?:e~?\d+)?)\b|&(?:[^\\]|\\(?:\d{3}|.))/i,variable:/`(?:[^`\\]|\\.)+`/,"attr-name":/\b\w+(?=[ \t]*:(?![:=]))/,operator:/:(?:=|::?)|<[-:=]?|=(?:=|<?:?)|>=?:?|\\=:?|!!?|[|#+\-*\/,~^@]|\b(?:andthen|div|mod|orelse)\b/,punctuation:/[\[\](){}.:;?]/}}kC.displayName="parigp";kC.aliases=[];function kC(n){n.languages.parigp={comment:/\/\*[\s\S]*?\*\/|\\\\.*/,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"/,greedy:!0},keyword:(function(){var e=["breakpoint","break","dbg_down","dbg_err","dbg_up","dbg_x","forcomposite","fordiv","forell","forpart","forprime","forstep","forsubgroup","forvec","for","iferr","if","local","my","next","return","until","while"];return e=e.map(function(t){return t.split("").join(" *")}).join("|"),RegExp("\\b(?:"+e+")\\b")})(),function:/\b\w(?:[\w ]*\w)?(?= *\()/,number:{pattern:/((?:\. *\. *)?)(?:\b\d(?: *\d)*(?: *(?!\. *\.)\.(?: *\d)*)?|\. *\d(?: *\d)*)(?: *e *(?:[+-] *)?\d(?: *\d)*)?/i,lookbehind:!0},operator:/\. *\.|[*\/!](?: *=)?|%(?: *=|(?: *#)?(?: *')*)?|\+(?: *[+=])?|-(?: *[-=>])?|<(?: *>|(?: *<)?(?: *=)?)?|>(?: *>)?(?: *=)?|=(?: *=){0,2}|\\(?: *\/)?(?: *=)?|&(?: *&)?|\| *\||['#~^]/,punctuation:/[\[\]{}().,:;|]/}}LC.displayName="parser";LC.aliases=[];function LC(n){n.register(ni),(function(e){var t=e.languages.parser=e.languages.extend("markup",{keyword:{pattern:/(^|[^^])(?:\^(?:case|eval|for|if|switch|throw)\b|@(?:BASE|CLASS|GET(?:_DEFAULT)?|OPTIONS|SET_DEFAULT|USE)\b)/,lookbehind:!0},variable:{pattern:/(^|[^^])\B\$(?:\w+|(?=[.{]))(?:(?:\.|::?)\w+)*(?:\.|::?)?/,lookbehind:!0,inside:{punctuation:/\.|:+/}},function:{pattern:/(^|[^^])\B[@^]\w+(?:(?:\.|::?)\w+)*(?:\.|::?)?/,lookbehind:!0,inside:{keyword:{pattern:/(^@)(?:GET_|SET_)/,lookbehind:!0},punctuation:/\.|:+/}},escape:{pattern:/\^(?:[$^;@()\[\]{}"':]|#[a-f\d]*)/i,alias:"builtin"},punctuation:/[\[\](){};]/});t=e.languages.insertBefore("parser","keyword",{"parser-comment":{pattern:/(\s)#.*/,lookbehind:!0,alias:"comment"},expression:{pattern:/(^|[^^])\((?:[^()]|\((?:[^()]|\((?:[^()])*\))*\))*\)/,greedy:!0,lookbehind:!0,inside:{string:{pattern:/(^|[^^])(["'])(?:(?!\2)[^^]|\^[\s\S])*\2/,lookbehind:!0},keyword:t.keyword,variable:t.variable,function:t.function,boolean:/\b(?:false|true)\b/,number:/\b(?:0x[a-f\d]+|\d+(?:\.\d*)?(?:e[+-]?\d+)?)\b/i,escape:t.escape,operator:/[~+*\/\\%]|!(?:\|\|?|=)?|&&?|\|\|?|==|<[<=]?|>[>=]?|-[fd]?|\b(?:def|eq|ge|gt|in|is|le|lt|ne)\b/,punctuation:t.punctuation}}}),e.languages.insertBefore("inside","punctuation",{expression:t.expression,keyword:t.keyword,variable:t.variable,function:t.function,escape:t.escape,"parser-punctuation":{pattern:t.punctuation,alias:"punctuation"}},t.tag.inside["attr-value"])})(n)}DC.displayName="pascal";DC.aliases=["objectpascal"];function DC(n){n.languages.pascal={directive:{pattern:/\{\$[\s\S]*?\}/,greedy:!0,alias:["marco","property"]},comment:{pattern:/\(\*[\s\S]*?\*\)|\{[\s\S]*?\}|\/\/.*/,greedy:!0},string:{pattern:/(?:'(?:''|[^'\r\n])*'(?!')|#[&$%]?[a-f\d]+)+|\^[a-z]/i,greedy:!0},asm:{pattern:/(\basm\b)[\s\S]+?(?=\bend\s*[;[])/i,lookbehind:!0,greedy:!0,inside:null},keyword:[{pattern:/(^|[^&])\b(?:absolute|array|asm|begin|case|const|constructor|destructor|do|downto|else|end|file|for|function|goto|if|implementation|inherited|inline|interface|label|nil|object|of|operator|packed|procedure|program|record|reintroduce|repeat|self|set|string|then|to|type|unit|until|uses|var|while|with)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:dispose|exit|false|new|true)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:class|dispinterface|except|exports|finalization|finally|initialization|inline|library|on|out|packed|property|raise|resourcestring|threadvar|try)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:absolute|abstract|alias|assembler|bitpacked|break|cdecl|continue|cppdecl|cvar|default|deprecated|dynamic|enumerator|experimental|export|external|far|far16|forward|generic|helper|implements|index|interrupt|iochecks|local|message|name|near|nodefault|noreturn|nostackframe|oldfpccall|otherwise|overload|override|pascal|platform|private|protected|public|published|read|register|reintroduce|result|safecall|saveregisters|softfloat|specialize|static|stdcall|stored|strict|unaligned|unimplemented|varargs|virtual|write)\b/i,lookbehind:!0}],number:[/(?:[&%]\d+|\$[a-f\d]+)/i,/\b\d+(?:\.\d+)?(?:e[+-]?\d+)?/i],operator:[/\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=]/,{pattern:/(^|[^&])\b(?:and|as|div|exclude|in|include|is|mod|not|or|shl|shr|xor)\b/,lookbehind:!0}],punctuation:/\(\.|\.\)|[()\[\]:;,.]/},n.languages.pascal.asm.inside=n.languages.extend("pascal",{asm:void 0,keyword:void 0,operator:void 0}),n.languages.objectpascal=n.languages.pascal}OC.displayName="pascaligo";OC.aliases=[];function OC(n){(function(e){var t=/\((?:[^()]|\((?:[^()]|\([^()]*\))*\))*\)/.source,r=/(?:\b\w+(?:<braces>)?|<braces>)/.source.replace(/<braces>/g,function(){return t}),i=e.languages.pascaligo={comment:/\(\*[\s\S]+?\*\)|\/\/.*/,string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1|\^[a-z]/i,greedy:!0},"class-name":[{pattern:RegExp(/(\btype\s+\w+\s+is\s+)<type>/.source.replace(/<type>/g,function(){return r}),"i"),lookbehind:!0,inside:null},{pattern:RegExp(/<type>(?=\s+is\b)/.source.replace(/<type>/g,function(){return r}),"i"),inside:null},{pattern:RegExp(/(:\s*)<type>/.source.replace(/<type>/g,function(){return r})),lookbehind:!0,inside:null}],keyword:{pattern:/(^|[^&])\b(?:begin|block|case|const|else|end|fail|for|from|function|if|is|nil|of|remove|return|skip|then|type|var|while|with)\b/i,lookbehind:!0},boolean:{pattern:/(^|[^&])\b(?:False|True)\b/i,lookbehind:!0},builtin:{pattern:/(^|[^&])\b(?:bool|int|list|map|nat|record|string|unit)\b/i,lookbehind:!0},function:/\b\w+(?=\s*\()/,number:[/%[01]+|&[0-7]+|\$[a-f\d]+/i,/\b\d+(?:\.\d+)?(?:e[+-]?\d+)?(?:mtz|n)?/i],operator:/->|=\/=|\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=|]|\b(?:and|mod|or)\b/,punctuation:/\(\.|\.\)|[()\[\]:;,.{}]/},s=["comment","keyword","builtin","operator","punctuation"].reduce(function(a,o){return a[o]=i[o],a},{});i["class-name"].forEach(function(a){a.inside=s})})(n)}PC.displayName="psl";PC.aliases=[];function PC(n){n.languages.psl={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,inside:{symbol:/\\[ntrbA-Z"\\]/}},"heredoc-string":{pattern:/<<<([a-zA-Z_]\w*)[\r\n](?:.*[\r\n])*?\1\b/,alias:"string",greedy:!0},keyword:/\b(?:__multi|__single|case|default|do|else|elsif|exit|export|for|foreach|function|if|last|line|local|next|requires|return|switch|until|while|word)\b/,constant:/\b(?:ALARM|CHART_ADD_GRAPH|CHART_DELETE_GRAPH|CHART_DESTROY|CHART_LOAD|CHART_PRINT|EOF|OFFLINE|OK|PSL_PROF_LOG|R_CHECK_HORIZ|R_CHECK_VERT|R_CLICKER|R_COLUMN|R_FRAME|R_ICON|R_LABEL|R_LABEL_CENTER|R_LIST_MULTIPLE|R_LIST_MULTIPLE_ND|R_LIST_SINGLE|R_LIST_SINGLE_ND|R_MENU|R_POPUP|R_POPUP_SCROLLED|R_RADIO_HORIZ|R_RADIO_VERT|R_ROW|R_SCALE_HORIZ|R_SCALE_VERT|R_SEP_HORIZ|R_SEP_VERT|R_SPINNER|R_TEXT_FIELD|R_TEXT_FIELD_LABEL|R_TOGGLE|TRIM_LEADING|TRIM_LEADING_AND_TRAILING|TRIM_REDUNDANT|TRIM_TRAILING|VOID|WARN)\b/,boolean:/\b(?:FALSE|False|NO|No|TRUE|True|YES|Yes|false|no|true|yes)\b/,variable:/\b(?:PslDebug|errno|exit_status)\b/,builtin:{pattern:/\b(?:PslExecute|PslFunctionCall|PslFunctionExists|PslSetOptions|_snmp_debug|acos|add_diary|annotate|annotate_get|ascii_to_ebcdic|asctime|asin|atan|atexit|batch_set|blackout|cat|ceil|chan_exists|change_state|close|code_cvt|cond_signal|cond_wait|console_type|convert_base|convert_date|convert_locale_date|cos|cosh|create|date|dcget_text|destroy|destroy_lock|dget_text|difference|dump_hist|ebcdic_to_ascii|encrypt|event_archive|event_catalog_get|event_check|event_query|event_range_manage|event_range_query|event_report|event_schedule|event_trigger|event_trigger2|execute|exists|exp|fabs|file|floor|fmod|fopen|fseek|ftell|full_discovery|get|get_chan_info|get_ranges|get_text|get_vars|getenv|gethostinfo|getpid|getpname|grep|history|history_get_retention|in_transition|index|int|internal|intersection|is_var|isnumber|join|kill|length|lines|lock|lock_info|log|log10|loge|matchline|msg_check|msg_get_format|msg_get_severity|msg_printf|msg_sprintf|ntharg|nthargf|nthline|nthlinef|num_bytes|num_consoles|pconfig|popen|poplines|pow|print|printf|proc_exists|process|random|read|readln|refresh_parameters|remote_check|remote_close|remote_event_query|remote_event_trigger|remote_file_send|remote_open|remove|replace|rindex|sec_check_priv|sec_store_get|sec_store_set|set|set_alarm_ranges|set_locale|share|sin|sinh|sleep|snmp_agent_config|snmp_agent_start|snmp_agent_stop|snmp_close|snmp_config|snmp_get|snmp_get_next|snmp_h_get|snmp_h_get_next|snmp_h_set|snmp_open|snmp_set|snmp_trap_ignore|snmp_trap_listen|snmp_trap_raise_std_trap|snmp_trap_receive|snmp_trap_register_im|snmp_trap_send|snmp_walk|sopen|sort|splitline|sprintf|sqrt|srandom|str_repeat|strcasecmp|subset|substr|system|tail|tan|tanh|text_domain|time|tmpnam|tolower|toupper|trace_psl_process|trim|union|unique|unlock|unset|va_arg|va_start|write)\b/,alias:"builtin-function"},"foreach-variable":{pattern:/(\bforeach\s+(?:(?:\w+\b|"(?:\\.|[^\\"])*")\s+){0,2})[_a-zA-Z]\w*(?=\s*\()/,lookbehind:!0,greedy:!0},function:/\b[_a-z]\w*\b(?=\s*\()/i,number:/\b(?:0x[0-9a-f]+|\d+(?:\.\d+)?)\b/i,operator:/--|\+\+|&&=?|\|\|=?|<<=?|>>=?|[=!]~|[-+*/%&|^!=<>]=?|\.|[:?]/,punctuation:/[(){}\[\];,]/}}FC.displayName="pcaxis";FC.aliases=["px"];function FC(n){n.languages.pcaxis={string:/"[^"]*"/,keyword:{pattern:/((?:^|;)\s*)[-A-Z\d]+(?:\s*\[[-\w]+\])?(?:\s*\("[^"]*"(?:,\s*"[^"]*")*\))?(?=\s*=)/,lookbehind:!0,greedy:!0,inside:{keyword:/^[-A-Z\d]+/,language:{pattern:/^(\s*)\[[-\w]+\]/,lookbehind:!0,inside:{punctuation:/^\[|\]$/,property:/[-\w]+/}},"sub-key":{pattern:/^(\s*)\S[\s\S]*/,lookbehind:!0,inside:{parameter:{pattern:/"[^"]*"/,alias:"property"},punctuation:/^\(|\)$|,/}}}},operator:/=/,tlist:{pattern:/TLIST\s*\(\s*\w+(?:(?:\s*,\s*"[^"]*")+|\s*,\s*"[^"]*"-"[^"]*")?\s*\)/,greedy:!0,inside:{function:/^TLIST/,property:{pattern:/^(\s*\(\s*)\w+/,lookbehind:!0},string:/"[^"]*"/,punctuation:/[(),]/,operator:/-/}},punctuation:/[;,]/,number:{pattern:/(^|\s)\d+(?:\.\d+)?(?!\S)/,lookbehind:!0},boolean:/NO|YES/},n.languages.px=n.languages.pcaxis}UC.displayName="peoplecode";UC.aliases=["pcode"];function UC(n){n.languages.peoplecode={comment:RegExp([/\/\*[\s\S]*?\*\//.source,/\bREM[^;]*;/.source,/<\*(?:[^<*]|\*(?!>)|<(?!\*)|<\*(?:(?!\*>)[\s\S])*\*>)*\*>/.source,/\/\+[\s\S]*?\+\//.source].join("|")),string:{pattern:/'(?:''|[^'\r\n])*'(?!')|"(?:""|[^"\r\n])*"(?!")/,greedy:!0},variable:/%\w+/,"function-definition":{pattern:/((?:^|[^\w-])(?:function|method)\s+)\w+/i,lookbehind:!0,alias:"function"},"class-name":{pattern:/((?:^|[^-\w])(?:as|catch|class|component|create|extends|global|implements|instance|local|of|property|returns)\s+)\w+(?::\w+)*/i,lookbehind:!0,inside:{punctuation:/:/}},keyword:/\b(?:abstract|alias|as|catch|class|component|constant|create|declare|else|end-(?:class|evaluate|for|function|get|if|method|set|try|while)|evaluate|extends|for|function|get|global|if|implements|import|instance|library|local|method|null|of|out|peopleCode|private|program|property|protected|readonly|ref|repeat|returns?|set|step|then|throw|to|try|until|value|when(?:-other)?|while)\b/i,"operator-keyword":{pattern:/\b(?:and|not|or)\b/i,alias:"operator"},function:/[_a-z]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/i,number:/\b\d+(?:\.\d+)?\b/,operator:/<>|[<>]=?|!=|\*\*|[-+*/|=@]/,punctuation:/[:.;,()[\]]/},n.languages.pcode=n.languages.peoplecode}BC.displayName="perl";BC.aliases=[];function BC(n){(function(e){var t=/(?:\((?:[^()\\]|\\[\s\S])*\)|\{(?:[^{}\\]|\\[\s\S])*\}|\[(?:[^[\]\\]|\\[\s\S])*\]|<(?:[^<>\\]|\\[\s\S])*>)/.source;e.languages.perl={comment:[{pattern:/(^\s*)=\w[\s\S]*?=cut.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],string:[{pattern:RegExp(/\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,t].join("|")+")"),greedy:!0},{pattern:/("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/'(?:[^'\\\r\n]|\\.)*'/,greedy:!0}],regex:[{pattern:RegExp(/\b(?:m|qr)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,t].join("|")+")"+/[msixpodualngc]*/.source),greedy:!0},{pattern:RegExp(/(^|[^-])\b(?:s|tr|y)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,/([a-zA-Z0-9])(?:(?!\3)[^\\]|\\[\s\S])*\3(?:(?!\3)[^\\]|\\[\s\S])*\3/.source,t+/\s*/.source+t].join("|")+")"+/[msixpodualngcer]*/.source),lookbehind:!0,greedy:!0},{pattern:/\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\b))/,greedy:!0}],variable:[/[&*$@%]\{\^[A-Z]+\}/,/[&*$@%]\^[A-Z_]/,/[&*$@%]#?(?=\{)/,/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+(?![\w$]))+(?:::)*/,/[&*$@%]\d+/,/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/],filehandle:{pattern:/<(?![<=])\S*?>|\b_\b/,alias:"symbol"},"v-string":{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/(\bsub[ \t]+)\w+/,lookbehind:!0},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\b/,punctuation:/[{}[\];(),:]/}})(n)}zC.displayName="phpdoc";zC.aliases=[];function zC(n){n.register(Bh),n.register(Uh),(function(e){var t=/(?:\b[a-zA-Z]\w*|[|\\[\]])+/.source;e.languages.phpdoc=e.languages.extend("javadoclike",{parameter:{pattern:RegExp("(@(?:global|param|property(?:-read|-write)?|var)\\s+(?:"+t+"\\s+)?)\\$\\w+"),lookbehind:!0}}),e.languages.insertBefore("phpdoc","keyword",{"class-name":[{pattern:RegExp("(@(?:global|package|param|property(?:-read|-write)?|return|subpackage|throws|var)\\s+)"+t),lookbehind:!0,inside:{keyword:/\b(?:array|bool|boolean|callback|double|false|float|int|integer|mixed|null|object|resource|self|string|true|void)\b/,punctuation:/[|\\[\]()]/}}]}),e.languages.javadoclike.addSupport("php",e.languages.phpdoc)})(n)}GC.displayName="php-extras";GC.aliases=[];function GC(n){n.register(Uh),n.languages.insertBefore("php","variable",{this:{pattern:/\$this\b/,alias:"keyword"},global:/\$(?:GLOBALS|HTTP_RAW_POST_DATA|_(?:COOKIE|ENV|FILES|GET|POST|REQUEST|SERVER|SESSION)|argc|argv|http_response_header|php_errormsg)\b/,scope:{pattern:/\b[\w\\]+::/,inside:{keyword:/\b(?:parent|self|static)\b/,punctuation:/::|\\/}}})}VC.displayName="plant-uml";VC.aliases=["plantuml"];function VC(n){(function(e){var t=/\$\w+|%[a-z]+%/,r=/\[[^[\]]*\]/.source,i=/(?:[drlu]|do|down|le|left|ri|right|up)/.source,s="(?:-+"+i+"-+|\\.+"+i+"\\.+|-+(?:"+r+"-*)?|"+r+"-+|\\.+(?:"+r+"\\.*)?|"+r+"\\.+)",a=/(?:<{1,2}|\/{1,2}|\\{1,2}|<\||[#*^+}xo])/.source,o=/(?:>{1,2}|\/{1,2}|\\{1,2}|\|>|[#*^+{xo])/.source,l=/[[?]?[ox]?/.source,u=/[ox]?[\]?]?/.source,c=l+"(?:"+s+o+"|"+a+s+"(?:"+o+")?)"+u;e.languages["plant-uml"]={comment:{pattern:/(^[ \t]*)(?:'.*|\/'[\s\S]*?'\/)/m,lookbehind:!0,greedy:!0},preprocessor:{pattern:/(^[ \t]*)!.*/m,lookbehind:!0,greedy:!0,alias:"property",inside:{variable:t}},delimiter:{pattern:/(^[ \t]*)@(?:end|start)uml\b/m,lookbehind:!0,greedy:!0,alias:"punctuation"},arrow:{pattern:RegExp(/(^|[^-.<>?|\\[\]ox])/.source+c+/(?![-.<>?|\\\]ox])/.source),lookbehind:!0,greedy:!0,alias:"operator",inside:{expression:{pattern:/(\[)[^[\]]+(?=\])/,lookbehind:!0,inside:null},punctuation:/\[(?=$|\])|^\]/}},string:{pattern:/"[^"]*"/,greedy:!0},text:{pattern:/(\[[ \t]*[\r\n]+(?![\r\n]))[^\]]*(?=\])/,lookbehind:!0,greedy:!0,alias:"string"},keyword:[{pattern:/^([ \t]*)(?:abstract\s+class|end\s+(?:box|fork|group|merge|note|ref|split|title)|(?:fork|split)(?:\s+again)?|activate|actor|agent|alt|annotation|artifact|autoactivate|autonumber|backward|binary|boundary|box|break|caption|card|case|circle|class|clock|cloud|collections|component|concise|control|create|critical|database|deactivate|destroy|detach|diamond|else|elseif|end|end[hr]note|endif|endswitch|endwhile|entity|enum|file|folder|footer|frame|group|[hr]?note|header|hexagon|hide|if|interface|label|legend|loop|map|namespace|network|newpage|node|nwdiag|object|opt|package|page|par|participant|person|queue|rectangle|ref|remove|repeat|restore|return|robust|scale|set|show|skinparam|stack|start|state|stop|storage|switch|title|together|usecase|usecase\/|while)(?=\s|$)/m,lookbehind:!0,greedy:!0},/\b(?:elseif|equals|not|while)(?=\s*\()/,/\b(?:as|is|then)\b/],divider:{pattern:/^==.+==$/m,greedy:!0,alias:"important"},time:{pattern:/@(?:\d+(?:[:/]\d+){2}|[+-]?\d+|:[a-z]\w*(?:[+-]\d+)?)\b/i,greedy:!0,alias:"number"},color:{pattern:/#(?:[a-z_]+|[a-fA-F0-9]+)\b/,alias:"symbol"},variable:t,punctuation:/[:,;()[\]{}]|\.{3}/},e.languages["plant-uml"].arrow.inside.expression.inside=e.languages["plant-uml"],e.languages.plantuml=e.languages["plant-uml"]})(n)}$C.displayName="plsql";$C.aliases=[];function $C(n){n.register(Hg),n.languages.plsql=n.languages.extend("sql",{comment:{pattern:/\/\*[\s\S]*?\*\/|--.*/,greedy:!0},keyword:/\b(?:A|ACCESSIBLE|ADD|AGENT|AGGREGATE|ALL|ALTER|AND|ANY|ARRAY|AS|ASC|AT|ATTRIBUTE|AUTHID|AVG|BEGIN|BETWEEN|BFILE_BASE|BINARY|BLOB_BASE|BLOCK|BODY|BOTH|BOUND|BULK|BY|BYTE|C|CALL|CALLING|CASCADE|CASE|CHAR|CHARACTER|CHARSET|CHARSETFORM|CHARSETID|CHAR_BASE|CHECK|CLOB_BASE|CLONE|CLOSE|CLUSTER|CLUSTERS|COLAUTH|COLLECT|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPILED|COMPRESS|CONNECT|CONSTANT|CONSTRUCTOR|CONTEXT|CONTINUE|CONVERT|COUNT|CRASH|CREATE|CREDENTIAL|CURRENT|CURSOR|CUSTOMDATUM|DANGLING|DATA|DATE|DATE_BASE|DAY|DECLARE|DEFAULT|DEFINE|DELETE|DESC|DETERMINISTIC|DIRECTORY|DISTINCT|DOUBLE|DROP|DURATION|ELEMENT|ELSE|ELSIF|EMPTY|END|ESCAPE|EXCEPT|EXCEPTION|EXCEPTIONS|EXCLUSIVE|EXECUTE|EXISTS|EXIT|EXTERNAL|FETCH|FINAL|FIRST|FIXED|FLOAT|FOR|FORALL|FORCE|FROM|FUNCTION|GENERAL|GOTO|GRANT|GROUP|HASH|HAVING|HEAP|HIDDEN|HOUR|IDENTIFIED|IF|IMMEDIATE|IMMUTABLE|IN|INCLUDING|INDEX|INDEXES|INDICATOR|INDICES|INFINITE|INSERT|INSTANTIABLE|INT|INTERFACE|INTERSECT|INTERVAL|INTO|INVALIDATE|IS|ISOLATION|JAVA|LANGUAGE|LARGE|LEADING|LENGTH|LEVEL|LIBRARY|LIKE|LIKE2|LIKE4|LIKEC|LIMIT|LIMITED|LOCAL|LOCK|LONG|LOOP|MAP|MAX|MAXLEN|MEMBER|MERGE|MIN|MINUS|MINUTE|MOD|MODE|MODIFY|MONTH|MULTISET|MUTABLE|NAME|NAN|NATIONAL|NATIVE|NCHAR|NEW|NOCOMPRESS|NOCOPY|NOT|NOWAIT|NULL|NUMBER_BASE|OBJECT|OCICOLL|OCIDATE|OCIDATETIME|OCIDURATION|OCIINTERVAL|OCILOBLOCATOR|OCINUMBER|OCIRAW|OCIREF|OCIREFCURSOR|OCIROWID|OCISTRING|OCITYPE|OF|OLD|ON|ONLY|OPAQUE|OPEN|OPERATOR|OPTION|OR|ORACLE|ORADATA|ORDER|ORGANIZATION|ORLANY|ORLVARY|OTHERS|OUT|OVERLAPS|OVERRIDING|PACKAGE|PARALLEL_ENABLE|PARAMETER|PARAMETERS|PARENT|PARTITION|PASCAL|PERSISTABLE|PIPE|PIPELINED|PLUGGABLE|POLYMORPHIC|PRAGMA|PRECISION|PRIOR|PRIVATE|PROCEDURE|PUBLIC|RAISE|RANGE|RAW|READ|RECORD|REF|REFERENCE|RELIES_ON|REM|REMAINDER|RENAME|RESOURCE|RESULT|RESULT_CACHE|RETURN|RETURNING|REVERSE|REVOKE|ROLLBACK|ROW|SAMPLE|SAVE|SAVEPOINT|SB1|SB2|SB4|SECOND|SEGMENT|SELECT|SELF|SEPARATE|SEQUENCE|SERIALIZABLE|SET|SHARE|SHORT|SIZE|SIZE_T|SOME|SPARSE|SQL|SQLCODE|SQLDATA|SQLNAME|SQLSTATE|STANDARD|START|STATIC|STDDEV|STORED|STRING|STRUCT|STYLE|SUBMULTISET|SUBPARTITION|SUBSTITUTABLE|SUBTYPE|SUM|SYNONYM|TABAUTH|TABLE|TDO|THE|THEN|TIME|TIMESTAMP|TIMEZONE_ABBR|TIMEZONE_HOUR|TIMEZONE_MINUTE|TIMEZONE_REGION|TO|TRAILING|TRANSACTION|TRANSACTIONAL|TRUSTED|TYPE|UB1|UB2|UB4|UNDER|UNION|UNIQUE|UNPLUG|UNSIGNED|UNTRUSTED|UPDATE|USE|USING|VALIST|VALUE|VALUES|VARIABLE|VARIANCE|VARRAY|VARYING|VIEW|VIEWS|VOID|WHEN|WHERE|WHILE|WITH|WORK|WRAPPED|WRITE|YEAR|ZONE)\b/i,operator:/:=?|=>|[<>^~!]=|\.\.|\|\||\*\*|[-+*/%<>=@]/}),n.languages.insertBefore("plsql","operator",{label:{pattern:/<<\s*\w+\s*>>/,alias:"symbol"}})}HC.displayName="powerquery";HC.aliases=["mscript","pq"];function HC(n){n.languages.powerquery={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},"quoted-identifier":{pattern:/#"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},string:{pattern:/(?:#!)?"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},constant:[/\bDay\.(?:Friday|Monday|Saturday|Sunday|Thursday|Tuesday|Wednesday)\b/,/\bTraceLevel\.(?:Critical|Error|Information|Verbose|Warning)\b/,/\bOccurrence\.(?:All|First|Last)\b/,/\bOrder\.(?:Ascending|Descending)\b/,/\bRoundingMode\.(?:AwayFromZero|Down|ToEven|TowardZero|Up)\b/,/\bMissingField\.(?:Error|Ignore|UseNull)\b/,/\bQuoteStyle\.(?:Csv|None)\b/,/\bJoinKind\.(?:FullOuter|Inner|LeftAnti|LeftOuter|RightAnti|RightOuter)\b/,/\bGroupKind\.(?:Global|Local)\b/,/\bExtraValues\.(?:Error|Ignore|List)\b/,/\bJoinAlgorithm\.(?:Dynamic|LeftHash|LeftIndex|PairwiseHash|RightHash|RightIndex|SortMerge)\b/,/\bJoinSide\.(?:Left|Right)\b/,/\bPrecision\.(?:Decimal|Double)\b/,/\bRelativePosition\.From(?:End|Start)\b/,/\bTextEncoding\.(?:Ascii|BigEndianUnicode|Unicode|Utf16|Utf8|Windows)\b/,/\b(?:Any|Binary|Date|DateTime|DateTimeZone|Duration|Function|Int16|Int32|Int64|Int8|List|Logical|None|Number|Record|Table|Text|Time)\.Type\b/,/\bnull\b/],boolean:/\b(?:false|true)\b/,keyword:/\b(?:and|as|each|else|error|if|in|is|let|meta|not|nullable|optional|or|otherwise|section|shared|then|try|type)\b|#(?:binary|date|datetime|datetimezone|duration|infinity|nan|sections|shared|table|time)\b/,function:{pattern:/(^|[^#\w.])[a-z_][\w.]*(?=\s*\()/i,lookbehind:!0},"data-type":{pattern:/\b(?:any|anynonnull|binary|date|datetime|datetimezone|duration|function|list|logical|none|number|record|table|text|time)\b/,alias:"class-name"},number:{pattern:/\b0x[\da-f]+\b|(?:[+-]?(?:\b\d+\.)?\b\d+|[+-]\.\d+|(^|[^.])\B\.\d+)(?:e[+-]?\d+)?\b/i,lookbehind:!0},operator:/[-+*\/&?@^]|<(?:=>?|>)?|>=?|=>?|\.\.\.?/,punctuation:/[,;\[\](){}]/},n.languages.pq=n.languages.powerquery,n.languages.mscript=n.languages.powerquery}jC.displayName="powershell";jC.aliases=[];function jC(n){(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(n)}WC.displayName="processing";WC.aliases=[];function WC(n){n.register(cn),n.languages.processing=n.languages.extend("clike",{keyword:/\b(?:break|case|catch|class|continue|default|else|extends|final|for|if|implements|import|new|null|private|public|return|static|super|switch|this|try|void|while)\b/,function:/\b\w+(?=\s*\()/,operator:/<[<=]?|>[>=]?|&&?|\|\|?|[%?]|[!=+\-*\/]=?/}),n.languages.insertBefore("processing","number",{constant:/\b(?!XML\b)[A-Z][A-Z\d_]+\b/,type:{pattern:/\b(?:boolean|byte|char|color|double|float|int|[A-Z]\w*)\b/,alias:"class-name"}})}qC.displayName="prolog";qC.aliases=[];function qC(n){n.languages.prolog={comment:{pattern:/\/\*[\s\S]*?\*\/|%.*/,greedy:!0},string:{pattern:/(["'])(?:\1\1|\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1(?!\1)/,greedy:!0},builtin:/\b(?:fx|fy|xf[xy]?|yfx?)\b/,function:/\b[a-z]\w*(?:(?=\()|\/\d+)/,number:/\b\d+(?:\.\d*)?/,operator:/[:\\=><\-?*@\/;+^|!$.]+|\b(?:is|mod|not|xor)\b/,punctuation:/[(){}\[\],]/}}XC.displayName="promql";XC.aliases=[];function XC(n){(function(e){var t=["sum","min","max","avg","group","stddev","stdvar","count","count_values","bottomk","topk","quantile"],r=["on","ignoring","group_right","group_left","by","without"],i=["offset"],s=t.concat(r,i);e.languages.promql={comment:{pattern:/(^[ \t]*)#.*/m,lookbehind:!0},"vector-match":{pattern:new RegExp("((?:"+r.join("|")+")\\s*)\\([^)]*\\)"),lookbehind:!0,inside:{"label-key":{pattern:/\b[^,]+\b/,alias:"attr-name"},punctuation:/[(),]/}},"context-labels":{pattern:/\{[^{}]*\}/,inside:{"label-key":{pattern:/\b[a-z_]\w*(?=\s*(?:=|![=~]))/,alias:"attr-name"},"label-value":{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0,alias:"attr-value"},punctuation:/\{|\}|=~?|![=~]|,/}},"context-range":[{pattern:/\[[\w\s:]+\]/,inside:{punctuation:/\[|\]|:/,"range-duration":{pattern:/\b(?:\d+(?:[smhdwy]|ms))+\b/i,alias:"number"}}},{pattern:/(\boffset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b(?:\d+(?:[smhdwy]|ms))+\b/i,alias:"number"}}}],keyword:new RegExp("\\b(?:"+s.join("|")+")\\b","i"),function:/\b[a-z_]\w*(?=\s*\()/i,number:/[-+]?(?:(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e[-+]?\d+)?\b|\b(?:0x[0-9a-f]+|nan|inf)\b)/i,operator:/[\^*/%+-]|==|!=|<=|<|>=|>|\b(?:and|or|unless)\b/i,punctuation:/[{};()`,.[\]]/}})(n)}YC.displayName="properties";YC.aliases=[];function YC(n){n.languages.properties={comment:/^[ \t]*[#!].*$/m,value:{pattern:/(^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+(?: *[=:] *(?! )| ))(?:\\(?:\r\n|[\s\S])|[^\\\r\n])+/m,lookbehind:!0,alias:"attr-value"},key:{pattern:/^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+(?= *[=:]| )/m,alias:"attr-name"},punctuation:/[=:]/}}KC.displayName="protobuf";KC.aliases=[];function KC(n){n.register(cn),(function(e){var t=/\b(?:bool|bytes|double|s?fixed(?:32|64)|float|[su]?int(?:32|64)|string)\b/;e.languages.protobuf=e.languages.extend("clike",{"class-name":[{pattern:/(\b(?:enum|extend|message|service)\s+)[A-Za-z_]\w*(?=\s*\{)/,lookbehind:!0},{pattern:/(\b(?:rpc\s+\w+|returns)\s*\(\s*(?:stream\s+)?)\.?[A-Za-z_]\w*(?:\.[A-Za-z_]\w*)*(?=\s*\))/,lookbehind:!0}],keyword:/\b(?:enum|extend|extensions|import|message|oneof|option|optional|package|public|repeated|required|reserved|returns|rpc(?=\s+\w)|service|stream|syntax|to)\b(?!\s*=\s*\d)/,function:/\b[a-z_]\w*(?=\s*\()/i}),e.languages.insertBefore("protobuf","operator",{map:{pattern:/\bmap<\s*[\w.]+\s*,\s*[\w.]+\s*>(?=\s+[a-z_]\w*\s*[=;])/i,alias:"class-name",inside:{punctuation:/[<>.,]/,builtin:t}},builtin:t,"positional-class-name":{pattern:/(?:\b|\B\.)[a-z_]\w*(?:\.[a-z_]\w*)*(?=\s+[a-z_]\w*\s*[=;])/i,alias:"class-name",inside:{punctuation:/\./}},annotation:{pattern:/(\[\s*)[a-z_]\w*(?=\s*=)/i,lookbehind:!0}})})(n)}ZC.displayName="stylus";ZC.aliases=[];function ZC(n){(function(e){var t={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},r={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},i={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:t,number:r,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:t,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:r,punctuation:/[{}()\[\];:,]/};i.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:i}},i.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:i}},e.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:i}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:i}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:i}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:i.interpolation}},rest:i}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:i.interpolation,comment:i.comment,punctuation:/[{},]/}},func:i.func,string:i.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:i.interpolation,punctuation:/[{}()\[\];:.]/}})(n)}QC.displayName="twig";QC.aliases=[];function QC(n){n.register(vi),n.languages.twig={comment:/^\{#[\s\S]*?#\}$/,"tag-name":{pattern:/(^\{%-?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%]-?|-?[%}]\}$/,alias:"punctuation"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,inside:{punctuation:/^['"]|['"]$/}},keyword:/\b(?:even|if|odd)\b/,boolean:/\b(?:false|null|true)\b/,number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,operator:[{pattern:/(\s)(?:and|b-and|b-or|b-xor|ends with|in|is|matches|not|or|same as|starts with)(?=\s)/,lookbehind:!0},/[=<>]=?|!=|\*\*?|\/\/?|\?:?|[-+~%|]/],punctuation:/[()\[\]{}:.,]/},n.hooks.add("before-tokenize",function(e){if(e.language==="twig"){var t=/\{(?:#[\s\S]*?#|%[\s\S]*?%|\{[\s\S]*?\})\}/g;n.languages["markup-templating"].buildPlaceholders(e,"twig",t)}}),n.hooks.add("after-tokenize",function(e){n.languages["markup-templating"].tokenizePlaceholders(e,"twig")})}JC.displayName="pug";JC.aliases=[];function JC(n){n.register(_i),n.register(ni),(function(e){e.languages.pug={comment:{pattern:/(^([\t ]*))\/\/.*(?:(?:\r?\n|\r)\2[\t ].+)*/m,lookbehind:!0},"multiline-script":{pattern:/(^([\t ]*)script\b.*\.[\t ]*)(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0,inside:e.languages.javascript},filter:{pattern:/(^([\t ]*)):.+(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"variable"},text:/\S[\s\S]*/}},"multiline-plain-text":{pattern:/(^([\t ]*)[\w\-#.]+\.[\t ]*)(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0},markup:{pattern:/(^[\t ]*)<.+/m,lookbehind:!0,inside:e.languages.markup},doctype:{pattern:/((?:^|\n)[\t ]*)doctype(?: .+)?/,lookbehind:!0},"flow-control":{pattern:/(^[\t ]*)(?:case|default|each|else|if|unless|when|while)\b(?: .+)?/m,lookbehind:!0,inside:{each:{pattern:/^each .+? in\b/,inside:{keyword:/\b(?:each|in)\b/,punctuation:/,/}},branch:{pattern:/^(?:case|default|else|if|unless|when|while)\b/,alias:"keyword"},rest:e.languages.javascript}},keyword:{pattern:/(^[\t ]*)(?:append|block|extends|include|prepend)\b.+/m,lookbehind:!0},mixin:[{pattern:/(^[\t ]*)mixin .+/m,lookbehind:!0,inside:{keyword:/^mixin/,function:/\w+(?=\s*\(|\s*$)/,punctuation:/[(),.]/}},{pattern:/(^[\t ]*)\+.+/m,lookbehind:!0,inside:{name:{pattern:/^\+\w+/,alias:"function"},rest:e.languages.javascript}}],script:{pattern:/(^[\t ]*script(?:(?:&[^(]+)?\([^)]+\))*[\t ]).+/m,lookbehind:!0,inside:e.languages.javascript},"plain-text":{pattern:/(^[\t ]*(?!-)[\w\-#.]*[\w\-](?:(?:&[^(]+)?\([^)]+\))*\/?[\t ]).+/m,lookbehind:!0},tag:{pattern:/(^[\t ]*)(?!-)[\w\-#.]*[\w\-](?:(?:&[^(]+)?\([^)]+\))*\/?:?/m,lookbehind:!0,inside:{attributes:[{pattern:/&[^(]+\([^)]+\)/,inside:e.languages.javascript},{pattern:/\([^)]+\)/,inside:{"attr-value":{pattern:/(=\s*(?!\s))(?:\{[^}]*\}|[^,)\r\n]+)/,lookbehind:!0,inside:e.languages.javascript},"attr-name":/[\w-]+(?=\s*!?=|\s*[,)])/,punctuation:/[!=(),]+/}}],punctuation:/:/,"attr-id":/#[\w\-]+/,"attr-class":/\.[\w\-]+/}},code:[{pattern:/(^[\t ]*(?:-|!?=)).+/m,lookbehind:!0,inside:e.languages.javascript}],punctuation:/[.\-!=|]+/};for(var t=/(^([\t ]*)):<filter_name>(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/.source,r=[{filter:"atpl",language:"twig"},{filter:"coffee",language:"coffeescript"},"ejs","handlebars","less","livescript","markdown",{filter:"sass",language:"scss"},"stylus"],i={},s=0,a=r.length;s<a;s++){var o=r[s];o=typeof o=="string"?{filter:o,language:o}:o,e.languages[o.language]&&(i["filter-"+o.filter]={pattern:RegExp(t.replace("<filter_name>",function(){return o.filter}),"m"),lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"variable"},text:{pattern:/\S[\s\S]*/,alias:[o.language,"language-"+o.language],inside:e.languages[o.language]}}})}e.languages.insertBefore("pug","filter",i)})(n)}eM.displayName="puppet";eM.aliases=[];function eM(n){(function(e){e.languages.puppet={heredoc:[{pattern:/(@\("([^"\r\n\/):]+)"(?:\/[nrts$uL]*)?\).*(?:\r?\n|\r))(?:.*(?:\r?\n|\r(?!\n)))*?[ \t]*(?:\|[ \t]*)?(?:-[ \t]*)?\2/,lookbehind:!0,alias:"string",inside:{punctuation:/(?=\S).*\S(?= *$)/}},{pattern:/(@\(([^"\r\n\/):]+)(?:\/[nrts$uL]*)?\).*(?:\r?\n|\r))(?:.*(?:\r?\n|\r(?!\n)))*?[ \t]*(?:\|[ \t]*)?(?:-[ \t]*)?\2/,lookbehind:!0,greedy:!0,alias:"string",inside:{punctuation:/(?=\S).*\S(?= *$)/}},{pattern:/@\("?(?:[^"\r\n\/):]+)"?(?:\/[nrts$uL]*)?\)/,alias:"string",inside:{punctuation:{pattern:/(\().+?(?=\))/,lookbehind:!0}}}],"multiline-comment":{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0,greedy:!0,alias:"comment"},regex:{pattern:/((?:\bnode\s+|[~=\(\[\{,]\s*|[=+]>\s*|^\s*))\/(?:[^\/\\]|\\[\s\S])+\/(?:[imx]+\b|\B)/,lookbehind:!0,greedy:!0,inside:{"extended-regex":{pattern:/^\/(?:[^\/\\]|\\[\s\S])+\/[im]*x[im]*$/,inside:{comment:/#.*/}}}},comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},string:{pattern:/(["'])(?:\$\{(?:[^'"}]|(["'])(?:(?!\2)[^\\]|\\[\s\S])*\2)+\}|\$(?!\{)|(?!\1)[^\\$]|\\[\s\S])*\1/,greedy:!0,inside:{"double-quoted":{pattern:/^"[\s\S]*"$/,inside:{}}}},variable:{pattern:/\$(?:::)?\w+(?:::\w+)*/,inside:{punctuation:/::/}},"attr-name":/(?:\b\w+|\*)(?=\s*=>)/,function:[{pattern:/(\.)(?!\d)\w+/,lookbehind:!0},/\b(?:contain|debug|err|fail|include|info|notice|realize|require|tag|warning)\b|\b(?!\d)\w+(?=\()/],number:/\b(?:0x[a-f\d]+|\d+(?:\.\d+)?(?:e-?\d+)?)\b/i,boolean:/\b(?:false|true)\b/,keyword:/\b(?:application|attr|case|class|consumes|default|define|else|elsif|function|if|import|inherits|node|private|produces|type|undef|unless)\b/,datatype:{pattern:/\b(?:Any|Array|Boolean|Callable|Catalogentry|Class|Collection|Data|Default|Enum|Float|Hash|Integer|NotUndef|Numeric|Optional|Pattern|Regexp|Resource|Runtime|Scalar|String|Struct|Tuple|Type|Undef|Variant)\b/,alias:"symbol"},operator:/=[=~>]?|![=~]?|<(?:<\|?|[=~|-])?|>[>=]?|->?|~>|\|>?>?|[*\/%+?]|\b(?:and|in|or)\b/,punctuation:/[\[\]{}().,;]|:+/};var t=[{pattern:/(^|[^\\])\$\{(?:[^'"{}]|\{[^}]*\}|(["'])(?:(?!\2)[^\\]|\\[\s\S])*\2)+\}/,lookbehind:!0,inside:{"short-variable":{pattern:/(^\$\{)(?!\w+\()(?:::)?\w+(?:::\w+)*/,lookbehind:!0,alias:"variable",inside:{punctuation:/::/}},delimiter:{pattern:/^\$/,alias:"variable"},rest:e.languages.puppet}},{pattern:/(^|[^\\])\$(?:::)?\w+(?:::\w+)*/,lookbehind:!0,alias:"variable",inside:{punctuation:/::/}}];e.languages.puppet.heredoc[0].inside.interpolation=t,e.languages.puppet.string.inside["double-quoted"].inside.interpolation=t})(n)}tM.displayName="pure";tM.aliases=[];function tM(n){(function(e){e.languages.pure={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0},/#!.+/],"inline-lang":{pattern:/%<[\s\S]+?%>/,greedy:!0,inside:{lang:{pattern:/(^%< *)-\*-.+?-\*-/,lookbehind:!0,alias:"comment"},delimiter:{pattern:/^%<.*|%>$/,alias:"punctuation"}}},string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},number:{pattern:/((?:\.\.)?)(?:\b(?:inf|nan)\b|\b0x[\da-f]+|(?:\b(?:0b)?\d+(?:\.\d+)?|\B\.\d+)(?:e[+-]?\d+)?L?)/i,lookbehind:!0},keyword:/\b(?:NULL|ans|break|bt|case|catch|cd|clear|const|def|del|dump|else|end|exit|extern|false|force|help|if|infix[lr]?|interface|let|ls|mem|namespace|nonfix|of|otherwise|outfix|override|postfix|prefix|private|public|pwd|quit|run|save|show|stats|then|throw|trace|true|type|underride|using|when|with)\b/,function:/\b(?:abs|add_(?:addr|constdef|(?:fundef|interface|macdef|typedef)(?:_at)?|vardef)|all|any|applp?|arity|bigintp?|blob(?:_crc|_size|p)?|boolp?|byte_c?string(?:_pointer)?|byte_(?:matrix|pointer)|calloc|cat|catmap|ceil|char[ps]?|check_ptrtag|chr|clear_sentry|clearsym|closurep?|cmatrixp?|cols?|colcat(?:map)?|colmap|colrev|colvector(?:p|seq)?|complex(?:_float_(?:matrix|pointer)|_matrix(?:_view)?|_pointer|p)?|conj|cookedp?|cst|cstring(?:_(?:dup|list|vector))?|curry3?|cyclen?|del_(?:constdef|fundef|interface|macdef|typedef|vardef)|delete|diag(?:mat)?|dim|dmatrixp?|do|double(?:_matrix(?:_view)?|_pointer|p)?|dowith3?|drop|dropwhile|eval(?:cmd)?|exactp|filter|fix|fixity|flip|float(?:_matrix|_pointer)|floor|fold[lr]1?|frac|free|funp?|functionp?|gcd|get(?:_(?:byte|constdef|double|float|fundef|int(?:64)?|interface(?:_typedef)?|long|macdef|pointer|ptrtag|sentry|short|string|typedef|vardef))?|globsym|hash|head|id|im|imatrixp?|index|inexactp|infp|init|insert|int(?:_matrix(?:_view)?|_pointer|p)?|int64_(?:matrix|pointer)|integerp?|iteraten?|iterwhile|join|keys?|lambdap?|last(?:err(?:pos)?)?|lcd|list[2p]?|listmap|make_ptrtag|malloc|map|matcat|matrixp?|max|member|min|nanp|nargs|nmatrixp?|null|numberp?|ord|pack(?:ed)?|pointer(?:_cast|_tag|_type|p)?|pow|pred|ptrtag|put(?:_(?:byte|double|float|int(?:64)?|long|pointer|short|string))?|rationalp?|re|realp?|realloc|recordp?|redim|reduce(?:_with)?|refp?|repeatn?|reverse|rlistp?|round|rows?|rowcat(?:map)?|rowmap|rowrev|rowvector(?:p|seq)?|same|scan[lr]1?|sentry|sgn|short_(?:matrix|pointer)|slice|smatrixp?|sort|split|str|strcat|stream|stride|string(?:_(?:dup|list|vector)|p)?|subdiag(?:mat)?|submat|subseq2?|substr|succ|supdiag(?:mat)?|symbolp?|tail|take|takewhile|thunkp?|transpose|trunc|tuplep?|typep|ubyte|uint(?:64)?|ulong|uncurry3?|unref|unzip3?|update|ushort|vals?|varp?|vector(?:p|seq)?|void|zip3?|zipwith3?)\b/,special:{pattern:/\b__[a-z]+__\b/i,alias:"builtin"},operator:/(?:[!"#$%&'*+,\-.\/:<=>?@\\^`|~\u00a1-\u00bf\u00d7-\u00f7\u20d0-\u2bff]|\b_+\b)+|\b(?:and|div|mod|not|or)\b/,punctuation:/[(){}\[\];,|]/};var t=["c",{lang:"c++",alias:"cpp"},"fortran"],r=/%< *-\*- *<lang>\d* *-\*-[\s\S]+?%>/.source;t.forEach(function(i){var s=i;if(typeof i!="string"&&(s=i.alias,i=i.lang),e.languages[s]){var a={};a["inline-lang-"+s]={pattern:RegExp(r.replace("<lang>",i.replace(/([.+*?\/\\(){}\[\]])/g,"\\$1")),"i"),inside:e.util.clone(e.languages.pure["inline-lang"].inside)},a["inline-lang-"+s].inside.rest=e.util.clone(e.languages[s]),e.languages.insertBefore("pure","inline-lang",a)}}),e.languages.c&&(e.languages.pure["inline-lang"].inside.rest=e.util.clone(e.languages.c))})(n)}nM.displayName="purebasic";nM.aliases=["pbfasm"];function nM(n){n.register(cn),n.languages.purebasic=n.languages.extend("clike",{comment:/;.*/,keyword:/\b(?:align|and|as|break|calldebugger|case|compilercase|compilerdefault|compilerelse|compilerelseif|compilerendif|compilerendselect|compilererror|compilerif|compilerselect|continue|data|datasection|debug|debuglevel|declare|declarec|declarecdll|declaredll|declaremodule|default|define|dim|disableasm|disabledebugger|disableexplicit|else|elseif|enableasm|enabledebugger|enableexplicit|end|enddatasection|enddeclaremodule|endenumeration|endif|endimport|endinterface|endmacro|endmodule|endprocedure|endselect|endstructure|endstructureunion|endwith|enumeration|extends|fakereturn|for|foreach|forever|global|gosub|goto|if|import|importc|includebinary|includefile|includepath|interface|macro|module|newlist|newmap|next|not|or|procedure|procedurec|procedurecdll|proceduredll|procedurereturn|protected|prototype|prototypec|read|redim|repeat|restore|return|runtime|select|shared|static|step|structure|structureunion|swap|threaded|to|until|wend|while|with|xincludefile|xor)\b/i,function:/\b\w+(?:\.\w+)?\s*(?=\()/,number:/(?:\$[\da-f]+|\b-?(?:\d+(?:\.\d+)?|\.\d+)(?:e[+-]?\d+)?)\b/i,operator:/(?:@\*?|\?|\*)\w+\$?|-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*/@]/}),n.languages.insertBefore("purebasic","keyword",{tag:/#\w+\$?/,asm:{pattern:/(^[\t ]*)!.*/m,lookbehind:!0,alias:"tag",inside:{comment:/;.*/,string:{pattern:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"label-reference-anonymous":{pattern:/(!\s*j[a-z]+\s+)@[fb]/i,lookbehind:!0,alias:"fasm-label"},"label-reference-addressed":{pattern:/(!\s*j[a-z]+\s+)[A-Z._?$@][\w.?$@~#]*/i,lookbehind:!0,alias:"fasm-label"},keyword:[/\b(?:extern|global)\b[^;\r\n]*/i,/\b(?:CPU|DEFAULT|FLOAT)\b.*/],function:{pattern:/^([\t ]*!\s*)[\da-z]+(?=\s|$)/im,lookbehind:!0},"function-inline":{pattern:/(:\s*)[\da-z]+(?=\s)/i,lookbehind:!0,alias:"function"},label:{pattern:/^([\t ]*!\s*)[A-Za-z._?$@][\w.?$@~#]*(?=:)/m,lookbehind:!0,alias:"fasm-label"},register:/\b(?:st\d|[xyz]mm\d\d?|[cdt]r\d|r\d\d?[bwd]?|[er]?[abcd]x|[abcd][hl]|[er]?(?:bp|di|si|sp)|[cdefgs]s|mm\d+)\b/i,number:/(?:\b|-|(?=\$))(?:0[hx](?:[\da-f]*\.)?[\da-f]+(?:p[+-]?\d+)?|\d[\da-f]+[hx]|\$\d[\da-f]*|0[oq][0-7]+|[0-7]+[oq]|0[by][01]+|[01]+[by]|0[dt]\d+|(?:\d+(?:\.\d+)?|\.\d+)(?:\.?e[+-]?\d+)?[dt]?)\b/i,operator:/[\[\]*+\-/%<>=&|$!,.:]/}}}),delete n.languages.purebasic["class-name"],delete n.languages.purebasic.boolean,n.languages.pbfasm=n.languages.purebasic}rM.displayName="purescript";rM.aliases=["purs"];function rM(n){n.register(jg),n.languages.purescript=n.languages.extend("haskell",{keyword:/\b(?:ado|case|class|data|derive|do|else|forall|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b|/,"import-statement":{pattern:/(^[\t ]*)import\s+[A-Z][\w']*(?:\.[A-Z][\w']*)*(?:\s+as\s+[A-Z][\w']*(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|hiding|import)\b/,punctuation:/\./}},builtin:/\b(?:absurd|add|ap|append|apply|between|bind|bottom|clamp|compare|comparing|compose|conj|const|degree|discard|disj|div|eq|flap|flip|gcd|identity|ifM|join|lcm|liftA1|liftM1|map|max|mempty|min|mod|mul|negate|not|notEq|one|otherwise|recip|show|sub|top|unit|unless|unlessM|void|when|whenM|zero)\b/,operator:[n.languages.haskell.operator[0],n.languages.haskell.operator[2],/[\xa2-\xa6\xa8\xa9\xac\xae-\xb1\xb4\xb8\xd7\xf7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u03f6\u0482\u058d-\u058f\u0606-\u0608\u060b\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u07fe\u07ff\u09f2\u09f3\u09fa\u09fb\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0d4f\u0d79\u0e3f\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u166d\u17db\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u2052\u207a-\u207c\u208a-\u208c\u20a0-\u20bf\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u2140-\u2144\u214a-\u214d\u214f\u218a\u218b\u2190-\u2307\u230c-\u2328\u232b-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2767\u2794-\u27c4\u27c7-\u27e5\u27f0-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2b73\u2b76-\u2b95\u2b97-\u2bff\u2ce5-\u2cea\u2e50\u2e51\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua700-\ua716\ua720\ua721\ua789\ua78a\ua828-\ua82b\ua836-\ua839\uaa77-\uaa79\uab5b\uab6a\uab6b\ufb29\ufbb2-\ufbc1\ufdfc\ufdfd\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd]/]}),n.languages.purs=n.languages.purescript}X_.displayName="python";X_.aliases=["py"];function X_(n){n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},n.languages.python["string-interpolation"].inside.interpolation.inside.rest=n.languages.python,n.languages.py=n.languages.python}iM.displayName="qsharp";iM.aliases=["qs"];function iM(n){n.register(cn),(function(e){function t(g,m){return g.replace(/<<(\d+)>>/g,function(v,_){return"(?:"+m[+_]+")"})}function r(g,m,v){return RegExp(t(g,m),"")}function i(g,m){for(var v=0;v<m;v++)g=g.replace(/<<self>>/g,function(){return"(?:"+g+")"});return g.replace(/<<self>>/g,"[^\\s\\S]")}var s={type:"Adj BigInt Bool Ctl Double false Int One Pauli PauliI PauliX PauliY PauliZ Qubit Range Result String true Unit Zero",other:"Adjoint adjoint apply as auto body borrow borrowing Controlled controlled distribute elif else fail fixup for function if in internal intrinsic invert is let mutable namespace new newtype open operation repeat return self set until use using while within"};function a(g){return"\\b(?:"+g.trim().replace(/ /g,"|")+")\\b"}var o=RegExp(a(s.type+" "+s.other)),l=/\b[A-Za-z_]\w*\b/.source,u=t(/<<0>>(?:\s*\.\s*<<0>>)*/.source,[l]),c={keyword:o,punctuation:/[<>()?,.:[\]]/},h=/"(?:\\.|[^\\"])*"/.source;e.languages.qsharp=e.languages.extend("clike",{comment:/\/\/.*/,string:[{pattern:r(/(^|[^$\\])<<0>>/.source,[h]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:r(/(\b(?:as|open)\s+)<<0>>(?=\s*(?:;|as\b))/.source,[u]),lookbehind:!0,inside:c},{pattern:r(/(\bnamespace\s+)<<0>>(?=\s*\{)/.source,[u]),lookbehind:!0,inside:c}],keyword:o,number:/(?:\b0(?:x[\da-f]+|b[01]+|o[0-7]+)|(?:\B\.\d+|\b\d+(?:\.\d*)?)(?:e[-+]?\d+)?)l?\b/i,operator:/\band=|\bor=|\band\b|\bnot\b|\bor\b|<[-=]|[-=]>|>>>=?|<<<=?|\^\^\^=?|\|\|\|=?|&&&=?|w\/=?|~~~|[*\/+\-^=!%]=?/,punctuation:/::|[{}[\];(),.:]/}),e.languages.insertBefore("qsharp","number",{range:{pattern:/\.\./,alias:"operator"}});var f=i(t(/\{(?:[^"{}]|<<0>>|<<self>>)*\}/.source,[h]),2);e.languages.insertBefore("qsharp","string",{"interpolation-string":{pattern:r(/\$"(?:\\.|<<0>>|[^\\"{])*"/.source,[f]),greedy:!0,inside:{interpolation:{pattern:r(/((?:^|[^\\])(?:\\\\)*)<<0>>/.source,[f]),lookbehind:!0,inside:{punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-qsharp",inside:e.languages.qsharp}}},string:/[\s\S]+/}}})})(n),n.languages.qs=n.languages.qsharp}sM.displayName="q";sM.aliases=[];function sM(n){n.languages.q={string:/"(?:\\.|[^"\\\r\n])*"/,comment:[{pattern:/([\t )\]}])\/.*/,lookbehind:!0,greedy:!0},{pattern:/(^|\r?\n|\r)\/[\t ]*(?:(?:\r?\n|\r)(?:.*(?:\r?\n|\r(?!\n)))*?(?:\\(?=[\t ]*(?:\r?\n|\r))|$)|\S.*)/,lookbehind:!0,greedy:!0},{pattern:/^\\[\t ]*(?:\r?\n|\r)[\s\S]+/m,greedy:!0},{pattern:/^#!.+/m,greedy:!0}],symbol:/`(?::\S+|[\w.]*)/,datetime:{pattern:/0N[mdzuvt]|0W[dtz]|\d{4}\.\d\d(?:m|\.\d\d(?:T(?:\d\d(?::\d\d(?::\d\d(?:[.:]\d\d\d)?)?)?)?)?[dz]?)|\d\d:\d\d(?::\d\d(?:[.:]\d\d\d)?)?[uvt]?/,alias:"number"},number:/\b(?![01]:)(?:0N[hje]?|0W[hj]?|0[wn]|0x[\da-fA-F]+|\d+(?:\.\d*)?(?:e[+-]?\d+)?[hjfeb]?)/,keyword:/\\\w+\b|\b(?:abs|acos|aj0?|all|and|any|asc|asin|asof|atan|attr|avgs?|binr?|by|ceiling|cols|cor|cos|count|cov|cross|csv|cut|delete|deltas|desc|dev|differ|distinct|div|do|dsave|ej|enlist|eval|except|exec|exit|exp|fby|fills|first|fkeys|flip|floor|from|get|getenv|group|gtime|hclose|hcount|hdel|hopen|hsym|iasc|identity|idesc|if|ij|in|insert|inter|inv|keys?|last|like|list|ljf?|load|log|lower|lsq|ltime|ltrim|mavg|maxs?|mcount|md5|mdev|med|meta|mins?|mmax|mmin|mmu|mod|msum|neg|next|not|null|or|over|parse|peach|pj|plist|prds?|prev|prior|rand|rank|ratios|raze|read0|read1|reciprocal|reval|reverse|rload|rotate|rsave|rtrim|save|scan|scov|sdev|select|set|setenv|show|signum|sin|sqrt|ssr?|string|sublist|sums?|sv|svar|system|tables|tan|til|trim|txf|type|uj|ungroup|union|update|upper|upsert|value|var|views?|vs|wavg|where|while|within|wj1?|wsum|ww|xasc|xbar|xcols?|xdesc|xexp|xgroup|xkey|xlog|xprev|xrank)\b/,adverb:{pattern:/['\/\\]:?|\beach\b/,alias:"function"},verb:{pattern:/(?:\B\.\B|\b[01]:|<[=>]?|>=?|[:+\-*%,!?~=|$&#@^]):?|\b_\b:?/,alias:"operator"},punctuation:/[(){}\[\];.]/}}aM.displayName="qml";aM.aliases=[];function aM(n){n.register(_i),(function(e){for(var t=/"(?:\\.|[^\\"\r\n])*"|'(?:\\.|[^\\'\r\n])*'/.source,r=/\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))*\*\//.source,i=/(?:[^\\()[\]{}"'/]|<string>|\/(?![*/])|<comment>|\(<expr>*\)|\[<expr>*\]|\{<expr>*\}|\\[\s\S])/.source.replace(/<string>/g,function(){return t}).replace(/<comment>/g,function(){return r}),s=0;s<2;s++)i=i.replace(/<expr>/g,function(){return i});i=i.replace(/<expr>/g,"[^\\s\\S]"),e.languages.qml={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},"javascript-function":{pattern:RegExp(/((?:^|;)[ \t]*)function\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*\(<js>*\)\s*\{<js>*\}/.source.replace(/<js>/g,function(){return i}),"m"),lookbehind:!0,greedy:!0,alias:"language-javascript",inside:e.languages.javascript},"class-name":{pattern:/((?:^|[:;])[ \t]*)(?!\d)\w+(?=[ \t]*\{|[ \t]+on\b)/m,lookbehind:!0},property:[{pattern:/((?:^|[;{])[ \t]*)(?!\d)\w+(?:\.\w+)*(?=[ \t]*:)/m,lookbehind:!0},{pattern:/((?:^|[;{])[ \t]*)property[ \t]+(?!\d)\w+(?:\.\w+)*[ \t]+(?!\d)\w+(?:\.\w+)*(?=[ \t]*:)/m,lookbehind:!0,inside:{keyword:/^property/,property:/\w+(?:\.\w+)*/}}],"javascript-expression":{pattern:RegExp(/(:[ \t]*)(?![\s;}[])(?:(?!$|[;}])<js>)+/.source.replace(/<js>/g,function(){return i}),"m"),lookbehind:!0,greedy:!0,alias:"language-javascript",inside:e.languages.javascript},string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},keyword:/\b(?:as|import|on)\b/,punctuation:/[{}[\]:;,]/}})(n)}oM.displayName="qore";oM.aliases=[];function oM(n){n.register(cn),n.languages.qore=n.languages.extend("clike",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:\/\/|#).*)/,lookbehind:!0},string:{pattern:/("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:abstract|any|assert|binary|bool|boolean|break|byte|case|catch|char|class|code|const|continue|data|default|do|double|else|enum|extends|final|finally|float|for|goto|hash|if|implements|import|inherits|instanceof|int|interface|long|my|native|new|nothing|null|object|our|own|private|reference|rethrow|return|short|soft(?:bool|date|float|int|list|number|string)|static|strictfp|string|sub|super|switch|synchronized|this|throw|throws|transient|try|void|volatile|while)\b/,boolean:/\b(?:false|true)\b/i,function:/\$?\b(?!\d)\w+(?=\()/,number:/\b(?:0b[01]+|0x(?:[\da-f]*\.)?[\da-fp\-]+|(?:\d+(?:\.\d+)?|\.\d+)(?:e\d+)?[df]|(?:\d+(?:\.\d+)?|\.\d+))\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|[!=](?:==?|~)?|>>?=?|<(?:=>?|<=?)?|&[&=]?|\|[|=]?|[*\/%^]=?|[~?])/,lookbehind:!0},variable:/\$(?!\d)\w+\b/})}lM.displayName="r";lM.aliases=[];function lM(n){n.languages.r={comment:/#.*/,string:{pattern:/(['"])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"percent-operator":{pattern:/%[^%\s]*%/,alias:"operator"},boolean:/\b(?:FALSE|TRUE)\b/,ellipsis:/\.\.(?:\.|\d+)/,number:[/\b(?:Inf|NaN)\b/,/(?:\b0x[\dA-Fa-f]+(?:\.\d*)?|\b\d+(?:\.\d*)?|\B\.\d+)(?:[EePp][+-]?\d+)?[iL]?/],keyword:/\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\b/,operator:/->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\|\|?|[+*\/^$@~]/,punctuation:/[(){}\[\],;]/}}uM.displayName="racket";uM.aliases=["rkt"];function uM(n){n.register(Xg),n.languages.racket=n.languages.extend("scheme",{"lambda-parameter":{pattern:/([(\[]lambda\s+[(\[])[^()\[\]'\s]+/,lookbehind:!0}}),n.languages.insertBefore("racket","string",{lang:{pattern:/^#lang.+/m,greedy:!0,alias:"keyword"}}),n.languages.rkt=n.languages.racket}cM.displayName="cshtml";cM.aliases=["razor"];function cM(n){n.register(Oh),n.register(ni),(function(e){var t=/\/(?![/*])|\/\/.*[\r\n]|\/\*[^*]*(?:\*(?!\/)[^*]*)*\*\//.source,r=/@(?!")|"(?:[^\r\n\\"]|\\.)*"|@"(?:[^\\"]|""|\\[\s\S])*"(?!")/.source+"|"+/'(?:(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'|(?=[^\\](?!')))/.source;function i(S,E){for(var A=0;A<E;A++)S=S.replace(/<self>/g,function(){return"(?:"+S+")"});return S.replace(/<self>/g,"[^\\s\\S]").replace(/<str>/g,"(?:"+r+")").replace(/<comment>/g,"(?:"+t+")")}var s=i(/\((?:[^()'"@/]|<str>|<comment>|<self>)*\)/.source,2),a=i(/\[(?:[^\[\]'"@/]|<str>|<comment>|<self>)*\]/.source,1),o=i(/\{(?:[^{}'"@/]|<str>|<comment>|<self>)*\}/.source,2),l=i(/<(?:[^<>'"@/]|<comment>|<self>)*>/.source,1),u=/@/.source+/(?:await\b\s*)?/.source+"(?:"+/(?!await\b)\w+\b/.source+"|"+s+")(?:"+/[?!]?\.\w+\b/.source+"|(?:"+l+")?"+s+"|"+a+")*"+/(?![?!\.(\[]|<(?!\/))/.source,c=/@(?![\w()])/.source+"|"+u,h="(?:"+/"[^"@]*"|'[^'@]*'|[^\s'"@>=]+(?=[\s>])/.source+`|["'][^"'@]*(?:(?:`+c+`)[^"'@]*)+["'])`,f=/(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*<tagAttrValue>|(?=[\s/>])))+)?/.source.replace(/<tagAttrValue>/,h),g=/(?!\d)[^\s>\/=$<%]+/.source+f+/\s*\/?>/.source,m=/\B@?/.source+"(?:"+/<([a-zA-Z][\w:]*)/.source+f+/\s*>/.source+"(?:"+(/[^<]/.source+"|"+/<\/?(?!\1\b)/.source+g+"|"+i(/<\1/.source+f+/\s*>/.source+"(?:"+(/[^<]/.source+"|"+/<\/?(?!\1\b)/.source+g+"|<self>")+")*"+/<\/\1\s*>/.source,2))+")*"+/<\/\1\s*>/.source+"|"+/</.source+g+")";e.languages.cshtml=e.languages.extend("markup",{});var v=e.languages.insertBefore("csharp","string",{html:{pattern:RegExp(m),greedy:!0,inside:e.languages.cshtml}},{csharp:e.languages.extend("csharp",{})}),_={pattern:/\S[\s\S]*/,alias:"language-csharp",inside:v},b={pattern:RegExp(/(^|[^@])/.source+u),lookbehind:!0,greedy:!0,alias:"variable",inside:{keyword:/^@/,csharp:_}};e.languages.cshtml.tag.pattern=RegExp(/<\/?/.source+g),e.languages.cshtml.tag.inside["attr-value"].pattern=RegExp(/=\s*/.source+h),e.languages.insertBefore("inside","punctuation",{value:b},e.languages.cshtml.tag.inside["attr-value"]),e.languages.insertBefore("cshtml","prolog",{"razor-comment":{pattern:/@\*[\s\S]*?\*@/,greedy:!0,alias:"comment"},block:{pattern:RegExp(/(^|[^@])@/.source+"(?:"+[o,/(?:code|functions)\s*/.source+o,/(?:for|foreach|lock|switch|using|while)\s*/.source+s+/\s*/.source+o,/do\s*/.source+o+/\s*while\s*/.source+s+/(?:\s*;)?/.source,/try\s*/.source+o+/\s*catch\s*/.source+s+/\s*/.source+o+/\s*finally\s*/.source+o,/if\s*/.source+s+/\s*/.source+o+"(?:"+/\s*else/.source+"(?:"+/\s+if\s*/.source+s+")?"+/\s*/.source+o+")*",/helper\s+\w+\s*/.source+s+/\s*/.source+o].join("|")+")"),lookbehind:!0,greedy:!0,inside:{keyword:/^@\w*/,csharp:_}},directive:{pattern:/^([ \t]*)@(?:addTagHelper|attribute|implements|inherits|inject|layout|model|namespace|page|preservewhitespace|removeTagHelper|section|tagHelperPrefix|using)(?=\s).*/m,lookbehind:!0,greedy:!0,inside:{keyword:/^@\w+/,csharp:_}},value:b,"delegate-operator":{pattern:/(^|[^@])@(?=<)/,lookbehind:!0,alias:"operator"}}),e.languages.razor=e.languages.cshtml})(n)}Y_.displayName="jsx";Y_.aliases=[];function Y_(n){n.register(_i),n.register(ni),(function(e){var t=e.util.clone(e.languages.javascript),r=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,i=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,s=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function a(u,c){return u=u.replace(/<S>/g,function(){return r}).replace(/<BRACES>/g,function(){return i}).replace(/<SPREAD>/g,function(){return s}),RegExp(u,c)}s=a(s).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=a(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:a(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:a(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var o=function(u){return u?typeof u=="string"?u:typeof u.content=="string"?u.content:u.content.map(o).join(""):""},l=function(u){for(var c=[],h=0;h<u.length;h++){var f=u[h],g=!1;if(typeof f!="string"&&(f.type==="tag"&&f.content[0]&&f.content[0].type==="tag"?f.content[0].content[0].content==="</"?c.length>0&&c[c.length-1].tagName===o(f.content[0].content[1])&&c.pop():f.content[f.content.length-1].content==="/>"||c.push({tagName:o(f.content[0].content[1]),openedBraces:0}):c.length>0&&f.type==="punctuation"&&f.content==="{"?c[c.length-1].openedBraces++:c.length>0&&c[c.length-1].openedBraces>0&&f.type==="punctuation"&&f.content==="}"?c[c.length-1].openedBraces--:g=!0),(g||typeof f=="string")&&c.length>0&&c[c.length-1].openedBraces===0){var m=o(f);h<u.length-1&&(typeof u[h+1]=="string"||u[h+1].type==="plain-text")&&(m+=o(u[h+1]),u.splice(h+1,1)),h>0&&(typeof u[h-1]=="string"||u[h-1].type==="plain-text")&&(m=o(u[h-1])+m,u.splice(h-1,1),h--),u[h]=new e.Token("plain-text",m,null,m)}f.content&&typeof f.content!="string"&&l(f.content)}};e.hooks.add("after-tokenize",function(u){u.language!=="jsx"&&u.language!=="tsx"||l(u.tokens)})})(n)}dM.displayName="tsx";dM.aliases=[];function dM(n){n.register(Y_),n.register(qg),(function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"];var r=e.languages.tsx.tag;r.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+r.pattern.source+")",r.pattern.flags),r.lookbehind=!0})(n)}hM.displayName="reason";hM.aliases=[];function hM(n){n.register(cn),n.languages.reason=n.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),n.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete n.languages.reason.function}pM.displayName="rego";pM.aliases=[];function pM(n){n.languages.rego={comment:/#.*/,property:{pattern:/(^|[^\\.])(?:"(?:\\.|[^\\"\r\n])*"|`[^`]*`|\b[a-z_]\w*\b)(?=\s*:(?!=))/i,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:as|default|else|import|not|null|package|set(?=\s*\()|some|with)\b/,boolean:/\b(?:false|true)\b/,function:{pattern:/\b[a-z_]\w*\b(?:\s*\.\s*\b[a-z_]\w*\b)*(?=\s*\()/i,inside:{namespace:/\b\w+\b(?=\s*\.)/,punctuation:/\./}},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,operator:/[-+*/%|&]|[<>:=]=?|!=|\b_\b/,punctuation:/[,;.\[\]{}()]/}}fM.displayName="renpy";fM.aliases=["rpy"];function fM(n){n.languages.renpy={comment:{pattern:/(^|[^\\])#.+/,lookbehind:!0},string:{pattern:/("""|''')[\s\S]+?\1|("|')(?:\\.|(?!\2)[^\\])*\2|(?:^#?(?:(?:[0-9a-fA-F]){3}|[0-9a-fA-F]{6})$)/m,greedy:!0},function:/\b[a-z_]\w*(?=\()/i,property:/\b(?:Update|UpdateVersion|action|activate_sound|adv_nvl_transition|after_load_transition|align|alpha|alt|anchor|antialias|area|auto|background|bar_invert|bar_resizing|bar_vertical|black_color|bold|bottom_bar|bottom_gutter|bottom_margin|bottom_padding|box_reverse|box_wrap|can_update|caret|child|color|crop|default_afm_enable|default_afm_time|default_fullscreen|default_text_cps|developer|directory_name|drag_handle|drag_joined|drag_name|drag_raise|draggable|dragged|drop_shadow|drop_shadow_color|droppable|dropped|easein|easeout|edgescroll|end_game_transition|end_splash_transition|enter_replay_transition|enter_sound|enter_transition|enter_yesno_transition|executable_name|exit_replay_transition|exit_sound|exit_transition|exit_yesno_transition|fadein|fadeout|first_indent|first_spacing|fit_first|focus|focus_mask|font|foreground|game_main_transition|get_installed_packages|google_play_key|google_play_salt|ground|has_music|has_sound|has_voice|height|help|hinting|hover|hover_background|hover_color|hover_sound|hovered|hyperlink_functions|idle|idle_color|image_style|include_update|insensitive|insensitive_background|insensitive_color|inside|intra_transition|italic|justify|kerning|keyboard_focus|language|layer_clipping|layers|layout|left_bar|left_gutter|left_margin|left_padding|length|line_leading|line_overlap_split|line_spacing|linear|main_game_transition|main_menu_music|maximum|min_width|minimum|minwidth|modal|mouse|mousewheel|name|narrator_menu|newline_indent|nvl_adv_transition|offset|order_reverse|outlines|overlay_functions|pos|position|prefix|radius|range|rest_indent|right_bar|right_gutter|right_margin|right_padding|rotate|rotate_pad|ruby_style|sample_sound|save_directory|say_attribute_transition|screen_height|screen_width|scrollbars|selected_hover|selected_hover_color|selected_idle|selected_idle_color|selected_insensitive|show_side_image|show_two_window|side_spacing|side_xpos|side_ypos|size|size_group|slow_cps|slow_cps_multiplier|spacing|strikethrough|subpixel|text_align|text_style|text_xpos|text_y_fudge|text_ypos|thumb|thumb_offset|thumb_shadow|thumbnail_height|thumbnail_width|time|top_bar|top_gutter|top_margin|top_padding|translations|underline|unscrollable|update|value|version|version_name|version_tuple|vertical|width|window_hide_transition|window_icon|window_left_padding|window_show_transition|window_title|windows_icon|xadjustment|xalign|xanchor|xanchoraround|xaround|xcenter|xfill|xinitial|xmargin|xmaximum|xminimum|xoffset|xofsset|xpadding|xpos|xsize|xzoom|yadjustment|yalign|yanchor|yanchoraround|yaround|ycenter|yfill|yinitial|ymargin|ymaximum|yminimum|yoffset|ypadding|ypos|ysize|ysizexysize|yzoom|zoom|zorder)\b/,tag:/\b(?:bar|block|button|buttoscreenn|drag|draggroup|fixed|frame|grid|[hv]box|hotbar|hotspot|image|imagebutton|imagemap|input|key|label|menu|mm_menu_frame|mousearea|nvl|parallel|screen|self|side|tag|text|textbutton|timer|vbar|viewport|window)\b|\$/,keyword:/\b(?:None|add|adjustment|alignaround|allow|angle|animation|around|as|assert|behind|box_layout|break|build|cache|call|center|changed|child_size|choice|circles|class|clear|clicked|clipping|clockwise|config|contains|continue|corner1|corner2|counterclockwise|def|default|define|del|delay|disabled|disabled_text|dissolve|elif|else|event|except|exclude|exec|expression|fade|finally|for|from|function|global|gm_root|has|hide|id|if|import|in|init|is|jump|knot|lambda|left|less_rounded|mm_root|movie|music|null|on|onlayer|pass|pause|persistent|play|print|python|queue|raise|random|renpy|repeat|return|right|rounded_window|scene|scope|set|show|slow|slow_abortable|slow_done|sound|stop|store|style|style_group|substitute|suffix|theme|transform|transform_anchor|transpose|try|ui|unhovered|updater|use|voice|while|widget|widget_hover|widget_selected|widget_text|yield)\b/,boolean:/\b(?:[Ff]alse|[Tt]rue)\b/,number:/(?:\b(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?)|\B\.\d+)(?:e[+-]?\d+)?j?/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:and|at|not|or|with)\b/,punctuation:/[{}[\];(),.:]/},n.languages.rpy=n.languages.renpy}gM.displayName="rescript";gM.aliases=["res"];function gM(n){n.languages.rescript={comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},char:{pattern:/'(?:[^\r\n\\]|\\(?:.|\w+))'/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*|@[a-z.]*|#[A-Za-z]\w*|#\d/,function:{pattern:/[a-zA-Z]\w*(?=\()|(\.)[a-z]\w*/,lookbehind:!0},number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,boolean:/\b(?:false|true)\b/,"attr-value":/[A-Za-z]\w*(?==)/,constant:{pattern:/(\btype\s+)[a-z]\w*/,lookbehind:!0},tag:{pattern:/(<)[a-z]\w*|(?:<\/)[a-z]\w*/,lookbehind:!0,inside:{operator:/<|>|\//}},keyword:/\b(?:and|as|assert|begin|bool|class|constraint|do|done|downto|else|end|exception|external|float|for|fun|function|if|in|include|inherit|initializer|int|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|string|switch|then|to|try|type|when|while|with)\b/,operator:/\.{3}|:[:=]?|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/,punctuation:/[(){}[\],;.]/},n.languages.insertBefore("rescript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"tag"},rest:n.languages.rescript}},string:/[\s\S]+/}}}),n.languages.res=n.languages.rescript}mM.displayName="rest";mM.aliases=[];function mM(n){n.languages.rest={table:[{pattern:/(^[\t ]*)(?:\+[=-]+)+\+(?:\r?\n|\r)(?:\1[+|].+[+|](?:\r?\n|\r))+\1(?:\+[=-]+)+\+/m,lookbehind:!0,inside:{punctuation:/\||(?:\+[=-]+)+\+/}},{pattern:/(^[\t ]*)=+ [ =]*=(?:(?:\r?\n|\r)\1.+)+(?:\r?\n|\r)\1=+ [ =]*=(?=(?:\r?\n|\r){2}|\s*$)/m,lookbehind:!0,inside:{punctuation:/[=-]+/}}],"substitution-def":{pattern:/(^[\t ]*\.\. )\|(?:[^|\s](?:[^|]*[^|\s])?)\| [^:]+::/m,lookbehind:!0,inside:{substitution:{pattern:/^\|(?:[^|\s]|[^|\s][^|]*[^|\s])\|/,alias:"attr-value",inside:{punctuation:/^\||\|$/}},directive:{pattern:/( )(?! )[^:]+::/,lookbehind:!0,alias:"function",inside:{punctuation:/::$/}}}},"link-target":[{pattern:/(^[\t ]*\.\. )\[[^\]]+\]/m,lookbehind:!0,alias:"string",inside:{punctuation:/^\[|\]$/}},{pattern:/(^[\t ]*\.\. )_(?:`[^`]+`|(?:[^:\\]|\\.)+):/m,lookbehind:!0,alias:"string",inside:{punctuation:/^_|:$/}}],directive:{pattern:/(^[\t ]*\.\. )[^:]+::/m,lookbehind:!0,alias:"function",inside:{punctuation:/::$/}},comment:{pattern:/(^[\t ]*\.\.)(?:(?: .+)?(?:(?:\r?\n|\r).+)+| .+)(?=(?:\r?\n|\r){2}|$)/m,lookbehind:!0},title:[{pattern:/^(([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2+)(?:\r?\n|\r).+(?:\r?\n|\r)\1$/m,inside:{punctuation:/^[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+|[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+$/,important:/.+/}},{pattern:/(^|(?:\r?\n|\r){2}).+(?:\r?\n|\r)([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2+(?=\r?\n|\r|$)/,lookbehind:!0,inside:{punctuation:/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+$/,important:/.+/}}],hr:{pattern:/((?:\r?\n|\r){2})([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2{3,}(?=(?:\r?\n|\r){2})/,lookbehind:!0,alias:"punctuation"},field:{pattern:/(^[\t ]*):[^:\r\n]+:(?= )/m,lookbehind:!0,alias:"attr-name"},"command-line-option":{pattern:/(^[\t ]*)(?:[+-][a-z\d]|(?:--|\/)[a-z\d-]+)(?:[ =](?:[a-z][\w-]*|<[^<>]+>))?(?:, (?:[+-][a-z\d]|(?:--|\/)[a-z\d-]+)(?:[ =](?:[a-z][\w-]*|<[^<>]+>))?)*(?=(?:\r?\n|\r)? {2,}\S)/im,lookbehind:!0,alias:"symbol"},"literal-block":{pattern:/::(?:\r?\n|\r){2}([ \t]+)(?![ \t]).+(?:(?:\r?\n|\r)\1.+)*/,inside:{"literal-block-punctuation":{pattern:/^::/,alias:"punctuation"}}},"quoted-literal-block":{pattern:/::(?:\r?\n|\r){2}([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]).*(?:(?:\r?\n|\r)\1.*)*/,inside:{"literal-block-punctuation":{pattern:/^(?:::|([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\1*)/m,alias:"punctuation"}}},"list-bullet":{pattern:/(^[\t ]*)(?:[*+\-]|\(?(?:\d+|[a-z]|[ivxdclm]+)\)|(?:\d+|[a-z]|[ivxdclm]+)\.)(?= )/im,lookbehind:!0,alias:"punctuation"},"doctest-block":{pattern:/(^[\t ]*)>>> .+(?:(?:\r?\n|\r).+)*/m,lookbehind:!0,inside:{punctuation:/^>>>/}},inline:[{pattern:/(^|[\s\-:\/'"<(\[{])(?::[^:]+:`.*?`|`.*?`:[^:]+:|(\*\*?|``?|\|)(?!\s)(?:(?!\2).)*\S\2(?=[\s\-.,:;!?\\\/'")\]}]|$))/m,lookbehind:!0,inside:{bold:{pattern:/(^\*\*).+(?=\*\*$)/,lookbehind:!0},italic:{pattern:/(^\*).+(?=\*$)/,lookbehind:!0},"inline-literal":{pattern:/(^``).+(?=``$)/,lookbehind:!0,alias:"symbol"},role:{pattern:/^:[^:]+:|:[^:]+:$/,alias:"function",inside:{punctuation:/^:|:$/}},"interpreted-text":{pattern:/(^`).+(?=`$)/,lookbehind:!0,alias:"attr-value"},substitution:{pattern:/(^\|).+(?=\|$)/,lookbehind:!0,alias:"attr-value"},punctuation:/\*\*?|``?|\|/}}],link:[{pattern:/\[[^\[\]]+\]_(?=[\s\-.,:;!?\\\/'")\]}]|$)/,alias:"string",inside:{punctuation:/^\[|\]_$/}},{pattern:/(?:\b[a-z\d]+(?:[_.:+][a-z\d]+)*_?_|`[^`]+`_?_|_`[^`]+`)(?=[\s\-.,:;!?\\\/'")\]}]|$)/i,alias:"string",inside:{punctuation:/^_?`|`$|`?_?_$/}}],punctuation:{pattern:/(^[\t ]*)(?:\|(?= |$)|(?:---?||\.\.|__)(?= )|\.\.$)/m,lookbehind:!0}}}yM.displayName="rip";yM.aliases=[];function yM(n){n.languages.rip={comment:{pattern:/#.*/,greedy:!0},char:{pattern:/\B`[^\s`'",.:;#\/\\()<>\[\]{}]\b/,greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},regex:{pattern:/(^|[^/])\/(?!\/)(?:\[[^\n\r\]]*\]|\\.|[^/\\\r\n\[])+\/(?=\s*(?:$|[\r\n,.;})]))/,lookbehind:!0,greedy:!0},keyword:/(?:=>|->)|\b(?:case|catch|class|else|exit|finally|if|raise|return|switch|try)\b/,builtin:/@|\bSystem\b/,boolean:/\b(?:false|true)\b/,date:/\b\d{4}-\d{2}-\d{2}\b/,time:/\b\d{2}:\d{2}:\d{2}\b/,datetime:/\b\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\b/,symbol:/:[^\d\s`'",.:;#\/\\()<>\[\]{}][^\s`'",.:;#\/\\()<>\[\]{}]*/,number:/[+-]?\b(?:\d+\.\d+|\d+)\b/,punctuation:/(?:\.{2,3})|[`,.:;=\/\\()<>\[\]{}]/,reference:/[^\d\s`'",.:;#\/\\()<>\[\]{}][^\s`'",.:;#\/\\()<>\[\]{}]*/}}bM.displayName="roboconf";bM.aliases=[];function bM(n){n.languages.roboconf={comment:/#.*/,keyword:{pattern:/(^|\s)(?:(?:external|import)\b|(?:facet|instance of)(?=[ \t]+[\w-]+[ \t]*\{))/,lookbehind:!0},component:{pattern:/[\w-]+(?=[ \t]*\{)/,alias:"variable"},property:/[\w.-]+(?=[ \t]*:)/,value:{pattern:/(=[ \t]*(?![ \t]))[^,;]+/,lookbehind:!0,alias:"attr-value"},optional:{pattern:/\(optional\)/,alias:"builtin"},wildcard:{pattern:/(\.)\*/,lookbehind:!0,alias:"operator"},punctuation:/[{},.;:=]/}}_M.displayName="robotframework";_M.aliases=["robot"];function _M(n){(function(e){var t={pattern:/(^[ \t]*| {2}|\t)#.*/m,lookbehind:!0,greedy:!0},r={pattern:/((?:^|[^\\])(?:\\{2})*)[$@&%]\{(?:[^{}\r\n]|\{[^{}\r\n]*\})*\}/,lookbehind:!0,inside:{punctuation:/^[$@&%]\{|\}$/}};function i(l,u){var c={};c["section-header"]={pattern:/^ ?\*{3}.+?\*{3}/,alias:"keyword"};for(var h in u)c[h]=u[h];return c.tag={pattern:/([\r\n](?: {2}|\t)[ \t]*)\[[-\w]+\]/,lookbehind:!0,inside:{punctuation:/\[|\]/}},c.variable=r,c.comment=t,{pattern:RegExp(/^ ?\*{3}[ \t]*<name>[ \t]*\*{3}(?:.|[\r\n](?!\*{3}))*/.source.replace(/<name>/g,function(){return l}),"im"),alias:"section",inside:c}}var s={pattern:/(\[Documentation\](?: {2}|\t)[ \t]*)(?![ \t]|#)(?:.|(?:\r\n?|\n)[ \t]*\.{3})+/,lookbehind:!0,alias:"string"},a={pattern:/([\r\n] ?)(?!#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0,alias:"function",inside:{variable:r}},o={pattern:/([\r\n](?: {2}|\t)[ \t]*)(?!\[|\.{3}|#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0,inside:{variable:r}};e.languages.robotframework={settings:i("Settings",{documentation:{pattern:/([\r\n] ?Documentation(?: {2}|\t)[ \t]*)(?![ \t]|#)(?:.|(?:\r\n?|\n)[ \t]*\.{3})+/,lookbehind:!0,alias:"string"},property:{pattern:/([\r\n] ?)(?!\.{3}|#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0}}),variables:i("Variables"),"test-cases":i("Test Cases",{"test-name":a,documentation:s,property:o}),keywords:i("Keywords",{"keyword-name":a,documentation:s,property:o}),tasks:i("Tasks",{"task-name":a,documentation:s,property:o}),comment:t},e.languages.robot=e.languages.robotframework})(n)}vM.displayName="rust";vM.aliases=[];function vM(n){(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(n)}xM.displayName="sas";xM.aliases=[];function xM(n){(function(e){var t=/(?:"(?:""|[^"])*"(?!")|'(?:''|[^'])*'(?!'))/.source,r=/\b(?:\d[\da-f]*x|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,i={pattern:RegExp(t+"[bx]"),alias:"number"},s={pattern:/&[a-z_]\w*/i},a={pattern:/((?:^|\s|=|\())%(?:ABORT|BY|CMS|COPY|DISPLAY|DO|ELSE|END|EVAL|GLOBAL|GO|GOTO|IF|INC|INCLUDE|INDEX|INPUT|KTRIM|LENGTH|LET|LIST|LOCAL|PUT|QKTRIM|QSCAN|QSUBSTR|QSYSFUNC|QUPCASE|RETURN|RUN|SCAN|SUBSTR|SUPERQ|SYMDEL|SYMEXIST|SYMGLOBL|SYMLOCAL|SYSCALL|SYSEVALF|SYSEXEC|SYSFUNC|SYSGET|SYSRPUT|THEN|TO|TSO|UNQUOTE|UNTIL|UPCASE|WHILE|WINDOW)\b/i,lookbehind:!0,alias:"keyword"},o={pattern:/(^|\s)(?:proc\s+\w+|data(?!=)|quit|run)\b/i,alias:"keyword",lookbehind:!0},l=[/\/\*[\s\S]*?\*\//,{pattern:/(^[ \t]*|;\s*)\*[^;]*;/m,lookbehind:!0}],u={pattern:RegExp(t),greedy:!0},c=/[$%@.(){}\[\];,\\]/,h={pattern:/%?\b\w+(?=\()/,alias:"keyword"},f={function:h,"arg-value":{pattern:/(=\s*)[A-Z\.]+/i,lookbehind:!0},operator:/=/,"macro-variable":s,arg:{pattern:/[A-Z]+/i,alias:"keyword"},number:r,"numeric-constant":i,punctuation:c,string:u},g={pattern:/\b(?:format|put)\b=?[\w'$.]+/i,inside:{keyword:/^(?:format|put)(?==)/i,equals:/=/,format:{pattern:/(?:\w|\$\d)+\.\d?/,alias:"number"}}},m={pattern:/\b(?:format|put)\s+[\w']+(?:\s+[$.\w]+)+(?=;)/i,inside:{keyword:/^(?:format|put)/i,format:{pattern:/[\w$]+\.\d?/,alias:"number"}}},v={pattern:/((?:^|\s)=?)(?:catname|checkpoint execute_always|dm|endsas|filename|footnote|%include|libname|%list|lock|missing|options|page|resetline|%run|sasfile|skip|sysecho|title\d?)\b/i,lookbehind:!0,alias:"keyword"},_={pattern:/(^|\s)(?:submit(?:\s+(?:load|norun|parseonly))?|endsubmit)\b/i,lookbehind:!0,alias:"keyword"},b=/aStore|accessControl|aggregation|audio|autotune|bayesianNetClassifier|bioMedImage|boolRule|builtins|cardinality|cdm|clustering|conditionalRandomFields|configuration|copula|countreg|dataDiscovery|dataPreprocess|dataSciencePilot|dataStep|decisionTree|deduplication|deepLearn|deepNeural|deepRnn|ds2|ecm|entityRes|espCluster|explainModel|factmac|fastKnn|fcmpact|fedSql|freqTab|gVarCluster|gam|gleam|graphSemiSupLearn|hiddenMarkovModel|hyperGroup|ica|image|iml|kernalPca|langModel|ldaTopic|loadStreams|mbc|mixed|mlTools|modelPublishing|network|neuralNet|nmf|nonParametricBayes|nonlinear|optNetwork|optimization|panel|pca|percentile|phreg|pls|qkb|qlim|quantreg|recommend|regression|reinforcementLearn|robustPca|ruleMining|sampling|sandwich|sccasl|search(?:Analytics)?|sentimentAnalysis|sequence|session(?:Prop)?|severity|simSystem|simple|smartData|sparkEmbeddedProcess|sparseML|spatialreg|spc|stabilityMonitoring|svDataDescription|svm|table|text(?:Filters|Frequency|Mining|Parse|Rule(?:Develop|Score)|Topic|Util)|timeData|transpose|tsInfo|tsReconcile|uniTimeSeries|varReduce/.source,S={pattern:RegExp(/(^|\s)(?:action\s+)?(?:<act>)\.[a-z]+\b[^;]+/.source.replace(/<act>/g,function(){return b}),"i"),lookbehind:!0,inside:{keyword:RegExp(/(?:<act>)\.[a-z]+\b/.source.replace(/<act>/g,function(){return b}),"i"),action:{pattern:/(?:action)/i,alias:"keyword"},comment:l,function:h,"arg-value":f["arg-value"],operator:f.operator,argument:f.arg,number:r,"numeric-constant":i,punctuation:c,string:u}},E={pattern:/((?:^|\s)=?)(?:after|analysis|and|array|barchart|barwidth|begingraph|by|call|cas|cbarline|cfill|class(?:lev)?|close|column|computed?|contains|continue|data(?==)|define|delete|describe|document|do\s+over|do|dol|drop|dul|else|end(?:comp|source)?|entryTitle|eval(?:uate)?|exec(?:ute)?|exit|file(?:name)?|fill(?:attrs)?|flist|fnc|function(?:list)?|global|goto|group(?:by)?|headline|headskip|histogram|if|infile|keep|keylabel|keyword|label|layout|leave|legendlabel|length|libname|loadactionset|merge|midpoints|_?null_|name|noobs|nowd|ods|options|or|otherwise|out(?:put)?|over(?:lay)?|plot|print|put|raise|ranexp|rannor|rbreak|retain|return|select|session|sessref|set|source|statgraph|sum|summarize|table|temp|terminate|then\s+do|then|title\d?|to|var|when|where|xaxisopts|y2axisopts|yaxisopts)\b/i,lookbehind:!0};e.languages.sas={datalines:{pattern:/^([ \t]*)(?:cards|(?:data)?lines);[\s\S]+?^[ \t]*;/im,lookbehind:!0,alias:"string",inside:{keyword:{pattern:/^(?:cards|(?:data)?lines)/i},punctuation:/;/}},"proc-sql":{pattern:/(^proc\s+(?:fed)?sql(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{sql:{pattern:RegExp(/^[ \t]*(?:select|alter\s+table|(?:create|describe|drop)\s+(?:index|table(?:\s+constraints)?|view)|create\s+unique\s+index|insert\s+into|update)(?:<str>|[^;"'])+;/.source.replace(/<str>/g,function(){return t}),"im"),alias:"language-sql",inside:e.languages.sql},"global-statements":v,"sql-statements":{pattern:/(^|\s)(?:disconnect\s+from|begin|commit|exec(?:ute)?|reset|rollback|validate)\b/i,lookbehind:!0,alias:"keyword"},number:r,"numeric-constant":i,punctuation:c,string:u}},"proc-groovy":{pattern:/(^proc\s+groovy(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:l,groovy:{pattern:RegExp(/(^[ \t]*submit(?:\s+(?:load|norun|parseonly))?)(?:<str>|[^"'])+?(?=endsubmit;)/.source.replace(/<str>/g,function(){return t}),"im"),lookbehind:!0,alias:"language-groovy",inside:e.languages.groovy},keyword:E,"submit-statement":_,"global-statements":v,number:r,"numeric-constant":i,punctuation:c,string:u}},"proc-lua":{pattern:/(^proc\s+lua(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:l,lua:{pattern:RegExp(/(^[ \t]*submit(?:\s+(?:load|norun|parseonly))?)(?:<str>|[^"'])+?(?=endsubmit;)/.source.replace(/<str>/g,function(){return t}),"im"),lookbehind:!0,alias:"language-lua",inside:e.languages.lua},keyword:E,"submit-statement":_,"global-statements":v,number:r,"numeric-constant":i,punctuation:c,string:u}},"proc-cas":{pattern:/(^proc\s+cas(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|quit|data);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:l,"statement-var":{pattern:/((?:^|\s)=?)saveresult\s[^;]+/im,lookbehind:!0,inside:{statement:{pattern:/^saveresult\s+\S+/i,inside:{keyword:/^(?:saveresult)/i}},rest:f}},"cas-actions":S,statement:{pattern:/((?:^|\s)=?)(?:default|(?:un)?set|on|output|upload)[^;]+/im,lookbehind:!0,inside:f},step:o,keyword:E,function:h,format:g,altformat:m,"global-statements":v,number:r,"numeric-constant":i,punctuation:c,string:u}},"proc-args":{pattern:RegExp(/(^proc\s+\w+\s+)(?!\s)(?:[^;"']|<str>)+;/.source.replace(/<str>/g,function(){return t}),"im"),lookbehind:!0,inside:f},"macro-keyword":a,"macro-variable":s,"macro-string-functions":{pattern:/((?:^|\s|=))%(?:BQUOTE|NRBQUOTE|NRQUOTE|NRSTR|QUOTE|STR)\(.*?(?:[^%]\))/i,lookbehind:!0,inside:{function:{pattern:/%(?:BQUOTE|NRBQUOTE|NRQUOTE|NRSTR|QUOTE|STR)/i,alias:"keyword"},"macro-keyword":a,"macro-variable":s,"escaped-char":{pattern:/%['"()<>=^~;,#]/},punctuation:c}},"macro-declaration":{pattern:/^%macro[^;]+(?=;)/im,inside:{keyword:/%macro/i}},"macro-end":{pattern:/^%mend[^;]+(?=;)/im,inside:{keyword:/%mend/i}},macro:{pattern:/%_\w+(?=\()/,alias:"keyword"},input:{pattern:/\binput\s[-\w\s/*.$&]+;/i,inside:{input:{alias:"keyword",pattern:/^input/i},comment:l,number:r,"numeric-constant":i}},"options-args":{pattern:/(^options)[-'"|/\\<>*+=:()\w\s]*(?=;)/im,lookbehind:!0,inside:f},"cas-actions":S,comment:l,function:h,format:g,altformat:m,"numeric-constant":i,datetime:{pattern:RegExp(t+"(?:dt?|t)"),alias:"number"},string:u,step:o,keyword:E,"operator-keyword":{pattern:/\b(?:eq|ge|gt|in|le|lt|ne|not)\b/i,alias:"operator"},number:r,operator:/\*\*?|\|\|?|!!?|?|<[>=]?|>[<=]?|[-+\/=&]|[~^]=?/,punctuation:c}})(n)}SM.displayName="sass";SM.aliases=[];function SM(n){n.register(cc),(function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete e.languages.sass.atrule;var t=/\$[-\w]+|#\{\$[-\w]+\}/,r=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:t,operator:r}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:t,operator:r,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})})(n)}EM.displayName="shell-session";EM.aliases=["sh-session","shellsession"];function EM(n){n.register($_),(function(e){var t=[/"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/.source,/'[^']*'/.source,/\$'(?:[^'\\]|\\[\s\S])*'/.source,/<<-?\s*(["']?)(\w+)\1\s[\s\S]*?[\r\n]\2/.source].join("|");e.languages["shell-session"]={command:{pattern:RegExp(/^/.source+"(?:"+(/[^\s@:$#%*!/\\]+@[^\r\n@:$#%*!/\\]+(?::[^\0-\x1F$#%*?"<>:;|]+)?/.source+"|"+/[/~.][^\0-\x1F$#%*?"<>@:;|]*/.source)+")?"+/[$#%](?=\s)/.source+/(?:[^\\\r\n \t'"<$]|[ \t](?:(?!#)|#.*$)|\\(?:[^\r]|\r\n?)|\$(?!')|<(?!<)|<<str>>)+/.source.replace(/<<str>>/g,function(){return t}),"m"),greedy:!0,inside:{info:{pattern:/^[^#$%]+/,alias:"punctuation",inside:{user:/^[^\s@:$#%*!/\\]+@[^\r\n@:$#%*!/\\]+/,punctuation:/:/,path:/[\s\S]+/}},bash:{pattern:/(^[$#%]\s*)\S[\s\S]*/,lookbehind:!0,alias:"language-bash",inside:e.languages.bash},"shell-symbol":{pattern:/^[$#%]/,alias:"important"}}},output:/.(?:.*(?:[\r\n]|.$))*/},e.languages["sh-session"]=e.languages.shellsession=e.languages["shell-session"]})(n)}TM.displayName="smali";TM.aliases=[];function TM(n){n.languages.smali={comment:/#.*/,string:{pattern:/"(?:[^\r\n\\"]|\\.)*"|'(?:[^\r\n\\']|\\(?:.|u[\da-fA-F]{4}))'/,greedy:!0},"class-name":{pattern:/(^|[^L])L(?:(?:\w+|`[^`\r\n]*`)\/)*(?:[\w$]+|`[^`\r\n]*`)(?=\s*;)/,lookbehind:!0,inside:{"class-name":{pattern:/(^L|\/)(?:[\w$]+|`[^`\r\n]*`)$/,lookbehind:!0},namespace:{pattern:/^(L)(?:(?:\w+|`[^`\r\n]*`)\/)+/,lookbehind:!0,inside:{punctuation:/\//}},builtin:/^L/}},builtin:[{pattern:/([();\[])[BCDFIJSVZ]+/,lookbehind:!0},{pattern:/([\w$>]:)[BCDFIJSVZ]/,lookbehind:!0}],keyword:[{pattern:/(\.end\s+)[\w-]+/,lookbehind:!0},{pattern:/(^|[^\w.-])\.(?!\d)[\w-]+/,lookbehind:!0},{pattern:/(^|[^\w.-])(?:abstract|annotation|bridge|constructor|enum|final|interface|private|protected|public|runtime|static|synthetic|system|transient)(?![\w.-])/,lookbehind:!0}],function:{pattern:/(^|[^\w.-])(?:\w+|<[\w$-]+>)(?=\()/,lookbehind:!0},field:{pattern:/[\w$]+(?=:)/,alias:"variable"},register:{pattern:/(^|[^\w.-])[vp]\d(?![\w.-])/,lookbehind:!0,alias:"variable"},boolean:{pattern:/(^|[^\w.-])(?:false|true)(?![\w.-])/,lookbehind:!0},number:{pattern:/(^|[^/\w.-])-?(?:NAN|INFINITY|0x(?:[\dA-F]+(?:\.[\dA-F]*)?|\.[\dA-F]+)(?:p[+-]?[\dA-F]+)?|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)[dflst]?(?![\w.-])/i,lookbehind:!0},label:{pattern:/(:)\w+/,lookbehind:!0,alias:"property"},operator:/->|\.\.|[\[=]/,punctuation:/[{}(),;:]/}}wM.displayName="smalltalk";wM.aliases=[];function wM(n){n.languages.smalltalk={comment:{pattern:/"(?:""|[^"])*"/,greedy:!0},char:{pattern:/\$./,greedy:!0},string:{pattern:/'(?:''|[^'])*'/,greedy:!0},symbol:/#[\da-z]+|#(?:-|([+\/\\*~<>=@%|&?!])\1?)|#(?=\()/i,"block-arguments":{pattern:/(\[\s*):[^\[|]*\|/,lookbehind:!0,inside:{variable:/:[\da-z]+/i,punctuation:/\|/}},"temporary-variables":{pattern:/\|[^|]+\|/,inside:{variable:/[\da-z]+/i,punctuation:/\|/}},keyword:/\b(?:new|nil|self|super)\b/,boolean:/\b(?:false|true)\b/,number:[/\d+r-?[\dA-Z]+(?:\.[\dA-Z]+)?(?:e-?\d+)?/,/\b\d+(?:\.\d+)?(?:e-?\d+)?/],operator:/[<=]=?|:=|~[~=]|\/\/?|\\\\|>[>=]?|[!^+\-*&|,@]/,punctuation:/[.;:?\[\](){}]/}}AM.displayName="smarty";AM.aliases=[];function AM(n){n.register(vi),(function(e){e.languages.smarty={comment:{pattern:/^\{\*[\s\S]*?\*\}/,greedy:!0},"embedded-php":{pattern:/^\{php\}[\s\S]*?\{\/php\}/,greedy:!0,inside:{smarty:{pattern:/^\{php\}|\{\/php\}$/,inside:null},php:{pattern:/[\s\S]+/,alias:"language-php",inside:e.languages.php}}},string:[{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0,inside:{interpolation:{pattern:/\{[^{}]*\}|`[^`]*`/,inside:{"interpolation-punctuation":{pattern:/^[{`]|[`}]$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}},variable:/\$\w+/}},{pattern:/'(?:\\.|[^'\\\r\n])*'/,greedy:!0}],keyword:{pattern:/(^\{\/?)[a-z_]\w*\b(?!\()/i,lookbehind:!0,greedy:!0},delimiter:{pattern:/^\{\/?|\}$/,greedy:!0,alias:"punctuation"},number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,variable:[/\$(?!\d)\w+/,/#(?!\d)\w+#/,{pattern:/(\.|->|\w\s*=)(?!\d)\w+\b(?!\()/,lookbehind:!0},{pattern:/(\[)(?!\d)\w+(?=\])/,lookbehind:!0}],function:{pattern:/(\|\s*)@?[a-z_]\w*|\b[a-z_]\w*(?=\()/i,lookbehind:!0},"attr-name":/\b[a-z_]\w*(?=\s*=)/i,boolean:/\b(?:false|no|off|on|true|yes)\b/,punctuation:/[\[\](){}.,:`]|->/,operator:[/[+\-*\/%]|==?=?|[!<>]=?|&&|\|\|?/,/\bis\s+(?:not\s+)?(?:div|even|odd)(?:\s+by)?\b/,/\b(?:and|eq|gt?e|gt|lt?e|lt|mod|neq?|not|or)\b/]},e.languages.smarty["embedded-php"].inside.smarty.inside=e.languages.smarty,e.languages.smarty.string[0].inside.interpolation.inside.expression.inside=e.languages.smarty;var t=/"(?:\\.|[^"\\\r\n])*"|'(?:\\.|[^'\\\r\n])*'/,r=RegExp(/\{\*[\s\S]*?\*\}/.source+"|"+/\{php\}[\s\S]*?\{\/php\}/.source+"|"+/\{(?:[^{}"']|<str>|\{(?:[^{}"']|<str>|\{(?:[^{}"']|<str>)*\})*\})*\}/.source.replace(/<str>/g,function(){return t.source}),"g");e.hooks.add("before-tokenize",function(i){var s="{literal}",a="{/literal}",o=!1;e.languages["markup-templating"].buildPlaceholders(i,"smarty",r,function(l){return l===a&&(o=!1),o?!1:(l===s&&(o=!0),!0)})}),e.hooks.add("after-tokenize",function(i){e.languages["markup-templating"].tokenizePlaceholders(i,"smarty")})})(n)}RM.displayName="sml";RM.aliases=["smlnj"];function RM(n){(function(e){var t=/\b(?:abstype|and|andalso|as|case|datatype|do|else|end|eqtype|exception|fn|fun|functor|handle|if|in|include|infix|infixr|let|local|nonfix|of|op|open|orelse|raise|rec|sharing|sig|signature|struct|structure|then|type|val|where|while|with|withtype)\b/i;e.languages.sml={comment:/\(\*(?:[^*(]|\*(?!\))|\((?!\*)|\(\*(?:[^*(]|\*(?!\))|\((?!\*))*\*\))*\*\)/,string:{pattern:/#?"(?:[^"\\]|\\.)*"/,greedy:!0},"class-name":[{pattern:RegExp(/((?:^|[^:]):\s*)<TERMINAL>(?:\s*(?:(?:\*|->)\s*<TERMINAL>|,\s*<TERMINAL>(?:(?=<NOT-LAST>)|(?!<NOT-LAST>)\s+<LONG-ID>)))*/.source.replace(/<NOT-LAST>/g,function(){return/\s*(?:[*,]|->)/.source}).replace(/<TERMINAL>/g,function(){return/(?:'[\w']*|<LONG-ID>|\((?:[^()]|\([^()]*\))*\)|\{(?:[^{}]|\{[^{}]*\})*\})(?:\s+<LONG-ID>)*/.source}).replace(/<LONG-ID>/g,function(){return/(?!<KEYWORD>)[a-z\d_][\w'.]*/.source}).replace(/<KEYWORD>/g,function(){return t.source}),"i"),lookbehind:!0,greedy:!0,inside:null},{pattern:/((?:^|[^\w'])(?:datatype|exception|functor|signature|structure|type)\s+)[a-z_][\w'.]*/i,lookbehind:!0}],function:{pattern:/((?:^|[^\w'])fun\s+)[a-z_][\w'.]*/i,lookbehind:!0},keyword:t,variable:{pattern:/(^|[^\w'])'[\w']*/,lookbehind:!0},number:/~?\b(?:\d+(?:\.\d+)?(?:e~?\d+)?|0x[\da-f]+)\b/i,word:{pattern:/\b0w(?:\d+|x[\da-f]+)\b/i,alias:"constant"},boolean:/\b(?:false|true)\b/i,operator:/\.\.\.|:[>=:]|=>?|->|[<>]=?|[!+\-*/^#|@~]/,punctuation:/[(){}\[\].:,;]/},e.languages.sml["class-name"][0].inside=e.languages.sml,e.languages.smlnj=e.languages.sml})(n)}NM.displayName="solidity";NM.aliases=["sol"];function NM(n){n.register(cn),n.languages.solidity=n.languages.extend("clike",{"class-name":{pattern:/(\b(?:contract|enum|interface|library|new|struct|using)\s+)(?!\d)[\w$]+/,lookbehind:!0},keyword:/\b(?:_|anonymous|as|assembly|assert|break|calldata|case|constant|constructor|continue|contract|default|delete|do|else|emit|enum|event|external|for|from|function|if|import|indexed|inherited|interface|internal|is|let|library|mapping|memory|modifier|new|payable|pragma|private|public|pure|require|returns?|revert|selfdestruct|solidity|storage|struct|suicide|switch|this|throw|using|var|view|while)\b/,operator:/=>|->|:=|=:|\*\*|\+\+|--|\|\||&&|<<=?|>>=?|[-+*/%^&|<>!=]=?|[~?]/}),n.languages.insertBefore("solidity","keyword",{builtin:/\b(?:address|bool|byte|u?int(?:8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?|string|bytes(?:[1-9]|[12]\d|3[0-2])?)\b/}),n.languages.insertBefore("solidity","number",{version:{pattern:/([<>]=?|\^)\d+\.\d+\.\d+\b/,lookbehind:!0,alias:"number"}}),n.languages.sol=n.languages.solidity}CM.displayName="solution-file";CM.aliases=["sln"];function CM(n){(function(e){var t={pattern:/\{[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}\}/i,alias:"constant",inside:{punctuation:/[{}]/}};e.languages["solution-file"]={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0,inside:{guid:t}},object:{pattern:/^([ \t]*)(?:([A-Z]\w*)\b(?=.*(?:\r\n?|\n)(?:\1[ \t].*(?:\r\n?|\n))*\1End\2(?=[ \t]*$))|End[A-Z]\w*(?=[ \t]*$))/m,lookbehind:!0,greedy:!0,alias:"keyword"},property:{pattern:/^([ \t]*)(?!\s)[^\r\n"#=()]*[^\s"#=()](?=\s*=)/m,lookbehind:!0,inside:{guid:t}},guid:t,number:/\b\d+(?:\.\d+)*\b/,boolean:/\b(?:FALSE|TRUE)\b/,operator:/=/,punctuation:/[(),]/},e.languages.sln=e.languages["solution-file"]})(n)}MM.displayName="soy";MM.aliases=[];function MM(n){n.register(vi),(function(e){var t=/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,r=/\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\b0x[\dA-F]+\b/;e.languages.soy={comment:[/\/\*[\s\S]*?\*\//,{pattern:/(\s)\/\/.*/,lookbehind:!0,greedy:!0}],"command-arg":{pattern:/(\{+\/?\s*(?:alias|call|delcall|delpackage|deltemplate|namespace|template)\s+)\.?[\w.]+/,lookbehind:!0,alias:"string",inside:{punctuation:/\./}},parameter:{pattern:/(\{+\/?\s*@?param\??\s+)\.?[\w.]+/,lookbehind:!0,alias:"variable"},keyword:[{pattern:/(\{+\/?[^\S\r\n]*)(?:\\[nrt]|alias|call|case|css|default|delcall|delpackage|deltemplate|else(?:if)?|fallbackmsg|for(?:each)?|if(?:empty)?|lb|let|literal|msg|namespace|nil|@?param\??|rb|sp|switch|template|xid)/,lookbehind:!0},/\b(?:any|as|attributes|bool|css|float|html|in|int|js|list|map|null|number|string|uri)\b/],delimiter:{pattern:/^\{+\/?|\/?\}+$/,alias:"punctuation"},property:/\w+(?==)/,variable:{pattern:/\$[^\W\d]\w*(?:\??(?:\.\w+|\[[^\]]+\]))*/,inside:{string:{pattern:t,greedy:!0},number:r,punctuation:/[\[\].?]/}},string:{pattern:t,greedy:!0},function:[/\w+(?=\()/,{pattern:/(\|[^\S\r\n]*)\w+/,lookbehind:!0}],boolean:/\b(?:false|true)\b/,number:r,operator:/\?:?|<=?|>=?|==?|!=|[+*/%-]|\b(?:and|not|or)\b/,punctuation:/[{}()\[\]|.,:]/},e.hooks.add("before-tokenize",function(i){var s=/\{\{.+?\}\}|\{.+?\}|\s\/\/.*|\/\*[\s\S]*?\*\//g,a="{literal}",o="{/literal}",l=!1;e.languages["markup-templating"].buildPlaceholders(i,"soy",s,function(u){return u===o&&(l=!1),l?!1:(u===a&&(l=!0),!0)})}),e.hooks.add("after-tokenize",function(i){e.languages["markup-templating"].tokenizePlaceholders(i,"soy")})})(n)}K_.displayName="turtle";K_.aliases=["trig"];function K_(n){n.languages.turtle={comment:{pattern:/#.*/,greedy:!0},"multiline-string":{pattern:/"""(?:(?:""?)?(?:[^"\\]|\\.))*"""|'''(?:(?:''?)?(?:[^'\\]|\\.))*'''/,greedy:!0,alias:"string",inside:{comment:/#.*/}},string:{pattern:/"(?:[^\\"\r\n]|\\.)*"|'(?:[^\\'\r\n]|\\.)*'/,greedy:!0},url:{pattern:/<(?:[^\x00-\x20<>"{}|^`\\]|\\(?:u[\da-fA-F]{4}|U[\da-fA-F]{8}))*>/,greedy:!0,inside:{punctuation:/[<>]/}},function:{pattern:/(?:(?![-.\d\xB7])[-.\w\xB7\xC0-\uFFFD]+)?:(?:(?![-.])(?:[-.:\w\xC0-\uFFFD]|%[\da-f]{2}|\\.)+)?/i,inside:{"local-name":{pattern:/([^:]*:)[\s\S]+/,lookbehind:!0},prefix:{pattern:/[\s\S]+/,inside:{punctuation:/:/}}}},number:/[+-]?\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,punctuation:/[{}.,;()[\]]|\^\^/,boolean:/\b(?:false|true)\b/,keyword:[/(?:\ba|@prefix|@base)\b|=/,/\b(?:base|graph|prefix)\b/i],tag:{pattern:/@[a-z]+(?:-[a-z\d]+)*/i,inside:{punctuation:/@/}}},n.languages.trig=n.languages.turtle}IM.displayName="sparql";IM.aliases=["rq"];function IM(n){n.register(K_),n.languages.sparql=n.languages.extend("turtle",{boolean:/\b(?:false|true)\b/i,variable:{pattern:/[?$]\w+/,greedy:!0}}),n.languages.insertBefore("sparql","punctuation",{keyword:[/\b(?:A|ADD|ALL|AS|ASC|ASK|BNODE|BY|CLEAR|CONSTRUCT|COPY|CREATE|DATA|DEFAULT|DELETE|DESC|DESCRIBE|DISTINCT|DROP|EXISTS|FILTER|FROM|GROUP|HAVING|INSERT|INTO|LIMIT|LOAD|MINUS|MOVE|NAMED|NOT|NOW|OFFSET|OPTIONAL|ORDER|RAND|REDUCED|SELECT|SEPARATOR|SERVICE|SILENT|STRUUID|UNION|USING|UUID|VALUES|WHERE)\b/i,/\b(?:ABS|AVG|BIND|BOUND|CEIL|COALESCE|CONCAT|CONTAINS|COUNT|DATATYPE|DAY|ENCODE_FOR_URI|FLOOR|GROUP_CONCAT|HOURS|IF|IRI|isBLANK|isIRI|isLITERAL|isNUMERIC|isURI|LANG|LANGMATCHES|LCASE|MAX|MD5|MIN|MINUTES|MONTH|REGEX|REPLACE|ROUND|sameTerm|SAMPLE|SECONDS|SHA1|SHA256|SHA384|SHA512|STR|STRAFTER|STRBEFORE|STRDT|STRENDS|STRLANG|STRLEN|STRSTARTS|SUBSTR|SUM|TIMEZONE|TZ|UCASE|URI|YEAR)\b(?=\s*\()/i,/\b(?:BASE|GRAPH|PREFIX)\b/i]}),n.languages.rq=n.languages.sparql}kM.displayName="splunk-spl";kM.aliases=[];function kM(n){n.languages["splunk-spl"]={comment:/`comment\("(?:\\.|[^\\"])*"\)`/,string:{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0},keyword:/\b(?:abstract|accum|addcoltotals|addinfo|addtotals|analyzefields|anomalies|anomalousvalue|anomalydetection|append|appendcols|appendcsv|appendlookup|appendpipe|arules|associate|audit|autoregress|bin|bucket|bucketdir|chart|cluster|cofilter|collect|concurrency|contingency|convert|correlate|datamodel|dbinspect|dedup|delete|delta|diff|erex|eval|eventcount|eventstats|extract|fieldformat|fields|fieldsummary|filldown|fillnull|findtypes|folderize|foreach|format|from|gauge|gentimes|geom|geomfilter|geostats|head|highlight|history|iconify|input|inputcsv|inputlookup|iplocation|join|kmeans|kv|kvform|loadjob|localize|localop|lookup|makecontinuous|makemv|makeresults|map|mcollect|metadata|metasearch|meventcollect|mstats|multikv|multisearch|mvcombine|mvexpand|nomv|outlier|outputcsv|outputlookup|outputtext|overlap|pivot|predict|rangemap|rare|regex|relevancy|reltime|rename|replace|rest|return|reverse|rex|rtorder|run|savedsearch|script|scrub|search|searchtxn|selfjoin|sendemail|set|setfields|sichart|sirare|sistats|sitimechart|sitop|sort|spath|stats|strcat|streamstats|table|tags|tail|timechart|timewrap|top|transaction|transpose|trendline|tscollect|tstats|typeahead|typelearner|typer|union|uniq|untable|where|x11|xmlkv|xmlunescape|xpath|xyseries)\b/i,"operator-word":{pattern:/\b(?:and|as|by|not|or|xor)\b/i,alias:"operator"},function:/\b\w+(?=\s*\()/,property:/\b\w+(?=\s*=(?!=))/,date:{pattern:/\b\d{1,2}\/\d{1,2}\/\d{1,4}(?:(?::\d{1,2}){3})?\b/,alias:"number"},number:/\b\d+(?:\.\d+)?\b/,boolean:/\b(?:f|false|t|true)\b/i,operator:/[<>=]=?|[-+*/%|]/,punctuation:/[()[\],]/}}LM.displayName="sqf";LM.aliases=[];function LM(n){n.register(cn),n.languages.sqf=n.languages.extend("clike",{string:{pattern:/"(?:(?:"")?[^"])*"(?!")|'(?:[^'])*'/,greedy:!0},keyword:/\b(?:breakOut|breakTo|call|case|catch|default|do|echo|else|execFSM|execVM|exitWith|for|forEach|forEachMember|forEachMemberAgent|forEachMemberTeam|from|goto|if|nil|preprocessFile|preprocessFileLineNumbers|private|scopeName|spawn|step|switch|then|throw|to|try|while|with)\b/i,boolean:/\b(?:false|true)\b/i,function:/\b(?:abs|accTime|acos|action|actionIDs|actionKeys|actionKeysImages|actionKeysNames|actionKeysNamesArray|actionName|actionParams|activateAddons|activatedAddons|activateKey|add3DENConnection|add3DENEventHandler|add3DENLayer|addAction|addBackpack|addBackpackCargo|addBackpackCargoGlobal|addBackpackGlobal|addCamShake|addCuratorAddons|addCuratorCameraArea|addCuratorEditableObjects|addCuratorEditingArea|addCuratorPoints|addEditorObject|addEventHandler|addForce|addForceGeneratorRTD|addGoggles|addGroupIcon|addHandgunItem|addHeadgear|addItem|addItemCargo|addItemCargoGlobal|addItemPool|addItemToBackpack|addItemToUniform|addItemToVest|addLiveStats|addMagazine|addMagazineAmmoCargo|addMagazineCargo|addMagazineCargoGlobal|addMagazineGlobal|addMagazinePool|addMagazines|addMagazineTurret|addMenu|addMenuItem|addMissionEventHandler|addMPEventHandler|addMusicEventHandler|addOwnedMine|addPlayerScores|addPrimaryWeaponItem|addPublicVariableEventHandler|addRating|addResources|addScore|addScoreSide|addSecondaryWeaponItem|addSwitchableUnit|addTeamMember|addToRemainsCollector|addTorque|addUniform|addVehicle|addVest|addWaypoint|addWeapon|addWeaponCargo|addWeaponCargoGlobal|addWeaponGlobal|addWeaponItem|addWeaponPool|addWeaponTurret|admin|agent|agents|AGLToASL|aimedAtTarget|aimPos|airDensityCurveRTD|airDensityRTD|airplaneThrottle|airportSide|AISFinishHeal|alive|all3DENEntities|allAirports|allControls|allCurators|allCutLayers|allDead|allDeadMen|allDisplays|allGroups|allMapMarkers|allMines|allMissionObjects|allow3DMode|allowCrewInImmobile|allowCuratorLogicIgnoreAreas|allowDamage|allowDammage|allowFileOperations|allowFleeing|allowGetIn|allowSprint|allPlayers|allSimpleObjects|allSites|allTurrets|allUnits|allUnitsUAV|allVariables|ammo|ammoOnPylon|animate|animateBay|animateDoor|animatePylon|animateSource|animationNames|animationPhase|animationSourcePhase|animationState|append|apply|armoryPoints|arrayIntersect|asin|ASLToAGL|ASLToATL|assert|assignAsCargo|assignAsCargoIndex|assignAsCommander|assignAsDriver|assignAsGunner|assignAsTurret|assignCurator|assignedCargo|assignedCommander|assignedDriver|assignedGunner|assignedItems|assignedTarget|assignedTeam|assignedVehicle|assignedVehicleRole|assignItem|assignTeam|assignToAirport|atan|atan2|atg|ATLToASL|attachedObject|attachedObjects|attachedTo|attachObject|attachTo|attackEnabled|backpack|backpackCargo|backpackContainer|backpackItems|backpackMagazines|backpackSpaceFor|behaviour|benchmark|binocular|blufor|boundingBox|boundingBoxReal|boundingCenter|briefingName|buildingExit|buildingPos|buldozer_EnableRoadDiag|buldozer_IsEnabledRoadDiag|buldozer_LoadNewRoads|buldozer_reloadOperMap|buttonAction|buttonSetAction|cadetMode|callExtension|camCommand|camCommit|camCommitPrepared|camCommitted|camConstuctionSetParams|camCreate|camDestroy|cameraEffect|cameraEffectEnableHUD|cameraInterest|cameraOn|cameraView|campaignConfigFile|camPreload|camPreloaded|camPrepareBank|camPrepareDir|camPrepareDive|camPrepareFocus|camPrepareFov|camPrepareFovRange|camPreparePos|camPrepareRelPos|camPrepareTarget|camSetBank|camSetDir|camSetDive|camSetFocus|camSetFov|camSetFovRange|camSetPos|camSetRelPos|camSetTarget|camTarget|camUseNVG|canAdd|canAddItemToBackpack|canAddItemToUniform|canAddItemToVest|cancelSimpleTaskDestination|canFire|canMove|canSlingLoad|canStand|canSuspend|canTriggerDynamicSimulation|canUnloadInCombat|canVehicleCargo|captive|captiveNum|cbChecked|cbSetChecked|ceil|channelEnabled|cheatsEnabled|checkAIFeature|checkVisibility|civilian|className|clear3DENAttribute|clear3DENInventory|clearAllItemsFromBackpack|clearBackpackCargo|clearBackpackCargoGlobal|clearForcesRTD|clearGroupIcons|clearItemCargo|clearItemCargoGlobal|clearItemPool|clearMagazineCargo|clearMagazineCargoGlobal|clearMagazinePool|clearOverlay|clearRadio|clearVehicleInit|clearWeaponCargo|clearWeaponCargoGlobal|clearWeaponPool|clientOwner|closeDialog|closeDisplay|closeOverlay|collapseObjectTree|collect3DENHistory|collectiveRTD|combatMode|commandArtilleryFire|commandChat|commander|commandFire|commandFollow|commandFSM|commandGetOut|commandingMenu|commandMove|commandRadio|commandStop|commandSuppressiveFire|commandTarget|commandWatch|comment|commitOverlay|compile|compileFinal|completedFSM|composeText|configClasses|configFile|configHierarchy|configName|configNull|configProperties|configSourceAddonList|configSourceMod|configSourceModList|confirmSensorTarget|connectTerminalToUAV|controlNull|controlsGroupCtrl|copyFromClipboard|copyToClipboard|copyWaypoints|cos|count|countEnemy|countFriendly|countSide|countType|countUnknown|create3DENComposition|create3DENEntity|createAgent|createCenter|createDialog|createDiaryLink|createDiaryRecord|createDiarySubject|createDisplay|createGearDialog|createGroup|createGuardedPoint|createLocation|createMarker|createMarkerLocal|createMenu|createMine|createMissionDisplay|createMPCampaignDisplay|createSimpleObject|createSimpleTask|createSite|createSoundSource|createTask|createTeam|createTrigger|createUnit|createVehicle|createVehicleCrew|createVehicleLocal|crew|ctAddHeader|ctAddRow|ctClear|ctCurSel|ctData|ctFindHeaderRows|ctFindRowHeader|ctHeaderControls|ctHeaderCount|ctRemoveHeaders|ctRemoveRows|ctrlActivate|ctrlAddEventHandler|ctrlAngle|ctrlAutoScrollDelay|ctrlAutoScrollRewind|ctrlAutoScrollSpeed|ctrlChecked|ctrlClassName|ctrlCommit|ctrlCommitted|ctrlCreate|ctrlDelete|ctrlEnable|ctrlEnabled|ctrlFade|ctrlHTMLLoaded|ctrlIDC|ctrlIDD|ctrlMapAnimAdd|ctrlMapAnimClear|ctrlMapAnimCommit|ctrlMapAnimDone|ctrlMapCursor|ctrlMapMouseOver|ctrlMapScale|ctrlMapScreenToWorld|ctrlMapWorldToScreen|ctrlModel|ctrlModelDirAndUp|ctrlModelScale|ctrlParent|ctrlParentControlsGroup|ctrlPosition|ctrlRemoveAllEventHandlers|ctrlRemoveEventHandler|ctrlScale|ctrlSetActiveColor|ctrlSetAngle|ctrlSetAutoScrollDelay|ctrlSetAutoScrollRewind|ctrlSetAutoScrollSpeed|ctrlSetBackgroundColor|ctrlSetChecked|ctrlSetDisabledColor|ctrlSetEventHandler|ctrlSetFade|ctrlSetFocus|ctrlSetFont|ctrlSetFontH1|ctrlSetFontH1B|ctrlSetFontH2|ctrlSetFontH2B|ctrlSetFontH3|ctrlSetFontH3B|ctrlSetFontH4|ctrlSetFontH4B|ctrlSetFontH5|ctrlSetFontH5B|ctrlSetFontH6|ctrlSetFontH6B|ctrlSetFontHeight|ctrlSetFontHeightH1|ctrlSetFontHeightH2|ctrlSetFontHeightH3|ctrlSetFontHeightH4|ctrlSetFontHeightH5|ctrlSetFontHeightH6|ctrlSetFontHeightSecondary|ctrlSetFontP|ctrlSetFontPB|ctrlSetFontSecondary|ctrlSetForegroundColor|ctrlSetModel|ctrlSetModelDirAndUp|ctrlSetModelScale|ctrlSetPixelPrecision|ctrlSetPosition|ctrlSetScale|ctrlSetStructuredText|ctrlSetText|ctrlSetTextColor|ctrlSetTextColorSecondary|ctrlSetTextSecondary|ctrlSetTooltip|ctrlSetTooltipColorBox|ctrlSetTooltipColorShade|ctrlSetTooltipColorText|ctrlShow|ctrlShown|ctrlText|ctrlTextHeight|ctrlTextSecondary|ctrlTextWidth|ctrlType|ctrlVisible|ctRowControls|ctRowCount|ctSetCurSel|ctSetData|ctSetHeaderTemplate|ctSetRowTemplate|ctSetValue|ctValue|curatorAddons|curatorCamera|curatorCameraArea|curatorCameraAreaCeiling|curatorCoef|curatorEditableObjects|curatorEditingArea|curatorEditingAreaType|curatorMouseOver|curatorPoints|curatorRegisteredObjects|curatorSelected|curatorWaypointCost|current3DENOperation|currentChannel|currentCommand|currentMagazine|currentMagazineDetail|currentMagazineDetailTurret|currentMagazineTurret|currentMuzzle|currentNamespace|currentTask|currentTasks|currentThrowable|currentVisionMode|currentWaypoint|currentWeapon|currentWeaponMode|currentWeaponTurret|currentZeroing|cursorObject|cursorTarget|customChat|customRadio|cutFadeOut|cutObj|cutRsc|cutText|damage|date|dateToNumber|daytime|deActivateKey|debriefingText|debugFSM|debugLog|deg|delete3DENEntities|deleteAt|deleteCenter|deleteCollection|deleteEditorObject|deleteGroup|deleteGroupWhenEmpty|deleteIdentity|deleteLocation|deleteMarker|deleteMarkerLocal|deleteRange|deleteResources|deleteSite|deleteStatus|deleteTeam|deleteVehicle|deleteVehicleCrew|deleteWaypoint|detach|detectedMines|diag_activeMissionFSMs|diag_activeScripts|diag_activeSQFScripts|diag_activeSQSScripts|diag_captureFrame|diag_captureFrameToFile|diag_captureSlowFrame|diag_codePerformance|diag_drawMode|diag_dynamicSimulationEnd|diag_enable|diag_enabled|diag_fps|diag_fpsMin|diag_frameNo|diag_lightNewLoad|diag_list|diag_log|diag_logSlowFrame|diag_mergeConfigFile|diag_recordTurretLimits|diag_setLightNew|diag_tickTime|diag_toggle|dialog|diarySubjectExists|didJIP|didJIPOwner|difficulty|difficultyEnabled|difficultyEnabledRTD|difficultyOption|direction|directSay|disableAI|disableCollisionWith|disableConversation|disableDebriefingStats|disableMapIndicators|disableNVGEquipment|disableRemoteSensors|disableSerialization|disableTIEquipment|disableUAVConnectability|disableUserInput|displayAddEventHandler|displayCtrl|displayNull|displayParent|displayRemoveAllEventHandlers|displayRemoveEventHandler|displaySetEventHandler|dissolveTeam|distance|distance2D|distanceSqr|distributionRegion|do3DENAction|doArtilleryFire|doFire|doFollow|doFSM|doGetOut|doMove|doorPhase|doStop|doSuppressiveFire|doTarget|doWatch|drawArrow|drawEllipse|drawIcon|drawIcon3D|drawLine|drawLine3D|drawLink|drawLocation|drawPolygon|drawRectangle|drawTriangle|driver|drop|dynamicSimulationDistance|dynamicSimulationDistanceCoef|dynamicSimulationEnabled|dynamicSimulationSystemEnabled|east|edit3DENMissionAttributes|editObject|editorSetEventHandler|effectiveCommander|emptyPositions|enableAI|enableAIFeature|enableAimPrecision|enableAttack|enableAudioFeature|enableAutoStartUpRTD|enableAutoTrimRTD|enableCamShake|enableCaustics|enableChannel|enableCollisionWith|enableCopilot|enableDebriefingStats|enableDiagLegend|enableDynamicSimulation|enableDynamicSimulationSystem|enableEndDialog|enableEngineArtillery|enableEnvironment|enableFatigue|enableGunLights|enableInfoPanelComponent|enableIRLasers|enableMimics|enablePersonTurret|enableRadio|enableReload|enableRopeAttach|enableSatNormalOnDetail|enableSaving|enableSentences|enableSimulation|enableSimulationGlobal|enableStamina|enableStressDamage|enableTeamSwitch|enableTraffic|enableUAVConnectability|enableUAVWaypoints|enableVehicleCargo|enableVehicleSensor|enableWeaponDisassembly|endl|endLoadingScreen|endMission|engineOn|enginesIsOnRTD|enginesPowerRTD|enginesRpmRTD|enginesTorqueRTD|entities|environmentEnabled|estimatedEndServerTime|estimatedTimeLeft|evalObjectArgument|everyBackpack|everyContainer|exec|execEditorScript|exp|expectedDestination|exportJIPMessages|eyeDirection|eyePos|face|faction|fadeMusic|fadeRadio|fadeSound|fadeSpeech|failMission|fillWeaponsFromPool|find|findCover|findDisplay|findEditorObject|findEmptyPosition|findEmptyPositionReady|findIf|findNearestEnemy|finishMissionInit|finite|fire|fireAtTarget|firstBackpack|flag|flagAnimationPhase|flagOwner|flagSide|flagTexture|fleeing|floor|flyInHeight|flyInHeightASL|fog|fogForecast|fogParams|forceAddUniform|forceAtPositionRTD|forcedMap|forceEnd|forceFlagTexture|forceFollowRoad|forceGeneratorRTD|forceMap|forceRespawn|forceSpeed|forceWalk|forceWeaponFire|forceWeatherChange|forgetTarget|format|formation|formationDirection|formationLeader|formationMembers|formationPosition|formationTask|formatText|formLeader|freeLook|fromEditor|fuel|fullCrew|gearIDCAmmoCount|gearSlotAmmoCount|gearSlotData|get3DENActionState|get3DENAttribute|get3DENCamera|get3DENConnections|get3DENEntity|get3DENEntityID|get3DENGrid|get3DENIconsVisible|get3DENLayerEntities|get3DENLinesVisible|get3DENMissionAttribute|get3DENMouseOver|get3DENSelected|getAimingCoef|getAllEnvSoundControllers|getAllHitPointsDamage|getAllOwnedMines|getAllSoundControllers|getAmmoCargo|getAnimAimPrecision|getAnimSpeedCoef|getArray|getArtilleryAmmo|getArtilleryComputerSettings|getArtilleryETA|getAssignedCuratorLogic|getAssignedCuratorUnit|getBackpackCargo|getBleedingRemaining|getBurningValue|getCameraViewDirection|getCargoIndex|getCenterOfMass|getClientState|getClientStateNumber|getCompatiblePylonMagazines|getConnectedUAV|getContainerMaxLoad|getCursorObjectParams|getCustomAimCoef|getDammage|getDescription|getDir|getDirVisual|getDLCAssetsUsage|getDLCAssetsUsageByName|getDLCs|getDLCUsageTime|getEditorCamera|getEditorMode|getEditorObjectScope|getElevationOffset|getEngineTargetRpmRTD|getEnvSoundController|getFatigue|getFieldManualStartPage|getForcedFlagTexture|getFriend|getFSMVariable|getFuelCargo|getGroupIcon|getGroupIconParams|getGroupIcons|getHideFrom|getHit|getHitIndex|getHitPointDamage|getItemCargo|getMagazineCargo|getMarkerColor|getMarkerPos|getMarkerSize|getMarkerType|getMass|getMissionConfig|getMissionConfigValue|getMissionDLCs|getMissionLayerEntities|getMissionLayers|getModelInfo|getMousePosition|getMusicPlayedTime|getNumber|getObjectArgument|getObjectChildren|getObjectDLC|getObjectMaterials|getObjectProxy|getObjectTextures|getObjectType|getObjectViewDistance|getOxygenRemaining|getPersonUsedDLCs|getPilotCameraDirection|getPilotCameraPosition|getPilotCameraRotation|getPilotCameraTarget|getPlateNumber|getPlayerChannel|getPlayerScores|getPlayerUID|getPlayerUIDOld|getPos|getPosASL|getPosASLVisual|getPosASLW|getPosATL|getPosATLVisual|getPosVisual|getPosWorld|getPylonMagazines|getRelDir|getRelPos|getRemoteSensorsDisabled|getRepairCargo|getResolution|getRotorBrakeRTD|getShadowDistance|getShotParents|getSlingLoad|getSoundController|getSoundControllerResult|getSpeed|getStamina|getStatValue|getSuppression|getTerrainGrid|getTerrainHeightASL|getText|getTotalDLCUsageTime|getTrimOffsetRTD|getUnitLoadout|getUnitTrait|getUserMFDText|getUserMFDValue|getVariable|getVehicleCargo|getWeaponCargo|getWeaponSway|getWingsOrientationRTD|getWingsPositionRTD|getWPPos|glanceAt|globalChat|globalRadio|goggles|group|groupChat|groupFromNetId|groupIconSelectable|groupIconsVisible|groupId|groupOwner|groupRadio|groupSelectedUnits|groupSelectUnit|grpNull|gunner|gusts|halt|handgunItems|handgunMagazine|handgunWeapon|handsHit|hasInterface|hasPilotCamera|hasWeapon|hcAllGroups|hcGroupParams|hcLeader|hcRemoveAllGroups|hcRemoveGroup|hcSelected|hcSelectGroup|hcSetGroup|hcShowBar|hcShownBar|headgear|hideBody|hideObject|hideObjectGlobal|hideSelection|hint|hintC|hintCadet|hintSilent|hmd|hostMission|htmlLoad|HUDMovementLevels|humidity|image|importAllGroups|importance|in|inArea|inAreaArray|incapacitatedState|independent|inflame|inflamed|infoPanel|infoPanelComponentEnabled|infoPanelComponents|infoPanels|inGameUISetEventHandler|inheritsFrom|initAmbientLife|inPolygon|inputAction|inRangeOfArtillery|insertEditorObject|intersect|is3DEN|is3DENMultiplayer|isAbleToBreathe|isAgent|isAimPrecisionEnabled|isArray|isAutoHoverOn|isAutonomous|isAutoStartUpEnabledRTD|isAutotest|isAutoTrimOnRTD|isBleeding|isBurning|isClass|isCollisionLightOn|isCopilotEnabled|isDamageAllowed|isDedicated|isDLCAvailable|isEngineOn|isEqualTo|isEqualType|isEqualTypeAll|isEqualTypeAny|isEqualTypeArray|isEqualTypeParams|isFilePatchingEnabled|isFlashlightOn|isFlatEmpty|isForcedWalk|isFormationLeader|isGroupDeletedWhenEmpty|isHidden|isInRemainsCollector|isInstructorFigureEnabled|isIRLaserOn|isKeyActive|isKindOf|isLaserOn|isLightOn|isLocalized|isManualFire|isMarkedForCollection|isMultiplayer|isMultiplayerSolo|isNil|isNull|isNumber|isObjectHidden|isObjectRTD|isOnRoad|isPipEnabled|isPlayer|isRealTime|isRemoteExecuted|isRemoteExecutedJIP|isServer|isShowing3DIcons|isSimpleObject|isSprintAllowed|isStaminaEnabled|isSteamMission|isStreamFriendlyUIEnabled|isStressDamageEnabled|isText|isTouchingGround|isTurnedOut|isTutHintsEnabled|isUAVConnectable|isUAVConnected|isUIContext|isUniformAllowed|isVehicleCargo|isVehicleRadarOn|isVehicleSensorEnabled|isWalking|isWeaponDeployed|isWeaponRested|itemCargo|items|itemsWithMagazines|join|joinAs|joinAsSilent|joinSilent|joinString|kbAddDatabase|kbAddDatabaseTargets|kbAddTopic|kbHasTopic|kbReact|kbRemoveTopic|kbTell|kbWasSaid|keyImage|keyName|knowsAbout|land|landAt|landResult|language|laserTarget|lbAdd|lbClear|lbColor|lbColorRight|lbCurSel|lbData|lbDelete|lbIsSelected|lbPicture|lbPictureRight|lbSelection|lbSetColor|lbSetColorRight|lbSetCurSel|lbSetData|lbSetPicture|lbSetPictureColor|lbSetPictureColorDisabled|lbSetPictureColorSelected|lbSetPictureRight|lbSetPictureRightColor|lbSetPictureRightColorDisabled|lbSetPictureRightColorSelected|lbSetSelectColor|lbSetSelectColorRight|lbSetSelected|lbSetText|lbSetTextRight|lbSetTooltip|lbSetValue|lbSize|lbSort|lbSortByValue|lbText|lbTextRight|lbValue|leader|leaderboardDeInit|leaderboardGetRows|leaderboardInit|leaderboardRequestRowsFriends|leaderboardRequestRowsGlobal|leaderboardRequestRowsGlobalAroundUser|leaderboardsRequestUploadScore|leaderboardsRequestUploadScoreKeepBest|leaderboardState|leaveVehicle|libraryCredits|libraryDisclaimers|lifeState|lightAttachObject|lightDetachObject|lightIsOn|lightnings|limitSpeed|linearConversion|lineBreak|lineIntersects|lineIntersectsObjs|lineIntersectsSurfaces|lineIntersectsWith|linkItem|list|listObjects|listRemoteTargets|listVehicleSensors|ln|lnbAddArray|lnbAddColumn|lnbAddRow|lnbClear|lnbColor|lnbColorRight|lnbCurSelRow|lnbData|lnbDeleteColumn|lnbDeleteRow|lnbGetColumnsPosition|lnbPicture|lnbPictureRight|lnbSetColor|lnbSetColorRight|lnbSetColumnsPos|lnbSetCurSelRow|lnbSetData|lnbSetPicture|lnbSetPictureColor|lnbSetPictureColorRight|lnbSetPictureColorSelected|lnbSetPictureColorSelectedRight|lnbSetPictureRight|lnbSetText|lnbSetTextRight|lnbSetValue|lnbSize|lnbSort|lnbSortByValue|lnbText|lnbTextRight|lnbValue|load|loadAbs|loadBackpack|loadFile|loadGame|loadIdentity|loadMagazine|loadOverlay|loadStatus|loadUniform|loadVest|local|localize|locationNull|locationPosition|lock|lockCameraTo|lockCargo|lockDriver|locked|lockedCargo|lockedDriver|lockedTurret|lockIdentity|lockTurret|lockWP|log|logEntities|logNetwork|logNetworkTerminate|lookAt|lookAtPos|magazineCargo|magazines|magazinesAllTurrets|magazinesAmmo|magazinesAmmoCargo|magazinesAmmoFull|magazinesDetail|magazinesDetailBackpack|magazinesDetailUniform|magazinesDetailVest|magazinesTurret|magazineTurretAmmo|mapAnimAdd|mapAnimClear|mapAnimCommit|mapAnimDone|mapCenterOnCamera|mapGridPosition|markAsFinishedOnSteam|markerAlpha|markerBrush|markerColor|markerDir|markerPos|markerShape|markerSize|markerText|markerType|max|members|menuAction|menuAdd|menuChecked|menuClear|menuCollapse|menuData|menuDelete|menuEnable|menuEnabled|menuExpand|menuHover|menuPicture|menuSetAction|menuSetCheck|menuSetData|menuSetPicture|menuSetValue|menuShortcut|menuShortcutText|menuSize|menuSort|menuText|menuURL|menuValue|min|mineActive|mineDetectedBy|missionConfigFile|missionDifficulty|missionName|missionNamespace|missionStart|missionVersion|modelToWorld|modelToWorldVisual|modelToWorldVisualWorld|modelToWorldWorld|modParams|moonIntensity|moonPhase|morale|move|move3DENCamera|moveInAny|moveInCargo|moveInCommander|moveInDriver|moveInGunner|moveInTurret|moveObjectToEnd|moveOut|moveTime|moveTo|moveToCompleted|moveToFailed|musicVolume|name|nameSound|nearEntities|nearestBuilding|nearestLocation|nearestLocations|nearestLocationWithDubbing|nearestObject|nearestObjects|nearestTerrainObjects|nearObjects|nearObjectsReady|nearRoads|nearSupplies|nearTargets|needReload|netId|netObjNull|newOverlay|nextMenuItemIndex|nextWeatherChange|nMenuItems|numberOfEnginesRTD|numberToDate|objectCurators|objectFromNetId|objectParent|objNull|objStatus|onBriefingGear|onBriefingGroup|onBriefingNotes|onBriefingPlan|onBriefingTeamSwitch|onCommandModeChanged|onDoubleClick|onEachFrame|onGroupIconClick|onGroupIconOverEnter|onGroupIconOverLeave|onHCGroupSelectionChanged|onMapSingleClick|onPlayerConnected|onPlayerDisconnected|onPreloadFinished|onPreloadStarted|onShowNewObject|onTeamSwitch|openCuratorInterface|openDLCPage|openDSInterface|openMap|openSteamApp|openYoutubeVideo|opfor|orderGetIn|overcast|overcastForecast|owner|param|params|parseNumber|parseSimpleArray|parseText|parsingNamespace|particlesQuality|pi|pickWeaponPool|pitch|pixelGrid|pixelGridBase|pixelGridNoUIScale|pixelH|pixelW|playableSlotsNumber|playableUnits|playAction|playActionNow|player|playerRespawnTime|playerSide|playersNumber|playGesture|playMission|playMove|playMoveNow|playMusic|playScriptedMission|playSound|playSound3D|position|positionCameraToWorld|posScreenToWorld|posWorldToScreen|ppEffectAdjust|ppEffectCommit|ppEffectCommitted|ppEffectCreate|ppEffectDestroy|ppEffectEnable|ppEffectEnabled|ppEffectForceInNVG|precision|preloadCamera|preloadObject|preloadSound|preloadTitleObj|preloadTitleRsc|primaryWeapon|primaryWeaponItems|primaryWeaponMagazine|priority|processDiaryLink|processInitCommands|productVersion|profileName|profileNamespace|profileNameSteam|progressLoadingScreen|progressPosition|progressSetPosition|publicVariable|publicVariableClient|publicVariableServer|pushBack|pushBackUnique|putWeaponPool|queryItemsPool|queryMagazinePool|queryWeaponPool|rad|radioChannelAdd|radioChannelCreate|radioChannelRemove|radioChannelSetCallSign|radioChannelSetLabel|radioVolume|rain|rainbow|random|rank|rankId|rating|rectangular|registeredTasks|registerTask|reload|reloadEnabled|remoteControl|remoteExec|remoteExecCall|remoteExecutedOwner|remove3DENConnection|remove3DENEventHandler|remove3DENLayer|removeAction|removeAll3DENEventHandlers|removeAllActions|removeAllAssignedItems|removeAllContainers|removeAllCuratorAddons|removeAllCuratorCameraAreas|removeAllCuratorEditingAreas|removeAllEventHandlers|removeAllHandgunItems|removeAllItems|removeAllItemsWithMagazines|removeAllMissionEventHandlers|removeAllMPEventHandlers|removeAllMusicEventHandlers|removeAllOwnedMines|removeAllPrimaryWeaponItems|removeAllWeapons|removeBackpack|removeBackpackGlobal|removeCuratorAddons|removeCuratorCameraArea|removeCuratorEditableObjects|removeCuratorEditingArea|removeDrawIcon|removeDrawLinks|removeEventHandler|removeFromRemainsCollector|removeGoggles|removeGroupIcon|removeHandgunItem|removeHeadgear|removeItem|removeItemFromBackpack|removeItemFromUniform|removeItemFromVest|removeItems|removeMagazine|removeMagazineGlobal|removeMagazines|removeMagazinesTurret|removeMagazineTurret|removeMenuItem|removeMissionEventHandler|removeMPEventHandler|removeMusicEventHandler|removeOwnedMine|removePrimaryWeaponItem|removeSecondaryWeaponItem|removeSimpleTask|removeSwitchableUnit|removeTeamMember|removeUniform|removeVest|removeWeapon|removeWeaponAttachmentCargo|removeWeaponCargo|removeWeaponGlobal|removeWeaponTurret|reportRemoteTarget|requiredVersion|resetCamShake|resetSubgroupDirection|resistance|resize|resources|respawnVehicle|restartEditorCamera|reveal|revealMine|reverse|reversedMouseY|roadAt|roadsConnectedTo|roleDescription|ropeAttachedObjects|ropeAttachedTo|ropeAttachEnabled|ropeAttachTo|ropeCreate|ropeCut|ropeDestroy|ropeDetach|ropeEndPosition|ropeLength|ropes|ropeUnwind|ropeUnwound|rotorsForcesRTD|rotorsRpmRTD|round|runInitScript|safeZoneH|safeZoneW|safeZoneWAbs|safeZoneX|safeZoneXAbs|safeZoneY|save3DENInventory|saveGame|saveIdentity|saveJoysticks|saveOverlay|saveProfileNamespace|saveStatus|saveVar|savingEnabled|say|say2D|say3D|score|scoreSide|screenshot|screenToWorld|scriptDone|scriptName|scriptNull|scudState|secondaryWeapon|secondaryWeaponItems|secondaryWeaponMagazine|select|selectBestPlaces|selectDiarySubject|selectedEditorObjects|selectEditorObject|selectionNames|selectionPosition|selectLeader|selectMax|selectMin|selectNoPlayer|selectPlayer|selectRandom|selectRandomWeighted|selectWeapon|selectWeaponTurret|sendAUMessage|sendSimpleCommand|sendTask|sendTaskResult|sendUDPMessage|serverCommand|serverCommandAvailable|serverCommandExecutable|serverName|serverTime|set|set3DENAttribute|set3DENAttributes|set3DENGrid|set3DENIconsVisible|set3DENLayer|set3DENLinesVisible|set3DENLogicType|set3DENMissionAttribute|set3DENMissionAttributes|set3DENModelsVisible|set3DENObjectType|set3DENSelected|setAccTime|setActualCollectiveRTD|setAirplaneThrottle|setAirportSide|setAmmo|setAmmoCargo|setAmmoOnPylon|setAnimSpeedCoef|setAperture|setApertureNew|setArmoryPoints|setAttributes|setAutonomous|setBehaviour|setBleedingRemaining|setBrakesRTD|setCameraInterest|setCamShakeDefParams|setCamShakeParams|setCamUseTI|setCaptive|setCenterOfMass|setCollisionLight|setCombatMode|setCompassOscillation|setConvoySeparation|setCuratorCameraAreaCeiling|setCuratorCoef|setCuratorEditingAreaType|setCuratorWaypointCost|setCurrentChannel|setCurrentTask|setCurrentWaypoint|setCustomAimCoef|setCustomWeightRTD|setDamage|setDammage|setDate|setDebriefingText|setDefaultCamera|setDestination|setDetailMapBlendPars|setDir|setDirection|setDrawIcon|setDriveOnPath|setDropInterval|setDynamicSimulationDistance|setDynamicSimulationDistanceCoef|setEditorMode|setEditorObjectScope|setEffectCondition|setEngineRpmRTD|setFace|setFaceAnimation|setFatigue|setFeatureType|setFlagAnimationPhase|setFlagOwner|setFlagSide|setFlagTexture|setFog|setForceGeneratorRTD|setFormation|setFormationTask|setFormDir|setFriend|setFromEditor|setFSMVariable|setFuel|setFuelCargo|setGroupIcon|setGroupIconParams|setGroupIconsSelectable|setGroupIconsVisible|setGroupId|setGroupIdGlobal|setGroupOwner|setGusts|setHideBehind|setHit|setHitIndex|setHitPointDamage|setHorizonParallaxCoef|setHUDMovementLevels|setIdentity|setImportance|setInfoPanel|setLeader|setLightAmbient|setLightAttenuation|setLightBrightness|setLightColor|setLightDayLight|setLightFlareMaxDistance|setLightFlareSize|setLightIntensity|setLightnings|setLightUseFlare|setLocalWindParams|setMagazineTurretAmmo|setMarkerAlpha|setMarkerAlphaLocal|setMarkerBrush|setMarkerBrushLocal|setMarkerColor|setMarkerColorLocal|setMarkerDir|setMarkerDirLocal|setMarkerPos|setMarkerPosLocal|setMarkerShape|setMarkerShapeLocal|setMarkerSize|setMarkerSizeLocal|setMarkerText|setMarkerTextLocal|setMarkerType|setMarkerTypeLocal|setMass|setMimic|setMousePosition|setMusicEffect|setMusicEventHandler|setName|setNameSound|setObjectArguments|setObjectMaterial|setObjectMaterialGlobal|setObjectProxy|setObjectTexture|setObjectTextureGlobal|setObjectViewDistance|setOvercast|setOwner|setOxygenRemaining|setParticleCircle|setParticleClass|setParticleFire|setParticleParams|setParticleRandom|setPilotCameraDirection|setPilotCameraRotation|setPilotCameraTarget|setPilotLight|setPiPEffect|setPitch|setPlateNumber|setPlayable|setPlayerRespawnTime|setPos|setPosASL|setPosASL2|setPosASLW|setPosATL|setPosition|setPosWorld|setPylonLoadOut|setPylonsPriority|setRadioMsg|setRain|setRainbow|setRandomLip|setRank|setRectangular|setRepairCargo|setRotorBrakeRTD|setShadowDistance|setShotParents|setSide|setSimpleTaskAlwaysVisible|setSimpleTaskCustomData|setSimpleTaskDescription|setSimpleTaskDestination|setSimpleTaskTarget|setSimpleTaskType|setSimulWeatherLayers|setSize|setSkill|setSlingLoad|setSoundEffect|setSpeaker|setSpeech|setSpeedMode|setStamina|setStaminaScheme|setStatValue|setSuppression|setSystemOfUnits|setTargetAge|setTaskMarkerOffset|setTaskResult|setTaskState|setTerrainGrid|setText|setTimeMultiplier|setTitleEffect|setToneMapping|setToneMappingParams|setTrafficDensity|setTrafficDistance|setTrafficGap|setTrafficSpeed|setTriggerActivation|setTriggerArea|setTriggerStatements|setTriggerText|setTriggerTimeout|setTriggerType|setType|setUnconscious|setUnitAbility|setUnitLoadout|setUnitPos|setUnitPosWeak|setUnitRank|setUnitRecoilCoefficient|setUnitTrait|setUnloadInCombat|setUserActionText|setUserMFDText|setUserMFDValue|setVariable|setVectorDir|setVectorDirAndUp|setVectorUp|setVehicleAmmo|setVehicleAmmoDef|setVehicleArmor|setVehicleCargo|setVehicleId|setVehicleInit|setVehicleLock|setVehiclePosition|setVehicleRadar|setVehicleReceiveRemoteTargets|setVehicleReportOwnPosition|setVehicleReportRemoteTargets|setVehicleTIPars|setVehicleVarName|setVelocity|setVelocityModelSpace|setVelocityTransformation|setViewDistance|setVisibleIfTreeCollapsed|setWantedRpmRTD|setWaves|setWaypointBehaviour|setWaypointCombatMode|setWaypointCompletionRadius|setWaypointDescription|setWaypointForceBehaviour|setWaypointFormation|setWaypointHousePosition|setWaypointLoiterRadius|setWaypointLoiterType|setWaypointName|setWaypointPosition|setWaypointScript|setWaypointSpeed|setWaypointStatements|setWaypointTimeout|setWaypointType|setWaypointVisible|setWeaponReloadingTime|setWind|setWindDir|setWindForce|setWindStr|setWingForceScaleRTD|setWPPos|show3DIcons|showChat|showCinemaBorder|showCommandingMenu|showCompass|showCuratorCompass|showGPS|showHUD|showLegend|showMap|shownArtilleryComputer|shownChat|shownCompass|shownCuratorCompass|showNewEditorObject|shownGPS|shownHUD|shownMap|shownPad|shownRadio|shownScoretable|shownUAVFeed|shownWarrant|shownWatch|showPad|showRadio|showScoretable|showSubtitles|showUAVFeed|showWarrant|showWatch|showWaypoint|showWaypoints|side|sideAmbientLife|sideChat|sideEmpty|sideEnemy|sideFriendly|sideLogic|sideRadio|sideUnknown|simpleTasks|simulationEnabled|simulCloudDensity|simulCloudOcclusion|simulInClouds|simulWeatherSync|sin|size|sizeOf|skill|skillFinal|skipTime|sleep|sliderPosition|sliderRange|sliderSetPosition|sliderSetRange|sliderSetSpeed|sliderSpeed|slingLoadAssistantShown|soldierMagazines|someAmmo|sort|soundVolume|speaker|speed|speedMode|splitString|sqrt|squadParams|stance|startLoadingScreen|stop|stopEngineRTD|stopped|str|sunOrMoon|supportInfo|suppressFor|surfaceIsWater|surfaceNormal|surfaceType|swimInDepth|switchableUnits|switchAction|switchCamera|switchGesture|switchLight|switchMove|synchronizedObjects|synchronizedTriggers|synchronizedWaypoints|synchronizeObjectsAdd|synchronizeObjectsRemove|synchronizeTrigger|synchronizeWaypoint|systemChat|systemOfUnits|tan|targetKnowledge|targets|targetsAggregate|targetsQuery|taskAlwaysVisible|taskChildren|taskCompleted|taskCustomData|taskDescription|taskDestination|taskHint|taskMarkerOffset|taskNull|taskParent|taskResult|taskState|taskType|teamMember|teamMemberNull|teamName|teams|teamSwitch|teamSwitchEnabled|teamType|terminate|terrainIntersect|terrainIntersectASL|terrainIntersectAtASL|text|textLog|textLogFormat|tg|time|timeMultiplier|titleCut|titleFadeOut|titleObj|titleRsc|titleText|toArray|toFixed|toLower|toString|toUpper|triggerActivated|triggerActivation|triggerArea|triggerAttachedVehicle|triggerAttachObject|triggerAttachVehicle|triggerDynamicSimulation|triggerStatements|triggerText|triggerTimeout|triggerTimeoutCurrent|triggerType|turretLocal|turretOwner|turretUnit|tvAdd|tvClear|tvCollapse|tvCollapseAll|tvCount|tvCurSel|tvData|tvDelete|tvExpand|tvExpandAll|tvPicture|tvPictureRight|tvSetColor|tvSetCurSel|tvSetData|tvSetPicture|tvSetPictureColor|tvSetPictureColorDisabled|tvSetPictureColorSelected|tvSetPictureRight|tvSetPictureRightColor|tvSetPictureRightColorDisabled|tvSetPictureRightColorSelected|tvSetSelectColor|tvSetText|tvSetTooltip|tvSetValue|tvSort|tvSortByValue|tvText|tvTooltip|tvValue|type|typeName|typeOf|UAVControl|uiNamespace|uiSleep|unassignCurator|unassignItem|unassignTeam|unassignVehicle|underwater|uniform|uniformContainer|uniformItems|uniformMagazines|unitAddons|unitAimPosition|unitAimPositionVisual|unitBackpack|unitIsUAV|unitPos|unitReady|unitRecoilCoefficient|units|unitsBelowHeight|unlinkItem|unlockAchievement|unregisterTask|updateDrawIcon|updateMenuItem|updateObjectTree|useAIOperMapObstructionTest|useAISteeringComponent|useAudioTimeForMoves|userInputDisabled|vectorAdd|vectorCos|vectorCrossProduct|vectorDiff|vectorDir|vectorDirVisual|vectorDistance|vectorDistanceSqr|vectorDotProduct|vectorFromTo|vectorMagnitude|vectorMagnitudeSqr|vectorModelToWorld|vectorModelToWorldVisual|vectorMultiply|vectorNormalized|vectorUp|vectorUpVisual|vectorWorldToModel|vectorWorldToModelVisual|vehicle|vehicleCargoEnabled|vehicleChat|vehicleRadio|vehicleReceiveRemoteTargets|vehicleReportOwnPosition|vehicleReportRemoteTargets|vehicles|vehicleVarName|velocity|velocityModelSpace|verifySignature|vest|vestContainer|vestItems|vestMagazines|viewDistance|visibleCompass|visibleGPS|visibleMap|visiblePosition|visiblePositionASL|visibleScoretable|visibleWatch|waitUntil|waves|waypointAttachedObject|waypointAttachedVehicle|waypointAttachObject|waypointAttachVehicle|waypointBehaviour|waypointCombatMode|waypointCompletionRadius|waypointDescription|waypointForceBehaviour|waypointFormation|waypointHousePosition|waypointLoiterRadius|waypointLoiterType|waypointName|waypointPosition|waypoints|waypointScript|waypointsEnabledUAV|waypointShow|waypointSpeed|waypointStatements|waypointTimeout|waypointTimeoutCurrent|waypointType|waypointVisible|weaponAccessories|weaponAccessoriesCargo|weaponCargo|weaponDirection|weaponInertia|weaponLowered|weapons|weaponsItems|weaponsItemsCargo|weaponState|weaponsTurret|weightRTD|west|WFSideText|wind|windDir|windRTD|windStr|wingsForcesRTD|worldName|worldSize|worldToModel|worldToModelVisual|worldToScreen)\b/i,number:/(?:\$|\b0x)[\da-f]+\b|(?:\B\.\d+|\b\d+(?:\.\d+)?)(?:e[+-]?\d+)?\b/i,operator:/##|>>|&&|\|\||[!=<>]=?|[-+*/%#^]|\b(?:and|mod|not|or)\b/i,"magic-variable":{pattern:/\b(?:this|thisList|thisTrigger|_exception|_fnc_scriptName|_fnc_scriptNameParent|_forEachIndex|_this|_thisEventHandler|_thisFSM|_thisScript|_x)\b/i,alias:"keyword"},constant:/\bDIK(?:_[a-z\d]+)+\b/i}),n.languages.insertBefore("sqf","string",{macro:{pattern:/(^[ \t]*)#[a-z](?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{directive:{pattern:/#[a-z]+\b/i,alias:"keyword"},comment:n.languages.sqf.comment}}}),delete n.languages.sqf["class-name"]}DM.displayName="squirrel";DM.aliases=[];function DM(n){n.register(cn),n.languages.squirrel=n.languages.extend("clike",{comment:[n.languages.clike.comment[0],{pattern:/(^|[^\\:])(?:\/\/|#).*/,lookbehind:!0,greedy:!0}],string:{pattern:/(^|[^\\"'@])(?:@"(?:[^"]|"")*"(?!")|"(?:[^\\\r\n"]|\\.)*")/,lookbehind:!0,greedy:!0},"class-name":{pattern:/(\b(?:class|enum|extends|instanceof)\s+)\w+(?:\.\w+)*/,lookbehind:!0,inside:{punctuation:/\./}},keyword:/\b(?:__FILE__|__LINE__|base|break|case|catch|class|clone|const|constructor|continue|default|delete|else|enum|extends|for|foreach|function|if|in|instanceof|local|null|resume|return|static|switch|this|throw|try|typeof|while|yield)\b/,number:/\b(?:0x[0-9a-fA-F]+|\d+(?:\.(?:\d+|[eE][+-]?\d+))?)\b/,operator:/\+\+|--|<=>|<[-<]|>>>?|&&?|\|\|?|[-+*/%!=<>]=?|[~^]|::?/,punctuation:/[(){}\[\],;.]/}),n.languages.insertBefore("squirrel","string",{char:{pattern:/(^|[^\\"'])'(?:[^\\']|\\(?:[xuU][0-9a-fA-F]{0,8}|[\s\S]))'/,lookbehind:!0,greedy:!0}}),n.languages.insertBefore("squirrel","operator",{"attribute-punctuation":{pattern:/<\/|\/>/,alias:"important"},lambda:{pattern:/@(?=\()/,alias:"operator"}})}OM.displayName="stan";OM.aliases=[];function OM(n){(function(e){var t=/\b(?:algebra_solver|algebra_solver_newton|integrate_1d|integrate_ode|integrate_ode_bdf|integrate_ode_rk45|map_rect|ode_(?:adams|bdf|ckrk|rk45)(?:_tol)?|ode_adjoint_tol_ctl|reduce_sum|reduce_sum_static)\b/;e.languages.stan={comment:/\/\/.*|\/\*[\s\S]*?\*\/|#(?!include).*/,string:{pattern:/"[\x20\x21\x23-\x5B\x5D-\x7E]*"/,greedy:!0},directive:{pattern:/^([ \t]*)#include\b.*/m,lookbehind:!0,alias:"property"},"function-arg":{pattern:RegExp("("+t.source+/\s*\(\s*/.source+")"+/[a-zA-Z]\w*/.source),lookbehind:!0,alias:"function"},constraint:{pattern:/(\b(?:int|matrix|real|row_vector|vector)\s*)<[^<>]*>/,lookbehind:!0,inside:{expression:{pattern:/(=\s*)\S(?:\S|\s+(?!\s))*?(?=\s*(?:>$|,\s*\w+\s*=))/,lookbehind:!0,inside:null},property:/\b[a-z]\w*(?=\s*=)/i,operator:/=/,punctuation:/^<|>$|,/}},keyword:[{pattern:/\bdata(?=\s*\{)|\b(?:functions|generated|model|parameters|quantities|transformed)\b/,alias:"program-block"},/\b(?:array|break|cholesky_factor_corr|cholesky_factor_cov|complex|continue|corr_matrix|cov_matrix|data|else|for|if|in|increment_log_prob|int|matrix|ordered|positive_ordered|print|real|reject|return|row_vector|simplex|target|unit_vector|vector|void|while)\b/,t],function:/\b[a-z]\w*(?=\s*\()/i,number:/(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:E[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,boolean:/\b(?:false|true)\b/,operator:/<-|\.[*/]=?|\|\|?|&&|[!=<>+\-*/]=?|['^%~?:]/,punctuation:/[()\[\]{},;]/},e.languages.stan.constraint.inside.expression.inside=e.languages.stan})(n)}PM.displayName="stata";PM.aliases=[];function PM(n){n.register(Fh),n.register(q_),n.register(X_),n.languages.stata={comment:[{pattern:/(^[ \t]*)\*.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|\s)\/\/.*|\/\*[\s\S]*?\*\//,lookbehind:!0,greedy:!0}],"string-literal":{pattern:/"[^"\r\n]*"|[`']".*?"[`']/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}]*\}|[`']\w[^`'\r\n]*[`']/,inside:{punctuation:/^\$\{|\}$/,expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},mata:{pattern:/(^[ \t]*mata[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-mata",inside:n.languages.mata},java:{pattern:/(^[ \t]*java[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-java",inside:n.languages.java},python:{pattern:/(^[ \t]*python[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-python",inside:n.languages.python},command:{pattern:/(^[ \t]*(?:\.[ \t]+)?(?:(?:bayes|bootstrap|by|bysort|capture|collect|fmm|fp|frame|jackknife|mfp|mi|nestreg|noisily|permute|quietly|rolling|simulate|statsby|stepwise|svy|version|xi)\b[^:\r\n]*:[ \t]*|(?:capture|noisily|quietly|version)[ \t]+)?)[a-zA-Z]\w*/m,lookbehind:!0,greedy:!0,alias:"keyword"},variable:/\$\w+|[`']\w[^`'\r\n]*[`']/,keyword:/\b(?:bayes|bootstrap|by|bysort|capture|clear|collect|fmm|fp|frame|if|in|jackknife|mi[ \t]+estimate|mfp|nestreg|noisily|of|permute|quietly|rolling|simulate|sort|statsby|stepwise|svy|varlist|version|xi)\b/,boolean:/\b(?:off|on)\b/,number:/\b\d+(?:\.\d+)?\b|\B\.\d+/,function:/\b[a-z_]\w*(?=\()/i,operator:/\+\+|--|##?|[<>!=~]=?|[+\-*^&|/]/,punctuation:/[(){}[\],:]/},n.languages.stata["string-literal"].inside.interpolation.inside.expression.inside=n.languages.stata}FM.displayName="iecst";FM.aliases=[];function FM(n){n.languages.iecst={comment:[{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\(\*[\s\S]*?(?:\*\)|$)|\{[\s\S]*?(?:\}|$))/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:[/\b(?:END_)?(?:PROGRAM|CONFIGURATION|INTERFACE|FUNCTION_BLOCK|FUNCTION|ACTION|TRANSITION|TYPE|STRUCT|(?:INITIAL_)?STEP|NAMESPACE|LIBRARY|CHANNEL|FOLDER|RESOURCE|VAR_(?:ACCESS|CONFIG|EXTERNAL|GLOBAL|INPUT|IN_OUT|OUTPUT|TEMP)|VAR|METHOD|PROPERTY)\b/i,/\b(?:AT|BY|(?:END_)?(?:CASE|FOR|IF|REPEAT|WHILE)|CONSTANT|CONTINUE|DO|ELSE|ELSIF|EXIT|EXTENDS|FROM|GET|GOTO|IMPLEMENTS|JMP|NON_RETAIN|OF|PRIVATE|PROTECTED|PUBLIC|RETAIN|RETURN|SET|TASK|THEN|TO|UNTIL|USING|WITH|__CATCH|__ENDTRY|__FINALLY|__TRY)\b/],"class-name":/\b(?:ANY|ARRAY|BOOL|BYTE|U?(?:D|L|S)?INT|(?:D|L)?WORD|DATE(?:_AND_TIME)?|DT|L?REAL|POINTER|STRING|TIME(?:_OF_DAY)?|TOD)\b/,address:{pattern:/%[IQM][XBWDL][\d.]*|%[IQ][\d.]*/,alias:"symbol"},number:/\b(?:16#[\da-f]+|2#[01_]+|0x[\da-f]+)\b|\b(?:D|DT|T|TOD)#[\d_shmd:]*|\b[A-Z]*#[\d.,_]*|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/,operator:/S?R?:?=>?|&&?|\*\*?|<[=>]?|>=?|[-:^/+#]|\b(?:AND|EQ|EXPT|GE|GT|LE|LT|MOD|NE|NOT|OR|XOR)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,punctuation:/[()[\].,;]/}}UM.displayName="supercollider";UM.aliases=["sclang"];function UM(n){n.languages.supercollider={comment:{pattern:/\/\/.*|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\//,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^"\\]|\\[\s\S])*"/,lookbehind:!0,greedy:!0},char:{pattern:/\$(?:[^\\\r\n]|\\.)/,greedy:!0},symbol:{pattern:/(^|[^\\])'(?:[^'\\]|\\[\s\S])*'|\\\w+/,lookbehind:!0,greedy:!0},keyword:/\b(?:_|arg|classvar|const|nil|var|while)\b/,boolean:/\b(?:false|true)\b/,label:{pattern:/\b[a-z_]\w*(?=\s*:)/,alias:"property"},number:/\b(?:inf|pi|0x[0-9a-fA-F]+|\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(?:pi)?|\d+r[0-9a-zA-Z]+(?:\.[0-9a-zA-Z]+)?|\d+[sb]{1,4}\d*)\b/,"class-name":/\b[A-Z]\w*\b/,operator:/\.{2,3}|#(?![[{])|&&|[!=]==?|\+>>|\+{1,3}|-[->]|=>|>>|\?\?|@\|?@|\|(?:@|[!=]=)?\||!\?|<[!=>]|\*{1,2}|<{2,3}\*?|[-!%&/<>?@|=`]/,punctuation:/[{}()[\].:,;]|#[[{]/},n.languages.sclang=n.languages.supercollider}BM.displayName="swift";BM.aliases=[];function BM(n){n.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},n.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=n.languages.swift})}zM.displayName="systemd";zM.aliases=[];function zM(n){(function(e){var t={pattern:/^[;#].*/m,greedy:!0},r=/"(?:[^\r\n"\\]|\\(?:[^\r]|\r\n?))*"(?!\S)/.source;e.languages.systemd={comment:t,section:{pattern:/^\[[^\n\r\[\]]*\](?=[ \t]*$)/m,greedy:!0,inside:{punctuation:/^\[|\]$/,"section-name":{pattern:/[\s\S]+/,alias:"selector"}}},key:{pattern:/^[^\s=]+(?=[ \t]*=)/m,greedy:!0,alias:"attr-name"},value:{pattern:RegExp(/(=[ \t]*(?!\s))/.source+"(?:"+r+`|(?=[^"\r
]))(?:`+(/[^\s\\]/.source+'|[ 	]+(?:(?![ 	"])|'+r+")|"+/\\[\r\n]+(?:[#;].*[\r\n]+)*(?![#;])/.source)+")*"),lookbehind:!0,greedy:!0,alias:"attr-value",inside:{comment:t,quoted:{pattern:RegExp(/(^|\s)/.source+r),lookbehind:!0,greedy:!0},punctuation:/\\$/m,boolean:{pattern:/^(?:false|no|off|on|true|yes)$/,greedy:!0}}},punctuation:/=/}})(n)}Yg.displayName="t4-templating";Yg.aliases=[];function Yg(n){(function(e){function t(i,s,a){return{pattern:RegExp("<#"+i+"[\\s\\S]*?#>"),alias:"block",inside:{delimiter:{pattern:RegExp("^<#"+i+"|#>$"),alias:"important"},content:{pattern:/[\s\S]+/,inside:s,alias:a}}}}function r(i){var s=e.languages[i],a="language-"+i;return{block:{pattern:/<#[\s\S]+?#>/,inside:{directive:t("@",{"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/,inside:{punctuation:/^=|^["']|["']$/}},keyword:/\b\w+(?=\s)/,"attr-name":/\b\w+/}),expression:t("=",s,a),"class-feature":t("\\+",s,a),standard:t("",s,a)}}}}e.languages["t4-templating"]=Object.defineProperty({},"createT4",{value:r})})(n)}GM.displayName="t4-cs";GM.aliases=["t4"];function GM(n){n.register(Oh),n.register(Yg),n.languages.t4=n.languages["t4-cs"]=n.languages["t4-templating"].createT4("csharp")}Z_.displayName="vbnet";Z_.aliases=[];function Z_(n){n.register(j_),n.languages.vbnet=n.languages.extend("basic",{comment:[{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},{pattern:/(^|[^\\:])'.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(^|[^"])"(?:""|[^"])*"(?!")/,lookbehind:!0,greedy:!0},keyword:/(?:\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDBL|CDEC|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DEFAULT|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LET|LIB|LIKE|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPERATOR|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHELL|SHORT|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SWAP|SYNCLOCK|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\$|\b)/i,punctuation:/[,;:(){}]/})}VM.displayName="t4-vb";VM.aliases=[];function VM(n){n.register(Yg),n.register(Z_),n.languages["t4-vb"]=n.languages["t4-templating"].createT4("vbnet")}$M.displayName="tap";$M.aliases=[];function $M(n){n.register(H_),n.languages.tap={fail:/not ok[^#{\n\r]*/,pass:/ok[^#{\n\r]*/,pragma:/pragma [+-][a-z]+/,bailout:/bail out!.*/i,version:/TAP version \d+/i,plan:/\b\d+\.\.\d+(?: +#.*)?/,subtest:{pattern:/# Subtest(?:: .*)?/,greedy:!0},punctuation:/[{}]/,directive:/#.*/,yamlish:{pattern:/(^[ \t]*)---[\s\S]*?[\r\n][ \t]*\.\.\.$/m,lookbehind:!0,inside:n.languages.yaml,alias:"language-yaml"}}}HM.displayName="tcl";HM.aliases=[];function HM(n){n.languages.tcl={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:{pattern:/"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*"/,greedy:!0},variable:[{pattern:/(\$)(?:::)?(?:[a-zA-Z0-9]+::)*\w+/,lookbehind:!0},{pattern:/(\$)\{[^}]+\}/,lookbehind:!0},{pattern:/(^[\t ]*set[ \t]+)(?:::)?(?:[a-zA-Z0-9]+::)*\w+/m,lookbehind:!0}],function:{pattern:/(^[\t ]*proc[ \t]+)\S+/m,lookbehind:!0},builtin:[{pattern:/(^[\t ]*)(?:break|class|continue|error|eval|exit|for|foreach|if|proc|return|switch|while)\b/m,lookbehind:!0},/\b(?:else|elseif)\b/],scope:{pattern:/(^[\t ]*)(?:global|upvar|variable)\b/m,lookbehind:!0,alias:"constant"},keyword:{pattern:/(^[\t ]*|\[)(?:Safe_Base|Tcl|after|append|apply|array|auto_(?:execok|import|load|mkindex|qualify|reset)|automkindex_old|bgerror|binary|catch|cd|chan|clock|close|concat|dde|dict|encoding|eof|exec|expr|fblocked|fconfigure|fcopy|file(?:event|name)?|flush|gets|glob|history|http|incr|info|interp|join|lappend|lassign|lindex|linsert|list|llength|load|lrange|lrepeat|lreplace|lreverse|lsearch|lset|lsort|math(?:func|op)|memory|msgcat|namespace|open|package|parray|pid|pkg_mkIndex|platform|puts|pwd|re_syntax|read|refchan|regexp|registry|regsub|rename|scan|seek|set|socket|source|split|string|subst|tcl(?:_endOfWord|_findLibrary|startOf(?:Next|Previous)Word|test|vars|wordBreak(?:After|Before))|tell|time|tm|trace|unknown|unload|unset|update|uplevel|vwait)\b/m,lookbehind:!0},operator:/!=?|\*\*?|==|&&?|\|\|?|<[=<]?|>[=>]?|[-+~\/%?^]|\b(?:eq|in|ne|ni)\b/,punctuation:/[{}()\[\]]/}}jM.displayName="tt2";jM.aliases=[];function jM(n){n.register(cn),n.register(vi),(function(e){e.languages.tt2=e.languages.extend("clike",{comment:/#.*|\[%#[\s\S]*?%\]/,keyword:/\b(?:BLOCK|CALL|CASE|CATCH|CLEAR|DEBUG|DEFAULT|ELSE|ELSIF|END|FILTER|FINAL|FOREACH|GET|IF|IN|INCLUDE|INSERT|LAST|MACRO|META|NEXT|PERL|PROCESS|RAWPERL|RETURN|SET|STOP|SWITCH|TAGS|THROW|TRY|UNLESS|USE|WHILE|WRAPPER)\b/,punctuation:/[[\]{},()]/}),e.languages.insertBefore("tt2","number",{operator:/=[>=]?|!=?|<=?|>=?|&&|\|\|?|\b(?:and|not|or)\b/,variable:{pattern:/\b[a-z]\w*(?:\s*\.\s*(?:\d+|\$?[a-z]\w*))*\b/i}}),e.languages.insertBefore("tt2","keyword",{delimiter:{pattern:/^(?:\[%|%%)-?|-?%\]$/,alias:"punctuation"}}),e.languages.insertBefore("tt2","string",{"single-quoted-string":{pattern:/'[^\\']*(?:\\[\s\S][^\\']*)*'/,greedy:!0,alias:"string"},"double-quoted-string":{pattern:/"[^\\"]*(?:\\[\s\S][^\\"]*)*"/,greedy:!0,alias:"string",inside:{variable:{pattern:/\$(?:[a-z]\w*(?:\.(?:\d+|\$?[a-z]\w*))*)/i}}}}),delete e.languages.tt2.string,e.hooks.add("before-tokenize",function(t){var r=/\[%[\s\S]+?%\]/g;e.languages["markup-templating"].buildPlaceholders(t,"tt2",r)}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"tt2")})})(n)}WM.displayName="toml";WM.aliases=[];function WM(n){(function(e){var t=/(?:[\w-]+|'[^'\n\r]*'|"(?:\\.|[^\\"\r\n])*")/.source;function r(i){return i.replace(/__/g,function(){return t})}e.languages.toml={comment:{pattern:/#.*/,greedy:!0},table:{pattern:RegExp(r(/(^[\t ]*\[\s*(?:\[\s*)?)__(?:\s*\.\s*__)*(?=\s*\])/.source),"m"),lookbehind:!0,greedy:!0,alias:"class-name"},key:{pattern:RegExp(r(/(^[\t ]*|[{,]\s*)__(?:\s*\.\s*__)*(?=\s*=)/.source),"m"),lookbehind:!0,greedy:!0,alias:"property"},string:{pattern:/"""(?:\\[\s\S]|[^\\])*?"""|'''[\s\S]*?'''|'[^'\n\r]*'|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},date:[{pattern:/\b\d{4}-\d{2}-\d{2}(?:[T\s]\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+-]\d{2}:\d{2})?)?\b/i,alias:"number"},{pattern:/\b\d{2}:\d{2}:\d{2}(?:\.\d+)?\b/,alias:"number"}],number:/(?:\b0(?:x[\da-zA-Z]+(?:_[\da-zA-Z]+)*|o[0-7]+(?:_[0-7]+)*|b[10]+(?:_[10]+)*))\b|[-+]?\b\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?\b|[-+]?\b(?:inf|nan)\b/,boolean:/\b(?:false|true)\b/,punctuation:/[.,=[\]{}]/}})(n)}qM.displayName="tremor";qM.aliases=["trickle","troy"];function qM(n){(function(e){e.languages.tremor={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},"interpolated-string":null,extractor:{pattern:/\b[a-z_]\w*\|(?:[^\r\n\\|]|\\(?:\r\n|[\s\S]))*\|/i,greedy:!0,inside:{regex:{pattern:/(^re)\|[\s\S]+/,lookbehind:!0},function:/^\w+/,value:/\|[\s\S]+/}},identifier:{pattern:/`[^`]*`/,greedy:!0},function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())\b/,keyword:/\b(?:args|as|by|case|config|connect|connector|const|copy|create|default|define|deploy|drop|each|emit|end|erase|event|flow|fn|for|from|group|having|insert|into|intrinsic|let|links|match|merge|mod|move|of|operator|patch|pipeline|recur|script|select|set|sliding|state|stream|to|tumbling|update|use|when|where|window|with)\b/,boolean:/\b(?:false|null|true)\b/i,number:/\b(?:0b[01_]*|0x[0-9a-fA-F_]*|\d[\d_]*(?:\.\d[\d_]*)?(?:[Ee][+-]?[\d_]+)?)\b/,"pattern-punctuation":{pattern:/%(?=[({[])/,alias:"punctuation"},operator:/[-+*\/%~!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?>?=?|(?:absent|and|not|or|present|xor)\b/,punctuation:/::|[;\[\]()\{\},.:]/};var t=/#\{(?:[^"{}]|\{[^{}]*\}|"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*")*\}/.source;e.languages.tremor["interpolated-string"]={pattern:RegExp(/(^|[^\\])/.source+'(?:"""(?:'+/[^"\\#]|\\[\s\S]|"(?!"")|#(?!\{)/.source+"|"+t+')*"""|"(?:'+/[^"\\\r\n#]|\\(?:\r\n|[\s\S])|#(?!\{)/.source+"|"+t+')*")'),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:RegExp(t),inside:{punctuation:/^#\{|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.tremor}}},string:/[\s\S]+/}},e.languages.troy=e.languages.tremor,e.languages.trickle=e.languages.tremor})(n)}XM.displayName="typoscript";XM.aliases=["tsconfig"];function XM(n){(function(e){var t=/\b(?:ACT|ACTIFSUB|CARRAY|CASE|CLEARGIF|COA|COA_INT|CONSTANTS|CONTENT|CUR|EDITPANEL|EFFECT|EXT|FILE|FLUIDTEMPLATE|FORM|FRAME|FRAMESET|GIFBUILDER|GMENU|GMENU_FOLDOUT|GMENU_LAYERS|GP|HMENU|HRULER|HTML|IENV|IFSUB|IMAGE|IMGMENU|IMGMENUITEM|IMGTEXT|IMG_RESOURCE|INCLUDE_TYPOSCRIPT|JSMENU|JSMENUITEM|LLL|LOAD_REGISTER|NO|PAGE|RECORDS|RESTORE_REGISTER|TEMPLATE|TEXT|TMENU|TMENUITEM|TMENU_LAYERS|USER|USER_INT|_GIFBUILDER|global|globalString|globalVar)\b/;e.languages.typoscript={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:= \t]|(?:^|[^= \t])[ \t]+)\/\/.*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^"'])#.*/,lookbehind:!0,greedy:!0}],function:[{pattern:/<INCLUDE_TYPOSCRIPT:\s*source\s*=\s*(?:"[^"\r\n]*"|'[^'\r\n]*')\s*>/,inside:{string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,inside:{keyword:t}},keyword:{pattern:/INCLUDE_TYPOSCRIPT/}}},{pattern:/@import\s*(?:"[^"\r\n]*"|'[^'\r\n]*')/,inside:{string:/"[^"\r\n]*"|'[^'\r\n]*'/}}],string:{pattern:/^([^=]*=[< ]?)(?:(?!\]\n).)*/,lookbehind:!0,inside:{function:/\{\$.*\}/,keyword:t,number:/^\d+$/,punctuation:/[,|:]/}},keyword:t,number:{pattern:/\b\d+\s*[.{=]/,inside:{operator:/[.{=]/}},tag:{pattern:/\.?[-\w\\]+\.?/,inside:{punctuation:/\./}},punctuation:/[{}[\];(),.:|]/,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/},e.languages.tsconfig=e.languages.typoscript})(n)}YM.displayName="unrealscript";YM.aliases=["uc","uscript"];function YM(n){n.languages.unrealscript={comment:/\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},category:{pattern:/(\b(?:(?:autoexpand|hide|show)categories|var)\s*\()[^()]+(?=\))/,lookbehind:!0,greedy:!0,alias:"property"},metadata:{pattern:/(\w\s*)<\s*\w+\s*=[^<>|=\r\n]+(?:\|\s*\w+\s*=[^<>|=\r\n]+)*>/,lookbehind:!0,greedy:!0,inside:{property:/\b\w+(?=\s*=)/,operator:/=/,punctuation:/[<>|]/}},macro:{pattern:/`\w+/,alias:"property"},"class-name":{pattern:/(\b(?:class|enum|extends|interface|state(?:\(\))?|struct|within)\s+)\w+/,lookbehind:!0},keyword:/\b(?:abstract|actor|array|auto|autoexpandcategories|bool|break|byte|case|class|classgroup|client|coerce|collapsecategories|config|const|continue|default|defaultproperties|delegate|dependson|deprecated|do|dontcollapsecategories|editconst|editinlinenew|else|enum|event|exec|export|extends|final|float|for|forcescriptorder|foreach|function|goto|guid|hidecategories|hidedropdown|if|ignores|implements|inherits|input|int|interface|iterator|latent|local|material|name|native|nativereplication|noexport|nontransient|noteditinlinenew|notplaceable|operator|optional|out|pawn|perobjectconfig|perobjectlocalized|placeable|postoperator|preoperator|private|protected|reliable|replication|return|server|showcategories|simulated|singular|state|static|string|struct|structdefault|structdefaultproperties|switch|texture|transient|travel|unreliable|until|var|vector|while|within)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/>>|<<|--|\+\+|\*\*|[-+*/~!=<>$@]=?|&&?|\|\|?|\^\^?|[?:%]|\b(?:ClockwiseFrom|Cross|Dot)\b/,punctuation:/[()[\]{};,.]/},n.languages.uc=n.languages.uscript=n.languages.unrealscript}KM.displayName="uorazor";KM.aliases=[];function KM(n){n.languages.uorazor={"comment-hash":{pattern:/#.*/,alias:"comment",greedy:!0},"comment-slash":{pattern:/\/\/.*/,alias:"comment",greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,inside:{punctuation:/^['"]|['"]$/},greedy:!0},"source-layers":{pattern:/\b(?:arms|backpack|blue|bracelet|cancel|clear|cloak|criminal|earrings|enemy|facialhair|friend|friendly|gloves|gray|grey|ground|hair|head|innerlegs|innertorso|innocent|lefthand|middletorso|murderer|neck|nonfriendly|onehandedsecondary|outerlegs|outertorso|pants|red|righthand|ring|self|shirt|shoes|talisman|waist)\b/i,alias:"function"},"source-commands":{pattern:/\b(?:alliance|attack|cast|clearall|clearignore|clearjournal|clearlist|clearsysmsg|createlist|createtimer|dclick|dclicktype|dclickvar|dress|dressconfig|drop|droprelloc|emote|getlabel|guild|gumpclose|gumpresponse|hotkey|ignore|lasttarget|lift|lifttype|menu|menuresponse|msg|org|organize|organizer|overhead|pause|poplist|potion|promptresponse|pushlist|removelist|removetimer|rename|restock|say|scav|scavenger|script|setability|setlasttarget|setskill|settimer|setvar|sysmsg|target|targetloc|targetrelloc|targettype|undress|unignore|unsetvar|useobject|useonce|useskill|usetype|virtue|wait|waitforgump|waitformenu|waitforprompt|waitforstat|waitforsysmsg|waitfortarget|walk|wfsysmsg|wft|whisper|yell)\b/,alias:"function"},"tag-name":{pattern:/(^\{%-?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%]-?|-?[%}]\}$/,alias:"punctuation"},function:/\b(?:atlist|close|closest|count|counter|counttype|dead|dex|diffhits|diffmana|diffstam|diffweight|find|findbuff|finddebuff|findlayer|findtype|findtypelist|followers|gumpexists|hidden|hits|hp|hue|human|humanoid|ingump|inlist|insysmessage|insysmsg|int|invul|lhandempty|list|listexists|mana|maxhits|maxhp|maxmana|maxstam|maxweight|monster|mounted|name|next|noto|paralyzed|poisoned|position|prev|previous|queued|rand|random|rhandempty|skill|stam|str|targetexists|timer|timerexists|varexist|warmode|weight)\b/,keyword:/\b(?:and|as|break|continue|else|elseif|endfor|endif|endwhile|for|if|loop|not|or|replay|stop|while)\b/,boolean:/\b(?:false|null|true)\b/,number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,operator:[{pattern:/(\s)(?:and|b-and|b-or|b-xor|ends with|in|is|matches|not|or|same as|starts with)(?=\s)/,lookbehind:!0},/[=<>]=?|!=|\*\*?|\/\/?|\?:?|[-+~%|]/],punctuation:/[()\[\]{}:.,]/}}ZM.displayName="v";ZM.aliases=[];function ZM(n){n.register(cn),(function(e){var t={pattern:/[\s\S]+/,inside:null};e.languages.v=e.languages.extend("clike",{string:{pattern:/r?(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,alias:"quoted-string",greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\{[^{}]*\}|\w+(?:\.\w+(?:\([^\(\)]*\))?|\[[^\[\]]+\])*)/,lookbehind:!0,inside:{"interpolation-variable":{pattern:/^\$\w[\s\S]*$/,alias:"variable"},"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},"interpolation-expression":t}}}},"class-name":{pattern:/(\b(?:enum|interface|struct|type)\s+)(?:C\.)?\w+/,lookbehind:!0},keyword:/(?:\b(?:__global|as|asm|assert|atomic|break|chan|const|continue|defer|else|embed|enum|fn|for|go(?:to)?|if|import|in|interface|is|lock|match|module|mut|none|or|pub|return|rlock|select|shared|sizeof|static|struct|type(?:of)?|union|unsafe)|\$(?:else|for|if)|#(?:flag|include))\b/,number:/\b(?:0x[a-f\d]+(?:_[a-f\d]+)*|0b[01]+(?:_[01]+)*|0o[0-7]+(?:_[0-7]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?)\b/i,operator:/~|\?|[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\.?/,builtin:/\b(?:any(?:_float|_int)?|bool|byte(?:ptr)?|charptr|f(?:32|64)|i(?:8|16|64|128|nt)|rune|size_t|string|u(?:16|32|64|128)|voidptr)\b/}),t.inside=e.languages.v,e.languages.insertBefore("v","string",{char:{pattern:/`(?:\\`|\\?[^`]{1,2})`/,alias:"rune"}}),e.languages.insertBefore("v","operator",{attribute:{pattern:/(^[\t ]*)\[(?:deprecated|direct_array_access|flag|inline|live|ref_only|typedef|unsafe_fn|windows_stdcall)\]/m,lookbehind:!0,alias:"annotation",inside:{punctuation:/[\[\]]/,keyword:/\w+/}},generic:{pattern:/<\w+>(?=\s*[\)\{])/,inside:{punctuation:/[<>]/,"class-name":/\w+/}}}),e.languages.insertBefore("v","function",{"generic-function":{pattern:/\b\w+\s*<\w+>(?=\()/,inside:{function:/^\w+/,generic:{pattern:/<\w+>/,inside:e.languages.v.generic.inside}}}})})(n)}QM.displayName="vala";QM.aliases=[];function QM(n){n.register(cn),n.languages.vala=n.languages.extend("clike",{"class-name":[{pattern:/\b[A-Z]\w*(?:\.\w+)*\b(?=(?:\?\s+|\*?\s+\*?)\w)/,inside:{punctuation:/\./}},{pattern:/(\[)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(\b(?:class|interface)\s+[A-Z]\w*(?:\.\w+)*\s*:\s*)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/((?:\b(?:class|enum|interface|new|struct)\s+)|(?:catch\s+\())[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}}],keyword:/\b(?:abstract|as|assert|async|base|bool|break|case|catch|char|class|const|construct|continue|default|delegate|delete|do|double|dynamic|else|ensures|enum|errordomain|extern|finally|float|for|foreach|get|if|in|inline|int|int16|int32|int64|int8|interface|internal|is|lock|long|namespace|new|null|out|override|owned|params|private|protected|public|ref|requires|return|set|short|signal|sizeof|size_t|ssize_t|static|string|struct|switch|this|throw|throws|try|typeof|uchar|uint|uint16|uint32|uint64|uint8|ulong|unichar|unowned|ushort|using|value|var|virtual|void|volatile|weak|while|yield)\b/i,function:/\b\w+(?=\s*\()/,number:/(?:\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)(?:f|u?l?)?/i,operator:/\+\+|--|&&|\|\||<<=?|>>=?|=>|->|~|[+\-*\/%&^|=!<>]=?|\?\??|\.\.\./,punctuation:/[{}[\];(),.:]/,constant:/\b[A-Z0-9_]+\b/}),n.languages.insertBefore("vala","string",{"raw-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},"template-string":{pattern:/@"[\s\S]*?"/,greedy:!0,inside:{interpolation:{pattern:/\$(?:\([^)]*\)|[a-zA-Z]\w*)/,inside:{delimiter:{pattern:/^\$\(?|\)$/,alias:"punctuation"},rest:n.languages.vala}},string:/[\s\S]+/}}}),n.languages.insertBefore("vala","keyword",{regex:{pattern:/\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[imsx]{0,4}(?=\s*(?:$|[\r\n,.;})\]]))/,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\//,"regex-flags":/^[a-z]+$/}}})}JM.displayName="velocity";JM.aliases=[];function JM(n){n.register(ni),(function(e){e.languages.velocity=e.languages.extend("markup",{});var t={variable:{pattern:/(^|[^\\](?:\\\\)*)\$!?(?:[a-z][\w-]*(?:\([^)]*\))?(?:\.[a-z][\w-]*(?:\([^)]*\))?|\[[^\]]+\])*|\{[^}]+\})/i,lookbehind:!0,inside:{}},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},number:/\b\d+\b/,boolean:/\b(?:false|true)\b/,operator:/[=!<>]=?|[+*/%-]|&&|\|\||\.\.|\b(?:eq|g[et]|l[et]|n(?:e|ot))\b/,punctuation:/[(){}[\]:,.]/};t.variable.inside={string:t.string,function:{pattern:/([^\w-])[a-z][\w-]*(?=\()/,lookbehind:!0},number:t.number,boolean:t.boolean,punctuation:t.punctuation},e.languages.insertBefore("velocity","comment",{unparsed:{pattern:/(^|[^\\])#\[\[[\s\S]*?\]\]#/,lookbehind:!0,greedy:!0,inside:{punctuation:/^#\[\[|\]\]#$/}},"velocity-comment":[{pattern:/(^|[^\\])#\*[\s\S]*?\*#/,lookbehind:!0,greedy:!0,alias:"comment"},{pattern:/(^|[^\\])##.*/,lookbehind:!0,greedy:!0,alias:"comment"}],directive:{pattern:/(^|[^\\](?:\\\\)*)#@?(?:[a-z][\w-]*|\{[a-z][\w-]*\})(?:\s*\((?:[^()]|\([^()]*\))*\))?/i,lookbehind:!0,inside:{keyword:{pattern:/^#@?(?:[a-z][\w-]*|\{[a-z][\w-]*\})|\bin\b/,inside:{punctuation:/[{}]/}},rest:t}},variable:t.variable}),e.languages.velocity.tag.inside["attr-value"].inside.rest=e.languages.velocity})(n)}e1.displayName="verilog";e1.aliases=[];function e1(n){n.languages.verilog={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"kernel-function":{pattern:/\B\$\w+\b/,alias:"property"},constant:/\B`\w+\b/,function:/\b\w+(?=\()/,keyword:/\b(?:alias|and|assert|assign|assume|automatic|before|begin|bind|bins|binsof|bit|break|buf|bufif0|bufif1|byte|case|casex|casez|cell|chandle|class|clocking|cmos|config|const|constraint|context|continue|cover|covergroup|coverpoint|cross|deassign|default|defparam|design|disable|dist|do|edge|else|end|endcase|endclass|endclocking|endconfig|endfunction|endgenerate|endgroup|endinterface|endmodule|endpackage|endprimitive|endprogram|endproperty|endsequence|endspecify|endtable|endtask|enum|event|expect|export|extends|extern|final|first_match|for|force|foreach|forever|fork|forkjoin|function|generate|genvar|highz0|highz1|if|iff|ifnone|ignore_bins|illegal_bins|import|incdir|include|initial|inout|input|inside|instance|int|integer|interface|intersect|join|join_any|join_none|large|liblist|library|local|localparam|logic|longint|macromodule|matches|medium|modport|module|nand|negedge|new|nmos|nor|noshowcancelled|not|notif0|notif1|null|or|output|package|packed|parameter|pmos|posedge|primitive|priority|program|property|protected|pull0|pull1|pulldown|pullup|pulsestyle_ondetect|pulsestyle_onevent|pure|rand|randc|randcase|randsequence|rcmos|real|realtime|ref|reg|release|repeat|return|rnmos|rpmos|rtran|rtranif0|rtranif1|scalared|sequence|shortint|shortreal|showcancelled|signed|small|solve|specify|specparam|static|string|strong0|strong1|struct|super|supply0|supply1|table|tagged|task|this|throughout|time|timeprecision|timeunit|tran|tranif0|tranif1|tri|tri0|tri1|triand|trior|trireg|type|typedef|union|unique|unsigned|use|uwire|var|vectored|virtual|void|wait|wait_order|wand|weak0|weak1|while|wildcard|wire|with|within|wor|xnor|xor)\b/,important:/\b(?:always|always_comb|always_ff|always_latch)\b(?: *@)?/,number:/\B##?\d+|(?:\b\d+)?'[odbh] ?[\da-fzx_?]+|\b(?:\d*[._])?\d+(?:e[-+]?\d+)?/i,operator:/[-+{}^~%*\/?=!<>&|]+/,punctuation:/[[\];(),.:]/}}t1.displayName="vhdl";t1.aliases=[];function t1(n){n.languages.vhdl={comment:/--.+/,"vhdl-vectors":{pattern:/\b[oxb]"[\da-f_]+"|"[01uxzwlh-]+"/i,alias:"number"},"quoted-function":{pattern:/"\S+?"(?=\()/,alias:"function"},string:/"(?:[^\\"\r\n]|\\(?:\r\n|[\s\S]))*"/,attribute:{pattern:/\b'\w+/,alias:"attr-name"},keyword:/\b(?:access|after|alias|all|architecture|array|assert|attribute|begin|block|body|buffer|bus|case|component|configuration|constant|disconnect|downto|else|elsif|end|entity|exit|file|for|function|generate|generic|group|guarded|if|impure|in|inertial|inout|is|label|library|linkage|literal|loop|map|new|next|null|of|on|open|others|out|package|port|postponed|private|procedure|process|pure|range|record|register|reject|report|return|select|severity|shared|signal|subtype|then|to|transport|type|unaffected|units|until|use|variable|view|wait|when|while|with)\b/i,boolean:/\b(?:false|true)\b/i,function:/\w+(?=\()/,number:/'[01uxzwlh-]'|\b(?:\d+#[\da-f_.]+#|\d[\d_.]*)(?:e[-+]?\d+)?/i,operator:/[<>]=?|:=|[-+*/&=]|\b(?:abs|and|mod|nand|nor|not|or|rem|rol|ror|sla|sll|sra|srl|xnor|xor)\b/i,punctuation:/[{}[\];(),.:]/}}n1.displayName="vim";n1.aliases=[];function n1(n){n.languages.vim={string:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\r\n]|'')*'/,comment:/".*/,function:/\b\w+(?=\()/,keyword:/\b(?:N|Next|P|Print|X|XMLent|XMLns|ab|abbreviate|abc|abclear|abo|aboveleft|al|all|ar|arga|argadd|argd|argdelete|argdo|arge|argedit|argg|argglobal|argl|arglocal|args|argu|argument|as|ascii|b|bN|bNext|ba|bad|badd|ball|bd|bdelete|be|bel|belowright|bf|bfirst|bl|blast|bm|bmodified|bn|bnext|bo|botright|bp|bprevious|br|brea|break|breaka|breakadd|breakd|breakdel|breakl|breaklist|brewind|bro|browse|bufdo|buffer|buffers|bun|bunload|bw|bwipeout|c|cN|cNext|cNfcNfile|ca|cabbrev|cabc|cabclear|cad|caddb|caddbuffer|caddexpr|caddf|caddfile|cal|call|cat|catch|cb|cbuffer|cc|ccl|cclose|cd|ce|center|cex|cexpr|cf|cfile|cfir|cfirst|cg|cgetb|cgetbuffer|cgete|cgetexpr|cgetfile|change|changes|chd|chdir|che|checkpath|checkt|checktime|cl|cla|clast|clist|clo|close|cmapc|cmapclear|cn|cnew|cnewer|cnext|cnf|cnfile|cnorea|cnoreabbrev|co|col|colder|colo|colorscheme|comc|comclear|comp|compiler|con|conf|confirm|continue|cope|copen|copy|cp|cpf|cpfile|cprevious|cq|cquit|cr|crewind|cu|cuna|cunabbrev|cunmap|cw|cwindow|d|debugg|debuggreedy|delc|delcommand|delete|delf|delfunction|delm|delmarks|di|diffg|diffget|diffoff|diffpatch|diffpu|diffput|diffsplit|diffthis|diffu|diffupdate|dig|digraphs|display|dj|djump|dl|dlist|dr|drop|ds|dsearch|dsp|dsplit|e|earlier|echoe|echoerr|echom|echomsg|echon|edit|el|else|elsei|elseif|em|emenu|en|endf|endfo|endfor|endfun|endfunction|endif|endt|endtry|endw|endwhile|ene|enew|ex|exi|exit|exu|exusage|f|file|files|filetype|fin|fina|finally|find|fini|finish|fir|first|fix|fixdel|fo|fold|foldc|foldclose|foldd|folddoc|folddoclosed|folddoopen|foldo|foldopen|for|fu|fun|function|go|goto|gr|grep|grepa|grepadd|h|ha|hardcopy|help|helpf|helpfind|helpg|helpgrep|helpt|helptags|hid|hide|his|history|ia|iabbrev|iabc|iabclear|if|ij|ijump|il|ilist|imapc|imapclear|in|inorea|inoreabbrev|isearch|isp|isplit|iu|iuna|iunabbrev|iunmap|j|join|ju|jumps|k|kee|keepalt|keepj|keepjumps|keepmarks|l|lN|lNext|lNf|lNfile|la|lad|laddb|laddbuffer|laddexpr|laddf|laddfile|lan|language|last|later|lb|lbuffer|lc|lcd|lch|lchdir|lcl|lclose|left|lefta|leftabove|let|lex|lexpr|lf|lfile|lfir|lfirst|lg|lgetb|lgetbuffer|lgete|lgetexpr|lgetfile|lgr|lgrep|lgrepa|lgrepadd|lh|lhelpgrep|list|ll|lla|llast|lli|llist|lm|lmak|lmake|lmap|lmapc|lmapclear|ln|lne|lnew|lnewer|lnext|lnf|lnfile|lnoremap|lo|loadview|loc|lockmarks|lockv|lockvar|lol|lolder|lop|lopen|lp|lpf|lpfile|lprevious|lr|lrewind|ls|lt|ltag|lu|lunmap|lv|lvimgrep|lvimgrepa|lvimgrepadd|lw|lwindow|m|ma|mak|make|mark|marks|mat|match|menut|menutranslate|mk|mkexrc|mks|mksession|mksp|mkspell|mkv|mkvie|mkview|mkvimrc|mod|mode|move|mz|mzf|mzfile|mzscheme|n|nbkey|new|next|nmapc|nmapclear|noh|nohlsearch|norea|noreabbrev|nu|number|nun|nunmap|o|omapc|omapclear|on|only|open|opt|options|ou|ounmap|p|pc|pclose|pe|ped|pedit|perl|perld|perldo|po|pop|popu|popup|pp|ppop|pre|preserve|prev|previous|print|prof|profd|profdel|profile|promptf|promptfind|promptr|promptrepl|ps|psearch|ptN|ptNext|pta|ptag|ptf|ptfirst|ptj|ptjump|ptl|ptlast|ptn|ptnext|ptp|ptprevious|ptr|ptrewind|pts|ptselect|pu|put|pw|pwd|py|pyf|pyfile|python|q|qa|qall|quit|quita|quitall|r|read|rec|recover|red|redi|redir|redo|redr|redraw|redraws|redrawstatus|reg|registers|res|resize|ret|retab|retu|return|rew|rewind|ri|right|rightb|rightbelow|ru|rub|ruby|rubyd|rubydo|rubyf|rubyfile|runtime|rv|rviminfo|sN|sNext|sa|sal|sall|san|sandbox|sargument|sav|saveas|sb|sbN|sbNext|sba|sball|sbf|sbfirst|sbl|sblast|sbm|sbmodified|sbn|sbnext|sbp|sbprevious|sbr|sbrewind|sbuffer|scrip|scripte|scriptencoding|scriptnames|se|set|setf|setfiletype|setg|setglobal|setl|setlocal|sf|sfind|sfir|sfirst|sh|shell|sign|sil|silent|sim|simalt|sl|sla|slast|sleep|sm|smagic|smap|smapc|smapclear|sme|smenu|sn|snext|sni|sniff|sno|snomagic|snor|snoremap|snoreme|snoremenu|so|sor|sort|source|sp|spe|spelld|spelldump|spellgood|spelli|spellinfo|spellr|spellrepall|spellu|spellundo|spellw|spellwrong|split|spr|sprevious|sre|srewind|st|sta|stag|star|startg|startgreplace|startinsert|startr|startreplace|stj|stjump|stop|stopi|stopinsert|sts|stselect|sun|sunhide|sunm|sunmap|sus|suspend|sv|sview|syncbind|t|tN|tNext|ta|tab|tabN|tabNext|tabc|tabclose|tabd|tabdo|tabe|tabedit|tabf|tabfind|tabfir|tabfirst|tabl|tablast|tabm|tabmove|tabn|tabnew|tabnext|tabo|tabonly|tabp|tabprevious|tabr|tabrewind|tabs|tag|tags|tc|tcl|tcld|tcldo|tclf|tclfile|te|tearoff|tf|tfirst|th|throw|tj|tjump|tl|tlast|tm|tmenu|tn|tnext|to|topleft|tp|tprevious|tr|trewind|try|ts|tselect|tu|tunmenu|u|una|unabbreviate|undo|undoj|undojoin|undol|undolist|unh|unhide|unlet|unlo|unlockvar|unm|unmap|up|update|ve|verb|verbose|version|vert|vertical|vi|vie|view|vim|vimgrep|vimgrepa|vimgrepadd|visual|viu|viusage|vmapc|vmapclear|vne|vnew|vs|vsplit|vu|vunmap|w|wN|wNext|wa|wall|wh|while|win|winc|wincmd|windo|winp|winpos|winsize|wn|wnext|wp|wprevious|wq|wqa|wqall|write|ws|wsverb|wv|wviminfo|x|xa|xall|xit|xm|xmap|xmapc|xmapclear|xme|xmenu|xn|xnoremap|xnoreme|xnoremenu|xu|xunmap|y|yank)\b/,builtin:/\b(?:acd|ai|akm|aleph|allowrevins|altkeymap|ambiwidth|ambw|anti|antialias|arab|arabic|arabicshape|ari|arshape|autochdir|autocmd|autoindent|autoread|autowrite|autowriteall|aw|awa|background|backspace|backup|backupcopy|backupdir|backupext|backupskip|balloondelay|ballooneval|balloonexpr|bdir|bdlay|beval|bex|bexpr|bg|bh|bin|binary|biosk|bioskey|bk|bkc|bomb|breakat|brk|browsedir|bs|bsdir|bsk|bt|bufhidden|buflisted|buftype|casemap|ccv|cdpath|cedit|cfu|ch|charconvert|ci|cin|cindent|cink|cinkeys|cino|cinoptions|cinw|cinwords|clipboard|cmdheight|cmdwinheight|cmp|cms|columns|com|comments|commentstring|compatible|complete|completefunc|completeopt|consk|conskey|copyindent|cot|cpo|cpoptions|cpt|cscopepathcomp|cscopeprg|cscopequickfix|cscopetag|cscopetagorder|cscopeverbose|cspc|csprg|csqf|cst|csto|csverb|cuc|cul|cursorcolumn|cursorline|cwh|debug|deco|def|define|delcombine|dex|dg|dict|dictionary|diff|diffexpr|diffopt|digraph|dip|dir|directory|dy|ea|ead|eadirection|eb|ed|edcompatible|ef|efm|ei|ek|enc|encoding|endofline|eol|ep|equalalways|equalprg|errorbells|errorfile|errorformat|esckeys|et|eventignore|expandtab|exrc|fcl|fcs|fdc|fde|fdi|fdl|fdls|fdm|fdn|fdo|fdt|fen|fenc|fencs|fex|ff|ffs|fileencoding|fileencodings|fileformat|fileformats|fillchars|fk|fkmap|flp|fml|fmr|foldcolumn|foldenable|foldexpr|foldignore|foldlevel|foldlevelstart|foldmarker|foldmethod|foldminlines|foldnestmax|foldtext|formatexpr|formatlistpat|formatoptions|formatprg|fp|fs|fsync|ft|gcr|gd|gdefault|gfm|gfn|gfs|gfw|ghr|gp|grepformat|grepprg|gtl|gtt|guicursor|guifont|guifontset|guifontwide|guiheadroom|guioptions|guipty|guitablabel|guitabtooltip|helpfile|helpheight|helplang|hf|hh|hi|hidden|highlight|hk|hkmap|hkmapp|hkp|hl|hlg|hls|hlsearch|ic|icon|iconstring|ignorecase|im|imactivatekey|imak|imc|imcmdline|imd|imdisable|imi|iminsert|ims|imsearch|inc|include|includeexpr|incsearch|inde|indentexpr|indentkeys|indk|inex|inf|infercase|insertmode|invacd|invai|invakm|invallowrevins|invaltkeymap|invanti|invantialias|invar|invarab|invarabic|invarabicshape|invari|invarshape|invautochdir|invautoindent|invautoread|invautowrite|invautowriteall|invaw|invawa|invbackup|invballooneval|invbeval|invbin|invbinary|invbiosk|invbioskey|invbk|invbl|invbomb|invbuflisted|invcf|invci|invcin|invcindent|invcompatible|invconfirm|invconsk|invconskey|invcopyindent|invcp|invcscopetag|invcscopeverbose|invcst|invcsverb|invcuc|invcul|invcursorcolumn|invcursorline|invdeco|invdelcombine|invdg|invdiff|invdigraph|invdisable|invea|inveb|inved|invedcompatible|invek|invendofline|inveol|invequalalways|inverrorbells|invesckeys|invet|invex|invexpandtab|invexrc|invfen|invfk|invfkmap|invfoldenable|invgd|invgdefault|invguipty|invhid|invhidden|invhk|invhkmap|invhkmapp|invhkp|invhls|invhlsearch|invic|invicon|invignorecase|invim|invimc|invimcmdline|invimd|invincsearch|invinf|invinfercase|invinsertmode|invis|invjoinspaces|invjs|invlazyredraw|invlbr|invlinebreak|invlisp|invlist|invloadplugins|invlpl|invlz|invma|invmacatsui|invmagic|invmh|invml|invmod|invmodeline|invmodifiable|invmodified|invmore|invmousef|invmousefocus|invmousehide|invnu|invnumber|invodev|invopendevice|invpaste|invpi|invpreserveindent|invpreviewwindow|invprompt|invpvw|invreadonly|invremap|invrestorescreen|invrevins|invri|invrightleft|invrightleftcmd|invrl|invrlc|invro|invrs|invru|invruler|invsb|invsc|invscb|invscrollbind|invscs|invsecure|invsft|invshellslash|invshelltemp|invshiftround|invshortname|invshowcmd|invshowfulltag|invshowmatch|invshowmode|invsi|invsm|invsmartcase|invsmartindent|invsmarttab|invsmd|invsn|invsol|invspell|invsplitbelow|invsplitright|invspr|invsr|invssl|invsta|invstartofline|invstmp|invswapfile|invswf|invta|invtagbsearch|invtagrelative|invtagstack|invtbi|invtbidi|invtbs|invtermbidi|invterse|invtextauto|invtextmode|invtf|invtgst|invtildeop|invtimeout|invtitle|invto|invtop|invtr|invttimeout|invttybuiltin|invttyfast|invtx|invvb|invvisualbell|invwa|invwarn|invwb|invweirdinvert|invwfh|invwfw|invwildmenu|invwinfixheight|invwinfixwidth|invwiv|invwmnu|invwrap|invwrapscan|invwrite|invwriteany|invwritebackup|invws|isf|isfname|isi|isident|isk|iskeyword|isprint|joinspaces|js|key|keymap|keymodel|keywordprg|km|kmp|kp|langmap|langmenu|laststatus|lazyredraw|lbr|lcs|linebreak|lines|linespace|lisp|lispwords|listchars|loadplugins|lpl|lsp|lz|macatsui|magic|makeef|makeprg|matchpairs|matchtime|maxcombine|maxfuncdepth|maxmapdepth|maxmem|maxmempattern|maxmemtot|mco|mef|menuitems|mfd|mh|mis|mkspellmem|ml|mls|mm|mmd|mmp|mmt|modeline|modelines|modifiable|modified|more|mouse|mousef|mousefocus|mousehide|mousem|mousemodel|mouses|mouseshape|mouset|mousetime|mp|mps|msm|mzq|mzquantum|nf|noacd|noai|noakm|noallowrevins|noaltkeymap|noanti|noantialias|noar|noarab|noarabic|noarabicshape|noari|noarshape|noautochdir|noautoindent|noautoread|noautowrite|noautowriteall|noaw|noawa|nobackup|noballooneval|nobeval|nobin|nobinary|nobiosk|nobioskey|nobk|nobl|nobomb|nobuflisted|nocf|noci|nocin|nocindent|nocompatible|noconfirm|noconsk|noconskey|nocopyindent|nocp|nocscopetag|nocscopeverbose|nocst|nocsverb|nocuc|nocul|nocursorcolumn|nocursorline|nodeco|nodelcombine|nodg|nodiff|nodigraph|nodisable|noea|noeb|noed|noedcompatible|noek|noendofline|noeol|noequalalways|noerrorbells|noesckeys|noet|noex|noexpandtab|noexrc|nofen|nofk|nofkmap|nofoldenable|nogd|nogdefault|noguipty|nohid|nohidden|nohk|nohkmap|nohkmapp|nohkp|nohls|noic|noicon|noignorecase|noim|noimc|noimcmdline|noimd|noincsearch|noinf|noinfercase|noinsertmode|nois|nojoinspaces|nojs|nolazyredraw|nolbr|nolinebreak|nolisp|nolist|noloadplugins|nolpl|nolz|noma|nomacatsui|nomagic|nomh|noml|nomod|nomodeline|nomodifiable|nomodified|nomore|nomousef|nomousefocus|nomousehide|nonu|nonumber|noodev|noopendevice|nopaste|nopi|nopreserveindent|nopreviewwindow|noprompt|nopvw|noreadonly|noremap|norestorescreen|norevins|nori|norightleft|norightleftcmd|norl|norlc|noro|nors|noru|noruler|nosb|nosc|noscb|noscrollbind|noscs|nosecure|nosft|noshellslash|noshelltemp|noshiftround|noshortname|noshowcmd|noshowfulltag|noshowmatch|noshowmode|nosi|nosm|nosmartcase|nosmartindent|nosmarttab|nosmd|nosn|nosol|nospell|nosplitbelow|nosplitright|nospr|nosr|nossl|nosta|nostartofline|nostmp|noswapfile|noswf|nota|notagbsearch|notagrelative|notagstack|notbi|notbidi|notbs|notermbidi|noterse|notextauto|notextmode|notf|notgst|notildeop|notimeout|notitle|noto|notop|notr|nottimeout|nottybuiltin|nottyfast|notx|novb|novisualbell|nowa|nowarn|nowb|noweirdinvert|nowfh|nowfw|nowildmenu|nowinfixheight|nowinfixwidth|nowiv|nowmnu|nowrap|nowrapscan|nowrite|nowriteany|nowritebackup|nows|nrformats|numberwidth|nuw|odev|oft|ofu|omnifunc|opendevice|operatorfunc|opfunc|osfiletype|pa|para|paragraphs|paste|pastetoggle|patchexpr|patchmode|path|pdev|penc|pex|pexpr|pfn|ph|pheader|pi|pm|pmbcs|pmbfn|popt|preserveindent|previewheight|previewwindow|printdevice|printencoding|printexpr|printfont|printheader|printmbcharset|printmbfont|printoptions|prompt|pt|pumheight|pvh|pvw|qe|quoteescape|readonly|remap|report|restorescreen|revins|rightleft|rightleftcmd|rl|rlc|ro|rs|rtp|ruf|ruler|rulerformat|runtimepath|sbo|sc|scb|scr|scroll|scrollbind|scrolljump|scrolloff|scrollopt|scs|sect|sections|secure|sel|selection|selectmode|sessionoptions|sft|shcf|shellcmdflag|shellpipe|shellquote|shellredir|shellslash|shelltemp|shelltype|shellxquote|shiftround|shiftwidth|shm|shortmess|shortname|showbreak|showcmd|showfulltag|showmatch|showmode|showtabline|shq|si|sidescroll|sidescrolloff|siso|sj|slm|smartcase|smartindent|smarttab|smc|smd|softtabstop|sol|spc|spell|spellcapcheck|spellfile|spelllang|spellsuggest|spf|spl|splitbelow|splitright|sps|sr|srr|ss|ssl|ssop|stal|startofline|statusline|stl|stmp|su|sua|suffixes|suffixesadd|sw|swapfile|swapsync|swb|swf|switchbuf|sws|sxq|syn|synmaxcol|syntax|t_AB|t_AF|t_AL|t_CS|t_CV|t_Ce|t_Co|t_Cs|t_DL|t_EI|t_F1|t_F2|t_F3|t_F4|t_F5|t_F6|t_F7|t_F8|t_F9|t_IE|t_IS|t_K1|t_K3|t_K4|t_K5|t_K6|t_K7|t_K8|t_K9|t_KA|t_KB|t_KC|t_KD|t_KE|t_KF|t_KG|t_KH|t_KI|t_KJ|t_KK|t_KL|t_RI|t_RV|t_SI|t_Sb|t_Sf|t_WP|t_WS|t_ZH|t_ZR|t_al|t_bc|t_cd|t_ce|t_cl|t_cm|t_cs|t_da|t_db|t_dl|t_fs|t_k1|t_k2|t_k3|t_k4|t_k5|t_k6|t_k7|t_k8|t_k9|t_kB|t_kD|t_kI|t_kN|t_kP|t_kb|t_kd|t_ke|t_kh|t_kl|t_kr|t_ks|t_ku|t_le|t_mb|t_md|t_me|t_mr|t_ms|t_nd|t_op|t_se|t_so|t_sr|t_te|t_ti|t_ts|t_ue|t_us|t_ut|t_vb|t_ve|t_vi|t_vs|t_xs|tabline|tabpagemax|tabstop|tagbsearch|taglength|tagrelative|tagstack|tal|tb|tbi|tbidi|tbis|tbs|tenc|term|termbidi|termencoding|terse|textauto|textmode|textwidth|tgst|thesaurus|tildeop|timeout|timeoutlen|title|titlelen|titleold|titlestring|toolbar|toolbariconsize|top|tpm|tsl|tsr|ttimeout|ttimeoutlen|ttm|tty|ttybuiltin|ttyfast|ttym|ttymouse|ttyscroll|ttytype|tw|tx|uc|ul|undolevels|updatecount|updatetime|ut|vb|vbs|vdir|verbosefile|vfile|viewdir|viewoptions|viminfo|virtualedit|visualbell|vop|wak|warn|wb|wc|wcm|wd|weirdinvert|wfh|wfw|whichwrap|wi|wig|wildchar|wildcharm|wildignore|wildmenu|wildmode|wildoptions|wim|winaltkeys|window|winfixheight|winfixwidth|winheight|winminheight|winminwidth|winwidth|wiv|wiw|wm|wmh|wmnu|wmw|wop|wrap|wrapmargin|wrapscan|writeany|writebackup|writedelay|ww)\b/,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?)\b/i,operator:/\|\||&&|[-+.]=?|[=!](?:[=~][#?]?)?|[<>]=?[#?]?|[*\/%?]|\b(?:is(?:not)?)\b/,punctuation:/[{}[\](),;:]/}}r1.displayName="visual-basic";r1.aliases=["vb","vba"];function r1(n){n.languages["visual-basic"]={comment:{pattern:/(?:[']|REM\b)(?:[^\r\n_]|_(?:\r\n?|\n)?)*/i,inside:{keyword:/^REM/i}},directive:{pattern:/#(?:Const|Else|ElseIf|End|ExternalChecksum|ExternalSource|If|Region)(?:\b_[ \t]*(?:\r\n?|\n)|.)+/i,alias:"property",greedy:!0},string:{pattern:/\$?["](?:["]{2}|[^"])*["]C?/i,greedy:!0},date:{pattern:/#[ \t]*(?:\d+([/-])\d+\1\d+(?:[ \t]+(?:\d+[ \t]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[ \t]*(?:AM|PM))?))?|\d+[ \t]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[ \t]*(?:AM|PM))?)[ \t]*#/i,alias:"number"},number:/(?:(?:\b\d+(?:\.\d+)?|\.\d+)(?:E[+-]?\d+)?|&[HO][\dA-F]+)(?:[FRD]|U?[ILS])?/i,boolean:/\b(?:False|Nothing|True)\b/i,keyword:/\b(?:AddHandler|AddressOf|Alias|And(?:Also)?|As|Boolean|ByRef|Byte|ByVal|Call|Case|Catch|C(?:Bool|Byte|Char|Date|Dbl|Dec|Int|Lng|Obj|SByte|Short|Sng|Str|Type|UInt|ULng|UShort)|Char|Class|Const|Continue|Currency|Date|Decimal|Declare|Default|Delegate|Dim|DirectCast|Do|Double|Each|Else(?:If)?|End(?:If)?|Enum|Erase|Error|Event|Exit|Finally|For|Friend|Function|Get(?:Type|XMLNamespace)?|Global|GoSub|GoTo|Handles|If|Implements|Imports|In|Inherits|Integer|Interface|Is|IsNot|Let|Lib|Like|Long|Loop|Me|Mod|Module|Must(?:Inherit|Override)|My(?:Base|Class)|Namespace|Narrowing|New|Next|Not(?:Inheritable|Overridable)?|Object|Of|On|Operator|Option(?:al)?|Or(?:Else)?|Out|Overloads|Overridable|Overrides|ParamArray|Partial|Private|Property|Protected|Public|RaiseEvent|ReadOnly|ReDim|RemoveHandler|Resume|Return|SByte|Select|Set|Shadows|Shared|short|Single|Static|Step|Stop|String|Structure|Sub|SyncLock|Then|Throw|To|Try|TryCast|Type|TypeOf|U(?:Integer|Long|Short)|Until|Using|Variant|Wend|When|While|Widening|With(?:Events)?|WriteOnly|Xor)\b/i,operator:/[+\-*/\\^<=>&#@$%!]|\b_(?=[ \t]*[\r\n])/,punctuation:/[{}().,:?]/},n.languages.vb=n.languages["visual-basic"],n.languages.vba=n.languages["visual-basic"]}i1.displayName="warpscript";i1.aliases=[];function i1(n){n.languages.warpscript={comment:/#.*|\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'|<'(?:[^\\']|'(?!>)|\\.)*'>/,greedy:!0},variable:/\$\S+/,macro:{pattern:/@\S+/,alias:"property"},keyword:/\b(?:BREAK|CHECKMACRO|CONTINUE|CUDF|DEFINED|DEFINEDMACRO|EVAL|FAIL|FOR|FOREACH|FORSTEP|IFT|IFTE|MSGFAIL|NRETURN|RETHROW|RETURN|SWITCH|TRY|UDF|UNTIL|WHILE)\b/,number:/[+-]?\b(?:NaN|Infinity|\d+(?:\.\d*)?(?:[Ee][+-]?\d+)?|0x[\da-fA-F]+|0b[01]+)\b/,boolean:/\b(?:F|T|false|true)\b/,punctuation:/<%|%>|[{}[\]()]/,operator:/==|&&?|\|\|?|\*\*?|>>>?|<<|[<>!~]=?|[-/%^]|\+!?|\b(?:AND|NOT|OR)\b/}}s1.displayName="wasm";s1.aliases=[];function s1(n){n.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/}}a1.displayName="web-idl";a1.aliases=["webidl"];function a1(n){(function(e){var t=/(?:\B-|\b_|\b)[A-Za-z][\w-]*(?![\w-])/.source,r="(?:"+/\b(?:unsigned\s+)?long\s+long(?![\w-])/.source+"|"+/\b(?:unrestricted|unsigned)\s+[a-z]+(?![\w-])/.source+"|"+/(?!(?:unrestricted|unsigned)\b)/.source+t+/(?:\s*<(?:[^<>]|<[^<>]*>)*>)?/.source+")"+/(?:\s*\?)?/.source,i={};e.languages["web-idl"]={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/"[^"]*"/,greedy:!0},namespace:{pattern:RegExp(/(\bnamespace\s+)/.source+t),lookbehind:!0},"class-name":[{pattern:/(^|[^\w-])(?:iterable|maplike|setlike)\s*<(?:[^<>]|<[^<>]*>)*>/,lookbehind:!0,inside:i},{pattern:RegExp(/(\b(?:attribute|const|deleter|getter|optional|setter)\s+)/.source+r),lookbehind:!0,inside:i},{pattern:RegExp("("+/\bcallback\s+/.source+t+/\s*=\s*/.source+")"+r),lookbehind:!0,inside:i},{pattern:RegExp(/(\btypedef\b\s*)/.source+r),lookbehind:!0,inside:i},{pattern:RegExp(/(\b(?:callback|dictionary|enum|interface(?:\s+mixin)?)\s+)(?!(?:interface|mixin)\b)/.source+t),lookbehind:!0},{pattern:RegExp(/(:\s*)/.source+t),lookbehind:!0},RegExp(t+/(?=\s+(?:implements|includes)\b)/.source),{pattern:RegExp(/(\b(?:implements|includes)\s+)/.source+t),lookbehind:!0},{pattern:RegExp(r+"(?="+/\s*(?:\.{3}\s*)?/.source+t+/\s*[(),;=]/.source+")"),inside:i}],builtin:/\b(?:ArrayBuffer|BigInt64Array|BigUint64Array|ByteString|DOMString|DataView|Float32Array|Float64Array|FrozenArray|Int16Array|Int32Array|Int8Array|ObservableArray|Promise|USVString|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray)\b/,keyword:[/\b(?:async|attribute|callback|const|constructor|deleter|dictionary|enum|getter|implements|includes|inherit|interface|mixin|namespace|null|optional|or|partial|readonly|required|setter|static|stringifier|typedef|unrestricted)\b/,/\b(?:any|bigint|boolean|byte|double|float|iterable|long|maplike|object|octet|record|sequence|setlike|short|symbol|undefined|unsigned|void)\b/],boolean:/\b(?:false|true)\b/,number:{pattern:/(^|[^\w-])-?(?:0x[0-9a-f]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|NaN|Infinity)(?![\w-])/i,lookbehind:!0},operator:/\.{3}|[=:?<>-]/,punctuation:/[(){}[\].,;]/};for(var s in e.languages["web-idl"])s!=="class-name"&&(i[s]=e.languages["web-idl"][s]);e.languages.webidl=e.languages["web-idl"]})(n)}o1.displayName="wgsl";o1.aliases=[];function o1(n){n.languages.wgsl={comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"builtin-attribute":{pattern:/(@)builtin\(.*?\)/,lookbehind:!0,inside:{attribute:{pattern:/^builtin/,alias:"attr-name"},punctuation:/[(),]/,"built-in-values":{pattern:/\b(?:frag_depth|front_facing|global_invocation_id|instance_index|local_invocation_id|local_invocation_index|num_workgroups|position|sample_index|sample_mask|vertex_index|workgroup_id)\b/,alias:"attr-value"}}},attributes:{pattern:/(@)(?:align|binding|compute|const|fragment|group|id|interpolate|invariant|location|size|vertex|workgroup_size)/i,lookbehind:!0,alias:"attr-name"},functions:{pattern:/\b(fn\s+)[_a-zA-Z]\w*(?=[(<])/,lookbehind:!0,alias:"function"},keyword:/\b(?:bitcast|break|case|const|continue|continuing|default|discard|else|enable|fallthrough|fn|for|function|if|let|loop|private|return|storage|struct|switch|type|uniform|var|while|workgroup)\b/,builtin:/\b(?:abs|acos|acosh|all|any|array|asin|asinh|atan|atan2|atanh|atomic|atomicAdd|atomicAnd|atomicCompareExchangeWeak|atomicExchange|atomicLoad|atomicMax|atomicMin|atomicOr|atomicStore|atomicSub|atomicXor|bool|ceil|clamp|cos|cosh|countLeadingZeros|countOneBits|countTrailingZeros|cross|degrees|determinant|distance|dot|dpdx|dpdxCoarse|dpdxFine|dpdy|dpdyCoarse|dpdyFine|exp|exp2|extractBits|f32|f64|faceForward|firstLeadingBit|floor|fma|fract|frexp|fwidth|fwidthCoarse|fwidthFine|i32|i64|insertBits|inverseSqrt|ldexp|length|log|log2|mat[2-4]x[2-4]|max|min|mix|modf|normalize|override|pack2x16float|pack2x16snorm|pack2x16unorm|pack4x8snorm|pack4x8unorm|pow|ptr|quantizeToF16|radians|reflect|refract|reverseBits|round|sampler|sampler_comparison|select|shiftLeft|shiftRight|sign|sin|sinh|smoothstep|sqrt|staticAssert|step|storageBarrier|tan|tanh|textureDimensions|textureGather|textureGatherCompare|textureLoad|textureNumLayers|textureNumLevels|textureNumSamples|textureSample|textureSampleBias|textureSampleCompare|textureSampleCompareLevel|textureSampleGrad|textureSampleLevel|textureStore|texture_1d|texture_2d|texture_2d_array|texture_3d|texture_cube|texture_cube_array|texture_depth_2d|texture_depth_2d_array|texture_depth_cube|texture_depth_cube_array|texture_depth_multisampled_2d|texture_multisampled_2d|texture_storage_1d|texture_storage_2d|texture_storage_2d_array|texture_storage_3d|transpose|trunc|u32|u64|unpack2x16float|unpack2x16snorm|unpack2x16unorm|unpack4x8snorm|unpack4x8unorm|vec[2-4]|workgroupBarrier)\b/,"function-calls":{pattern:/\b[_a-z]\w*(?=\()/i,alias:"function"},"class-name":/\b(?:[A-Z][A-Za-z0-9]*)\b/,"bool-literal":{pattern:/\b(?:false|true)\b/,alias:"boolean"},"hex-int-literal":{pattern:/\b0[xX][0-9a-fA-F]+[iu]?\b(?![.pP])/,alias:"number"},"hex-float-literal":{pattern:/\b0[xX][0-9a-fA-F]*(?:\.[0-9a-fA-F]*)?(?:[pP][+-]?\d+[fh]?)?/,alias:"number"},"decimal-float-literal":[{pattern:/\d*\.\d+(?:[eE](?:\+|-)?\d+)?[fh]?/,alias:"number"},{pattern:/\d+\.\d*(?:[eE](?:\+|-)?\d+)?[fh]?/,alias:"number"},{pattern:/\d+[eE](?:\+|-)?\d+[fh]?/,alias:"number"},{pattern:/\b\d+[fh]\b/,alias:"number"}],"int-literal":{pattern:/\b\d+[iu]?\b/,alias:"number"},operator:[{pattern:/(?:\^|~|\|(?!\|)|\|\||&&|<<|>>|!)(?!=)/},{pattern:/&(?![&=])/},{pattern:/(?:\+=|-=|\*=|\/=|%=|\^=|&=|\|=|<<=|>>=)/},{pattern:/(^|[^<>=!])=(?![=>])/,lookbehind:!0},{pattern:/(?:==|!=|<=|\+\+|--|(^|[^=])>=)/,lookbehind:!0},{pattern:/(?:(?:[+%]|(?:\*(?!\w)))(?!=))|(?:-(?!>))|(?:\/(?!\/))/},{pattern:/->/}],punctuation:/[@(){}[\],;<>:.]/}}l1.displayName="wiki";l1.aliases=[];function l1(n){n.register(ni),n.languages.wiki=n.languages.extend("markup",{"block-comment":{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0,alias:"comment"},heading:{pattern:/^(=+)[^=\r\n].*?\1/m,inside:{punctuation:/^=+|=+$/,important:/.+/}},emphasis:{pattern:/('{2,5}).+?\1/,inside:{"bold-italic":{pattern:/(''''').+?(?=\1)/,lookbehind:!0,alias:["bold","italic"]},bold:{pattern:/(''')[^'](?:.*?[^'])?(?=\1)/,lookbehind:!0},italic:{pattern:/('')[^'](?:.*?[^'])?(?=\1)/,lookbehind:!0},punctuation:/^''+|''+$/}},hr:{pattern:/^-{4,}/m,alias:"punctuation"},url:[/ISBN +(?:97[89][ -]?)?(?:\d[ -]?){9}[\dx]\b|(?:PMID|RFC) +\d+/i,/\[\[.+?\]\]|\[.+?\]/],variable:[/__[A-Z]+__/,/\{{3}.+?\}{3}/,/\{\{.+?\}\}/],symbol:[/^#redirect/im,/~{3,5}/],"table-tag":{pattern:/((?:^|[|!])[|!])[^|\r\n]+\|(?!\|)/m,lookbehind:!0,inside:{"table-bar":{pattern:/\|$/,alias:"punctuation"},rest:n.languages.markup.tag.inside}},punctuation:/^(?:\{\||\|\}|\|-|[*#:;!|])|\|\||!!/m}),n.languages.insertBefore("wiki","tag",{nowiki:{pattern:/<(nowiki|pre|source)\b[^>]*>[\s\S]*?<\/\1>/i,inside:{tag:{pattern:/<(?:nowiki|pre|source)\b[^>]*>|<\/(?:nowiki|pre|source)>/i,inside:n.languages.markup.tag.inside}}}})}u1.displayName="wolfram";u1.aliases=["mathematica","nb","wl"];function u1(n){n.languages.wolfram={comment:/\(\*(?:\(\*(?:[^*]|\*(?!\)))*\*\)|(?!\(\*)[\s\S])*?\*\)/,string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:Abs|AbsArg|Accuracy|Block|Do|For|Function|If|Manipulate|Module|Nest|NestList|None|Return|Switch|Table|Which|While)\b/,context:{pattern:/\b\w+`+\w*/,alias:"class-name"},blank:{pattern:/\b\w+_\b/,alias:"regex"},"global-variable":{pattern:/\$\w+/,alias:"variable"},boolean:/\b(?:False|True)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/\/\.|;|=\.|\^=|\^:=|:=|<<|>>|<\||\|>|:>|\|->|->|<-|@@@|@@|@|\/@|=!=|===|==|=|\+|-|\[\/-+%=\]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},n.languages.mathematica=n.languages.wolfram,n.languages.wl=n.languages.wolfram,n.languages.nb=n.languages.wolfram}c1.displayName="wren";c1.aliases=[];function c1(n){n.languages.wren={comment:[{pattern:/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*))*\*\/)*\*\/)*\*\//,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],"triple-quoted-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},"string-literal":null,hashbang:{pattern:/^#!\/.+/,greedy:!0,alias:"comment"},attribute:{pattern:/#!?[ \t\u3000]*\w+/,alias:"keyword"},"class-name":[{pattern:/(\bclass\s+)\w+/,lookbehind:!0},/\b[A-Z][a-z\d_]*\b/],constant:/\b[A-Z][A-Z\d_]*\b/,null:{pattern:/\bnull\b/,alias:"keyword"},keyword:/\b(?:as|break|class|construct|continue|else|for|foreign|if|import|in|is|return|static|super|this|var|while)\b/,boolean:/\b(?:false|true)\b/,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,function:/\b[a-z_]\w*(?=\s*[({])/i,operator:/<<|>>|[=!<>]=?|&&|\|\||[-+*/%~^&|?:]|\.{2,3}/,punctuation:/[\[\](){}.,;]/},n.languages.wren["string-literal"]={pattern:/(^|[^\\"])"(?:[^\\"%]|\\[\s\S]|%(?!\()|%\((?:[^()]|\((?:[^()]|\([^)]*\))*\))*\))*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)%\((?:[^()]|\((?:[^()]|\([^)]*\))*\))*\)/,lookbehind:!0,inside:{expression:{pattern:/^(%\()[\s\S]+(?=\)$)/,lookbehind:!0,inside:n.languages.wren},"interpolation-punctuation":{pattern:/^%\(|\)$/,alias:"punctuation"}}},string:/[\s\S]+/}}}d1.displayName="xeora";d1.aliases=["xeoracube"];function d1(n){n.register(ni),(function(e){e.languages.xeora=e.languages.extend("markup",{constant:{pattern:/\$(?:DomainContents|PageRenderDuration)\$/,inside:{punctuation:{pattern:/\$/}}},variable:{pattern:/\$@?(?:#+|[-+*~=^])?[\w.]+\$/,inside:{punctuation:{pattern:/[$.]/},operator:{pattern:/#+|[-+*~=^@]/}}},"function-inline":{pattern:/\$F:[-\w.]+\?[-\w.]+(?:,(?:(?:@[-#]*\w+\.[\w+.]\.*)*\|)*(?:(?:[\w+]|[-#*.~^]+[\w+]|=\S)(?:[^$=]|=+[^=])*=*|(?:@[-#]*\w+\.[\w+.]\.*)+(?:(?:[\w+]|[-#*~^][-#*.~^]*[\w+]|=\S)(?:[^$=]|=+[^=])*=*)?)?)?\$/,inside:{variable:{pattern:/(?:[,|])@?(?:#+|[-+*~=^])?[\w.]+/,inside:{punctuation:{pattern:/[,.|]/},operator:{pattern:/#+|[-+*~=^@]/}}},punctuation:{pattern:/\$\w:|[$:?.,|]/}},alias:"function"},"function-block":{pattern:/\$XF:\{[-\w.]+\?[-\w.]+(?:,(?:(?:@[-#]*\w+\.[\w+.]\.*)*\|)*(?:(?:[\w+]|[-#*.~^]+[\w+]|=\S)(?:[^$=]|=+[^=])*=*|(?:@[-#]*\w+\.[\w+.]\.*)+(?:(?:[\w+]|[-#*~^][-#*.~^]*[\w+]|=\S)(?:[^$=]|=+[^=])*=*)?)?)?\}:XF\$/,inside:{punctuation:{pattern:/[$:{}?.,|]/}},alias:"function"},"directive-inline":{pattern:/\$\w(?:#\d+\+?)?(?:\[[-\w.]+\])?:[-\/\w.]+\$/,inside:{punctuation:{pattern:/\$(?:\w:|C(?:\[|#\d))?|[:{[\]]/,inside:{tag:{pattern:/#\d/}}}},alias:"function"},"directive-block-open":{pattern:/\$\w+:\{|\$\w(?:#\d+\+?)?(?:\[[-\w.]+\])?:[-\w.]+:\{(?:![A-Z]+)?/,inside:{punctuation:{pattern:/\$(?:\w:|C(?:\[|#\d))?|[:{[\]]/,inside:{tag:{pattern:/#\d/}}},attribute:{pattern:/![A-Z]+$/,inside:{punctuation:{pattern:/!/}},alias:"keyword"}},alias:"function"},"directive-block-separator":{pattern:/\}:[-\w.]+:\{/,inside:{punctuation:{pattern:/[:{}]/}},alias:"function"},"directive-block-close":{pattern:/\}:[-\w.]+\$/,inside:{punctuation:{pattern:/[:{}$]/}},alias:"function"}}),e.languages.insertBefore("inside","punctuation",{variable:e.languages.xeora["function-inline"].inside.variable},e.languages.xeora["function-block"]),e.languages.xeoracube=e.languages.xeora})(n)}h1.displayName="xml-doc";h1.aliases=[];function h1(n){n.register(ni),(function(e){function t(a,o){e.languages[a]&&e.languages.insertBefore(a,"comment",{"doc-comment":o})}var r=e.languages.markup.tag,i={pattern:/\/\/\/.*/,greedy:!0,alias:"comment",inside:{tag:r}},s={pattern:/'''.*/,greedy:!0,alias:"comment",inside:{tag:r}};t("csharp",i),t("fsharp",i),t("vbnet",s)})(n)}p1.displayName="xojo";p1.aliases=[];function p1(n){n.languages.xojo={comment:{pattern:/(?:'|\/\/|Rem\b).+/i,greedy:!0},string:{pattern:/"(?:""|[^"])*"/,greedy:!0},number:[/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,/&[bchou][a-z\d]+/i],directive:{pattern:/#(?:Else|ElseIf|Endif|If|Pragma)\b/i,alias:"property"},keyword:/\b(?:AddHandler|App|Array|As(?:signs)?|Auto|Boolean|Break|By(?:Ref|Val)|Byte|Call|Case|Catch|CFStringRef|CGFloat|Class|Color|Const|Continue|CString|Currency|CurrentMethodName|Declare|Delegate|Dim|Do(?:uble|wnTo)?|Each|Else(?:If)?|End|Enumeration|Event|Exception|Exit|Extends|False|Finally|For|Function|Get|GetTypeInfo|Global|GOTO|If|Implements|In|Inherits|Int(?:8|16|32|64|eger|erface)?|Lib|Loop|Me|Module|Next|Nil|Object|Optional|OSType|ParamArray|Private|Property|Protected|PString|Ptr|Raise(?:Event)?|ReDim|RemoveHandler|Return|Select(?:or)?|Self|Set|Shared|Short|Single|Soft|Static|Step|String|Sub|Super|Text|Then|To|True|Try|Ubound|UInt(?:8|16|32|64|eger)?|Until|Using|Var(?:iant)?|Wend|While|WindowPtr|WString)\b/i,operator:/<[=>]?|>=?|[+\-*\/\\^=]|\b(?:AddressOf|And|Ctype|IsA?|Mod|New|Not|Or|WeakAddressOf|Xor)\b/i,punctuation:/[.,;:()]/}}f1.displayName="xquery";f1.aliases=[];function f1(n){n.register(ni),(function(e){e.languages.xquery=e.languages.extend("markup",{"xquery-comment":{pattern:/\(:[\s\S]*?:\)/,greedy:!0,alias:"comment"},string:{pattern:/(["'])(?:\1\1|(?!\1)[\s\S])*\1/,greedy:!0},extension:{pattern:/\(#.+?#\)/,alias:"symbol"},variable:/\$[-\w:]+/,axis:{pattern:/(^|[^-])(?:ancestor(?:-or-self)?|attribute|child|descendant(?:-or-self)?|following(?:-sibling)?|parent|preceding(?:-sibling)?|self)(?=::)/,lookbehind:!0,alias:"operator"},"keyword-operator":{pattern:/(^|[^:-])\b(?:and|castable as|div|eq|except|ge|gt|idiv|instance of|intersect|is|le|lt|mod|ne|or|union)\b(?=$|[^:-])/,lookbehind:!0,alias:"operator"},keyword:{pattern:/(^|[^:-])\b(?:as|ascending|at|base-uri|boundary-space|case|cast as|collation|construction|copy-namespaces|declare|default|descending|else|empty (?:greatest|least)|encoding|every|external|for|function|if|import|in|inherit|lax|let|map|module|namespace|no-inherit|no-preserve|option|order(?: by|ed|ing)?|preserve|return|satisfies|schema|some|stable|strict|strip|then|to|treat as|typeswitch|unordered|validate|variable|version|where|xquery)\b(?=$|[^:-])/,lookbehind:!0},function:/[\w-]+(?::[\w-]+)*(?=\s*\()/,"xquery-element":{pattern:/(element\s+)[\w-]+(?::[\w-]+)*/,lookbehind:!0,alias:"tag"},"xquery-attribute":{pattern:/(attribute\s+)[\w-]+(?::[\w-]+)*/,lookbehind:!0,alias:"attr-name"},builtin:{pattern:/(^|[^:-])\b(?:attribute|comment|document|element|processing-instruction|text|xs:(?:ENTITIES|ENTITY|ID|IDREFS?|NCName|NMTOKENS?|NOTATION|Name|QName|anyAtomicType|anyType|anyURI|base64Binary|boolean|byte|date|dateTime|dayTimeDuration|decimal|double|duration|float|gDay|gMonth|gMonthDay|gYear|gYearMonth|hexBinary|int|integer|language|long|negativeInteger|nonNegativeInteger|nonPositiveInteger|normalizedString|positiveInteger|short|string|time|token|unsigned(?:Byte|Int|Long|Short)|untyped(?:Atomic)?|yearMonthDuration))\b(?=$|[^:-])/,lookbehind:!0},number:/\b\d+(?:\.\d+)?(?:E[+-]?\d+)?/,operator:[/[+*=?|@]|\.\.?|:=|!=|<[=<]?|>[=>]?/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}],punctuation:/[[\](){},;:/]/}),e.languages.xquery.tag.pattern=/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/,e.languages.xquery.tag.inside["attr-value"].pattern=/=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+)/,e.languages.xquery.tag.inside["attr-value"].inside.punctuation=/^="|"$/,e.languages.xquery.tag.inside["attr-value"].inside.expression={pattern:/\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}/,inside:e.languages.xquery,alias:"language-xquery"};var t=function(i){return typeof i=="string"?i:typeof i.content=="string"?i.content:i.content.map(t).join("")},r=function(i){for(var s=[],a=0;a<i.length;a++){var o=i[a],l=!1;if(typeof o!="string"&&(o.type==="tag"&&o.content[0]&&o.content[0].type==="tag"?o.content[0].content[0].content==="</"?s.length>0&&s[s.length-1].tagName===t(o.content[0].content[1])&&s.pop():o.content[o.content.length-1].content==="/>"||s.push({tagName:t(o.content[0].content[1]),openedBraces:0}):s.length>0&&o.type==="punctuation"&&o.content==="{"&&(!i[a+1]||i[a+1].type!=="punctuation"||i[a+1].content!=="{")&&(!i[a-1]||i[a-1].type!=="plain-text"||i[a-1].content!=="{")?s[s.length-1].openedBraces++:s.length>0&&s[s.length-1].openedBraces>0&&o.type==="punctuation"&&o.content==="}"?s[s.length-1].openedBraces--:o.type!=="comment"&&(l=!0)),(l||typeof o=="string")&&s.length>0&&s[s.length-1].openedBraces===0){var u=t(o);a<i.length-1&&(typeof i[a+1]=="string"||i[a+1].type==="plain-text")&&(u+=t(i[a+1]),i.splice(a+1,1)),a>0&&(typeof i[a-1]=="string"||i[a-1].type==="plain-text")&&(u=t(i[a-1])+u,i.splice(a-1,1),a--),/^\s+$/.test(u)?i[a]=u:i[a]=new e.Token("plain-text",u,null,u)}o.content&&typeof o.content!="string"&&r(o.content)}};e.hooks.add("after-tokenize",function(i){i.language==="xquery"&&r(i.tokens)})})(n)}g1.displayName="yang";g1.aliases=[];function g1(n){n.languages.yang={comment:/\/\*[\s\S]*?\*\/|\/\/.*/,string:{pattern:/"(?:[^\\"]|\\.)*"|'[^']*'/,greedy:!0},keyword:{pattern:/(^|[{};\r\n][ \t]*)[a-z_][\w.-]*/i,lookbehind:!0},namespace:{pattern:/(\s)[a-z_][\w.-]*(?=:)/i,lookbehind:!0},boolean:/\b(?:false|true)\b/,operator:/\+/,punctuation:/[{};:]/}}m1.displayName="zig";m1.aliases=[];function m1(n){(function(e){function t(u){return function(){return u}}var r=/\b(?:align|allowzero|and|anyframe|anytype|asm|async|await|break|cancel|catch|comptime|const|continue|defer|else|enum|errdefer|error|export|extern|fn|for|if|inline|linksection|nakedcc|noalias|nosuspend|null|or|orelse|packed|promise|pub|resume|return|stdcallcc|struct|suspend|switch|test|threadlocal|try|undefined|union|unreachable|usingnamespace|var|volatile|while)\b/,i="\\b(?!"+r.source+")(?!\\d)\\w+\\b",s=/align\s*\((?:[^()]|\([^()]*\))*\)/.source,a=/(?:\?|\bpromise->|(?:\[[^[\]]*\]|\*(?!\*)|\*\*)(?:\s*<ALIGN>|\s*const\b|\s*volatile\b|\s*allowzero\b)*)/.source.replace(/<ALIGN>/g,t(s)),o=/(?:\bpromise\b|(?:\berror\.)?<ID>(?:\.<ID>)*(?!\s+<ID>))/.source.replace(/<ID>/g,t(i)),l="(?!\\s)(?:!?\\s*(?:"+a+"\\s*)*"+o+")+";e.languages.zig={comment:[{pattern:/\/\/[/!].*/,alias:"doc-comment"},/\/{2}.*/],string:[{pattern:/(^|[^\\@])c?"(?:[^"\\\r\n]|\\.)*"/,lookbehind:!0,greedy:!0},{pattern:/([\r\n])([ \t]+c?\\{2}).*(?:(?:\r\n?|\n)\2.*)*/,lookbehind:!0,greedy:!0}],char:{pattern:/(^|[^\\])'(?:[^'\\\r\n]|[\uD800-\uDFFF]{2}|\\(?:.|x[a-fA-F\d]{2}|u\{[a-fA-F\d]{1,6}\}))'/,lookbehind:!0,greedy:!0},builtin:/\B@(?!\d)\w+(?=\s*\()/,label:{pattern:/(\b(?:break|continue)\s*:\s*)\w+\b|\b(?!\d)\w+\b(?=\s*:\s*(?:\{|while\b))/,lookbehind:!0},"class-name":[/\b(?!\d)\w+(?=\s*=\s*(?:(?:extern|packed)\s+)?(?:enum|struct|union)\s*[({])/,{pattern:RegExp(/(:\s*)<TYPE>(?=\s*(?:<ALIGN>\s*)?[=;,)])|<TYPE>(?=\s*(?:<ALIGN>\s*)?\{)/.source.replace(/<TYPE>/g,t(l)).replace(/<ALIGN>/g,t(s))),lookbehind:!0,inside:null},{pattern:RegExp(/(\)\s*)<TYPE>(?=\s*(?:<ALIGN>\s*)?;)/.source.replace(/<TYPE>/g,t(l)).replace(/<ALIGN>/g,t(s))),lookbehind:!0,inside:null}],"builtin-type":{pattern:/\b(?:anyerror|bool|c_u?(?:int|long|longlong|short)|c_longdouble|c_void|comptime_(?:float|int)|f(?:16|32|64|128)|[iu](?:8|16|32|64|128|size)|noreturn|type|void)\b/,alias:"keyword"},keyword:r,function:/\b(?!\d)\w+(?=\s*\()/,number:/\b(?:0b[01]+|0o[0-7]+|0x[a-fA-F\d]+(?:\.[a-fA-F\d]*)?(?:[pP][+-]?[a-fA-F\d]+)?|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)\b/,boolean:/\b(?:false|true)\b/,operator:/\.[*?]|\.{2,3}|[-=]>|\*\*|\+\+|\|\||(?:<<|>>|[-+*]%|[-+*/%^&|<>!=])=?|[?~]/,punctuation:/[.:,;(){}[\]]/},e.languages.zig["class-name"].forEach(function(u){u.inside===null&&(u.inside=e.languages.zig)})})(n)}j.register(ni);j.register(cc);j.register(cn);j.register(yA);j.register(_i);j.register(bA);j.register(_A);j.register(vA);j.register(xA);j.register(SA);j.register(EA);j.register(TA);j.register(wA);j.register(Hg);j.register(AA);j.register(RA);j.register(NA);j.register(CA);j.register(no);j.register(Dh);j.register(MA);j.register(IA);j.register(kA);j.register($_);j.register(H_);j.register(LA);j.register(DA);j.register(OA);j.register(Oh);j.register(PA);j.register(FA);j.register(UA);j.register(BA);j.register(zA);j.register(GA);j.register(VA);j.register($A);j.register(j_);j.register(HA);j.register(jA);j.register(WA);j.register(qA);j.register(XA);j.register(YA);j.register(KA);j.register(ZA);j.register(QA);j.register(JA);j.register(eR);j.register(tR);j.register(nR);j.register(rR);j.register(iR);j.register(sR);j.register(aR);j.register(oR);j.register(lR);j.register(uR);j.register(cR);j.register(dR);j.register(hR);j.register(pR);j.register(fR);j.register(Ph);j.register(gR);j.register(mR);j.register(yR);j.register(bR);j.register(_R);j.register(vR);j.register(xR);j.register(SR);j.register(ER);j.register(TR);j.register(wR);j.register(vi);j.register(AR);j.register(RR);j.register(NR);j.register(CR);j.register(MR);j.register(IR);j.register(kR);j.register(LR);j.register(DR);j.register(OR);j.register(W_);j.register(PR);j.register(FR);j.register(UR);j.register(BR);j.register(zR);j.register(GR);j.register(VR);j.register($R);j.register(HR);j.register(jR);j.register(WR);j.register(qR);j.register(XR);j.register(YR);j.register(KR);j.register(ZR);j.register(QR);j.register(JR);j.register(eN);j.register(tN);j.register(nN);j.register(rN);j.register(iN);j.register(sN);j.register(aN);j.register(oN);j.register(lN);j.register(uN);j.register(cN);j.register(dN);j.register(hN);j.register(pN);j.register(jg);j.register(fN);j.register(gN);j.register(mN);j.register(yN);j.register(bN);j.register(_N);j.register(Wg);j.register(vN);j.register(xN);j.register(SN);j.register(EN);j.register(TN);j.register(wN);j.register(AN);j.register(RN);j.register(NN);j.register(CN);j.register(MN);j.register(Fh);j.register(Uh);j.register(Bh);j.register(IN);j.register(kN);j.register(LN);j.register(DN);j.register(ON);j.register(PN);j.register(FN);j.register(qg);j.register(UN);j.register(BN);j.register(zN);j.register(GN);j.register(VN);j.register($N);j.register(HN);j.register(jN);j.register(WN);j.register(qN);j.register(XN);j.register(YN);j.register(KN);j.register(ZN);j.register(Xg);j.register(QN);j.register(JN);j.register(eC);j.register(tC);j.register(nC);j.register(rC);j.register(iC);j.register(sC);j.register(aC);j.register(q_);j.register(oC);j.register(lC);j.register(uC);j.register(cC);j.register(dC);j.register(hC);j.register(pC);j.register(fC);j.register(gC);j.register(mC);j.register(yC);j.register(bC);j.register(_C);j.register(vC);j.register(xC);j.register(SC);j.register(EC);j.register(TC);j.register(wC);j.register(AC);j.register(RC);j.register(NC);j.register(CC);j.register(MC);j.register(IC);j.register(kC);j.register(LC);j.register(DC);j.register(OC);j.register(PC);j.register(FC);j.register(UC);j.register(BC);j.register(zC);j.register(GC);j.register(VC);j.register($C);j.register(HC);j.register(jC);j.register(WC);j.register(qC);j.register(XC);j.register(YC);j.register(KC);j.register(ZC);j.register(QC);j.register(JC);j.register(eM);j.register(tM);j.register(nM);j.register(rM);j.register(X_);j.register(iM);j.register(sM);j.register(aM);j.register(oM);j.register(lM);j.register(uM);j.register(cM);j.register(Y_);j.register(dM);j.register(hM);j.register(pM);j.register(fM);j.register(gM);j.register(mM);j.register(yM);j.register(bM);j.register(_M);j.register(vM);j.register(xM);j.register(SM);j.register(EM);j.register(TM);j.register(wM);j.register(AM);j.register(RM);j.register(NM);j.register(CM);j.register(MM);j.register(K_);j.register(IM);j.register(kM);j.register(LM);j.register(DM);j.register(OM);j.register(PM);j.register(FM);j.register(UM);j.register(BM);j.register(zM);j.register(Yg);j.register(GM);j.register(Z_);j.register(VM);j.register($M);j.register(HM);j.register(jM);j.register(WM);j.register(qM);j.register(XM);j.register(YM);j.register(KM);j.register(ZM);j.register(QM);j.register(JM);j.register(e1);j.register(t1);j.register(n1);j.register(r1);j.register(i1);j.register(s1);j.register(a1);j.register(o1);j.register(l1);j.register(u1);j.register(c1);j.register(d1);j.register(h1);j.register(p1);j.register(f1);j.register(g1);j.register(m1);var eV=fee(j,Vee);eV.supportedLanguages=mee;const $ee={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:"#1e1e1e"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{Opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}};function Hee({content:n,language:e}){const t=se.useRef(null);return se.useEffect(()=>{if(!t.current)return;const r=t.current.contentDocument;if(!r)return;let i="";e==="html"?i=n:e==="css"?i=`
        <html>
          <head>
            <style>${n}</style>
          </head>
          <body>
            <h1>CSS Preview</h1>
            <div class="preview-box">Element for testing styles</div>
          </body>
        </html>
      `:e==="javascript"||e==="js"?i=`
        <html>
          <body>
            <div id="app"></div>
            <script>
              const app = document.getElementById('app');
              const consoleLog = console.log;
              console.log = (...args) => {
                app.innerHTML += '<div>' + args.join(' ') + '</div>';
                consoleLog(...args);
              };
              try {
                ${n}
              } catch (e) {
                app.innerHTML += '<div style="color:red">' + e + '</div>';
              }
            <\/script>
          </body>
        </html>
      `:["react","jsx","tsx"].includes(e)&&(i=`
        <html>
          <head>
             <script src="https://unpkg.com/react@18/umd/react.development.js"><\/script>
             <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"><\/script>
             <script src="https://unpkg.com/@babel/standalone/babel.min.js"><\/script>
             <style>body { font-family: sans-serif; padding: 16px; }</style>
          </head>
          <body>
            <div id="root"></div>
            <script type="text/babel">
              const { useState, useEffect, useRef } = React;
              try {
                ${n}
                
                // Try to find the component to render
                // Assuming the user defines a component named 'App' or 'Example' or exports default
                // Since we can't easily parse exports in this simple view, we rely on convention or simple execution
                
                // Heuristic: Check if 'App' is defined
                if (typeof App !== 'undefined') {
                   const root = ReactDOM.createRoot(document.getElementById('root'));
                   root.render(<App />);
                } else {
                   // If raw JSX is provided without a component wrapper, we might need to wrap it?
                   // For now, let's assume the user writes a component and calls render or we just eval.
                }
              } catch (err) {
                document.getElementById('root').innerHTML = '<div style="color:red">' + err.message + '</div>';
              }
            <\/script>
          </body>
        </html>
       `),r.open(),r.write(i),r.close()},[n,e]),L.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:L.jsx("iframe",{ref:t,style:{flex:1,border:"none",background:"#fff"},title:"Artifact Preview"})})}function jee({language:n,code:e,...t}){const[r,i]=se.useState("code"),[s,a]=se.useState(!1),o=["html","javascript","js","react","jsx","tsx","css"].includes(n.toLowerCase()),l=()=>{navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)};return L.jsxs("div",{className:"code-block-wrapper",style:{borderRadius:8,overflow:"hidden",border:"1px solid var(--border-color)",margin:"8px 0"},children:[L.jsxs("div",{className:"code-block-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"var(--bg-secondary)",borderBottom:"1px solid var(--border-color)"},children:[L.jsxs("div",{style:{display:"flex",gap:8},children:[o&&L.jsxs("div",{className:"code-tabs",style:{display:"flex",background:"var(--bg-tertiary)",padding:2,borderRadius:6},children:[L.jsxs("button",{onClick:()=>i("code"),style:{border:"none",background:r==="code"?"var(--bg-primary)":"transparent",color:r==="code"?"var(--text-primary)":"var(--text-muted)",padding:"4px 12px",borderRadius:4,cursor:"pointer",fontSize:12,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[L.jsx(DD,{size:14})," Code"]}),L.jsxs("button",{onClick:()=>i("preview"),style:{border:"none",background:r==="preview"?"var(--bg-primary)":"transparent",color:r==="preview"?"var(--text-primary)":"var(--text-muted)",padding:"4px 12px",borderRadius:4,cursor:"pointer",fontSize:12,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[L.jsx(ww,{size:14})," Preview"]})]}),!o&&L.jsx("span",{style:{fontSize:12,color:"var(--text-muted)",fontWeight:600,textTransform:"uppercase"},children:n})]}),L.jsxs("button",{onClick:l,style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:12},children:[s?L.jsx(_6,{size:14}):L.jsx(DD,{size:14}),s?"Copied":"Copy"]})]}),L.jsx("div",{className:"code-block-content",style:{position:"relative"},children:r==="code"?L.jsx(eV,{style:$ee,language:n,PreTag:"div",customStyle:{margin:0,borderRadius:0},...t,children:e}):L.jsx("div",{style:{height:400,background:"#fff"},children:L.jsx(Hee,{content:e,language:n})})})]})}function XP({isSpeaking:n,onStop:e}){const[t,r]=se.useState(new Array(10).fill(10)),i=se.useRef();return se.useEffect(()=>{if(!n){r(new Array(10).fill(5)),i.current&&cancelAnimationFrame(i.current);return}const s=()=>{r(o=>o.map(()=>5+Math.random()*25)),i.current=requestAnimationFrame(s)},a=setInterval(()=>{s()},50);return()=>{clearInterval(a),i.current&&cancelAnimationFrame(i.current)}},[n]),n?L.jsxs("div",{className:"voice-visualizer-overlay",style:{position:"fixed",bottom:100,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",padding:"12px 24px",borderRadius:50,display:"flex",alignItems:"center",gap:16,zIndex:9999,border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[L.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,height:40},children:t.map((s,a)=>L.jsx("div",{style:{width:4,height:s,background:"var(--primary-color, #eab308)",borderRadius:2,transition:"height 0.1s ease"}},a))}),L.jsx("div",{style:{color:"#fff",fontSize:14,fontWeight:500},children:"Joe is speaking..."}),L.jsx("button",{onClick:e,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"50%",width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",marginLeft:8},children:L.jsx(e_,{size:16})})]}):null}const Wee=()=>L.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-2xl bg-[var(--surface-2)] w-fit backdrop-blur-md border border-[var(--border-light)] shadow-sm",children:[L.jsx("div",{className:"flex gap-1",children:[0,1,2].map(n=>L.jsx(la.div,{className:"w-2 h-2 rounded-full bg-[var(--accent-primary)]",animate:{y:[0,-5,0],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:n*.2,ease:"easeInOut"}},n))}),L.jsx("span",{className:"text-xs text-[var(--text-secondary)] font-medium",children:"Joe is thinking..."})]}),qee=se.lazy(()=>NY(()=>import("./AgentBrowserStream-BAtIb65w.js"),[]));function YP({event:n,isUser:e}){const{t}=Fg();return L.jsxs(la.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,ease:"easeOut"},className:`chat-bubble-wrapper ${e?"user":"ai"}`,children:[!e&&L.jsx("div",{className:"chat-avatar ai",children:L.jsx(BE,{size:18})}),L.jsxs("div",{className:"chat-bubble backdrop-blur-md shadow-lg",style:{background:e?"rgba(37, 99, 235, 0.9)":"rgba(18, 18, 18, 0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[L.jsxs("div",{className:"chat-bubble-header",children:[L.jsx("span",{className:"chat-bubble-sender",children:e?t("you","You"):"JOE AI"}),!e&&L.jsxs("div",{className:"chat-bubble-actions",children:[L.jsx("button",{className:"chat-action-btn",title:t("copy","Copy"),onClick:()=>navigator.clipboard.writeText(n.data.text||n.data),children:L.jsx(I6,{size:14})}),L.jsx("button",{className:"chat-action-btn",title:t("regenerate","Regenerate"),children:L.jsx(f8,{size:14})})]})]}),L.jsx("div",{className:"chat-bubble-content",children:e?L.jsx("div",{style:{whiteSpace:"pre-wrap"},children:n.data.text||n.data}):L.jsx(VG,{components:{h1:({node:r,...i})=>L.jsx("h1",{style:{color:"#eab308",fontSize:"1.8em",marginBottom:"0.5em",marginTop:"0.5em",borderBottom:"1px solid #333",paddingBottom:"0.3em"},...i}),h2:({node:r,...i})=>L.jsx("h2",{style:{color:"#60a5fa",fontSize:"1.5em",marginBottom:"0.5em",marginTop:"1em"},...i}),h3:({node:r,...i})=>L.jsx("h3",{style:{color:"#c084fc",fontSize:"1.2em",marginBottom:"0.5em",marginTop:"1em"},...i}),ul:({node:r,...i})=>L.jsx("ul",{style:{paddingInlineStart:"1.5em",marginBottom:"1em"},...i}),ol:({node:r,...i})=>L.jsx("ol",{style:{paddingInlineStart:"1.5em",marginBottom:"1em"},...i}),li:({node:r,...i})=>L.jsx("li",{style:{marginBottom:"0.3em",lineHeight:"1.6"},...i}),p:({node:r,...i})=>L.jsx("p",{style:{marginBottom:"1em",lineHeight:"1.7"},...i}),blockquote:({node:r,...i})=>L.jsx("blockquote",{style:{borderLeft:"4px solid #eab308",background:"rgba(234, 179, 8, 0.1)",margin:"1em 0",padding:"0.5em 1em",borderRadius:"4px"},...i}),a:({node:r,...i})=>L.jsx("a",{...i,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"underline"}}),code({node:r,inline:i,className:s,children:a,...o}){const l=/language-(\w+)/.exec(s||"");return!i&&l?L.jsx(jee,{language:l[1],code:String(a).replace(/\n$/,""),...o}):L.jsx("code",{className:s,...o,style:i?{background:"rgba(255,255,255,0.1)",padding:"2px 4px",borderRadius:"3px"}:{display:"block",padding:"10px",background:"#1e1e1e",borderRadius:"4px",overflowX:"auto"},children:a})}},children:n.data.text||(typeof n.data=="string"?n.data:JSON.stringify(n.data))})})]}),e&&L.jsx("div",{className:"chat-avatar user",children:L.jsx(I8,{size:18})})]})}function Xee({sessionId:n,onSessionCreated:e,onPreviewArtifact:t,onStepsUpdate:r,onMessagesUpdate:i}){const{t:s}=Fg(),[a,o]=se.useState(""),[l,u]=se.useState([]),[c,h]=se.useState(!1),[f,g]=se.useState([]),[m,v]=se.useState(null),[_,b]=se.useState(!1),[S,E]=se.useState(!1),[A,R]=se.useState(!1),[w,M]=se.useState(!1),I=se.useRef(null);se.useRef(window.speechSynthesis);const C=se.useRef(null),k=se.useRef(),O=se.useRef(null),z=se.useRef({}),W=se.useRef(null),[q,X]=se.useState(!1),[Q,H]=se.useState({llm:{name:"Joe System (Default)",apiKey:"",isConnected:!0},openai:{name:"OpenAI",apiKey:"",isConnected:!1,model:"gpt-4o"},anthropic:{name:"Anthropic",apiKey:"",isConnected:!1,model:"claude-3-opus-20240229"},gemini:{name:"Google Gemini",apiKey:"",isConnected:!1,model:"gemini-pro"},grok:{name:"xAI (Grok)",apiKey:"",isConnected:!1,baseUrl:"https://api.x.ai/v1",model:"grok-beta"},custom:{name:"Custom / Local LLM",apiKey:"",isConnected:!1,baseUrl:"http://localhost:11434/v1",model:"llama3",isCustom:!0}}),[G,re]=se.useState("llm"),[D,U]=se.useState({});se.useEffect(()=>{try{const Se=localStorage.getItem("ai_providers");if(Se){const nt=JSON.parse(Se);H(qe=>{const je={...qe};return Object.keys(nt).forEach(J=>{je[J]&&(je[J]={...je[J],...nt[J]})}),je})}const Me=localStorage.getItem("active_provider");Me&&re(Me)}catch(Se){console.error("Failed to load providers settings",Se)}},[]),se.useEffect(()=>{localStorage.setItem("ai_providers",JSON.stringify(Q))},[Q]),se.useEffect(()=>{localStorage.setItem("active_provider",G)},[G]),se.useEffect(()=>{var Se;if((Se=O.current)==null||Se.scrollIntoView({behavior:"smooth"}),r&&r(f),i&&i(f),A&&f.length>0){const Me=f[f.length-1];Me.type==="text"&&Me.data.text&&ne(Me.data.text)}},[f,r]);const ne=async Se=>{if(!A)return;B(),M(!0);try{const je=localStorage.getItem("token");if(je){const J=await fetch(`${or}/audio/speech`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`},body:JSON.stringify({text:Se,voice:"onyx"})});if(J.ok){const Qt=await J.blob(),Ot=URL.createObjectURL(Qt),Dt=new Audio(Ot);Dt.onended=()=>M(!1),Dt.onerror=()=>M(!1),Dt.play(),window.currentAudio=Dt;return}}}catch(je){console.warn("Backend TTS failed, falling back to browser",je)}const Me=new SpeechSynthesisUtterance(Se),nt=/[\u0600-\u06FF]/.test(Se);Me.lang=nt?"ar-SA":"en-US";const qe=window.speechSynthesis.getVoices();if(nt){const je=qe.find(J=>J.lang.includes("ar")&&J.name.includes("Google"))||qe.find(J=>J.lang.includes("ar"));je&&(Me.voice=je)}Me.onstart=()=>M(!0),Me.onend=()=>M(!1),Me.onerror=()=>M(!1),window.speechSynthesis.speak(Me)},B=()=>{window.speechSynthesis.cancel(),window.currentAudio&&(window.currentAudio.pause(),window.currentAudio=null),M(!1)};se.useEffect(()=>(window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()},()=>{B()}),[]),se.useEffect(()=>{const Se=window.SpeechRecognition||window.webkitSpeechRecognition;if(Se){const Me=new Se;Me.continuous=!1,Me.interimResults=!1,Me.lang="ar-SA",Me.onstart=()=>E(!0),Me.onend=()=>E(!1),Me.onresult=nt=>{const qe=nt.results[0][0].transcript;o(je=>je+(je?" ":"")+qe)},I.current=Me}},[]);const Oe=()=>{if(!I.current){alert("      .   Chrome.");return}S?I.current.stop():I.current.start()};se.useEffect(()=>(Y(),()=>{C.current&&C.current.close(),k.current&&window.clearTimeout(k.current)}),[]);function Y(){try{if(C.current){if(C.current.readyState===WebSocket.OPEN)return;try{C.current.close()}catch{}}const Se=w3,Me=`${or.replace(/^http/,"ws")}/ws`,nt=new WebSocket(Se);C.current=nt,nt.onopen=()=>{b(!0)},nt.onclose=()=>{var je;if(b(!1),!(((je=C.current)==null?void 0:je.__triedFallback)===!0)&&Se!==Me)try{const J=new WebSocket(Me);J.__triedFallback=!0,C.current=J,J.onopen=()=>b(!0),J.onclose=()=>{b(!1),k.current=window.setTimeout(()=>{Y()},2e3)},J.onmessage=nt.onmessage;return}catch{}k.current=window.setTimeout(()=>Y(),2e3)},nt.onmessage=qe=>{try{const je=JSON.parse(qe.data);if(je.type==="approval_required"){const J=je.data||{},{id:Qt,runId:Ot,risk:Dt,action:it}=J;Qt&&v({id:Qt,runId:Ot,risk:Dt,action:it})}if(je.type==="step_started"&&(z.current[je.data.name]=Date.now()),je.type==="step_done"||je.type==="step_failed"){const J=z.current[je.data.name];J&&(je.duration=Date.now()-J,delete z.current[je.data.name])}if(je.type==="text"){let J=je.data;try{if(typeof J=="string"&&(J.startsWith("{")||J.startsWith("["))){const Qt=JSON.parse(J);J=Qt.text||Qt.output||J}}catch{}ne(String(J))}["step_started","step_done","step_failed","evidence_added","artifact_created","text","user_input"].includes(je.type)&&g(J=>[...J,je])}catch(je){console.error("WS parse error:",je)}}}catch(Se){console.error("WS connect failed:",Se),b(!1)}}se.useEffect(()=>{n?(g([]),V(n)):g([])},[n]);async function V(Se){try{const Me=localStorage.getItem("token"),nt=await fetch(`${or}/sessions/${Se}/history`,{headers:Me?{Authorization:`Bearer ${Me}`}:{}});if(nt.ok){const qe=await nt.json();Array.isArray(qe.events)&&g(qe.events)}}catch(Me){console.error("Failed to load history",Me)}}async function ae(Se){var nt;if(!((nt=Se.target.files)!=null&&nt.length))return;const Me=Se.target.files[0];h(!0);try{const qe=localStorage.getItem("token"),je=new FormData;je.append("file",Me),n&&je.append("sessionId",n);const J=await fetch(`${or}/files/upload`,{method:"POST",headers:{...qe?{Authorization:`Bearer ${qe}`}:{}},body:je});if(J.ok){const Qt=await J.json();u(Ot=>[...Ot,{id:Qt.file.id,name:Qt.file.originalName}])}else alert(s("uploadFailed")||"Upload failed")}catch(qe){console.error(qe),alert(s("uploadError")||"Upload error")}finally{h(!1),W.current&&(W.current.value="")}}async function _e(){var je,J,Qt;if(!a.trim())return;const Se=Date.now().toString();g(Ot=>[...Ot,{type:"user_input",data:a,id:Se}]);const Me=a,nt=[...l];o(""),u([]);const qe=localStorage.getItem("token");try{const Dt=await(await fetch(`${or}/runs/start`,{method:"POST",headers:{"Content-Type":"application/json",...qe?{Authorization:`Bearer ${qe}`}:{}},body:JSON.stringify({text:Me,sessionId:n,fileIds:nt.map(it=>it.id),provider:G==="llm"?void 0:G,apiKey:G==="llm"||(je=Q[G])==null?void 0:je.apiKey,baseUrl:G==="llm"||(J=Q[G])==null?void 0:J.baseUrl,model:G==="llm"||(Qt=Q[G])==null?void 0:Qt.model})})).json();if(Dt.sessionId&&!n&&e&&e(Dt.sessionId),!_&&(Dt!=null&&Dt.result)){const it=Dt.result;if(it!=null&&it.output){const K=typeof it.output=="string"?it.output:JSON.stringify(it.output);g(P=>[...P,{type:"text",data:K}])}}}catch(Ot){console.error(Ot),g(Dt=>[...Dt,{type:"error",data:s("error")}]),o(Me)}}async function Pe(Se){if(!m)return;const Me=localStorage.getItem("token");await fetch(`${or}/approvals/${m.id}/decision`,{method:"POST",headers:{"Content-Type":"application/json",...Me?{Authorization:`Bearer ${Me}`}:{}},body:JSON.stringify({decision:Se})}),v(null)}const De=async Se=>{const Me=Q[Se];H(qe=>({...qe,[Se]:{...qe[Se],isVerifying:!0,lastError:void 0}}));const nt=localStorage.getItem("token");try{const qe=await fetch(`${or}/runs/verify`,{method:"POST",headers:{"Content-Type":"application/json",...nt?{Authorization:`Bearer ${nt}`}:{}},body:JSON.stringify({provider:Se==="llm"?"llm":Se,apiKey:Me.apiKey,baseUrl:Me.baseUrl,model:Me.model})}),je=await qe.json();if(qe.ok)H(J=>({...J,[Se]:{...J[Se],isVerifying:!1,isConnected:!0,lastError:void 0}})),re(Se);else throw new Error(je.error||"Connection failed")}catch(qe){H(je=>({...je,[Se]:{...je[Se],isVerifying:!1,isConnected:!1,lastError:qe.message}}))}},ft=Se=>{confirm("Are you sure you want to remove the API key?")&&H(Me=>({...Me,[Se]:{...Me[Se],apiKey:"",isConnected:!1}}))},ln=_&&f.length>0&&(f[f.length-1].type==="user_input"||f[f.length-1].type==="step_started");return L.jsxs("div",{className:"composer",children:[L.jsxs("div",{className:"events",children:[f.length===0&&L.jsxs("div",{className:"empty-state",children:[L.jsx("div",{className:"empty-state-logo-ring",children:L.jsx("span",{className:"empty-state-logo-text",children:"J"})}),L.jsx("h2",{className:"empty-state-title",children:s("welcomeTitle","How can I help you today?")}),L.jsxs("div",{className:"empty-state-suggestions",children:[L.jsxs("button",{className:"suggestion-card",onClick:()=>o("Write a React component for a login form"),children:[L.jsx("div",{className:"suggestion-icon",children:L.jsx(PD,{size:20})}),L.jsx("div",{className:"suggestion-text",children:"Create a Login Form"})]}),L.jsxs("button",{className:"suggestion-card",onClick:()=>o("Explain how useEffect works"),children:[L.jsx("div",{className:"suggestion-icon",children:L.jsx(GE,{size:20})}),L.jsx("div",{className:"suggestion-text",children:"Explain React Hooks"})]}),L.jsxs("button",{className:"suggestion-card",onClick:()=>o("Analyze this project structure"),children:[L.jsx("div",{className:"suggestion-icon",children:L.jsx(E3,{size:20})}),L.jsx("div",{className:"suggestion-text",children:"Analyze Project"})]}),L.jsxs("button",{className:"suggestion-card",onClick:()=>o("Write a Python script to scrape a website"),children:[L.jsx("div",{className:"suggestion-icon",children:L.jsx(A8,{size:20})}),L.jsx("div",{className:"suggestion-text",children:"Python Scripting"})]})]})]}),L.jsx(jq,{mode:"popLayout",children:f.map((Se,Me)=>{if(Se.type==="user_input")return L.jsx(YP,{event:Se,isUser:!0},Me);if(Se.type==="error")return L.jsx(la.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"message-row joe",children:L.jsxs("div",{className:"message-bubble error",dir:"auto",style:{color:"#ef4444",border:"1px solid #ef4444",background:"rgba(239, 68, 68, 0.1)"},children:[" ",Se.data]})},Me);if(Se.type==="text"){let nt=Se.data;try{if(typeof nt=="string"&&(nt.startsWith("{")||nt.startsWith("["))){const qe=JSON.parse(nt);nt=qe.text||qe.output||nt}}catch{}return L.jsx(YP,{event:{data:{text:nt}},isUser:!1},Me)}if(Se.type==="step_started"){const nt=Se.data.name&&Se.data.name.includes("image_generate"),qe=f.slice(Me+1).some(je=>(je.type==="step_done"||je.type==="step_failed")&&(je.data.name===Se.data.name||je.data.name===`execute:${Se.data.name}`));return nt&&!qe?L.jsx(la.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"message-row joe",style:{marginBottom:4},children:L.jsxs("div",{className:"image-loading-frame",style:{width:300,height:300,background:"rgba(30, 30, 30, 0.4)",backdropFilter:"blur(10px)",borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"2px dashed var(--border-color)",position:"relative",overflow:"hidden"},children:[L.jsx(md,{size:32,className:"spin",style:{marginBottom:16,color:"#eab308"}}),L.jsx("div",{style:{color:"var(--text-muted)",fontSize:13},children:"Generating Image..."})]})},Me):null}if(Se.type==="artifact_created"){if(Se.data.kind==="browser_stream"&&Se.data.href)return L.jsx(la.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"message-row joe",children:L.jsx("div",{className:"event-artifact",style:{padding:0},children:L.jsx(se.Suspense,{fallback:L.jsx("div",{style:{padding:12,fontSize:12,opacity:.7},children:"Loading Stream..."}),children:L.jsx(qee,{wsUrl:Se.data.href})})})},Me);const qe=/\.(png|jpg|jpeg|webp|gif)$/i.test(Se.data.name||"")||/\.(png|jpg|jpeg|webp|gif)$/i.test(Se.data.href||""),je=/\.(mp4|webm|mov)$/i.test(Se.data.name||"")||/\.(mp4|webm|mov)$/i.test(Se.data.href||"");return qe?L.jsx(la.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"message-row joe",children:L.jsxs("div",{className:"image-generation-frame",children:[L.jsx("div",{className:"scanline-overlay"}),L.jsx("img",{src:Se.data.href,alt:Se.data.name,className:"image-generation-img"})]})},Me):L.jsx(la.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"message-row joe",children:L.jsxs("div",{className:"event-artifact",children:[je?L.jsxs(L.Fragment,{children:[L.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[L.jsx(D8,{size:16,className:"artifact-icon"}),L.jsx("div",{className:"artifact-title",children:s("artifacts.video")})]}),L.jsx("video",{controls:!0,src:Se.data.href,style:{width:"100%",borderRadius:8}})]}):L.jsx(L.Fragment,{children:L.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[L.jsx(PD,{size:20,className:"artifact-icon"}),L.jsxs("div",{className:"artifact-info",children:[L.jsx("div",{className:"artifact-title",children:s("artifacts.file")}),L.jsx("div",{className:"artifact-name",children:Se.data.name})]})]})}),L.jsx("div",{style:{marginTop:12,display:"flex",justifyContent:"flex-end"},children:L.jsxs("a",{href:Se.data.href,target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:[L.jsx(H6,{size:12})," ",s("artifacts.openNewWindow")]})})]})},Me)}return null})}),ln&&L.jsx(la.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"message-row joe",children:L.jsx(Wee,{})}),L.jsx("div",{ref:O})]}),m&&L.jsx("div",{className:"approval-modal",children:L.jsxs("div",{className:"approval-content",children:[L.jsx("h3",{children:s("approvalRequired")}),L.jsx("div",{className:"risk-badge",children:m.risk}),L.jsxs("p",{children:[s("action"),": ",m.action]}),L.jsxs("div",{className:"approval-actions",children:[L.jsx("button",{onClick:()=>Pe("denied"),className:"btn deny",children:s("deny")}),L.jsx("button",{onClick:()=>Pe("approved"),className:"btn approve",children:s("approve")})]})]})}),L.jsx(XP,{isSpeaking:w,onStop:B}),q&&L.jsx("div",{className:"providers-modal-overlay",onClick:()=>X(!1),children:L.jsxs("div",{className:"providers-modal",onClick:Se=>Se.stopPropagation(),children:[L.jsxs("div",{className:"providers-left",children:[L.jsxs("h3",{style:{margin:"0 0 16px 0",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",gap:8},children:[L.jsx(OD,{size:18})," Providers"]}),L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:Object.entries(Q).map(([Se,Me])=>L.jsxs("button",{onClick:()=>re(Se),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:8,border:"none",background:G===Se?"var(--bg-primary, var(--bg-card))":"transparent",color:G===Se?"var(--text-primary)":"var(--text-muted)",cursor:"pointer",textAlign:"left",fontWeight:G===Se?600:400,transition:"all 0.2s"},children:[L.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[L.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:Me.isConnected?"#22c55e":Me.apiKey?"#eab308":"#71717a",boxShadow:Me.isConnected?"0 0 8px #22c55e":"none"}}),Me.name.split(" ")[0]]}),G===Se&&L.jsx(_3,{size:14})]},Se))})]}),L.jsx("div",{className:"providers-right",children:Q[G]&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:24},children:[L.jsxs("div",{children:[L.jsx("h2",{style:{margin:0,fontSize:20},children:Q[G].name}),L.jsxs("div",{style:{marginTop:4,display:"flex",alignItems:"center",gap:6},children:[L.jsx("div",{style:{padding:"2px 8px",borderRadius:12,fontSize:11,fontWeight:600,background:Q[G].isConnected?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:Q[G].isConnected?"#22c55e":"#ef4444"},children:Q[G].isConnected?"CONNECTED":"DISCONNECTED"}),Q[G].isVerifying&&L.jsx(md,{size:12,className:"spin"})]})]}),L.jsx("button",{onClick:()=>X(!1),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:L.jsx(e_,{size:20})})]}),L.jsxs("div",{style:{flex:1},children:[G!=="llm"&&L.jsxs("div",{style:{marginBottom:20},children:[L.jsx("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:8},children:"API Key"}),L.jsxs("div",{style:{position:"relative",display:"flex",gap:8},children:[L.jsxs("div",{style:{position:"relative",flex:1},children:[L.jsx("input",{type:D[G]?"text":"password",value:Q[G].apiKey,onChange:Se=>H(Me=>({...Me,[G]:{...Me[G],apiKey:Se.target.value,isConnected:!1}})),placeholder:"sk-...",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",outline:"none",fontSize:14}}),L.jsx("button",{onClick:()=>U(Se=>({...Se,[G]:!Se[G]})),style:{position:"absolute",right:10,top:10,background:"none",border:"none",cursor:"pointer",opacity:.5},children:D[G]?L.jsx(v3,{size:16}):L.jsx(ww,{size:16})})]}),L.jsx("button",{onClick:()=>ft(G),title:"Clear Key",style:{padding:"0 12px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"#ef4444",cursor:"pointer"},children:L.jsx(Jb,{size:18})})]})]}),L.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:20},children:[L.jsxs("div",{children:[L.jsx("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:8},children:"Model ID"}),L.jsx("input",{type:"text",value:Q[G].model||"",onChange:Se=>H(Me=>({...Me,[G]:{...Me[G],model:Se.target.value}})),placeholder:"gpt-4o",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",outline:"none",fontSize:14}})]}),(Q[G].isCustom||G==="grok")&&L.jsxs("div",{children:[L.jsx("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:8},children:"Base URL"}),L.jsx("input",{type:"text",value:Q[G].baseUrl||"",onChange:Se=>H(Me=>({...Me,[G]:{...Me[G],baseUrl:Se.target.value}})),placeholder:"https://api...",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-secondary)",color:"var(--text-primary)",outline:"none",fontSize:14}})]})]}),Q[G].lastError&&L.jsxs("div",{style:{padding:12,borderRadius:8,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444",fontSize:13,marginBottom:20,display:"flex",alignItems:"center",gap:8},children:[L.jsx(N6,{size:16}),Q[G].lastError]})]}),L.jsx("div",{style:{display:"flex",gap:12,paddingTop:20,borderTop:"1px solid var(--border-color)"},children:L.jsx("button",{onClick:()=>De(G),disabled:Q[G].isVerifying,style:{flex:1,padding:"12px",borderRadius:8,border:"none",background:Q[G].isConnected?"#22c55e":"var(--accent-primary)",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,opacity:Q[G].isVerifying?.7:1},children:Q[G].isVerifying?L.jsxs(L.Fragment,{children:[L.jsx(md,{size:18,className:"spin"})," Verifying..."]}):Q[G].isConnected?L.jsxs(L.Fragment,{children:[L.jsx(A6,{size:18})," Verified & Active"]}):L.jsxs(L.Fragment,{children:[L.jsx(GE,{size:18})," Connect & Activate"]})})})]})})]})}),l.length>0&&L.jsx("div",{className:"attached-files",children:l.map((Se,Me)=>L.jsxs("div",{className:"attached-file-chip",children:[L.jsx("span",{className:"file-name",children:Se.name}),L.jsx("button",{onClick:()=>u(nt=>nt.filter((qe,je)=>je!==Me)),className:"remove-file-btn",children:L.jsx(e_,{size:12})})]},Me))}),L.jsxs("div",{className:"input-area",children:[L.jsx("textarea",{value:a,onChange:Se=>o(Se.target.value),placeholder:s("inputPlaceholder"),dir:"auto",disabled:!!m,onKeyDown:Se=>{Se.key==="Enter"&&!Se.shiftKey&&(Se.preventDefault(),_e())}}),L.jsxs("div",{className:"input-actions",children:[L.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[L.jsx("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:_?"#22c55e":"#ef4444",boxShadow:_?"0 0 6px #22c55e":"none",transition:"all 0.3s"},title:s(_?"connected":"connecting")}),L.jsx("span",{style:{fontSize:12,color:"var(--text-muted)"},children:s(_?"connected":"connecting")})]}),L.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[L.jsx("div",{style:{position:"relative"},children:L.jsx("button",{className:"provider-btn",onClick:()=>X(!0),title:"AI Providers",children:L.jsx(OD,{size:20})})}),L.jsx("input",{type:"file",ref:W,onChange:ae,style:{display:"none"}}),L.jsx("button",{className:"mic-button",onClick:()=>{var Se;return(Se=W.current)==null?void 0:Se.click()},title:s("attachFile")||"Attach file",disabled:c,style:{background:"transparent",border:"none",cursor:"pointer",opacity:c?.5:1},children:c?L.jsx(md,{size:20,className:"spin"}):L.jsx(d8,{size:20})}),L.jsx("button",{className:`mic-button ${A?"active":""}`,onClick:()=>R(!A),title:"Voice Mode",style:{background:"transparent",border:"none",cursor:"pointer",color:A?"var(--accent-primary)":"inherit",position:"relative"},children:A?L.jsx(FD,{size:20}):L.jsx(n8,{size:20})}),L.jsx("button",{className:"send-button",onClick:_e,disabled:!a.trim()||!!m,title:s("send"),children:L.jsx(y6,{size:20})})]})]}),A&&L.jsxs("div",{style:{padding:10,background:"var(--bg-secondary)",borderTop:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"center",gap:16},children:[L.jsx("button",{className:`voice-btn ${S?"listening":""}`,onClick:Oe,style:{width:50,height:50,borderRadius:"50%",border:"none",background:S?"#ef4444":"var(--accent-primary)",color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:S?"0 0 15px rgba(239, 68, 68, 0.5)":"none",transition:"all 0.3s"},children:S?L.jsx(md,{className:"spin",size:24}):L.jsx(FD,{size:24})}),L.jsxs("div",{style:{fontSize:14,fontWeight:500,display:"flex",flexDirection:"column",gap:4},children:[L.jsx("span",{children:S?"Listening...":"Tap to Speak"}),L.jsx("span",{style:{fontSize:10,opacity:.7},children:"Arabic (SA) / English (US)"})]}),w&&L.jsx(XP,{isSpeaking:!0,onStop:B}),L.jsx("button",{className:"icon-btn",title:"Stop Speaking",onClick:B,disabled:!w,style:{marginLeft:"auto",opacity:w?1:.3},children:L.jsx(P8,{size:18})})]})]})]})}function KP({session:n,isActive:e,onSelect:t,onDelete:r,onPin:i,onShare:s}){const[a,o]=se.useState(!1),l=se.useRef(null);return se.useEffect(()=>{function u(c){l.current&&!l.current.contains(c.target)&&o(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),L.jsxs("div",{className:`session-item ${e?"active":""}`,children:[L.jsx("button",{className:"session-btn",onClick:t,children:L.jsxs("div",{className:"session-info",children:[L.jsxs("div",{className:"session-title",children:[n.isPinned&&L.jsx(UD,{size:12,className:"pin-icon",fill:"currentColor"}),L.jsx("span",{children:n.title})]}),n.lastSnippet&&L.jsx("div",{className:"session-snippet",children:n.lastSnippet})]})}),L.jsx("button",{className:"menu-trigger",onClick:u=>{u.stopPropagation(),o(!a)},children:L.jsx(D6,{size:16})}),a&&L.jsxs("div",{className:"session-menu",ref:l,children:[L.jsxs("button",{onClick:u=>{u.stopPropagation(),i(),o(!1)},children:[L.jsx(UD,{size:14})," ",n.isPinned?" ":""]}),L.jsxs("button",{onClick:u=>{u.stopPropagation(),s(),o(!1)},children:[L.jsx(_8,{size:14})," "]}),L.jsx("div",{className:"divider"}),L.jsxs("button",{className:"delete",onClick:u=>{u.stopPropagation(),r(),o(!1)},children:[L.jsx(Jb,{size:14})," "]})]})]})}function Yee(){const[n,e]=se.useState(""),[t,r]=se.useState(!1),[i,s]=se.useState([]),a=async()=>{if(n){r(!0),s([]);try{const l=await(await fetch(`${or}/advanced/council/consult`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:n})})).json();s(l)}catch(o){console.error(o)}finally{r(!1)}}};return L.jsxs("div",{className:"flex flex-col h-full bg-[var(--bg-primary)] text-white p-6",children:[L.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[L.jsx(zE,{className:"text-blue-400",size:32}),L.jsxs("div",{children:[L.jsx("h2",{className:"text-xl font-bold",children:"The AI Council"}),L.jsx("p",{className:"text-sm text-gray-400",children:"Consult a team of virtual experts"})]})]}),L.jsxs("div",{className:"flex gap-2 mb-6",children:[L.jsx("input",{value:n,onChange:o=>e(o.target.value),placeholder:"Enter a complex topic (e.g., 'Should we migrate to Next.js?')",className:"flex-1 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),L.jsxs("button",{onClick:a,disabled:t,className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg font-medium flex items-center gap-2 disabled:opacity-50",children:[t?L.jsx(md,{className:"animate-spin"}):L.jsx(y8,{size:18}),"Consult"]})]}),L.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2",children:[i.map((o,l)=>L.jsxs("div",{className:"flex gap-4 animate-fade-in-up",style:{animationDelay:`${l*.2}s`},children:[L.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold shadow-lg shrink-0",style:{background:o.expert.color,boxShadow:`0 0 15px ${o.expert.color}40`},children:o.expert.name[0]}),L.jsxs("div",{className:"flex-1",children:[L.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[L.jsx("span",{className:"font-bold text-lg",style:{color:o.expert.color},children:o.expert.name}),L.jsx("span",{className:"text-xs text-gray-500 bg-[var(--bg-secondary)] px-2 py-0.5 rounded-full",children:o.expert.role})]}),L.jsx("div",{className:"bg-[var(--bg-secondary)] p-4 rounded-xl rounded-tl-none border border-[var(--border-color)] text-gray-200 leading-relaxed shadow-sm",children:L.jsx(VG,{children:o.content})})]})]},l)),i.length===0&&!t&&L.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[L.jsx(zE,{size:48,className:"mx-auto mb-4 opacity-20"}),L.jsx("p",{children:"The council is waiting for your topic."})]})]})]})}function Kee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Zee(n,e,t){return e=ste(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZP(n,e){return ete(n)||Kee(n,e)||tV(n,e)||rte()}function Qee(n){return Jee(n)||tte(n)||tV(n)||nte()}function Jee(n){if(Array.isArray(n))return TT(n)}function ete(n){if(Array.isArray(n))return n}function tte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tV(n,e){if(n){if(typeof n=="string")return TT(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TT(n,e)}}function TT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ite(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ste(n){var e=ite(n,"string");return typeof e=="symbol"?e:String(e)}var ate=function(e,t){var r=new Set(t);return Object.assign.apply(Object,[{}].concat(Qee(Object.entries(e).filter(function(i){var s=ZP(i,1),a=s[0];return!r.has(a)}).map(function(i){var s=ZP(i,2),a=s[0],o=s[1];return Zee({},a,o)}))))};function wT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ote(n){if(Array.isArray(n))return n}function lte(n){if(Array.isArray(n))return wT(n)}function ute(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function cte(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pte(n,e){return ote(n)||cte(n,e)||nV(n,e)||dte()}function QP(n){return lte(n)||ute(n)||nV(n)||hte()}function nV(n,e){if(n){if(typeof n=="string")return wT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wT(n,e):void 0}}function fte(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.wrapperElementType,r=t===void 0?"div":t,i=e.nodeMapper,s=i===void 0?function(c){return c}:i,a=e.methodNames,o=a===void 0?[]:a,l=e.initPropNames,u=l===void 0?[]:l;return se.forwardRef(function(c,h){var f=se.useRef(),g=se.useMemo(function(){var _=Object.fromEntries(u.filter(function(b){return c.hasOwnProperty(b)}).map(function(b){return[b,c[b]]}));return n(_)},[]);JP(function(){g(s(f.current))},se.useLayoutEffect),JP(function(){return g._destructor instanceof Function?g._destructor:void 0});var m=se.useCallback(function(_){for(var b=arguments.length,S=new Array(b>1?b-1:0),E=1;E<b;E++)S[E-1]=arguments[E];return g[_]instanceof Function?g[_].apply(g,S):void 0},[g]),v=se.useRef({});return Object.keys(ate(c,[].concat(QP(o),QP(u)))).filter(function(_){return v.current[_]!==c[_]}).forEach(function(_){return m(_,c[_])}),v.current=c,se.useImperativeHandle(h,function(){return Object.fromEntries(o.map(function(_){return[_,function(){for(var b=arguments.length,S=new Array(b),E=0;E<b;E++)S[E]=arguments[E];return m.apply(void 0,[_].concat(S))}]}))},[m]),ca.createElement(r,{ref:f})})}function JP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:se.useEffect,t=se.useRef(),r=se.useRef(!1),i=se.useRef(!1),s=se.useState(0),a=pte(s,2);a[0];var o=a[1];r.current&&(i.current=!0),e(function(){return r.current||(t.current=n(),r.current=!0),o(function(l){return l+1}),function(){i.current&&t.current&&t.current()}},[])}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const dc="182",Zr={ROTATE:0,DOLLY:1,PAN:2},Mo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rV=0,AT=1,iV=2,gte=0,Of=1,mte=2,Io=3,Ss=0,On=1,pi=2,Pi=0,Es=1,Gd=2,Vd=3,$d=4,kd=5,fi=100,y1=101,b1=102,sV=103,aV=104,To=200,_1=201,v1=202,x1=203,dg=204,hg=205,S1=206,E1=207,T1=208,w1=209,A1=210,yte=211,bte=212,_te=213,vte=214,pg=0,fg=1,gg=2,Gl=3,mg=4,yg=5,bg=6,_g=7,Kg=0,oV=1,lV=2,Qr=0,R1=1,N1=2,C1=3,M1=4,uV=5,I1=6,k1=7,L1=300,ya=301,Ka=302,Hd=303,jd=304,Ku=306,Zu=1e3,Qi=1001,Qu=1002,Rn=1003,D1=1004,ko=1005,Vn=1006,Ld=1007,Ji=1008,qn=1009,$u=1010,Hu=1011,pa=1012,Vr=1013,An=1014,hr=1015,tr=1016,Q_=1017,J_=1018,Ts=1020,ev=35902,tv=35899,O1=1021,Zg=1022,pr=1023,Jr=1026,Li=1027,Qg=1028,zh=1029,Di=1030,Gh=1031,xte=1032,Vh=1033,Ll=33776,Dl=33777,Ol=33778,Pl=33779,vg=35840,xg=35841,Sg=35842,Eg=35843,Wd=36196,qd=37492,Xd=37496,Yd=37488,Kd=37489,Ju=37490,Zd=37491,Qd=37808,Jd=37809,eh=37810,th=37811,nh=37812,rh=37813,ih=37814,sh=37815,ah=37816,oh=37817,lh=37818,uh=37819,ch=37820,dh=37821,hh=36492,RT=36494,NT=36495,ph=36283,fh=36284,ec=36285,gh=36286,Ste=3200,Xa=0,cV=1,Yi="",Ci="srgb",tc="srgb-linear",mh="linear",lt="srgb",HS="",dV="rg",Ete="ga",Tte=0,Au=7680,wte=7681,Ate=7682,Rte=7683,Nte=34055,Cte=34056,Mte=5386,Ite=512,kte=513,Lte=514,Dte=515,Ote=516,Pte=517,Fte=518,CT=519,P1=512,Jg=513,F1=514,em=515,U1=516,B1=517,tm=518,z1=519,yh=35044,Td=35048,eF="300 es",Oi=2e3,Za=2001,Va={COMPUTE:"compute",RENDER:"render"};function G1(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function u_(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function hV(){const n=Tg("canvas");return n.style.display="block",n}const tF={};function wg(...n){const e="THREE."+n.shift();console.log(e,...n)}function Ce(...n){const e="THREE."+n.shift();console.warn(e,...n)}function Ie(...n){const e="THREE."+n.shift();console.error(e,...n)}function jn(...n){const e=n.join(" ");e in tF||(tF[e]=!0,Ce(...n))}function Ute(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}class ro{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const ui=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nF=1234567;const Pf=Math.PI/180,nc=180/Math.PI;function Po(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ui[n&255]+ui[n>>8&255]+ui[n>>16&255]+ui[n>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[t&63|128]+ui[t>>8&255]+"-"+ui[t>>16&255]+ui[t>>24&255]+ui[r&255]+ui[r>>8&255]+ui[r>>16&255]+ui[r>>24&255]).toLowerCase()}function Zt(n,e,t){return Math.max(e,Math.min(t,n))}function V1(n,e){return(n%e+e)%e}function Bte(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zte(n,e,t){return n!==e?(t-n)/(e-n):0}function Ff(n,e,t){return(1-t)*n+t*e}function Gte(n,e,t,r){return Ff(n,e,1-Math.exp(-t*r))}function Vte(n,e=1){return e-Math.abs(V1(n,e*2)-e)}function $te(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Hte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function jte(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Wte(n,e){return n+Math.random()*(e-n)}function qte(n){return n*(.5-Math.random())}function Xte(n){n!==void 0&&(nF=n);let e=nF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Yte(n){return n*Pf}function Kte(n){return n*nc}function Zte(n){return(n&n-1)===0&&n!==0}function Qte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Jte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ene(n,e,t,r,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+r)/2),c=a((e+r)/2),h=s((e-r)/2),f=a((e-r)/2),g=s((r-e)/2),m=a((r-e)/2);switch(i){case"XYX":n.set(o*c,l*h,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*h,o*u);break;case"ZXZ":n.set(l*h,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*m,l*g,o*u);break;case"YXY":n.set(l*g,o*c,l*m,o*u);break;case"ZYZ":n.set(l*m,l*g,o*c,o*u);break;default:Ce("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Mi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const c_={DEG2RAD:Pf,RAD2DEG:nc,generateUUID:Po,clamp:Zt,euclideanModulo:V1,mapLinear:Bte,inverseLerp:zte,lerp:Ff,damp:Gte,pingpong:Vte,smoothstep:$te,smootherstep:Hte,randInt:jte,randFloat:Wte,randFloatSpread:qte,seededRandom:Xte,degToRad:Yte,radToDeg:Kte,isPowerOfTwo:Zte,ceilPowerOfTwo:Qte,floorPowerOfTwo:Jte,setQuaternionFromProperEuler:ene,normalize:Kt,denormalize:Mi};class $e{constructor(e=0,t=0){$e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ba{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,a,o){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3],f=s[a+0],g=s[a+1],m=s[a+2],v=s[a+3];if(o<=0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(o>=1){e[t+0]=f,e[t+1]=g,e[t+2]=m,e[t+3]=v;return}if(h!==v||l!==f||u!==g||c!==m){let _=l*f+u*g+c*m+h*v;_<0&&(f=-f,g=-g,m=-m,v=-v,_=-_);let b=1-o;if(_<.9995){const S=Math.acos(_),E=Math.sin(S);b=Math.sin(b*S)/E,o=Math.sin(o*S)/E,l=l*b+f*o,u=u*b+g*o,c=c*b+m*o,h=h*b+v*o}else{l=l*b+f*o,u=u*b+g*o,c=c*b+m*o,h=h*b+v*o;const S=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=S,u*=S,c*=S,h*=S}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,a){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=s[a],f=s[a+1],g=s[a+2],m=s[a+3];return e[t]=o*m+c*h+l*g-u*f,e[t+1]=l*m+c*f+u*h-o*g,e[t+2]=u*m+c*g+o*f-l*h,e[t+3]=c*m-o*h-l*f-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),h=o(s/2),f=l(r/2),g=l(i/2),m=l(s/2);switch(a){case"XYZ":this._x=f*c*h+u*g*m,this._y=u*g*h-f*c*m,this._z=u*c*m+f*g*h,this._w=u*c*h-f*g*m;break;case"YXZ":this._x=f*c*h+u*g*m,this._y=u*g*h-f*c*m,this._z=u*c*m-f*g*h,this._w=u*c*h+f*g*m;break;case"ZXY":this._x=f*c*h-u*g*m,this._y=u*g*h+f*c*m,this._z=u*c*m+f*g*h,this._w=u*c*h-f*g*m;break;case"ZYX":this._x=f*c*h-u*g*m,this._y=u*g*h+f*c*m,this._z=u*c*m-f*g*h,this._w=u*c*h+f*g*m;break;case"YZX":this._x=f*c*h+u*g*m,this._y=u*g*h+f*c*m,this._z=u*c*m-f*g*h,this._w=u*c*h-f*g*m;break;case"XZY":this._x=f*c*h-u*g*m,this._y=u*g*h-f*c*m,this._z=u*c*m+f*g*h,this._w=u*c*h+f*g*m;break;default:Ce("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=r+o+h;if(f>0){const g=.5/Math.sqrt(f+1);this._w=.25/g,this._x=(c-l)*g,this._y=(s-u)*g,this._z=(a-i)*g}else if(r>o&&r>h){const g=2*Math.sqrt(1+r-o-h);this._w=(c-l)/g,this._x=.25*g,this._y=(i+a)/g,this._z=(s+u)/g}else if(o>h){const g=2*Math.sqrt(1+o-r-h);this._w=(s-u)/g,this._x=(i+a)/g,this._y=.25*g,this._z=(l+c)/g}else{const g=2*Math.sqrt(1+h-r-o);this._w=(a-i)/g,this._x=(s+u)/g,this._y=(l+c)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zt(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+a*o+i*u-s*l,this._y=i*c+a*l+s*o-r*u,this._z=s*c+a*u+r*l-i*o,this._w=a*c-r*o-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let r=e._x,i=e._y,s=e._z,a=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,s=-s,a=-a,o=-o);let l=1-t;if(o<.9995){const u=Math.acos(o),c=Math.sin(u);l=Math.sin(l*u)/c,t=Math.sin(t*u)/c,this._x=this._x*l+r*t,this._y=this._y*l+i*t,this._z=this._z*l+s*t,this._w=this._w*l+a*t,this._onChangeCallback()}else this._x=this._x*l+r*t,this._y=this._y*l+i*t,this._z=this._z*l+s*t,this._w=this._w*l+a*t,this.normalize();return this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,r=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*i-o*r),c=2*(o*t-s*i),h=2*(s*r-a*t);return this.x=t+l*u+a*h-o*c,this.y=r+l*c+o*u-s*h,this.z=i+l*h+s*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this.z=Zt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this.z=Zt(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return jS.copy(this).projectOnVector(e),this.sub(jS)}reflect(e){return this.sub(jS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jS=new Z,rF=new ba;class $t{constructor(e,t,r,i,s,a,o,l,u){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,u)}set(e,t,r,i,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],g=r[5],m=r[8],v=i[0],_=i[3],b=i[6],S=i[1],E=i[4],A=i[7],R=i[2],w=i[5],M=i[8];return s[0]=a*v+o*S+l*R,s[3]=a*_+o*E+l*w,s[6]=a*b+o*A+l*M,s[1]=u*v+c*S+h*R,s[4]=u*_+c*E+h*w,s[7]=u*b+c*A+h*M,s[2]=f*v+g*S+m*R,s[5]=f*_+g*E+m*w,s[8]=f*b+g*A+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-r*s*c+r*o*l+i*s*u-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*a-o*u,f=o*l-c*s,g=u*s-a*l,m=t*h+r*f+i*g;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=h*v,e[1]=(i*u-c*r)*v,e[2]=(o*r-i*a)*v,e[3]=f*v,e[4]=(c*t-i*l)*v,e[5]=(i*s-o*t)*v,e[6]=g*v,e[7]=(r*l-u*t)*v,e[8]=(a*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*a+u*o)+a+e,-i*u,i*l,-i*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(WS.makeScale(e,t)),this}rotate(e){return this.premultiply(WS.makeRotation(-e)),this}translate(e,t){return this.premultiply(WS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const WS=new $t,iF=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),sF=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function tne(){const n={enabled:!0,workingColorSpace:tc,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===lt&&(i.r=Fo(i.r),i.g=Fo(i.g),i.b=Fo(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===lt&&(i.r=Dd(i.r),i.g=Dd(i.g),i.b=Dd(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Yi?mh:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return jn("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return jn("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[tc]:{primaries:e,whitePoint:r,transfer:mh,toXYZ:iF,fromXYZ:sF,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ci},outputColorSpaceConfig:{drawingBufferColorSpace:Ci}},[Ci]:{primaries:e,whitePoint:r,transfer:lt,toXYZ:iF,fromXYZ:sF,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ci}}}),n}const Nt=tne();function Fo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Dd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let $c;class nne{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{$c===void 0&&($c=Tg("canvas")),$c.width=e.width,$c.height=e.height;const i=$c.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=$c}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Tg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Fo(s[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Fo(t[r]/255)*255):t[r]=Fo(t[r]);return{data:t,width:e.width,height:e.height}}else return Ce("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rne=0;class $1{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rne++}),this.uuid=Po(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(qS(i[a].image)):s.push(qS(i[a]))}else s=qS(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function qS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?nne.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Ce("Texture: Unable to serialize Texture."),{})}let ine=0;const XS=new Z;class Er extends ro{constructor(e=Er.DEFAULT_IMAGE,t=Er.DEFAULT_MAPPING,r=Qi,i=Qi,s=Vn,a=Ji,o=pr,l=qn,u=Er.DEFAULT_ANISOTROPY,c=Yi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ine++}),this.uuid=Po(),this.name="",this.source=new $1(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new $e(0,0),this.repeat=new $e(1,1),this.center=new $e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(XS).x}get height(){return this.source.getSize(XS).y}get depth(){return this.source.getSize(XS).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){Ce(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){Ce(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==L1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Zu:e.x=e.x-Math.floor(e.x);break;case Qi:e.x=e.x<0?0:1;break;case Qu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Zu:e.y=e.y-Math.floor(e.y);break;case Qi:e.y=e.y<0?0:1;break;case Qu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Er.DEFAULT_IMAGE=null;Er.DEFAULT_MAPPING=L1;Er.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,t=0,r=0,i=1){Wt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],g=l[5],m=l[9],v=l[2],_=l[6],b=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-v)<.01&&Math.abs(m-_)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+v)<.1&&Math.abs(m+_)<.1&&Math.abs(u+g+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,A=(g+1)/2,R=(b+1)/2,w=(c+f)/4,M=(h+v)/4,I=(m+_)/4;return E>A&&E>R?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=w/r,s=M/r):A>R?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=w/i,s=I/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=M/s,i=I/s),this.set(r,i,s,t),this}let S=Math.sqrt((_-m)*(_-m)+(h-v)*(h-v)+(f-c)*(f-c));return Math.abs(S)<.001&&(S=1),this.x=(_-m)/S,this.y=(h-v)/S,this.z=(f-c)/S,this.w=Math.acos((u+g+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this.z=Zt(this.z,e.z,t.z),this.w=Zt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this.z=Zt(this.z,e,t),this.w=Zt(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hc extends ro{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Vn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new Er(i);this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:Vn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new $1(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ga extends hc{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class H1 extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sne extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pc{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ta.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ta.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ta.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,ta):ta.fromBufferAttribute(s,a),ta.applyMatrix4(e.matrixWorld),this.expandByPoint(ta);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),My.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),My.copy(r.boundingBox)),My.applyMatrix4(e.matrixWorld),this.union(My)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ta),ta.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vp),Iy.subVectors(this.max,Vp),Hc.subVectors(e.a,Vp),jc.subVectors(e.b,Vp),Wc.subVectors(e.c,Vp),fl.subVectors(jc,Hc),gl.subVectors(Wc,jc),gu.subVectors(Hc,Wc);let t=[0,-fl.z,fl.y,0,-gl.z,gl.y,0,-gu.z,gu.y,fl.z,0,-fl.x,gl.z,0,-gl.x,gu.z,0,-gu.x,-fl.y,fl.x,0,-gl.y,gl.x,0,-gu.y,gu.x,0];return!YS(t,Hc,jc,Wc,Iy)||(t=[1,0,0,0,1,0,0,0,1],!YS(t,Hc,jc,Wc,Iy))?!1:(ky.crossVectors(fl,gl),t=[ky.x,ky.y,ky.z],YS(t,Hc,jc,Wc,Iy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ta).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ta).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(go),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const go=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],ta=new Z,My=new pc,Hc=new Z,jc=new Z,Wc=new Z,fl=new Z,gl=new Z,gu=new Z,Vp=new Z,Iy=new Z,ky=new Z,mu=new Z;function YS(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){mu.fromArray(n,s);const o=i.x*Math.abs(mu.x)+i.y*Math.abs(mu.y)+i.z*Math.abs(mu.z),l=e.dot(mu),u=t.dot(mu),c=r.dot(mu);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const ane=new pc,$p=new Z,KS=new Z;class nm{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):ane.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$p.subVectors(e,this.center);const t=$p.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector($p,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(KS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($p.copy(e.center).add(KS)),this.expandByPoint($p.copy(e.center).sub(KS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const mo=new Z,ZS=new Z,Ly=new Z,ml=new Z,QS=new Z,Dy=new Z,JS=new Z;class nv{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mo.copy(this.origin).addScaledVector(this.direction,t),mo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){ZS.copy(e).add(t).multiplyScalar(.5),Ly.copy(t).sub(e).normalize(),ml.copy(this.origin).sub(ZS);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Ly),o=ml.dot(this.direction),l=-ml.dot(Ly),u=ml.lengthSq(),c=Math.abs(1-a*a);let h,f,g,m;if(c>0)if(h=a*l-o,f=a*o-l,m=s*c,h>=0)if(f>=-m)if(f<=m){const v=1/c;h*=v,f*=v,g=h*(h+a*f+2*o)+f*(a*h+f+2*l)+u}else f=s,h=Math.max(0,-(a*f+o)),g=-h*h+f*(f+2*l)+u;else f=-s,h=Math.max(0,-(a*f+o)),g=-h*h+f*(f+2*l)+u;else f<=-m?(h=Math.max(0,-(-a*s+o)),f=h>0?-s:Math.min(Math.max(-s,-l),s),g=-h*h+f*(f+2*l)+u):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),g=f*(f+2*l)+u):(h=Math.max(0,-(a*s+o)),f=h>0?s:Math.min(Math.max(-s,-l),s),g=-h*h+f*(f+2*l)+u);else f=a>0?-s:s,h=Math.max(0,-(a*f+o)),g=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(ZS).addScaledVector(Ly,f),g}intersectSphere(e,t){mo.subVectors(e.center,this.origin);const r=mo.dot(this.direction),i=mo.dot(mo)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,a=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,a=(e.min.y-f.y)*c),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),h>=0?(o=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(o=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,mo)!==null}intersectTriangle(e,t,r,i,s){QS.subVectors(t,e),Dy.subVectors(r,e),JS.crossVectors(QS,Dy);let a=this.direction.dot(JS),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ml.subVectors(this.origin,e);const l=o*this.direction.dot(Dy.crossVectors(ml,Dy));if(l<0)return null;const u=o*this.direction.dot(QS.cross(ml));if(u<0||l+u>a)return null;const c=-o*ml.dot(JS);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class sn{constructor(e,t,r,i,s,a,o,l,u,c,h,f,g,m,v,_){sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,u,c,h,f,g,m,v,_)}set(e,t,r,i,s,a,o,l,u,c,h,f,g,m,v,_){const b=this.elements;return b[0]=e,b[4]=t,b[8]=r,b[12]=i,b[1]=s,b[5]=a,b[9]=o,b[13]=l,b[2]=u,b[6]=c,b[10]=h,b[14]=f,b[3]=g,b[7]=m,b[11]=v,b[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new sn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),r.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,r=e.elements,i=1/qc.setFromMatrixColumn(e,0).length(),s=1/qc.setFromMatrixColumn(e,1).length(),a=1/qc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=a*c,g=a*h,m=o*c,v=o*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=g+m*u,t[5]=f-v*u,t[9]=-o*l,t[2]=v-f*u,t[6]=m+g*u,t[10]=a*l}else if(e.order==="YXZ"){const f=l*c,g=l*h,m=u*c,v=u*h;t[0]=f+v*o,t[4]=m*o-g,t[8]=a*u,t[1]=a*h,t[5]=a*c,t[9]=-o,t[2]=g*o-m,t[6]=v+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*c,g=l*h,m=u*c,v=u*h;t[0]=f-v*o,t[4]=-a*h,t[8]=m+g*o,t[1]=g+m*o,t[5]=a*c,t[9]=v-f*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*c,g=a*h,m=o*c,v=o*h;t[0]=l*c,t[4]=m*u-g,t[8]=f*u+v,t[1]=l*h,t[5]=v*u+f,t[9]=g*u-m,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,g=a*u,m=o*l,v=o*u;t[0]=l*c,t[4]=v-f*h,t[8]=m*h+g,t[1]=h,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=g*h+m,t[10]=f-v*h}else if(e.order==="XZY"){const f=a*l,g=a*u,m=o*l,v=o*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+v,t[5]=a*c,t[9]=g*h-m,t[2]=m*h-g,t[6]=o*c,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(one,e,lne)}lookAt(e,t,r){const i=this.elements;return ps.subVectors(e,t),ps.lengthSq()===0&&(ps.z=1),ps.normalize(),yl.crossVectors(r,ps),yl.lengthSq()===0&&(Math.abs(r.z)===1?ps.x+=1e-4:ps.z+=1e-4,ps.normalize(),yl.crossVectors(r,ps)),yl.normalize(),Oy.crossVectors(ps,yl),i[0]=yl.x,i[4]=Oy.x,i[8]=ps.x,i[1]=yl.y,i[5]=Oy.y,i[9]=ps.y,i[2]=yl.z,i[6]=Oy.z,i[10]=ps.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],g=r[13],m=r[2],v=r[6],_=r[10],b=r[14],S=r[3],E=r[7],A=r[11],R=r[15],w=i[0],M=i[4],I=i[8],C=i[12],k=i[1],O=i[5],z=i[9],W=i[13],q=i[2],X=i[6],Q=i[10],H=i[14],G=i[3],re=i[7],D=i[11],U=i[15];return s[0]=a*w+o*k+l*q+u*G,s[4]=a*M+o*O+l*X+u*re,s[8]=a*I+o*z+l*Q+u*D,s[12]=a*C+o*W+l*H+u*U,s[1]=c*w+h*k+f*q+g*G,s[5]=c*M+h*O+f*X+g*re,s[9]=c*I+h*z+f*Q+g*D,s[13]=c*C+h*W+f*H+g*U,s[2]=m*w+v*k+_*q+b*G,s[6]=m*M+v*O+_*X+b*re,s[10]=m*I+v*z+_*Q+b*D,s[14]=m*C+v*W+_*H+b*U,s[3]=S*w+E*k+A*q+R*G,s[7]=S*M+E*O+A*X+R*re,s[11]=S*I+E*z+A*Q+R*D,s[15]=S*C+E*W+A*H+R*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],g=e[14],m=e[3],v=e[7],_=e[11],b=e[15],S=l*g-u*f,E=o*g-u*h,A=o*f-l*h,R=a*g-u*c,w=a*f-l*c,M=a*h-o*c;return t*(v*S-_*E+b*A)-r*(m*S-_*R+b*w)+i*(m*E-v*R+b*M)-s*(m*A-v*w+_*M)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],g=e[11],m=e[12],v=e[13],_=e[14],b=e[15],S=h*_*u-v*f*u+v*l*g-o*_*g-h*l*b+o*f*b,E=m*f*u-c*_*u-m*l*g+a*_*g+c*l*b-a*f*b,A=c*v*u-m*h*u+m*o*g-a*v*g-c*o*b+a*h*b,R=m*h*l-c*v*l-m*o*f+a*v*f+c*o*_-a*h*_,w=t*S+r*E+i*A+s*R;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=S*M,e[1]=(v*f*s-h*_*s-v*i*g+r*_*g+h*i*b-r*f*b)*M,e[2]=(o*_*s-v*l*s+v*i*u-r*_*u-o*i*b+r*l*b)*M,e[3]=(h*l*s-o*f*s-h*i*u+r*f*u+o*i*g-r*l*g)*M,e[4]=E*M,e[5]=(c*_*s-m*f*s+m*i*g-t*_*g-c*i*b+t*f*b)*M,e[6]=(m*l*s-a*_*s-m*i*u+t*_*u+a*i*b-t*l*b)*M,e[7]=(a*f*s-c*l*s+c*i*u-t*f*u-a*i*g+t*l*g)*M,e[8]=A*M,e[9]=(m*h*s-c*v*s-m*r*g+t*v*g+c*r*b-t*h*b)*M,e[10]=(a*v*s-m*o*s+m*r*u-t*v*u-a*r*b+t*o*b)*M,e[11]=(c*o*s-a*h*s-c*r*u+t*h*u+a*r*g-t*o*g)*M,e[12]=R*M,e[13]=(c*v*i-m*h*i+m*r*f-t*v*f-c*r*_+t*h*_)*M,e[14]=(m*o*i-a*v*i-m*r*l+t*v*l+a*r*_-t*o*_)*M,e[15]=(a*h*i-c*o*i+c*r*l-t*h*l-a*r*f+t*o*f)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*a,0,u*l-i*o,c*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,h=o+o,f=s*u,g=s*c,m=s*h,v=a*c,_=a*h,b=o*h,S=l*u,E=l*c,A=l*h,R=r.x,w=r.y,M=r.z;return i[0]=(1-(v+b))*R,i[1]=(g+A)*R,i[2]=(m-E)*R,i[3]=0,i[4]=(g-A)*w,i[5]=(1-(f+b))*w,i[6]=(_+S)*w,i[7]=0,i[8]=(m+E)*M,i[9]=(_-S)*M,i[10]=(1-(f+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return r.set(1,1,1),t.identity(),this;let s=qc.set(i[0],i[1],i[2]).length();const a=qc.set(i[4],i[5],i[6]).length(),o=qc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),na.copy(this);const u=1/s,c=1/a,h=1/o;return na.elements[0]*=u,na.elements[1]*=u,na.elements[2]*=u,na.elements[4]*=c,na.elements[5]*=c,na.elements[6]*=c,na.elements[8]*=h,na.elements[9]*=h,na.elements[10]*=h,t.setFromRotationMatrix(na),r.x=s,r.y=a,r.z=o,this}makePerspective(e,t,r,i,s,a,o=Oi,l=!1){const u=this.elements,c=2*s/(t-e),h=2*s/(r-i),f=(t+e)/(t-e),g=(r+i)/(r-i);let m,v;if(l)m=s/(a-s),v=a*s/(a-s);else if(o===Oi)m=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(o===Za)m=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=h,u[9]=g,u[13]=0,u[2]=0,u[6]=0,u[10]=m,u[14]=v,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,i,s,a,o=Oi,l=!1){const u=this.elements,c=2/(t-e),h=2/(r-i),f=-(t+e)/(t-e),g=-(r+i)/(r-i);let m,v;if(l)m=1/(a-s),v=a/(a-s);else if(o===Oi)m=-2/(a-s),v=-(a+s)/(a-s);else if(o===Za)m=-1/(a-s),v=-s/(a-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=0,u[12]=f,u[1]=0,u[5]=h,u[9]=0,u[13]=g,u[2]=0,u[6]=0,u[10]=m,u[14]=v,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const qc=new Z,na=new sn,one=new Z(0,0,0),lne=new Z(1,1,1),yl=new Z,Oy=new Z,ps=new Z,aF=new sn,oF=new ba;class is{constructor(e=0,t=0,r=0,i=is.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(Zt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Zt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Zt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Zt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-Zt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,g),this._y=0);break;default:Ce("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return aF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aF,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oF.setFromEuler(this),this.setFromQuaternion(oF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}is.DEFAULT_ORDER="XYZ";class j1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let une=0;const lF=new Z,Xc=new ba,yo=new sn,Py=new Z,Hp=new Z,cne=new Z,dne=new ba,uF=new Z(1,0,0),cF=new Z(0,1,0),dF=new Z(0,0,1),hF={type:"added"},hne={type:"removed"},Yc={type:"childadded",child:null},e0={type:"childremoved",child:null};class Tr extends ro{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:une++}),this.uuid=Po(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tr.DEFAULT_UP.clone();const e=new Z,t=new is,r=new ba,i=new Z(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new sn},normalMatrix:{value:new $t}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=Tr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new j1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xc.setFromAxisAngle(e,t),this.quaternion.multiply(Xc),this}rotateOnWorldAxis(e,t){return Xc.setFromAxisAngle(e,t),this.quaternion.premultiply(Xc),this}rotateX(e){return this.rotateOnAxis(uF,e)}rotateY(e){return this.rotateOnAxis(cF,e)}rotateZ(e){return this.rotateOnAxis(dF,e)}translateOnAxis(e,t){return lF.copy(e).applyQuaternion(this.quaternion),this.position.add(lF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(uF,e)}translateY(e){return this.translateOnAxis(cF,e)}translateZ(e){return this.translateOnAxis(dF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(yo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Py.copy(e):Py.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yo.lookAt(Hp,Py,this.up):yo.lookAt(Py,Hp,this.up),this.quaternion.setFromRotationMatrix(yo),i&&(yo.extractRotation(i.matrixWorld),Xc.setFromRotationMatrix(yo),this.quaternion.premultiply(Xc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Ie("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(hF),Yc.child=e,this.dispatchEvent(Yc),Yc.child=null):Ie("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(hne),e0.child=e,this.dispatchEvent(e0),e0.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),yo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yo.multiply(e.parent.matrixWorld)),e.applyMatrix4(yo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(hF),Yc.child=e,this.dispatchEvent(Yc),Yc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hp,e,cne),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hp,dne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),h=a(e.shapes),f=a(e.skeletons),g=a(e.animations),m=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),g.length>0&&(r.animations=g),m.length>0&&(r.nodes=m)}return r.object=i,r;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Tr.DEFAULT_UP=new Z(0,1,0);Tr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ra=new Z,bo=new Z,t0=new Z,_o=new Z,Kc=new Z,Zc=new Z,pF=new Z,n0=new Z,r0=new Z,i0=new Z,s0=new Wt,a0=new Wt,o0=new Wt;class da{constructor(e=new Z,t=new Z,r=new Z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ra.subVectors(e,t),i.cross(ra);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ra.subVectors(i,t),bo.subVectors(r,t),t0.subVectors(e,t);const a=ra.dot(ra),o=ra.dot(bo),l=ra.dot(t0),u=bo.dot(bo),c=bo.dot(t0),h=a*u-o*o;if(h===0)return s.set(0,0,0),null;const f=1/h,g=(u*l-o*c)*f,m=(a*c-o*l)*f;return s.set(1-g-m,m,g)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,_o)===null?!1:_o.x>=0&&_o.y>=0&&_o.x+_o.y<=1}static getInterpolation(e,t,r,i,s,a,o,l){return this.getBarycoord(e,t,r,i,_o)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,_o.x),l.addScaledVector(a,_o.y),l.addScaledVector(o,_o.z),l)}static getInterpolatedAttribute(e,t,r,i,s,a){return s0.setScalar(0),a0.setScalar(0),o0.setScalar(0),s0.fromBufferAttribute(e,t),a0.fromBufferAttribute(e,r),o0.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(s0,s.x),a.addScaledVector(a0,s.y),a.addScaledVector(o0,s.z),a}static isFrontFacing(e,t,r,i){return ra.subVectors(r,t),bo.subVectors(e,t),ra.cross(bo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ra.subVectors(this.c,this.b),bo.subVectors(this.a,this.b),ra.cross(bo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return da.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return da.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return da.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return da.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return da.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,o;Kc.subVectors(i,r),Zc.subVectors(s,r),n0.subVectors(e,r);const l=Kc.dot(n0),u=Zc.dot(n0);if(l<=0&&u<=0)return t.copy(r);r0.subVectors(e,i);const c=Kc.dot(r0),h=Zc.dot(r0);if(c>=0&&h<=c)return t.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(r).addScaledVector(Kc,a);i0.subVectors(e,s);const g=Kc.dot(i0),m=Zc.dot(i0);if(m>=0&&g<=m)return t.copy(s);const v=g*u-l*m;if(v<=0&&u>=0&&m<=0)return o=u/(u-m),t.copy(r).addScaledVector(Zc,o);const _=c*m-g*h;if(_<=0&&h-c>=0&&g-m>=0)return pF.subVectors(s,i),o=(h-c)/(h-c+(g-m)),t.copy(i).addScaledVector(pF,o);const b=1/(_+v+f);return a=v*b,o=f*b,t.copy(r).addScaledVector(Kc,a).addScaledVector(Zc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bl={h:0,s:0,l:0},Fy={h:0,s:0,l:0};function l0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Et{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ci){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nt.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Nt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Nt.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Nt.workingColorSpace){if(e=V1(e,1),t=Zt(t,0,1),r=Zt(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,a=2*r-s;this.r=l0(a,s,e+1/3),this.g=l0(a,s,e),this.b=l0(a,s,e-1/3)}return Nt.colorSpaceToWorking(this,i),this}setStyle(e,t=Ci){function r(s){s!==void 0&&parseFloat(s)<1&&Ce("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:Ce("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);Ce("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ci){const r=pV[e.toLowerCase()];return r!==void 0?this.setHex(r,t):Ce("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fo(e.r),this.g=Fo(e.g),this.b=Fo(e.b),this}copyLinearToSRGB(e){return this.r=Dd(e.r),this.g=Dd(e.g),this.b=Dd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ci){return Nt.workingToColorSpace(ci.copy(this),e),Math.round(Zt(ci.r*255,0,255))*65536+Math.round(Zt(ci.g*255,0,255))*256+Math.round(Zt(ci.b*255,0,255))}getHexString(e=Ci){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Nt.workingColorSpace){Nt.workingToColorSpace(ci.copy(this),t);const r=ci.r,i=ci.g,s=ci.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const h=a-o;switch(u=c<=.5?h/(a+o):h/(2-a-o),a){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Nt.workingColorSpace){return Nt.workingToColorSpace(ci.copy(this),t),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Ci){Nt.workingToColorSpace(ci.copy(this),e);const t=ci.r,r=ci.g,i=ci.b;return e!==Ci?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(bl),this.setHSL(bl.h+e,bl.s+t,bl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(bl),e.getHSL(Fy);const r=Ff(bl.h,Fy.h,t),i=Ff(bl.s,Fy.s,t),s=Ff(bl.l,Fy.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ci=new Et;Et.NAMES=pV;let pne=0;class mi extends ro{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pne++}),this.uuid=Po(),this.name="",this.type="Material",this.blending=Es,this.side=Ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=dg,this.blendDst=hg,this.blendEquation=fi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=Gl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=CT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Au,this.stencilZFail=Au,this.stencilZPass=Au,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){Ce(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){Ce(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Es&&(r.blending=this.blending),this.side!==Ss&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==dg&&(r.blendSrc=this.blendSrc),this.blendDst!==hg&&(r.blendDst=this.blendDst),this.blendEquation!==fi&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Gl&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==CT&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Au&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Au&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Au&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.allowOverride===!1&&(r.allowOverride=!1),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class za extends mi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=Kg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ao=fne();function fne(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function fs(n){Math.abs(n)>65504&&Ce("DataUtils.toHalfFloat(): Value out of range."),n=Zt(n,-65504,65504),Ao.floatView[0]=n;const e=Ao.uint32View[0],t=e>>23&511;return Ao.baseTable[t]+((e&8388607)>>Ao.shiftTable[t])}function Uy(n){const e=n>>10;return Ao.uint32View[0]=Ao.mantissaTable[Ao.offsetTable[e]+(n&1023)]+Ao.exponentTable[e],Ao.floatView[0]}const br=new Z,By=new $e;let gne=0;class ei{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:gne++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=yh,this.updateRanges=[],this.gpuType=hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)By.fromBufferAttribute(this,t),By.applyMatrix3(e),this.setXY(t,By.x,By.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Mi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Kt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Mi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Mi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Mi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Mi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==yh&&(e.usage=this.usage),e}}class W1 extends ei{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class q1 extends ei{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class fV extends ei{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Uy(this.array[e*this.itemSize]);return this.normalized&&(t=Mi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=fs(t),this}getY(e){let t=Uy(this.array[e*this.itemSize+1]);return this.normalized&&(t=Mi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=fs(t),this}getZ(e){let t=Uy(this.array[e*this.itemSize+2]);return this.normalized&&(t=Mi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=fs(t),this}getW(e){let t=Uy(this.array[e*this.itemSize+3]);return this.normalized&&(t=Mi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=fs(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.array[e+0]=fs(t),this.array[e+1]=fs(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.array[e+0]=fs(t),this.array[e+1]=fs(r),this.array[e+2]=fs(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.array[e+0]=fs(t),this.array[e+1]=fs(r),this.array[e+2]=fs(i),this.array[e+3]=fs(s),this}}class ur extends ei{constructor(e,t,r){super(new Float32Array(e),t,r)}}let mne=0;const Ls=new sn,u0=new Tr,Qc=new Z,gs=new pc,jp=new pc,zr=new Z;class jr extends ro{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mne++}),this.uuid=Po(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(G1(e)?q1:W1)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new $t().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ls.makeRotationFromQuaternion(e),this.applyMatrix4(Ls),this}rotateX(e){return Ls.makeRotationX(e),this.applyMatrix4(Ls),this}rotateY(e){return Ls.makeRotationY(e),this.applyMatrix4(Ls),this}rotateZ(e){return Ls.makeRotationZ(e),this.applyMatrix4(Ls),this}translate(e,t,r){return Ls.makeTranslation(e,t,r),this.applyMatrix4(Ls),this}scale(e,t,r){return Ls.makeScale(e,t,r),this.applyMatrix4(Ls),this}lookAt(e){return u0.lookAt(e),u0.updateMatrix(),this.applyMatrix4(u0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qc).negate(),this.translate(Qc.x,Qc.y,Qc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new ur(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&Ce("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new pc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ie("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];gs.setFromBufferAttribute(s),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,gs.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,gs.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(gs.min),this.boundingBox.expandByPoint(gs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ie('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new nm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ie("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){const r=this.boundingSphere.center;if(gs.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];jp.setFromBufferAttribute(o),this.morphTargetsRelative?(zr.addVectors(gs.min,jp.min),gs.expandByPoint(zr),zr.addVectors(gs.max,jp.max),gs.expandByPoint(zr)):(gs.expandByPoint(jp.min),gs.expandByPoint(jp.max))}gs.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)zr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(zr));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)zr.fromBufferAttribute(o,u),l&&(Qc.fromBufferAttribute(e,u),zr.add(Qc)),i=Math.max(i,r.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Ie('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Ie("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ei(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let I=0;I<r.count;I++)o[I]=new Z,l[I]=new Z;const u=new Z,c=new Z,h=new Z,f=new $e,g=new $e,m=new $e,v=new Z,_=new Z;function b(I,C,k){u.fromBufferAttribute(r,I),c.fromBufferAttribute(r,C),h.fromBufferAttribute(r,k),f.fromBufferAttribute(s,I),g.fromBufferAttribute(s,C),m.fromBufferAttribute(s,k),c.sub(u),h.sub(u),g.sub(f),m.sub(f);const O=1/(g.x*m.y-m.x*g.y);isFinite(O)&&(v.copy(c).multiplyScalar(m.y).addScaledVector(h,-g.y).multiplyScalar(O),_.copy(h).multiplyScalar(g.x).addScaledVector(c,-m.x).multiplyScalar(O),o[I].add(v),o[C].add(v),o[k].add(v),l[I].add(_),l[C].add(_),l[k].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let I=0,C=S.length;I<C;++I){const k=S[I],O=k.start,z=k.count;for(let W=O,q=O+z;W<q;W+=3)b(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const E=new Z,A=new Z,R=new Z,w=new Z;function M(I){R.fromBufferAttribute(i,I),w.copy(R);const C=o[I];E.copy(C),E.sub(R.multiplyScalar(R.dot(C))).normalize(),A.crossVectors(w,C);const O=A.dot(l[I])<0?-1:1;a.setXYZW(I,E.x,E.y,E.z,O)}for(let I=0,C=S.length;I<C;++I){const k=S[I],O=k.start,z=k.count;for(let W=O,q=O+z;W<q;W+=3)M(e.getX(W+0)),M(e.getX(W+1)),M(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ei(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,g=r.count;f<g;f++)r.setXYZ(f,0,0,0);const i=new Z,s=new Z,a=new Z,o=new Z,l=new Z,u=new Z,c=new Z,h=new Z;if(e)for(let f=0,g=e.count;f<g;f+=3){const m=e.getX(f+0),v=e.getX(f+1),_=e.getX(f+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,_),c.subVectors(a,s),h.subVectors(i,s),c.cross(h),o.fromBufferAttribute(r,m),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,_),o.add(c),l.add(c),u.add(c),r.setXYZ(m,o.x,o.y,o.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let f=0,g=t.count;f<g;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),c.subVectors(a,s),h.subVectors(i,s),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)zr.fromBufferAttribute(e,t),zr.normalize(),e.setXYZ(t,zr.x,zr.y,zr.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,h=o.normalized,f=new u.constructor(l.length*c);let g=0,m=0;for(let v=0,_=l.length;v<_;v++){o.isInterleavedBufferAttribute?g=l[v]*o.data.stride+o.offset:g=l[v]*c;for(let b=0;b<c;b++)f[m++]=u[g++]}return new ei(f,c,h)}if(this.index===null)return Ce("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jr,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,h=u.length;c<h;c++){const f=u[c],g=e(f,r);l.push(g)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const g=u[h];c.push(g.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let f=0,g=h.length;f<g;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const h=a[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fF=new sn,yu=new nv,zy=new nm,gF=new Z,Gy=new Z,Vy=new Z,$y=new Z,c0=new Z,Hy=new Z,mF=new Z,jy=new Z;class wr extends Tr{constructor(e=new jr,t=new za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Hy.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],h=s[l];c!==0&&(c0.fromBufferAttribute(h,e),a?Hy.addScaledVector(c0,c):Hy.addScaledVector(c0.sub(t),c))}t.add(Hy)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),zy.copy(r.boundingSphere),zy.applyMatrix4(s),yu.copy(e.ray).recast(e.near),!(zy.containsPoint(yu.origin)===!1&&(yu.intersectSphere(zy,gF)===null||yu.origin.distanceToSquared(gF)>(e.far-e.near)**2))&&(fF.copy(s).invert(),yu.copy(e.ray).applyMatrix4(fF),!(r.boundingBox!==null&&yu.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,yu)))}_computeIntersections(e,t,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,f=s.groups,g=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,v=f.length;m<v;m++){const _=f[m],b=a[_.materialIndex],S=Math.max(_.start,g.start),E=Math.min(o.count,Math.min(_.start+_.count,g.start+g.count));for(let A=S,R=E;A<R;A+=3){const w=o.getX(A),M=o.getX(A+1),I=o.getX(A+2);i=Wy(this,b,e,r,u,c,h,w,M,I),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const m=Math.max(0,g.start),v=Math.min(o.count,g.start+g.count);for(let _=m,b=v;_<b;_+=3){const S=o.getX(_),E=o.getX(_+1),A=o.getX(_+2);i=Wy(this,a,e,r,u,c,h,S,E,A),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,v=f.length;m<v;m++){const _=f[m],b=a[_.materialIndex],S=Math.max(_.start,g.start),E=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let A=S,R=E;A<R;A+=3){const w=A,M=A+1,I=A+2;i=Wy(this,b,e,r,u,c,h,w,M,I),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const m=Math.max(0,g.start),v=Math.min(l.count,g.start+g.count);for(let _=m,b=v;_<b;_+=3){const S=_,E=_+1,A=_+2;i=Wy(this,a,e,r,u,c,h,S,E,A),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function yne(n,e,t,r,i,s,a,o){let l;if(e.side===On?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===Ss,o),l===null)return null;jy.copy(o),jy.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(jy);return u<t.near||u>t.far?null:{distance:u,point:jy.clone(),object:n}}function Wy(n,e,t,r,i,s,a,o,l,u){n.getVertexPosition(o,Gy),n.getVertexPosition(l,Vy),n.getVertexPosition(u,$y);const c=yne(n,e,t,r,Gy,Vy,$y,mF);if(c){const h=new Z;da.getBarycoord(mF,Gy,Vy,$y,h),i&&(c.uv=da.getInterpolatedAttribute(i,o,l,u,h,new $e)),s&&(c.uv1=da.getInterpolatedAttribute(s,o,l,u,h,new $e)),a&&(c.normal=da.getInterpolatedAttribute(a,o,l,u,h,new Z),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:l,c:u,normal:new Z,materialIndex:0};da.getNormal(Gy,Vy,$y,f.normal),c.face=f,c.barycoord=h}return c}class fc extends jr{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],h=[];let f=0,g=0;m("z","y","x",-1,-1,r,t,e,a,s,0),m("z","y","x",1,-1,r,t,-e,a,s,1),m("x","z","y",1,1,e,r,t,i,a,2),m("x","z","y",1,-1,e,r,-t,i,a,3),m("x","y","z",1,-1,e,t,r,i,s,4),m("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new ur(u,3)),this.setAttribute("normal",new ur(c,3)),this.setAttribute("uv",new ur(h,2));function m(v,_,b,S,E,A,R,w,M,I,C){const k=A/M,O=R/I,z=A/2,W=R/2,q=w/2,X=M+1,Q=I+1;let H=0,G=0;const re=new Z;for(let D=0;D<Q;D++){const U=D*O-W;for(let ne=0;ne<X;ne++){const B=ne*k-z;re[v]=B*S,re[_]=U*E,re[b]=q,u.push(re.x,re.y,re.z),re[v]=0,re[_]=0,re[b]=w>0?1:-1,c.push(re.x,re.y,re.z),h.push(ne/M),h.push(1-D/I),H+=1}}for(let D=0;D<I;D++)for(let U=0;U<M;U++){const ne=f+U+X*D,B=f+U+X*(D+1),Oe=f+(U+1)+X*(D+1),Y=f+(U+1)+X*D;l.push(ne,B,Y),l.push(B,Oe,Y),G+=6}o.addGroup(g,G,C),g+=G,f+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(Ce("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ri(n){const e={};for(let t=0;t<n.length;t++){const r=bh(n[t]);for(const i in r)e[i]=r[i]}return e}function bne(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function gV(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Nt.workingColorSpace}const mV={clone:bh,merge:Ri};var _ne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Hs extends mi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_ne,this.fragmentShader=vne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bh(e.uniforms),this.uniformsGroups=bne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class X1 extends Tr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn,this.coordinateSystem=Oi,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _l=new Z,yF=new $e,bF=new $e;class $r extends X1{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=nc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Pf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return nc*2*Math.atan(Math.tan(Pf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){_l.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_l.x,_l.y).multiplyScalar(-e/_l.z),_l.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(_l.x,_l.y).multiplyScalar(-e/_l.z)}getViewSize(e,t){return this.getViewBounds(e,yF,bF),t.subVectors(bF,yF)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Pf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Jc=-90,ed=1;class yV extends Tr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new $r(Jc,ed,e,t);i.layers=this.layers,this.add(i);const s=new $r(Jc,ed,e,t);s.layers=this.layers,this.add(s);const a=new $r(Jc,ed,e,t);a.layers=this.layers,this.add(a);const o=new $r(Jc,ed,e,t);o.layers=this.layers,this.add(o);const l=new $r(Jc,ed,e,t);l.layers=this.layers,this.add(l);const u=new $r(Jc,ed,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,a,o,l]=t;for(const u of t)this.remove(u);if(e===Oi)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Za)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,u,c]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(h,f,g),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class rm extends Er{constructor(e=[],t=ya,r,i,s,a,o,l,u,c){super(e,t,r,i,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Y1 extends ga{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new rm(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fc(5,5,5),s=new Hs({name:"CubemapFromEquirect",uniforms:bh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:On,blending:Pi});s.uniforms.tEquirect.value=t;const a=new wr(i,s),o=t.minFilter;return t.minFilter===Ji&&(t.minFilter=Vn),new yV(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}}let wd=class extends Tr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const xne={type:"move"};class Vb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const v of e.hand.values()){const _=t.getJointPose(v,r),b=this._getHandJoint(u,v);_!==null&&(b.matrix.fromArray(_.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=_.radius),b.visible=_!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),g=.02,m=.005;u.inputState.pinching&&f>g+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=g-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(xne)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new wd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class rv extends Tr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new is,this.environmentIntensity=1,this.environmentRotation=new is,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class bV{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=yh,this.updateRanges=[],this.version=0,this.uuid=Po()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ai=new Z;class K1{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix4(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.applyNormalMatrix(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.transformDirection(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Mi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Kt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Mi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Mi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Mi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Mi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){wg("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new ei(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new K1(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){wg("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Sne extends mi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Z1 extends Er{constructor(e=null,t=1,r=1,i,s,a,o,l,u=Rn,c=Rn,h,f){super(null,a,o,l,u,c,i,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ene extends ei{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const d0=new Z,Tne=new Z,wne=new $t;class ua{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=d0.subVectors(r,t).cross(Tne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(d0),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||wne.getNormalMatrix(e),i=this.coplanarPoint(d0).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bu=new nm,Ane=new $e(.5,.5),qy=new Z;class im{constructor(e=new ua,t=new ua,r=new ua,i=new ua,s=new ua,a=new ua){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Oi,r=!1){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],u=s[3],c=s[4],h=s[5],f=s[6],g=s[7],m=s[8],v=s[9],_=s[10],b=s[11],S=s[12],E=s[13],A=s[14],R=s[15];if(i[0].setComponents(u-a,g-c,b-m,R-S).normalize(),i[1].setComponents(u+a,g+c,b+m,R+S).normalize(),i[2].setComponents(u+o,g+h,b+v,R+E).normalize(),i[3].setComponents(u-o,g-h,b-v,R-E).normalize(),r)i[4].setComponents(l,f,_,A).normalize(),i[5].setComponents(u-l,g-f,b-_,R-A).normalize();else if(i[4].setComponents(u-l,g-f,b-_,R-A).normalize(),t===Oi)i[5].setComponents(u+l,g+f,b+_,R+A).normalize();else if(t===Za)i[5].setComponents(l,f,_,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),bu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bu)}intersectsSprite(e){bu.center.set(0,0,0);const t=Ane.distanceTo(e.center);return bu.radius=.7071067811865476+t,bu.applyMatrix4(e.matrixWorld),this.intersectsSphere(bu)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(qy.x=i.normal.x>0?e.max.x:e.min.x,qy.y=i.normal.y>0?e.max.y:e.min.y,qy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(qy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Aa=new sn,Ra=new im;class Q1{constructor(){this.coordinateSystem=Oi}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ra.setFromProjectionMatrix(Aa,i.coordinateSystem,i.reversedDepth),Ra.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ra.setFromProjectionMatrix(Aa,i.coordinateSystem,i.reversedDepth),Ra.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ra.setFromProjectionMatrix(Aa,i.coordinateSystem,i.reversedDepth),Ra.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ra.setFromProjectionMatrix(Aa,i.coordinateSystem,i.reversedDepth),Ra.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ra.setFromProjectionMatrix(Aa,i.coordinateSystem,i.reversedDepth),Ra.containsPoint(e))return!0}return!1}clone(){return new Q1}}class iv extends mi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const d_=new Z,h_=new Z,_F=new sn,Wp=new nv,Xy=new nm,h0=new Z,vF=new Z;class Rne extends Tr{constructor(e=new jr,t=new iv){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)d_.fromBufferAttribute(t,i-1),h_.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=d_.distanceTo(h_);e.setAttribute("lineDistance",new ur(r,1))}else Ce("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Xy.copy(r.boundingSphere),Xy.applyMatrix4(i),Xy.radius+=s,e.ray.intersectsSphere(Xy)===!1)return;_F.copy(i).invert(),Wp.copy(e.ray).applyMatrix4(_F);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,c=r.index,f=r.attributes.position;if(c!==null){const g=Math.max(0,a.start),m=Math.min(c.count,a.start+a.count);for(let v=g,_=m-1;v<_;v+=u){const b=c.getX(v),S=c.getX(v+1),E=Yy(this,e,Wp,l,b,S,v);E&&t.push(E)}if(this.isLineLoop){const v=c.getX(m-1),_=c.getX(g),b=Yy(this,e,Wp,l,v,_,m-1);b&&t.push(b)}}else{const g=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);for(let v=g,_=m-1;v<_;v+=u){const b=Yy(this,e,Wp,l,v,v+1,v);b&&t.push(b)}if(this.isLineLoop){const v=Yy(this,e,Wp,l,m-1,g,m-1);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Yy(n,e,t,r,i,s,a){const o=n.geometry.attributes.position;if(d_.fromBufferAttribute(o,i),h_.fromBufferAttribute(o,s),t.distanceSqToSegment(d_,h_,h0,vF)>r)return;h0.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(h0);if(!(u<e.near||u>e.far))return{distance:u,point:vF.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}class Nne extends mi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class _V extends Er{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Rn,this.minFilter=Rn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fi extends Er{constructor(e,t,r=An,i,s,a,o=Rn,l=Rn,u,c=Jr,h=1){if(c!==Jr&&c!==Li)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:t,depth:h};super(f,i,s,a,o,l,c,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new $1(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class vV extends Fi{constructor(e,t=An,r=ya,i,s,a=Rn,o=Rn,l,u=Jr){const c={width:e,height:e,depth:1},h=[c,c,c,c,c,c];super(e,e,t,r,i,s,a,o,l,u),this.image=h,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class xV extends Er{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class sm extends jr{constructor(e=1,t=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],h=[],f=[],g=[];let m=0;const v=[],_=r/2;let b=0;S(),a===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(c),this.setAttribute("position",new ur(h,3)),this.setAttribute("normal",new ur(f,3)),this.setAttribute("uv",new ur(g,2));function S(){const A=new Z,R=new Z;let w=0;const M=(t-e)/r;for(let I=0;I<=s;I++){const C=[],k=I/s,O=k*(t-e)+e;for(let z=0;z<=i;z++){const W=z/i,q=W*l+o,X=Math.sin(q),Q=Math.cos(q);R.x=O*X,R.y=-k*r+_,R.z=O*Q,h.push(R.x,R.y,R.z),A.set(X,M,Q).normalize(),f.push(A.x,A.y,A.z),g.push(W,1-k),C.push(m++)}v.push(C)}for(let I=0;I<i;I++)for(let C=0;C<s;C++){const k=v[C][I],O=v[C+1][I],z=v[C+1][I+1],W=v[C][I+1];(e>0||C!==0)&&(c.push(k,O,W),w+=3),(t>0||C!==s-1)&&(c.push(O,z,W),w+=3)}u.addGroup(b,w,0),b+=w}function E(A){const R=m,w=new $e,M=new Z;let I=0;const C=A===!0?e:t,k=A===!0?1:-1;for(let z=1;z<=i;z++)h.push(0,_*k,0),f.push(0,k,0),g.push(.5,.5),m++;const O=m;for(let z=0;z<=i;z++){const q=z/i*l+o,X=Math.cos(q),Q=Math.sin(q);M.x=C*Q,M.y=_*k,M.z=C*X,h.push(M.x,M.y,M.z),f.push(0,k,0),w.x=X*.5+.5,w.y=Q*.5*k+.5,g.push(w.x,w.y),m++}for(let z=0;z<i;z++){const W=R+z,q=O+z;A===!0?c.push(q,q+1,W):c.push(q+1,q,W),I+=3}u.addGroup(b,I,A===!0?1:2),b+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class J1 extends sm{constructor(e=1,t=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new J1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ho{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Ce("Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let a;t?a=t:a=e*r[s-1];let o=0,l=s-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-a,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const c=r[i],f=r[i+1]-c,g=(a-c)/f;return(i+g)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new $e:new Z);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new Z,i=[],s=[],a=[],o=new Z,l=new sn;for(let g=0;g<=e;g++){const m=g/e;i[g]=this.getTangentAt(m,new Z)}s[0]=new Z,a[0]=new Z;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),a[g]=a[g-1].clone(),o.crossVectors(i[g-1],i[g]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Zt(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(o,m))}a[g].crossVectors(i[g],s[g])}if(t===!0){let g=Math.acos(Zt(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(g=-g);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(i[m],g*m)),a[m].crossVectors(i[m],s[m])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class SV extends Ho{constructor(e=0,t=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new $e){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,g=u-this.aY;l=f*c-g*h+this.aX,u=f*h+g*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Cne extends SV{constructor(e,t,r,i,s,a){super(e,t,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function eI(){let n=0,e=0,t=0,r=0;function i(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){i(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,h){let f=(a-s)/u-(o-s)/(u+c)+(o-a)/c,g=(o-a)/c-(l-a)/(c+h)+(l-o)/h;f*=c,g*=c,i(a,o,f,g)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+r*o}}}const Ky=new Z,p0=new eI,f0=new eI,g0=new eI;class Mne extends Ho{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Z){const r=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=i[(o-1)%s]:(Ky.subVectors(i[0],i[1]).add(i[0]),u=Ky);const h=i[o%s],f=i[(o+1)%s];if(this.closed||o+2<s?c=i[(o+2)%s]:(Ky.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=Ky),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(h),g),v=Math.pow(h.distanceToSquared(f),g),_=Math.pow(f.distanceToSquared(c),g);v<1e-4&&(v=1),m<1e-4&&(m=v),_<1e-4&&(_=v),p0.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,m,v,_),f0.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,m,v,_),g0.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,m,v,_)}else this.curveType==="catmullrom"&&(p0.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),f0.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),g0.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(p0.calc(l),f0.calc(l),g0.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function xF(n,e,t,r,i){const s=(r-e)*.5,a=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+s+a)*l+(-3*t+3*r-2*s-a)*o+s*n+t}function Ine(n,e){const t=1-n;return t*t*e}function kne(n,e){return 2*(1-n)*n*e}function Lne(n,e){return n*n*e}function Uf(n,e,t,r){return Ine(n,e)+kne(n,t)+Lne(n,r)}function Dne(n,e){const t=1-n;return t*t*t*e}function One(n,e){const t=1-n;return 3*t*t*n*e}function Pne(n,e){return 3*(1-n)*n*n*e}function Fne(n,e){return n*n*n*e}function Bf(n,e,t,r,i){return Dne(n,e)+One(n,t)+Pne(n,r)+Fne(n,i)}class Une extends Ho{constructor(e=new $e,t=new $e,r=new $e,i=new $e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new $e){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Bf(e,i.x,s.x,a.x,o.x),Bf(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EV extends Ho{constructor(e=new Z,t=new Z,r=new Z,i=new Z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Z){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Bf(e,i.x,s.x,a.x,o.x),Bf(e,i.y,s.y,a.y,o.y),Bf(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bne extends Ho{constructor(e=new $e,t=new $e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new $e){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zne extends Ho{constructor(e=new Z,t=new Z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Z){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gne extends Ho{constructor(e=new $e,t=new $e,r=new $e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new $e){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(Uf(e,i.x,s.x,a.x),Uf(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tI extends Ho{constructor(e=new Z,t=new Z,r=new Z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Z){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(Uf(e,i.x,s.x,a.x),Uf(e,i.y,s.y,a.y),Uf(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vne extends Ho{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new $e){const r=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],u=i[a],c=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return r.set(xF(o,l.x,u.x,c.x,h.x),xF(o,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new $e().fromArray(i))}return this}}var $ne=Object.freeze({__proto__:null,ArcCurve:Cne,CatmullRomCurve3:Mne,CubicBezierCurve:Une,CubicBezierCurve3:EV,EllipseCurve:SV,LineCurve:Bne,LineCurve3:zne,QuadraticBezierCurve:Gne,QuadraticBezierCurve3:tI,SplineCurve:Vne});class am extends jr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,h=e/o,f=t/l,g=[],m=[],v=[],_=[];for(let b=0;b<c;b++){const S=b*f-a;for(let E=0;E<u;E++){const A=E*h-s;m.push(A,-S,0),v.push(0,0,1),_.push(E/o),_.push(1-b/l)}}for(let b=0;b<l;b++)for(let S=0;S<o;S++){const E=S+u*b,A=S+u*(b+1),R=S+1+u*(b+1),w=S+1+u*b;g.push(E,A,w),g.push(A,R,w)}this.setIndex(g),this.setAttribute("position",new ur(m,3)),this.setAttribute("normal",new ur(v,3)),this.setAttribute("uv",new ur(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.width,e.height,e.widthSegments,e.heightSegments)}}class om extends jr{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let u=0;const c=[],h=new Z,f=new Z,g=[],m=[],v=[],_=[];for(let b=0;b<=r;b++){const S=[],E=b/r;let A=0;b===0&&a===0?A=.5/t:b===r&&l===Math.PI&&(A=-.5/t);for(let R=0;R<=t;R++){const w=R/t;h.x=-e*Math.cos(i+w*s)*Math.sin(a+E*o),h.y=e*Math.cos(a+E*o),h.z=e*Math.sin(i+w*s)*Math.sin(a+E*o),m.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),_.push(w+A,1-E),S.push(u++)}c.push(S)}for(let b=0;b<r;b++)for(let S=0;S<t;S++){const E=c[b][S+1],A=c[b][S],R=c[b+1][S],w=c[b+1][S+1];(b!==0||a>0)&&g.push(E,A,w),(b!==r-1||l<Math.PI)&&g.push(A,R,w)}this.setIndex(g),this.setAttribute("position",new ur(m,3)),this.setAttribute("normal",new ur(v,3)),this.setAttribute("uv",new ur(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new om(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class nI extends jr{constructor(e=new tI(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Z,l=new Z,u=new $e;let c=new Z;const h=[],f=[],g=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new ur(h,3)),this.setAttribute("normal",new ur(f,3)),this.setAttribute("uv",new ur(g,2));function v(){for(let E=0;E<t;E++)_(E);_(s===!1?t:0),S(),b()}function _(E){c=e.getPointAt(E/t,c);const A=a.normals[E],R=a.binormals[E];for(let w=0;w<=i;w++){const M=w/i*Math.PI*2,I=Math.sin(M),C=-Math.cos(M);l.x=C*A.x+I*R.x,l.y=C*A.y+I*R.y,l.z=C*A.z+I*R.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=c.x+r*l.x,o.y=c.y+r*l.y,o.z=c.z+r*l.z,h.push(o.x,o.y,o.z)}}function b(){for(let E=1;E<=t;E++)for(let A=1;A<=i;A++){const R=(i+1)*(E-1)+(A-1),w=(i+1)*E+(A-1),M=(i+1)*E+A,I=(i+1)*(E-1)+A;m.push(R,w,I),m.push(w,M,I)}}function S(){for(let E=0;E<=t;E++)for(let A=0;A<=i;A++)u.x=E/t,u.y=A/i,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new nI(new $ne[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Hne extends mi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class jne extends Hs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class TV extends mi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wne extends TV{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Zt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qne extends mi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=Kg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xne extends mi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Yne extends mi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wV extends mi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new is,this.combine=Kg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Kne extends mi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ste,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Zne extends mi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Qne extends mi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jne extends iv{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const m0={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ere{constructor(e,t,r){const i=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this._abortController=null,this.itemStart=function(c){o++,s===!1&&i.onStart!==void 0&&i.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,i.onProgress!==void 0&&i.onProgress(c,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const g=u[h],m=u[h+1];if(g.global&&(g.lastIndex=0),g.test(c))return m}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const tre=new ere;class rI{constructor(e){this.manager=e!==void 0?e:tre,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}rI.DEFAULT_MATERIAL_NAME="__DEFAULT";const td=new WeakMap;class nre extends rI{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=m0.get(`image:${e}`);if(a!==void 0){if(a.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0);else{let h=td.get(a);h===void 0&&(h=[],td.set(a,h)),h.push({onLoad:t,onError:i})}return a}const o=Tg("img");function l(){c(),t&&t(this);const h=td.get(this)||[];for(let f=0;f<h.length;f++){const g=h[f];g.onLoad&&g.onLoad(this)}td.delete(this),s.manager.itemEnd(e)}function u(h){c(),i&&i(h),m0.remove(`image:${e}`);const f=td.get(this)||[];for(let g=0;g<f.length;g++){const m=f[g];m.onError&&m.onError(h)}td.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),m0.add(`image:${e}`,o),s.manager.itemStart(e),o.src=e,o}}class rre extends rI{constructor(e){super(e)}load(e,t,r,i){const s=new Er,a=new nre(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class gc extends Tr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class ire extends gc{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const y0=new sn,SF=new Z,EF=new Z;class iI{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.mapType=qn,this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new im,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;SF.setFromMatrixPosition(e.matrixWorld),t.position.copy(SF),EF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(EF),t.updateMatrixWorld(),y0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(y0,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(y0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sre extends iI{constructor(){super(new $r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=nc*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sI extends gc{constructor(e,t,r=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new sre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class are extends iI{constructor(){super(new $r(90,1,.5,500)),this.isPointLightShadow=!0}}class ore extends gc{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new are}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class $h extends X1{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class lre extends iI{constructor(){super(new $h(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class AV extends gc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.shadow=new lre}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class RV extends gc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ure extends gc{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class cre{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],1.092548*(r*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(r*s)),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*r),t.addScaledVector(a[4],2*.429043*r*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*r*s),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class dre extends gc{constructor(e=new cre,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class NV extends $r{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class CV{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}class hre extends bV{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const TF=new sn;class MV{constructor(e,t,r=0,i=1/0){this.ray=new nv(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new j1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Ie("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return TF.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TF),this}intersectObject(e,t=!0,r=[]){return MT(e,this,r,t),r.sort(wF),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)MT(e[i],this,r,t);return r.sort(wF),r}}function wF(n,e){return n.distance-e.distance}function MT(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)MT(s[a],e,t,!0)}}class AF{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Zt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Zt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class sv{constructor(e,t,r,i){sv.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}class av extends ro{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Ce("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function IT(n,e,t,r){const i=pre(r);switch(t){case O1:return n*e;case Qg:return n*e/i.components*i.byteLength;case zh:return n*e/i.components*i.byteLength;case Di:return n*e*2/i.components*i.byteLength;case Gh:return n*e*2/i.components*i.byteLength;case Zg:return n*e*3/i.components*i.byteLength;case pr:return n*e*4/i.components*i.byteLength;case Vh:return n*e*4/i.components*i.byteLength;case Ll:case Dl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ol:case Pl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case xg:case Eg:return Math.max(n,16)*Math.max(e,8)/4;case vg:case Sg:return Math.max(n,8)*Math.max(e,8)/2;case Wd:case qd:case Yd:case Kd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Xd:case Ju:case Zd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Qd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jd:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case eh:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case th:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case nh:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case rh:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case ih:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case sh:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ah:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case oh:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case lh:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case uh:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ch:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case dh:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case hh:case RT:case NT:return Math.ceil(n/4)*Math.ceil(e/4)*16;case ph:case fh:return Math.ceil(n/4)*Math.ceil(e/4)*8;case ec:case gh:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function pre(n){switch(n){case qn:case $u:return{byteLength:1,components:1};case pa:case Hu:case tr:return{byteLength:2,components:1};case Q_:case J_:return{byteLength:2,components:4};case An:case Vr:case hr:return{byteLength:4,components:1};case ev:case tv:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dc}}));typeof window<"u"&&(window.__THREE__?Ce("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dc);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function IV(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function fre(n){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,h=u.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,u,c),o.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)g=n.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:h}}function r(o,l,u){const c=l.array,h=l.updateRanges;if(n.bindBuffer(u,o),h.length===0)n.bufferSubData(u,0,c);else{h.sort((g,m)=>g.start-m.start);let f=0;for(let g=1;g<h.length;g++){const m=h[f],v=h[g];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++f,h[f]=v)}h.length=f+1;for(let g=0,m=h.length;g<m;g++){const v=h[g];n.bufferSubData(u,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:s,update:a}}var gre=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,mre=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yre=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bre=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_re=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,vre=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xre=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Sre=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ere=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Tre=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,wre=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Are=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Rre=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Nre=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Cre=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Mre=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Ire=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Lre=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Dre=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ore=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Pre=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Fre=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Ure=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Bre=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zre=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gre=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vre=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$re=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Hre=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jre="gl_FragColor = linearToOutputTexel( gl_FragColor );",Wre=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Xre=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,Yre=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Kre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Zre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Qre=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Jre=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,eie=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,tie=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,nie=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rie=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,iie=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,sie=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,aie=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oie=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,uie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,die=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,hie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,pie=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fie=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,yie=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bie=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_ie=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vie=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Sie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Eie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Aie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Rie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Nie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Mie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Iie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Lie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Die=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Oie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Pie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Fie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Uie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Bie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,zie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gie=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Vie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$ie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Hie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Wie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Xie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Kie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Zie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Qie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Jie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ese=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,tse=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nse=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rse=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ise=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,sse=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ase=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ose=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lse=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,use=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,cse=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,dse=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hse=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pse=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fse=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gse=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mse=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yse=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bse=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_se=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vse=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xse=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Sse=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ese=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,Tse=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wse=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ase=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rse=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Nse=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Cse=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mse=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ise=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kse=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Lse=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dse=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ose=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Pse=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Fse=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Use=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Bse=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zse=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gse=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vse=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$se=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hse=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jse=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wse=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qse=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:gre,alphahash_pars_fragment:mre,alphamap_fragment:yre,alphamap_pars_fragment:bre,alphatest_fragment:_re,alphatest_pars_fragment:vre,aomap_fragment:xre,aomap_pars_fragment:Sre,batching_pars_vertex:Ere,batching_vertex:Tre,begin_vertex:wre,beginnormal_vertex:Are,bsdfs:Rre,iridescence_fragment:Nre,bumpmap_pars_fragment:Cre,clipping_planes_fragment:Mre,clipping_planes_pars_fragment:Ire,clipping_planes_pars_vertex:kre,clipping_planes_vertex:Lre,color_fragment:Dre,color_pars_fragment:Ore,color_pars_vertex:Pre,color_vertex:Fre,common:Ure,cube_uv_reflection_fragment:Bre,defaultnormal_vertex:zre,displacementmap_pars_vertex:Gre,displacementmap_vertex:Vre,emissivemap_fragment:$re,emissivemap_pars_fragment:Hre,colorspace_fragment:jre,colorspace_pars_fragment:Wre,envmap_fragment:qre,envmap_common_pars_fragment:Xre,envmap_pars_fragment:Yre,envmap_pars_vertex:Kre,envmap_physical_pars_fragment:oie,envmap_vertex:Zre,fog_vertex:Qre,fog_pars_vertex:Jre,fog_fragment:eie,fog_pars_fragment:tie,gradientmap_pars_fragment:nie,lightmap_pars_fragment:rie,lights_lambert_fragment:iie,lights_lambert_pars_fragment:sie,lights_pars_begin:aie,lights_toon_fragment:lie,lights_toon_pars_fragment:uie,lights_phong_fragment:cie,lights_phong_pars_fragment:die,lights_physical_fragment:hie,lights_physical_pars_fragment:pie,lights_fragment_begin:fie,lights_fragment_maps:gie,lights_fragment_end:mie,logdepthbuf_fragment:yie,logdepthbuf_pars_fragment:bie,logdepthbuf_pars_vertex:_ie,logdepthbuf_vertex:vie,map_fragment:xie,map_pars_fragment:Sie,map_particle_fragment:Eie,map_particle_pars_fragment:Tie,metalnessmap_fragment:wie,metalnessmap_pars_fragment:Aie,morphinstance_vertex:Rie,morphcolor_vertex:Nie,morphnormal_vertex:Cie,morphtarget_pars_vertex:Mie,morphtarget_vertex:Iie,normal_fragment_begin:kie,normal_fragment_maps:Lie,normal_pars_fragment:Die,normal_pars_vertex:Oie,normal_vertex:Pie,normalmap_pars_fragment:Fie,clearcoat_normal_fragment_begin:Uie,clearcoat_normal_fragment_maps:Bie,clearcoat_pars_fragment:zie,iridescence_pars_fragment:Gie,opaque_fragment:Vie,packing:$ie,premultiplied_alpha_fragment:Hie,project_vertex:jie,dithering_fragment:Wie,dithering_pars_fragment:qie,roughnessmap_fragment:Xie,roughnessmap_pars_fragment:Yie,shadowmap_pars_fragment:Kie,shadowmap_pars_vertex:Zie,shadowmap_vertex:Qie,shadowmask_pars_fragment:Jie,skinbase_vertex:ese,skinning_pars_vertex:tse,skinning_vertex:nse,skinnormal_vertex:rse,specularmap_fragment:ise,specularmap_pars_fragment:sse,tonemapping_fragment:ase,tonemapping_pars_fragment:ose,transmission_fragment:lse,transmission_pars_fragment:use,uv_pars_fragment:cse,uv_pars_vertex:dse,uv_vertex:hse,worldpos_vertex:pse,background_vert:fse,background_frag:gse,backgroundCube_vert:mse,backgroundCube_frag:yse,cube_vert:bse,cube_frag:_se,depth_vert:vse,depth_frag:xse,distance_vert:Sse,distance_frag:Ese,equirect_vert:Tse,equirect_frag:wse,linedashed_vert:Ase,linedashed_frag:Rse,meshbasic_vert:Nse,meshbasic_frag:Cse,meshlambert_vert:Mse,meshlambert_frag:Ise,meshmatcap_vert:kse,meshmatcap_frag:Lse,meshnormal_vert:Dse,meshnormal_frag:Ose,meshphong_vert:Pse,meshphong_frag:Fse,meshphysical_vert:Use,meshphysical_frag:Bse,meshtoon_vert:zse,meshtoon_frag:Gse,points_vert:Vse,points_frag:$se,shadow_vert:Hse,shadow_frag:jse,sprite_vert:Wse,sprite_frag:qse},ot={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},Pa={basic:{uniforms:Ri([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:Ri([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Et(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:Ri([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:Ri([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:Ri([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Et(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:Ri([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:Ri([ot.points,ot.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:Ri([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:Ri([ot.common,ot.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:Ri([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:Ri([ot.sprite,ot.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distance:{uniforms:Ri([ot.common,ot.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distance_vert,fragmentShader:tn.distance_frag},shadow:{uniforms:Ri([ot.lights,ot.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Pa.physical={uniforms:Ri([Pa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new $e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new $e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const Zy={r:0,b:0,g:0},_u=new is,Xse=new sn;function Yse(n,e,t,r,i,s,a){const o=new Et(0);let l=s===!0?0:1,u,c,h=null,f=0,g=null;function m(E){let A=E.isScene===!0?E.background:null;return A&&A.isTexture&&(A=(E.backgroundBlurriness>0?t:e).get(A)),A}function v(E){let A=!1;const R=m(E);R===null?b(o,l):R&&R.isColor&&(b(R,1),A=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?r.buffers.color.setClear(0,0,0,1,a):w==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(E,A){const R=m(A);R&&(R.isCubeTexture||R.mapping===Ku)?(c===void 0&&(c=new wr(new fc(1,1,1),new Hs({name:"BackgroundCubeMaterial",uniforms:bh(Pa.backgroundCube.uniforms),vertexShader:Pa.backgroundCube.vertexShader,fragmentShader:Pa.backgroundCube.fragmentShader,side:On,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,M,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),_u.copy(A.backgroundRotation),_u.x*=-1,_u.y*=-1,_u.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(_u.y*=-1,_u.z*=-1),c.material.uniforms.envMap.value=R,c.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Xse.makeRotationFromEuler(_u)),c.material.toneMapped=Nt.getTransfer(R.colorSpace)!==lt,(h!==R||f!==R.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,h=R,f=R.version,g=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null)):R&&R.isTexture&&(u===void 0&&(u=new wr(new am(2,2),new Hs({name:"BackgroundMaterial",uniforms:bh(Pa.background.uniforms),vertexShader:Pa.background.vertexShader,fragmentShader:Pa.background.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=R,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=Nt.getTransfer(R.colorSpace)!==lt,R.matrixAutoUpdate===!0&&R.updateMatrix(),u.material.uniforms.uvTransform.value.copy(R.matrix),(h!==R||f!==R.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,h=R,f=R.version,g=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function b(E,A){E.getRGB(Zy,gV(n)),r.buffers.color.setClear(Zy.r,Zy.g,Zy.b,A,a)}function S(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,A=1){o.set(E),l=A,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,b(o,l)},render:v,addToRenderList:_,dispose:S}}function Kse(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,a=!1;function o(k,O,z,W,q){let X=!1;const Q=h(W,z,O);s!==Q&&(s=Q,u(s.object)),X=g(k,W,z,q),X&&m(k,W,z,q),q!==null&&e.update(q,n.ELEMENT_ARRAY_BUFFER),(X||a)&&(a=!1,A(k,O,z,W),q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return n.createVertexArray()}function u(k){return n.bindVertexArray(k)}function c(k){return n.deleteVertexArray(k)}function h(k,O,z){const W=z.wireframe===!0;let q=r[k.id];q===void 0&&(q={},r[k.id]=q);let X=q[O.id];X===void 0&&(X={},q[O.id]=X);let Q=X[W];return Q===void 0&&(Q=f(l()),X[W]=Q),Q}function f(k){const O=[],z=[],W=[];for(let q=0;q<t;q++)O[q]=0,z[q]=0,W[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:z,attributeDivisors:W,object:k,attributes:{},index:null}}function g(k,O,z,W){const q=s.attributes,X=O.attributes;let Q=0;const H=z.getAttributes();for(const G in H)if(H[G].location>=0){const D=q[G];let U=X[G];if(U===void 0&&(G==="instanceMatrix"&&k.instanceMatrix&&(U=k.instanceMatrix),G==="instanceColor"&&k.instanceColor&&(U=k.instanceColor)),D===void 0||D.attribute!==U||U&&D.data!==U.data)return!0;Q++}return s.attributesNum!==Q||s.index!==W}function m(k,O,z,W){const q={},X=O.attributes;let Q=0;const H=z.getAttributes();for(const G in H)if(H[G].location>=0){let D=X[G];D===void 0&&(G==="instanceMatrix"&&k.instanceMatrix&&(D=k.instanceMatrix),G==="instanceColor"&&k.instanceColor&&(D=k.instanceColor));const U={};U.attribute=D,D&&D.data&&(U.data=D.data),q[G]=U,Q++}s.attributes=q,s.attributesNum=Q,s.index=W}function v(){const k=s.newAttributes;for(let O=0,z=k.length;O<z;O++)k[O]=0}function _(k){b(k,0)}function b(k,O){const z=s.newAttributes,W=s.enabledAttributes,q=s.attributeDivisors;z[k]=1,W[k]===0&&(n.enableVertexAttribArray(k),W[k]=1),q[k]!==O&&(n.vertexAttribDivisor(k,O),q[k]=O)}function S(){const k=s.newAttributes,O=s.enabledAttributes;for(let z=0,W=O.length;z<W;z++)O[z]!==k[z]&&(n.disableVertexAttribArray(z),O[z]=0)}function E(k,O,z,W,q,X,Q){Q===!0?n.vertexAttribIPointer(k,O,z,q,X):n.vertexAttribPointer(k,O,z,W,q,X)}function A(k,O,z,W){v();const q=W.attributes,X=z.getAttributes(),Q=O.defaultAttributeValues;for(const H in X){const G=X[H];if(G.location>=0){let re=q[H];if(re===void 0&&(H==="instanceMatrix"&&k.instanceMatrix&&(re=k.instanceMatrix),H==="instanceColor"&&k.instanceColor&&(re=k.instanceColor)),re!==void 0){const D=re.normalized,U=re.itemSize,ne=e.get(re);if(ne===void 0)continue;const B=ne.buffer,Oe=ne.type,Y=ne.bytesPerElement,V=Oe===n.INT||Oe===n.UNSIGNED_INT||re.gpuType===Vr;if(re.isInterleavedBufferAttribute){const ae=re.data,_e=ae.stride,Pe=re.offset;if(ae.isInstancedInterleavedBuffer){for(let De=0;De<G.locationSize;De++)b(G.location+De,ae.meshPerAttribute);k.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let De=0;De<G.locationSize;De++)_(G.location+De);n.bindBuffer(n.ARRAY_BUFFER,B);for(let De=0;De<G.locationSize;De++)E(G.location+De,U/G.locationSize,Oe,D,_e*Y,(Pe+U/G.locationSize*De)*Y,V)}else{if(re.isInstancedBufferAttribute){for(let ae=0;ae<G.locationSize;ae++)b(G.location+ae,re.meshPerAttribute);k.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let ae=0;ae<G.locationSize;ae++)_(G.location+ae);n.bindBuffer(n.ARRAY_BUFFER,B);for(let ae=0;ae<G.locationSize;ae++)E(G.location+ae,U/G.locationSize,Oe,D,U*Y,U/G.locationSize*ae*Y,V)}}else if(Q!==void 0){const D=Q[H];if(D!==void 0)switch(D.length){case 2:n.vertexAttrib2fv(G.location,D);break;case 3:n.vertexAttrib3fv(G.location,D);break;case 4:n.vertexAttrib4fv(G.location,D);break;default:n.vertexAttrib1fv(G.location,D)}}}}S()}function R(){I();for(const k in r){const O=r[k];for(const z in O){const W=O[z];for(const q in W)c(W[q].object),delete W[q];delete O[z]}delete r[k]}}function w(k){if(r[k.id]===void 0)return;const O=r[k.id];for(const z in O){const W=O[z];for(const q in W)c(W[q].object),delete W[q];delete O[z]}delete r[k.id]}function M(k){for(const O in r){const z=r[O];if(z[k.id]===void 0)continue;const W=z[k.id];for(const q in W)c(W[q].object),delete W[q];delete z[k.id]}}function I(){C(),a=!0,s!==i&&(s=i,u(s.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:I,resetDefaultState:C,dispose:R,releaseStatesOfGeometry:w,releaseStatesOfProgram:M,initAttributes:v,enableAttribute:_,disableUnusedAttributes:S}}function Zse(n,e,t){let r;function i(u){r=u}function s(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function a(u,c,h){h!==0&&(n.drawArraysInstanced(r,u,c,h),t.update(c,r,h))}function o(u,c,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,h);let g=0;for(let m=0;m<h;m++)g+=c[m];t.update(g,r,1)}function l(u,c,h,f){if(h===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<u.length;m++)a(u[m],c[m],f[m]);else{g.multiDrawArraysInstancedWEBGL(r,u,0,c,0,f,0,h);let m=0;for(let v=0;v<h;v++)m+=c[v]*f[v];t.update(m,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Qse(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(M){return!(M!==pr&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(M){const I=M===tr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==qn&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==hr&&!I)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(Ce("WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const h=t.logarithmicDepthBuffer===!0,f=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=n.getParameter(n.MAX_SAMPLES),w=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:h,reversedDepthBuffer:f,maxTextures:g,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:A,maxSamples:R,samples:w}}function Jse(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new ua,o=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const g=h.length!==0||f||r!==0||i;return i=f,r=h.length,g},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=c(h,f,0)},this.setState=function(h,f,g){const m=h.clippingPlanes,v=h.clipIntersection,_=h.clipShadows,b=n.get(h);if(!i||m===null||m.length===0||s&&!_)s?c(null):u();else{const S=s?0:r,E=S*4;let A=b.clippingState||null;l.value=A,A=c(m,f,E,g);for(let R=0;R!==E;++R)A[R]=t[R];b.clippingState=A,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,f,g,m){const v=h!==null?h.length:0;let _=null;if(v!==0){if(_=l.value,m!==!0||_===null){const b=g+v*4,S=f.matrixWorldInverse;o.getNormalMatrix(S),(_===null||_.length<b)&&(_=new Float32Array(b));for(let E=0,A=g;E!==v;++E,A+=4)a.copy(h[E]).applyMatrix4(S,o),a.normal.toArray(_,A),_[A+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function eae(n){let e=new WeakMap;function t(a,o){return o===Hd?a.mapping=ya:o===jd&&(a.mapping=Ka),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===Hd||o===jd)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new Y1(l.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",i),t(u.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Ml=4,RF=[.125,.215,.35,.446,.526,.582],Cu=20,tae=256,qp=new $h,NF=new Et;let b0=null,_0=0,v0=0,x0=!1;const nae=new Z;let CF=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,r=.1,i=100,s={}){const{size:a=256,position:o=nae}=s;b0=this._renderer.getRenderTarget(),_0=this._renderer.getActiveCubeFace(),v0=this._renderer.getActiveMipmapLevel(),x0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=kF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=IF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(b0,_0,v0),this._renderer.xr.enabled=x0,e.scissorTest=!1,nd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ya||e.mapping===Ka?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),b0=this._renderer.getRenderTarget(),_0=this._renderer.getActiveCubeFace(),v0=this._renderer.getActiveMipmapLevel(),x0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Vn,minFilter:Vn,generateMipmaps:!1,type:tr,format:pr,colorSpace:tc,depthBuffer:!1},i=MF(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=MF(e,t,r);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=rae(s)),this._blurMaterial=sae(s,e,t),this._ggxMaterial=iae(s,e,t)}return i}_compileMaterial(e){const t=new wr(new jr,e);this._renderer.compile(t,qp)}_sceneToCubeUV(e,t,r,i,s){const l=new $r(90,1,t,r),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,g=h.toneMapping;h.getClearColor(NF),h.toneMapping=Qr,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(i),h.clearDepth(),h.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new wr(new fc,new za({name:"PMREM.Background",side:On,depthWrite:!1,depthTest:!1})));const v=this._backgroundBox,_=v.material;let b=!1;const S=e.background;S?S.isColor&&(_.color.copy(S),e.background=null,b=!0):(_.color.copy(NF),b=!0);for(let E=0;E<6;E++){const A=E%3;A===0?(l.up.set(0,u[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+c[E],s.y,s.z)):A===1?(l.up.set(0,0,u[E]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+c[E],s.z)):(l.up.set(0,u[E],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+c[E]));const R=this._cubeSize;nd(i,A*R,E>2?R:0,R,R),h.setRenderTarget(i),b&&h.render(v,l),h.render(e,l)}h.toneMapping=g,h.autoClear=f,e.background=S}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ya||e.mapping===Ka;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=kF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=IF());const s=i?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=s;const o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;nd(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,qp)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=r}_applyGGXFilter(e,t,r){const i=this._renderer,s=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[r];o.material=a;const l=a.uniforms,u=r/(this._lodMeshes.length-1),c=t/(this._lodMeshes.length-1),h=Math.sqrt(u*u-c*c),f=0+u*1.25,g=h*f,{_lodMax:m}=this,v=this._sizeLods[r],_=3*v*(r>m-Ml?r-m+Ml:0),b=4*(this._cubeSize-v);l.envMap.value=e.texture,l.roughness.value=g,l.mipInt.value=m-t,nd(s,_,b,3*v,2*v),i.setRenderTarget(s),i.render(o,qp),l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=m-r,nd(e,_,b,3*v,2*v),i.setRenderTarget(e),i.render(o,qp)}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&Ie("blur direction must be either latitudinal or longitudinal!");const c=3,h=this._lodMeshes[i];h.material=u;const f=u.uniforms,g=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Cu-1),v=s/m,_=isFinite(s)?1+Math.floor(c*v):Cu;_>Cu&&Ce(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Cu}`);const b=[];let S=0;for(let M=0;M<Cu;++M){const I=M/v,C=Math.exp(-I*I/2);b.push(C),M===0?S+=C:M<_&&(S+=2*C)}for(let M=0;M<b.length;M++)b[M]=b[M]/S;f.envMap.value=e.texture,f.samples.value=_,f.weights.value=b,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:E}=this;f.dTheta.value=m,f.mipInt.value=E-r;const A=this._sizeLods[i],R=3*A*(i>E-Ml?i-E+Ml:0),w=4*(this._cubeSize-A);nd(t,R,w,3*A,2*A),l.setRenderTarget(t),l.render(h,qp)}};function rae(n){const e=[],t=[],r=[];let i=n;const s=n-Ml+1+RF.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);e.push(o);let l=1/o;a>n-Ml?l=RF[a-n+Ml-1]:a===0&&(l=0),t.push(l);const u=1/(o-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],g=6,m=6,v=3,_=2,b=1,S=new Float32Array(v*m*g),E=new Float32Array(_*m*g),A=new Float32Array(b*m*g);for(let w=0;w<g;w++){const M=w%3*2/3-1,I=w>2?0:-1,C=[M,I,0,M+2/3,I,0,M+2/3,I+1,0,M,I,0,M+2/3,I+1,0,M,I+1,0];S.set(C,v*m*w),E.set(f,_*m*w);const k=[w,w,w,w,w,w];A.set(k,b*m*w)}const R=new jr;R.setAttribute("position",new ei(S,v)),R.setAttribute("uv",new ei(E,_)),R.setAttribute("faceIndex",new ei(A,b)),r.push(new wr(R,null)),i>Ml&&i--}return{lodMeshes:r,sizeLods:e,sigmas:t}}function MF(n,e,t){const r=new ga(n,e,t);return r.texture.mapping=Ku,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function nd(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function iae(n,e,t){return new Hs({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:tae,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:ov(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function sae(n,e,t){const r=new Float32Array(Cu),i=new Z(0,1,0);return new Hs({name:"SphericalGaussianBlur",defines:{n:Cu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ov(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function IF(){return new Hs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ov(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function kF(){return new Hs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ov(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function ov(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aae(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===Hd||l===jd,c=l===ya||l===Ka;if(u||c){let h=e.get(o);const f=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new CF(n)),h=u?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const g=o.image;return u&&g&&g.height>0||c&&g&&i(g)?(t===null&&(t=new CF(n)),h=u?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function oae(n){const e={};function t(r){if(e[r]!==void 0)return e[r];const i=n.getExtension(r);return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&jn("WebGLRenderer: "+r+" extension not supported."),i}}}function lae(n,e,t,r){const i={},s=new WeakMap;function a(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);f.removeEventListener("dispose",a),delete i[f.id];const g=s.get(f);g&&(e.remove(g),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(h,f){return i[f.id]===!0||(f.addEventListener("dispose",a),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const g in f)e.update(f[g],n.ARRAY_BUFFER)}function u(h){const f=[],g=h.index,m=h.attributes.position;let v=0;if(g!==null){const S=g.array;v=g.version;for(let E=0,A=S.length;E<A;E+=3){const R=S[E+0],w=S[E+1],M=S[E+2];f.push(R,w,w,M,M,R)}}else if(m!==void 0){const S=m.array;v=m.version;for(let E=0,A=S.length/3-1;E<A;E+=3){const R=E+0,w=E+1,M=E+2;f.push(R,w,w,M,M,R)}}else return;const _=new(G1(f)?q1:W1)(f,1);_.version=v;const b=s.get(h);b&&e.remove(b),s.set(h,_)}function c(h){const f=s.get(h);if(f){const g=h.index;g!==null&&f.version<g.version&&u(h)}else u(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:c}}function uae(n,e,t){let r;function i(f){r=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,g){n.drawElements(r,g,s,f*a),t.update(g,r,1)}function u(f,g,m){m!==0&&(n.drawElementsInstanced(r,g,s,f*a,m),t.update(g,r,m))}function c(f,g,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,g,0,s,f,0,m);let _=0;for(let b=0;b<m;b++)_+=g[b];t.update(_,r,1)}function h(f,g,m,v){if(m===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<f.length;b++)u(f[b]/a,g[b],v[b]);else{_.multiDrawElementsInstancedWEBGL(r,g,0,s,f,0,v,0,m);let b=0;for(let S=0;S<m;S++)b+=g[S]*v[S];t.update(b,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function cae(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:Ie("WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function dae(n,e,t){const r=new WeakMap,i=new Wt;function s(a,o,l){const u=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=c!==void 0?c.length:0;let f=r.get(o);if(f===void 0||f.count!==h){let C=function(){M.dispose(),r.delete(o),o.removeEventListener("dispose",C)};f!==void 0&&f.texture.dispose();const g=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],b=o.morphAttributes.normal||[],S=o.morphAttributes.color||[];let E=0;g===!0&&(E=1),m===!0&&(E=2),v===!0&&(E=3);let A=o.attributes.position.count*E,R=1;A>e.maxTextureSize&&(R=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const w=new Float32Array(A*R*4*h),M=new H1(w,A,R,h);M.type=hr,M.needsUpdate=!0;const I=E*4;for(let k=0;k<h;k++){const O=_[k],z=b[k],W=S[k],q=A*R*4*k;for(let X=0;X<O.count;X++){const Q=X*I;g===!0&&(i.fromBufferAttribute(O,X),w[q+Q+0]=i.x,w[q+Q+1]=i.y,w[q+Q+2]=i.z,w[q+Q+3]=0),m===!0&&(i.fromBufferAttribute(z,X),w[q+Q+4]=i.x,w[q+Q+5]=i.y,w[q+Q+6]=i.z,w[q+Q+7]=0),v===!0&&(i.fromBufferAttribute(W,X),w[q+Q+8]=i.x,w[q+Q+9]=i.y,w[q+Q+10]=i.z,w[q+Q+11]=W.itemSize===4?i.w:1)}}f={count:h,texture:M,size:new $e(A,R)},r.set(o,f),o.addEventListener("dispose",C)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let g=0;for(let v=0;v<u.length;v++)g+=u[v];const m=o.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function hae(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function a(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const pae={[R1]:"LINEAR_TONE_MAPPING",[N1]:"REINHARD_TONE_MAPPING",[C1]:"CINEON_TONE_MAPPING",[M1]:"ACES_FILMIC_TONE_MAPPING",[I1]:"AGX_TONE_MAPPING",[k1]:"NEUTRAL_TONE_MAPPING",[uV]:"CUSTOM_TONE_MAPPING"};function fae(n,e,t,r,i){const s=new ga(e,t,{type:n,depthBuffer:r,stencilBuffer:i}),a=new ga(e,t,{type:tr,depthBuffer:!1,stencilBuffer:!1}),o=new jr;o.setAttribute("position",new ur([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new ur([0,2,0,0,2,0],2));const l=new jne({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),u=new wr(o,l),c=new $h(-1,1,1,-1,0,1);let h=null,f=null,g=!1,m,v=null,_=[],b=!1;this.setSize=function(S,E){s.setSize(S,E),a.setSize(S,E);for(let A=0;A<_.length;A++){const R=_[A];R.setSize&&R.setSize(S,E)}},this.setEffects=function(S){_=S,b=_.length>0&&_[0].isRenderPass===!0;const E=s.width,A=s.height;for(let R=0;R<_.length;R++){const w=_[R];w.setSize&&w.setSize(E,A)}},this.begin=function(S,E){if(g||S.toneMapping===Qr&&_.length===0)return!1;if(v=E,E!==null){const A=E.width,R=E.height;(s.width!==A||s.height!==R)&&this.setSize(A,R)}return b===!1&&S.setRenderTarget(s),m=S.toneMapping,S.toneMapping=Qr,!0},this.hasRenderPass=function(){return b},this.end=function(S,E){S.toneMapping=m,g=!0;let A=s,R=a;for(let w=0;w<_.length;w++){const M=_[w];if(M.enabled!==!1&&(M.render(S,R,A,E),M.needsSwap!==!1)){const I=A;A=R,R=I}}if(h!==S.outputColorSpace||f!==S.toneMapping){h=S.outputColorSpace,f=S.toneMapping,l.defines={},Nt.getTransfer(h)===lt&&(l.defines.SRGB_TRANSFER="");const w=pae[f];w&&(l.defines[w]=""),l.needsUpdate=!0}l.uniforms.tDiffuse.value=A.texture,S.setRenderTarget(v),S.render(u,c),v=null,g=!1},this.isCompositing=function(){return g},this.dispose=function(){s.dispose(),a.dispose(),o.dispose(),l.dispose()}}const kV=new Er,kT=new Fi(1,1),LV=new H1,DV=new sne,OV=new rm,LF=[],DF=[],OF=new Float32Array(16),PF=new Float32Array(9),FF=new Float32Array(4);function Hh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=LF[i];if(s===void 0&&(s=new Float32Array(i),LF[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Lr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Dr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function lv(n,e){let t=DF[e];t===void 0&&(t=new Int32Array(e),DF[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function gae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2fv(this.addr,e),Dr(t,e)}}function yae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Lr(t,e))return;n.uniform3fv(this.addr,e),Dr(t,e)}}function bae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4fv(this.addr,e),Dr(t,e)}}function _ae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Lr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Dr(t,e)}else{if(Lr(t,r))return;FF.set(r),n.uniformMatrix2fv(this.addr,!1,FF),Dr(t,r)}}function vae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Lr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Dr(t,e)}else{if(Lr(t,r))return;PF.set(r),n.uniformMatrix3fv(this.addr,!1,PF),Dr(t,r)}}function xae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Lr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Dr(t,e)}else{if(Lr(t,r))return;OF.set(r),n.uniformMatrix4fv(this.addr,!1,OF),Dr(t,r)}}function Sae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Eae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2iv(this.addr,e),Dr(t,e)}}function Tae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Lr(t,e))return;n.uniform3iv(this.addr,e),Dr(t,e)}}function wae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4iv(this.addr,e),Dr(t,e)}}function Aae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Rae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Lr(t,e))return;n.uniform2uiv(this.addr,e),Dr(t,e)}}function Nae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Lr(t,e))return;n.uniform3uiv(this.addr,e),Dr(t,e)}}function Cae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Lr(t,e))return;n.uniform4uiv(this.addr,e),Dr(t,e)}}function Mae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(kT.compareFunction=t.isReversedDepthBuffer()?tm:em,s=kT):s=kV,t.setTexture2D(e||s,i)}function Iae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||DV,i)}function kae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||OV,i)}function Lae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||LV,i)}function Dae(n){switch(n){case 5126:return gae;case 35664:return mae;case 35665:return yae;case 35666:return bae;case 35674:return _ae;case 35675:return vae;case 35676:return xae;case 5124:case 35670:return Sae;case 35667:case 35671:return Eae;case 35668:case 35672:return Tae;case 35669:case 35673:return wae;case 5125:return Aae;case 36294:return Rae;case 36295:return Nae;case 36296:return Cae;case 35678:case 36198:case 36298:case 36306:case 35682:return Mae;case 35679:case 36299:case 36307:return Iae;case 35680:case 36300:case 36308:case 36293:return kae;case 36289:case 36303:case 36311:case 36292:return Lae}}function Oae(n,e){n.uniform1fv(this.addr,e)}function Pae(n,e){const t=Hh(e,this.size,2);n.uniform2fv(this.addr,t)}function Fae(n,e){const t=Hh(e,this.size,3);n.uniform3fv(this.addr,t)}function Uae(n,e){const t=Hh(e,this.size,4);n.uniform4fv(this.addr,t)}function Bae(n,e){const t=Hh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zae(n,e){const t=Hh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Gae(n,e){const t=Hh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Vae(n,e){n.uniform1iv(this.addr,e)}function $ae(n,e){n.uniform2iv(this.addr,e)}function Hae(n,e){n.uniform3iv(this.addr,e)}function jae(n,e){n.uniform4iv(this.addr,e)}function Wae(n,e){n.uniform1uiv(this.addr,e)}function qae(n,e){n.uniform2uiv(this.addr,e)}function Xae(n,e){n.uniform3uiv(this.addr,e)}function Yae(n,e){n.uniform4uiv(this.addr,e)}function Kae(n,e,t){const r=this.cache,i=e.length,s=lv(t,i);Lr(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));let a;this.type===n.SAMPLER_2D_SHADOW?a=kT:a=kV;for(let o=0;o!==i;++o)t.setTexture2D(e[o]||a,s[o])}function Zae(n,e,t){const r=this.cache,i=e.length,s=lv(t,i);Lr(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||DV,s[a])}function Qae(n,e,t){const r=this.cache,i=e.length,s=lv(t,i);Lr(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||OV,s[a])}function Jae(n,e,t){const r=this.cache,i=e.length,s=lv(t,i);Lr(r,s)||(n.uniform1iv(this.addr,s),Dr(r,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||LV,s[a])}function eoe(n){switch(n){case 5126:return Oae;case 35664:return Pae;case 35665:return Fae;case 35666:return Uae;case 35674:return Bae;case 35675:return zae;case 35676:return Gae;case 5124:case 35670:return Vae;case 35667:case 35671:return $ae;case 35668:case 35672:return Hae;case 35669:case 35673:return jae;case 5125:return Wae;case 36294:return qae;case 36295:return Xae;case 36296:return Yae;case 35678:case 36198:case 36298:case 36306:case 35682:return Kae;case 35679:case 36299:case 36307:return Zae;case 35680:case 36300:case 36308:case 36293:return Qae;case 36289:case 36303:case 36311:case 36292:return Jae}}class toe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Dae(t.type)}}class noe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=eoe(t.type)}}class roe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],r)}}}const S0=/(\w+)(\])?(\[|\.)?/g;function UF(n,e){n.seq.push(e),n.map[e.id]=e}function ioe(n,e,t){const r=n.name,i=r.length;for(S0.lastIndex=0;;){const s=S0.exec(r),a=S0.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===i){UF(t,u===void 0?new toe(o,n,e):new noe(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new roe(o),UF(t,h)),t=h}}}class $b{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){const o=e.getActiveUniform(t,a),l=e.getUniformLocation(t,o.name);ioe(o,l,this)}const i=[],s=[];for(const a of this.seq)a.type===e.SAMPLER_2D_SHADOW||a.type===e.SAMPLER_CUBE_SHADOW||a.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(a):s.push(a);i.length>0&&(this.seq=i.concat(s))}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function BF(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const soe=37297;let aoe=0;function ooe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return r.join(`
`)}const zF=new $t;function loe(n){Nt._getMatrix(zF,Nt.workingColorSpace,n);const e=`mat3( ${zF.elements.map(t=>t.toFixed(4))} )`;switch(Nt.getTransfer(n)){case mh:return[e,"LinearTransferOETF"];case lt:return[e,"sRGBTransferOETF"];default:return Ce("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function GF(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(r&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+s+`

`+ooe(n.getShaderSource(e),o)}else return s}function uoe(n,e){const t=loe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const coe={[R1]:"Linear",[N1]:"Reinhard",[C1]:"Cineon",[M1]:"ACESFilmic",[I1]:"AgX",[k1]:"Neutral",[uV]:"Custom"};function doe(n,e){const t=coe[e];return t===void 0?(Ce("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Qy=new Z;function hoe(){Nt.getLuminanceCoefficients(Qy);const n=Qy.x.toFixed(4),e=Qy.y.toFixed(4),t=Qy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function poe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_f).join(`
`)}function foe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function goe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function _f(n){return n!==""}function VF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function $F(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const moe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LT(n){return n.replace(moe,boe)}const yoe=new Map;function boe(n,e){let t=tn[e];if(t===void 0){const r=yoe.get(e);if(r!==void 0)t=tn[r],Ce('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return LT(t)}const _oe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function HF(n){return n.replace(_oe,voe)}function voe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function jF(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const xoe={[Of]:"SHADOWMAP_TYPE_PCF",[Io]:"SHADOWMAP_TYPE_VSM"};function Soe(n){return xoe[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const Eoe={[ya]:"ENVMAP_TYPE_CUBE",[Ka]:"ENVMAP_TYPE_CUBE",[Ku]:"ENVMAP_TYPE_CUBE_UV"};function Toe(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":Eoe[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const woe={[Ka]:"ENVMAP_MODE_REFRACTION"};function Aoe(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":woe[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const Roe={[Kg]:"ENVMAP_BLENDING_MULTIPLY",[oV]:"ENVMAP_BLENDING_MIX",[lV]:"ENVMAP_BLENDING_ADD"};function Noe(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":Roe[n.combine]||"ENVMAP_BLENDING_NONE"}function Coe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function Moe(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Soe(t),u=Toe(t),c=Aoe(t),h=Noe(t),f=Coe(t),g=poe(t),m=foe(s),v=i.createProgram();let _,b,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(_f).join(`
`),_.length>0&&(_+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(_f).join(`
`),b.length>0&&(b+=`
`)):(_=[jF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_f).join(`
`),b=[jF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qr?"#define TONE_MAPPING":"",t.toneMapping!==Qr?tn.tonemapping_pars_fragment:"",t.toneMapping!==Qr?doe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,uoe("linearToOutputTexel",t.outputColorSpace),hoe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_f).join(`
`)),a=LT(a),a=VF(a,t),a=$F(a,t),o=LT(o),o=VF(o,t),o=$F(o,t),a=HF(a),o=HF(o),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,b=["#define varying in",t.glslVersion===eF?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===eF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const E=S+_+a,A=S+b+o,R=BF(i,i.VERTEX_SHADER,E),w=BF(i,i.FRAGMENT_SHADER,A);i.attachShader(v,R),i.attachShader(v,w),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function M(O){if(n.debug.checkShaderErrors){const z=i.getProgramInfoLog(v)||"",W=i.getShaderInfoLog(R)||"",q=i.getShaderInfoLog(w)||"",X=z.trim(),Q=W.trim(),H=q.trim();let G=!0,re=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(G=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,R,w);else{const D=GF(i,R,"vertex"),U=GF(i,w,"fragment");Ie("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+X+`
`+D+`
`+U)}else X!==""?Ce("WebGLProgram: Program Info Log:",X):(Q===""||H==="")&&(re=!1);re&&(O.diagnostics={runnable:G,programLog:X,vertexShader:{log:Q,prefix:_},fragmentShader:{log:H,prefix:b}})}i.deleteShader(R),i.deleteShader(w),I=new $b(i,v),C=goe(i,v)}let I;this.getUniforms=function(){return I===void 0&&M(this),I};let C;this.getAttributes=function(){return C===void 0&&M(this),C};let k=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=i.getProgramParameter(v,soe)),k},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=aoe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=R,this.fragmentShader=w,this}let Ioe=0;class koe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Loe(e),t.set(e,r)),r}}class Loe{constructor(e){this.id=Ioe++,this.code=e,this.usedTimes=0}}function Doe(n,e,t,r,i,s,a){const o=new j1,l=new koe,u=new Set,c=[],h=new Map,f=i.logarithmicDepthBuffer;let g=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(C){return u.add(C),C===0?"uv":`uv${C}`}function _(C,k,O,z,W){const q=z.fog,X=W.geometry,Q=C.isMeshStandardMaterial?z.environment:null,H=(C.isMeshStandardMaterial?t:e).get(C.envMap||Q),G=H&&H.mapping===Ku?H.image.height:null,re=m[C.type];C.precision!==null&&(g=i.getMaxPrecision(C.precision),g!==C.precision&&Ce("WebGLProgram.getParameters:",C.precision,"not supported, using",g,"instead."));const D=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,U=D!==void 0?D.length:0;let ne=0;X.morphAttributes.position!==void 0&&(ne=1),X.morphAttributes.normal!==void 0&&(ne=2),X.morphAttributes.color!==void 0&&(ne=3);let B,Oe,Y,V;if(re){const pn=Pa[re];B=pn.vertexShader,Oe=pn.fragmentShader}else B=C.vertexShader,Oe=C.fragmentShader,l.update(C),Y=l.getVertexShaderID(C),V=l.getFragmentShaderID(C);const ae=n.getRenderTarget(),_e=n.state.buffers.depth.getReversed(),Pe=W.isInstancedMesh===!0,De=W.isBatchedMesh===!0,ft=!!C.map,ln=!!C.matcap,Se=!!H,Me=!!C.aoMap,nt=!!C.lightMap,qe=!!C.bumpMap,je=!!C.normalMap,J=!!C.displacementMap,Qt=!!C.emissiveMap,Ot=!!C.metalnessMap,Dt=!!C.roughnessMap,it=C.anisotropy>0,K=C.clearcoat>0,P=C.dispersion>0,he=C.iridescence>0,te=C.sheen>0,de=C.transmission>0,fe=it&&!!C.anisotropyMap,ze=K&&!!C.clearcoatMap,ke=K&&!!C.clearcoatNormalMap,tt=K&&!!C.clearcoatRoughnessMap,wt=he&&!!C.iridescenceMap,Fe=he&&!!C.iridescenceThicknessMap,Ze=te&&!!C.sheenColorMap,dt=te&&!!C.sheenRoughnessMap,rt=!!C.specularMap,Xe=!!C.specularColorMap,Mt=!!C.specularIntensityMap,le=de&&!!C.transmissionMap,st=de&&!!C.thicknessMap,He=!!C.gradientMap,at=!!C.alphaMap,Ge=C.alphaTest>0,Le=!!C.alphaHash,Je=!!C.extensions;let zt=Qr;C.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(zt=n.toneMapping);const Nn={shaderID:re,shaderType:C.type,shaderName:C.name,vertexShader:B,fragmentShader:Oe,defines:C.defines,customVertexShaderID:Y,customFragmentShaderID:V,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:g,batching:De,batchingColor:De&&W._colorsTexture!==null,instancing:Pe,instancingColor:Pe&&W.instanceColor!==null,instancingMorph:Pe&&W.morphTexture!==null,outputColorSpace:ae===null?n.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:tc,alphaToCoverage:!!C.alphaToCoverage,map:ft,matcap:ln,envMap:Se,envMapMode:Se&&H.mapping,envMapCubeUVHeight:G,aoMap:Me,lightMap:nt,bumpMap:qe,normalMap:je,displacementMap:J,emissiveMap:Qt,normalMapObjectSpace:je&&C.normalMapType===cV,normalMapTangentSpace:je&&C.normalMapType===Xa,metalnessMap:Ot,roughnessMap:Dt,anisotropy:it,anisotropyMap:fe,clearcoat:K,clearcoatMap:ze,clearcoatNormalMap:ke,clearcoatRoughnessMap:tt,dispersion:P,iridescence:he,iridescenceMap:wt,iridescenceThicknessMap:Fe,sheen:te,sheenColorMap:Ze,sheenRoughnessMap:dt,specularMap:rt,specularColorMap:Xe,specularIntensityMap:Mt,transmission:de,transmissionMap:le,thicknessMap:st,gradientMap:He,opaque:C.transparent===!1&&C.blending===Es&&C.alphaToCoverage===!1,alphaMap:at,alphaTest:Ge,alphaHash:Le,combine:C.combine,mapUv:ft&&v(C.map.channel),aoMapUv:Me&&v(C.aoMap.channel),lightMapUv:nt&&v(C.lightMap.channel),bumpMapUv:qe&&v(C.bumpMap.channel),normalMapUv:je&&v(C.normalMap.channel),displacementMapUv:J&&v(C.displacementMap.channel),emissiveMapUv:Qt&&v(C.emissiveMap.channel),metalnessMapUv:Ot&&v(C.metalnessMap.channel),roughnessMapUv:Dt&&v(C.roughnessMap.channel),anisotropyMapUv:fe&&v(C.anisotropyMap.channel),clearcoatMapUv:ze&&v(C.clearcoatMap.channel),clearcoatNormalMapUv:ke&&v(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&v(C.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&v(C.iridescenceMap.channel),iridescenceThicknessMapUv:Fe&&v(C.iridescenceThicknessMap.channel),sheenColorMapUv:Ze&&v(C.sheenColorMap.channel),sheenRoughnessMapUv:dt&&v(C.sheenRoughnessMap.channel),specularMapUv:rt&&v(C.specularMap.channel),specularColorMapUv:Xe&&v(C.specularColorMap.channel),specularIntensityMapUv:Mt&&v(C.specularIntensityMap.channel),transmissionMapUv:le&&v(C.transmissionMap.channel),thicknessMapUv:st&&v(C.thicknessMap.channel),alphaMapUv:at&&v(C.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(je||it),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!X.attributes.uv&&(ft||at),fog:!!q,useFog:C.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:C.flatShading===!0&&C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:f,reversedDepthBuffer:_e,skinning:W.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:ne,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:zt,decodeVideoTexture:ft&&C.map.isVideoTexture===!0&&Nt.getTransfer(C.map.colorSpace)===lt,decodeVideoTextureEmissive:Qt&&C.emissiveMap.isVideoTexture===!0&&Nt.getTransfer(C.emissiveMap.colorSpace)===lt,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===pi,flipSided:C.side===On,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Je&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Je&&C.extensions.multiDraw===!0||De)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Nn.vertexUv1s=u.has(1),Nn.vertexUv2s=u.has(2),Nn.vertexUv3s=u.has(3),u.clear(),Nn}function b(C){const k=[];if(C.shaderID?k.push(C.shaderID):(k.push(C.customVertexShaderID),k.push(C.customFragmentShaderID)),C.defines!==void 0)for(const O in C.defines)k.push(O),k.push(C.defines[O]);return C.isRawShaderMaterial===!1&&(S(k,C),E(k,C),k.push(n.outputColorSpace)),k.push(C.customProgramCacheKey),k.join()}function S(C,k){C.push(k.precision),C.push(k.outputColorSpace),C.push(k.envMapMode),C.push(k.envMapCubeUVHeight),C.push(k.mapUv),C.push(k.alphaMapUv),C.push(k.lightMapUv),C.push(k.aoMapUv),C.push(k.bumpMapUv),C.push(k.normalMapUv),C.push(k.displacementMapUv),C.push(k.emissiveMapUv),C.push(k.metalnessMapUv),C.push(k.roughnessMapUv),C.push(k.anisotropyMapUv),C.push(k.clearcoatMapUv),C.push(k.clearcoatNormalMapUv),C.push(k.clearcoatRoughnessMapUv),C.push(k.iridescenceMapUv),C.push(k.iridescenceThicknessMapUv),C.push(k.sheenColorMapUv),C.push(k.sheenRoughnessMapUv),C.push(k.specularMapUv),C.push(k.specularColorMapUv),C.push(k.specularIntensityMapUv),C.push(k.transmissionMapUv),C.push(k.thicknessMapUv),C.push(k.combine),C.push(k.fogExp2),C.push(k.sizeAttenuation),C.push(k.morphTargetsCount),C.push(k.morphAttributeCount),C.push(k.numDirLights),C.push(k.numPointLights),C.push(k.numSpotLights),C.push(k.numSpotLightMaps),C.push(k.numHemiLights),C.push(k.numRectAreaLights),C.push(k.numDirLightShadows),C.push(k.numPointLightShadows),C.push(k.numSpotLightShadows),C.push(k.numSpotLightShadowsWithMaps),C.push(k.numLightProbes),C.push(k.shadowMapType),C.push(k.toneMapping),C.push(k.numClippingPlanes),C.push(k.numClipIntersection),C.push(k.depthPacking)}function E(C,k){o.disableAll(),k.instancing&&o.enable(0),k.instancingColor&&o.enable(1),k.instancingMorph&&o.enable(2),k.matcap&&o.enable(3),k.envMap&&o.enable(4),k.normalMapObjectSpace&&o.enable(5),k.normalMapTangentSpace&&o.enable(6),k.clearcoat&&o.enable(7),k.iridescence&&o.enable(8),k.alphaTest&&o.enable(9),k.vertexColors&&o.enable(10),k.vertexAlphas&&o.enable(11),k.vertexUv1s&&o.enable(12),k.vertexUv2s&&o.enable(13),k.vertexUv3s&&o.enable(14),k.vertexTangents&&o.enable(15),k.anisotropy&&o.enable(16),k.alphaHash&&o.enable(17),k.batching&&o.enable(18),k.dispersion&&o.enable(19),k.batchingColor&&o.enable(20),k.gradientMap&&o.enable(21),C.push(o.mask),o.disableAll(),k.fog&&o.enable(0),k.useFog&&o.enable(1),k.flatShading&&o.enable(2),k.logarithmicDepthBuffer&&o.enable(3),k.reversedDepthBuffer&&o.enable(4),k.skinning&&o.enable(5),k.morphTargets&&o.enable(6),k.morphNormals&&o.enable(7),k.morphColors&&o.enable(8),k.premultipliedAlpha&&o.enable(9),k.shadowMapEnabled&&o.enable(10),k.doubleSided&&o.enable(11),k.flipSided&&o.enable(12),k.useDepthPacking&&o.enable(13),k.dithering&&o.enable(14),k.transmission&&o.enable(15),k.sheen&&o.enable(16),k.opaque&&o.enable(17),k.pointsUvs&&o.enable(18),k.decodeVideoTexture&&o.enable(19),k.decodeVideoTextureEmissive&&o.enable(20),k.alphaToCoverage&&o.enable(21),C.push(o.mask)}function A(C){const k=m[C.type];let O;if(k){const z=Pa[k];O=mV.clone(z.uniforms)}else O=C.uniforms;return O}function R(C,k){let O=h.get(k);return O!==void 0?++O.usedTimes:(O=new Moe(n,k,C,s),c.push(O),h.set(k,O)),O}function w(C){if(--C.usedTimes===0){const k=c.indexOf(C);c[k]=c[c.length-1],c.pop(),h.delete(C.cacheKey),C.destroy()}}function M(C){l.remove(C)}function I(){l.dispose()}return{getParameters:_,getProgramCacheKey:b,getUniforms:A,acquireProgram:R,releaseProgram:w,releaseShaderCache:M,programs:c,dispose:I}}function Ooe(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function r(a){n.delete(a)}function i(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Poe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function WF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qF(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function a(h,f,g,m,v,_){let b=n[e];return b===void 0?(b={id:h.id,object:h,geometry:f,material:g,groupOrder:m,renderOrder:h.renderOrder,z:v,group:_},n[e]=b):(b.id=h.id,b.object=h,b.geometry=f,b.material=g,b.groupOrder=m,b.renderOrder=h.renderOrder,b.z=v,b.group=_),e++,b}function o(h,f,g,m,v,_){const b=a(h,f,g,m,v,_);g.transmission>0?r.push(b):g.transparent===!0?i.push(b):t.push(b)}function l(h,f,g,m,v,_){const b=a(h,f,g,m,v,_);g.transmission>0?r.unshift(b):g.transparent===!0?i.unshift(b):t.unshift(b)}function u(h,f){t.length>1&&t.sort(h||Poe),r.length>1&&r.sort(f||WF),i.length>1&&i.sort(f||WF)}function c(){for(let h=e,f=n.length;h<f;h++){const g=n[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:c,sort:u}}function Foe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let a;return s===void 0?(a=new qF,n.set(r,[a])):i>=s.length?(a=new qF,s.push(a)):a=s[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Uoe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new Et};break;case"SpotLight":t={position:new Z,direction:new Z,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function Boe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let zoe=0;function Goe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Voe(n){const e=new Uoe,t=Boe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Z);const i=new Z,s=new sn,a=new sn;function o(u){let c=0,h=0,f=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let g=0,m=0,v=0,_=0,b=0,S=0,E=0,A=0,R=0,w=0,M=0;u.sort(Goe);for(let C=0,k=u.length;C<k;C++){const O=u[C],z=O.color,W=O.intensity,q=O.distance;let X=null;if(O.shadow&&O.shadow.map&&(O.shadow.map.texture.format===Di?X=O.shadow.map.texture:X=O.shadow.map.depthTexture||O.shadow.map.texture),O.isAmbientLight)c+=z.r*W,h+=z.g*W,f+=z.b*W;else if(O.isLightProbe){for(let Q=0;Q<9;Q++)r.probe[Q].addScaledVector(O.sh.coefficients[Q],W);M++}else if(O.isDirectionalLight){const Q=e.get(O);if(Q.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const H=O.shadow,G=t.get(O);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,r.directionalShadow[g]=G,r.directionalShadowMap[g]=X,r.directionalShadowMatrix[g]=O.shadow.matrix,S++}r.directional[g]=Q,g++}else if(O.isSpotLight){const Q=e.get(O);Q.position.setFromMatrixPosition(O.matrixWorld),Q.color.copy(z).multiplyScalar(W),Q.distance=q,Q.coneCos=Math.cos(O.angle),Q.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),Q.decay=O.decay,r.spot[v]=Q;const H=O.shadow;if(O.map&&(r.spotLightMap[R]=O.map,R++,H.updateMatrices(O),O.castShadow&&w++),r.spotLightMatrix[v]=H.matrix,O.castShadow){const G=t.get(O);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,r.spotShadow[v]=G,r.spotShadowMap[v]=X,A++}v++}else if(O.isRectAreaLight){const Q=e.get(O);Q.color.copy(z).multiplyScalar(W),Q.halfWidth.set(O.width*.5,0,0),Q.halfHeight.set(0,O.height*.5,0),r.rectArea[_]=Q,_++}else if(O.isPointLight){const Q=e.get(O);if(Q.color.copy(O.color).multiplyScalar(O.intensity),Q.distance=O.distance,Q.decay=O.decay,O.castShadow){const H=O.shadow,G=t.get(O);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,G.shadowCameraNear=H.camera.near,G.shadowCameraFar=H.camera.far,r.pointShadow[m]=G,r.pointShadowMap[m]=X,r.pointShadowMatrix[m]=O.shadow.matrix,E++}r.point[m]=Q,m++}else if(O.isHemisphereLight){const Q=e.get(O);Q.skyColor.copy(O.color).multiplyScalar(W),Q.groundColor.copy(O.groundColor).multiplyScalar(W),r.hemi[b]=Q,b++}}_>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ot.LTC_FLOAT_1,r.rectAreaLTC2=ot.LTC_FLOAT_2):(r.rectAreaLTC1=ot.LTC_HALF_1,r.rectAreaLTC2=ot.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=h,r.ambient[2]=f;const I=r.hash;(I.directionalLength!==g||I.pointLength!==m||I.spotLength!==v||I.rectAreaLength!==_||I.hemiLength!==b||I.numDirectionalShadows!==S||I.numPointShadows!==E||I.numSpotShadows!==A||I.numSpotMaps!==R||I.numLightProbes!==M)&&(r.directional.length=g,r.spot.length=v,r.rectArea.length=_,r.point.length=m,r.hemi.length=b,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=A+R-w,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=w,r.numLightProbes=M,I.directionalLength=g,I.pointLength=m,I.spotLength=v,I.rectAreaLength=_,I.hemiLength=b,I.numDirectionalShadows=S,I.numPointShadows=E,I.numSpotShadows=A,I.numSpotMaps=R,I.numLightProbes=M,r.version=zoe++)}function l(u,c){let h=0,f=0,g=0,m=0,v=0;const _=c.matrixWorldInverse;for(let b=0,S=u.length;b<S;b++){const E=u[b];if(E.isDirectionalLight){const A=r.directional[h];A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(_),h++}else if(E.isSpotLight){const A=r.spot[g];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(_),g++}else if(E.isRectAreaLight){const A=r.rectArea[m];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),a.identity(),s.copy(E.matrixWorld),s.premultiply(_),a.extractRotation(s),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),m++}else if(E.isPointLight){const A=r.point[f];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(_),f++}else if(E.isHemisphereLight){const A=r.hemi[v];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(_),v++}}}return{setup:o,setupView:l,state:r}}function XF(n){const e=new Voe(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function s(c){t.push(c)}function a(c){r.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function $oe(n){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new XF(n),e.set(i,[o])):s>=a.length?(o=new XF(n),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const Hoe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,joe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Woe=[new Z(1,0,0),new Z(-1,0,0),new Z(0,1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1)],qoe=[new Z(0,-1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,-1,0),new Z(0,-1,0)],YF=new sn,Xp=new Z,E0=new Z;function Xoe(n,e,t){let r=new im;const i=new $e,s=new $e,a=new Wt,o=new Kne,l=new Zne,u={},c=t.maxTextureSize,h={[Ss]:On,[On]:Ss,[pi]:pi},f=new Hs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:Hoe,fragmentShader:joe}),g=f.clone();g.defines.HORIZONTAL_PASS=1;const m=new jr;m.setAttribute("position",new ei(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new wr(m,f),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Of;let b=this.type;this.render=function(w,M,I){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||w.length===0)return;w.type===mte&&(Ce("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),w.type=Of);const C=n.getRenderTarget(),k=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Pi),z.buffers.depth.getReversed()===!0?z.buffers.color.setClear(0,0,0,0):z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const W=b!==this.type;W&&M.traverse(function(q){q.material&&(Array.isArray(q.material)?q.material.forEach(X=>X.needsUpdate=!0):q.material.needsUpdate=!0)});for(let q=0,X=w.length;q<X;q++){const Q=w[q],H=Q.shadow;if(H===void 0){Ce("WebGLShadowMap:",Q,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const G=H.getFrameExtents();if(i.multiply(G),s.copy(H.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/G.x),i.x=s.x*G.x,H.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/G.y),i.y=s.y*G.y,H.mapSize.y=s.y)),H.map===null||W===!0){if(H.map!==null&&(H.map.depthTexture!==null&&(H.map.depthTexture.dispose(),H.map.depthTexture=null),H.map.dispose()),this.type===Io){if(Q.isPointLight){Ce("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}H.map=new ga(i.x,i.y,{format:Di,type:tr,minFilter:Vn,magFilter:Vn,generateMipmaps:!1}),H.map.texture.name=Q.name+".shadowMap",H.map.depthTexture=new Fi(i.x,i.y,hr),H.map.depthTexture.name=Q.name+".shadowMapDepth",H.map.depthTexture.format=Jr,H.map.depthTexture.compareFunction=null,H.map.depthTexture.minFilter=Rn,H.map.depthTexture.magFilter=Rn}else{Q.isPointLight?(H.map=new Y1(i.x),H.map.depthTexture=new vV(i.x,An)):(H.map=new ga(i.x,i.y),H.map.depthTexture=new Fi(i.x,i.y,An)),H.map.depthTexture.name=Q.name+".shadowMap",H.map.depthTexture.format=Jr;const D=n.state.buffers.depth.getReversed();this.type===Of?(H.map.depthTexture.compareFunction=D?tm:em,H.map.depthTexture.minFilter=Vn,H.map.depthTexture.magFilter=Vn):(H.map.depthTexture.compareFunction=null,H.map.depthTexture.minFilter=Rn,H.map.depthTexture.magFilter=Rn)}H.camera.updateProjectionMatrix()}const re=H.map.isWebGLCubeRenderTarget?6:1;for(let D=0;D<re;D++){if(H.map.isWebGLCubeRenderTarget)n.setRenderTarget(H.map,D),n.clear();else{D===0&&(n.setRenderTarget(H.map),n.clear());const U=H.getViewport(D);a.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),z.viewport(a)}if(Q.isPointLight){const U=H.camera,ne=H.matrix,B=Q.distance||U.far;B!==U.far&&(U.far=B,U.updateProjectionMatrix()),Xp.setFromMatrixPosition(Q.matrixWorld),U.position.copy(Xp),E0.copy(U.position),E0.add(Woe[D]),U.up.copy(qoe[D]),U.lookAt(E0),U.updateMatrixWorld(),ne.makeTranslation(-Xp.x,-Xp.y,-Xp.z),YF.multiplyMatrices(U.projectionMatrix,U.matrixWorldInverse),H._frustum.setFromProjectionMatrix(YF,U.coordinateSystem,U.reversedDepth)}else H.updateMatrices(Q);r=H.getFrustum(),A(M,I,H.camera,Q,this.type)}H.isPointLightShadow!==!0&&this.type===Io&&S(H,I),H.needsUpdate=!1}b=this.type,_.needsUpdate=!1,n.setRenderTarget(C,k,O)};function S(w,M){const I=e.update(v);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,g.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,g.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new ga(i.x,i.y,{format:Di,type:tr})),f.uniforms.shadow_pass.value=w.map.depthTexture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(M,null,I,f,v,null),g.uniforms.shadow_pass.value=w.mapPass.texture,g.uniforms.resolution.value=w.mapSize,g.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(M,null,I,g,v,null)}function E(w,M,I,C){let k=null;const O=I.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(O!==void 0)k=O;else if(k=I.isPointLight===!0?l:o,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0||M.alphaToCoverage===!0){const z=k.uuid,W=M.uuid;let q=u[z];q===void 0&&(q={},u[z]=q);let X=q[W];X===void 0&&(X=k.clone(),q[W]=X,M.addEventListener("dispose",R)),k=X}if(k.visible=M.visible,k.wireframe=M.wireframe,C===Io?k.side=M.shadowSide!==null?M.shadowSide:M.side:k.side=M.shadowSide!==null?M.shadowSide:h[M.side],k.alphaMap=M.alphaMap,k.alphaTest=M.alphaToCoverage===!0?.5:M.alphaTest,k.map=M.map,k.clipShadows=M.clipShadows,k.clippingPlanes=M.clippingPlanes,k.clipIntersection=M.clipIntersection,k.displacementMap=M.displacementMap,k.displacementScale=M.displacementScale,k.displacementBias=M.displacementBias,k.wireframeLinewidth=M.wireframeLinewidth,k.linewidth=M.linewidth,I.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const z=n.properties.get(k);z.light=I}return k}function A(w,M,I,C,k){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&k===Io)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,w.matrixWorld);const W=e.update(w),q=w.material;if(Array.isArray(q)){const X=W.groups;for(let Q=0,H=X.length;Q<H;Q++){const G=X[Q],re=q[G.materialIndex];if(re&&re.visible){const D=E(w,re,C,k);w.onBeforeShadow(n,w,M,I,W,D,G),n.renderBufferDirect(I,null,W,D,w,G),w.onAfterShadow(n,w,M,I,W,D,G)}}}else if(q.visible){const X=E(w,q,C,k);w.onBeforeShadow(n,w,M,I,W,X,null),n.renderBufferDirect(I,null,W,X,w,null),w.onAfterShadow(n,w,M,I,W,X,null)}}const z=w.children;for(let W=0,q=z.length;W<q;W++)A(z[W],M,I,C,k)}function R(w){w.target.removeEventListener("dispose",R);for(const I in u){const C=u[I],k=w.target.uuid;k in C&&(C[k].dispose(),delete C[k])}}}const Yoe={[pg]:fg,[gg]:bg,[mg]:_g,[Gl]:yg,[fg]:pg,[bg]:gg,[_g]:mg,[yg]:Gl};function Koe(n,e){function t(){let le=!1;const st=new Wt;let He=null;const at=new Wt(0,0,0,0);return{setMask:function(Ge){He!==Ge&&!le&&(n.colorMask(Ge,Ge,Ge,Ge),He=Ge)},setLocked:function(Ge){le=Ge},setClear:function(Ge,Le,Je,zt,Nn){Nn===!0&&(Ge*=zt,Le*=zt,Je*=zt),st.set(Ge,Le,Je,zt),at.equals(st)===!1&&(n.clearColor(Ge,Le,Je,zt),at.copy(st))},reset:function(){le=!1,He=null,at.set(-1,0,0,0)}}}function r(){let le=!1,st=!1,He=null,at=null,Ge=null;return{setReversed:function(Le){if(st!==Le){const Je=e.get("EXT_clip_control");Le?Je.clipControlEXT(Je.LOWER_LEFT_EXT,Je.ZERO_TO_ONE_EXT):Je.clipControlEXT(Je.LOWER_LEFT_EXT,Je.NEGATIVE_ONE_TO_ONE_EXT),st=Le;const zt=Ge;Ge=null,this.setClear(zt)}},getReversed:function(){return st},setTest:function(Le){Le?ae(n.DEPTH_TEST):_e(n.DEPTH_TEST)},setMask:function(Le){He!==Le&&!le&&(n.depthMask(Le),He=Le)},setFunc:function(Le){if(st&&(Le=Yoe[Le]),at!==Le){switch(Le){case pg:n.depthFunc(n.NEVER);break;case fg:n.depthFunc(n.ALWAYS);break;case gg:n.depthFunc(n.LESS);break;case Gl:n.depthFunc(n.LEQUAL);break;case mg:n.depthFunc(n.EQUAL);break;case yg:n.depthFunc(n.GEQUAL);break;case bg:n.depthFunc(n.GREATER);break;case _g:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}at=Le}},setLocked:function(Le){le=Le},setClear:function(Le){Ge!==Le&&(st&&(Le=1-Le),n.clearDepth(Le),Ge=Le)},reset:function(){le=!1,He=null,at=null,Ge=null,st=!1}}}function i(){let le=!1,st=null,He=null,at=null,Ge=null,Le=null,Je=null,zt=null,Nn=null;return{setTest:function(pn){le||(pn?ae(n.STENCIL_TEST):_e(n.STENCIL_TEST))},setMask:function(pn){st!==pn&&!le&&(n.stencilMask(pn),st=pn)},setFunc:function(pn,ls,Si){(He!==pn||at!==ls||Ge!==Si)&&(n.stencilFunc(pn,ls,Si),He=pn,at=ls,Ge=Si)},setOp:function(pn,ls,Si){(Le!==pn||Je!==ls||zt!==Si)&&(n.stencilOp(pn,ls,Si),Le=pn,Je=ls,zt=Si)},setLocked:function(pn){le=pn},setClear:function(pn){Nn!==pn&&(n.clearStencil(pn),Nn=pn)},reset:function(){le=!1,st=null,He=null,at=null,Ge=null,Le=null,Je=null,zt=null,Nn=null}}}const s=new t,a=new r,o=new i,l=new WeakMap,u=new WeakMap;let c={},h={},f=new WeakMap,g=[],m=null,v=!1,_=null,b=null,S=null,E=null,A=null,R=null,w=null,M=new Et(0,0,0),I=0,C=!1,k=null,O=null,z=null,W=null,q=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,H=0;const G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(G)[1]),Q=H>=1):G.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Q=H>=2);let re=null,D={};const U=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),B=new Wt().fromArray(U),Oe=new Wt().fromArray(ne);function Y(le,st,He,at){const Ge=new Uint8Array(4),Le=n.createTexture();n.bindTexture(le,Le),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Je=0;Je<He;Je++)le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY?n.texImage3D(st,0,n.RGBA,1,1,at,0,n.RGBA,n.UNSIGNED_BYTE,Ge):n.texImage2D(st+Je,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ge);return Le}const V={};V[n.TEXTURE_2D]=Y(n.TEXTURE_2D,n.TEXTURE_2D,1),V[n.TEXTURE_CUBE_MAP]=Y(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[n.TEXTURE_2D_ARRAY]=Y(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),V[n.TEXTURE_3D]=Y(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ae(n.DEPTH_TEST),a.setFunc(Gl),qe(!1),je(AT),ae(n.CULL_FACE),Me(Pi);function ae(le){c[le]!==!0&&(n.enable(le),c[le]=!0)}function _e(le){c[le]!==!1&&(n.disable(le),c[le]=!1)}function Pe(le,st){return h[le]!==st?(n.bindFramebuffer(le,st),h[le]=st,le===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=st),le===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=st),!0):!1}function De(le,st){let He=g,at=!1;if(le){He=f.get(st),He===void 0&&(He=[],f.set(st,He));const Ge=le.textures;if(He.length!==Ge.length||He[0]!==n.COLOR_ATTACHMENT0){for(let Le=0,Je=Ge.length;Le<Je;Le++)He[Le]=n.COLOR_ATTACHMENT0+Le;He.length=Ge.length,at=!0}}else He[0]!==n.BACK&&(He[0]=n.BACK,at=!0);at&&n.drawBuffers(He)}function ft(le){return m!==le?(n.useProgram(le),m=le,!0):!1}const ln={[fi]:n.FUNC_ADD,[y1]:n.FUNC_SUBTRACT,[b1]:n.FUNC_REVERSE_SUBTRACT};ln[sV]=n.MIN,ln[aV]=n.MAX;const Se={[To]:n.ZERO,[_1]:n.ONE,[v1]:n.SRC_COLOR,[dg]:n.SRC_ALPHA,[A1]:n.SRC_ALPHA_SATURATE,[T1]:n.DST_COLOR,[S1]:n.DST_ALPHA,[x1]:n.ONE_MINUS_SRC_COLOR,[hg]:n.ONE_MINUS_SRC_ALPHA,[w1]:n.ONE_MINUS_DST_COLOR,[E1]:n.ONE_MINUS_DST_ALPHA,[yte]:n.CONSTANT_COLOR,[bte]:n.ONE_MINUS_CONSTANT_COLOR,[_te]:n.CONSTANT_ALPHA,[vte]:n.ONE_MINUS_CONSTANT_ALPHA};function Me(le,st,He,at,Ge,Le,Je,zt,Nn,pn){if(le===Pi){v===!0&&(_e(n.BLEND),v=!1);return}if(v===!1&&(ae(n.BLEND),v=!0),le!==kd){if(le!==_||pn!==C){if((b!==fi||A!==fi)&&(n.blendEquation(n.FUNC_ADD),b=fi,A=fi),pn)switch(le){case Es:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Gd:n.blendFunc(n.ONE,n.ONE);break;case Vd:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case $d:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Ie("WebGLState: Invalid blending: ",le);break}else switch(le){case Es:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Gd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case Vd:Ie("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case $d:Ie("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ie("WebGLState: Invalid blending: ",le);break}S=null,E=null,R=null,w=null,M.set(0,0,0),I=0,_=le,C=pn}return}Ge=Ge||st,Le=Le||He,Je=Je||at,(st!==b||Ge!==A)&&(n.blendEquationSeparate(ln[st],ln[Ge]),b=st,A=Ge),(He!==S||at!==E||Le!==R||Je!==w)&&(n.blendFuncSeparate(Se[He],Se[at],Se[Le],Se[Je]),S=He,E=at,R=Le,w=Je),(zt.equals(M)===!1||Nn!==I)&&(n.blendColor(zt.r,zt.g,zt.b,Nn),M.copy(zt),I=Nn),_=le,C=!1}function nt(le,st){le.side===pi?_e(n.CULL_FACE):ae(n.CULL_FACE);let He=le.side===On;st&&(He=!He),qe(He),le.blending===Es&&le.transparent===!1?Me(Pi):Me(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),a.setFunc(le.depthFunc),a.setTest(le.depthTest),a.setMask(le.depthWrite),s.setMask(le.colorWrite);const at=le.stencilWrite;o.setTest(at),at&&(o.setMask(le.stencilWriteMask),o.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),o.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Qt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?ae(n.SAMPLE_ALPHA_TO_COVERAGE):_e(n.SAMPLE_ALPHA_TO_COVERAGE)}function qe(le){k!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),k=le)}function je(le){le!==rV?(ae(n.CULL_FACE),le!==O&&(le===AT?n.cullFace(n.BACK):le===iV?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):_e(n.CULL_FACE),O=le}function J(le){le!==z&&(Q&&n.lineWidth(le),z=le)}function Qt(le,st,He){le?(ae(n.POLYGON_OFFSET_FILL),(W!==st||q!==He)&&(n.polygonOffset(st,He),W=st,q=He)):_e(n.POLYGON_OFFSET_FILL)}function Ot(le){le?ae(n.SCISSOR_TEST):_e(n.SCISSOR_TEST)}function Dt(le){le===void 0&&(le=n.TEXTURE0+X-1),re!==le&&(n.activeTexture(le),re=le)}function it(le,st,He){He===void 0&&(re===null?He=n.TEXTURE0+X-1:He=re);let at=D[He];at===void 0&&(at={type:void 0,texture:void 0},D[He]=at),(at.type!==le||at.texture!==st)&&(re!==He&&(n.activeTexture(He),re=He),n.bindTexture(le,st||V[le]),at.type=le,at.texture=st)}function K(){const le=D[re];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function P(){try{n.compressedTexImage2D(...arguments)}catch(le){Ie("WebGLState:",le)}}function he(){try{n.compressedTexImage3D(...arguments)}catch(le){Ie("WebGLState:",le)}}function te(){try{n.texSubImage2D(...arguments)}catch(le){Ie("WebGLState:",le)}}function de(){try{n.texSubImage3D(...arguments)}catch(le){Ie("WebGLState:",le)}}function fe(){try{n.compressedTexSubImage2D(...arguments)}catch(le){Ie("WebGLState:",le)}}function ze(){try{n.compressedTexSubImage3D(...arguments)}catch(le){Ie("WebGLState:",le)}}function ke(){try{n.texStorage2D(...arguments)}catch(le){Ie("WebGLState:",le)}}function tt(){try{n.texStorage3D(...arguments)}catch(le){Ie("WebGLState:",le)}}function wt(){try{n.texImage2D(...arguments)}catch(le){Ie("WebGLState:",le)}}function Fe(){try{n.texImage3D(...arguments)}catch(le){Ie("WebGLState:",le)}}function Ze(le){B.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),B.copy(le))}function dt(le){Oe.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),Oe.copy(le))}function rt(le,st){let He=u.get(st);He===void 0&&(He=new WeakMap,u.set(st,He));let at=He.get(le);at===void 0&&(at=n.getUniformBlockIndex(st,le.name),He.set(le,at))}function Xe(le,st){const at=u.get(st).get(le);l.get(st)!==at&&(n.uniformBlockBinding(st,at,le.__bindingPointIndex),l.set(st,at))}function Mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},re=null,D={},h={},f=new WeakMap,g=[],m=null,v=!1,_=null,b=null,S=null,E=null,A=null,R=null,w=null,M=new Et(0,0,0),I=0,C=!1,k=null,O=null,z=null,W=null,q=null,B.set(0,0,n.canvas.width,n.canvas.height),Oe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ae,disable:_e,bindFramebuffer:Pe,drawBuffers:De,useProgram:ft,setBlending:Me,setMaterial:nt,setFlipSided:qe,setCullFace:je,setLineWidth:J,setPolygonOffset:Qt,setScissorTest:Ot,activeTexture:Dt,bindTexture:it,unbindTexture:K,compressedTexImage2D:P,compressedTexImage3D:he,texImage2D:wt,texImage3D:Fe,updateUBOMapping:rt,uniformBlockBinding:Xe,texStorage2D:ke,texStorage3D:tt,texSubImage2D:te,texSubImage3D:de,compressedTexSubImage2D:fe,compressedTexSubImage3D:ze,scissor:Ze,viewport:dt,reset:Mt}}function Zoe(n,e,t,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new $e,c=new WeakMap;let h;const f=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(K,P){return g?new OffscreenCanvas(K,P):Tg("canvas")}function v(K,P,he){let te=1;const de=it(K);if((de.width>he||de.height>he)&&(te=he/Math.max(de.width,de.height)),te<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const fe=Math.floor(te*de.width),ze=Math.floor(te*de.height);h===void 0&&(h=m(fe,ze));const ke=P?m(fe,ze):h;return ke.width=fe,ke.height=ze,ke.getContext("2d").drawImage(K,0,0,fe,ze),Ce("WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+fe+"x"+ze+")."),ke}else return"data"in K&&Ce("WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),K;return K}function _(K){return K.generateMipmaps}function b(K){n.generateMipmap(K)}function S(K){return K.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?n.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(K,P,he,te,de=!1){if(K!==null){if(n[K]!==void 0)return n[K];Ce("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let fe=P;if(P===n.RED&&(he===n.FLOAT&&(fe=n.R32F),he===n.HALF_FLOAT&&(fe=n.R16F),he===n.UNSIGNED_BYTE&&(fe=n.R8)),P===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(fe=n.R8UI),he===n.UNSIGNED_SHORT&&(fe=n.R16UI),he===n.UNSIGNED_INT&&(fe=n.R32UI),he===n.BYTE&&(fe=n.R8I),he===n.SHORT&&(fe=n.R16I),he===n.INT&&(fe=n.R32I)),P===n.RG&&(he===n.FLOAT&&(fe=n.RG32F),he===n.HALF_FLOAT&&(fe=n.RG16F),he===n.UNSIGNED_BYTE&&(fe=n.RG8)),P===n.RG_INTEGER&&(he===n.UNSIGNED_BYTE&&(fe=n.RG8UI),he===n.UNSIGNED_SHORT&&(fe=n.RG16UI),he===n.UNSIGNED_INT&&(fe=n.RG32UI),he===n.BYTE&&(fe=n.RG8I),he===n.SHORT&&(fe=n.RG16I),he===n.INT&&(fe=n.RG32I)),P===n.RGB_INTEGER&&(he===n.UNSIGNED_BYTE&&(fe=n.RGB8UI),he===n.UNSIGNED_SHORT&&(fe=n.RGB16UI),he===n.UNSIGNED_INT&&(fe=n.RGB32UI),he===n.BYTE&&(fe=n.RGB8I),he===n.SHORT&&(fe=n.RGB16I),he===n.INT&&(fe=n.RGB32I)),P===n.RGBA_INTEGER&&(he===n.UNSIGNED_BYTE&&(fe=n.RGBA8UI),he===n.UNSIGNED_SHORT&&(fe=n.RGBA16UI),he===n.UNSIGNED_INT&&(fe=n.RGBA32UI),he===n.BYTE&&(fe=n.RGBA8I),he===n.SHORT&&(fe=n.RGBA16I),he===n.INT&&(fe=n.RGBA32I)),P===n.RGB&&(he===n.UNSIGNED_INT_5_9_9_9_REV&&(fe=n.RGB9_E5),he===n.UNSIGNED_INT_10F_11F_11F_REV&&(fe=n.R11F_G11F_B10F)),P===n.RGBA){const ze=de?mh:Nt.getTransfer(te);he===n.FLOAT&&(fe=n.RGBA32F),he===n.HALF_FLOAT&&(fe=n.RGBA16F),he===n.UNSIGNED_BYTE&&(fe=ze===lt?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(fe=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(fe=n.RGB5_A1)}return(fe===n.R16F||fe===n.R32F||fe===n.RG16F||fe===n.RG32F||fe===n.RGBA16F||fe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function A(K,P){let he;return K?P===null||P===An||P===Ts?he=n.DEPTH24_STENCIL8:P===hr?he=n.DEPTH32F_STENCIL8:P===pa&&(he=n.DEPTH24_STENCIL8,Ce("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):P===null||P===An||P===Ts?he=n.DEPTH_COMPONENT24:P===hr?he=n.DEPTH_COMPONENT32F:P===pa&&(he=n.DEPTH_COMPONENT16),he}function R(K,P){return _(K)===!0||K.isFramebufferTexture&&K.minFilter!==Rn&&K.minFilter!==Vn?Math.log2(Math.max(P.width,P.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?P.mipmaps.length:1}function w(K){const P=K.target;P.removeEventListener("dispose",w),I(P),P.isVideoTexture&&c.delete(P)}function M(K){const P=K.target;P.removeEventListener("dispose",M),k(P)}function I(K){const P=r.get(K);if(P.__webglInit===void 0)return;const he=K.source,te=f.get(he);if(te){const de=te[P.__cacheKey];de.usedTimes--,de.usedTimes===0&&C(K),Object.keys(te).length===0&&f.delete(he)}r.remove(K)}function C(K){const P=r.get(K);n.deleteTexture(P.__webglTexture);const he=K.source,te=f.get(he);delete te[P.__cacheKey],a.memory.textures--}function k(K){const P=r.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),r.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let te=0;te<6;te++){if(Array.isArray(P.__webglFramebuffer[te]))for(let de=0;de<P.__webglFramebuffer[te].length;de++)n.deleteFramebuffer(P.__webglFramebuffer[te][de]);else n.deleteFramebuffer(P.__webglFramebuffer[te]);P.__webglDepthbuffer&&n.deleteRenderbuffer(P.__webglDepthbuffer[te])}else{if(Array.isArray(P.__webglFramebuffer))for(let te=0;te<P.__webglFramebuffer.length;te++)n.deleteFramebuffer(P.__webglFramebuffer[te]);else n.deleteFramebuffer(P.__webglFramebuffer);if(P.__webglDepthbuffer&&n.deleteRenderbuffer(P.__webglDepthbuffer),P.__webglMultisampledFramebuffer&&n.deleteFramebuffer(P.__webglMultisampledFramebuffer),P.__webglColorRenderbuffer)for(let te=0;te<P.__webglColorRenderbuffer.length;te++)P.__webglColorRenderbuffer[te]&&n.deleteRenderbuffer(P.__webglColorRenderbuffer[te]);P.__webglDepthRenderbuffer&&n.deleteRenderbuffer(P.__webglDepthRenderbuffer)}const he=K.textures;for(let te=0,de=he.length;te<de;te++){const fe=r.get(he[te]);fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),a.memory.textures--),r.remove(he[te])}r.remove(K)}let O=0;function z(){O=0}function W(){const K=O;return K>=i.maxTextures&&Ce("WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+i.maxTextures),O+=1,K}function q(K){const P=[];return P.push(K.wrapS),P.push(K.wrapT),P.push(K.wrapR||0),P.push(K.magFilter),P.push(K.minFilter),P.push(K.anisotropy),P.push(K.internalFormat),P.push(K.format),P.push(K.type),P.push(K.generateMipmaps),P.push(K.premultiplyAlpha),P.push(K.flipY),P.push(K.unpackAlignment),P.push(K.colorSpace),P.join()}function X(K,P){const he=r.get(K);if(K.isVideoTexture&&Ot(K),K.isRenderTargetTexture===!1&&K.isExternalTexture!==!0&&K.version>0&&he.__version!==K.version){const te=K.image;if(te===null)Ce("WebGLRenderer: Texture marked for update but no image data found.");else if(te.complete===!1)Ce("WebGLRenderer: Texture marked for update but image is incomplete");else{V(he,K,P);return}}else K.isExternalTexture&&(he.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+P)}function Q(K,P){const he=r.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&he.__version!==K.version){V(he,K,P);return}else K.isExternalTexture&&(he.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+P)}function H(K,P){const he=r.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&he.__version!==K.version){V(he,K,P);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+P)}function G(K,P){const he=r.get(K);if(K.isCubeDepthTexture!==!0&&K.version>0&&he.__version!==K.version){ae(he,K,P);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+P)}const re={[Zu]:n.REPEAT,[Qi]:n.CLAMP_TO_EDGE,[Qu]:n.MIRRORED_REPEAT},D={[Rn]:n.NEAREST,[D1]:n.NEAREST_MIPMAP_NEAREST,[ko]:n.NEAREST_MIPMAP_LINEAR,[Vn]:n.LINEAR,[Ld]:n.LINEAR_MIPMAP_NEAREST,[Ji]:n.LINEAR_MIPMAP_LINEAR},U={[P1]:n.NEVER,[z1]:n.ALWAYS,[Jg]:n.LESS,[em]:n.LEQUAL,[F1]:n.EQUAL,[tm]:n.GEQUAL,[U1]:n.GREATER,[B1]:n.NOTEQUAL};function ne(K,P){if(P.type===hr&&e.has("OES_texture_float_linear")===!1&&(P.magFilter===Vn||P.magFilter===Ld||P.magFilter===ko||P.magFilter===Ji||P.minFilter===Vn||P.minFilter===Ld||P.minFilter===ko||P.minFilter===Ji)&&Ce("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(K,n.TEXTURE_WRAP_S,re[P.wrapS]),n.texParameteri(K,n.TEXTURE_WRAP_T,re[P.wrapT]),(K===n.TEXTURE_3D||K===n.TEXTURE_2D_ARRAY)&&n.texParameteri(K,n.TEXTURE_WRAP_R,re[P.wrapR]),n.texParameteri(K,n.TEXTURE_MAG_FILTER,D[P.magFilter]),n.texParameteri(K,n.TEXTURE_MIN_FILTER,D[P.minFilter]),P.compareFunction&&(n.texParameteri(K,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(K,n.TEXTURE_COMPARE_FUNC,U[P.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(P.magFilter===Rn||P.minFilter!==ko&&P.minFilter!==Ji||P.type===hr&&e.has("OES_texture_float_linear")===!1)return;if(P.anisotropy>1||r.get(P).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");n.texParameterf(K,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,i.getMaxAnisotropy())),r.get(P).__currentAnisotropy=P.anisotropy}}}function B(K,P){let he=!1;K.__webglInit===void 0&&(K.__webglInit=!0,P.addEventListener("dispose",w));const te=P.source;let de=f.get(te);de===void 0&&(de={},f.set(te,de));const fe=q(P);if(fe!==K.__cacheKey){de[fe]===void 0&&(de[fe]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,he=!0),de[fe].usedTimes++;const ze=de[K.__cacheKey];ze!==void 0&&(de[K.__cacheKey].usedTimes--,ze.usedTimes===0&&C(P)),K.__cacheKey=fe,K.__webglTexture=de[fe].texture}return he}function Oe(K,P,he){return Math.floor(Math.floor(K/he)/P)}function Y(K,P,he,te){const fe=K.updateRanges;if(fe.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,P.width,P.height,he,te,P.data);else{fe.sort((Fe,Ze)=>Fe.start-Ze.start);let ze=0;for(let Fe=1;Fe<fe.length;Fe++){const Ze=fe[ze],dt=fe[Fe],rt=Ze.start+Ze.count,Xe=Oe(dt.start,P.width,4),Mt=Oe(Ze.start,P.width,4);dt.start<=rt+1&&Xe===Mt&&Oe(dt.start+dt.count-1,P.width,4)===Xe?Ze.count=Math.max(Ze.count,dt.start+dt.count-Ze.start):(++ze,fe[ze]=dt)}fe.length=ze+1;const ke=n.getParameter(n.UNPACK_ROW_LENGTH),tt=n.getParameter(n.UNPACK_SKIP_PIXELS),wt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,P.width);for(let Fe=0,Ze=fe.length;Fe<Ze;Fe++){const dt=fe[Fe],rt=Math.floor(dt.start/4),Xe=Math.ceil(dt.count/4),Mt=rt%P.width,le=Math.floor(rt/P.width),st=Xe,He=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Mt),n.pixelStorei(n.UNPACK_SKIP_ROWS,le),t.texSubImage2D(n.TEXTURE_2D,0,Mt,le,st,He,he,te,P.data)}K.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,ke),n.pixelStorei(n.UNPACK_SKIP_PIXELS,tt),n.pixelStorei(n.UNPACK_SKIP_ROWS,wt)}}function V(K,P,he){let te=n.TEXTURE_2D;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(te=n.TEXTURE_2D_ARRAY),P.isData3DTexture&&(te=n.TEXTURE_3D);const de=B(K,P),fe=P.source;t.bindTexture(te,K.__webglTexture,n.TEXTURE0+he);const ze=r.get(fe);if(fe.version!==ze.__version||de===!0){t.activeTexture(n.TEXTURE0+he);const ke=Nt.getPrimaries(Nt.workingColorSpace),tt=P.colorSpace===Yi?null:Nt.getPrimaries(P.colorSpace),wt=P.colorSpace===Yi||ke===tt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let Fe=v(P.image,!1,i.maxTextureSize);Fe=Dt(P,Fe);const Ze=s.convert(P.format,P.colorSpace),dt=s.convert(P.type);let rt=E(P.internalFormat,Ze,dt,P.colorSpace,P.isVideoTexture);ne(te,P);let Xe;const Mt=P.mipmaps,le=P.isVideoTexture!==!0,st=ze.__version===void 0||de===!0,He=fe.dataReady,at=R(P,Fe);if(P.isDepthTexture)rt=A(P.format===Li,P.type),st&&(le?t.texStorage2D(n.TEXTURE_2D,1,rt,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,rt,Fe.width,Fe.height,0,Ze,dt,null));else if(P.isDataTexture)if(Mt.length>0){le&&st&&t.texStorage2D(n.TEXTURE_2D,at,rt,Mt[0].width,Mt[0].height);for(let Ge=0,Le=Mt.length;Ge<Le;Ge++)Xe=Mt[Ge],le?He&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Xe.width,Xe.height,Ze,dt,Xe.data):t.texImage2D(n.TEXTURE_2D,Ge,rt,Xe.width,Xe.height,0,Ze,dt,Xe.data);P.generateMipmaps=!1}else le?(st&&t.texStorage2D(n.TEXTURE_2D,at,rt,Fe.width,Fe.height),He&&Y(P,Fe,Ze,dt)):t.texImage2D(n.TEXTURE_2D,0,rt,Fe.width,Fe.height,0,Ze,dt,Fe.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){le&&st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,rt,Mt[0].width,Mt[0].height,Fe.depth);for(let Ge=0,Le=Mt.length;Ge<Le;Ge++)if(Xe=Mt[Ge],P.format!==pr)if(Ze!==null)if(le){if(He)if(P.layerUpdates.size>0){const Je=IT(Xe.width,Xe.height,P.format,P.type);for(const zt of P.layerUpdates){const Nn=Xe.data.subarray(zt*Je/Xe.data.BYTES_PER_ELEMENT,(zt+1)*Je/Xe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,zt,Xe.width,Xe.height,1,Ze,Nn)}P.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Xe.width,Xe.height,Fe.depth,Ze,Xe.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ge,rt,Xe.width,Xe.height,Fe.depth,0,Xe.data,0,0);else Ce("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else le?He&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Xe.width,Xe.height,Fe.depth,Ze,dt,Xe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ge,rt,Xe.width,Xe.height,Fe.depth,0,Ze,dt,Xe.data)}else{le&&st&&t.texStorage2D(n.TEXTURE_2D,at,rt,Mt[0].width,Mt[0].height);for(let Ge=0,Le=Mt.length;Ge<Le;Ge++)Xe=Mt[Ge],P.format!==pr?Ze!==null?le?He&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ge,0,0,Xe.width,Xe.height,Ze,Xe.data):t.compressedTexImage2D(n.TEXTURE_2D,Ge,rt,Xe.width,Xe.height,0,Xe.data):Ce("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?He&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Xe.width,Xe.height,Ze,dt,Xe.data):t.texImage2D(n.TEXTURE_2D,Ge,rt,Xe.width,Xe.height,0,Ze,dt,Xe.data)}else if(P.isDataArrayTexture)if(le){if(st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,rt,Fe.width,Fe.height,Fe.depth),He)if(P.layerUpdates.size>0){const Ge=IT(Fe.width,Fe.height,P.format,P.type);for(const Le of P.layerUpdates){const Je=Fe.data.subarray(Le*Ge/Fe.data.BYTES_PER_ELEMENT,(Le+1)*Ge/Fe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Le,Fe.width,Fe.height,1,Ze,dt,Je)}P.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,Ze,dt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,rt,Fe.width,Fe.height,Fe.depth,0,Ze,dt,Fe.data);else if(P.isData3DTexture)le?(st&&t.texStorage3D(n.TEXTURE_3D,at,rt,Fe.width,Fe.height,Fe.depth),He&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,Ze,dt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,rt,Fe.width,Fe.height,Fe.depth,0,Ze,dt,Fe.data);else if(P.isFramebufferTexture){if(st)if(le)t.texStorage2D(n.TEXTURE_2D,at,rt,Fe.width,Fe.height);else{let Ge=Fe.width,Le=Fe.height;for(let Je=0;Je<at;Je++)t.texImage2D(n.TEXTURE_2D,Je,rt,Ge,Le,0,Ze,dt,null),Ge>>=1,Le>>=1}}else if(Mt.length>0){if(le&&st){const Ge=it(Mt[0]);t.texStorage2D(n.TEXTURE_2D,at,rt,Ge.width,Ge.height)}for(let Ge=0,Le=Mt.length;Ge<Le;Ge++)Xe=Mt[Ge],le?He&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Ze,dt,Xe):t.texImage2D(n.TEXTURE_2D,Ge,rt,Ze,dt,Xe);P.generateMipmaps=!1}else if(le){if(st){const Ge=it(Fe);t.texStorage2D(n.TEXTURE_2D,at,rt,Ge.width,Ge.height)}He&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,dt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,rt,Ze,dt,Fe);_(P)&&b(te),ze.__version=fe.version,P.onUpdate&&P.onUpdate(P)}K.__version=P.version}function ae(K,P,he){if(P.image.length!==6)return;const te=B(K,P),de=P.source;t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+he);const fe=r.get(de);if(de.version!==fe.__version||te===!0){t.activeTexture(n.TEXTURE0+he);const ze=Nt.getPrimaries(Nt.workingColorSpace),ke=P.colorSpace===Yi?null:Nt.getPrimaries(P.colorSpace),tt=P.colorSpace===Yi||ze===ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);const wt=P.isCompressedTexture||P.image[0].isCompressedTexture,Fe=P.image[0]&&P.image[0].isDataTexture,Ze=[];for(let Le=0;Le<6;Le++)!wt&&!Fe?Ze[Le]=v(P.image[Le],!0,i.maxCubemapSize):Ze[Le]=Fe?P.image[Le].image:P.image[Le],Ze[Le]=Dt(P,Ze[Le]);const dt=Ze[0],rt=s.convert(P.format,P.colorSpace),Xe=s.convert(P.type),Mt=E(P.internalFormat,rt,Xe,P.colorSpace),le=P.isVideoTexture!==!0,st=fe.__version===void 0||te===!0,He=de.dataReady;let at=R(P,dt);ne(n.TEXTURE_CUBE_MAP,P);let Ge;if(wt){le&&st&&t.texStorage2D(n.TEXTURE_CUBE_MAP,at,Mt,dt.width,dt.height);for(let Le=0;Le<6;Le++){Ge=Ze[Le].mipmaps;for(let Je=0;Je<Ge.length;Je++){const zt=Ge[Je];P.format!==pr?rt!==null?le?He&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,0,0,zt.width,zt.height,rt,zt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,Mt,zt.width,zt.height,0,zt.data):Ce("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,0,0,zt.width,zt.height,rt,Xe,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je,Mt,zt.width,zt.height,0,rt,Xe,zt.data)}}}else{if(Ge=P.mipmaps,le&&st){Ge.length>0&&at++;const Le=it(Ze[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,at,Mt,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Fe){le?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,Ze[Le].width,Ze[Le].height,rt,Xe,Ze[Le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Mt,Ze[Le].width,Ze[Le].height,0,rt,Xe,Ze[Le].data);for(let Je=0;Je<Ge.length;Je++){const Nn=Ge[Je].image[Le].image;le?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,0,0,Nn.width,Nn.height,rt,Xe,Nn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,Mt,Nn.width,Nn.height,0,rt,Xe,Nn.data)}}else{le?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,rt,Xe,Ze[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Mt,rt,Xe,Ze[Le]);for(let Je=0;Je<Ge.length;Je++){const zt=Ge[Je];le?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,0,0,rt,Xe,zt.image[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Je+1,Mt,rt,Xe,zt.image[Le])}}}_(P)&&b(n.TEXTURE_CUBE_MAP),fe.__version=de.version,P.onUpdate&&P.onUpdate(P)}K.__version=P.version}function _e(K,P,he,te,de,fe){const ze=s.convert(he.format,he.colorSpace),ke=s.convert(he.type),tt=E(he.internalFormat,ze,ke,he.colorSpace),wt=r.get(P),Fe=r.get(he);if(Fe.__renderTarget=P,!wt.__hasExternalTextures){const Ze=Math.max(1,P.width>>fe),dt=Math.max(1,P.height>>fe);de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?t.texImage3D(de,fe,tt,Ze,dt,P.depth,0,ze,ke,null):t.texImage2D(de,fe,tt,Ze,dt,0,ze,ke,null)}t.bindFramebuffer(n.FRAMEBUFFER,K),Qt(P)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,te,de,Fe.__webglTexture,0,J(P)):(de===n.TEXTURE_2D||de>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,te,de,Fe.__webglTexture,fe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(K,P,he){if(n.bindRenderbuffer(n.RENDERBUFFER,K),P.depthBuffer){const te=P.depthTexture,de=te&&te.isDepthTexture?te.type:null,fe=A(P.stencilBuffer,de),ze=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Qt(P)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(P),fe,P.width,P.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(P),fe,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,fe,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,K)}else{const te=P.textures;for(let de=0;de<te.length;de++){const fe=te[de],ze=s.convert(fe.format,fe.colorSpace),ke=s.convert(fe.type),tt=E(fe.internalFormat,ze,ke,fe.colorSpace);Qt(P)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J(P),tt,P.width,P.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,J(P),tt,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,tt,P.width,P.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function De(K,P,he){const te=P.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,K),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=r.get(P.depthTexture);if(de.__renderTarget=P,(!de.__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),te){if(de.__webglInit===void 0&&(de.__webglInit=!0,P.depthTexture.addEventListener("dispose",w)),de.__webglTexture===void 0){de.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),ne(n.TEXTURE_CUBE_MAP,P.depthTexture);const wt=s.convert(P.depthTexture.format),Fe=s.convert(P.depthTexture.type);let Ze;P.depthTexture.format===Jr?Ze=n.DEPTH_COMPONENT24:P.depthTexture.format===Li&&(Ze=n.DEPTH24_STENCIL8);for(let dt=0;dt<6;dt++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,Ze,P.width,P.height,0,wt,Fe,null)}}else X(P.depthTexture,0);const fe=de.__webglTexture,ze=J(P),ke=te?n.TEXTURE_CUBE_MAP_POSITIVE_X+he:n.TEXTURE_2D,tt=P.depthTexture.format===Li?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(P.depthTexture.format===Jr)Qt(P)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,tt,ke,fe,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,tt,ke,fe,0);else if(P.depthTexture.format===Li)Qt(P)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,tt,ke,fe,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,tt,ke,fe,0);else throw new Error("Unknown depthTexture format")}function ft(K){const P=r.get(K),he=K.isWebGLCubeRenderTarget===!0;if(P.__boundDepthTexture!==K.depthTexture){const te=K.depthTexture;if(P.__depthDisposeCallback&&P.__depthDisposeCallback(),te){const de=()=>{delete P.__boundDepthTexture,delete P.__depthDisposeCallback,te.removeEventListener("dispose",de)};te.addEventListener("dispose",de),P.__depthDisposeCallback=de}P.__boundDepthTexture=te}if(K.depthTexture&&!P.__autoAllocateDepthBuffer)if(he)for(let te=0;te<6;te++)De(P.__webglFramebuffer[te],K,te);else{const te=K.texture.mipmaps;te&&te.length>0?De(P.__webglFramebuffer[0],K,0):De(P.__webglFramebuffer,K,0)}else if(he){P.__webglDepthbuffer=[];for(let te=0;te<6;te++)if(t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer[te]),P.__webglDepthbuffer[te]===void 0)P.__webglDepthbuffer[te]=n.createRenderbuffer(),Pe(P.__webglDepthbuffer[te],K,!1);else{const de=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=P.__webglDepthbuffer[te];n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,de,n.RENDERBUFFER,fe)}}else{const te=K.texture.mipmaps;if(te&&te.length>0?t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer),P.__webglDepthbuffer===void 0)P.__webglDepthbuffer=n.createRenderbuffer(),Pe(P.__webglDepthbuffer,K,!1);else{const de=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=P.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,de,n.RENDERBUFFER,fe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ln(K,P,he){const te=r.get(K);P!==void 0&&_e(te.__webglFramebuffer,K,K.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&ft(K)}function Se(K){const P=K.texture,he=r.get(K),te=r.get(P);K.addEventListener("dispose",M);const de=K.textures,fe=K.isWebGLCubeRenderTarget===!0,ze=de.length>1;if(ze||(te.__webglTexture===void 0&&(te.__webglTexture=n.createTexture()),te.__version=P.version,a.memory.textures++),fe){he.__webglFramebuffer=[];for(let ke=0;ke<6;ke++)if(P.mipmaps&&P.mipmaps.length>0){he.__webglFramebuffer[ke]=[];for(let tt=0;tt<P.mipmaps.length;tt++)he.__webglFramebuffer[ke][tt]=n.createFramebuffer()}else he.__webglFramebuffer[ke]=n.createFramebuffer()}else{if(P.mipmaps&&P.mipmaps.length>0){he.__webglFramebuffer=[];for(let ke=0;ke<P.mipmaps.length;ke++)he.__webglFramebuffer[ke]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(ze)for(let ke=0,tt=de.length;ke<tt;ke++){const wt=r.get(de[ke]);wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture(),a.memory.textures++)}if(K.samples>0&&Qt(K)===!1){he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let ke=0;ke<de.length;ke++){const tt=de[ke];he.__webglColorRenderbuffer[ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[ke]);const wt=s.convert(tt.format,tt.colorSpace),Fe=s.convert(tt.type),Ze=E(tt.internalFormat,wt,Fe,tt.colorSpace,K.isXRRenderTarget===!0),dt=J(K);n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,Ze,K.width,K.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.RENDERBUFFER,he.__webglColorRenderbuffer[ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),K.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),Pe(he.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture),ne(n.TEXTURE_CUBE_MAP,P);for(let ke=0;ke<6;ke++)if(P.mipmaps&&P.mipmaps.length>0)for(let tt=0;tt<P.mipmaps.length;tt++)_e(he.__webglFramebuffer[ke][tt],K,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ke,tt);else _e(he.__webglFramebuffer[ke],K,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0);_(P)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ze){for(let ke=0,tt=de.length;ke<tt;ke++){const wt=de[ke],Fe=r.get(wt);let Ze=n.TEXTURE_2D;(K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(Ze=K.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ze,Fe.__webglTexture),ne(Ze,wt),_e(he.__webglFramebuffer,K,wt,n.COLOR_ATTACHMENT0+ke,Ze,0),_(wt)&&b(Ze)}t.unbindTexture()}else{let ke=n.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(ke=K.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ke,te.__webglTexture),ne(ke,P),P.mipmaps&&P.mipmaps.length>0)for(let tt=0;tt<P.mipmaps.length;tt++)_e(he.__webglFramebuffer[tt],K,P,n.COLOR_ATTACHMENT0,ke,tt);else _e(he.__webglFramebuffer,K,P,n.COLOR_ATTACHMENT0,ke,0);_(P)&&b(ke),t.unbindTexture()}K.depthBuffer&&ft(K)}function Me(K){const P=K.textures;for(let he=0,te=P.length;he<te;he++){const de=P[he];if(_(de)){const fe=S(K),ze=r.get(de).__webglTexture;t.bindTexture(fe,ze),b(fe),t.unbindTexture()}}}const nt=[],qe=[];function je(K){if(K.samples>0){if(Qt(K)===!1){const P=K.textures,he=K.width,te=K.height;let de=n.COLOR_BUFFER_BIT;const fe=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ze=r.get(K),ke=P.length>1;if(ke)for(let wt=0;wt<P.length;wt++)t.bindFramebuffer(n.FRAMEBUFFER,ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ze.__webglMultisampledFramebuffer);const tt=K.texture.mipmaps;tt&&tt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ze.__webglFramebuffer);for(let wt=0;wt<P.length;wt++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(de|=n.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(de|=n.STENCIL_BUFFER_BIT)),ke){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ze.__webglColorRenderbuffer[wt]);const Fe=r.get(P[wt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Fe,0)}n.blitFramebuffer(0,0,he,te,0,0,he,te,de,n.NEAREST),l===!0&&(nt.length=0,qe.length=0,nt.push(n.COLOR_ATTACHMENT0+wt),K.depthBuffer&&K.resolveDepthBuffer===!1&&(nt.push(fe),qe.push(fe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,qe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,nt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ke)for(let wt=0;wt<P.length;wt++){t.bindFramebuffer(n.FRAMEBUFFER,ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,ze.__webglColorRenderbuffer[wt]);const Fe=r.get(P[wt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,Fe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ze.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&l){const P=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[P])}}}function J(K){return Math.min(i.maxSamples,K.samples)}function Qt(K){const P=r.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&P.__useRenderToTexture!==!1}function Ot(K){const P=a.render.frame;c.get(K)!==P&&(c.set(K,P),K.update())}function Dt(K,P){const he=K.colorSpace,te=K.format,de=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||he!==tc&&he!==Yi&&(Nt.getTransfer(he)===lt?(te!==pr||de!==qn)&&Ce("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ie("WebGLTextures: Unsupported texture color space:",he)),P}function it(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(u.width=K.naturalWidth||K.width,u.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(u.width=K.displayWidth,u.height=K.displayHeight):(u.width=K.width,u.height=K.height),u}this.allocateTextureUnit=W,this.resetTextureUnits=z,this.setTexture2D=X,this.setTexture2DArray=Q,this.setTexture3D=H,this.setTextureCube=G,this.rebindTextures=ln,this.setupRenderTarget=Se,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=je,this.setupDepthRenderbuffer=ft,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=Qt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function Qoe(n,e){function t(r,i=Yi){let s;const a=Nt.getTransfer(i);if(r===qn)return n.UNSIGNED_BYTE;if(r===Q_)return n.UNSIGNED_SHORT_4_4_4_4;if(r===J_)return n.UNSIGNED_SHORT_5_5_5_1;if(r===ev)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===tv)return n.UNSIGNED_INT_10F_11F_11F_REV;if(r===$u)return n.BYTE;if(r===Hu)return n.SHORT;if(r===pa)return n.UNSIGNED_SHORT;if(r===Vr)return n.INT;if(r===An)return n.UNSIGNED_INT;if(r===hr)return n.FLOAT;if(r===tr)return n.HALF_FLOAT;if(r===O1)return n.ALPHA;if(r===Zg)return n.RGB;if(r===pr)return n.RGBA;if(r===Jr)return n.DEPTH_COMPONENT;if(r===Li)return n.DEPTH_STENCIL;if(r===Qg)return n.RED;if(r===zh)return n.RED_INTEGER;if(r===Di)return n.RG;if(r===Gh)return n.RG_INTEGER;if(r===Vh)return n.RGBA_INTEGER;if(r===Ll||r===Dl||r===Ol||r===Pl)if(a===lt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Ll)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Dl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Ol)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Pl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Ll)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Dl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Ol)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Pl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===vg||r===xg||r===Sg||r===Eg)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===vg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===xg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Sg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Eg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Wd||r===qd||r===Xd||r===Yd||r===Kd||r===Ju||r===Zd)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Wd||r===qd)return a===lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Xd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(r===Yd)return s.COMPRESSED_R11_EAC;if(r===Kd)return s.COMPRESSED_SIGNED_R11_EAC;if(r===Ju)return s.COMPRESSED_RG11_EAC;if(r===Zd)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(r===Qd||r===Jd||r===eh||r===th||r===nh||r===rh||r===ih||r===sh||r===ah||r===oh||r===lh||r===uh||r===ch||r===dh)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Qd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Jd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===eh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===th)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===nh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===rh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===ih)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===sh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===ah)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===oh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===lh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===uh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===ch)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===dh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===hh||r===RT||r===NT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===hh)return a===lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===RT)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===NT)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===ph||r===fh||r===ec||r===gh)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===ph)return s.COMPRESSED_RED_RGTC1_EXT;if(r===fh)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===ec)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===gh)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Ts?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const Joe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ele=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class tle{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new xV(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Hs({vertexShader:Joe,fragmentShader:ele,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new wr(new am(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class nle extends ro{constructor(e,t){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,h=null,f=null,g=null,m=null;const v=typeof XRWebGLBinding<"u",_=new tle,b={},S=t.getContextAttributes();let E=null,A=null;const R=[],w=[],M=new $e;let I=null;const C=new $r;C.viewport=new Wt;const k=new $r;k.viewport=new Wt;const O=[C,k],z=new NV;let W=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let ae=R[V];return ae===void 0&&(ae=new Vb,R[V]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(V){let ae=R[V];return ae===void 0&&(ae=new Vb,R[V]=ae),ae.getGripSpace()},this.getHand=function(V){let ae=R[V];return ae===void 0&&(ae=new Vb,R[V]=ae),ae.getHandSpace()};function X(V){const ae=w.indexOf(V.inputSource);if(ae===-1)return;const _e=R[ae];_e!==void 0&&(_e.update(V.inputSource,V.frame,u||a),_e.dispatchEvent({type:V.type,data:V.inputSource}))}function Q(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",H);for(let V=0;V<R.length;V++){const ae=w[V];ae!==null&&(w[V]=null,R[V].disconnect(ae))}W=null,q=null,_.reset();for(const V in b)delete b[V];e.setRenderTarget(E),g=null,f=null,h=null,i=null,A=null,Y.stop(),r.isPresenting=!1,e.setPixelRatio(I),e.setSize(M.width,M.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&Ce("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){o=V,r.isPresenting===!0&&Ce("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(V){u=V},this.getBaseLayer=function(){return f!==null?f:g},this.getBinding=function(){return h===null&&v&&(h=new XRWebGLBinding(i,t)),h},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(V){if(i=V,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",H),S.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(M),v&&"createProjectionLayer"in XRWebGLBinding.prototype){let _e=null,Pe=null,De=null;S.depth&&(De=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,_e=S.stencil?Li:Jr,Pe=S.stencil?Ts:An);const ft={colorFormat:t.RGBA8,depthFormat:De,scaleFactor:s};h=this.getBinding(),f=h.createProjectionLayer(ft),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),A=new ga(f.textureWidth,f.textureHeight,{format:pr,type:qn,depthTexture:new Fi(f.textureWidth,f.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const _e={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,t,_e),i.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),A=new ga(g.framebufferWidth,g.framebufferHeight,{format:pr,type:qn,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(o),Y.setContext(i),Y.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function H(V){for(let ae=0;ae<V.removed.length;ae++){const _e=V.removed[ae],Pe=w.indexOf(_e);Pe>=0&&(w[Pe]=null,R[Pe].disconnect(_e))}for(let ae=0;ae<V.added.length;ae++){const _e=V.added[ae];let Pe=w.indexOf(_e);if(Pe===-1){for(let ft=0;ft<R.length;ft++)if(ft>=w.length){w.push(_e),Pe=ft;break}else if(w[ft]===null){w[ft]=_e,Pe=ft;break}if(Pe===-1)break}const De=R[Pe];De&&De.connect(_e)}}const G=new Z,re=new Z;function D(V,ae,_e){G.setFromMatrixPosition(ae.matrixWorld),re.setFromMatrixPosition(_e.matrixWorld);const Pe=G.distanceTo(re),De=ae.projectionMatrix.elements,ft=_e.projectionMatrix.elements,ln=De[14]/(De[10]-1),Se=De[14]/(De[10]+1),Me=(De[9]+1)/De[5],nt=(De[9]-1)/De[5],qe=(De[8]-1)/De[0],je=(ft[8]+1)/ft[0],J=ln*qe,Qt=ln*je,Ot=Pe/(-qe+je),Dt=Ot*-qe;if(ae.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Dt),V.translateZ(Ot),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert(),De[10]===-1)V.projectionMatrix.copy(ae.projectionMatrix),V.projectionMatrixInverse.copy(ae.projectionMatrixInverse);else{const it=ln+Ot,K=Se+Ot,P=J-Dt,he=Qt+(Pe-Dt),te=Me*Se/K*it,de=nt*Se/K*it;V.projectionMatrix.makePerspective(P,he,te,de,it,K),V.projectionMatrixInverse.copy(V.projectionMatrix).invert()}}function U(V,ae){ae===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(ae.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(i===null)return;let ae=V.near,_e=V.far;_.texture!==null&&(_.depthNear>0&&(ae=_.depthNear),_.depthFar>0&&(_e=_.depthFar)),z.near=k.near=C.near=ae,z.far=k.far=C.far=_e,(W!==z.near||q!==z.far)&&(i.updateRenderState({depthNear:z.near,depthFar:z.far}),W=z.near,q=z.far),z.layers.mask=V.layers.mask|6,C.layers.mask=z.layers.mask&3,k.layers.mask=z.layers.mask&5;const Pe=V.parent,De=z.cameras;U(z,Pe);for(let ft=0;ft<De.length;ft++)U(De[ft],Pe);De.length===2?D(z,C,k):z.projectionMatrix.copy(C.projectionMatrix),ne(V,z,Pe)};function ne(V,ae,_e){_e===null?V.matrix.copy(ae.matrixWorld):(V.matrix.copy(_e.matrixWorld),V.matrix.invert(),V.matrix.multiply(ae.matrixWorld)),V.matrix.decompose(V.position,V.quaternion,V.scale),V.updateMatrixWorld(!0),V.projectionMatrix.copy(ae.projectionMatrix),V.projectionMatrixInverse.copy(ae.projectionMatrixInverse),V.isPerspectiveCamera&&(V.fov=nc*2*Math.atan(1/V.projectionMatrix.elements[5]),V.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(f===null&&g===null))return l},this.setFoveation=function(V){l=V,f!==null&&(f.fixedFoveation=V),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=V)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(z)},this.getCameraTexture=function(V){return b[V]};let B=null;function Oe(V,ae){if(c=ae.getViewerPose(u||a),m=ae,c!==null){const _e=c.views;g!==null&&(e.setRenderTargetFramebuffer(A,g.framebuffer),e.setRenderTarget(A));let Pe=!1;_e.length!==z.cameras.length&&(z.cameras.length=0,Pe=!0);for(let Se=0;Se<_e.length;Se++){const Me=_e[Se];let nt=null;if(g!==null)nt=g.getViewport(Me);else{const je=h.getViewSubImage(f,Me);nt=je.viewport,Se===0&&(e.setRenderTargetTextures(A,je.colorTexture,je.depthStencilTexture),e.setRenderTarget(A))}let qe=O[Se];qe===void 0&&(qe=new $r,qe.layers.enable(Se),qe.viewport=new Wt,O[Se]=qe),qe.matrix.fromArray(Me.transform.matrix),qe.matrix.decompose(qe.position,qe.quaternion,qe.scale),qe.projectionMatrix.fromArray(Me.projectionMatrix),qe.projectionMatrixInverse.copy(qe.projectionMatrix).invert(),qe.viewport.set(nt.x,nt.y,nt.width,nt.height),Se===0&&(z.matrix.copy(qe.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),Pe===!0&&z.cameras.push(qe)}const De=i.enabledFeatures;if(De&&De.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&v){h=r.getBinding();const Se=h.getDepthInformation(_e[0]);Se&&Se.isValid&&Se.texture&&_.init(Se,i.renderState)}if(De&&De.includes("camera-access")&&v){e.state.unbindTexture(),h=r.getBinding();for(let Se=0;Se<_e.length;Se++){const Me=_e[Se].camera;if(Me){let nt=b[Me];nt||(nt=new xV,b[Me]=nt);const qe=h.getCameraImage(Me);nt.sourceTexture=qe}}}}for(let _e=0;_e<R.length;_e++){const Pe=w[_e],De=R[_e];Pe!==null&&De!==void 0&&De.update(Pe,ae,u||a)}B&&B(V,ae),ae.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ae}),m=null}const Y=new IV;Y.setAnimationLoop(Oe),this.setAnimationLoop=function(V){B=V},this.dispose=function(){}}}const vu=new is,rle=new sn;function ile(n,e){function t(_,b){_.matrixAutoUpdate===!0&&_.updateMatrix(),b.value.copy(_.matrix)}function r(_,b){b.color.getRGB(_.fogColor.value,gV(n)),b.isFog?(_.fogNear.value=b.near,_.fogFar.value=b.far):b.isFogExp2&&(_.fogDensity.value=b.density)}function i(_,b,S,E,A){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(_,b):b.isMeshToonMaterial?(s(_,b),h(_,b)):b.isMeshPhongMaterial?(s(_,b),c(_,b)):b.isMeshStandardMaterial?(s(_,b),f(_,b),b.isMeshPhysicalMaterial&&g(_,b,A)):b.isMeshMatcapMaterial?(s(_,b),m(_,b)):b.isMeshDepthMaterial?s(_,b):b.isMeshDistanceMaterial?(s(_,b),v(_,b)):b.isMeshNormalMaterial?s(_,b):b.isLineBasicMaterial?(a(_,b),b.isLineDashedMaterial&&o(_,b)):b.isPointsMaterial?l(_,b,S,E):b.isSpriteMaterial?u(_,b):b.isShadowMaterial?(_.color.value.copy(b.color),_.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(_,b){_.opacity.value=b.opacity,b.color&&_.diffuse.value.copy(b.color),b.emissive&&_.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(_.map.value=b.map,t(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.bumpMap&&(_.bumpMap.value=b.bumpMap,t(b.bumpMap,_.bumpMapTransform),_.bumpScale.value=b.bumpScale,b.side===On&&(_.bumpScale.value*=-1)),b.normalMap&&(_.normalMap.value=b.normalMap,t(b.normalMap,_.normalMapTransform),_.normalScale.value.copy(b.normalScale),b.side===On&&_.normalScale.value.negate()),b.displacementMap&&(_.displacementMap.value=b.displacementMap,t(b.displacementMap,_.displacementMapTransform),_.displacementScale.value=b.displacementScale,_.displacementBias.value=b.displacementBias),b.emissiveMap&&(_.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,_.emissiveMapTransform)),b.specularMap&&(_.specularMap.value=b.specularMap,t(b.specularMap,_.specularMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest);const S=e.get(b),E=S.envMap,A=S.envMapRotation;E&&(_.envMap.value=E,vu.copy(A),vu.x*=-1,vu.y*=-1,vu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(vu.y*=-1,vu.z*=-1),_.envMapRotation.value.setFromMatrix4(rle.makeRotationFromEuler(vu)),_.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=b.reflectivity,_.ior.value=b.ior,_.refractionRatio.value=b.refractionRatio),b.lightMap&&(_.lightMap.value=b.lightMap,_.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,_.lightMapTransform)),b.aoMap&&(_.aoMap.value=b.aoMap,_.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,_.aoMapTransform))}function a(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,b.map&&(_.map.value=b.map,t(b.map,_.mapTransform))}function o(_,b){_.dashSize.value=b.dashSize,_.totalSize.value=b.dashSize+b.gapSize,_.scale.value=b.scale}function l(_,b,S,E){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.size.value=b.size*S,_.scale.value=E*.5,b.map&&(_.map.value=b.map,t(b.map,_.uvTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function u(_,b){_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,_.rotation.value=b.rotation,b.map&&(_.map.value=b.map,t(b.map,_.mapTransform)),b.alphaMap&&(_.alphaMap.value=b.alphaMap,t(b.alphaMap,_.alphaMapTransform)),b.alphaTest>0&&(_.alphaTest.value=b.alphaTest)}function c(_,b){_.specular.value.copy(b.specular),_.shininess.value=Math.max(b.shininess,1e-4)}function h(_,b){b.gradientMap&&(_.gradientMap.value=b.gradientMap)}function f(_,b){_.metalness.value=b.metalness,b.metalnessMap&&(_.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,_.metalnessMapTransform)),_.roughness.value=b.roughness,b.roughnessMap&&(_.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,_.roughnessMapTransform)),b.envMap&&(_.envMapIntensity.value=b.envMapIntensity)}function g(_,b,S){_.ior.value=b.ior,b.sheen>0&&(_.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),_.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(_.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,_.sheenColorMapTransform)),b.sheenRoughnessMap&&(_.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,_.sheenRoughnessMapTransform))),b.clearcoat>0&&(_.clearcoat.value=b.clearcoat,_.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(_.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,_.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(_.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===On&&_.clearcoatNormalScale.value.negate())),b.dispersion>0&&(_.dispersion.value=b.dispersion),b.iridescence>0&&(_.iridescence.value=b.iridescence,_.iridescenceIOR.value=b.iridescenceIOR,_.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(_.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,_.iridescenceMapTransform)),b.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),b.transmission>0&&(_.transmission.value=b.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),b.transmissionMap&&(_.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,_.transmissionMapTransform)),_.thickness.value=b.thickness,b.thicknessMap&&(_.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=b.attenuationDistance,_.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(_.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(_.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=b.specularIntensity,_.specularColor.value.copy(b.specularColor),b.specularColorMap&&(_.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,_.specularColorMapTransform)),b.specularIntensityMap&&(_.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,_.specularIntensityMapTransform))}function m(_,b){b.matcap&&(_.matcap.value=b.matcap)}function v(_,b){const S=e.get(b).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function sle(n,e,t,r){let i={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const A=E.program;r.uniformBlockBinding(S,A)}function u(S,E){let A=i[S.id];A===void 0&&(m(S),A=c(S),i[S.id]=A,S.addEventListener("dispose",_));const R=E.program;r.updateUBOMapping(S,R);const w=e.render.frame;s[S.id]!==w&&(f(S),s[S.id]=w)}function c(S){const E=h();S.__bindingPointIndex=E;const A=n.createBuffer(),R=S.__size,w=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,R,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,A),A}function h(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return Ie("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){const E=i[S.id],A=S.uniforms,R=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let w=0,M=A.length;w<M;w++){const I=Array.isArray(A[w])?A[w]:[A[w]];for(let C=0,k=I.length;C<k;C++){const O=I[C];if(g(O,w,C,R)===!0){const z=O.__offset,W=Array.isArray(O.value)?O.value:[O.value];let q=0;for(let X=0;X<W.length;X++){const Q=W[X],H=v(Q);typeof Q=="number"||typeof Q=="boolean"?(O.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,z+q,O.__data)):Q.isMatrix3?(O.__data[0]=Q.elements[0],O.__data[1]=Q.elements[1],O.__data[2]=Q.elements[2],O.__data[3]=0,O.__data[4]=Q.elements[3],O.__data[5]=Q.elements[4],O.__data[6]=Q.elements[5],O.__data[7]=0,O.__data[8]=Q.elements[6],O.__data[9]=Q.elements[7],O.__data[10]=Q.elements[8],O.__data[11]=0):(Q.toArray(O.__data,q),q+=H.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(S,E,A,R){const w=S.value,M=E+"_"+A;if(R[M]===void 0)return typeof w=="number"||typeof w=="boolean"?R[M]=w:R[M]=w.clone(),!0;{const I=R[M];if(typeof w=="number"||typeof w=="boolean"){if(I!==w)return R[M]=w,!0}else if(I.equals(w)===!1)return I.copy(w),!0}return!1}function m(S){const E=S.uniforms;let A=0;const R=16;for(let M=0,I=E.length;M<I;M++){const C=Array.isArray(E[M])?E[M]:[E[M]];for(let k=0,O=C.length;k<O;k++){const z=C[k],W=Array.isArray(z.value)?z.value:[z.value];for(let q=0,X=W.length;q<X;q++){const Q=W[q],H=v(Q),G=A%R,re=G%H.boundary,D=G+re;A+=re,D!==0&&R-D<H.storage&&(A+=R-D),z.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=A,A+=H.storage}}}const w=A%R;return w>0&&(A+=R-w),S.__size=A,S.__cache={},this}function v(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?Ce("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Ce("WebGLRenderer: Unsupported uniform value type.",S),E}function _(S){const E=S.target;E.removeEventListener("dispose",_);const A=a.indexOf(E.__bindingPointIndex);a.splice(A,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function b(){for(const S in i)n.deleteBuffer(i[S]);a=[],i={},s={}}return{bind:l,update:u,dispose:b}}const ale=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Na=null;function ole(){return Na===null&&(Na=new Z1(ale,16,16,Di,tr),Na.name="DFG_LUT",Na.minFilter=Vn,Na.magFilter=Vn,Na.wrapS=Qi,Na.wrapT=Qi,Na.generateMipmaps=!1,Na.needsUpdate=!0),Na}class lle{constructor(e={}){const{canvas:t=hV(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:f=!1,outputBufferType:g=qn}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=a;const v=g,_=new Set([Vh,Gh,zh]),b=new Set([qn,An,pa,Ts,Q_,J_]),S=new Uint32Array(4),E=new Int32Array(4);let A=null,R=null;const w=[],M=[];let I=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Qr,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let k=!1;this._outputColorSpace=Ci;let O=0,z=0,W=null,q=-1,X=null;const Q=new Wt,H=new Wt;let G=null;const re=new Et(0);let D=0,U=t.width,ne=t.height,B=1,Oe=null,Y=null;const V=new Wt(0,0,U,ne),ae=new Wt(0,0,U,ne);let _e=!1;const Pe=new im;let De=!1,ft=!1;const ln=new sn,Se=new Z,Me=new Wt,nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let qe=!1;function je(){return W===null?B:1}let J=r;function Qt($,pe){return t.getContext($,pe)}try{const $={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${dc}`),t.addEventListener("webglcontextlost",zt,!1),t.addEventListener("webglcontextrestored",Nn,!1),t.addEventListener("webglcontextcreationerror",pn,!1),J===null){const pe="webgl2";if(J=Qt(pe,$),J===null)throw Qt(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw Ie("WebGLRenderer: "+$.message),$}let Ot,Dt,it,K,P,he,te,de,fe,ze,ke,tt,wt,Fe,Ze,dt,rt,Xe,Mt,le,st,He,at,Ge;function Le(){Ot=new oae(J),Ot.init(),He=new Qoe(J,Ot),Dt=new Qse(J,Ot,e,He),it=new Koe(J,Ot),Dt.reversedDepthBuffer&&f&&it.buffers.depth.setReversed(!0),K=new cae(J),P=new Ooe,he=new Zoe(J,Ot,it,P,Dt,He,K),te=new eae(C),de=new aae(C),fe=new fre(J),at=new Kse(J,fe),ze=new lae(J,fe,K,at),ke=new hae(J,ze,fe,K),Mt=new dae(J,Dt,he),dt=new Jse(P),tt=new Doe(C,te,de,Ot,Dt,at,dt),wt=new ile(C,P),Fe=new Foe,Ze=new $oe(Ot),Xe=new Yse(C,te,de,it,ke,m,l),rt=new Xoe(C,ke,Dt),Ge=new sle(J,K,Dt,it),le=new Zse(J,Ot,K),st=new uae(J,Ot,K),K.programs=tt.programs,C.capabilities=Dt,C.extensions=Ot,C.properties=P,C.renderLists=Fe,C.shadowMap=rt,C.state=it,C.info=K}Le(),v!==qn&&(I=new fae(v,t.width,t.height,i,s));const Je=new nle(C,J);this.xr=Je,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const $=Ot.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Ot.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function($){$!==void 0&&(B=$,this.setSize(U,ne,!1))},this.getSize=function($){return $.set(U,ne)},this.setSize=function($,pe,Ee=!0){if(Je.isPresenting){Ce("WebGLRenderer: Can't change size while VR device is presenting.");return}U=$,ne=pe,t.width=Math.floor($*B),t.height=Math.floor(pe*B),Ee===!0&&(t.style.width=$+"px",t.style.height=pe+"px"),I!==null&&I.setSize(t.width,t.height),this.setViewport(0,0,$,pe)},this.getDrawingBufferSize=function($){return $.set(U*B,ne*B).floor()},this.setDrawingBufferSize=function($,pe,Ee){U=$,ne=pe,B=Ee,t.width=Math.floor($*Ee),t.height=Math.floor(pe*Ee),this.setViewport(0,0,$,pe)},this.setEffects=function($){if(v===qn){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if($){for(let pe=0;pe<$.length;pe++)if($[pe].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}I.setEffects($||[])},this.getCurrentViewport=function($){return $.copy(Q)},this.getViewport=function($){return $.copy(V)},this.setViewport=function($,pe,Ee,ve){$.isVector4?V.set($.x,$.y,$.z,$.w):V.set($,pe,Ee,ve),it.viewport(Q.copy(V).multiplyScalar(B).round())},this.getScissor=function($){return $.copy(ae)},this.setScissor=function($,pe,Ee,ve){$.isVector4?ae.set($.x,$.y,$.z,$.w):ae.set($,pe,Ee,ve),it.scissor(H.copy(ae).multiplyScalar(B).round())},this.getScissorTest=function(){return _e},this.setScissorTest=function($){it.setScissorTest(_e=$)},this.setOpaqueSort=function($){Oe=$},this.setTransparentSort=function($){Y=$},this.getClearColor=function($){return $.copy(Xe.getClearColor())},this.setClearColor=function(){Xe.setClearColor(...arguments)},this.getClearAlpha=function(){return Xe.getClearAlpha()},this.setClearAlpha=function(){Xe.setClearAlpha(...arguments)},this.clear=function($=!0,pe=!0,Ee=!0){let ve=0;if($){let ye=!1;if(W!==null){const et=W.texture.format;ye=_.has(et)}if(ye){const et=W.texture.type,ct=b.has(et),Qe=Xe.getClearColor(),bt=Xe.getClearAlpha(),gt=Qe.r,Pt=Qe.g,At=Qe.b;ct?(S[0]=gt,S[1]=Pt,S[2]=At,S[3]=bt,J.clearBufferuiv(J.COLOR,0,S)):(E[0]=gt,E[1]=Pt,E[2]=At,E[3]=bt,J.clearBufferiv(J.COLOR,0,E))}else ve|=J.COLOR_BUFFER_BIT}pe&&(ve|=J.DEPTH_BUFFER_BIT),Ee&&(ve|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",zt,!1),t.removeEventListener("webglcontextrestored",Nn,!1),t.removeEventListener("webglcontextcreationerror",pn,!1),Xe.dispose(),Fe.dispose(),Ze.dispose(),P.dispose(),te.dispose(),de.dispose(),ke.dispose(),at.dispose(),Ge.dispose(),tt.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Ql),Je.removeEventListener("sessionend",Jl),qs.stop()};function zt($){$.preventDefault(),wg("WebGLRenderer: Context Lost."),k=!0}function Nn(){wg("WebGLRenderer: Context Restored."),k=!1;const $=K.autoReset,pe=rt.enabled,Ee=rt.autoUpdate,ve=rt.needsUpdate,ye=rt.type;Le(),K.autoReset=$,rt.enabled=pe,rt.autoUpdate=Ee,rt.needsUpdate=ve,rt.type=ye}function pn($){Ie("WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function ls($){const pe=$.target;pe.removeEventListener("dispose",ls),Si(pe)}function Si($){ep($),P.remove($)}function ep($){const pe=P.get($).programs;pe!==void 0&&(pe.forEach(function(Ee){tt.releaseProgram(Ee)}),$.isShaderMaterial&&tt.releaseShaderCache($))}this.renderBufferDirect=function($,pe,Ee,ve,ye,et){pe===null&&(pe=nt);const ct=ye.isMesh&&ye.matrixWorld.determinant()<0,Qe=bm($,pe,Ee,ve,ye);it.setMaterial(ve,ct);let bt=Ee.index,gt=1;if(ve.wireframe===!0){if(bt=ze.getWireframeAttribute(Ee),bt===void 0)return;gt=2}const Pt=Ee.drawRange,At=Ee.attributes.position;let en=Pt.start*gt,fn=(Pt.start+Pt.count)*gt;et!==null&&(en=Math.max(en,et.start*gt),fn=Math.min(fn,(et.start+et.count)*gt)),bt!==null?(en=Math.max(en,0),fn=Math.min(fn,bt.count)):At!=null&&(en=Math.max(en,0),fn=Math.min(fn,At.count));const Pn=fn-en;if(Pn<0||Pn===1/0)return;at.setup(ye,ve,Qe,Ee,bt);let kn,yn=le;if(bt!==null&&(kn=fe.get(bt),yn=st,yn.setIndex(kn)),ye.isMesh)ve.wireframe===!0?(it.setLineWidth(ve.wireframeLinewidth*je()),yn.setMode(J.LINES)):yn.setMode(J.TRIANGLES);else if(ye.isLine){let Rt=ve.linewidth;Rt===void 0&&(Rt=1),it.setLineWidth(Rt*je()),ye.isLineSegments?yn.setMode(J.LINES):ye.isLineLoop?yn.setMode(J.LINE_LOOP):yn.setMode(J.LINE_STRIP)}else ye.isPoints?yn.setMode(J.POINTS):ye.isSprite&&yn.setMode(J.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)jn("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(Ot.get("WEBGL_multi_draw"))yn.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const Rt=ye._multiDrawStarts,vn=ye._multiDrawCounts,un=ye._multiDrawCount,ii=bt?fe.get(bt).bytesPerElement:1,va=P.get(ve).currentProgram.getUniforms();for(let Nr=0;Nr<un;Nr++)va.setValue(J,"_gl_DrawID",Nr),yn.render(Rt[Nr]/ii,vn[Nr])}else if(ye.isInstancedMesh)yn.renderInstances(en,Pn,ye.count);else if(Ee.isInstancedBufferGeometry){const Rt=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,vn=Math.min(Ee.instanceCount,Rt);yn.renderInstances(en,Pn,vn)}else yn.render(en,Pn)};function qo($,pe,Ee){$.transparent===!0&&$.side===pi&&$.forceSinglePass===!1?($.side=On,$.needsUpdate=!0,eu($,pe,Ee),$.side=Ss,$.needsUpdate=!0,eu($,pe,Ee),$.side=pi):eu($,pe,Ee)}this.compile=function($,pe,Ee=null){Ee===null&&(Ee=$),R=Ze.get(Ee),R.init(pe),M.push(R),Ee.traverseVisible(function(ye){ye.isLight&&ye.layers.test(pe.layers)&&(R.pushLight(ye),ye.castShadow&&R.pushShadow(ye))}),$!==Ee&&$.traverseVisible(function(ye){ye.isLight&&ye.layers.test(pe.layers)&&(R.pushLight(ye),ye.castShadow&&R.pushShadow(ye))}),R.setupLights();const ve=new Set;return $.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const et=ye.material;if(et)if(Array.isArray(et))for(let ct=0;ct<et.length;ct++){const Qe=et[ct];qo(Qe,Ee,ye),ve.add(Qe)}else qo(et,Ee,ye),ve.add(et)}),R=M.pop(),ve},this.compileAsync=function($,pe,Ee=null){const ve=this.compile($,pe,Ee);return new Promise(ye=>{function et(){if(ve.forEach(function(ct){P.get(ct).currentProgram.isReady()&&ve.delete(ct)}),ve.size===0){ye($);return}setTimeout(et,10)}Ot.get("KHR_parallel_shader_compile")!==null?et():setTimeout(et,10)})};let tp=null;function Zl($){tp&&tp($)}function Ql(){qs.stop()}function Jl(){qs.start()}const qs=new IV;qs.setAnimationLoop(Zl),typeof self<"u"&&qs.setContext(self),this.setAnimationLoop=function($){tp=$,Je.setAnimationLoop($),$===null?qs.stop():qs.start()},Je.addEventListener("sessionstart",Ql),Je.addEventListener("sessionend",Jl),this.render=function($,pe){if(pe!==void 0&&pe.isCamera!==!0){Ie("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;const Ee=Je.enabled===!0&&Je.isPresenting===!0,ve=I!==null&&(W===null||Ee)&&I.begin(C,W);if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(I===null||I.isCompositing()===!1)&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(pe),pe=Je.getCamera()),$.isScene===!0&&$.onBeforeRender(C,$,pe,W),R=Ze.get($,M.length),R.init(pe),M.push(R),ln.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),Pe.setFromProjectionMatrix(ln,Oi,pe.reversedDepth),ft=this.localClippingEnabled,De=dt.init(this.clippingPlanes,ft),A=Fe.get($,w.length),A.init(),w.push(A),Je.enabled===!0&&Je.isPresenting===!0){const ct=C.xr.getDepthSensingMesh();ct!==null&&np(ct,pe,-1/0,C.sortObjects)}np($,pe,0,C.sortObjects),A.finish(),C.sortObjects===!0&&A.sort(Oe,Y),qe=Je.enabled===!1||Je.isPresenting===!1||Je.hasDepthSensing()===!1,qe&&Xe.addToRenderList(A,$),this.info.render.frame++,De===!0&&dt.beginShadows();const ye=R.state.shadowsArray;if(rt.render(ye,$,pe),De===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ve&&I.hasRenderPass())===!1){const ct=A.opaque,Qe=A.transmissive;if(R.setupLights(),pe.isArrayCamera){const bt=pe.cameras;if(Qe.length>0)for(let gt=0,Pt=bt.length;gt<Pt;gt++){const At=bt[gt];mm(ct,Qe,$,At)}qe&&Xe.render($);for(let gt=0,Pt=bt.length;gt<Pt;gt++){const At=bt[gt];gm(A,$,At,At.viewport)}}else Qe.length>0&&mm(ct,Qe,$,pe),qe&&Xe.render($),gm(A,$,pe)}W!==null&&z===0&&(he.updateMultisampleRenderTarget(W),he.updateRenderTargetMipmap(W)),ve&&I.end(C),$.isScene===!0&&$.onAfterRender(C,$,pe),at.resetDefaultState(),q=-1,X=null,M.pop(),M.length>0?(R=M[M.length-1],De===!0&&dt.setGlobalState(C.clippingPlanes,R.state.camera)):R=null,w.pop(),w.length>0?A=w[w.length-1]:A=null};function np($,pe,Ee,ve){if($.visible===!1)return;if($.layers.test(pe.layers)){if($.isGroup)Ee=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(pe);else if($.isLight)R.pushLight($),$.castShadow&&R.pushShadow($);else if($.isSprite){if(!$.frustumCulled||Pe.intersectsSprite($)){ve&&Me.setFromMatrixPosition($.matrixWorld).applyMatrix4(ln);const ct=ke.update($),Qe=$.material;Qe.visible&&A.push($,ct,Qe,Ee,Me.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||Pe.intersectsObject($))){const ct=ke.update($),Qe=$.material;if(ve&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),Me.copy($.boundingSphere.center)):(ct.boundingSphere===null&&ct.computeBoundingSphere(),Me.copy(ct.boundingSphere.center)),Me.applyMatrix4($.matrixWorld).applyMatrix4(ln)),Array.isArray(Qe)){const bt=ct.groups;for(let gt=0,Pt=bt.length;gt<Pt;gt++){const At=bt[gt],en=Qe[At.materialIndex];en&&en.visible&&A.push($,ct,en,Ee,Me.z,At)}}else Qe.visible&&A.push($,ct,Qe,Ee,Me.z,null)}}const et=$.children;for(let ct=0,Qe=et.length;ct<Qe;ct++)np(et[ct],pe,Ee,ve)}function gm($,pe,Ee,ve){const{opaque:ye,transmissive:et,transparent:ct}=$;R.setupLightsView(Ee),De===!0&&dt.setGlobalState(C.clippingPlanes,Ee),ve&&it.viewport(Q.copy(ve)),ye.length>0&&As(ye,pe,Ee),et.length>0&&As(et,pe,Ee),ct.length>0&&As(ct,pe,Ee),it.buffers.depth.setTest(!0),it.buffers.depth.setMask(!0),it.buffers.color.setMask(!0),it.setPolygonOffset(!1)}function mm($,pe,Ee,ve){if((Ee.isScene===!0?Ee.overrideMaterial:null)!==null)return;if(R.state.transmissionRenderTarget[ve.id]===void 0){const en=Ot.has("EXT_color_buffer_half_float")||Ot.has("EXT_color_buffer_float");R.state.transmissionRenderTarget[ve.id]=new ga(1,1,{generateMipmaps:!0,type:en?tr:qn,minFilter:Ji,samples:Dt.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Nt.workingColorSpace})}const et=R.state.transmissionRenderTarget[ve.id],ct=ve.viewport||Q;et.setSize(ct.z*C.transmissionResolutionScale,ct.w*C.transmissionResolutionScale);const Qe=C.getRenderTarget(),bt=C.getActiveCubeFace(),gt=C.getActiveMipmapLevel();C.setRenderTarget(et),C.getClearColor(re),D=C.getClearAlpha(),D<1&&C.setClearColor(16777215,.5),C.clear(),qe&&Xe.render(Ee);const Pt=C.toneMapping;C.toneMapping=Qr;const At=ve.viewport;if(ve.viewport!==void 0&&(ve.viewport=void 0),R.setupLightsView(ve),De===!0&&dt.setGlobalState(C.clippingPlanes,ve),As($,Ee,ve),he.updateMultisampleRenderTarget(et),he.updateRenderTargetMipmap(et),Ot.has("WEBGL_multisampled_render_to_texture")===!1){let en=!1;for(let fn=0,Pn=pe.length;fn<Pn;fn++){const kn=pe[fn],{object:yn,geometry:Rt,material:vn,group:un}=kn;if(vn.side===pi&&yn.layers.test(ve.layers)){const ii=vn.side;vn.side=On,vn.needsUpdate=!0,rp(yn,Ee,ve,Rt,vn,un),vn.side=ii,vn.needsUpdate=!0,en=!0}}en===!0&&(he.updateMultisampleRenderTarget(et),he.updateRenderTargetMipmap(et))}C.setRenderTarget(Qe,bt,gt),C.setClearColor(re,D),At!==void 0&&(ve.viewport=At),C.toneMapping=Pt}function As($,pe,Ee){const ve=pe.isScene===!0?pe.overrideMaterial:null;for(let ye=0,et=$.length;ye<et;ye++){const ct=$[ye],{object:Qe,geometry:bt,group:gt}=ct;let Pt=ct.material;Pt.allowOverride===!0&&ve!==null&&(Pt=ve),Qe.layers.test(Ee.layers)&&rp(Qe,pe,Ee,bt,Pt,gt)}}function rp($,pe,Ee,ve,ye,et){$.onBeforeRender(C,pe,Ee,ve,ye,et),$.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ye.onBeforeRender(C,pe,Ee,ve,$,et),ye.transparent===!0&&ye.side===pi&&ye.forceSinglePass===!1?(ye.side=On,ye.needsUpdate=!0,C.renderBufferDirect(Ee,pe,ve,ye,$,et),ye.side=Ss,ye.needsUpdate=!0,C.renderBufferDirect(Ee,pe,ve,ye,$,et),ye.side=pi):C.renderBufferDirect(Ee,pe,ve,ye,$,et),$.onAfterRender(C,pe,Ee,ve,ye,et)}function eu($,pe,Ee){pe.isScene!==!0&&(pe=nt);const ve=P.get($),ye=R.state.lights,et=R.state.shadowsArray,ct=ye.state.version,Qe=tt.getParameters($,ye.state,et,pe,Ee),bt=tt.getProgramCacheKey(Qe);let gt=ve.programs;ve.environment=$.isMeshStandardMaterial?pe.environment:null,ve.fog=pe.fog,ve.envMap=($.isMeshStandardMaterial?de:te).get($.envMap||ve.environment),ve.envMapRotation=ve.environment!==null&&$.envMap===null?pe.environmentRotation:$.envMapRotation,gt===void 0&&($.addEventListener("dispose",ls),gt=new Map,ve.programs=gt);let Pt=gt.get(bt);if(Pt!==void 0){if(ve.currentProgram===Pt&&ve.lightsStateVersion===ct)return ip($,Qe),Pt}else Qe.uniforms=tt.getUniforms($),$.onBeforeCompile(Qe,C),Pt=tt.acquireProgram(Qe,bt),gt.set(bt,Pt),ve.uniforms=Qe.uniforms;const At=ve.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(At.clippingPlanes=dt.uniform),ip($,Qe),ve.needsLights=vm($),ve.lightsStateVersion=ct,ve.needsLights&&(At.ambientLightColor.value=ye.state.ambient,At.lightProbe.value=ye.state.probe,At.directionalLights.value=ye.state.directional,At.directionalLightShadows.value=ye.state.directionalShadow,At.spotLights.value=ye.state.spot,At.spotLightShadows.value=ye.state.spotShadow,At.rectAreaLights.value=ye.state.rectArea,At.ltc_1.value=ye.state.rectAreaLTC1,At.ltc_2.value=ye.state.rectAreaLTC2,At.pointLights.value=ye.state.point,At.pointLightShadows.value=ye.state.pointShadow,At.hemisphereLights.value=ye.state.hemi,At.directionalShadowMap.value=ye.state.directionalShadowMap,At.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,At.spotShadowMap.value=ye.state.spotShadowMap,At.spotLightMatrix.value=ye.state.spotLightMatrix,At.spotLightMap.value=ye.state.spotLightMap,At.pointShadowMap.value=ye.state.pointShadowMap,At.pointShadowMatrix.value=ye.state.pointShadowMatrix),ve.currentProgram=Pt,ve.uniformsList=null,Pt}function ym($){if($.uniformsList===null){const pe=$.currentProgram.getUniforms();$.uniformsList=$b.seqWithValue(pe.seq,$.uniforms)}return $.uniformsList}function ip($,pe){const Ee=P.get($);Ee.outputColorSpace=pe.outputColorSpace,Ee.batching=pe.batching,Ee.batchingColor=pe.batchingColor,Ee.instancing=pe.instancing,Ee.instancingColor=pe.instancingColor,Ee.instancingMorph=pe.instancingMorph,Ee.skinning=pe.skinning,Ee.morphTargets=pe.morphTargets,Ee.morphNormals=pe.morphNormals,Ee.morphColors=pe.morphColors,Ee.morphTargetsCount=pe.morphTargetsCount,Ee.numClippingPlanes=pe.numClippingPlanes,Ee.numIntersection=pe.numClipIntersection,Ee.vertexAlphas=pe.vertexAlphas,Ee.vertexTangents=pe.vertexTangents,Ee.toneMapping=pe.toneMapping}function bm($,pe,Ee,ve,ye){pe.isScene!==!0&&(pe=nt),he.resetTextureUnits();const et=pe.fog,ct=ve.isMeshStandardMaterial?pe.environment:null,Qe=W===null?C.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:tc,bt=(ve.isMeshStandardMaterial?de:te).get(ve.envMap||ct),gt=ve.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,Pt=!!Ee.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),At=!!Ee.morphAttributes.position,en=!!Ee.morphAttributes.normal,fn=!!Ee.morphAttributes.color;let Pn=Qr;ve.toneMapped&&(W===null||W.isXRRenderTarget===!0)&&(Pn=C.toneMapping);const kn=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,yn=kn!==void 0?kn.length:0,Rt=P.get(ve),vn=R.state.lights;if(De===!0&&(ft===!0||$!==X)){const Or=$===X&&ve.id===q;dt.setState(ve,$,Or)}let un=!1;ve.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==vn.state.version||Rt.outputColorSpace!==Qe||ye.isBatchedMesh&&Rt.batching===!1||!ye.isBatchedMesh&&Rt.batching===!0||ye.isBatchedMesh&&Rt.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&Rt.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&Rt.instancing===!1||!ye.isInstancedMesh&&Rt.instancing===!0||ye.isSkinnedMesh&&Rt.skinning===!1||!ye.isSkinnedMesh&&Rt.skinning===!0||ye.isInstancedMesh&&Rt.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&Rt.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&Rt.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&Rt.instancingMorph===!1&&ye.morphTexture!==null||Rt.envMap!==bt||ve.fog===!0&&Rt.fog!==et||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==dt.numPlanes||Rt.numIntersection!==dt.numIntersection)||Rt.vertexAlphas!==gt||Rt.vertexTangents!==Pt||Rt.morphTargets!==At||Rt.morphNormals!==en||Rt.morphColors!==fn||Rt.toneMapping!==Pn||Rt.morphTargetsCount!==yn)&&(un=!0):(un=!0,Rt.__version=ve.version);let ii=Rt.currentProgram;un===!0&&(ii=eu(ve,pe,ye));let va=!1,Nr=!1,tu=!1;const Tn=ii.getUniforms(),qt=Rt.uniforms;if(it.useProgram(ii.program)&&(va=!0,Nr=!0,tu=!0),ve.id!==q&&(q=ve.id,Nr=!0),va||X!==$){it.buffers.depth.getReversed()&&$.reversedDepth!==!0&&($._reversedDepth=!0,$.updateProjectionMatrix()),Tn.setValue(J,"projectionMatrix",$.projectionMatrix),Tn.setValue(J,"viewMatrix",$.matrixWorldInverse);const Pr=Tn.map.cameraPosition;Pr!==void 0&&Pr.setValue(J,Se.setFromMatrixPosition($.matrixWorld)),Dt.logarithmicDepthBuffer&&Tn.setValue(J,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&Tn.setValue(J,"isOrthographic",$.isOrthographicCamera===!0),X!==$&&(X=$,Nr=!0,tu=!0)}if(Rt.needsLights&&(vn.state.directionalShadowMap.length>0&&Tn.setValue(J,"directionalShadowMap",vn.state.directionalShadowMap,he),vn.state.spotShadowMap.length>0&&Tn.setValue(J,"spotShadowMap",vn.state.spotShadowMap,he),vn.state.pointShadowMap.length>0&&Tn.setValue(J,"pointShadowMap",vn.state.pointShadowMap,he)),ye.isSkinnedMesh){Tn.setOptional(J,ye,"bindMatrix"),Tn.setOptional(J,ye,"bindMatrixInverse");const Or=ye.skeleton;Or&&(Or.boneTexture===null&&Or.computeBoneTexture(),Tn.setValue(J,"boneTexture",Or.boneTexture,he))}ye.isBatchedMesh&&(Tn.setOptional(J,ye,"batchingTexture"),Tn.setValue(J,"batchingTexture",ye._matricesTexture,he),Tn.setOptional(J,ye,"batchingIdTexture"),Tn.setValue(J,"batchingIdTexture",ye._indirectTexture,he),Tn.setOptional(J,ye,"batchingColorTexture"),ye._colorsTexture!==null&&Tn.setValue(J,"batchingColorTexture",ye._colorsTexture,he));const Ei=Ee.morphAttributes;if((Ei.position!==void 0||Ei.normal!==void 0||Ei.color!==void 0)&&Mt.update(ye,Ee,ii),(Nr||Rt.receiveShadow!==ye.receiveShadow)&&(Rt.receiveShadow=ye.receiveShadow,Tn.setValue(J,"receiveShadow",ye.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(qt.envMap.value=bt,qt.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),ve.isMeshStandardMaterial&&ve.envMap===null&&pe.environment!==null&&(qt.envMapIntensity.value=pe.environmentIntensity),qt.dfgLUT!==void 0&&(qt.dfgLUT.value=ole()),Nr&&(Tn.setValue(J,"toneMappingExposure",C.toneMappingExposure),Rt.needsLights&&_m(qt,tu),et&&ve.fog===!0&&wt.refreshFogUniforms(qt,et),wt.refreshMaterialUniforms(qt,ve,B,ne,R.state.transmissionRenderTarget[$.id]),$b.upload(J,ym(Rt),qt,he)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&($b.upload(J,ym(Rt),qt,he),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&Tn.setValue(J,"center",ye.center),Tn.setValue(J,"modelViewMatrix",ye.modelViewMatrix),Tn.setValue(J,"normalMatrix",ye.normalMatrix),Tn.setValue(J,"modelMatrix",ye.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Or=ve.uniformsGroups;for(let Pr=0,bc=Or.length;Pr<bc;Pr++){const xa=Or[Pr];Ge.update(xa,ii),Ge.bind(xa,ii)}}return ii}function _m($,pe){$.ambientLightColor.needsUpdate=pe,$.lightProbe.needsUpdate=pe,$.directionalLights.needsUpdate=pe,$.directionalLightShadows.needsUpdate=pe,$.pointLights.needsUpdate=pe,$.pointLightShadows.needsUpdate=pe,$.spotLights.needsUpdate=pe,$.spotLightShadows.needsUpdate=pe,$.rectAreaLights.needsUpdate=pe,$.hemisphereLights.needsUpdate=pe}function vm($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function($,pe,Ee){const ve=P.get($);ve.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,ve.__autoAllocateDepthBuffer===!1&&(ve.__useRenderToTexture=!1),P.get($.texture).__webglTexture=pe,P.get($.depthTexture).__webglTexture=ve.__autoAllocateDepthBuffer?void 0:Ee,ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,pe){const Ee=P.get($);Ee.__webglFramebuffer=pe,Ee.__useDefaultFramebuffer=pe===void 0};const kv=J.createFramebuffer();this.setRenderTarget=function($,pe=0,Ee=0){W=$,O=pe,z=Ee;let ve=null,ye=!1,et=!1;if($){const Qe=P.get($);if(Qe.__useDefaultFramebuffer!==void 0){it.bindFramebuffer(J.FRAMEBUFFER,Qe.__webglFramebuffer),Q.copy($.viewport),H.copy($.scissor),G=$.scissorTest,it.viewport(Q),it.scissor(H),it.setScissorTest(G),q=-1;return}else if(Qe.__webglFramebuffer===void 0)he.setupRenderTarget($);else if(Qe.__hasExternalTextures)he.rebindTextures($,P.get($.texture).__webglTexture,P.get($.depthTexture).__webglTexture);else if($.depthBuffer){const Pt=$.depthTexture;if(Qe.__boundDepthTexture!==Pt){if(Pt!==null&&P.has(Pt)&&($.width!==Pt.image.width||$.height!==Pt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");he.setupDepthRenderbuffer($)}}const bt=$.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(et=!0);const gt=P.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(gt[pe])?ve=gt[pe][Ee]:ve=gt[pe],ye=!0):$.samples>0&&he.useMultisampledRTT($)===!1?ve=P.get($).__webglMultisampledFramebuffer:Array.isArray(gt)?ve=gt[Ee]:ve=gt,Q.copy($.viewport),H.copy($.scissor),G=$.scissorTest}else Q.copy(V).multiplyScalar(B).floor(),H.copy(ae).multiplyScalar(B).floor(),G=_e;if(Ee!==0&&(ve=kv),it.bindFramebuffer(J.FRAMEBUFFER,ve)&&it.drawBuffers($,ve),it.viewport(Q),it.scissor(H),it.setScissorTest(G),ye){const Qe=P.get($.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Qe.__webglTexture,Ee)}else if(et){const Qe=pe;for(let bt=0;bt<$.textures.length;bt++){const gt=P.get($.textures[bt]);J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+bt,gt.__webglTexture,Ee,Qe)}}else if($!==null&&Ee!==0){const Qe=P.get($.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Qe.__webglTexture,Ee)}q=-1},this.readRenderTargetPixels=function($,pe,Ee,ve,ye,et,ct,Qe=0){if(!($&&$.isWebGLRenderTarget)){Ie("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=P.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ct!==void 0&&(bt=bt[ct]),bt){it.bindFramebuffer(J.FRAMEBUFFER,bt);try{const gt=$.textures[Qe],Pt=gt.format,At=gt.type;if(!Dt.textureFormatReadable(Pt)){Ie("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Dt.textureTypeReadable(At)){Ie("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=$.width-ve&&Ee>=0&&Ee<=$.height-ye&&($.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Qe),J.readPixels(pe,Ee,ve,ye,He.convert(Pt),He.convert(At),et))}finally{const gt=W!==null?P.get(W).__webglFramebuffer:null;it.bindFramebuffer(J.FRAMEBUFFER,gt)}}},this.readRenderTargetPixelsAsync=async function($,pe,Ee,ve,ye,et,ct,Qe=0){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=P.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ct!==void 0&&(bt=bt[ct]),bt)if(pe>=0&&pe<=$.width-ve&&Ee>=0&&Ee<=$.height-ye){it.bindFramebuffer(J.FRAMEBUFFER,bt);const gt=$.textures[Qe],Pt=gt.format,At=gt.type;if(!Dt.textureFormatReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Dt.textureTypeReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const en=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,en),J.bufferData(J.PIXEL_PACK_BUFFER,et.byteLength,J.STREAM_READ),$.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Qe),J.readPixels(pe,Ee,ve,ye,He.convert(Pt),He.convert(At),0);const fn=W!==null?P.get(W).__webglFramebuffer:null;it.bindFramebuffer(J.FRAMEBUFFER,fn);const Pn=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await Ute(J,Pn,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,en),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,et),J.deleteBuffer(en),J.deleteSync(Pn),et}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,pe=null,Ee=0){const ve=Math.pow(2,-Ee),ye=Math.floor($.image.width*ve),et=Math.floor($.image.height*ve),ct=pe!==null?pe.x:0,Qe=pe!==null?pe.y:0;he.setTexture2D($,0),J.copyTexSubImage2D(J.TEXTURE_2D,Ee,0,0,ct,Qe,ye,et),it.unbindTexture()};const Lv=J.createFramebuffer(),ir=J.createFramebuffer();this.copyTextureToTexture=function($,pe,Ee=null,ve=null,ye=0,et=null){et===null&&(ye!==0?(jn("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),et=ye,ye=0):et=0);let ct,Qe,bt,gt,Pt,At,en,fn,Pn;const kn=$.isCompressedTexture?$.mipmaps[et]:$.image;if(Ee!==null)ct=Ee.max.x-Ee.min.x,Qe=Ee.max.y-Ee.min.y,bt=Ee.isBox3?Ee.max.z-Ee.min.z:1,gt=Ee.min.x,Pt=Ee.min.y,At=Ee.isBox3?Ee.min.z:0;else{const Ei=Math.pow(2,-ye);ct=Math.floor(kn.width*Ei),Qe=Math.floor(kn.height*Ei),$.isDataArrayTexture?bt=kn.depth:$.isData3DTexture?bt=Math.floor(kn.depth*Ei):bt=1,gt=0,Pt=0,At=0}ve!==null?(en=ve.x,fn=ve.y,Pn=ve.z):(en=0,fn=0,Pn=0);const yn=He.convert(pe.format),Rt=He.convert(pe.type);let vn;pe.isData3DTexture?(he.setTexture3D(pe,0),vn=J.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(he.setTexture2DArray(pe,0),vn=J.TEXTURE_2D_ARRAY):(he.setTexture2D(pe,0),vn=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,pe.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,pe.unpackAlignment);const un=J.getParameter(J.UNPACK_ROW_LENGTH),ii=J.getParameter(J.UNPACK_IMAGE_HEIGHT),va=J.getParameter(J.UNPACK_SKIP_PIXELS),Nr=J.getParameter(J.UNPACK_SKIP_ROWS),tu=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,kn.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,kn.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,gt),J.pixelStorei(J.UNPACK_SKIP_ROWS,Pt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,At);const Tn=$.isDataArrayTexture||$.isData3DTexture,qt=pe.isDataArrayTexture||pe.isData3DTexture;if($.isDepthTexture){const Ei=P.get($),Or=P.get(pe),Pr=P.get(Ei.__renderTarget),bc=P.get(Or.__renderTarget);it.bindFramebuffer(J.READ_FRAMEBUFFER,Pr.__webglFramebuffer),it.bindFramebuffer(J.DRAW_FRAMEBUFFER,bc.__webglFramebuffer);for(let xa=0;xa<bt;xa++)Tn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,P.get($).__webglTexture,ye,At+xa),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,P.get(pe).__webglTexture,et,Pn+xa)),J.blitFramebuffer(gt,Pt,ct,Qe,en,fn,ct,Qe,J.DEPTH_BUFFER_BIT,J.NEAREST);it.bindFramebuffer(J.READ_FRAMEBUFFER,null),it.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(ye!==0||$.isRenderTargetTexture||P.has($)){const Ei=P.get($),Or=P.get(pe);it.bindFramebuffer(J.READ_FRAMEBUFFER,Lv),it.bindFramebuffer(J.DRAW_FRAMEBUFFER,ir);for(let Pr=0;Pr<bt;Pr++)Tn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Ei.__webglTexture,ye,At+Pr):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Ei.__webglTexture,ye),qt?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Or.__webglTexture,et,Pn+Pr):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Or.__webglTexture,et),ye!==0?J.blitFramebuffer(gt,Pt,ct,Qe,en,fn,ct,Qe,J.COLOR_BUFFER_BIT,J.NEAREST):qt?J.copyTexSubImage3D(vn,et,en,fn,Pn+Pr,gt,Pt,ct,Qe):J.copyTexSubImage2D(vn,et,en,fn,gt,Pt,ct,Qe);it.bindFramebuffer(J.READ_FRAMEBUFFER,null),it.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else qt?$.isDataTexture||$.isData3DTexture?J.texSubImage3D(vn,et,en,fn,Pn,ct,Qe,bt,yn,Rt,kn.data):pe.isCompressedArrayTexture?J.compressedTexSubImage3D(vn,et,en,fn,Pn,ct,Qe,bt,yn,kn.data):J.texSubImage3D(vn,et,en,fn,Pn,ct,Qe,bt,yn,Rt,kn):$.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,et,en,fn,ct,Qe,yn,Rt,kn.data):$.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,et,en,fn,kn.width,kn.height,yn,kn.data):J.texSubImage2D(J.TEXTURE_2D,et,en,fn,ct,Qe,yn,Rt,kn);J.pixelStorei(J.UNPACK_ROW_LENGTH,un),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,ii),J.pixelStorei(J.UNPACK_SKIP_PIXELS,va),J.pixelStorei(J.UNPACK_SKIP_ROWS,Nr),J.pixelStorei(J.UNPACK_SKIP_IMAGES,tu),et===0&&pe.generateMipmaps&&J.generateMipmap(vn),it.unbindTexture()},this.initRenderTarget=function($){P.get($).__webglFramebuffer===void 0&&he.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?he.setTextureCube($,0):$.isData3DTexture?he.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?he.setTexture2DArray($,0):he.setTexture2D($,0),it.unbindTexture()},this.resetState=function(){O=0,z=0,W=null,it.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Oi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Nt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Nt._getUnpackColorSpace()}}const Od=new ua,Ro=new $e,PV=new Z,T0=new $e,Hb=new $e,p_=new Z,DT=new Z,FV=new sn,UV=new Z,BV=new Z;let hi=null,Da=null;const No=[],Fl={NONE:-1,PAN:0,ROTATE:1};class ule extends av{constructor(e,t,r=null){super(t,r),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new MV,this.mouseButtons={LEFT:Zr.PAN,MIDDLE:Zr.PAN,RIGHT:Zr.ROTATE},this.touches={ONE:Mo.PAN},this._onPointerMove=cle.bind(this),this._onPointerDown=dle.bind(this),this._onPointerCancel=hle.bind(this),this._onContextMenu=ple.bind(this),r!==null&&this.connect(r)}connect(e){super.connect(e),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const t=this.domElement.getBoundingClientRect();Ro.x=(e.clientX-t.left)/t.width*2-1,Ro.y=-(e.clientY-t.top)/t.height*2+1}_updateState(e){let t;if(e.pointerType==="touch")t=this.touches.ONE;else switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=null}switch(t){case Zr.PAN:case Mo.PAN:this.state=Fl.PAN;break;case Zr.ROTATE:case Mo.ROTATE:this.state=Fl.ROTATE;break;default:this.state=Fl.NONE}}}function cle(n){const e=this.object,t=this.domElement,r=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),r.setFromCamera(Ro,e),hi)this.state===Fl.PAN?r.ray.intersectPlane(Od,p_)&&(hi.position.copy(p_.sub(PV).applyMatrix4(FV)),this.dispatchEvent({type:"drag",object:hi})):this.state===Fl.ROTATE&&(T0.subVectors(Ro,Hb).multiplyScalar(this.rotateSpeed),hi.rotateOnWorldAxis(UV,T0.x),hi.rotateOnWorldAxis(BV.normalize(),-T0.y),this.dispatchEvent({type:"drag",object:hi})),Hb.copy(Ro);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(No.length=0,r.setFromCamera(Ro,e),r.intersectObjects(this.objects,this.recursive,No),No.length>0){const i=No[0].object;Od.setFromNormalAndCoplanarPoint(e.getWorldDirection(Od.normal),DT.setFromMatrixPosition(i.matrixWorld)),Da!==i&&Da!==null&&(this.dispatchEvent({type:"hoveroff",object:Da}),t.style.cursor="auto",Da=null),Da!==i&&(this.dispatchEvent({type:"hoveron",object:i}),t.style.cursor="pointer",Da=i)}else Da!==null&&(this.dispatchEvent({type:"hoveroff",object:Da}),t.style.cursor="auto",Da=null);Hb.copy(Ro)}}function dle(n){const e=this.object,t=this.domElement,r=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),No.length=0,r.setFromCamera(Ro,e),r.intersectObjects(this.objects,this.recursive,No),No.length>0&&(this.transformGroup===!0?hi=zV(No[0].object):hi=No[0].object,Od.setFromNormalAndCoplanarPoint(e.getWorldDirection(Od.normal),DT.setFromMatrixPosition(hi.matrixWorld)),r.ray.intersectPlane(Od,p_)&&(this.state===Fl.PAN?(FV.copy(hi.parent.matrixWorld).invert(),PV.copy(p_).sub(DT.setFromMatrixPosition(hi.matrixWorld)),t.style.cursor="move",this.dispatchEvent({type:"dragstart",object:hi})):this.state===Fl.ROTATE&&(UV.set(0,1,0).applyQuaternion(e.quaternion).normalize(),BV.set(1,0,0).applyQuaternion(e.quaternion).normalize(),t.style.cursor="move",this.dispatchEvent({type:"dragstart",object:hi})))),Hb.copy(Ro))}function hle(){this.enabled!==!1&&(hi&&(this.dispatchEvent({type:"dragend",object:hi}),hi=null),this.domElement.style.cursor=Da?"pointer":"auto",this.state=Fl.NONE)}function ple(n){this.enabled!==!1&&n.preventDefault()}function zV(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:zV(n.parent,e)}function fle(n,e,t){var r,i=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var a,o=r.length,l,u=0,c=0,h=0;for(a=0;a<o;++a)l=r[a],u+=l.x||0,c+=l.y||0,h+=l.z||0;for(u=(u/o-n)*i,c=(c/o-e)*i,h=(h/o-t)*i,a=0;a<o;++a)l=r[a],u&&(l.x-=u),c&&(l.y-=c),h&&(l.z-=h)}return s.initialize=function(a){r=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(t=+a,s):t},s.strength=function(a){return arguments.length?(i=+a,s):i},s}function gle(n){const e=+this._x.call(null,n);return GV(this.cover(e),e,n)}function GV(n,e,t){if(isNaN(e))return n;var r,i=n._root,s={data:t},a=n._x0,o=n._x1,l,u,c,h,f;if(!i)return n._root=s,n;for(;i.length;)if((c=e>=(l=(a+o)/2))?a=l:o=l,r=i,!(i=i[h=+c]))return r[h]=s,n;if(u=+n._x.call(null,i.data),e===u)return s.next=i,r?r[h]=s:n._root=s,n;do r=r?r[h]=new Array(2):n._root=new Array(2),(c=e>=(l=(a+o)/2))?a=l:o=l;while((h=+c)==(f=+(u>=l)));return r[f]=i,r[h]=s,n}function mle(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let r=1/0,i=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,n[s]))||(t[s]=a,a<r&&(r=a),a>i&&(i=a));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<e;++s)GV(this,t[s],n[s]);return this}function yle(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var r=t-e||1,i=this._root,s,a;e>n||n>=t;)switch(a=+(n<e),s=new Array(2),s[a]=i,i=s,r*=2,a){case 0:t=e+r;break;case 1:e=t-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=t,this}function ble(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function _le(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Uo(n,e,t){this.node=n,this.x0=e,this.x1=t}function vle(n,e){var t,r=this._x0,i,s,a=this._x1,o=[],l=this._root,u,c;for(l&&o.push(new Uo(l,r,a)),e==null?e=1/0:(r=n-e,a=n+e);u=o.pop();)if(!(!(l=u.node)||(i=u.x0)>a||(s=u.x1)<r))if(l.length){var h=(i+s)/2;o.push(new Uo(l[1],h,s),new Uo(l[0],i,h)),(c=+(n>=h))&&(u=o[o.length-1],o[o.length-1]=o[o.length-1-c],o[o.length-1-c]=u)}else{var f=Math.abs(n-+this._x.call(null,l.data));f<e&&(e=f,r=n-f,a=n+f,t=l.data)}return t}function xle(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,r,i,s,a=this._x0,o=this._x1,l,u,c,h,f;if(!t)return this;if(t.length)for(;;){if((c=l>=(u=(a+o)/2))?a=u:o=u,e=t,!(t=t[h=+c]))return this;if(!t.length)break;e[h+1&1]&&(r=e,f=h)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[h]=s:delete e[h],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(r?r[f]=t:this._root=t),this):(this._root=s,this)}function Sle(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Ele(){return this._root}function Tle(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function wle(n){var e=[],t,r=this._root,i,s,a;for(r&&e.push(new Uo(r,this._x0,this._x1));t=e.pop();)if(!n(r=t.node,s=t.x0,a=t.x1)&&r.length){var o=(s+a)/2;(i=r[1])&&e.push(new Uo(i,o,a)),(i=r[0])&&e.push(new Uo(i,s,o))}return this}function Ale(n){var e=[],t=[],r;for(this._root&&e.push(new Uo(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.x1,l=(a+o)/2;(s=i[0])&&e.push(new Uo(s,a,l)),(s=i[1])&&e.push(new Uo(s,l,o))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.x1);return this}function Rle(n){return n[0]}function Nle(n){return arguments.length?(this._x=n,this):this._x}function VV(n,e){var t=new aI(e??Rle,NaN,NaN);return n==null?t:t.addAll(n)}function aI(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function KF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var os=VV.prototype=aI.prototype;os.copy=function(){var n=new aI(this._x,this._x0,this._x1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=KF(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=KF(r));return n};os.add=gle;os.addAll=mle;os.cover=yle;os.data=ble;os.extent=_le;os.find=vle;os.remove=xle;os.removeAll=Sle;os.root=Ele;os.size=Tle;os.visit=wle;os.visitAfter=Ale;os.x=Nle;function Cle(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return $V(this.cover(e,t),e,t,n)}function $V(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,s=n._root,a={data:r},o=n._x0,l=n._y0,u=n._x1,c=n._y1,h,f,g,m,v,_,b,S;if(!s)return n._root=a,n;for(;s.length;)if((v=e>=(h=(o+u)/2))?o=h:u=h,(_=t>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[b=_<<1|v]))return i[b]=a,n;if(g=+n._x.call(null,s.data),m=+n._y.call(null,s.data),e===g&&t===m)return a.next=s,i?i[b]=a:n._root=a,n;do i=i?i[b]=new Array(4):n._root=new Array(4),(v=e>=(h=(o+u)/2))?o=h:u=h,(_=t>=(f=(l+c)/2))?l=f:c=f;while((b=_<<1|v)===(S=(m>=f)<<1|g>=h));return i[S]=s,i[b]=a,n}function Mle(n){var e,t,r=n.length,i,s,a=new Array(r),o=new Array(r),l=1/0,u=1/0,c=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(a[t]=i,o[t]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>h&&(h=s));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),t=0;t<r;++t)$V(this,a[t],o[t],n[t]);return this}function Ile(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,s=(r=Math.floor(e))+1;else{for(var a=i-t||1,o=this._root,l,u;t>n||n>=i||r>e||e>=s;)switch(u=(e<r)<<1|n<t,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=t+a,s=r+a;break;case 1:t=i-a,s=r+a;break;case 2:i=t+a,r=s-a;break;case 3:t=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function kle(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Lle(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ii(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function Dle(n,e,t){var r,i=this._x0,s=this._y0,a,o,l,u,c=this._x1,h=this._y1,f=[],g=this._root,m,v;for(g&&f.push(new Ii(g,i,s,c,h)),t==null?t=1/0:(i=n-t,s=e-t,c=n+t,h=e+t,t*=t);m=f.pop();)if(!(!(g=m.node)||(a=m.x0)>c||(o=m.y0)>h||(l=m.x1)<i||(u=m.y1)<s))if(g.length){var _=(a+l)/2,b=(o+u)/2;f.push(new Ii(g[3],_,b,l,u),new Ii(g[2],a,b,_,u),new Ii(g[1],_,o,l,b),new Ii(g[0],a,o,_,b)),(v=(e>=b)<<1|n>=_)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-v],f[f.length-1-v]=m)}else{var S=n-+this._x.call(null,g.data),E=e-+this._y.call(null,g.data),A=S*S+E*E;if(A<t){var R=Math.sqrt(t=A);i=n-R,s=e-R,c=n+R,h=e+R,r=g.data}}return r}function Ole(n){if(isNaN(c=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,t=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,c,h,f,g,m,v,_,b;if(!t)return this;if(t.length)for(;;){if((m=c>=(f=(a+l)/2))?a=f:l=f,(v=h>=(g=(o+u)/2))?o=g:u=g,e=t,!(t=t[_=v<<1|m]))return this;if(!t.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(r=e,b=_)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[_]=s:delete e[_],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[b]=t:this._root=t),this):(this._root=s,this)}function Ple(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Fle(){return this._root}function Ule(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Ble(n){var e=[],t,r=this._root,i,s,a,o,l;for(r&&e.push(new Ii(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,s=t.x0,a=t.y0,o=t.x1,l=t.y1)&&r.length){var u=(s+o)/2,c=(a+l)/2;(i=r[3])&&e.push(new Ii(i,u,c,o,l)),(i=r[2])&&e.push(new Ii(i,s,c,u,l)),(i=r[1])&&e.push(new Ii(i,u,a,o,c)),(i=r[0])&&e.push(new Ii(i,s,a,u,c))}return this}function zle(n){var e=[],t=[],r;for(this._root&&e.push(new Ii(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,h=(o+u)/2;(s=i[0])&&e.push(new Ii(s,a,o,c,h)),(s=i[1])&&e.push(new Ii(s,c,o,l,h)),(s=i[2])&&e.push(new Ii(s,a,h,c,u)),(s=i[3])&&e.push(new Ii(s,c,h,l,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Gle(n){return n[0]}function Vle(n){return arguments.length?(this._x=n,this):this._x}function $le(n){return n[1]}function Hle(n){return arguments.length?(this._y=n,this):this._y}function HV(n,e,t){var r=new oI(e??Gle,t??$le,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function oI(n,e,t,r,i,s){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ZF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Bi=HV.prototype=oI.prototype;Bi.copy=function(){var n=new oI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=ZF(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ZF(r));return n};Bi.add=Cle;Bi.addAll=Mle;Bi.cover=Ile;Bi.data=kle;Bi.extent=Lle;Bi.find=Dle;Bi.remove=Ole;Bi.removeAll=Ple;Bi.root=Fle;Bi.size=Ule;Bi.visit=Ble;Bi.visitAfter=zle;Bi.x=Vle;Bi.y=Hle;function jle(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),r=+this._z.call(null,n);return jV(this.cover(e,t,r),e,t,r,n)}function jV(n,e,t,r,i){if(isNaN(e)||isNaN(t)||isNaN(r))return n;var s,a=n._root,o={data:i},l=n._x0,u=n._y0,c=n._z0,h=n._x1,f=n._y1,g=n._z1,m,v,_,b,S,E,A,R,w,M,I;if(!a)return n._root=o,n;for(;a.length;)if((A=e>=(m=(l+h)/2))?l=m:h=m,(R=t>=(v=(u+f)/2))?u=v:f=v,(w=r>=(_=(c+g)/2))?c=_:g=_,s=a,!(a=a[M=w<<2|R<<1|A]))return s[M]=o,n;if(b=+n._x.call(null,a.data),S=+n._y.call(null,a.data),E=+n._z.call(null,a.data),e===b&&t===S&&r===E)return o.next=a,s?s[M]=o:n._root=o,n;do s=s?s[M]=new Array(8):n._root=new Array(8),(A=e>=(m=(l+h)/2))?l=m:h=m,(R=t>=(v=(u+f)/2))?u=v:f=v,(w=r>=(_=(c+g)/2))?c=_:g=_;while((M=w<<2|R<<1|A)===(I=(E>=_)<<2|(S>=v)<<1|b>=m));return s[I]=a,s[M]=o,n}function Wle(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let s=1/0,a=1/0,o=1/0,l=-1/0,u=-1/0,c=-1/0;for(let h=0,f,g,m,v;h<e;++h)isNaN(g=+this._x.call(null,f=n[h]))||isNaN(m=+this._y.call(null,f))||isNaN(v=+this._z.call(null,f))||(t[h]=g,r[h]=m,i[h]=v,g<s&&(s=g),g>l&&(l=g),m<a&&(a=m),m>u&&(u=m),v<o&&(o=v),v>c&&(c=v));if(s>l||a>u||o>c)return this;this.cover(s,a,o).cover(l,u,c);for(let h=0;h<e;++h)jV(this,t[h],r[h],i[h],n[h]);return this}function qle(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,s=this._z0,a=this._x1,o=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var u=a-r||1,c=this._root,h,f;r>n||n>=a||i>e||e>=o||s>t||t>=l;)switch(f=(t<s)<<2|(e<i)<<1|n<r,h=new Array(8),h[f]=c,c=h,u*=2,f){case 0:a=r+u,o=i+u,l=s+u;break;case 1:r=a-u,o=i+u,l=s+u;break;case 2:a=r+u,i=o-u,l=s+u;break;case 3:r=a-u,i=o-u,l=s+u;break;case 4:a=r+u,o=i+u,s=l-u;break;case 5:r=a-u,o=i+u,s=l-u;break;case 6:a=r+u,i=o-u,s=l-u;break;case 7:r=a-u,i=o-u,s=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this}function Xle(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Yle(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Bn(n,e,t,r,i,s,a){this.node=n,this.x0=e,this.y0=t,this.z0=r,this.x1=i,this.y1=s,this.z1=a}function Kle(n,e,t,r){var i,s=this._x0,a=this._y0,o=this._z0,l,u,c,h,f,g,m=this._x1,v=this._y1,_=this._z1,b=[],S=this._root,E,A;for(S&&b.push(new Bn(S,s,a,o,m,v,_)),r==null?r=1/0:(s=n-r,a=e-r,o=t-r,m=n+r,v=e+r,_=t+r,r*=r);E=b.pop();)if(!(!(S=E.node)||(l=E.x0)>m||(u=E.y0)>v||(c=E.z0)>_||(h=E.x1)<s||(f=E.y1)<a||(g=E.z1)<o))if(S.length){var R=(l+h)/2,w=(u+f)/2,M=(c+g)/2;b.push(new Bn(S[7],R,w,M,h,f,g),new Bn(S[6],l,w,M,R,f,g),new Bn(S[5],R,u,M,h,w,g),new Bn(S[4],l,u,M,R,w,g),new Bn(S[3],R,w,c,h,f,M),new Bn(S[2],l,w,c,R,f,M),new Bn(S[1],R,u,c,h,w,M),new Bn(S[0],l,u,c,R,w,M)),(A=(t>=M)<<2|(e>=w)<<1|n>=R)&&(E=b[b.length-1],b[b.length-1]=b[b.length-1-A],b[b.length-1-A]=E)}else{var I=n-+this._x.call(null,S.data),C=e-+this._y.call(null,S.data),k=t-+this._z.call(null,S.data),O=I*I+C*C+k*k;if(O<r){var z=Math.sqrt(r=O);s=n-z,a=e-z,o=t-z,m=n+z,v=e+z,_=t+z,i=S.data}}return i}const Zle=(n,e,t,r,i,s)=>Math.sqrt((n-r)**2+(e-i)**2+(t-s)**2);function Qle(n,e,t,r){const i=[],s=n-r,a=e-r,o=t-r,l=n+r,u=e+r,c=t+r;return this.visit((h,f,g,m,v,_,b)=>{if(!h.length)do{const S=h.data;Zle(n,e,t,this._x(S),this._y(S),this._z(S))<=r&&i.push(S)}while(h=h.next);return f>l||g>u||m>c||v<s||_<a||b<o}),i}function Jle(n){if(isNaN(f=+this._x.call(null,n))||isNaN(g=+this._y.call(null,n))||isNaN(m=+this._z.call(null,n)))return this;var e,t=this._root,r,i,s,a=this._x0,o=this._y0,l=this._z0,u=this._x1,c=this._y1,h=this._z1,f,g,m,v,_,b,S,E,A,R,w;if(!t)return this;if(t.length)for(;;){if((S=f>=(v=(a+u)/2))?a=v:u=v,(E=g>=(_=(o+c)/2))?o=_:c=_,(A=m>=(b=(l+h)/2))?l=b:h=b,e=t,!(t=t[R=A<<2|E<<1|S]))return this;if(!t.length)break;(e[R+1&7]||e[R+2&7]||e[R+3&7]||e[R+4&7]||e[R+5&7]||e[R+6&7]||e[R+7&7])&&(r=e,w=R)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[R]=s:delete e[R],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[w]=t:this._root=t),this):(this._root=s,this)}function eue(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function tue(){return this._root}function nue(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function rue(n){var e=[],t,r=this._root,i,s,a,o,l,u,c;for(r&&e.push(new Bn(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(r=t.node,s=t.x0,a=t.y0,o=t.z0,l=t.x1,u=t.y1,c=t.z1)&&r.length){var h=(s+l)/2,f=(a+u)/2,g=(o+c)/2;(i=r[7])&&e.push(new Bn(i,h,f,g,l,u,c)),(i=r[6])&&e.push(new Bn(i,s,f,g,h,u,c)),(i=r[5])&&e.push(new Bn(i,h,a,g,l,f,c)),(i=r[4])&&e.push(new Bn(i,s,a,g,h,f,c)),(i=r[3])&&e.push(new Bn(i,h,f,o,l,u,g)),(i=r[2])&&e.push(new Bn(i,s,f,o,h,u,g)),(i=r[1])&&e.push(new Bn(i,h,a,o,l,f,g)),(i=r[0])&&e.push(new Bn(i,s,a,o,h,f,g))}return this}function iue(n){var e=[],t=[],r;for(this._root&&e.push(new Bn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.z0,u=r.x1,c=r.y1,h=r.z1,f=(a+u)/2,g=(o+c)/2,m=(l+h)/2;(s=i[0])&&e.push(new Bn(s,a,o,l,f,g,m)),(s=i[1])&&e.push(new Bn(s,f,o,l,u,g,m)),(s=i[2])&&e.push(new Bn(s,a,g,l,f,c,m)),(s=i[3])&&e.push(new Bn(s,f,g,l,u,c,m)),(s=i[4])&&e.push(new Bn(s,a,o,m,f,g,h)),(s=i[5])&&e.push(new Bn(s,f,o,m,u,g,h)),(s=i[6])&&e.push(new Bn(s,a,g,m,f,c,h)),(s=i[7])&&e.push(new Bn(s,f,g,m,u,c,h))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function sue(n){return n[0]}function aue(n){return arguments.length?(this._x=n,this):this._x}function oue(n){return n[1]}function lue(n){return arguments.length?(this._y=n,this):this._y}function uue(n){return n[2]}function cue(n){return arguments.length?(this._z=n,this):this._z}function WV(n,e,t,r){var i=new lI(e??sue,t??oue,r??uue,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function lI(n,e,t,r,i,s,a,o,l){this._x=n,this._y=e,this._z=t,this._x0=r,this._y0=i,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this._root=void 0}function QF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ri=WV.prototype=lI.prototype;ri.copy=function(){var n=new lI(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=QF(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=QF(r));return n};ri.add=jle;ri.addAll=Wle;ri.cover=qle;ri.data=Xle;ri.extent=Yle;ri.find=Kle;ri.findAllWithinRadius=Qle;ri.remove=Jle;ri.removeAll=eue;ri.root=tue;ri.size=nue;ri.visit=rue;ri.visitAfter=iue;ri.x=aue;ri.y=lue;ri.z=cue;function Lo(n){return function(){return n}}function wo(n){return(n()-.5)*1e-6}function due(n){return n.index}function JF(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function hue(n){var e=due,t=f,r,i=Lo(30),s,a,o,l,u,c,h=1;n==null&&(n=[]);function f(b){return 1/Math.min(l[b.source.index],l[b.target.index])}function g(b){for(var S=0,E=n.length;S<h;++S)for(var A=0,R,w,M,I=0,C=0,k=0,O,z;A<E;++A)R=n[A],w=R.source,M=R.target,I=M.x+M.vx-w.x-w.vx||wo(c),o>1&&(C=M.y+M.vy-w.y-w.vy||wo(c)),o>2&&(k=M.z+M.vz-w.z-w.vz||wo(c)),O=Math.sqrt(I*I+C*C+k*k),O=(O-s[A])/O*b*r[A],I*=O,C*=O,k*=O,M.vx-=I*(z=u[A]),o>1&&(M.vy-=C*z),o>2&&(M.vz-=k*z),w.vx+=I*(z=1-z),o>1&&(w.vy+=C*z),o>2&&(w.vz+=k*z)}function m(){if(a){var b,S=a.length,E=n.length,A=new Map(a.map((w,M)=>[e(w,M,a),w])),R;for(b=0,l=new Array(S);b<E;++b)R=n[b],R.index=b,typeof R.source!="object"&&(R.source=JF(A,R.source)),typeof R.target!="object"&&(R.target=JF(A,R.target)),l[R.source.index]=(l[R.source.index]||0)+1,l[R.target.index]=(l[R.target.index]||0)+1;for(b=0,u=new Array(E);b<E;++b)R=n[b],u[b]=l[R.source.index]/(l[R.source.index]+l[R.target.index]);r=new Array(E),v(),s=new Array(E),_()}}function v(){if(a)for(var b=0,S=n.length;b<S;++b)r[b]=+t(n[b],b,n)}function _(){if(a)for(var b=0,S=n.length;b<S;++b)s[b]=+i(n[b],b,n)}return g.initialize=function(b,...S){a=b,c=S.find(E=>typeof E=="function")||Math.random,o=S.find(E=>[1,2,3].includes(E))||2,m()},g.links=function(b){return arguments.length?(n=b,m(),g):n},g.id=function(b){return arguments.length?(e=b,g):e},g.iterations=function(b){return arguments.length?(h=+b,g):h},g.strength=function(b){return arguments.length?(t=typeof b=="function"?b:Lo(+b),v(),g):t},g.distance=function(b){return arguments.length?(i=typeof b=="function"?b:Lo(+b),_(),g):i},g}var pue={value:()=>{}};function qV(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new jb(t)}function jb(n){this._=n}function fue(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}jb.prototype=qV.prototype={constructor:jb,on:function(n,e){var t=this._,r=fue(n+"",t),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(n=r[s]).type)&&(i=gue(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(n=r[s]).type)t[i]=e2(t[i],n.name,e);else if(e==null)for(i in t)t[i]=e2(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new jb(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function gue(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function e2(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=pue,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var _h=0,vf=0,Yp=0,XV=1e3,f_,xf,g_=0,rc=0,uv=0,Ag=typeof performance=="object"&&performance.now?performance:Date,YV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function KV(){return rc||(YV(mue),rc=Ag.now()+uv)}function mue(){rc=0}function OT(){this._call=this._time=this._next=null}OT.prototype=ZV.prototype={constructor:OT,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?KV():+t)+(e==null?0:+e),!this._next&&xf!==this&&(xf?xf._next=this:f_=this,xf=this),this._call=n,this._time=t,PT()},stop:function(){this._call&&(this._call=null,this._time=1/0,PT())}};function ZV(n,e,t){var r=new OT;return r.restart(n,e,t),r}function yue(){KV(),++_h;for(var n=f_,e;n;)(e=rc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--_h}function t2(){rc=(g_=Ag.now())+uv,_h=vf=0;try{yue()}finally{_h=0,_ue(),rc=0}}function bue(){var n=Ag.now(),e=n-g_;e>XV&&(uv-=e,g_=n)}function _ue(){for(var n,e=f_,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:f_=t);xf=n,PT(r)}function PT(n){if(!_h){vf&&(vf=clearTimeout(vf));var e=n-rc;e>24?(n<1/0&&(vf=setTimeout(t2,n-Ag.now()-uv)),Yp&&(Yp=clearInterval(Yp))):(Yp||(g_=Ag.now(),Yp=setInterval(bue,XV)),_h=1,YV(t2))}}const vue=1664525,xue=1013904223,n2=4294967296;function Sue(){let n=1;return()=>(n=(vue*n+xue)%n2)/n2}var r2=3;function w0(n){return n.x}function i2(n){return n.y}function Eue(n){return n.z}var Tue=10,wue=Math.PI*(3-Math.sqrt(5)),Aue=Math.PI*20/(9+Math.sqrt(221));function Rue(n,e){e=e||2;var t=Math.min(r2,Math.max(1,Math.round(e))),r,i=1,s=.001,a=1-Math.pow(s,1/300),o=0,l=.6,u=new Map,c=ZV(g),h=qV("tick","end"),f=Sue();n==null&&(n=[]);function g(){m(),h.call("tick",r),i<s&&(c.stop(),h.call("end",r))}function m(b){var S,E=n.length,A;b===void 0&&(b=1);for(var R=0;R<b;++R)for(i+=(o-i)*a,u.forEach(function(w){w(i)}),S=0;S<E;++S)A=n[S],A.fx==null?A.x+=A.vx*=l:(A.x=A.fx,A.vx=0),t>1&&(A.fy==null?A.y+=A.vy*=l:(A.y=A.fy,A.vy=0)),t>2&&(A.fz==null?A.z+=A.vz*=l:(A.z=A.fz,A.vz=0));return r}function v(){for(var b=0,S=n.length,E;b<S;++b){if(E=n[b],E.index=b,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),E.fz!=null&&(E.z=E.fz),isNaN(E.x)||t>1&&isNaN(E.y)||t>2&&isNaN(E.z)){var A=Tue*(t>2?Math.cbrt(.5+b):t>1?Math.sqrt(.5+b):b),R=b*wue,w=b*Aue;t===1?E.x=A:t===2?(E.x=A*Math.cos(R),E.y=A*Math.sin(R)):(E.x=A*Math.sin(R)*Math.cos(w),E.y=A*Math.cos(R),E.z=A*Math.sin(R)*Math.sin(w))}(isNaN(E.vx)||t>1&&isNaN(E.vy)||t>2&&isNaN(E.vz))&&(E.vx=0,t>1&&(E.vy=0),t>2&&(E.vz=0))}}function _(b){return b.initialize&&b.initialize(n,f,t),b}return v(),r={tick:m,restart:function(){return c.restart(g),r},stop:function(){return c.stop(),r},numDimensions:function(b){return arguments.length?(t=Math.min(r2,Math.max(1,Math.round(b))),u.forEach(_),r):t},nodes:function(b){return arguments.length?(n=b,v(),u.forEach(_),r):n},alpha:function(b){return arguments.length?(i=+b,r):i},alphaMin:function(b){return arguments.length?(s=+b,r):s},alphaDecay:function(b){return arguments.length?(a=+b,r):+a},alphaTarget:function(b){return arguments.length?(o=+b,r):o},velocityDecay:function(b){return arguments.length?(l=1-b,r):1-l},randomSource:function(b){return arguments.length?(f=b,u.forEach(_),r):f},force:function(b,S){return arguments.length>1?(S==null?u.delete(b):u.set(b,_(S)),r):u.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),S=b.shift()||0,E=(t>1?b.shift():null)||0,A=(t>2?b.shift():null)||0,R=b.shift()||1/0,w=0,M=n.length,I,C,k,O,z,W;for(R*=R,w=0;w<M;++w)z=n[w],I=S-z.x,C=E-(z.y||0),k=A-(z.z||0),O=I*I+C*C+k*k,O<R&&(W=z,R=O);return W},on:function(b,S){return arguments.length>1?(h.on(b,S),r):h.on(b)}}}function Nue(){var n,e,t,r,i,s=Lo(-30),a,o=1,l=1/0,u=.81;function c(m){var v,_=n.length,b=(e===1?VV(n,w0):e===2?HV(n,w0,i2):e===3?WV(n,w0,i2,Eue):null).visitAfter(f);for(i=m,v=0;v<_;++v)t=n[v],b.visit(g)}function h(){if(n){var m,v=n.length,_;for(a=new Array(v),m=0;m<v;++m)_=n[m],a[_.index]=+s(_,m,n)}}function f(m){var v=0,_,b,S=0,E,A,R,w,M=m.length;if(M){for(E=A=R=w=0;w<M;++w)(_=m[w])&&(b=Math.abs(_.value))&&(v+=_.value,S+=b,E+=b*(_.x||0),A+=b*(_.y||0),R+=b*(_.z||0));v*=Math.sqrt(4/M),m.x=E/S,e>1&&(m.y=A/S),e>2&&(m.z=R/S)}else{_=m,_.x=_.data.x,e>1&&(_.y=_.data.y),e>2&&(_.z=_.data.z);do v+=a[_.data.index];while(_=_.next)}m.value=v}function g(m,v,_,b,S){if(!m.value)return!0;var E=[_,b,S][e-1],A=m.x-t.x,R=e>1?m.y-t.y:0,w=e>2?m.z-t.z:0,M=E-v,I=A*A+R*R+w*w;if(M*M/u<I)return I<l&&(A===0&&(A=wo(r),I+=A*A),e>1&&R===0&&(R=wo(r),I+=R*R),e>2&&w===0&&(w=wo(r),I+=w*w),I<o&&(I=Math.sqrt(o*I)),t.vx+=A*m.value*i/I,e>1&&(t.vy+=R*m.value*i/I),e>2&&(t.vz+=w*m.value*i/I)),!0;if(m.length||I>=l)return;(m.data!==t||m.next)&&(A===0&&(A=wo(r),I+=A*A),e>1&&R===0&&(R=wo(r),I+=R*R),e>2&&w===0&&(w=wo(r),I+=w*w),I<o&&(I=Math.sqrt(o*I)));do m.data!==t&&(M=a[m.data.index]*i/I,t.vx+=A*M,e>1&&(t.vy+=R*M),e>2&&(t.vz+=w*M));while(m=m.next)}return c.initialize=function(m,...v){n=m,r=v.find(_=>typeof _=="function")||Math.random,e=v.find(_=>[1,2,3].includes(_))||2,h()},c.strength=function(m){return arguments.length?(s=typeof m=="function"?m:Lo(+m),h(),c):s},c.distanceMin=function(m){return arguments.length?(o=m*m,c):Math.sqrt(o)},c.distanceMax=function(m){return arguments.length?(l=m*m,c):Math.sqrt(l)},c.theta=function(m){return arguments.length?(u=m*m,c):Math.sqrt(u)},c}function Cue(n,e,t,r){var i,s,a=Lo(.1),o,l;typeof n!="function"&&(n=Lo(+n)),e==null&&(e=0),t==null&&(t=0),r==null&&(r=0);function u(h){for(var f=0,g=i.length;f<g;++f){var m=i[f],v=m.x-e||1e-6,_=(m.y||0)-t||1e-6,b=(m.z||0)-r||1e-6,S=Math.sqrt(v*v+_*_+b*b),E=(l[f]-S)*o[f]*h/S;m.vx+=v*E,s>1&&(m.vy+=_*E),s>2&&(m.vz+=b*E)}}function c(){if(i){var h,f=i.length;for(o=new Array(f),l=new Array(f),h=0;h<f;++h)l[h]=+n(i[h],h,i),o[h]=isNaN(l[h])?0:+a(i[h],h,i)}}return u.initialize=function(h,...f){i=h,s=f.find(g=>[1,2,3].includes(g))||2,c()},u.strength=function(h){return arguments.length?(a=typeof h=="function"?h:Lo(+h),c(),u):a},u.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Lo(+h),c(),u):n},u.x=function(h){return arguments.length?(e=+h,u):e},u.y=function(h){return arguments.length?(t=+h,u):t},u.z=function(h){return arguments.length?(r=+h,u):r},u}function Mue(n){kue(n);const e=Iue(n);return n.on=e.on,n.off=e.off,n.fire=e.fire,n}function Iue(n){let e=Object.create(null);return{on:function(t,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");let s=e[t];return s||(s=e[t]=[]),s.push({callback:r,ctx:i}),n},off:function(t,r){if(typeof t>"u")return e=Object.create(null),n;if(e[t])if(typeof r!="function")delete e[t];else{const a=e[t];for(let o=0;o<a.length;++o)a[o].callback===r&&a.splice(o,1)}return n},fire:function(t){const r=e[t];if(!r)return n;let i;arguments.length>1&&(i=Array.prototype.slice.call(arguments,1));for(let s=0;s<r.length;++s){const a=r[s];a.callback.apply(a.ctx,i)}return n}}}function kue(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");const e=["on","fire","off"];for(let t=0;t<e.length;++t)if(n.hasOwnProperty(e[t]))throw new Error("Subject cannot be eventified, since it already has property '"+e[t]+"'")}function Lue(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,t=new Map,r={},i=0,s=n.multigraph?A:E,a=[],o=H,l=H,u=H,c=H,h={version:20,addNode:v,addLink:S,removeLink:I,removeNode:b,getNode:_,getNodeCount:R,getLinkCount:w,getEdgeCount:w,getLinksCount:w,getNodesCount:R,getLinks:M,forEachNode:D,forEachLinkedNode:q,forEachLink:W,beginUpdate:u,endUpdate:c,clear:z,hasLink:k,hasNode:_,getLink:k,getLinkById:O};return Mue(h),f(),h;function f(){var U=h.on;h.on=ne;function ne(){return h.beginUpdate=u=G,h.endUpdate=c=re,o=g,l=m,h.on=U,U.apply(h,arguments)}}function g(U,ne){a.push({link:U,changeType:ne})}function m(U,ne){a.push({node:U,changeType:ne})}function v(U,ne){if(U===void 0)throw new Error("Invalid node identifier");u();var B=_(U);return B?(B.data=ne,l(B,"update")):(B=new Due(U,ne),l(B,"add")),e.set(U,B),c(),B}function _(U){return e.get(U)}function b(U){var ne=_(U);if(!ne)return!1;u();var B=ne.links;return B&&(B.forEach(C),ne.links=null),e.delete(U),l(ne,"remove"),c(),!0}function S(U,ne,B){u();var Oe=_(U)||v(U),Y=_(ne)||v(ne),V=s(U,ne,B),ae=t.has(V.id);return t.set(V.id,V),s2(Oe,V),U!==ne&&s2(Y,V),o(V,ae?"update":"add"),c(),V}function E(U,ne,B){var Oe=Jy(U,ne),Y=t.get(Oe);return Y?(Y.data=B,Y):new a2(U,ne,B,Oe)}function A(U,ne,B){var Oe=Jy(U,ne),Y=r.hasOwnProperty(Oe);if(Y||k(U,ne)){Y||(r[Oe]=0);var V="@"+ ++r[Oe];Oe=Jy(U+V,ne+V)}return new a2(U,ne,B,Oe)}function R(){return e.size}function w(){return t.size}function M(U){var ne=_(U);return ne?ne.links:null}function I(U,ne){return ne!==void 0&&(U=k(U,ne)),C(U)}function C(U){if(!U||!t.get(U.id))return!1;u(),t.delete(U.id);var ne=_(U.fromId),B=_(U.toId);return ne&&ne.links.delete(U),B&&B.links.delete(U),o(U,"remove"),c(),!0}function k(U,ne){if(!(U===void 0||ne===void 0))return t.get(Jy(U,ne))}function O(U){if(U!==void 0)return t.get(U)}function z(){u(),D(function(U){b(U.id)}),c()}function W(U){if(typeof U=="function")for(var ne=t.values(),B=ne.next();!B.done;){if(U(B.value))return!0;B=ne.next()}}function q(U,ne,B){var Oe=_(U);if(Oe&&Oe.links&&typeof ne=="function")return B?Q(Oe.links,U,ne):X(Oe.links,U,ne)}function X(U,ne,B){for(var Oe,Y=U.values(),V=Y.next();!V.done;){var ae=V.value,_e=ae.fromId===ne?ae.toId:ae.fromId;if(Oe=B(e.get(_e),ae),Oe)return!0;V=Y.next()}}function Q(U,ne,B){for(var Oe,Y=U.values(),V=Y.next();!V.done;){var ae=V.value;if(ae.fromId===ne&&(Oe=B(e.get(ae.toId),ae),Oe))return!0;V=Y.next()}}function H(){}function G(){i+=1}function re(){i-=1,i===0&&a.length>0&&(h.fire("changed",a),a.length=0)}function D(U){if(typeof U!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+U);for(var ne=e.values(),B=ne.next();!B.done;){if(U(B.value))return!0;B=ne.next()}}}function Due(n,e){this.id=n,this.links=null,this.data=e}function s2(n,e){n.links?n.links.add(e):n.links=new Set([e])}function a2(n,e,t,r){this.fromId=n,this.toId=e,this.data=t,this.id=r}function Jy(n,e){return n.toString()+" "+e.toString()}var eb={exports:{}},rd={exports:{}},A0,o2;function QV(){return o2||(o2=1,A0=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)}),A0}var R0,l2;function jh(){if(l2)return R0;l2=1;const n=QV();return R0=function(t){return r;function r(i,s){let a=s&&s.indent||0,o=s&&s.join!==void 0?s.join:`
`,l=Array(a+1).join(" "),u=[];for(let c=0;c<t;++c){let h=n(c),f=c===0?"":l;u.push(f+i.replace(/{var}/g,h))}return u.join(o)}},R0}var u2;function Oue(){if(u2)return rd.exports;u2=1;const n=jh();rd.exports=e,rd.exports.generateCreateBodyFunctionBody=t,rd.exports.getVectorCode=i,rd.exports.getBodyCode=r;function e(s,a){let o=t(s,a),{Body:l}=new Function(o)();return l}function t(s,a){return`
${i(s,a)}
${r(s)}
return {Body: Body, Vector: Vector};
`}function r(s){let a=n(s),o=a("{var}",{join:", "});return`
function Body(${o}) {
  this.isPinned = false;
  this.pos = new Vector(${o});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${o}) {
  ${a("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function i(s,a){let o=n(s),l="";return a&&(l=`${o(`
	   var v{var};
	Object.defineProperty(this, '{var}', {
	  set: function(v) { 
	    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
	    v{var} = v; 
	  },
	  get: function() { return v{var}; }
	});`)}`),`function Vector(${o("{var}",{join:", "})}) {
  ${l}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${o('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${o("this.{var} = v.{var};",{indent:4})}
    } else {
      ${o('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${o("this.{var} = ",{join:""})}0;
  };`}return rd.exports}var vo={exports:{}},c2;function Pue(){if(c2)return vo.exports;c2=1;const n=jh(),e=QV();vo.exports=t,vo.exports.generateQuadTreeFunctionBody=r,vo.exports.getInsertStackCode=l,vo.exports.getQuadNodeCode=o,vo.exports.isSamePosition=i,vo.exports.getChildBodyCode=a,vo.exports.setChildBodyCode=s;function t(u){let c=r(u);return new Function(c)()}function r(u){let c=n(u),h=Math.pow(2,u);return`
${l()}
${o(u)}
${i(u)}
${a(u)}
${s(u)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${v("      node.")}
      node.body = null;
      node.mass = ${c("node.mass_{var} = ",{join:""})}0;
      ${c("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${c("var d{var};",{indent:4})}
    var r; 
    ${c("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${c("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${c("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${c("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${c("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${c("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${c("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${c("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${c("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${c("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${e(0)} - node.min_${e(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${c("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${m()}
        }
      }
    }

    ${c("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${c("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${c("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${c("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${c("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${c("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${c("root.min_{var} = {var}min;",{indent:4})}
    ${c("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${c("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${c("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${c("var min_{var} = node.min_{var};",{indent:8})}
        ${c("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${g(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${c("child.min_{var} = min_{var};",{indent:10})}
          ${c("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${c("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${c("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function g(_){let b=[],S=Array(_+1).join(" ");for(let E=0;E<u;++E)b.push(S+`if (${e(E)} > max_${e(E)}) {`),b.push(S+`  quadIdx = quadIdx + ${Math.pow(2,E)};`),b.push(S+`  min_${e(E)} = max_${e(E)};`),b.push(S+`  max_${e(E)} = node.max_${e(E)};`),b.push(S+"}");return b.join(`
`)}function m(){let _=Array(11).join(" "),b=[];for(let S=0;S<h;++S)b.push(_+`if (node.quad${S}) {`),b.push(_+`  queue[pushIdx] = node.quad${S};`),b.push(_+"  queueLength += 1;"),b.push(_+"  pushIdx += 1;"),b.push(_+"}");return b.join(`
`)}function v(_){let b=[];for(let S=0;S<h;++S)b.push(`${_}quad${S} = null;`);return b.join(`
`)}}function i(u){let c=n(u);return`
  function isSamePosition(point1, point2) {
    ${c("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${c("d{var} < 1e-8",{join:" && "})};
  }  
`}function s(u){var c=Math.pow(2,u);return`
function setChild(node, idx, child) {
  ${h()}
}`;function h(){let f=[];for(let g=0;g<c;++g){let m=g===0?"  ":"  else ";f.push(`${m}if (idx === ${g}) node.quad${g} = child;`)}return f.join(`
`)}}function a(u){return`function getChild(node, idx) {
${c()}
  return null;
}`;function c(){let h=[],f=Math.pow(2,u);for(let g=0;g<f;++g)h.push(`  if (idx === ${g}) return node.quad${g};`);return h.join(`
`)}}function o(u){let c=n(u),h=Math.pow(2,u);var f=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${g("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${c("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${c("this.min_{var} = 0;",{indent:2})}
  ${c("this.max_{var} = 0;",{indent:2})}
}
`;return f;function g(m){let v=[];for(let _=0;_<h;++_)v.push(`${m}quad${_} = null;`);return v.join(`
`)}}function l(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}return vo.exports}var tb={exports:{}},d2;function Fue(){if(d2)return tb.exports;d2=1,tb.exports=e,tb.exports.generateFunctionBody=t;const n=jh();function e(r){let i=t(r);return new Function("bodies","settings","random",i)}function t(r){let i=n(r);return`
  var boundingBox = {
    ${i("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${i("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${i("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${i("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${i("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${i("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${i("var max_{var} = -Infinity;",{indent:4})}
    ${i("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${i("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${i("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${i("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${i("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${i("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}return tb.exports}var nb={exports:{}},h2;function Uue(){if(h2)return nb.exports;h2=1;const n=jh();nb.exports=e,nb.exports.generateCreateDragForceFunctionBody=t;function e(r){let i=t(r);return new Function("options",i)}function t(r){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${n(r)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}return nb.exports}var rb={exports:{}},p2;function Bue(){if(p2)return rb.exports;p2=1;const n=jh();rb.exports=e,rb.exports.generateCreateSpringForceFunctionBody=t;function e(r){let i=t(r);return new Function("options","random",i)}function t(r){let i=n(r);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${i("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${i("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${i("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${i("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${i("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${i("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}return rb.exports}var ib={exports:{}},f2;function zue(){if(f2)return ib.exports;f2=1;const n=jh();ib.exports=e,ib.exports.generateIntegratorFunctionBody=t;function e(r){let i=t(r);return new Function("bodies","timeStep","adaptiveTimeStepWeight",i)}function t(r){let i=n(r);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${i("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${i("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${i("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${i("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${i("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${i("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${i("body.pos.{var} += d{var};",{indent:4})}

    ${i("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${i("t{var} * t{var}",{join:" + "})})/length;
`}return ib.exports}var N0,g2;function Gue(){if(g2)return N0;g2=1,N0=n;function n(e,t,r,i){this.from=e,this.to=t,this.length=r,this.coefficient=i}return N0}var C0,m2;function Vue(){if(m2)return C0;m2=1,C0=n;function n(e,t){var r;if(e||(e={}),t){for(r in t)if(t.hasOwnProperty(r)){var i=e.hasOwnProperty(r),s=typeof t[r],a=!i||typeof e[r]!==s;a?e[r]=t[r]:s==="object"&&(e[r]=n(e[r],t[r]))}}return e}return C0}var M0,y2;function JV(){if(y2)return M0;y2=1;function n(r){t(r);const i=e(r);return r.on=i.on,r.off=i.off,r.fire=i.fire,r}function e(r){let i=Object.create(null);return{on:function(s,a,o){if(typeof a!="function")throw new Error("callback is expected to be a function");let l=i[s];return l||(l=i[s]=[]),l.push({callback:a,ctx:o}),r},off:function(s,a){if(typeof s>"u")return i=Object.create(null),r;if(i[s])if(typeof a!="function")delete i[s];else{const o=i[s];for(let l=0;l<o.length;++l)o[l].callback===a&&o.splice(l,1)}return r},fire:function(s){const a=i[s];if(!a)return r;let o;arguments.length>1&&(o=Array.prototype.slice.call(arguments,1));for(let l=0;l<a.length;++l){const u=a[l];u.callback.apply(u.ctx,o)}return r}}}function t(r){if(!r)throw new Error("Eventify cannot use falsy object as events subject");const i=["on","fire","off"];for(let s=0;s<i.length;++s)if(r.hasOwnProperty(i[s]))throw new Error("Subject cannot be eventified, since it already has property '"+i[s]+"'")}return M0=n,M0}var Kp={exports:{}},b2;function $ue(){if(b2)return Kp.exports;b2=1,Kp.exports=n,Kp.exports.random=n,Kp.exports.randomIterator=o;function n(l){var u=typeof l=="number"?l:+new Date;return new e(u)}function e(l){this.seed=l}e.prototype.next=a,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=t,e.prototype.random=s;function t(){var l,u,c;do u=this.nextDouble()*2-1,c=this.nextDouble()*2-1,l=u*u+c*c;while(l>=1||l===0);return u*Math.sqrt(-2*Math.log(l)/l)}e.prototype.levy=r;function r(){var l=1.5,u=Math.pow(i(1+l)*Math.sin(Math.PI*l/2)/(i((1+l)/2)*l*Math.pow(2,(l-1)/2)),1/l);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/l)}function i(l){return Math.sqrt(2*Math.PI/l)*Math.pow(1/Math.E*(l+1/(12*l-1/(10*l))),l)}function s(){var l=this.seed;return l=l+2127912214+(l<<12)&4294967295,l=(l^3345072700^l>>>19)&4294967295,l=l+374761393+(l<<5)&4294967295,l=(l+3550635116^l<<9)&4294967295,l=l+4251993797+(l<<3)&4294967295,l=(l^3042594569^l>>>16)&4294967295,this.seed=l,(l&268435455)/268435456}function a(l){return Math.floor(this.nextDouble()*l)}function o(l,u){var c=u||n();if(typeof c.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:f,shuffle:h};function h(){var g,m,v;for(g=l.length-1;g>0;--g)m=c.next(g+1),v=l[m],l[m]=l[g],l[g]=v;return l}function f(g){var m,v,_;for(m=l.length-1;m>0;--m)v=c.next(m+1),_=l[v],l[v]=l[m],l[m]=_,g(_);l.length&&g(l[0])}}return Kp.exports}var I0,_2;function v2(){if(_2)return I0;_2=1,I0=o;var n=Oue(),e=Pue(),t=Fue(),r=Uue(),i=Bue(),s=zue(),a={};function o(c){var h=Gue(),f=Vue(),g=JV();if(c){if(c.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(c.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}c=f(c,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var m=a[c.dimensions];if(!m){var v=c.dimensions;m={Body:n(v,c.debug),createQuadTree:e(v),createBounds:t(v),createDragForce:r(v),createSpringForce:i(v),integrate:s(v)},a[v]=m}var _=m.Body,b=m.createQuadTree,S=m.createBounds,E=m.createDragForce,A=m.createSpringForce,R=m.integrate,w=Y=>new _(Y),M=$ue().random(42),I=[],C=[],k=b(c,M),O=S(I,c,M),z=A(c,M),W=E(c),q=0,X=[],Q=new Map,H=0;D("nbody",B),D("spring",Oe);var G={bodies:I,quadTree:k,springs:C,settings:c,addForce:D,removeForce:U,getForces:ne,step:function(){for(var Y=0;Y<X.length;++Y)X[Y](H);var V=R(I,c.timeStep,c.adaptiveTimeStepWeight);return H+=1,V},addBody:function(Y){if(!Y)throw new Error("Body is required");return I.push(Y),Y},addBodyAt:function(Y){if(!Y)throw new Error("Body position is required");var V=w(Y);return I.push(V),V},removeBody:function(Y){if(Y){var V=I.indexOf(Y);if(!(V<0))return I.splice(V,1),I.length===0&&O.reset(),!0}},addSpring:function(Y,V,ae,_e){if(!Y||!V)throw new Error("Cannot add null spring to force simulator");typeof ae!="number"&&(ae=-1);var Pe=new h(Y,V,ae,_e>=0?_e:-1);return C.push(Pe),Pe},getTotalMovement:function(){return q},removeSpring:function(Y){if(Y){var V=C.indexOf(Y);if(V>-1)return C.splice(V,1),!0}},getBestNewBodyPosition:function(Y){return O.getBestNewPosition(Y)},getBBox:re,getBoundingBox:re,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(Y){return Y!==void 0?(c.gravity=Y,k.options({gravity:Y}),this):c.gravity},theta:function(Y){return Y!==void 0?(c.theta=Y,k.options({theta:Y}),this):c.theta},random:M};return l(c,G),g(G),G;function re(){return O.update(),O.box}function D(Y,V){if(Q.has(Y))throw new Error("Force "+Y+" is already added");Q.set(Y,V),X.push(V)}function U(Y){var V=X.indexOf(Q.get(Y));V<0||(X.splice(V,1),Q.delete(Y))}function ne(){return Q}function B(){if(I.length!==0){k.insertBodies(I);for(var Y=I.length;Y--;){var V=I[Y];V.isPinned||(V.reset(),k.updateBodyForce(V),W.update(V))}}}function Oe(){for(var Y=C.length;Y--;)z.update(C[Y])}}function l(c,h){for(var f in c)u(c,h,f)}function u(c,h,f){if(c.hasOwnProperty(f)&&typeof h[f]!="function"){var g=Number.isFinite(c[f]);g?h[f]=function(m){if(m!==void 0){if(!Number.isFinite(m))throw new Error("Value of "+f+" should be a valid number.");return c[f]=m,h}return c[f]}:h[f]=function(m){return m!==void 0?(c[f]=m,h):c[f]}}}return I0}var x2;function Hue(){if(x2)return eb.exports;x2=1,eb.exports=e,eb.exports.simulator=v2();var n=JV();function e(r,i){if(!r)throw new Error("Graph structure cannot be undefined");var s=i&&i.createSimulator||v2(),a=s(i);if(Array.isArray(i))throw new Error("Physics settings is expected to be an object");var o=r.version>19?Q:X;i&&typeof i.nodeMass=="function"&&(o=i.nodeMass);var l=new Map,u={},c=0,h=a.settings.springTransform||t;w(),E();var f=!1,g={step:function(){if(c===0)return m(!0),!0;var H=a.step();g.lastMove=H,g.fire("step");var G=H/c,re=G<=.01;return m(re),re},getNodePosition:function(H){return q(H).pos},setNodePosition:function(H){var G=q(H);G.setPosition.apply(G,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(H){var G=u[H];if(G)return{from:G.from.pos,to:G.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:v,pinNode:function(H,G){var re=q(H.id);re.isPinned=!!G},isNodePinned:function(H){return q(H.id).isPinned},dispose:function(){r.off("changed",R),g.fire("disposed")},getBody:S,getSpring:b,getForceVectorLength:_,simulator:a,graph:r,lastMove:0};return n(g),g;function m(H){f!==H&&(f=H,A(H))}function v(H){l.forEach(H)}function _(){var H=0,G=0;return v(function(re){H+=Math.abs(re.force.x),G+=Math.abs(re.force.y)}),Math.sqrt(H*H+G*G)}function b(H,G){var re;if(G===void 0)typeof H!="object"?re=H:re=H.id;else{var D=r.hasLink(H,G);if(!D)return;re=D.id}return u[re]}function S(H){return l.get(H)}function E(){r.on("changed",R)}function A(H){g.fire("stable",H)}function R(H){for(var G=0;G<H.length;++G){var re=H[G];re.changeType==="add"?(re.node&&M(re.node.id),re.link&&C(re.link)):re.changeType==="remove"&&(re.node&&I(re.node),re.link&&k(re.link))}c=r.getNodesCount()}function w(){c=0,r.forEachNode(function(H){M(H.id),c+=1}),r.forEachLink(C)}function M(H){var G=l.get(H);if(!G){var re=r.getNode(H);if(!re)throw new Error("initBody() was called with unknown node id");var D=re.position;if(!D){var U=O(re);D=a.getBestNewBodyPosition(U)}G=a.addBodyAt(D),G.id=H,l.set(H,G),z(H),W(re)&&(G.isPinned=!0)}}function I(H){var G=H.id,re=l.get(G);re&&(l.delete(G),a.removeBody(re))}function C(H){z(H.fromId),z(H.toId);var G=l.get(H.fromId),re=l.get(H.toId),D=a.addSpring(G,re,H.length);h(H,D),u[H.id]=D}function k(H){var G=u[H.id];if(G){var re=r.getNode(H.fromId),D=r.getNode(H.toId);re&&z(re.id),D&&z(D.id),delete u[H.id],a.removeSpring(G)}}function O(H){var G=[];if(!H.links)return G;for(var re=Math.min(H.links.length,2),D=0;D<re;++D){var U=H.links[D],ne=U.fromId!==H.id?l.get(U.fromId):l.get(U.toId);ne&&ne.pos&&G.push(ne)}return G}function z(H){var G=l.get(H);if(G.mass=o(H),Number.isNaN(G.mass))throw new Error("Node mass should be a number")}function W(H){return H&&(H.isPinned||H.data&&H.data.isPinned)}function q(H){var G=l.get(H);return G||(M(H),G=l.get(H)),G}function X(H){var G=r.getLinks(H);return G?1+G.length/3:1}function Q(H){var G=r.getLinks(H);return G?1+G.size/3:1}}function t(){}return eb.exports}var jue=Hue();const Wue=Lg(jue);function FT(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var que=typeof global=="object"&&global&&global.Object===Object&&global,Xue=typeof self=="object"&&self&&self.Object===Object&&self,e4=que||Xue||Function("return this")(),k0=function(){return e4.Date.now()},Yue=/\s/;function Kue(n){for(var e=n.length;e--&&Yue.test(n.charAt(e)););return e}var Zue=/^\s+/;function Que(n){return n&&n.slice(0,Kue(n)+1).replace(Zue,"")}var m_=e4.Symbol,t4=Object.prototype,Jue=t4.hasOwnProperty,ece=t4.toString,Zp=m_?m_.toStringTag:void 0;function tce(n){var e=Jue.call(n,Zp),t=n[Zp];try{n[Zp]=void 0;var r=!0}catch{}var i=ece.call(n);return r&&(e?n[Zp]=t:delete n[Zp]),i}var nce=Object.prototype,rce=nce.toString;function ice(n){return rce.call(n)}var sce="[object Null]",ace="[object Undefined]",S2=m_?m_.toStringTag:void 0;function oce(n){return n==null?n===void 0?ace:sce:S2&&S2 in Object(n)?tce(n):ice(n)}function lce(n){return n!=null&&typeof n=="object"}var uce="[object Symbol]";function cce(n){return typeof n=="symbol"||lce(n)&&oce(n)==uce}var E2=NaN,dce=/^[-+]0x[0-9a-f]+$/i,hce=/^0b[01]+$/i,pce=/^0o[0-7]+$/i,fce=parseInt;function T2(n){if(typeof n=="number")return n;if(cce(n))return E2;if(FT(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=FT(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Que(n);var t=hce.test(n);return t||pce.test(n)?fce(n.slice(2),t?2:8):dce.test(n)?E2:+n}var gce="Expected a function",mce=Math.max,yce=Math.min;function bce(n,e,t){var r,i,s,a,o,l,u=0,c=!1,h=!1,f=!0;if(typeof n!="function")throw new TypeError(gce);e=T2(e)||0,FT(t)&&(c=!!t.leading,h="maxWait"in t,s=h?mce(T2(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function g(w){var M=r,I=i;return r=i=void 0,u=w,a=n.apply(I,M),a}function m(w){return u=w,o=setTimeout(b,e),c?g(w):a}function v(w){var M=w-l,I=w-u,C=e-M;return h?yce(C,s-I):C}function _(w){var M=w-l,I=w-u;return l===void 0||M>=e||M<0||h&&I>=s}function b(){var w=k0();if(_(w))return S(w);o=setTimeout(b,v(w))}function S(w){return o=void 0,f&&r?g(w):(r=i=void 0,a)}function E(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function A(){return o===void 0?a:S(k0())}function R(){var w=k0(),M=_(w);if(r=arguments,i=this,l=w,M){if(o===void 0)return m(l);if(h)return clearTimeout(o),o=setTimeout(b,e),g(l)}return o===void 0&&(o=setTimeout(b,e)),a}return R.cancel=E,R.flush=A,R}function w2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function _ce(n){if(Array.isArray(n))return n}function vce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xce(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Sce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Ece(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tce(n,e){return _ce(n)||Sce(n,e)||wce(n,e)||Ece()}function wce(n,e){if(n){if(typeof n=="string")return w2(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w2(n,e):void 0}}var Ace=xce(function n(e,t){var r=t.default,i=r===void 0?null:r,s=t.triggerUpdate,a=s===void 0?!0:s,o=t.onChange,l=o===void 0?function(u,c){}:o;vce(this,n),this.name=e,this.defaultVal=i,this.triggerUpdate=a,this.onChange=l});function cv(n){var e=n.stateInit,t=e===void 0?function(){return{}}:e,r=n.props,i=r===void 0?{}:r,s=n.methods,a=s===void 0?{}:s,o=n.aliases,l=o===void 0?{}:o,u=n.init,c=u===void 0?function(){}:u,h=n.update,f=h===void 0?function(){}:h,g=Object.keys(i).map(function(m){return new Ace(m,i[m])});return function m(){for(var v=arguments.length,_=new Array(v),b=0;b<v;b++)_[b]=arguments[b];var S=!!(this instanceof m&&this.constructor),E=S?_.shift():void 0,A=_[0],R=A===void 0?{}:A,w=Object.assign({},t instanceof Function?t(R):t,{initialised:!1}),M={};function I(O){return C(O,R),k(),I}var C=function(z,W){c.call(I,z,w,W),w.initialised=!0},k=bce(function(){w.initialised&&(f.call(I,w,M),M={})},1);return g.forEach(function(O){I[O.name]=z(O);function z(W){var q=W.name,X=W.triggerUpdate,Q=X===void 0?!1:X,H=W.onChange,G=H===void 0?function(U,ne){}:H,re=W.defaultVal,D=re===void 0?null:re;return function(U){var ne=w[q];if(!arguments.length)return ne;var B=U===void 0?D:U;return w[q]=B,G.call(I,B,w,ne),!M.hasOwnProperty(q)&&(M[q]=ne),Q&&k(),I}}}),Object.keys(a).forEach(function(O){I[O]=function(){for(var z,W=arguments.length,q=new Array(W),X=0;X<W;X++)q[X]=arguments[X];return(z=a[O]).call.apply(z,[I,w].concat(q))}}),Object.entries(l).forEach(function(O){var z=Tce(O,2),W=z[0],q=z[1];return I[W]=I[q]}),I.resetProps=function(){return g.forEach(function(O){I[O.name](O.defaultVal)}),I},I.resetProps(),w._rerender=k,S&&E&&I(E),I}}var on=(function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}});class A2 extends Map{constructor(e,t=Cce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(R2(this,e))}has(e){return super.has(R2(this,e))}set(e,t){return super.set(Rce(this,e),t)}delete(e){return super.delete(Nce(this,e))}}function R2({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function Rce({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Nce({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Cce(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Mce(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function Ice(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function UT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function kce(n){if(Array.isArray(n))return n}function Lce(n){if(Array.isArray(n))return UT(n)}function n4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Dce(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function di(n,e){return n.get(n4(n,e))}function id(n,e,t){Dce(n,e),e.set(n,t)}function sb(n,e,t){return n.set(n4(n,e),t),t}function Pce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jce(r.key),r)}}function Fce(n,e,t){return e&&Pce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Uce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Bce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function zce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vce(n,e){return kce(n)||Bce(n,e)||r4(n,e)||zce()}function $ce(n){return Lce(n)||Uce(n)||r4(n)||Gce()}function Hce(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function jce(n){var e=Hce(n,"string");return typeof e=="symbol"?e:e+""}function r4(n,e){if(n){if(typeof n=="string")return UT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?UT(n,e):void 0}}var sd=new WeakMap,Qp=new WeakMap,ad=new WeakMap,L0=new WeakMap,D0=new WeakMap,O0=new WeakMap,Wce=(function(){function n(){Oce(this,n),id(this,sd,new Map),id(this,Qp,new Map),id(this,ad,function(e){return e}),id(this,L0,function(){return{}}),id(this,D0,function(){}),id(this,O0,function(){})}return Fce(n,[{key:"getObj",value:function(t){return di(sd,this).get(di(ad,this).call(this,t))}},{key:"getData",value:function(t){return di(Qp,this).get(t)}},{key:"entries",value:function(){return $ce(di(Qp,this).entries()).map(function(t){var r=Vce(t,2),i=r[0],s=r[1];return[s,i]})}},{key:"id",value:function(t){return sb(ad,this,on(t)),this}},{key:"onCreateObj",value:function(t){return sb(L0,this,t),this}},{key:"onUpdateObj",value:function(t){return sb(D0,this,t),this}},{key:"onRemoveObj",value:function(t){return sb(O0,this,t),this}},{key:"digest",value:function(t){var r=this;t.filter(function(s){return!di(sd,r).has(di(ad,r).call(r,s))}).forEach(function(s){var a=di(L0,r).call(r,s);di(sd,r).set(di(ad,r).call(r,s),a),di(Qp,r).set(a,s)});var i=new Map(t.map(function(s){return[di(ad,r).call(r,s),s]}));return di(sd,this).forEach(function(s,a){i.has(a)?di(D0,r).call(r,s,i.get(a)):(di(O0,r).call(r,s,a),di(sd,r).delete(a),di(Qp,r).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])})();function qce(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const N2=Symbol("implicit");function i4(){var n=new A2,e=[],t=[],r=N2;function i(s){let a=n.get(s);if(a===void 0){if(r!==N2)return r;n.set(s,a=e.push(s)-1)}return t[a%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new A2;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return i4(e,t).unknown(r)},qce.apply(i,arguments),i}function Xce(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const Yce=Xce("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function y_(n){"@babel/helpers - typeof";return y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y_(n)}var Kce=/^\s+/,Zce=/\s+$/;function Tt(n,e){if(n=n||"",e=e||{},n instanceof Tt)return n;if(!(this instanceof Tt))return new Tt(n,e);var t=Qce(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Tt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,a,o;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=s4(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=M2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=M2(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=C2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=C2(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return I2(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return nde(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Jn(this._r,255)*100)+"%",g:Math.round(Jn(this._g,255)*100)+"%",b:Math.round(Jn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Jn(this._r,255)*100)+"%, "+Math.round(Jn(this._g,255)*100)+"%, "+Math.round(Jn(this._b,255)*100)+"%)":"rgba("+Math.round(Jn(this._r,255)*100)+"%, "+Math.round(Jn(this._g,255)*100)+"%, "+Math.round(Jn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:fde[I2(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+k2(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Tt(e);r="#"+k2(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Tt(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(ade,arguments)},brighten:function(){return this._applyModification(ode,arguments)},darken:function(){return this._applyModification(lde,arguments)},desaturate:function(){return this._applyModification(rde,arguments)},saturate:function(){return this._applyModification(ide,arguments)},greyscale:function(){return this._applyModification(sde,arguments)},spin:function(){return this._applyModification(ude,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(hde,arguments)},complement:function(){return this._applyCombination(cde,arguments)},monochromatic:function(){return this._applyCombination(pde,arguments)},splitcomplement:function(){return this._applyCombination(dde,arguments)},triad:function(){return this._applyCombination(L2,[3])},tetrad:function(){return this._applyCombination(L2,[4])}};Tt.fromRatio=function(n,e){if(y_(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Sf(n[r]));n=t}return Tt(n,e)};function Qce(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,a=!1,o=!1;return typeof n=="string"&&(n=bde(n)),y_(n)=="object"&&(xo(n.r)&&xo(n.g)&&xo(n.b)?(e=Jce(n.r,n.g,n.b),a=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):xo(n.h)&&xo(n.s)&&xo(n.v)?(r=Sf(n.s),i=Sf(n.v),e=tde(n.h,r,i),a=!0,o="hsv"):xo(n.h)&&xo(n.s)&&xo(n.l)&&(r=Sf(n.s),s=Sf(n.l),e=ede(n.h,r,s),a=!0,o="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=s4(t),{ok:a,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Jce(n,e,t){return{r:Jn(n,255)*255,g:Jn(e,255)*255,b:Jn(t,255)*255}}function C2(n,e,t){n=Jn(n,255),e=Jn(e,255),t=Jn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;switch(a=o>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function ede(n,e,t){var r,i,s;n=Jn(n,360),e=Jn(e,100),t=Jn(t,100);function a(u,c,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(c-u)*6*h:h<1/2?c:h<2/3?u+(c-u)*(2/3-h)*6:u}if(e===0)r=i=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;r=a(l,o,n+1/3),i=a(l,o,n),s=a(l,o,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function M2(n,e,t){n=Jn(n,255),e=Jn(e,255),t=Jn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,a,o=r,l=r-i;if(a=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function tde(n,e,t){n=Jn(n,360)*6,e=Jn(e,100),t=Jn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),a=t*(1-i*e),o=t*(1-(1-i)*e),l=r%6,u=[t,a,s,s,o,t][l],c=[o,t,t,a,s,s][l],h=[s,s,o,t,t,a][l];return{r:u*255,g:c*255,b:h*255}}function I2(n,e,t,r){var i=[fa(Math.round(n).toString(16)),fa(Math.round(e).toString(16)),fa(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function nde(n,e,t,r,i){var s=[fa(Math.round(n).toString(16)),fa(Math.round(e).toString(16)),fa(Math.round(t).toString(16)),fa(a4(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function k2(n,e,t,r){var i=[fa(a4(r)),fa(Math.round(n).toString(16)),fa(Math.round(e).toString(16)),fa(Math.round(t).toString(16))];return i.join("")}Tt.equals=function(n,e){return!n||!e?!1:Tt(n).toRgbString()==Tt(e).toRgbString()};Tt.random=function(){return Tt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function rde(n,e){e=e===0?0:e||10;var t=Tt(n).toHsl();return t.s-=e/100,t.s=dv(t.s),Tt(t)}function ide(n,e){e=e===0?0:e||10;var t=Tt(n).toHsl();return t.s+=e/100,t.s=dv(t.s),Tt(t)}function sde(n){return Tt(n).desaturate(100)}function ade(n,e){e=e===0?0:e||10;var t=Tt(n).toHsl();return t.l+=e/100,t.l=dv(t.l),Tt(t)}function ode(n,e){e=e===0?0:e||10;var t=Tt(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Tt(t)}function lde(n,e){e=e===0?0:e||10;var t=Tt(n).toHsl();return t.l-=e/100,t.l=dv(t.l),Tt(t)}function ude(n,e){var t=Tt(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,Tt(t)}function cde(n){var e=Tt(n).toHsl();return e.h=(e.h+180)%360,Tt(e)}function L2(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Tt(n).toHsl(),r=[Tt(n)],i=360/e,s=1;s<e;s++)r.push(Tt({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function dde(n){var e=Tt(n).toHsl(),t=e.h;return[Tt(n),Tt({h:(t+72)%360,s:e.s,l:e.l}),Tt({h:(t+216)%360,s:e.s,l:e.l})]}function hde(n,e,t){e=e||6,t=t||30;var r=Tt(n).toHsl(),i=360/t,s=[Tt(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(Tt(r));return s}function pde(n,e){e=e||6;for(var t=Tt(n).toHsv(),r=t.h,i=t.s,s=t.v,a=[],o=1/e;e--;)a.push(Tt({h:r,s:i,v:s})),s=(s+o)%1;return a}Tt.mix=function(n,e,t){t=t===0?0:t||50;var r=Tt(n).toRgb(),i=Tt(e).toRgb(),s=t/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Tt(a)};Tt.readability=function(n,e){var t=Tt(n),r=Tt(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};Tt.isReadable=function(n,e,t){var r=Tt.readability(n,e),i,s;switch(s=!1,i=_de(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Tt.mostReadable=function(n,e,t){var r=null,i=0,s,a,o,l;t=t||{},a=t.includeFallbackColors,o=t.level,l=t.size;for(var u=0;u<e.length;u++)s=Tt.readability(n,e[u]),s>i&&(i=s,r=Tt(e[u]));return Tt.isReadable(n,r,{level:o,size:l})||!a?r:(t.includeFallbackColors=!1,Tt.mostReadable(n,["#fff","#000"],t))};var BT=Tt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fde=Tt.hexNames=gde(BT);function gde(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function s4(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Jn(n,e){mde(n)&&(n="100%");var t=yde(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function dv(n){return Math.min(1,Math.max(0,n))}function bs(n){return parseInt(n,16)}function mde(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function yde(n){return typeof n=="string"&&n.indexOf("%")!=-1}function fa(n){return n.length==1?"0"+n:""+n}function Sf(n){return n<=1&&(n=n*100+"%"),n}function a4(n){return Math.round(parseFloat(n)*255).toString(16)}function D2(n){return bs(n)/255}var sa=(function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function xo(n){return!!sa.CSS_UNIT.exec(n)}function bde(n){n=n.replace(Kce,"").replace(Zce,"").toLowerCase();var e=!1;if(BT[n])n=BT[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=sa.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=sa.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=sa.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=sa.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=sa.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=sa.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=sa.hex8.exec(n))?{r:bs(t[1]),g:bs(t[2]),b:bs(t[3]),a:D2(t[4]),format:e?"name":"hex8"}:(t=sa.hex6.exec(n))?{r:bs(t[1]),g:bs(t[2]),b:bs(t[3]),format:e?"name":"hex"}:(t=sa.hex4.exec(n))?{r:bs(t[1]+""+t[1]),g:bs(t[2]+""+t[2]),b:bs(t[3]+""+t[3]),a:D2(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=sa.hex3.exec(n))?{r:bs(t[1]+""+t[1]),g:bs(t[2]+""+t[2]),b:bs(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function _de(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function zT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function vde(n){if(Array.isArray(n))return n}function xde(n){if(Array.isArray(n))return zT(n)}function o4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Sde(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l4(n,e,t){return e=vh(e),Mde(n,uI()?Reflect.construct(e,t||[],vh(n).constructor):e.apply(n,t))}function Ede(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function P0(n,e){return n.get(o4(n,e))}function O2(n,e,t){Ede(n,e),e.set(n,t)}function P2(n,e,t){return n.set(o4(n,e),t),t}function c4(n,e,t){if(uI())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return i}function Tde(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,p4(r.key),r)}}function d4(n,e,t){return e&&Tde(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function hv(n,e,t){return(e=p4(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GT(){return GT=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var r=Ide(n,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?n:t):i.value}},GT.apply(null,arguments)}function vh(n){return vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vh(n)}function h4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&VT(n,e)}function uI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uI=function(){return!!n})()}function wde(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ade(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Rde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cde(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(t),!0).forEach(function(r){hv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Mde(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sde(n)}function VT(n,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},VT(n,e)}function zf(n,e){return vde(n)||Ade(n,e)||f4(n,e)||Rde()}function Ide(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=vh(n))!==null;);return n}function F0(n,e,t,r){var i=GT(vh(n.prototype),e,t);return typeof i=="function"?function(s){return i.apply(t,s)}:i}function oa(n){return xde(n)||wde(n)||f4(n)||Nde()}function kde(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p4(n){var e=kde(n,"string");return typeof e=="symbol"?e:e+""}function $T(n){"@babel/helpers - typeof";return $T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$T(n)}function f4(n,e){if(n){if(typeof n=="string")return zT(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zT(n,e):void 0}}var g4=function(e){e instanceof Array?e.forEach(g4):(e.map&&e.map.dispose(),e.dispose())},m4=function(e){e.geometry&&e.geometry.dispose(),e.material&&g4(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(m4)},HT=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),m4(t)}},U0=new WeakMap,ab=new WeakMap,Jp=(function(n){function e(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.dataBindAttr,a=s===void 0?"__data":s,o=i.objBindAttr,l=o===void 0?"__threeObj":o;return u4(this,e),r=l4(this,e),hv(r,"scene",void 0),O2(r,U0,void 0),O2(r,ab,void 0),r.scene=t,P2(U0,r,a),P2(ab,r,l),r.onRemoveObj(function(){}),r}return h4(e,n),d4(e,[{key:"onCreateObj",value:function(r){var i=this;return F0(e,"onCreateObj",this)([function(s){var a=r(s);return s[P0(ab,i)]=a,a[P0(U0,i)]=s,i.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(r){var i=this;return F0(e,"onRemoveObj",this)([function(s,a){var o=F0(e,"getData",i)([s]);r(s,a),i.scene.remove(s),HT(s),delete o[P0(ab,i)]}]),this}}])})(Wce),ef=function(e){return isNaN(e)?parseInt(Tt(e).toHex(),16):e},B0=function(e){return isNaN(e)?Tt(e).getAlpha():1},Lde=i4(Yce);function U2(n,e,t){!e||typeof t!="string"||n.filter(function(r){return!r[t]}).forEach(function(r){r[t]=Lde(e(r))})}function Dde(n,e){var t=n.nodes,r=n.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.nodeFilter,a=s===void 0?function(){return!0}:s,o=i.onLoopError,l=o===void 0?function(g){throw"Invalid DAG structure! Found cycle in node path: ".concat(g.join(" -> "),".")}:o,u={};t.forEach(function(g){return u[e(g)]={data:g,out:[],depth:-1,skip:!a(g)}}),r.forEach(function(g){var m=g.source,v=g.target,_=A(m),b=A(v);if(!u.hasOwnProperty(_))throw"Missing source node with id: ".concat(_);if(!u.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var S=u[_],E=u[b];S.out.push(E);function A(R){return $T(R)==="object"?e(R):R}});var c=[];f(Object.values(u));var h=Object.assign.apply(Object,[{}].concat(oa(Object.entries(u).filter(function(g){var m=zf(g,2),v=m[1];return!v.skip}).map(function(g){var m=zf(g,2),v=m[0],_=m[1];return hv({},v,_.depth)}))));return h;function f(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=function(){var A=g[b];if(m.indexOf(A)!==-1){var R=[].concat(oa(m.slice(m.indexOf(A))),[A]).map(function(w){return e(w.data)});return c.some(function(w){return w.length===R.length&&w.every(function(M,I){return M===R[I]})})||(c.push(R),l(R)),1}v>A.depth&&(A.depth=v,f(A.out,[].concat(oa(m),[A]),v+(A.skip?0:1)))},b=0,S=g.length;b<S;b++)_()}}var Ft=window.THREE?window.THREE:{Group:wd,Mesh:wr,MeshLambertMaterial:wV,Color:Et,BufferGeometry:jr,BufferAttribute:ei,Matrix4:sn,Vector3:Z,SphereGeometry:om,CylinderGeometry:sm,TubeGeometry:nI,ConeGeometry:J1,Line:Rne,LineBasicMaterial:iv,QuadraticBezierCurve3:tI,CubicBezierCurve3:EV,Box3:pc},B2={graph:Lue,forcelayout:Wue},Ode=2,z0=new Ft.BufferGeometry().setAttribute?"setAttribute":"addAttribute",ob=new Ft.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",Pde=cv({props:{jsonUrl:{onChange:function(e,t){var r=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then(function(i){return i.json()}).then(function(i){t.fetchingJson=!1,t.onFinishLoading(i),r.graphData(i)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var r=t.d3ForceLayout.force("charge");r&&r.strength(e>2?-60:-30),e<3&&i(t.graphData.nodes,"z"),e<2&&i(t.graphData.nodes,"y");function i(s,a){s.forEach(function(o){delete o[a],delete o["v".concat(a)]})}}},dagMode:{onChange:function(e,t){!e&&t.forceEngine==="d3"&&(t.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=r.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},linkDirectionalParticleThreeObject:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,r){return r===void 0?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t=e.forceEngine!=="ngraph";return e.engineRunning&&r(),i(),s(),this;function r(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||t&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[t?"tick":"step"](),e.onEngineTick());var a=on(e.nodeThreeObjectExtend);e.nodeDataMapper.entries().forEach(function(f){var g=zf(f,2),m=g[0],v=g[1];if(v){var _=t?m:e.layout.getNodePosition(m[e.nodeId]),b=a(m);(!e.nodePositionUpdate||!e.nodePositionUpdate(b?v.children[0]:v,{x:_.x,y:_.y,z:_.z},m)||b)&&(v.position.x=_.x,v.position.y=_.y||0,v.position.z=_.z||0)}});var o=on(e.linkWidth),l=on(e.linkCurvature),u=on(e.linkCurveRotation),c=on(e.linkThreeObjectExtend);e.linkDataMapper.entries().forEach(function(f){var g=zf(f,2),m=g[0],v=g[1];if(v){var _=t?m:e.layout.getLinkPosition(e.layout.graph.getLink(m.source,m.target).id),b=_[t?"source":"from"],S=_[t?"target":"to"];if(!(!b||!S||!b.hasOwnProperty("x")||!S.hasOwnProperty("x"))){h(m);var E=c(m);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(E?v.children[1]:v,{start:{x:b.x,y:b.y,z:b.z},end:{x:S.x,y:S.y,z:S.z}},m)&&!E)){var A=30,R=m.__curve,w=v.children.length?v.children[0]:v;if(w.type==="Line"){if(R){var I=R.getPoints(A);w.geometry.getAttribute("position").array.length!==I.length*3&&w.geometry[z0]("position",new Ft.BufferAttribute(new Float32Array(I.length*3),3)),w.geometry.setFromPoints(I)}else{var M=w.geometry.getAttribute("position");(!M||!M.array||M.array.length!==6)&&w.geometry[z0]("position",M=new Ft.BufferAttribute(new Float32Array(6),3)),M.array[0]=b.x,M.array[1]=b.y||0,M.array[2]=b.z||0,M.array[3]=S.x,M.array[4]=S.y||0,M.array[5]=S.z||0,M.needsUpdate=!0}w.geometry.computeBoundingSphere()}else if(w.type==="Mesh")if(R){w.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(w.position.set(0,0,0),w.rotation.set(0,0,0),w.scale.set(1,1,1));var X=Math.ceil(o(m)*10)/10,Q=X/2,H=new Ft.TubeGeometry(R,A,Q,e.linkResolution,!1);w.geometry.dispose(),w.geometry=H}else{if(!w.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var C=Math.ceil(o(m)*10)/10,k=C/2,O=new Ft.CylinderGeometry(k,k,1,e.linkResolution,1,!1);O[ob](new Ft.Matrix4().makeTranslation(0,1/2,0)),O[ob](new Ft.Matrix4().makeRotationX(Math.PI/2)),w.geometry.dispose(),w.geometry=O}var z=new Ft.Vector3(b.x,b.y||0,b.z||0),W=new Ft.Vector3(S.x,S.y||0,S.z||0),q=z.distanceTo(W);w.position.x=z.x,w.position.y=z.y,w.position.z=z.z,w.scale.z=q,w.parent.localToWorld(W),w.lookAt(W)}}}}});function h(f){var g=t?f:e.layout.getLinkPosition(e.layout.graph.getLink(f.source,f.target).id),m=g[t?"source":"from"],v=g[t?"target":"to"];if(!(!m||!v||!m.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var _=l(f);if(!_)f.__curve=null;else{var b=new Ft.Vector3(m.x,m.y||0,m.z||0),S=new Ft.Vector3(v.x,v.y||0,v.z||0),E=b.distanceTo(S),A,R=u(f);if(E>0){var w=v.x-m.x,M=v.y-m.y||0,I=new Ft.Vector3().subVectors(S,b),C=I.clone().multiplyScalar(_).cross(w!==0||M!==0?new Ft.Vector3(0,0,1):new Ft.Vector3(0,1,0)).applyAxisAngle(I.normalize(),R).add(new Ft.Vector3().addVectors(b,S).divideScalar(2));A=new Ft.QuadraticBezierCurve3(b,C,S)}else{var k=_*70,O=-R,z=O+Math.PI/2;A=new Ft.CubicBezierCurve3(b,new Ft.Vector3(k*Math.cos(z),k*Math.sin(z),0).add(b),new Ft.Vector3(k*Math.cos(O),k*Math.sin(O),0).add(b),S)}f.__curve=A}}}}function i(){var a=on(e.linkDirectionalArrowRelPos),o=on(e.linkDirectionalArrowLength),l=on(e.nodeVal);e.arrowDataMapper.entries().forEach(function(u){var c=zf(u,2),h=c[0],f=c[1];if(f){var g=t?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),m=g[t?"source":"from"],v=g[t?"target":"to"];if(!(!m||!v||!m.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var _=Math.cbrt(Math.max(0,l(m)||1))*e.nodeRelSize,b=Math.cbrt(Math.max(0,l(v)||1))*e.nodeRelSize,S=o(h),E=a(h),A=h.__curve?function(k){return h.__curve.getPoint(k)}:function(k){var O=function(W,q,X,Q){return q[W]+(X[W]-q[W])*Q||0};return{x:O("x",m,v,k),y:O("y",m,v,k),z:O("z",m,v,k)}},R=h.__curve?h.__curve.getLength():Math.sqrt(["x","y","z"].map(function(k){return Math.pow((v[k]||0)-(m[k]||0),2)}).reduce(function(k,O){return k+O},0)),w=_+S+(R-_-b-S)*E,M=A(w/R),I=A((w-S)/R);["x","y","z"].forEach(function(k){return f.position[k]=I[k]});var C=c4(Ft.Vector3,oa(["x","y","z"].map(function(k){return M[k]})));f.parent.localToWorld(C),f.lookAt(C)}}})}function s(){var a=on(e.linkDirectionalParticleSpeed),o=on(e.linkDirectionalParticleOffset);e.graphData.links.forEach(function(l){var u=e.particlesDataMapper.getObj(l),c=u&&u.children,h=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!h||!h.length)&&(!c||!c.length))){var f=t?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),g=f[t?"source":"from"],m=f[t?"target":"to"];if(!(!g||!m||!g.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var v=a(l),_=Math.abs(o(l)),b=l.__curve?function(E){return l.__curve.getPoint(E)}:function(E){var A=function(w,M,I,C){return M[w]+(I[w]-M[w])*C||0};return{x:A("x",g,m,E),y:A("y",g,m,E),z:A("z",g,m,E)}},S=[].concat(oa(c||[]),oa(h||[]));S.forEach(function(E,A){var R=E.parent.__linkThreeObjType==="singleHopPhotons";if(E.hasOwnProperty("__progressRatio")||(E.__progressRatio=R?0:(A+_)/c.length),E.__progressRatio+=v,E.__progressRatio>=1)if(!R)E.__progressRatio=E.__progressRatio%1;else{E.parent.remove(E),HT(E);return}var w=E.__progressRatio,M=b(w);E.geometry.type!=="SphereGeometry"&&E.lookAt(M.x,M.y,M.z),["x","y","z"].forEach(function(I){return E.position[I]=M[I]})})}}})}},emitParticle:function(e,t){if(t&&e.graphData.links.includes(t)){if(!t.__singleHopPhotonsObj){var r=new Ft.Group;r.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=on(e.linkDirectionalParticleThreeObject)(t);if(i&&e.linkDirectionalParticleThreeObject===i&&(i=i.clone()),!i){var s=on(e.linkDirectionalParticleWidth),a=Math.ceil(s(t)*10)/10/2,o=e.linkDirectionalParticleResolution,l=new Ft.SphereGeometry(a,o,o),u=on(e.linkColor),c=on(e.linkDirectionalParticleColor),h=c(t)||u(t)||"#f0f0f0",f=new Ft.Color(ef(h)),g=e.linkOpacity*3,m=new Ft.MeshLambertMaterial({color:f,transparent:!0,opacity:g});i=new Ft.Mesh(l,m)}t.__singleHopPhotonsObj.add(i)}return this},getGraphBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=(function i(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var o=new Ft.Box3;o.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(o)}return a.concat.apply(a,oa((s.children||[]).filter(function(l){return!l.hasOwnProperty("__graphObjType")||l.__graphObjType==="node"&&t(l.__data)}).map(i)))})(e.graphScene);return r.length?Object.assign.apply(Object,oa(["x","y","z"].map(function(i){return hv({},i,[Ice(r,function(s){return s.min[i]}),Mce(r,function(s){return s.max[i]})])}))):null}},stateInit:function(){return{d3ForceLayout:Rue().force("link",hue()).force("charge",Nue()).force("center",fle()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e,t.nodeDataMapper=new Jp(e,{objBindAttr:"__threeObj"}),t.linkDataMapper=new Jp(e,{objBindAttr:"__lineObj"}),t.arrowDataMapper=new Jp(e,{objBindAttr:"__arrowObj"}),t.particlesDataMapper=new Jp(e,{objBindAttr:"__photonsObj"})},update:function(e,t){var r=function(V){return V.some(function(ae){return t.hasOwnProperty(ae)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&r(["nodeAutoColorBy","graphData","nodeColor"])&&U2(e.graphData.nodes,on(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&r(["linkAutoColorBy","graphData","linkColor"])&&U2(e.graphData.links,on(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=on(e.nodeThreeObject),s=on(e.nodeThreeObjectExtend),a=on(e.nodeVal),o=on(e.nodeColor),l=on(e.nodeVisibility),u={},c={};(e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(Y){var V=i(Y),ae=s(Y);V&&e.nodeThreeObject===V&&(V=V.clone());var _e;return V&&!ae?_e=V:(_e=new Ft.Mesh,_e.__graphDefaultObj=!0,V&&ae&&_e.add(V)),_e.__graphObjType="node",_e}).onUpdateObj(function(Y,V){if(Y.__graphDefaultObj){var ae=a(V)||1,_e=Math.cbrt(ae)*e.nodeRelSize,Pe=e.nodeResolution;(!Y.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||Y.geometry.parameters.radius!==_e||Y.geometry.parameters.widthSegments!==Pe)&&(u.hasOwnProperty(ae)||(u[ae]=new Ft.SphereGeometry(_e,Pe,Pe)),Y.geometry.dispose(),Y.geometry=u[ae]);var De=o(V),ft=new Ft.Color(ef(De||"#ffffaa")),ln=e.nodeOpacity*B0(De);(Y.material.type!=="MeshLambertMaterial"||!Y.material.color.equals(ft)||Y.material.opacity!==ln)&&(c.hasOwnProperty(De)||(c[De]=new Ft.MeshLambertMaterial({color:ft,transparent:!0,opacity:ln})),Y.material.dispose(),Y.material=c[De])}}).digest(e.graphData.nodes.filter(l))}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","linkDirectionalParticleThreeObject"])){var h=on(e.linkThreeObject),f=on(e.linkThreeObjectExtend),g=on(e.linkMaterial),m=on(e.linkVisibility),v=on(e.linkColor),_=on(e.linkWidth),b={},S={},E={},A=e.graphData.links.filter(m);if((e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(Y){var V=Y.__data&&Y.__data.__singleHopPhotonsObj;V&&(V.parent.remove(V),HT(V),delete Y.__data.__singleHopPhotonsObj)}).onCreateObj(function(Y){var V=h(Y),ae=f(Y);V&&e.linkThreeObject===V&&(V=V.clone());var _e;if(!V||ae){var Pe=!!_(Y);if(Pe)_e=new Ft.Mesh;else{var De=new Ft.BufferGeometry;De[z0]("position",new Ft.BufferAttribute(new Float32Array(6),3)),_e=new Ft.Line(De)}}var ft;return V?ae?(ft=new Ft.Group,ft.__graphDefaultObj=!0,ft.add(_e),ft.add(V)):ft=V:(ft=_e,ft.__graphDefaultObj=!0),ft.renderOrder=10,ft.__graphObjType="link",ft}).onUpdateObj(function(Y,V){if(Y.__graphDefaultObj){var ae=Y.children.length?Y.children[0]:Y,_e=Math.ceil(_(V)*10)/10,Pe=!!_e;if(Pe){var De=_e/2,ft=e.linkResolution;if(!ae.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||ae.geometry.parameters.radiusTop!==De||ae.geometry.parameters.radialSegments!==ft){if(!b.hasOwnProperty(_e)){var ln=new Ft.CylinderGeometry(De,De,1,ft,1,!1);ln[ob](new Ft.Matrix4().makeTranslation(0,1/2,0)),ln[ob](new Ft.Matrix4().makeRotationX(Math.PI/2)),b[_e]=ln}ae.geometry.dispose(),ae.geometry=b[_e]}}var Se=g(V);if(Se)ae.material=Se;else{var Me=v(V),nt=new Ft.Color(ef(Me||"#f0f0f0")),qe=e.linkOpacity*B0(Me),je=Pe?"MeshLambertMaterial":"LineBasicMaterial";if(ae.material.type!==je||!ae.material.color.equals(nt)||ae.material.opacity!==qe){var J=Pe?S:E;J.hasOwnProperty(Me)||(J[Me]=new Ft[je]({color:nt,transparent:qe<1,opacity:qe,depthWrite:qe>=1})),ae.material.dispose(),ae.material=J[Me]}}}}).digest(A),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var R=on(e.linkDirectionalArrowLength),w=on(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var Y=new Ft.Mesh(void 0,new Ft.MeshLambertMaterial({transparent:!0}));return Y.__linkThreeObjType="arrow",Y}).onUpdateObj(function(Y,V){var ae=R(V),_e=e.linkDirectionalArrowResolution;if(!Y.geometry.type.match(/^Cone(Buffer)?Geometry$/)||Y.geometry.parameters.height!==ae||Y.geometry.parameters.radialSegments!==_e){var Pe=new Ft.ConeGeometry(ae*.25,ae,_e);Pe.translate(0,ae/2,0),Pe.rotateX(Math.PI/2),Y.geometry.dispose(),Y.geometry=Pe}var De=w(V)||v(V)||"#f0f0f0";Y.material.color=new Ft.Color(ef(De)),Y.material.opacity=e.linkOpacity*3*B0(De)}).digest(A.filter(R))}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var M=on(e.linkDirectionalParticles),I=on(e.linkDirectionalParticleWidth),C=on(e.linkDirectionalParticleColor),k=on(e.linkDirectionalParticleThreeObject),O={},z={};e.particlesDataMapper.onCreateObj(function(){var Y=new Ft.Group;return Y.__linkThreeObjType="photons",Y.__photonDataMapper=new Jp(Y),Y}).onUpdateObj(function(Y,V){var ae=!!Y.children.length&&Y.children[0],_e=k(V),Pe,De;if(_e)Pe=_e.geometry,De=_e.material;else{var ft=Math.ceil(I(V)*10)/10/2,ln=e.linkDirectionalParticleResolution;ae&&ae.geometry.parameters.radius===ft&&ae.geometry.parameters.widthSegments===ln?Pe=ae.geometry:(z.hasOwnProperty(ft)||(z[ft]=new Ft.SphereGeometry(ft,ln,ln)),Pe=z[ft]);var Se=C(V)||v(V)||"#f0f0f0",Me=new Ft.Color(ef(Se)),nt=e.linkOpacity*3;ae&&ae.material.color.equals(Me)&&ae.material.opacity===nt?De=ae.material:(O.hasOwnProperty(Se)||(O[Se]=new Ft.MeshLambertMaterial({color:Me,transparent:!0,opacity:nt})),De=O[Se])}ae&&(ae.geometry!==Pe&&ae.geometry.dispose(),ae.material!==De&&ae.material.dispose());var qe=Math.round(Math.abs(M(V)));Y.__photonDataMapper.id(function(je){return je.idx}).onCreateObj(function(){return new Ft.Mesh(Pe,De)}).onUpdateObj(function(je){je.geometry=Pe,je.material=De}).digest(oa(new Array(qe)).map(function(je,J){return{idx:J}}))}).digest(A.filter(M))}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(Y){Y.source=Y[e.linkSource],Y.target=Y[e.linkTarget]});var W=e.forceEngine!=="ngraph",q;if(W){(q=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var X=e.d3ForceLayout.force("link");X&&X.id(function(Y){return Y[e.nodeId]}).links(e.graphData.links);var Q=e.dagMode&&Dde(e.graphData,function(Y){return Y[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),H=Math.max.apply(Math,oa(Object.values(Q||[]))),G=e.dagLevelDistance||e.graphData.nodes.length/(H||1)*Ode*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(t.dagMode)){var re=["lr","rl"].includes(t.dagMode)?"fx":["td","bu"].includes(t.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(Y){return delete Y[re]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var D=["rl","td","zout"].includes(e.dagMode),U=function(V){return(Q[V[e.nodeId]]-H/2)*G*(D?-1:1)},ne=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(Y){return Y[ne]=U(Y)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Cue(function(Y){var V=Q[Y[e.nodeId]]||-1;return(e.dagMode==="radialin"?H-V:V)*G}).strength(function(Y){return e.dagNodeFilter(Y)?1:0}):null)}else{var B=B2.graph();e.graphData.nodes.forEach(function(Y){B.addNode(Y[e.nodeId])}),e.graphData.links.forEach(function(Y){B.addLink(Y.source,Y.target)}),q=B2.forcelayout(B,Cde({dimensions:e.numDimensions},e.ngraphPhysics)),q.graph=B}for(var Oe=0;Oe<e.warmupTicks&&!(W&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);Oe++)q[W?"tick":"step"]();e.layout=q,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function Fde(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=(function(i){function s(){var a;u4(this,s);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return a=l4(this,s,[].concat(l)),a.__kapsuleInstance=c4(n,[].concat(oa(t?[a]:[]),l)),a}return h4(s,i),d4(s)})(e);return Object.keys(n()).forEach(function(i){return r.prototype[i]=function(){var s,a=(s=this.__kapsuleInstance)[i].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),r}var Ude=window.THREE?window.THREE:{Group:wd},y4=Fde(Pde,Ude.Group,!0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bde=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],G0=new WeakMap;class zde{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=Bde,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:r,material:i,object:s}=e;if(t={material:this.getMaterialData(i),geometry:{id:r.id,attributes:this.getAttributesData(r.attributes),indexVersion:r.index?r.index.version:null,drawRange:{start:r.drawRange.start,count:r.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:a,height:o}=e.context;t.bufferWidth=a,t.bufferHeight=o}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const r in e){const i=e[r];t[r]={version:i.version}}return t}containsNode(e){const t=e.material;for(const r in t)if(t[r]&&t[r].isNode)return!0;return!!(e.context.modelViewMatrix||e.context.modelNormalViewMatrix||e.context.getAO||e.context.getShadow)}getMaterialData(e){const t={};for(const r of this.refreshUniforms){const i=e[r];i!=null&&(typeof i=="object"&&i.clone!==void 0?i.isTexture===!0?t[r]={id:i.id,version:i.version}:t[r]=i.clone():t[r]=i)}return t}equals(e,t){const{object:r,material:i,geometry:s}=e,a=this.getRenderObjectData(e);if(a.worldMatrix.equals(r.matrixWorld)!==!0)return a.worldMatrix.copy(r.matrixWorld),!1;const o=a.material;for(const _ in o){const b=o[_],S=i[_];if(b.equals!==void 0){if(b.equals(S)===!1)return b.copy(S),!1}else if(S.isTexture===!0){if(b.id!==S.id||b.version!==S.version)return b.id=S.id,b.version=S.version,!1}else if(b!==S)return o[_]=S,!1}if(o.transmission>0){const{width:_,height:b}=e.context;if(a.bufferWidth!==_||a.bufferHeight!==b)return a.bufferWidth=_,a.bufferHeight=b,!1}const l=a.geometry,u=s.attributes,c=l.attributes,h=Object.keys(c),f=Object.keys(u);if(l.id!==s.id)return l.id=s.id,!1;if(h.length!==f.length)return a.geometry.attributes=this.getAttributesData(u),!1;for(const _ of h){const b=c[_],S=u[_];if(S===void 0)return delete c[_],!1;if(b.version!==S.version)return b.version=S.version,!1}const g=s.index,m=l.indexVersion,v=g?g.version:null;if(m!==v)return l.indexVersion=v,!1;if(l.drawRange.start!==s.drawRange.start||l.drawRange.count!==s.drawRange.count)return l.drawRange.start=s.drawRange.start,l.drawRange.count=s.drawRange.count,!1;if(a.morphTargetInfluences){let _=!1;for(let b=0;b<a.morphTargetInfluences.length;b++)a.morphTargetInfluences[b]!==r.morphTargetInfluences[b]&&(a.morphTargetInfluences[b]=r.morphTargetInfluences[b],_=!0);if(_)return!1}if(a.lights){for(let _=0;_<t.length;_++)if(a.lights[_].map!==t[_].map)return!1}return a.center&&a.center.equals(r.center)===!1?(a.center.copy(r.center),!0):(e.bundle!==null&&(a.version=e.bundle.version),!0)}getLightsData(e){const t=[];for(const r of e)r.isSpotLight===!0&&r.map!==null&&t.push({map:r.map.version});return t}getLights(e,t){if(G0.has(e)){const i=G0.get(e);if(i.renderId===t)return i.lightsData}const r=this.getLightsData(e.getLights());return G0.set(e,{renderId:t,lightsData:r}),r}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:r}=t;if(this.renderId!==r)return this.renderId=r,!0;const i=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(i||s)return!1;const a=this.getLights(e.lightsNode,r);return this.equals(e,a)!==!0}}function cI(n,e=0){let t=3735928559^e,r=1103547991^e;if(n instanceof Array)for(let i=0,s;i<n.length;i++)s=n[i],t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);else for(let i=0,s;i<n.length;i++)s=n.charCodeAt(i),t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}const pv=n=>cI(n),lm=n=>cI(n),Gf=(...n)=>cI(n),Gde=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),z2=new WeakMap;function b4(n){return Gde.get(n)}function b_(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix2===!0?"mat2":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function dI(n,...e){const t=n?n.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new Et(...e):t==="vec2"?new $e(...e):t==="vec3"?new Z(...e):t==="vec4"?new Wt(...e):t==="mat2"?new sv(...e):t==="mat3"?new $t(...e):t==="mat4"?new sn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?$de(e[0]):null}function _4(n){let e=z2.get(n);return e===void 0&&(e={},z2.set(n,e)),e}function Vde(n){let e="";const t=new Uint8Array(n);for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function $de(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const lb={VERTEX:"vertex"},Xt={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},zs={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},Hde=["fragment","vertex"],G2=["setup","analyze","generate"],V2=[...Hde,"compute"],Wh=["x","y","z","w"],jde={analyze:"setup",generate:"analyze"};let Wde=0;class xt extends ro{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Xt.NONE,this.updateBeforeType=Xt.NONE,this.updateAfterType=Xt.NONE,this.uuid=c_.generateUUID(),this.version=0,this.name="",this.global=!1,this.parents=!1,this.isNode=!0,this._beforeNodes=null,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:Wde++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,Xt.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Xt.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Xt.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of this._getChildren())yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}_getChildren(e=new Set){const t=[];e.add(this);for(const r of Object.getOwnPropertyNames(this)){const i=this[r];if(!(r.startsWith("_")===!0||e.has(i))){if(Array.isArray(i)===!0)for(let s=0;s<i.length;s++){const a=i[s];a&&a.isNode===!0&&t.push({property:r,index:s,childNode:a})}else if(i&&i.isNode===!0)t.push({property:r,childNode:i});else if(i&&Object.getPrototypeOf(i)===Object.prototype)for(const s in i){if(s.startsWith("_")===!0)continue;const a=i[s];a&&a.isNode===!0&&t.push({property:r,index:s,childNode:a})}}}return t}getCacheKey(e=!1,t=null){if(e=e||this.version!==this._cacheKeyVersion,e===!0||this._cacheKey===null){t===null&&(t=new Set);const r=[];for(const{property:i,childNode:s}of this._getChildren(t))r.push(pv(i.slice(0,-4)),s.getCacheKey(e,t));this._cacheKey=Gf(lm(r),this.customCacheKey()),this._cacheKeyVersion=this.version}return this._cacheKey}customCacheKey(){return this.id}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){const t=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())t["node"+r++]=i;return t.outputNode||null}analyze(e,t=null){const r=e.increaseUsage(this);if(this.parents===!0){const i=e.getDataFromNode(this,"any");i.stages=i.stages||{},i.stages[e.shaderStage]=i.stages[e.shaderStage]||[],i.stages[e.shaderStage].push(t)}if(r===1){const i=e.getNodeProperties(this);for(const s of Object.values(i))s&&s.isNode===!0&&s.build(e,this)}}generate(e,t){const{outputNode:r}=e.getNodeProperties(this);if(r&&r.isNode===!0)return r.build(e,t)}updateBefore(){Ce("Abstract function.")}updateAfter(){Ce("Abstract function.")}update(){Ce("Abstract function.")}before(e){return this._beforeNodes===null&&(this._beforeNodes=[]),this._beforeNodes.push(e),this}build(e,t=null){const r=this.getShared(e);if(this!==r)return r.build(e,t);if(this._beforeNodes!==null){const l=this._beforeNodes;this._beforeNodes=null;for(const u of l)u.build(e,t);this._beforeNodes=l}const i=e.getDataFromNode(this);i.buildStages=i.buildStages||{},i.buildStages[e.buildStage]=!0;const s=jde[e.buildStage];if(s&&i.buildStages[s]!==!0){const l=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const u of Object.values(l))if(u&&u.isNode===!0){if(u.parents===!0){const c=e.getNodeProperties(u);c.parents=c.parents||[],c.parents.push(this)}u.build(e)}}a=l.outputNode}else if(o==="analyze")this.analyze(e,t);else if(o==="generate"){if(this.generate.length<2){const u=this.getNodeType(e),c=e.getDataFromNode(this);a=c.snippet,a===void 0?c.generated===void 0?(c.generated=!0,a=this.generate(e)||"",c.snippet=a):(Ce("Node: Recursion detected.",this),a="/* Recursion detected. */"):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,u,t)}else a=this.generate(e,t)||"";a===""&&t!==null&&t!=="void"&&t!=="OutputType"&&(Ie(`TSL: Invalid generated code, expected a "${t}".`),a=e.generateConst(t))}return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return this._getChildren()}serialize(e){const t=this.getSerializeChildren(),r={};for(const{property:i,index:s,childNode:a}of t)s!==void 0?(r[i]===void 0&&(r[i]=Number.isInteger(s)?[]:{}),r[i][s]=a.toJSON(e.meta).uuid):r[i]=a.toJSON(e.meta).uuid;Object.keys(r).length>0&&(e.inputNodes=r)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const r in e.inputNodes)if(Array.isArray(e.inputNodes[r])){const i=[];for(const s of e.inputNodes[r])i.push(t[s]);this[r]=i}else if(typeof e.inputNodes[r]=="object"){const i={};for(const s in e.inputNodes[r]){const a=e.inputNodes[r][s];i[s]=t[a]}this[r]=i}else{const i=e.inputNodes[r];this[r]=t[i]}}}toJSON(e){const{uuid:t,type:r}=this,i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:r,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},i!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}if(i){const o=a(e.textures),l=a(e.images),u=a(e.nodes);o.length>0&&(s.textures=o),l.length>0&&(s.images=l),u.length>0&&(s.nodes=u)}return s}}class qh extends xt{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}generate(e){const t=this.indexNode.getNodeType(e),r=this.node.build(e),i=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${r}[ ${i} ]`}}class v4 extends xt{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let r=null;for(const i of this.convertTo.split("|"))(r===null||e.getTypeLength(t)===e.getTypeLength(i))&&(r=i);return r}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const r=this.node,i=this.getNodeType(e),s=r.build(e,i);return e.format(s,i,t)}}class Ar extends xt{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,i,t);if(i!=="void"&&t!=="void"&&this.hasDependencies(e)){const a=super.build(e,i),o=e.getVarFromNode(this,null,i),l=e.getPropertyName(o);return e.addLineFlowCode(`${l} = ${a}`,this),s.snippet=a,s.propertyName=l,e.format(s.propertyName,i,t)}}return super.build(e,t)}}class qde extends Ar{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,r)=>t+e.getTypeLength(r.getNodeType(e)),0))}generate(e,t){const r=this.getNodeType(e),i=e.getTypeLength(r),s=this.nodes,a=e.getComponentType(r),o=[];let l=0;for(const c of s){if(l>=i){Ie(`TSL: Length of parameters exceeds maximum length of function '${r}()' type.`);break}let h=c.getNodeType(e),f=e.getTypeLength(h),g;if(l+f>i&&(Ie(`TSL: Length of '${r}()' data exceeds maximum length of output type.`),f=i-l,h=e.getTypeFromLength(f)),l+=f,g=c.build(e,h),e.getComponentType(h)!==a){const v=e.getTypeFromLength(f,a);g=e.format(g,h,v)}o.push(g)}const u=`${e.getType(r)}( ${o.join(", ")} )`;return e.format(u,r,t)}}const Xde=Wh.join("");class Yde extends xt{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(Wh.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,t){const r=this.node,i=e.getTypeLength(r.getNodeType(e));let s=null;if(i>1){let a=null;this.getVectorLength()>=i&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=r.build(e,a);this.components.length===i&&this.components===Xde.slice(0,this.components.length)?s=e.format(l,a,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=r.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Kde extends Ar{static get type(){return"SetNode"}constructor(e,t,r){super(),this.sourceNode=e,this.components=t,this.targetNode=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:r,targetNode:i}=this,s=this.getNodeType(e),a=e.getComponentType(i.getNodeType(e)),o=e.getTypeFromLength(r.length,a),l=i.build(e,o),u=t.build(e,s),c=e.getTypeLength(s),h=[];for(let f=0;f<c;f++){const g=Wh[f];g===r[0]?(h.push(l),f+=r.length-1):h.push(u+"."+g)}return`${e.getType(s)}( ${h.join(", ")} )`}}class Zde extends Ar{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:r}=this,i=this.getNodeType(e),s=r.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+s,this);const l=e.getTypeLength(i),u=[];let c=0;for(let h=0;h<l;h++){const f=Wh[h];f===t[c]?(u.push("1.0 - "+(o+"."+f)),c++):u.push(o+"."+f)}return`${e.getType(i)}( ${u.join(", ")} )`}}class hI extends xt{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?b_(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=b_(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Vde(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?dI(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){Ce("Abstract function.")}}const $2=/float|u?int/;class io extends hI{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const r=this.getNodeType(e);return $2.test(r)&&$2.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),r,t)}}class Qde extends xt{static get type(){return"MemberNode"}constructor(e,t){super(),this.structNode=e,this.property=t,this.isMemberNode=!0}hasMember(e){return this.structNode.isMemberNode&&this.structNode.hasMember(e)===!1?!1:this.structNode.getMemberType(e,this.property)!=="void"}getNodeType(e){return this.hasMember(e)===!1?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,t){if(this.hasMember(e)===!1)return"float";const r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,t)}generate(e){if(this.hasMember(e)===!1){Ce(`TSL: Member "${this.property}" does not exist in struct.`);const r=this.getNodeType(e);return e.generateConst(r)}return this.structNode.build(e)+"."+this.property}}let ic=null;const jT=new Map;function Ae(n,e){if(jT.has(n)){Ce(`TSL: Redefinition of method chaining '${n}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${n} is not a function`);jT.set(n,e),n!=="assign"&&(xt.prototype[n]=function(...t){return this.isStackNode?this.addToStack(e(...t)):e(this,...t)},xt.prototype[n+"Assign"]=function(...t){return this.isStackNode?this.assign(t[0],e(...t)):this.assign(e(this,...t))})}const Jde=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),H2=n=>Jde(n).split("").sort().join("");xt.prototype.assign=function(...n){if(this.isStackNode!==!0)return ic!==null?ic.assign(this,...n):Ie("TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{const e=jT.get("assign");return this.addToStack(e(...n))}};xt.prototype.toVarIntent=function(){return this};xt.prototype.get=function(n){return new Qde(this,n)};const Vf={};function ub(n,e,t){Vf[n]=Vf[e]=Vf[t]={get(){this._cache=this._cache||{};let a=this._cache[n];return a===void 0&&(a=new Yde(this,n),this._cache[n]=a),a},set(a){this[n].assign(ut(a))}};const r=n.toUpperCase(),i=e.toUpperCase(),s=t.toUpperCase();xt.prototype["set"+r]=xt.prototype["set"+i]=xt.prototype["set"+s]=function(a){const o=H2(n);return new Kde(this,o,ut(a))},xt.prototype["flip"+r]=xt.prototype["flip"+i]=xt.prototype["flip"+s]=function(){const a=H2(n);return new Zde(this,a)}}const Ca=["x","y","z","w"],Ma=["r","g","b","a"],Ia=["s","t","p","q"];for(let n=0;n<4;n++){let e=Ca[n],t=Ma[n],r=Ia[n];ub(e,t,r);for(let i=0;i<4;i++){e=Ca[n]+Ca[i],t=Ma[n]+Ma[i],r=Ia[n]+Ia[i],ub(e,t,r);for(let s=0;s<4;s++){e=Ca[n]+Ca[i]+Ca[s],t=Ma[n]+Ma[i]+Ma[s],r=Ia[n]+Ia[i]+Ia[s],ub(e,t,r);for(let a=0;a<4;a++)e=Ca[n]+Ca[i]+Ca[s]+Ca[a],t=Ma[n]+Ma[i]+Ma[s]+Ma[a],r=Ia[n]+Ia[i]+Ia[s]+Ia[a],ub(e,t,r)}}}for(let n=0;n<32;n++)Vf[n]={get(){this._cache=this._cache||{};let e=this._cache[n];return e===void 0&&(e=new qh(this,new io(n,"uint")),this._cache[n]=e),e},set(e){this[n].assign(ut(e))}};Object.defineProperties(xt.prototype,Vf);const j2=new WeakMap,ehe=function(n,e=null){const t=b_(n);return t==="node"?n:e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string"?ut(WT(n,e)):t==="shader"?n.isFn?n:Ne(n):n},the=function(n,e=null){for(const t in n)n[t]=ut(n[t],e);return n},nhe=function(n,e=null){const t=n.length;for(let r=0;r<t;r++)n[r]=ut(n[r],e);return n},x4=function(n,e=null,t=null,r=null){function i(c){return r!==null?(c=ut(Object.assign(c,r)),r.intent===!0&&(c=c.toVarIntent())):c=ut(c),c}let s,a=e,o,l;function u(c){let h;return a?h=/[a-z]/i.test(a)?a+"()":a:h=n.type,o!==void 0&&c.length<o?(Ie(`TSL: "${h}" parameter length is less than minimum required.`),c.concat(new Array(o-c.length).fill(0))):l!==void 0&&c.length>l?(Ie(`TSL: "${h}" parameter length exceeds limit.`),c.slice(0,l)):c}return e===null?s=(...c)=>i(new n(...Pd(u(c)))):t!==null?(t=ut(t),s=(...c)=>i(new n(e,...Pd(u(c)),t))):s=(...c)=>i(new n(e,...Pd(u(c)))),s.setParameterLength=(...c)=>(c.length===1?o=l=c[0]:c.length===2&&([o,l]=c),s),s.setName=c=>(a=c,s),s},rhe=function(n,...e){return new n(...Pd(e))};class ihe extends xt{constructor(e,t){super(),this.shaderNode=e,this.rawInputs=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getElementType(e){return this.getOutputNode(e).getElementType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,rawInputs:r}=this,i=e.getNodeProperties(t),s=e.getClosestSubBuild(t.subBuilds)||"",a=s||"default";if(i[a])return i[a];const o=e.subBuildFn,l=e.fnCall;e.subBuildFn=s,e.fnCall=this;let u=null;if(t.layout){let c=j2.get(e.constructor);c===void 0&&(c=new WeakMap,j2.set(e.constructor,c));let h=c.get(t);h===void 0&&(h=ut(e.buildFunctionNode(t)),c.set(t,h)),e.addInclude(h);const f=r?she(r):null;u=ut(h.call(f))}else{const c=new Proxy(e,{get:(v,_,b)=>{let S;return Symbol.iterator===_?S=function*(){yield void 0}:S=Reflect.get(v,_,b),S}}),h=r?ahe(r):null,f=Array.isArray(r)?r.length>0:r!==null,g=t.jsFunc,m=f||g.length>1?g(h,c):g(c);u=ut(m)}return e.subBuildFn=o,e.fnCall=l,t.once&&(i[a]=u),u}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),r=e.getSubBuildOutput(this);return t[r]=t[r]||this.setupOutput(e),t[r].subBuild=e.getClosestSubBuild(this),t[r]}build(e,t=null){let r=null;const i=e.getBuildStage(),s=e.getNodeProperties(this),a=e.getSubBuildOutput(this),o=this.getOutputNode(e),l=e.fnCall;if(e.fnCall=this,i==="setup"){const u=e.getSubBuildProperty("initialized",this);if(s[u]!==!0&&(s[u]=!0,s[a]=this.getOutputNode(e),s[a].build(e),this.shaderNode.subBuilds))for(const c of e.chaining){const h=e.getDataFromNode(c,"any");h.subBuilds=h.subBuilds||new Set;for(const f of this.shaderNode.subBuilds)h.subBuilds.add(f)}r=s[a]}else i==="analyze"?o.build(e,t):i==="generate"&&(r=o.build(e,t)||"");return e.fnCall=l,r}}function she(n){let e;return mI(n),n[0]&&(n[0].isNode||Object.getPrototypeOf(n[0])!==Object.prototype)?e=[...n]:e=n[0],e}function ahe(n){let e=0;return mI(n),new Proxy(n,{get:(t,r,i)=>{let s;if(r==="length")return s=n.length,s;if(Symbol.iterator===r)s=function*(){for(const a of n)yield ut(a)};else{if(n.length>0)if(Object.getPrototypeOf(n[0])===Object.prototype){const a=n[0];a[r]===void 0?s=a[e++]:s=Reflect.get(a,r,i)}else n[0]instanceof xt&&(n[r]===void 0?s=n[e++]:s=Reflect.get(n,r,i));else s=Reflect.get(t,r,i);s=ut(s)}return s}})}class ohe extends xt{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}getLayout(){return this.layout}call(e=null){return new ihe(this,e)}setup(){return this.call()}}const lhe=[!1,!0],uhe=[0,1,2,3],che=[-1,-2],S4=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],pI=new Map;for(const n of lhe)pI.set(n,new io(n));const fI=new Map;for(const n of uhe)fI.set(n,new io(n,"uint"));const gI=new Map([...fI].map(n=>new io(n.value,"int")));for(const n of che)gI.set(n,new io(n,"int"));const fv=new Map([...gI].map(n=>new io(n.value)));for(const n of S4)fv.set(n,new io(n));for(const n of S4)fv.set(-n,new io(-n));const gv={bool:pI,uint:fI,ints:gI,float:fv},W2=new Map([...pI,...fv]),WT=(n,e)=>W2.has(n)?W2.get(n):n.isNode===!0?n:new io(n,e),Rr=function(n,e=null){return(...t)=>{for(const i of t)if(i===void 0)return Ie(`TSL: Invalid parameter for the type "${n}".`),new io(0,n);if((t.length===0||!["bool","float","int","uint"].includes(n)&&t.every(i=>{const s=typeof i;return s!=="object"&&s!=="function"}))&&(t=[dI(n,...t)]),t.length===1&&e!==null&&e.has(t[0]))return cb(e.get(t[0]));if(t.length===1){const i=WT(t[0],n);return i.nodeType===n?cb(i):cb(new v4(i,n))}const r=t.map(i=>WT(i));return cb(new qde(r,n))}},q2=n=>typeof n=="object"&&n!==null?n.value:n,dhe=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function Ef(n,e){return new ohe(n,e)}const ut=(n,e=null)=>ehe(n,e),cb=(n,e=null)=>ut(n,e).toVarIntent(),mI=(n,e=null)=>new the(n,e),Pd=(n,e=null)=>new nhe(n,e),mn=(n,e=null,t=null,r=null)=>new x4(n,e,t,r),Ke=(n,...e)=>new rhe(n,...e),pt=(n,e=null,t=null,r={})=>new x4(n,e,t,{...r,intent:!0});let hhe=0;class phe extends xt{constructor(e,t=null){super();let r=null;t!==null&&(typeof t=="object"?r=t.return:(typeof t=="string"?r=t:Ie("TSL: Invalid layout type."),t=null)),this.shaderNode=new Ef(e,r),t!==null&&this.setLayout(t),this.isFn=!0}setLayout(e){const t=this.shaderNode.nodeType;if(typeof e.inputs!="object"){const r={name:"fn"+hhe++,type:t,inputs:[]};for(const i in e)i!=="return"&&r.inputs.push({name:i,type:e[i]});e=r}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){const t=this.shaderNode.call(e);return this.shaderNode.nodeType==="void"&&t.toStack(),t.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){const t=this.getNodeType(e);return Ie('TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(t)}}function Ne(n,e=null){const t=new phe(n,e);return new Proxy(()=>{},{apply(r,i,s){return t.call(...s)},get(r,i,s){return Reflect.get(t,i,s)},set(r,i,s,a){return Reflect.set(t,i,s,a)}})}const __=n=>{ic=n},E4=()=>ic,In=(...n)=>ic.If(...n);function T4(n){return ic&&ic.addToStack(n),n}Ae("toStack",T4);const fhe=new Rr("color"),Te=new Rr("float",gv.float),zn=new Rr("int",gv.ints),rn=new Rr("uint",gv.uint),yI=new Rr("bool",gv.bool),yt=new Rr("vec2"),Fa=new Rr("ivec2"),w4=new Rr("uvec2"),ghe=new Rr("bvec2"),we=new Rr("vec3"),A4=new Rr("ivec3"),R4=new Rr("uvec3"),mhe=new Rr("bvec3"),Ht=new Rr("vec4"),N4=new Rr("ivec4"),C4=new Rr("uvec4"),yhe=new Rr("bvec4"),bI=new Rr("mat2"),yi=new Rr("mat3"),ju=new Rr("mat4");Ae("toColor",fhe);Ae("toFloat",Te);Ae("toInt",zn);Ae("toUint",rn);Ae("toBool",yI);Ae("toVec2",yt);Ae("toIVec2",Fa);Ae("toUVec2",w4);Ae("toBVec2",ghe);Ae("toVec3",we);Ae("toIVec3",A4);Ae("toUVec3",R4);Ae("toBVec3",mhe);Ae("toVec4",Ht);Ae("toIVec4",N4);Ae("toUVec4",C4);Ae("toBVec4",yhe);Ae("toMat2",bI);Ae("toMat3",yi);Ae("toMat4",ju);const bhe=mn(qh).setParameterLength(2),_he=(n,e)=>ut(new v4(ut(n),e));Ae("element",bhe);Ae("convert",_he);Ae("append",n=>(Ce("TSL: .append() has been renamed to .toStack()."),T4(n)));class _n extends xt{static get type(){return"PropertyNode"}constructor(e,t=null,r=!1){super(e),this.name=t,this.varying=r,this.isPropertyNode=!0,this.global=!0}customCacheKey(){return pv(this.type+":"+(this.name||"")+":"+(this.varying?"1":"0"))}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Ul=(n,e)=>new _n(n,e),v_=(n,e)=>new _n(n,e,!0),wn=Ke(_n,"vec4","DiffuseColor"),yd=Ke(_n,"vec3","DiffuseContribution"),X2=Ke(_n,"vec3","EmissiveColor"),Co=Ke(_n,"float","Roughness"),Il=Ke(_n,"float","Metalness"),qT=Ke(_n,"float","Clearcoat"),x_=Ke(_n,"float","ClearcoatRoughness"),Os=Ke(_n,"vec3","Sheen"),Mu=Ke(_n,"float","SheenRoughness"),_I=Ke(_n,"float","Iridescence"),XT=Ke(_n,"float","IridescenceIOR"),YT=Ke(_n,"float","IridescenceThickness"),KT=Ke(_n,"float","AlphaT"),Ru=Ke(_n,"float","Anisotropy"),Wb=Ke(_n,"vec3","AnisotropyT"),Fd=Ke(_n,"vec3","AnisotropyB"),sc=Ke(_n,"color","SpecularColor"),Ad=Ke(_n,"color","SpecularColorBlended"),$f=Ke(_n,"float","SpecularF90"),ZT=Ke(_n,"float","Shininess"),Hf=Ke(_n,"vec4","Output"),V0=Ke(_n,"float","dashSize"),Y2=Ke(_n,"float","gapSize"),qb=Ke(_n,"float","IOR"),QT=Ke(_n,"float","Transmission"),M4=Ke(_n,"float","Thickness"),I4=Ke(_n,"float","AttenuationDistance"),k4=Ke(_n,"color","AttenuationColor"),L4=Ke(_n,"float","Dispersion");class D4 extends xt{static get type(){return"UniformGroupNode"}constructor(e,t=!1,r=1){super("string"),this.name=e,this.shared=t,this.order=r,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const vhe=n=>new D4(n),vI=(n,e=0)=>new D4(n,!0,e),xhe=vI("frame"),Ct=vI("render"),O4=vhe("object");class um extends hI{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=O4}setName(e){return this.name=e,this}label(e){return Ce('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){return e=e.bind(this),super.onUpdate(r=>{const i=e(r,this);i!==void 0&&(this.value=i)},t)}getInputType(e){let t=super.getInputType(e);return t==="bool"&&(t="uint"),t}generate(e,t){const r=this.getNodeType(e),i=this.getUniformHash(e);let s=e.getNodeFromHash(i);s===void 0&&(e.setHashNode(this,i),s=this);const a=s.getInputType(e),o=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.nodeName),l=e.getPropertyName(o);e.context.nodeName!==void 0&&delete e.context.nodeName;let u=l;if(r==="bool"){const c=e.getDataFromNode(this);let h=c.propertyName;if(h===void 0){const f=e.getVarFromNode(this,null,"bool");h=e.getPropertyName(f),c.propertyName=h,u=e.format(l,a,r),e.addLineFlowCode(`${h} = ${u}`,this)}u=h}return e.format(u,r,t)}}const Lt=(n,e)=>{const t=dhe(e||n);if(t===n&&(n=dI(t)),n&&n.isNode===!0){let r=n.value;n.traverse(i=>{i.isConstNode===!0&&(r=i.value)}),n=r}return new um(n,t)};class K2 extends Ar{static get type(){return"ArrayNode"}constructor(e,t,r=null){super(e),this.count=t,this.values=r,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null?this.values[0].getNodeType(e):this.nodeType}getElementType(e){return this.getNodeType(e)}getMemberType(e,t){return this.nodeType===null?this.values[0].getMemberType(e,t):super.getMemberType(e,t)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const She=(...n)=>{let e;if(n.length===1){const t=n[0];e=new K2(null,t.length,t)}else{const t=n[0],r=n[1];e=new K2(t,r)}return ut(e)};Ae("toArray",(n,e)=>She(Array(e).fill(n)));class Ehe extends Ar{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const r=e.getTypeLength(t.node.getNodeType(e));return Wh.join("").slice(0,r)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:r}=this,i=t.getScope(),s=e.getDataFromNode(i);s.assign=!0;const a=e.getNodeProperties(this);a.sourceNode=r,a.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:r,sourceNode:i}=e.getNodeProperties(this),s=this.needsSplitAssign(e),a=r.build(e),o=r.getNodeType(e),l=i.build(e,o),u=i.getNodeType(e),c=e.getDataFromNode(this);let h;if(c.initialized===!0)t!=="void"&&(h=a);else if(s){const f=e.getVarFromNode(this,null,o),g=e.getPropertyName(f);e.addLineFlowCode(`${g} = ${l}`,this);const m=r.node,_=m.node.context({assign:!0}).build(e);for(let b=0;b<m.components.length;b++){const S=m.components[b];e.addLineFlowCode(`${_}.${S} = ${g}[ ${b} ]`,this)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||u==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=a));return c.initialized=!0,e.format(h,o,t)}}const The=mn(Ehe).setParameterLength(2);Ae("assign",The);class whe extends Ar{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,t){return this.functionNode.getMemberType(e,t)}generate(e){const t=[],r=this.functionNode,i=r.getInputs(e),s=this.parameters,a=(l,u)=>{const c=u.type,h=c==="pointer";let f;return h?f="&"+l.build(e):f=l.build(e,c),f};if(Array.isArray(s)){if(s.length>i.length)Ie("TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=i.length;else if(s.length<i.length)for(Ie("TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<i.length;)s.push(Te(0));for(let l=0;l<s.length;l++)t.push(a(s[l],i[l]))}else for(const l of i){const u=s[l.name];u!==void 0?t.push(a(u,l)):(Ie(`TSL: Input '${l.name}' not found in 'Fn()'.`),t.push(a(Te(0),l)))}return`${r.build(e,"property")}( ${t.join(", ")} )`}}const Ahe=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Pd(e):mI(e[0]),new whe(ut(n),e));Ae("call",Ahe);const Rhe={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class rr extends Ar{static get type(){return"OperatorNode"}constructor(e,t,r,...i){if(super(),i.length>0){let s=new rr(e,t,r);for(let a=0;a<i.length-1;a++)s=new rr(e,s,i[a]);t=s,r=i[i.length-1]}this.op=e,this.aNode=t,this.bNode=r,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(Rhe[this.op],t)}getNodeType(e,t=null){const r=this.op,i=this.aNode,s=this.bNode,a=i.getNodeType(e),o=s?s.getNodeType(e):null;if(a==="void"||o==="void")return t||"void";if(r==="%")return a;if(r==="~"||r==="&"||r==="|"||r==="^"||r===">>"||r==="<<")return e.getIntegerType(a);if(r==="!"||r==="&&"||r==="||"||r==="^^")return"bool";if(r==="=="||r==="!="||r==="<"||r===">"||r==="<="||r===">="){const l=Math.max(e.getTypeLength(a),e.getTypeLength(o));return l>1?`bvec${l}`:"bool"}else{if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a);if(e.isMatrix(o))return a}else if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(a)?o:a}}generate(e,t){const r=this.op,{aNode:i,bNode:s}=this,a=this.getNodeType(e,t);let o=null,l=null;a!=="void"?(o=i.getNodeType(e),l=s?s.getNodeType(e):null,r==="<"||r===">"||r==="<="||r===">="||r==="=="||r==="!="?e.isVector(o)?l=o:e.isVector(l)?o=l:o!==l&&(o=l="float"):r===">>"||r==="<<"?(o=a,l=e.changeComponentType(l,"uint")):r==="%"?(o=a,l=e.isInteger(o)&&e.isInteger(l)?l:o):e.isMatrix(o)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(o):e.isMatrix(l)||(o=l=a):e.isMatrix(l)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(l):o=l=a:o=l=a):o=l=a;const u=i.build(e,o),c=s?s.build(e,l):null,h=e.getFunctionOperator(r);if(t!=="void"){const f=e.renderer.coordinateSystem===Oi;if(r==="=="||r==="!="||r==="<"||r===">"||r==="<="||r===">=")return f?e.isVector(o)?e.format(`${this.getOperatorMethod(e,t)}( ${u}, ${c} )`,a,t):e.format(`( ${u} ${r} ${c} )`,a,t):e.format(`( ${u} ${r} ${c} )`,a,t);if(r==="%")return e.isInteger(l)?e.format(`( ${u} % ${c} )`,a,t):e.format(`${this.getOperatorMethod(e,a)}( ${u}, ${c} )`,a,t);if(r==="!"||r==="~")return e.format(`(${r}${u})`,o,t);if(h)return e.format(`${h}( ${u}, ${c} )`,a,t);if(e.isMatrix(o)&&l==="float")return e.format(`( ${c} ${r} ${u} )`,a,t);if(o==="float"&&e.isMatrix(l))return e.format(`${u} ${r} ${c}`,a,t);{let g=`( ${u} ${r} ${c} )`;return!f&&a==="bool"&&e.isVector(o)&&e.isVector(l)&&(g=`all${g}`),e.format(g,a,t)}}else if(o!=="void")return h?e.format(`${h}( ${u}, ${c} )`,a,t):e.isMatrix(o)&&l==="float"?e.format(`${c} ${r} ${u}`,a,t):e.format(`${u} ${r} ${c}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const ss=pt(rr,"+").setParameterLength(2,1/0).setName("add"),Xi=pt(rr,"-").setParameterLength(2,1/0).setName("sub"),Yt=pt(rr,"*").setParameterLength(2,1/0).setName("mul"),Qa=pt(rr,"/").setParameterLength(2,1/0).setName("div"),xI=pt(rr,"%").setParameterLength(2).setName("mod"),P4=pt(rr,"==").setParameterLength(2).setName("equal"),Nhe=pt(rr,"!=").setParameterLength(2).setName("notEqual"),Che=pt(rr,"<").setParameterLength(2).setName("lessThan"),Mhe=pt(rr,">").setParameterLength(2).setName("greaterThan"),Ihe=pt(rr,"<=").setParameterLength(2).setName("lessThanEqual"),khe=pt(rr,">=").setParameterLength(2).setName("greaterThanEqual"),Lhe=pt(rr,"&&").setParameterLength(2,1/0).setName("and"),Dhe=pt(rr,"||").setParameterLength(2,1/0).setName("or"),Ohe=pt(rr,"!").setParameterLength(1).setName("not"),Phe=pt(rr,"^^").setParameterLength(2).setName("xor"),Fhe=pt(rr,"&").setParameterLength(2).setName("bitAnd"),Uhe=pt(rr,"~").setParameterLength(1).setName("bitNot"),Bhe=pt(rr,"|").setParameterLength(2).setName("bitOr"),zhe=pt(rr,"^").setParameterLength(2).setName("bitXor"),Ghe=pt(rr,"<<").setParameterLength(2).setName("shiftLeft"),Vhe=pt(rr,">>").setParameterLength(2).setName("shiftRight"),$he=Ne(([n])=>(n.addAssign(1),n)),Hhe=Ne(([n])=>(n.subAssign(1),n)),jhe=Ne(([n])=>{const e=zn(n).toConst();return n.addAssign(1),e}),Whe=Ne(([n])=>{const e=zn(n).toConst();return n.subAssign(1),e});Ae("add",ss);Ae("sub",Xi);Ae("mul",Yt);Ae("div",Qa);Ae("mod",xI);Ae("equal",P4);Ae("notEqual",Nhe);Ae("lessThan",Che);Ae("greaterThan",Mhe);Ae("lessThanEqual",Ihe);Ae("greaterThanEqual",khe);Ae("and",Lhe);Ae("or",Dhe);Ae("not",Ohe);Ae("xor",Phe);Ae("bitAnd",Fhe);Ae("bitNot",Uhe);Ae("bitOr",Bhe);Ae("bitXor",zhe);Ae("shiftLeft",Ghe);Ae("shiftRight",Vhe);Ae("incrementBefore",$he);Ae("decrementBefore",Hhe);Ae("increment",jhe);Ae("decrement",Whe);const qhe=(n,e)=>(Ce('TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),xI(zn(n),zn(e)));Ae("modInt",qhe);class ge extends Ar{static get type(){return"MathNode"}constructor(e,t,r=null,i=null){if(super(),(e===ge.MAX||e===ge.MIN)&&arguments.length>3){let s=new ge(e,t,r);for(let a=2;a<arguments.length-1;a++)s=new ge(e,s,arguments[a]);t=s,r=arguments[arguments.length-1],i=null}this.method=e,this.aNode=t,this.bNode=r,this.cNode=i,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),r=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(r)?0:e.getTypeLength(r),o=e.isMatrix(i)?0:e.getTypeLength(i);return s>a&&s>o?t:a>o?r:o>s?i:t}getNodeType(e){const t=this.method;return t===ge.LENGTH||t===ge.DISTANCE||t===ge.DOT?"float":t===ge.CROSS?"vec3":t===ge.ALL||t===ge.ANY?"bool":t===ge.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:r,method:i}=this;let s=null;if(i===ge.ONE_MINUS)s=Xi(1,t);else if(i===ge.RECIPROCAL)s=Qa(1,t);else if(i===ge.DIFFERENCE)s=vs(Xi(t,r));else if(i===ge.TRANSFORM_DIRECTION){let a=t,o=r;e.isMatrix(a.getNodeType(e))?o=Ht(we(o),0):a=Ht(we(a),0);const l=Yt(a,o).xyz;s=ma(l)}return s!==null?s:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let i=this.method;const s=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,u=this.cNode,c=e.renderer.coordinateSystem;if(i===ge.NEGATE)return e.format("( - "+o.build(e,a)+" )",s,t);{const h=[];return i===ge.CROSS?h.push(o.build(e,s),l.build(e,s)):c===Oi&&i===ge.STEP?h.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):c===Oi&&(i===ge.MIN||i===ge.MAX)?h.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):i===ge.REFRACT?h.push(o.build(e,a),l.build(e,a),u.build(e,"float")):i===ge.MIX?h.push(o.build(e,a),l.build(e,a),u.build(e,e.getTypeLength(u.getNodeType(e))===1?"float":a)):(c===Za&&i===ge.ATAN&&l!==null&&(i="atan2"),e.shaderStage!=="fragment"&&(i===ge.DFDX||i===ge.DFDY)&&(Ce(`TSL: '${i}' is not supported in the ${e.shaderStage} stage.`),i="/*"+i+"*/"),h.push(o.build(e,a)),l!==null&&h.push(l.build(e,a)),u!==null&&h.push(u.build(e,a))),e.format(`${e.getMethod(i,s)}( ${h.join(", ")} )`,s,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}ge.ALL="all";ge.ANY="any";ge.RADIANS="radians";ge.DEGREES="degrees";ge.EXP="exp";ge.EXP2="exp2";ge.LOG="log";ge.LOG2="log2";ge.SQRT="sqrt";ge.INVERSE_SQRT="inversesqrt";ge.FLOOR="floor";ge.CEIL="ceil";ge.NORMALIZE="normalize";ge.FRACT="fract";ge.SIN="sin";ge.COS="cos";ge.TAN="tan";ge.ASIN="asin";ge.ACOS="acos";ge.ATAN="atan";ge.ABS="abs";ge.SIGN="sign";ge.LENGTH="length";ge.NEGATE="negate";ge.ONE_MINUS="oneMinus";ge.DFDX="dFdx";ge.DFDY="dFdy";ge.ROUND="round";ge.RECIPROCAL="reciprocal";ge.TRUNC="trunc";ge.FWIDTH="fwidth";ge.TRANSPOSE="transpose";ge.DETERMINANT="determinant";ge.INVERSE="inverse";ge.EQUALS="equals";ge.MIN="min";ge.MAX="max";ge.STEP="step";ge.REFLECT="reflect";ge.DISTANCE="distance";ge.DIFFERENCE="difference";ge.DOT="dot";ge.CROSS="cross";ge.POW="pow";ge.TRANSFORM_DIRECTION="transformDirection";ge.MIX="mix";ge.CLAMP="clamp";ge.REFRACT="refract";ge.SMOOTHSTEP="smoothstep";ge.FACEFORWARD="faceforward";const F4=Te(1e-6),Xhe=Te(Math.PI),Yhe=pt(ge,ge.ALL).setParameterLength(1),Khe=pt(ge,ge.ANY).setParameterLength(1),Zhe=pt(ge,ge.RADIANS).setParameterLength(1),Qhe=pt(ge,ge.DEGREES).setParameterLength(1),U4=pt(ge,ge.EXP).setParameterLength(1),Rg=pt(ge,ge.EXP2).setParameterLength(1),B4=pt(ge,ge.LOG).setParameterLength(1),Bo=pt(ge,ge.LOG2).setParameterLength(1),Do=pt(ge,ge.SQRT).setParameterLength(1),Jhe=pt(ge,ge.INVERSE_SQRT).setParameterLength(1),Wu=pt(ge,ge.FLOOR).setParameterLength(1),SI=pt(ge,ge.CEIL).setParameterLength(1),ma=pt(ge,ge.NORMALIZE).setParameterLength(1),Ja=pt(ge,ge.FRACT).setParameterLength(1),_s=pt(ge,ge.SIN).setParameterLength(1),Ua=pt(ge,ge.COS).setParameterLength(1),epe=pt(ge,ge.TAN).setParameterLength(1),tpe=pt(ge,ge.ASIN).setParameterLength(1),z4=pt(ge,ge.ACOS).setParameterLength(1),G4=pt(ge,ge.ATAN).setParameterLength(1,2),vs=pt(ge,ge.ABS).setParameterLength(1),V4=pt(ge,ge.SIGN).setParameterLength(1),zo=pt(ge,ge.LENGTH).setParameterLength(1),$4=pt(ge,ge.NEGATE).setParameterLength(1),npe=pt(ge,ge.ONE_MINUS).setParameterLength(1),H4=pt(ge,ge.DFDX).setParameterLength(1),j4=pt(ge,ge.DFDY).setParameterLength(1),rpe=pt(ge,ge.ROUND).setParameterLength(1),ipe=pt(ge,ge.RECIPROCAL).setParameterLength(1),spe=pt(ge,ge.TRUNC).setParameterLength(1),W4=pt(ge,ge.FWIDTH).setParameterLength(1),ape=pt(ge,ge.TRANSPOSE).setParameterLength(1),ope=pt(ge,ge.DETERMINANT).setParameterLength(1),lpe=pt(ge,ge.INVERSE).setParameterLength(1),upe=(n,e)=>(Ce('TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),P4(n,e)),xh=pt(ge,ge.MIN).setParameterLength(2,1/0),ti=pt(ge,ge.MAX).setParameterLength(2,1/0),q4=pt(ge,ge.STEP).setParameterLength(2),cpe=pt(ge,ge.REFLECT).setParameterLength(2),dpe=pt(ge,ge.DISTANCE).setParameterLength(2),hpe=pt(ge,ge.DIFFERENCE).setParameterLength(2),ac=pt(ge,ge.DOT).setParameterLength(2),oc=pt(ge,ge.CROSS).setParameterLength(2),mv=pt(ge,ge.POW).setParameterLength(2),X4=n=>Yt(n,n),ppe=n=>Yt(n,n,n),Y4=n=>Yt(n,n,n,n),fpe=pt(ge,ge.TRANSFORM_DIRECTION).setParameterLength(2),gpe=n=>Yt(V4(n),mv(vs(n),1/3)),K4=n=>ac(n,n),Mn=pt(ge,ge.MIX).setParameterLength(3),Vl=(n,e=0,t=1)=>ut(new ge(ge.CLAMP,ut(n),ut(e),ut(t))),EI=n=>Vl(n),Z4=pt(ge,ge.REFRACT).setParameterLength(3),$o=pt(ge,ge.SMOOTHSTEP).setParameterLength(3),mpe=pt(ge,ge.FACEFORWARD).setParameterLength(3),ype=Ne(([n])=>{const r=43758.5453,i=ac(n.xy,yt(12.9898,78.233)),s=xI(i,Xhe);return Ja(_s(s).mul(r))}),bpe=(n,e,t)=>Mn(e,t,n),_pe=(n,e,t)=>$o(e,t,n),vpe=(n,e)=>q4(e,n),xpe=(n,e)=>(Ce('TSL: "atan2" is overloaded. Use "atan" instead.'),G4(n,e));Ae("all",Yhe);Ae("any",Khe);Ae("equals",upe);Ae("radians",Zhe);Ae("degrees",Qhe);Ae("exp",U4);Ae("exp2",Rg);Ae("log",B4);Ae("log2",Bo);Ae("sqrt",Do);Ae("inverseSqrt",Jhe);Ae("floor",Wu);Ae("ceil",SI);Ae("normalize",ma);Ae("fract",Ja);Ae("sin",_s);Ae("cos",Ua);Ae("tan",epe);Ae("asin",tpe);Ae("acos",z4);Ae("atan",G4);Ae("abs",vs);Ae("sign",V4);Ae("length",zo);Ae("lengthSq",K4);Ae("negate",$4);Ae("oneMinus",npe);Ae("dFdx",H4);Ae("dFdy",j4);Ae("round",rpe);Ae("reciprocal",ipe);Ae("trunc",spe);Ae("fwidth",W4);Ae("atan2",xpe);Ae("min",xh);Ae("max",ti);Ae("step",vpe);Ae("reflect",cpe);Ae("distance",dpe);Ae("dot",ac);Ae("cross",oc);Ae("pow",mv);Ae("pow2",X4);Ae("pow3",ppe);Ae("pow4",Y4);Ae("transformDirection",fpe);Ae("mix",bpe);Ae("clamp",Vl);Ae("refract",Z4);Ae("smoothstep",_pe);Ae("faceForward",mpe);Ae("difference",hpe);Ae("saturate",EI);Ae("cbrt",gpe);Ae("transpose",ape);Ae("determinant",ope);Ae("inverse",lpe);Ae("rand",ype);class Spe extends xt{static get type(){return"ConditionalNode"}constructor(e,t,r=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=r}getNodeType(e){const{ifNode:t,elseNode:r}=e.getNodeProperties(this);if(t===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const i=t.getNodeType(e);if(r!==null){const s=r.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(i))return s}return i}setup(e){const t=this.condNode,r=this.ifNode.isolate(),i=this.elseNode?this.elseNode.isolate():null,s=e.context.nodeBlock;e.getDataFromNode(r).parentNodeBlock=s,i!==null&&(e.getDataFromNode(i).parentNodeBlock=s);const a=e.context.uniformFlow,o=e.getNodeProperties(this);o.condNode=t,o.ifNode=a?r:r.context({nodeBlock:r}),o.elseNode=i?a?i:i.context({nodeBlock:i}):null}generate(e,t){const r=this.getNodeType(e),i=e.getDataFromNode(this);if(i.nodeProperty!==void 0)return i.nodeProperty;const{condNode:s,ifNode:a,elseNode:o}=e.getNodeProperties(this),l=e.currentFunctionNode,u=t!=="void",c=u?Ul(r).build(e):"";i.nodeProperty=c;const h=s.build(e,"bool");if(e.context.uniformFlow&&o!==null){const m=a.build(e,r),v=o.build(e,r),_=e.getTernary(h,m,v);return e.format(_,r,t)}e.addFlowCode(`
${e.tab}if ( ${h} ) {

`).addFlowTab();let g=a.build(e,r);if(g&&(u?g=c+" = "+g+";":(g="return "+g+";",l===null&&(Ce("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),g="// "+g))),e.removeFlowTab().addFlowCode(e.tab+"	"+g+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let m=o.build(e,r);m&&(u?m=c+" = "+m+";":(m="return "+m+";",l===null&&(Ce("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),m="// "+m))),e.removeFlowTab().addFlowCode(e.tab+"	"+m+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,r,t)}}const es=mn(Spe).setParameterLength(2,3);Ae("select",es);class Q4 extends xt{static get type(){return"ContextNode"}constructor(e=null,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getFlowContextData(){const e=[];return this.traverse(t=>{t.isContextNode===!0&&e.push(t.value)}),Object.assign({},...e)}getMemberType(e,t){return this.node.getMemberType(e,t)}analyze(e){const t=e.addContext(this.value);this.node.build(e),e.setContext(t)}setup(e){const t=e.addContext(this.value);this.node.build(e),e.setContext(t)}generate(e,t){const r=e.addContext(this.value),i=this.node.build(e,t);return e.setContext(r),i}}const mc=(n=null,e={})=>{let t=n;return(t===null||t.isNode!==!0)&&(e=t||e,t=null),new Q4(t,e)},Epe=n=>mc(n,{uniformFlow:!0}),J4=(n,e)=>mc(n,{nodeName:e});function Tpe(n,e,t=null){return mc(t,{getShadow:({light:r,shadowColorNode:i})=>e===r?i.mul(n):i})}function wpe(n,e=null){return mc(e,{getAO:(t,{material:r})=>r.transparent===!0?t:t!==null?t.mul(n):n})}function Ape(n,e){return Ce('TSL: "label()" has been deprecated. Use "setName()" instead.'),J4(n,e)}Ae("context",mc);Ae("label",Ape);Ae("uniformFlow",Epe);Ae("setName",J4);Ae("builtinShadowContext",(n,e,t)=>Tpe(e,t,n));Ae("builtinAOContext",(n,e)=>wpe(e,n));class Xb extends xt{static get type(){return"VarNode"}constructor(e,t=null,r=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=r,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}isIntent(e){return e.getDataFromNode(this).forceDeclaration===!0?!1:this.intent}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}isAssign(e){return e.getDataFromNode(this).assign}build(...e){const t=e[0];if(this._hasStack(t)===!1&&t.buildStage==="setup"&&(t.context.nodeLoop||t.context.nodeBlock)){let r=!1;if(this.node.isShaderCallNodeInternal&&this.node.shaderNode.getLayout()===null&&t.fnCall&&t.fnCall.shaderNode&&t.getDataFromNode(this.node.shaderNode).hasLoop){const a=t.getDataFromNode(this);a.forceDeclaration=!0,r=!0}const i=t.getBaseStack();r?i.addToStackBefore(this):i.addToStack(this)}return this.isIntent(t)&&this.isAssign(t)!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:t,name:r,readOnly:i}=this,{renderer:s}=e,a=s.backend.isWebGPUBackend===!0;let o=!1,l=!1;i&&(o=e.isDeterministic(t),l=a?i:o);const u=this.getNodeType(e);if(u=="void")return this.isIntent(e)!==!0&&Ie('TSL: ".toVar()" can not be used with void type.'),t.build(e);const c=e.getVectorType(u),h=t.build(e,c),f=e.getVarFromNode(this,r,c,void 0,l),g=e.getPropertyName(f);let m=g;if(l)if(a)m=o?`const ${g}`:`let ${g}`;else{const v=t.getArrayCount(e);m=`const ${e.getVar(f.type,g,v)}`}return e.addLineFlowCode(`${m} = ${h}`,this),g}_hasStack(e){return e.getDataFromNode(this).stack!==void 0}}const TI=mn(Xb),Rpe=(n,e=null)=>TI(n,e).toStack(),Npe=(n,e=null)=>TI(n,e,!0).toStack(),Cpe=n=>TI(n).setIntent(!0).toStack();Ae("toVar",Rpe);Ae("toConst",Npe);Ae("toVarIntent",Cpe);class Mpe extends xt{static get type(){return"SubBuild"}constructor(e,t,r=null){super(r),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);const r=this.node.build(e,...t);return e.removeSubBuild(),r}}const jf=(n,e,t=null)=>ut(new Mpe(ut(n),e,t));class Ipe extends xt{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let r=t.varying;if(r===void 0){const i=this.name,s=this.getNodeType(e),a=this.interpolationType,o=this.interpolationSampling;t.varying=r=e.getVaryingFromNode(this,i,s,a,o),t.node=jf(this.node,"VERTEX")}return r.needsInterpolation||(r.needsInterpolation=e.shaderStage==="fragment"),r}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(lb.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(lb.VERTEX,this.node)}generate(e){const t=e.getSubBuildProperty("property",e.currentStack),r=e.getNodeProperties(this),i=this.setupVarying(e);if(r[t]===void 0){const s=this.getNodeType(e),a=e.getPropertyName(i,lb.VERTEX);e.flowNodeFromShaderStage(lb.VERTEX,r.node,s,a),r[t]=a}return e.getPropertyName(i)}}const jo=mn(Ipe).setParameterLength(1,2),kpe=n=>jo(n);Ae("toVarying",jo);Ae("toVertexStage",kpe);Ae("varying",(...n)=>(Ce("TSL: .varying() has been renamed to .toVarying()."),jo(...n)));Ae("vertexStage",(...n)=>(Ce("TSL: .vertexStage() has been renamed to .toVertexStage()."),jo(...n)));const Lpe=Ne(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),t=n.mul(.0773993808),r=n.lessThanEqual(.04045);return Mn(e,t,r)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),Dpe=Ne(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),t=n.mul(12.92),r=n.lessThanEqual(.0031308);return Mn(e,t,r)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),wI="WorkingColorSpace",Ope="OutputColorSpace";class e$ extends Ar{static get type(){return"ColorSpaceNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.source=t,this.target=r}resolveColorSpace(e,t){return t===wI?Nt.workingColorSpace:t===Ope?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,r=this.resolveColorSpace(e,this.source),i=this.resolveColorSpace(e,this.target);let s=t;return Nt.enabled===!1||r===i||!r||!i||(Nt.getTransfer(r)===lt&&(s=Ht(Lpe(s.rgb),s.a)),Nt.getPrimaries(r)!==Nt.getPrimaries(i)&&(s=Ht(yi(Nt._getMatrix(new $t,r,i)).mul(s.rgb),s.a)),Nt.getTransfer(i)===lt&&(s=Ht(Dpe(s.rgb),s.a))),s}}const Ppe=(n,e)=>ut(new e$(ut(n),wI,e)),AI=(n,e)=>ut(new e$(ut(n),e,wI));Ae("workingToColorSpace",Ppe);Ae("colorSpaceToWorking",AI);let Fpe=class extends qh{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}};class t$ extends xt{static get type(){return"ReferenceBaseNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.updateType=Xt.OBJECT}setGroup(e){return this.group=e,this}element(e){return new Fpe(this,ut(e))}setNodeType(e){const t=Lt(null,e);this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Upe=(n,e,t)=>new t$(n,e,t);class Bpe extends t${static get type(){return"RendererReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.renderer=r,this.setGroup(Ct)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const zpe=(n,e,t=null)=>new Bpe(n,e,t);class Gpe extends Ar{static get type(){return"ToneMappingNode"}constructor(e,t=$pe,r=null){super("vec3"),this._toneMapping=e,this.exposureNode=t,this.colorNode=r}customCacheKey(){return Gf(this._toneMapping)}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup(e){const t=this.colorNode||e.context.color,r=this._toneMapping;if(r===Qr)return t;let i=null;const s=e.renderer.library.getToneMappingFunction(r);return s!==null?i=Ht(s(t.rgb,this.exposureNode),t.a):(Ie("ToneMappingNode: Unsupported Tone Mapping configuration.",r),i=t),i}}const Vpe=(n,e,t)=>ut(new Gpe(n,ut(e),ut(t))),$pe=zpe("toneMappingExposure","float");Ae("toneMapping",(n,e,t)=>Vpe(e,t,n));const Z2=new WeakMap;function Q2(n,e){let t=Z2.get(n);return t===void 0&&(t=new bV(n,e),Z2.set(n,t)),t}class vl extends hI{static get type(){return"BufferAttributeNode"}constructor(e,t=null,r=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=r,this.bufferOffset=i,this.usage=yh,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&e.itemSize<=4&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),r=e.getTypeLength(t),i=this.value,s=this.bufferStride||r,a=this.bufferOffset;let o;i.isInterleavedBuffer===!0?o=i:i.isBufferAttribute===!0?o=Q2(i.array,s):o=Q2(i,s);const l=new K1(o,r,a);o.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(r);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=i,s=i):s=jo(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}function RI(n,e=null,t=0,r=0,i=yh,s=!1){return e==="mat3"||e===null&&n.itemSize===9?yi(new vl(n,"vec3",9,0).setUsage(i).setInstanced(s),new vl(n,"vec3",9,3).setUsage(i).setInstanced(s),new vl(n,"vec3",9,6).setUsage(i).setInstanced(s)):e==="mat4"||e===null&&n.itemSize===16?ju(new vl(n,"vec4",16,0).setUsage(i).setInstanced(s),new vl(n,"vec4",16,4).setUsage(i).setInstanced(s),new vl(n,"vec4",16,8).setUsage(i).setInstanced(s),new vl(n,"vec4",16,12).setUsage(i).setInstanced(s)):new vl(n,e,t,r)}const n$=(n,e=null,t=0,r=0)=>RI(n,e,t,r),J2=(n,e=null,t=0,r=0)=>RI(n,e,t,r,yh,!0),eU=(n,e=null,t=0,r=0)=>RI(n,e,t,r,Td,!0);Ae("toAttribute",n=>n$(n.value));class Hpe extends xt{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=Xt.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return Ce('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const r=e.getNodeProperties(this);r.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const r$=(n,e=[64])=>{(e.length===0||e.length>3)&&Ie("TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let t=0;t<e.length;t++){const r=e[t];(typeof r!="number"||r<=0||!Number.isInteger(r))&&Ie(`TSL: compute() workgroupSize element at index [ ${t} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return ut(new Hpe(ut(n),e))},jpe=(n,e,t)=>r$(n,t).setCount(e);Ae("compute",jpe);Ae("computeKernel",r$);class Wpe extends xt{static get type(){return"IsolateNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isIsolateNode=!0}getNodeType(e){const t=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const i=this.node.getNodeType(e);return e.setCache(t),i}build(e,...t){const r=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.build(e,...t);return e.setCache(r),s}setParent(e){return this.parent=e,this}getParent(){return this.parent}}const Wf=n=>new Wpe(ut(n));function qpe(n,e=!0){return Ce('TSL: "cache()" has been deprecated. Use "isolate()" instead.'),Wf(n).setParent(e)}Ae("cache",qpe);Ae("isolate",Wf);class Xpe extends xt{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const Ype=mn(Xpe).setParameterLength(2);Ae("bypass",Ype);class i$ extends xt{static get type(){return"RemapNode"}constructor(e,t,r,i=Te(0),s=Te(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=r,this.outLowNode=i,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:r,outLowNode:i,outHighNode:s,doClamp:a}=this;let o=e.sub(t).div(r.sub(t));return a===!0&&(o=o.clamp()),o.mul(s.sub(i)).add(i)}}const Kpe=mn(i$,null,null,{doClamp:!1}).setParameterLength(3,5),Zpe=mn(i$).setParameterLength(3,5);Ae("remap",Kpe);Ae("remapClamp",Zpe);class Yb extends xt{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const r=this.getNodeType(e),i=this.snippet;if(r==="void")e.addLineFlowCode(i,this);else return e.format(i,r,t)}}const Sh=mn(Yb).setParameterLength(1,2),Qpe=n=>(n?es(n,Sh("discard")):Sh("discard")).toStack();Ae("discard",Qpe);class Jpe extends Ar{static get type(){return"RenderOutputNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this._toneMapping=t,this.outputColorSpace=r,this.isRenderOutputNode=!0}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup({context:e}){let t=this.colorNode||e.color;const r=(this._toneMapping!==null?this._toneMapping:e.toneMapping)||Qr,i=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Yi;return r!==Qr&&(t=t.toneMapping(r)),i!==Yi&&i!==Nt.workingColorSpace&&(t=t.workingToColorSpace(i)),t}}const efe=(n,e=null,t=null)=>ut(new Jpe(ut(n),e,t));Ae("renderOutput",efe);class tfe extends Ar{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,r=this.node.build(e),i="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(i.length);let a="";return a+="// #"+i+`#
`,a+=e.flow.code.replace(/^\t/mg,"")+`
`,a+="/* ... */ "+r+` /* ... */
`,a+="// #"+s+`#
`,t!==null?t(e,a):wg(a),r}}const nfe=(n,e=null)=>ut(new tfe(ut(n),e)).toStack();Ae("debug",nfe);class s${constructor(){this._renderer=null,this.currentFrame=null}get nodeFrame(){return this._renderer._nodes.nodeFrame}setRenderer(e){return this._renderer=e,this}getRenderer(){return this._renderer}init(){}begin(){}finish(){}inspect(){}computeAsync(){}beginCompute(){}finishCompute(){}beginRender(){}finishRender(){}copyTextureToTexture(){}copyFramebufferToTexture(){}}class rfe extends xt{static get type(){return"InspectorNode"}constructor(e,t="",r=null){super(),this.node=e,this.name=t,this.callback=r,this.updateType=Xt.FRAME,this.isInspectorNode=!0}getName(){return this.name||this.node.name}update(e){e.renderer.inspector.inspect(this)}getNodeType(e){return this.node.getNodeType(e)}setup(e){let t=this.node;return e.context.inspector===!0&&this.callback!==null&&(t=this.callback(t)),e.renderer.backend.isWebGPUBackend!==!0&&e.renderer.inspector.constructor!==s$&&jn('TSL: ".toInspector()" is only available with WebGPU.'),t}}function ife(n,e="",t=null){return n=ut(n),n.before(new rfe(n,e,t))}Ae("toInspector",ife);class a$ extends xt{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const r=this.getAttributeName(e);if(e.hasGeometryAttribute(r)){const i=e.geometry.getAttribute(r);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),r=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),a=e.getTypeFromAttribute(s),o=e.getAttribute(t,a);return e.shaderStage==="vertex"?e.format(o.name,a,r):jo(this).build(e,r)}else return Ce(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(r)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const $l=(n,e=null)=>new a$(n,e),Xh=(n=0)=>$l("uv"+(n>0?n:""),"vec2");class sfe extends xt{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const r=this.textureNode.build(e,"property"),i=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${r}, ${i} )`,this.getNodeType(e),t)}}const qu=mn(sfe).setParameterLength(1,2);class afe extends um{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Xt.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,r=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(r&&r.width!==void 0){const{width:i,height:s}=r;this.value=Math.log2(Math.max(i,s))}}}const ofe=mn(afe).setParameterLength(1),o$=new Er;class Yh extends um{static get type(){return"TextureNode"}constructor(e=o$,t=null,r=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=r,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Xt.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this._flipYUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===An?"uvec4":this.value.type===Vr?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Xh(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Lt(this.value.matrix)),this._matrixUniform.mul(we(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this}setupUV(e,t){return e.isFlipY()&&(this._flipYUniform===null&&(this._flipYUniform=Lt(!1)),t=t.toVar(),this.sampler?t=this._flipYUniform.select(t.flipY(),t):t=this._flipYUniform.select(t.setY(zn(qu(this,this.levelNode).y).sub(t.y).sub(1)),t)),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const r=this.value;if(!r||r.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");const i=Ne(()=>{let a=this.uvNode;return(a===null||e.context.forceUVContext===!0)&&e.context.getUV&&(a=e.context.getUV(this,e)),a||(a=this.getDefaultUV()),this.updateMatrix===!0&&(a=this.getTransformedUV(a)),a=this.setupUV(e,a),this.updateType=this._matrixUniform!==null||this._flipYUniform!==null?Xt.OBJECT:Xt.NONE,a})();let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=i,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode,t.offsetNode=this.offsetNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateOffset(e,t){return t.build(e,"ivec2")}generateSnippet(e,t,r,i,s,a,o,l,u){const c=this.value;let h;return s?h=e.generateTextureBias(c,t,r,s,a,u):l?h=e.generateTextureGrad(c,t,r,l,a,u):o?h=e.generateTextureCompare(c,t,r,o,a,u):this.sampler===!1?h=e.generateTextureLoad(c,t,r,i,a,u):i?h=e.generateTextureLevel(c,t,r,i,a,u):h=e.generateTexture(c,t,r,a,u),h}generate(e,t){const r=this.value,i=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:c,levelNode:h,biasNode:f,compareNode:g,depthNode:m,gradNode:v,offsetNode:_}=i,b=this.generateUV(e,c),S=h?h.build(e,"float"):null,E=f?f.build(e,"float"):null,A=m?m.build(e,"int"):null,R=g?g.build(e,"float"):null,w=v?[v[0].build(e,"vec2"),v[1].build(e,"vec2")]:null,M=_?this.generateOffset(e,_):null,I=e.getVarFromNode(this);o=e.getPropertyName(I);const C=this.generateSnippet(e,s,b,S,E,A,R,w,M);e.addLineFlowCode(`${o} = ${C}`,this),a.snippet=C,a.propertyName=o}let l=o;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(r)&&(l=AI(Sh(l,u),r.colorSpace).setup(e).build(e,u)),e.format(l,u,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return Ce("TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=ut(e),t.referenceNode=this.getBase(),ut(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){const t=this.clone();t.biasNode=ut(e).mul(ofe(t)),t.referenceNode=this.getBase();const r=t.value;return t.generateMipmaps===!1&&(r&&r.generateMipmaps===!1||r.minFilter===Rn||r.magFilter===Rn)&&(Ce("TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),ut(t)}level(e){const t=this.clone();return t.levelNode=ut(e),t.referenceNode=this.getBase(),ut(t)}size(e){return qu(this,e)}bias(e){const t=this.clone();return t.biasNode=ut(e),t.referenceNode=this.getBase(),ut(t)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){const t=this.clone();return t.compareNode=ut(e),t.referenceNode=this.getBase(),ut(t)}grad(e,t){const r=this.clone();return r.gradNode=[ut(e),ut(t)],r.referenceNode=this.getBase(),ut(r)}depth(e){const t=this.clone();return t.depthNode=ut(e),t.referenceNode=this.getBase(),ut(t)}offset(e){const t=this.clone();return t.offsetNode=ut(e),t.referenceNode=this.getBase(),ut(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix();const r=this._flipYUniform;r!==null&&(r.value=e.image instanceof ImageBitmap&&e.flipY===!0||e.isRenderTargetTexture===!0||e.isFramebufferTexture===!0||e.isDepthTexture===!0)}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}const lfe=mn(Yh).setParameterLength(1,4).setName("texture"),Gn=(n=o$,e=null,t=null,r=null)=>{let i;return n&&n.isTextureNode===!0?(i=ut(n.clone()),i.referenceNode=n.getBase(),e!==null&&(i.uvNode=ut(e)),t!==null&&(i.levelNode=ut(t)),r!==null&&(i.biasNode=ut(r))):i=lfe(n,e,t,r),i},Ps=(...n)=>Gn(...n).setSampler(!1);class NI extends um{static get type(){return"BufferNode"}constructor(e,t,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=r,this.updateRanges=[]}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const l$=(n,e,t)=>new NI(n,e,t);class ufe extends qh{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),r=this.getNodeType(),i=this.node.getPaddedType();return e.format(t,i,r)}}class cfe extends NI{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?b_(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=Xt.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,r=this.elementType;if(r==="float"||r==="int"||r==="uint")for(let i=0;i<e.length;i++){const s=i*4;t[s]=e[i]}else if(r==="color")for(let i=0;i<e.length;i++){const s=i*4,a=e[i];t[s]=a.r,t[s+1]=a.g,t[s+2]=a.b||0}else if(r==="mat2")for(let i=0;i<e.length;i++){const s=i*4,a=e[i];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+3]=a.elements[3]}else if(r==="mat3")for(let i=0;i<e.length;i++){const s=i*16,a=e[i];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+4]=a.elements[3],t[s+5]=a.elements[4],t[s+6]=a.elements[5],t[s+8]=a.elements[6],t[s+9]=a.elements[7],t[s+10]=a.elements[8],t[s+15]=1}else if(r==="mat4")for(let i=0;i<e.length;i++){const s=i*16,a=e[i];for(let o=0;o<a.elements.length;o++)t[s+o]=a.elements[o]}else for(let i=0;i<e.length;i++){const s=i*4,a=e[i];t[s]=a.x,t[s+1]=a.y,t[s+2]=a.z||0,t[s+3]=a.w||0}}setup(e){const t=this.array.length,r=this.elementType;let i=Float32Array;const s=this.paddedType,a=e.getTypeLength(s);return r.charAt(0)==="i"&&(i=Int32Array),r.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(t*a),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return new ufe(this,ut(e))}}const ha=(n,e)=>new cfe(n,e);class dfe extends xt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const cm=mn(dfe).setParameterLength(1);let tf,nf;class Fn extends xt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===Fn.DPR?"float":this.scope===Fn.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Xt.NONE;return(this.scope===Fn.SIZE||this.scope===Fn.VIEWPORT||this.scope===Fn.DPR)&&(e=Xt.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===Fn.VIEWPORT?t!==null?nf.copy(t.viewport):(e.getViewport(nf),nf.multiplyScalar(e.getPixelRatio())):this.scope===Fn.DPR?this._output.value=e.getPixelRatio():t!==null?(tf.width=t.width,tf.height=t.height):e.getDrawingBufferSize(tf)}setup(){const e=this.scope;let t=null;return e===Fn.SIZE?t=Lt(tf||(tf=new $e)):e===Fn.VIEWPORT?t=Lt(nf||(nf=new Wt)):e===Fn.DPR?t=Lt(1):t=yt(Kh.div(JT)),this._output=t,t}generate(e){if(this.scope===Fn.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const r=e.getNodeProperties(JT).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${r}.y - ${t}.y )`}return t}return super.generate(e)}}Fn.COORDINATE="coordinate";Fn.VIEWPORT="viewport";Fn.SIZE="size";Fn.UV="uv";Fn.DPR="dpr";const hfe=Ke(Fn,Fn.DPR),Ud=Ke(Fn,Fn.UV),JT=Ke(Fn,Fn.SIZE),Kh=Ke(Fn,Fn.COORDINATE),u$=Ke(Fn,Fn.VIEWPORT),pfe=u$.zw;u$.xy;const CI=Lt(0,"uint").setName("u_cameraIndex").setGroup(vI("cameraIndex")).toVarying("v_cameraIndex"),Iu=Lt("float").setName("cameraNear").setGroup(Ct).onRenderUpdate(({camera:n})=>n.near),ku=Lt("float").setName("cameraFar").setGroup(Ct).onRenderUpdate(({camera:n})=>n.far),qf=Ne(({camera:n})=>{let e;if(n.isArrayCamera&&n.cameras.length>0){const t=[];for(const i of n.cameras)t.push(i.projectionMatrix);e=ha(t).setGroup(Ct).setName("cameraProjectionMatrices").element(n.isMultiViewCamera?cm("gl_ViewID_OVR"):CI).toConst("cameraProjectionMatrix")}else e=Lt("mat4").setName("cameraProjectionMatrix").setGroup(Ct).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),Wo=Ne(({camera:n})=>{let e;if(n.isArrayCamera&&n.cameras.length>0){const t=[];for(const i of n.cameras)t.push(i.matrixWorldInverse);e=ha(t).setGroup(Ct).setName("cameraViewMatrices").element(n.isMultiViewCamera?cm("gl_ViewID_OVR"):CI).toConst("cameraViewMatrix")}else e=Lt("mat4").setName("cameraViewMatrix").setGroup(Ct).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),ffe=Ne(({camera:n})=>{let e;if(n.isArrayCamera&&n.cameras.length>0){const t=[];for(let i=0,s=n.cameras.length;i<s;i++)t.push(new Z);e=ha(t).setGroup(Ct).setName("cameraPositions").onRenderUpdate(({camera:i},s)=>{const a=i.cameras,o=s.array;for(let l=0,u=a.length;l<u;l++)o[l].setFromMatrixPosition(a[l].matrixWorld)}).element(n.isMultiViewCamera?cm("gl_ViewID_OVR"):CI).toConst("cameraPosition")}else e=Lt(new Z).setName("cameraPosition").setGroup(Ct).onRenderUpdate(({camera:t},r)=>r.value.setFromMatrixPosition(t.matrixWorld));return e}).once()(),tU=new nm;class Ln extends xt{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Xt.OBJECT,this.uniformNode=new um(null)}getNodeType(){const e=this.scope;if(e===Ln.WORLD_MATRIX)return"mat4";if(e===Ln.POSITION||e===Ln.VIEW_POSITION||e===Ln.DIRECTION||e===Ln.SCALE)return"vec3";if(e===Ln.RADIUS)return"float"}update(e){const t=this.object3d,r=this.uniformNode,i=this.scope;if(i===Ln.WORLD_MATRIX)r.value=t.matrixWorld;else if(i===Ln.POSITION)r.value=r.value||new Z,r.value.setFromMatrixPosition(t.matrixWorld);else if(i===Ln.SCALE)r.value=r.value||new Z,r.value.setFromMatrixScale(t.matrixWorld);else if(i===Ln.DIRECTION)r.value=r.value||new Z,t.getWorldDirection(r.value);else if(i===Ln.VIEW_POSITION){const s=e.camera;r.value=r.value||new Z,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(s.matrixWorldInverse)}else if(i===Ln.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),tU.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),r.value=tU.radius}}generate(e){const t=this.scope;return t===Ln.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===Ln.POSITION||t===Ln.VIEW_POSITION||t===Ln.DIRECTION||t===Ln.SCALE?this.uniformNode.nodeType="vec3":t===Ln.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Ln.WORLD_MATRIX="worldMatrix";Ln.POSITION="position";Ln.SCALE="scale";Ln.VIEW_POSITION="viewPosition";Ln.DIRECTION="direction";Ln.RADIUS="radius";const gfe=mn(Ln,Ln.POSITION).setParameterLength(1);class js extends Ln{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}js.DIRECTION;const lc=Ke(js,js.WORLD_MATRIX);js.POSITION;js.SCALE;js.VIEW_POSITION;js.RADIUS;const mfe=Lt(new $t).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),dm=Ne(n=>n.context.modelViewMatrix||yfe).once()().toVar("modelViewMatrix"),yfe=Wo.mul(lc),nU=Ne(n=>(n.context.isHighPrecisionModelViewMatrix=!0,Lt("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),rU=Ne(n=>{const e=n.context.isHighPrecisionModelViewMatrix;return Lt("mat3").onObjectUpdate(({object:t,camera:r})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),yv=$l("position","vec3"),Hr=yv.toVarying("positionLocal"),iU=yv.toVarying("positionPrevious"),Eh=Ne(n=>lc.mul(Hr).xyz.toVarying(n.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),c$=Ne(()=>Hr.transformDirection(lc).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),gr=Ne(n=>n.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),Un=Ne(n=>{let e;return n.camera.isOrthographicCamera?e=we(0,0,1):e=gr.negate().toVarying("v_positionViewDirection").normalize(),e.toVar("positionViewDirection")},"vec3").once(["POSITION"])();class bfe extends xt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{material:t}=e;return t.side===On?"false":e.getFrontFacing()}}const _fe=Ke(bfe),d$=Te(_fe).mul(2).sub(1),hm=Ne(([n],{material:e})=>{const t=e.side;return t===On?n=n.mul(-1):t===pi&&(n=n.mul(d$)),n}),h$=$l("normal","vec3"),eo=Ne(n=>n.geometry.hasAttribute("normal")===!1?(Ce('TSL: Vertex attribute "normal" not found on geometry.'),we(0,1,0)):h$,"vec3").once()().toVar("normalLocal"),vfe=gr.dFdx().cross(gr.dFdy()).normalize().toVar("normalFlat"),Ng=Ne(n=>{let e;return n.material.flatShading===!0?e=vfe:e=p$(eo).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),xfe=Ne(n=>{let e=Ng.transformDirection(Wo);return n.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),dn=Ne(({subBuildFn:n,material:e,context:t})=>{let r;return n==="NORMAL"||n==="VERTEX"?(r=Ng,e.flatShading!==!0&&(r=hm(r))):r=t.setupNormal().context({getUV:null}),r},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),Zh=dn.transformDirection(Wo).toVar("normalWorld"),Rd=Ne(({subBuildFn:n,context:e})=>{let t;return n==="NORMAL"||n==="VERTEX"?t=dn:t=e.setupClearcoatNormal().context({getUV:null}),t},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),Sfe=Ne(([n,e=lc])=>{const t=yi(e),r=n.div(we(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(r).xyz}),p$=Ne(([n],e)=>{const t=e.context.modelNormalViewMatrix;if(t)return t.transformDirection(n);const r=mfe.mul(n);return Wo.transformDirection(r)});Ne(()=>(Ce('TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),dn)).once(["NORMAL","VERTEX"])();Ne(()=>(Ce('TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),Zh)).once(["NORMAL","VERTEX"])();Ne(()=>(Ce('TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),Rd)).once(["NORMAL","VERTEX"])();const sU=new is,$0=new sn,Efe=Lt(0).onReference(({material:n})=>n).onObjectUpdate(({material:n})=>n.refractionRatio),H0=Lt(1).onReference(({material:n})=>n).onObjectUpdate(function({material:n,scene:e}){return n.envMap?n.envMapIntensity:e.environmentIntensity}),f$=Lt(new sn).onReference(function(n){return n.material}).onObjectUpdate(function({material:n,scene:e}){const t=e.environment!==null&&n.envMap===null?e.environmentRotation:n.envMapRotation;return t?(sU.copy(t),$0.makeRotationFromEuler(sU)):$0.identity(),$0}),Tfe=Un.negate().reflect(dn),wfe=Un.negate().refract(dn,Efe),Afe=Tfe.transformDirection(Wo).toVar("reflectVector"),Rfe=wfe.transformDirection(Wo).toVar("reflectVector"),Nfe=new rm;class Cfe extends Yh{static get type(){return"CubeTextureNode"}constructor(e,t=null,r=null,i=null){super(e,t,r,i),this.isCubeTextureNode=!0}getInputType(){return this.value.isDepthTexture===!0?"cubeDepthTexture":"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===ya?Afe:e.mapping===Ka?Rfe:(Ie('CubeTextureNode: Mapping "%s" not supported.',e.mapping),we(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const r=this.value;return r.isDepthTexture===!0?e.renderer.coordinateSystem===Za?we(t.x,t.y.negate(),t.z):t:((e.renderer.coordinateSystem===Za||!r.isRenderTargetTexture)&&(t=we(t.x.negate(),t.yz)),f$.mul(t))}generateUV(e,t){return t.build(e,this.sampler===!0?"vec3":"ivec3")}}const Mfe=mn(Cfe).setParameterLength(1,4).setName("cubeTexture"),Ki=(n=Nfe,e=null,t=null,r=null)=>{let i;return n&&n.isCubeTextureNode===!0?(i=ut(n.clone()),i.referenceNode=n,e!==null&&(i.uvNode=ut(e)),t!==null&&(i.levelNode=ut(t)),r!==null&&(i.biasNode=ut(r))):i=Mfe(n,e,t,r),i};class Ife extends qh{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}class MI extends xt{static get type(){return"ReferenceNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.name=null,this.updateType=Xt.OBJECT}element(e){return new Ife(this,ut(e))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return Ce('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;this.count!==null?t=l$(null,e,this.count):Array.isArray(this.getValueFromReference())?t=ha(null,e):e==="texture"?t=Gn(null):e==="cubeTexture"?t=Ki(null):t=Lt(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.setName(this.name),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Cn=(n,e,t)=>new MI(n,e,t),aU=(n,e,t,r)=>new MI(n,e,r,t);class kfe extends MI{static get type(){return"MaterialReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.material=r,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const wl=(n,e,t=null)=>new kfe(n,e,t),g$=Xh(),Lfe=gr.dFdx(),Dfe=gr.dFdy(),m$=g$.dFdx(),y$=g$.dFdy(),b$=dn,_$=Dfe.cross(b$),v$=b$.cross(Lfe),ew=_$.mul(m$.x).add(v$.mul(y$.x)),tw=_$.mul(m$.y).add(v$.mul(y$.y)),oU=ew.dot(ew).max(tw.dot(tw)),x$=oU.equal(0).select(0,oU.inverseSqrt()),Ofe=ew.mul(x$).toVar("tangentViewFrame"),Pfe=tw.mul(x$).toVar("bitangentViewFrame"),S$=$l("tangent","vec4"),II=S$.xyz.toVar("tangentLocal"),E$=Ne(({subBuildFn:n,geometry:e,material:t})=>{let r;return n==="VERTEX"||e.hasAttribute("tangent")?r=dm.mul(Ht(II,0)).xyz.toVarying("v_tangentView").normalize():r=Ofe,t.flatShading!==!0&&(r=hm(r)),r},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),Ffe=Ne(([n,e],{subBuildFn:t,material:r})=>{let i=n.mul(S$.w).xyz;return t==="NORMAL"&&r.flatShading!==!0&&(i=i.toVarying(e)),i}).once(["NORMAL"]),Ufe=Ne(({subBuildFn:n,geometry:e,material:t})=>{let r;return n==="VERTEX"||e.hasAttribute("tangent")?r=Ffe(dn.cross(E$),"v_bitangentView").normalize():r=Pfe,t.flatShading!==!0&&(r=hm(r)),r},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),Tf=yi(E$,Ufe,dn).toVar("TBNViewMatrix"),Bfe=Ne(()=>{let n=Fd.cross(Un);return n=n.cross(Fd).normalize(),n=Mn(n,dn,Ru.mul(Co.oneMinus()).oneMinus().pow2().pow2()).normalize(),n}).once()(),zfe=n=>ut(n).mul(.5).add(.5),lU=n=>we(n,Do(EI(Te(1).sub(ac(n,n)))));class Gfe extends Ar{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Xa,this.unpackNormalMode=HS}setup({material:e}){const{normalMapType:t,scaleNode:r,unpackNormalMode:i}=this;let s=this.node.mul(2).sub(1);if(t===Xa?i===dV?s=lU(s.xy):i===Ete?s=lU(s.yw):i!==HS&&console.error(`THREE.NodeMaterial: Unexpected unpack normal mode: ${i}`):i!==HS&&console.error(`THREE.NodeMaterial: Normal map type '${t}' is not compatible with unpack normal mode '${i}'`),r!==null){let o=r;e.flatShading===!0&&(o=hm(o)),s=we(s.xy.mul(o),s.z)}let a=null;return t===cV?a=p$(s):t===Xa?a=Tf.mul(s).normalize():(Ie(`NodeMaterial: Unsupported normal map type: ${t}`),a=dn),a}}const uU=mn(Gfe).setParameterLength(1,2),Vfe=Ne(({textureNode:n,bumpScale:e})=>{const t=i=>n.isolate().context({getUV:s=>i(s.uvNode||Xh()),forceUVContext:!0}),r=Te(t(i=>i));return yt(Te(t(i=>i.add(i.dFdx()))).sub(r),Te(t(i=>i.add(i.dFdy()))).sub(r)).mul(e)}),$fe=Ne(n=>{const{surf_pos:e,surf_norm:t,dHdxy:r}=n,i=e.dFdx().normalize(),s=e.dFdy().normalize(),a=t,o=s.cross(a),l=a.cross(i),u=i.dot(o).mul(d$),c=u.sign().mul(r.x.mul(o).add(r.y.mul(l)));return u.abs().mul(t).sub(c).normalize()});class Hfe extends Ar{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=Vfe({textureNode:this.textureNode,bumpScale:e});return $fe({surf_pos:gr,surf_norm:dn,dHdxy:t})}}const jfe=mn(Hfe).setParameterLength(1,2),cU=new Map;class Re extends xt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let r=cU.get(e);return r===void 0&&(r=wl(e,t),cU.set(e,r)),r}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,r=this.scope;let i=null;if(r===Re.COLOR){const s=t.color!==void 0?this.getColor(r):we();t.map&&t.map.isTexture===!0?i=s.mul(this.getTexture("map")):i=s}else if(r===Re.OPACITY){const s=this.getFloat(r);t.alphaMap&&t.alphaMap.isTexture===!0?i=s.mul(this.getTexture("alpha")):i=s}else if(r===Re.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=Te(1);else if(r===Re.SPECULAR_INTENSITY){const s=this.getFloat(r);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s}else if(r===Re.SPECULAR_COLOR){const s=this.getColor(r);t.specularColorMap&&t.specularColorMap.isTexture===!0?i=s.mul(this.getTexture(r).rgb):i=s}else if(r===Re.ROUGHNESS){const s=this.getFloat(r);t.roughnessMap&&t.roughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).g):i=s}else if(r===Re.METALNESS){const s=this.getFloat(r);t.metalnessMap&&t.metalnessMap.isTexture===!0?i=s.mul(this.getTexture(r).b):i=s}else if(r===Re.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(r).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?i=a.mul(this.getTexture(r)):i=a}else if(r===Re.NORMAL)t.normalMap?(i=uU(this.getTexture("normal"),this.getCache("normalScale","vec2")),i.normalMapType=t.normalMapType,(t.normalMap.format==Di||t.normalMap.format==ec||t.normalMap.format==Ju)&&(i.unpackNormalMode=dV)):t.bumpMap?i=jfe(this.getTexture("bump").r,this.getFloat("bumpScale")):i=dn;else if(r===Re.CLEARCOAT){const s=this.getFloat(r);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===Re.CLEARCOAT_ROUGHNESS){const s=this.getFloat(r);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===Re.CLEARCOAT_NORMAL)t.clearcoatNormalMap?i=uU(this.getTexture(r),this.getCache(r+"Scale","vec2")):i=dn;else if(r===Re.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?i=s.mul(this.getTexture("sheenColor").rgb):i=s}else if(r===Re.SHEEN_ROUGHNESS){const s=this.getFloat(r);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s,i=i.clamp(1e-4,1)}else if(r===Re.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(r);i=bI(rf.x,rf.y,rf.y.negate(),rf.x).mul(s.rg.mul(2).sub(yt(1)).normalize().mul(s.b))}else i=rf;else if(r===Re.IRIDESCENCE_THICKNESS){const s=Cn("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const a=Cn("0","float",t.iridescenceThicknessRange);i=s.sub(a).mul(this.getTexture(r).g).add(a)}else i=s}else if(r===Re.TRANSMISSION){const s=this.getFloat(r);t.transmissionMap?i=s.mul(this.getTexture(r).r):i=s}else if(r===Re.THICKNESS){const s=this.getFloat(r);t.thicknessMap?i=s.mul(this.getTexture(r).g):i=s}else if(r===Re.IOR)i=this.getFloat(r);else if(r===Re.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===Re.AO)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(r===Re.LINE_DASH_OFFSET)i=t.dashOffset?this.getFloat(r):Te(0);else{const s=this.getNodeType(e);i=this.getCache(r,s)}return i}}Re.ALPHA_TEST="alphaTest";Re.COLOR="color";Re.OPACITY="opacity";Re.SHININESS="shininess";Re.SPECULAR="specular";Re.SPECULAR_STRENGTH="specularStrength";Re.SPECULAR_INTENSITY="specularIntensity";Re.SPECULAR_COLOR="specularColor";Re.REFLECTIVITY="reflectivity";Re.ROUGHNESS="roughness";Re.METALNESS="metalness";Re.NORMAL="normal";Re.CLEARCOAT="clearcoat";Re.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Re.CLEARCOAT_NORMAL="clearcoatNormal";Re.EMISSIVE="emissive";Re.ROTATION="rotation";Re.SHEEN="sheen";Re.SHEEN_ROUGHNESS="sheenRoughness";Re.ANISOTROPY="anisotropy";Re.IRIDESCENCE="iridescence";Re.IRIDESCENCE_IOR="iridescenceIOR";Re.IRIDESCENCE_THICKNESS="iridescenceThickness";Re.IOR="ior";Re.TRANSMISSION="transmission";Re.THICKNESS="thickness";Re.ATTENUATION_DISTANCE="attenuationDistance";Re.ATTENUATION_COLOR="attenuationColor";Re.LINE_SCALE="scale";Re.LINE_DASH_SIZE="dashSize";Re.LINE_GAP_SIZE="gapSize";Re.LINE_WIDTH="linewidth";Re.LINE_DASH_OFFSET="dashOffset";Re.POINT_SIZE="size";Re.DISPERSION="dispersion";Re.LIGHT_MAP="light";Re.AO="ao";const Wfe=Ke(Re,Re.ALPHA_TEST),qfe=Ke(Re,Re.COLOR),Xfe=Ke(Re,Re.SHININESS),Yfe=Ke(Re,Re.EMISSIVE),T$=Ke(Re,Re.OPACITY),Kfe=Ke(Re,Re.SPECULAR),dU=Ke(Re,Re.SPECULAR_INTENSITY),Zfe=Ke(Re,Re.SPECULAR_COLOR),Kb=Ke(Re,Re.SPECULAR_STRENGTH),j0=Ke(Re,Re.REFLECTIVITY),Qfe=Ke(Re,Re.ROUGHNESS),Jfe=Ke(Re,Re.METALNESS),ege=Ke(Re,Re.NORMAL),tge=Ke(Re,Re.CLEARCOAT),nge=Ke(Re,Re.CLEARCOAT_ROUGHNESS),rge=Ke(Re,Re.CLEARCOAT_NORMAL),ige=Ke(Re,Re.ROTATION),sge=Ke(Re,Re.SHEEN),age=Ke(Re,Re.SHEEN_ROUGHNESS),oge=Ke(Re,Re.ANISOTROPY),lge=Ke(Re,Re.IRIDESCENCE),uge=Ke(Re,Re.IRIDESCENCE_IOR),cge=Ke(Re,Re.IRIDESCENCE_THICKNESS),dge=Ke(Re,Re.TRANSMISSION),hge=Ke(Re,Re.THICKNESS),pge=Ke(Re,Re.IOR),fge=Ke(Re,Re.ATTENUATION_DISTANCE),gge=Ke(Re,Re.ATTENUATION_COLOR),mge=Ke(Re,Re.LINE_SCALE),yge=Ke(Re,Re.LINE_DASH_SIZE),bge=Ke(Re,Re.LINE_GAP_SIZE);Re.LINE_WIDTH;const _ge=Ke(Re,Re.LINE_DASH_OFFSET),vge=Ke(Re,Re.POINT_SIZE),xge=Ke(Re,Re.DISPERSION),w$=Ke(Re,Re.LIGHT_MAP),Sge=Ke(Re,Re.AO),rf=Lt(new $e).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))}),Ege=Ne(n=>n.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class Tge extends qh{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const r=this.storageBufferNode.structTypeNode;return r?r.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let r;const i=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&i!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?r=e.generatePBO(this):r=this.node.build(e):r=super.generate(e),i!==!0){const s=this.getNodeType(e);r=e.format(r,s,t)}return r}}const wge=mn(Tge).setParameterLength(2);class Age extends NI{static get type(){return"StorageBufferNode"}constructor(e,t=null,r=0){let i,s=null;t&&t.isStruct?(i="struct",s=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(r=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(i=b4(e.itemSize),r=e.count):i=t,super(e,i,r),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=zs.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return wge(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(zs.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=n$(this.value),this._varying=jo(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:r}=this.getAttributeData(),i=r.build(e);return e.registerTransform(i,t),i}}const hU=(n,e=null,t=0)=>new Age(n,e,t);class Kn extends xt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),r=this.scope;let i;if(r===Kn.VERTEX)i=e.getVertexIndex();else if(r===Kn.INSTANCE)i=e.getInstanceIndex();else if(r===Kn.DRAW)i=e.getDrawIndex();else if(r===Kn.INVOCATION_LOCAL)i=e.getInvocationLocalIndex();else if(r===Kn.INVOCATION_SUBGROUP)i=e.getInvocationSubgroupIndex();else if(r===Kn.SUBGROUP)i=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+r);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=i:s=jo(this).build(e,t),s}}Kn.VERTEX="vertex";Kn.INSTANCE="instance";Kn.SUBGROUP="subgroup";Kn.INVOCATION_LOCAL="invocationLocal";Kn.INVOCATION_SUBGROUP="invocationSubgroup";Kn.DRAW="draw";const Rge=Ke(Kn,Kn.VERTEX),Xf=Ke(Kn,Kn.INSTANCE);Kn.SUBGROUP;Kn.INVOCATION_SUBGROUP;Kn.INVOCATION_LOCAL;const Nge=Ke(Kn,Kn.DRAW);class Cge extends xt{static get type(){return"InstanceNode"}constructor(e,t,r=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=r,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Xt.FRAME,this.buffer=null,this.bufferColor=null}get isStorageMatrix(){const{instanceMatrix:e}=this;return e&&e.isStorageInstancedBufferAttribute===!0}get isStorageColor(){const{instanceColor:e}=this;return e&&e.isStorageInstancedBufferAttribute===!0}setup(e){const{instanceMatrix:t,instanceColor:r,isStorageMatrix:i,isStorageColor:s}=this,{count:a}=t;let{instanceMatrixNode:o,instanceColorNode:l}=this;if(o===null){if(i)o=hU(t,"mat4",Math.max(a,1)).element(Xf);else if(a<=1e3)o=l$(t.array,"mat4",Math.max(a,1)).element(Xf);else{const c=new hre(t.array,16,1);this.buffer=c;const h=t.usage===Td?eU:J2,f=[h(c,"vec4",16,0),h(c,"vec4",16,4),h(c,"vec4",16,8),h(c,"vec4",16,12)];o=ju(...f)}this.instanceMatrixNode=o}if(r&&l===null){if(s)l=hU(r,"vec3",Math.max(r.count,1)).element(Xf);else{const c=new Ene(r.array,3),h=r.usage===Td?eU:J2;this.bufferColor=c,l=we(h(c,"vec3",3,0))}this.instanceColorNode=l}const u=o.mul(Hr).xyz;if(Hr.assign(u),e.hasGeometryAttribute("normal")){const c=Sfe(eo,o);eo.assign(c)}this.instanceColorNode!==null&&v_("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.buffer!==null&&this.isStorageMatrix!==!0&&(this.buffer.clearUpdateRanges(),this.buffer.updateRanges.push(...this.instanceMatrix.updateRanges),this.instanceMatrix.usage!==Td&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version)),this.instanceColor&&this.bufferColor!==null&&this.isStorageColor!==!0&&(this.bufferColor.clearUpdateRanges(),this.bufferColor.updateRanges.push(...this.instanceColor.updateRanges),this.instanceColor.usage!==Td&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version))}}class Mge extends Cge{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:r,instanceColor:i}=e;super(t,r,i),this.instancedMesh=e}}const Ige=mn(Mge).setParameterLength(1);class kge extends xt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=Xf:this.batchingIdNode=Nge);const r=Ne(([m])=>{const v=zn(qu(Ps(this.batchMesh._indirectTexture),0).x).toConst(),_=zn(m).mod(v).toConst(),b=zn(m).div(v).toConst();return Ps(this.batchMesh._indirectTexture,Fa(_,b)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(zn(this.batchingIdNode)),i=this.batchMesh._matricesTexture,s=zn(qu(Ps(i),0).x).toConst(),a=Te(r).mul(4).toInt().toConst(),o=a.mod(s).toConst(),l=a.div(s).toConst(),u=ju(Ps(i,Fa(o,l)),Ps(i,Fa(o.add(1),l)),Ps(i,Fa(o.add(2),l)),Ps(i,Fa(o.add(3),l))),c=this.batchMesh._colorsTexture;if(c!==null){const v=Ne(([_])=>{const b=zn(qu(Ps(c),0).x).toConst(),S=_,E=S.mod(b).toConst(),A=S.div(b).toConst();return Ps(c,Fa(E,A)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(r);v_("vec3","vBatchColor").assign(v)}const h=yi(u);Hr.assign(u.mul(Hr));const f=eo.div(we(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),g=h.mul(f).xyz;eo.assign(g),e.hasGeometryAttribute("tangent")&&II.mulAssign(h)}}const Lge=mn(kge).setParameterLength(1),pU=new WeakMap;class Dge extends xt{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=Xt.OBJECT,this.skinIndexNode=$l("skinIndex","uvec4"),this.skinWeightNode=$l("skinWeight","vec4"),this.bindMatrixNode=Cn("bindMatrix","mat4"),this.bindMatrixInverseNode=Cn("bindMatrixInverse","mat4"),this.boneMatricesNode=aU("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Hr,this.toPositionNode=Hr,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(r.x),l=e.element(r.y),u=e.element(r.z),c=e.element(r.w),h=s.mul(t),f=ss(o.mul(i.x).mul(h),l.mul(i.y).mul(h),u.mul(i.z).mul(h),c.mul(i.w).mul(h));return a.mul(f).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=eo){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(r.x),l=e.element(r.y),u=e.element(r.z),c=e.element(r.w);let h=ss(i.x.mul(o),i.y.mul(l),i.z.mul(u),i.w.mul(c));return h=a.mul(h).mul(s),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=aU("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,iU)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||_4(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&iU.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const r=this.getSkinnedNormal();eo.assign(r),e.hasGeometryAttribute("tangent")&&II.assign(r)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;pU.get(t)!==e.frameId&&(pU.set(t,e.frameId),this.previousBoneMatricesNode!==null&&(t.previousBoneMatrices===null&&(t.previousBoneMatrices=new Float32Array(t.boneMatrices)),t.previousBoneMatrices.set(t.boneMatrices)),t.update())}}const Oge=n=>new Dge(n);class Pge extends xt{static get type(){return"LoopNode"}constructor(e=[]){super("void"),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const r={};for(let o=0,l=this.params.length-1;o<l;o++){const u=this.params[o],c=u.isNode!==!0&&u.name||this.getVarName(o),h=u.isNode!==!0&&u.type||"int";r[c]=Sh(c,h)}const i=e.addStack(),s=this.params[this.params.length-1](r);t.returnsNode=s.context({nodeLoop:s}),t.stackNode=i;const a=this.params[0];if(a.isNode!==!0&&typeof a.update=="function"){const o=Ne(this.params[0].update)(r);t.updateNode=o.context({nodeLoop:o})}return e.removeStack(),t}setup(e){if(this.getProperties(e),e.fnCall){const t=e.getDataFromNode(e.fnCall.shaderNode);t.hasLoop=!0}}generate(e){const t=this.getProperties(e),r=this.params,i=t.stackNode;for(let a=0,o=r.length-1;a<o;a++){const l=r[a];let u=!1,c=null,h=null,f=null,g=null,m=null,v=null;l.isNode?l.getNodeType(e)==="bool"?(u=!0,g="bool",h=l.build(e,g)):(g="int",f=this.getVarName(a),c="0",h=l.build(e,g),m="<"):(g=l.type||"int",f=l.name||this.getVarName(a),c=l.start,h=l.end,m=l.condition,v=l.update,typeof c=="number"?c=e.generateConst(g,c):c&&c.isNode&&(c=c.build(e,g)),typeof h=="number"?h=e.generateConst(g,h):h&&h.isNode&&(h=h.build(e,g)),c!==void 0&&h===void 0?(c=c+" - 1",h="0",m=">="):h!==void 0&&c===void 0&&(c="0",m="<"),m===void 0&&(Number(c)>Number(h)?m=">=":m="<"));let _;if(u)_=`while ( ${h} )`;else{const b={start:c,end:h},S=b.start,E=b.end;let A;const R=()=>m.includes("<")?"+=":"-=";if(v!=null)switch(typeof v){case"function":A=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":A=f+" "+R()+" "+e.generateConst(g,v);break;case"string":A=f+" "+v;break;default:v.isNode?A=f+" "+R()+" "+v.build(e):(Ie("TSL: 'Loop( { update: ... } )' is not a function, string or number."),A="break /* invalid update */")}else g==="int"||g==="uint"?v=m.includes("<")?"++":"--":v=R()+" 1.",A=f+" "+v;const w=e.getVar(g,f)+" = "+S,M=f+" "+m+" "+E;_=`for ( ${w}; ${M}; ${A} )`}e.addFlowCode((a===0?`
`:"")+e.tab+_+` {

`).addFlowTab()}const s=i.build(e,"void");t.returnsNode.build(e,"void"),e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,o=this.params.length-1;a<o;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();e.addFlowTab()}}const Us=(...n)=>new Pge(Pd(n,"int")).toStack(),Fge=()=>Sh("break").toStack(),W0=new WeakMap,ms=new Wt,fU=Ne(({bufferMap:n,influence:e,stride:t,width:r,depth:i,offset:s})=>{const a=zn(Rge).mul(t).add(s),o=a.div(r),l=a.sub(o.mul(r));return Ps(n,Fa(l,o)).depth(i).xyz.mul(e)});function Uge(n){const e=n.morphAttributes.position!==void 0,t=n.morphAttributes.normal!==void 0,r=n.morphAttributes.color!==void 0,i=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=i!==void 0?i.length:0;let a=W0.get(n);if(a===void 0||a.count!==s){let b=function(){v.dispose(),W0.delete(n),n.removeEventListener("dispose",b)};a!==void 0&&a.texture.dispose();const o=n.morphAttributes.position||[],l=n.morphAttributes.normal||[],u=n.morphAttributes.color||[];let c=0;e===!0&&(c=1),t===!0&&(c=2),r===!0&&(c=3);let h=n.attributes.position.count*c,f=1;const g=4096;h>g&&(f=Math.ceil(h/g),h=g);const m=new Float32Array(h*f*4*s),v=new H1(m,h,f,s);v.type=hr,v.needsUpdate=!0;const _=c*4;for(let S=0;S<s;S++){const E=o[S],A=l[S],R=u[S],w=h*f*4*S;for(let M=0;M<E.count;M++){const I=M*_;e===!0&&(ms.fromBufferAttribute(E,M),m[w+I+0]=ms.x,m[w+I+1]=ms.y,m[w+I+2]=ms.z,m[w+I+3]=0),t===!0&&(ms.fromBufferAttribute(A,M),m[w+I+4]=ms.x,m[w+I+5]=ms.y,m[w+I+6]=ms.z,m[w+I+7]=0),r===!0&&(ms.fromBufferAttribute(R,M),m[w+I+8]=ms.x,m[w+I+9]=ms.y,m[w+I+10]=ms.z,m[w+I+11]=R.itemSize===4?ms.w:1)}}a={count:s,texture:v,stride:c,size:new $e(h,f)},W0.set(n,a),n.addEventListener("dispose",b)}return a}class Bge extends xt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Lt(1),this.updateType=Xt.OBJECT}setup(e){const{geometry:t}=e,r=t.morphAttributes.position!==void 0,i=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=s!==void 0?s.length:0,{texture:o,stride:l,size:u}=Uge(t);r===!0&&Hr.mulAssign(this.morphBaseInfluence),i===!0&&eo.mulAssign(this.morphBaseInfluence);const c=zn(u.width);Us(a,({i:h})=>{const f=Te(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?f.assign(Ps(this.mesh.morphTexture,Fa(zn(h).add(1),zn(Xf))).r):f.assign(Cn("morphTargetInfluences","float").element(h).toVar()),In(f.notEqual(0),()=>{r===!0&&Hr.addAssign(fU({bufferMap:o,influence:f,stride:l,width:c,depth:h,offset:zn(0)})),i===!0&&eo.addAssign(fU({bufferMap:o,influence:f,stride:l,width:c,depth:h,offset:zn(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,r)=>t+r,0)}}const zge=mn(Bge).setParameterLength(1);class Qh extends xt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class Gge extends Qh{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class Vge extends Q4{static get type(){return"LightingContextNode"}constructor(e,t=null,r=null,i=null){super(e),this.lightingModel=t,this.backdropNode=r,this.backdropAlphaNode=i,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,r=we().toVar("directDiffuse"),i=we().toVar("directSpecular"),s=we().toVar("indirectDiffuse"),a=we().toVar("indirectSpecular"),o={directDiffuse:r,directSpecular:i,indirectDiffuse:s,indirectSpecular:a};return{radiance:we().toVar("radiance"),irradiance:we().toVar("irradiance"),iblIrradiance:we().toVar("iblIrradiance"),ambientOcclusion:Te(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const $ge=mn(Vge);class Hge extends Qh{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}const od=new $e;class A$ extends Yh{static get type(){return"ViewportTextureNode"}constructor(e=Ud,t=null,r=null){let i=null;r===null?(i=new _V,i.minFilter=Ji,r=i):i=r,super(r,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=i,this.isOutputTextureNode=!0,this.updateBeforeType=Xt.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let t,r;if(this.referenceNode?(t=this.referenceNode.defaultFramebuffer,r=this.referenceNode._cacheTextures):(t=this.defaultFramebuffer,r=this._cacheTextures),e===null)return t;if(r.has(e)===!1){const i=t.clone();r.set(e,i)}return r.get(e)}updateReference(e){const t=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(t),this.value}updateBefore(e){const t=e.renderer,r=t.getRenderTarget();r===null?t.getDrawingBufferSize(od):od.set(r.width,r.height);const i=this.getTextureForReference(r);(i.image.width!==od.width||i.image.height!==od.height)&&(i.image.width=od.width,i.image.height=od.height,i.needsUpdate=!0);const s=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const R$=mn(A$,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let db=null;class jge extends A${static get type(){return"ViewportDepthTextureNode"}constructor(e=Ud,t=null){db===null&&(db=new Fi),super(e,t,db)}getTextureForReference(){return db}}const Wge=mn(jge).setParameterLength(0,2);class ts extends xt{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===ts.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,r=this.valueNode;let i=null;if(t===ts.DEPTH_BASE)r!==null&&(i=M$().assign(r));else if(t===ts.DEPTH)e.isPerspectiveCamera?i=qge(gr.z,Iu,ku):i=Yf(gr.z,Iu,ku);else if(t===ts.LINEAR_DEPTH)if(r!==null)if(e.isPerspectiveCamera){const s=N$(r,Iu,ku);i=Yf(s,Iu,ku)}else i=r;else i=Yf(gr.z,Iu,ku);return i}}ts.DEPTH_BASE="depthBase";ts.DEPTH="depth";ts.LINEAR_DEPTH="linearDepth";const Yf=(n,e,t)=>n.add(e).div(e.sub(t)),qge=(n,e,t)=>e.add(n).mul(t).div(t.sub(e).mul(n)),N$=(n,e,t)=>e.mul(t).div(t.sub(e).mul(n).sub(t)),C$=(n,e,t)=>{e=e.max(1e-6).toVar();const r=Bo(n.negate().div(e)),i=Bo(t.div(e));return r.div(i)},M$=mn(ts,ts.DEPTH_BASE),I$=Ke(ts,ts.DEPTH),Xge=mn(ts,ts.LINEAR_DEPTH).setParameterLength(0,1);Wge();I$.assign=n=>M$(n);class $s extends xt{static get type(){return"ClippingNode"}constructor(e=$s.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:r,unionPlanes:i}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===$s.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(r,i):this.scope===$s.HARDWARE?this.setupHardwareClipping(i,e):this.setupDefault(r,i)}setupAlphaToCoverage(e,t){return Ne(()=>{const r=Te().toVar("distanceToPlane"),i=Te().toVar("distanceToGradient"),s=Te(1).toVar("clipOpacity"),a=t.length;if(this.hardwareClipping===!1&&a>0){const l=ha(t).setGroup(Ct);Us(a,({i:u})=>{const c=l.element(u);r.assign(gr.dot(c.xyz).negate().add(c.w)),i.assign(r.fwidth().div(2)),s.mulAssign($o(i.negate(),i,r))})}const o=e.length;if(o>0){const l=ha(e).setGroup(Ct),u=Te(1).toVar("intersectionClipOpacity");Us(o,({i:c})=>{const h=l.element(c);r.assign(gr.dot(h.xyz).negate().add(h.w)),i.assign(r.fwidth().div(2)),u.mulAssign($o(i.negate(),i,r).oneMinus())}),s.mulAssign(u.oneMinus())}wn.a.mulAssign(s),wn.a.equal(0).discard()})()}setupDefault(e,t){return Ne(()=>{const r=t.length;if(this.hardwareClipping===!1&&r>0){const s=ha(t).setGroup(Ct);Us(r,({i:a})=>{const o=s.element(a);gr.dot(o.xyz).greaterThan(o.w).discard()})}const i=e.length;if(i>0){const s=ha(e).setGroup(Ct),a=yI(!0).toVar("clipped");Us(i,({i:o})=>{const l=s.element(o);a.assign(gr.dot(l.xyz).greaterThan(l.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,t){const r=e.length;return t.enableHardwareClipping(r),Ne(()=>{const i=ha(e).setGroup(Ct),s=cm(t.getClipDistance());Us(r,({i:a})=>{const o=i.element(a),l=gr.dot(o.xyz).sub(o.w).negate();s.element(a).assign(l)})})()}}$s.ALPHA_TO_COVERAGE="alphaToCoverage";$s.DEFAULT="default";$s.HARDWARE="hardware";const Yge=()=>new $s,Kge=()=>new $s($s.ALPHA_TO_COVERAGE),Zge=()=>new $s($s.HARDWARE),Qge=.05,gU=Ne(([n])=>Ja(Yt(1e4,_s(Yt(17,n.x).add(Yt(.1,n.y)))).mul(ss(.1,vs(_s(Yt(13,n.y).add(n.x))))))),mU=Ne(([n])=>gU(yt(gU(n.xy),n.z))),Jge=Ne(([n])=>{const e=ti(zo(H4(n.xyz)),zo(j4(n.xyz))),t=Te(1).div(Te(Qge).mul(e)).toVar("pixScale"),r=yt(Rg(Wu(Bo(t))),Rg(SI(Bo(t)))),i=yt(mU(Wu(r.x.mul(n.xyz))),mU(Wu(r.y.mul(n.xyz)))),s=Ja(Bo(t)),a=ss(Yt(s.oneMinus(),i.x),Yt(s,i.y)),o=xh(s,s.oneMinus()),l=we(a.mul(a).div(Yt(2,o).mul(Xi(1,o))),a.sub(Yt(.5,o)).div(Xi(1,o)),Xi(1,Xi(1,a).mul(Xi(1,a)).div(Yt(2,o).mul(Xi(1,o))))),u=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(l.x,l.y),l.z);return Vl(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class eme extends a${static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),r=e.hasGeometryAttribute(t);let i;return r===!0?i=super.generate(e):i=e.generateConst(this.nodeType,new Wt(1,1,1,1)),i}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const tme=(n=0)=>new eme(n),nme=Ne(([n])=>Ht(n.rgb.mul(n.a),n.a),{color:"vec4",return:"vec4"});class mr extends mi{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,this.contextNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{Ce('NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}_getNodeChildren(){const e=[];for(const t of Object.getOwnPropertyNames(this)){if(t.startsWith("_")===!0)continue;const r=this[t];r&&r.isNode===!0&&e.push({property:t,childNode:r})}return e}customProgramCacheKey(){const e=[];for(const{property:t,childNode:r}of this._getNodeChildren())e.push(pv(t.slice(0,-4)),r.getCacheKey());return this.type+lm(e)}build(e){this.setup(e)}setupObserver(e){return new zde(e)}setup(e){e.context.setupNormal=()=>jf(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,r=t.getRenderTarget();t.contextNode.isContextNode===!0?e.context={...e.context,...t.contextNode.getFlowContextData()}:Ie('NodeMaterial: "renderer.contextNode" must be an instance of `context()`.'),this.contextNode!==null&&(this.contextNode.isContextNode===!0?e.context={...e.context,...this.contextNode.getFlowContextData()}:Ie('NodeMaterial: "material.contextNode" must be an instance of `context()`.')),e.addStack();const i=jf(this.setupVertex(e),"VERTEX"),s=this.vertexNode||i;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(r!==null?r.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.addToStack(o);const u=Ht(l,wn.a).max(0);a=this.setupOutput(e,u),Hf.assign(a);const c=this.outputNode!==null;if(c&&(a=this.outputNode),e.context.getOutput&&(a=e.context.getOutput(a,e)),r!==null){const h=t.getMRT(),f=this.mrtNode;h!==null?(c&&Hf.assign(a),a=h,f!==null&&(a=h.merge(f))):f!==null&&(a=f)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=Ht(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:r}=e.clippingContext;let i=null;if(t.length>0||r.length>0){const s=e.renderer.currentSamples;this.alphaToCoverage&&s>1?i=Kge():e.stack.addToStack(Yge())}return i}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.addToStack(Zge()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:r}=e;let i=this.depthNode;if(i===null){const s=t.getMRT();s&&s.has("depth")?i=s.get("depth"):t.logarithmicDepthBuffer===!0&&(r.isPerspectiveCamera?i=C$(gr.z,Iu,ku):i=Yf(gr.z,Iu,ku))}i!==null&&I$.assign(i).toStack()}setupPositionView(){return dm.mul(Hr).xyz}setupModelViewProjection(){return qf.mul(gr)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),Ege}setupPosition(e){const{object:t,geometry:r}=e;if((r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&zge(t).toStack(),t.isSkinnedMesh===!0&&Oge(t).toStack(),this.displacementMap){const i=wl("displacementMap","texture"),s=wl("displacementScale","float"),a=wl("displacementBias","float");Hr.addAssign(eo.normalize().mul(i.x.mul(s).add(a)))}return t.isBatchedMesh&&Lge(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&Ige(t).toStack(),this.positionNode!==null&&Hr.assign(jf(this.positionNode,"POSITION","vec3")),Hr}setupDiffuseColor(e){const{object:t,geometry:r}=e;this.maskNode!==null&&yI(this.maskNode).not().discard();let i=this.colorNode?Ht(this.colorNode):qfe;this.vertexColors===!0&&r.hasAttribute("color")&&(i=i.mul(tme())),t.instanceColor&&(i=v_("vec3","vInstanceColor").mul(i)),t.isBatchedMesh&&t._colorsTexture&&(i=v_("vec3","vBatchColor").mul(i)),wn.assign(i);const s=this.opacityNode?Te(this.opacityNode):T$;wn.a.assign(wn.a.mul(s));let a=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(a=this.alphaTestNode!==null?Te(this.alphaTestNode):Wfe,this.alphaToCoverage===!0?(wn.a=$o(a,a.add(W4(wn.a)),wn.a),wn.a.lessThanEqual(0).discard()):wn.a.lessThanEqual(a).discard()),this.alphaHash===!0&&wn.a.lessThan(Jge(Hr)).discard(),e.isOpaque()&&wn.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?we(0):wn.rgb}setupNormal(){return this.normalNode?we(this.normalNode):ege}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?wl("envMap","cubeTexture"):wl("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Hge(w$)),t}setupLights(e){const t=[],r=this.setupEnvironment(e);r&&r.isLightingNode&&t.push(r);const i=this.setupLightMap(e);i&&i.isLightingNode&&t.push(i);let s=this.aoNode;s===null&&e.material.aoMap&&(s=Sge),e.context.getAO&&(s=e.context.getAO(s,e)),s&&t.push(new Gge(s));let a=this.lightsNode||e.lightsNode;return t.length>0&&(a=e.renderer.lighting.createNode([...a.getLights(),...t])),a}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:r,backdropAlphaNode:i,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const u=this.setupLightingModel(e)||null;l=$ge(o,u,r,i)}else r!==null&&(l=we(i!==null?Mn(l,r,i):r));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(X2.assign(we(s||Yfe)),l=l.add(X2)),l}setupFog(e,t){const r=e.fogNode;return r&&(Hf.assign(t),t=Ht(r.toVar())),t}setupPremultipliedAlpha(e,t){return nme(t)}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),this.premultipliedAlpha===!0&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(const r in e){const i=e[r];this[r]===void 0&&(this[r]=i,i&&i.clone&&(this[r]=i.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const r in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,r)===void 0&&t[r].get!==void 0&&Object.defineProperty(this.constructor.prototype,r,t[r])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const r=mi.prototype.toJSON.call(this,e);r.inputNodes={};for(const{property:s,childNode:a}of this._getNodeChildren())r.inputNodes[s]=a.toJSON(e).uuid;function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images),o=i(e.nodes);s.length>0&&(r.textures=s),a.length>0&&(r.images=a),o.length>0&&(r.nodes=o)}return r}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.aoNode=e.aoNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,this.contextNode=e.contextNode,super.copy(e)}}const rme=new iv;class ime extends mr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(rme),this.setValues(e)}}const sme=new Jne;class ame extends mr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(sme),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?Te(this.offsetNode):_ge,t=this.dashScaleNode?Te(this.dashScaleNode):mge,r=this.dashSizeNode?Te(this.dashSizeNode):yge,i=this.gapSizeNode?Te(this.gapSizeNode):bge;V0.assign(r),Y2.assign(i);const s=jo($l("lineDistance").mul(t));(e?s.add(e):s).mod(V0.add(Y2)).greaterThan(V0).discard()}}const ome=new Yne;class lme extends mr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(ome),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Te(this.opacityNode):T$;wn.assign(AI(Ht(zfe(dn),e),Ci))}}const k$=Ne(([n=c$])=>{const e=n.z.atan(n.x).mul(1/(Math.PI*2)).add(.5),t=n.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return yt(e,t)});class L$ extends Y1{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const r=t.minFilter,i=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new fc(5,5,5),a=k$(c$),o=new mr;o.colorNode=Gn(t,a,0),o.side=On,o.blending=Pi;const l=new wr(s,o),u=new rv;u.add(l),t.minFilter===Ji&&(t.minFilter=Vn);const c=new yV(1,10,this),h=e.getMRT();return e.setMRT(null),c.update(e,u),e.setMRT(h),t.minFilter=r,t.currentGenerateMipmaps=i,l.geometry.dispose(),l.material.dispose(),this}}const Kf=new WeakMap;class ume extends Ar{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Ki(null);const t=new rm;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Xt.RENDER}updateBefore(e){const{renderer:t,material:r}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const s=i.isTextureNode?i.value:r[i.property];if(s&&s.isTexture){const a=s.mapping;if(a===Hd||a===jd){if(Kf.has(s)){const o=Kf.get(s);yU(o,s.mapping),this._cubeTexture=o}else{const o=s.image;if(cme(o)){const l=new L$(o.height);l.fromEquirectangularTexture(t,s),yU(l.texture,s.mapping),this._cubeTexture=l.texture,Kf.set(s,l.texture),s.addEventListener("dispose",D$)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function cme(n){return n==null?!1:n.height>0}function D$(n){const e=n.target;e.removeEventListener("dispose",D$);const t=Kf.get(e);t!==void 0&&(Kf.delete(e),t.dispose())}function yU(n,e){e===Hd?n.mapping=ya:e===jd&&(n.mapping=Ka)}const O$=mn(ume).setParameterLength(1);class kI extends Qh{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=O$(this.envNode)}}class dme extends Qh{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=Te(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class bv{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class P$ extends bv{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,r=e.reflectedLight,i=e.irradianceLightMap;r.indirectDiffuse.assign(Ht(0)),i?r.indirectDiffuse.addAssign(i):r.indirectDiffuse.addAssign(Ht(1,1,1,0)),r.indirectDiffuse.mulAssign(t),r.indirectDiffuse.mulAssign(wn.rgb)}finish(e){const{material:t,context:r}=e,i=r.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case Kg:i.rgb.assign(Mn(i.rgb,i.rgb.mul(s.rgb),Kb.mul(j0)));break;case oV:i.rgb.assign(Mn(i.rgb,s.rgb,Kb.mul(j0)));break;case lV:i.rgb.addAssign(s.rgb.mul(Kb.mul(j0)));break;default:Ce("BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const hme=new za;class pme extends mr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(hme),this.setValues(e)}setupNormal(){return hm(Ng)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kI(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new dme(w$)),t}setupOutgoingLight(){return wn.rgb}setupLightingModel(){return new P$}}const Cg=Ne(({f0:n,f90:e,dotVH:t})=>{const r=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return n.mul(r.oneMinus()).add(e.mul(r))}),Th=Ne(n=>n.diffuseColor.mul(1/Math.PI)),fme=()=>Te(.25),gme=Ne(({dotNH:n})=>ZT.mul(Te(.5)).add(1).mul(Te(1/Math.PI)).mul(n.pow(ZT))),mme=Ne(({lightDirection:n})=>{const e=n.add(Un).normalize(),t=dn.dot(e).clamp(),r=Un.dot(e).clamp(),i=Cg({f0:sc,f90:1,dotVH:r}),s=fme(),a=gme({dotNH:t});return i.mul(s).mul(a)});class F$ extends P${constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=dn.dot(e).clamp().mul(t);r.directDiffuse.addAssign(s.mul(Th({diffuseColor:wn.rgb}))),this.specular===!0&&r.directSpecular.addAssign(s.mul(mme({lightDirection:e})).mul(Kb))}indirect(e){const{ambientOcclusion:t,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(Th({diffuseColor:wn}))),i.indirectDiffuse.mulAssign(t)}}const yme=new wV;class bme extends mr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(yme),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kI(t):null}setupLightingModel(){return new F$(!1)}}const _me=new qne;class vme extends mr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(_me),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kI(t):null}setupLightingModel(){return new F$}setupVariants(){const e=(this.shininessNode?Te(this.shininessNode):Xfe).max(1e-4);ZT.assign(e);const t=this.specularNode||Kfe;sc.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const xme=Ne(n=>{if(n.geometry.hasAttribute("normal")===!1)return Te(0);const e=Ng.dFdx().abs().max(Ng.dFdy().abs());return e.x.max(e.y).max(e.z)}),U$=Ne(n=>{const{roughness:e}=n,t=xme();let r=e.max(.0525);return r=r.add(t),r=r.min(1),r}),Sme=Ne(({alpha:n,dotNL:e,dotNV:t})=>{const r=n.pow2(),i=e.mul(r.add(r.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(r.add(r.oneMinus().mul(e.pow2())).sqrt());return Qa(.5,i.add(s).max(F4))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),Eme=Ne(({alphaT:n,alphaB:e,dotTV:t,dotBV:r,dotTL:i,dotBL:s,dotNV:a,dotNL:o})=>{const l=o.mul(we(n.mul(t),e.mul(r),a).length()),u=a.mul(we(n.mul(i),e.mul(s),o).length());return Qa(.5,l.add(u))}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),Tme=Ne(({alpha:n,dotNH:e})=>{const t=n.pow2(),r=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(r.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),wme=Te(1/Math.PI),Ame=Ne(({alphaT:n,alphaB:e,dotNH:t,dotTH:r,dotBH:i})=>{const s=n.mul(e),a=we(e.mul(r),n.mul(i),s.mul(t)),o=a.dot(a),l=s.div(o);return wme.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),B$=Ne(({lightDirection:n,f0:e,f90:t,roughness:r,f:i,normalView:s=dn,USE_IRIDESCENCE:a,USE_ANISOTROPY:o})=>{const l=r.pow2(),u=n.add(Un).normalize(),c=s.dot(n).clamp(),h=s.dot(Un).clamp(),f=s.dot(u).clamp(),g=Un.dot(u).clamp();let m=Cg({f0:e,f90:t,dotVH:g}),v,_;if(q2(a)&&(m=_I.mix(m,i)),q2(o)){const b=Wb.dot(n),S=Wb.dot(Un),E=Wb.dot(u),A=Fd.dot(n),R=Fd.dot(Un),w=Fd.dot(u);v=Eme({alphaT:KT,alphaB:l,dotTV:S,dotBV:R,dotTL:b,dotBL:A,dotNV:h,dotNL:c}),_=Ame({alphaT:KT,alphaB:l,dotNH:f,dotTH:E,dotBH:w})}else v=Sme({alpha:l,dotNL:c,dotNV:h}),_=Tme({alpha:l,dotNH:f});return m.mul(v).mul(_)}),Rme=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let ka=null;const S_=Ne(({roughness:n,dotNV:e})=>{ka===null&&(ka=new Z1(Rme,16,16,Di,tr),ka.name="DFG_LUT",ka.minFilter=Vn,ka.magFilter=Vn,ka.wrapS=Qi,ka.wrapT=Qi,ka.generateMipmaps=!1,ka.needsUpdate=!0);const t=yt(n,e);return Gn(ka,t).rg}),Nme=Ne(({lightDirection:n,f0:e,f90:t,roughness:r,f:i,USE_IRIDESCENCE:s,USE_ANISOTROPY:a})=>{const o=B$({lightDirection:n,f0:e,f90:t,roughness:r,f:i,USE_IRIDESCENCE:s,USE_ANISOTROPY:a}),l=dn.dot(n).clamp(),u=dn.dot(Un).clamp(),c=S_({roughness:r,dotNV:u}),h=S_({roughness:r,dotNV:l}),f=e.mul(c.x).add(t.mul(c.y)),g=e.mul(h.x).add(t.mul(h.y)),m=c.x.add(c.y),v=h.x.add(h.y),_=Te(1).sub(m),b=Te(1).sub(v),S=e.add(e.oneMinus().mul(.047619)),E=f.mul(g).mul(S).div(Te(1).sub(_.mul(b).mul(S).mul(S)).add(F4)),A=_.mul(b),R=E.mul(A);return o.add(R)}),z$=Ne(n=>{const{dotNV:e,specularColor:t,specularF90:r,roughness:i}=n,s=S_({dotNV:e,roughness:i});return t.mul(s.x).add(r.mul(s.y))}),bU=Ne(({f:n,f90:e,dotVH:t})=>{const r=t.oneMinus().saturate(),i=r.mul(r),s=r.mul(i,i).clamp(0,.9999);return n.sub(we(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Cme=Ne(({roughness:n,dotNH:e})=>{const t=n.pow2(),r=Te(1).div(t),s=e.pow2().oneMinus().max(.0078125);return Te(2).add(r).mul(s.pow(r.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),Mme=Ne(({dotNV:n,dotNL:e})=>Te(1).div(Te(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),Ime=Ne(({lightDirection:n})=>{const e=n.add(Un).normalize(),t=dn.dot(n).clamp(),r=dn.dot(Un).clamp(),i=dn.dot(e).clamp(),s=Cme({roughness:Mu,dotNH:i}),a=Mme({dotNV:r,dotNL:t});return Os.mul(s).mul(a)}),kme=Ne(({N:n,V:e,roughness:t})=>{const s=.0078125,a=n.dot(e).saturate(),o=yt(t,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(s)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Lme=Ne(({f:n})=>{const e=n.length();return ti(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),hb=Ne(({v1:n,v2:e})=>{const t=n.dot(e),r=t.abs().toVar(),i=r.mul(.0145206).add(.4965155).mul(r).add(.8543985).toVar(),s=r.add(4.1616724).mul(r).add(3.417594).toVar(),a=i.div(s),o=t.greaterThan(0).select(a,ti(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return n.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),_U=Ne(({N:n,V:e,P:t,mInv:r,p0:i,p1:s,p2:a,p3:o})=>{const l=s.sub(i).toVar(),u=o.sub(i).toVar(),c=l.cross(u),h=we().toVar();return In(c.dot(t.sub(i)).greaterThanEqual(0),()=>{const f=e.sub(n.mul(e.dot(n))).normalize(),g=n.cross(f).negate(),m=r.mul(yi(f,g,n).transpose()).toVar(),v=m.mul(i.sub(t)).normalize().toVar(),_=m.mul(s.sub(t)).normalize().toVar(),b=m.mul(a.sub(t)).normalize().toVar(),S=m.mul(o.sub(t)).normalize().toVar(),E=we(0).toVar();E.addAssign(hb({v1:v,v2:_})),E.addAssign(hb({v1:_,v2:b})),E.addAssign(hb({v1:b,v2:S})),E.addAssign(hb({v1:S,v2:v})),h.assign(we(Lme({f:E})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),_v=1/6,G$=n=>Yt(_v,Yt(n,Yt(n,n.negate().add(3)).sub(3)).add(1)),nw=n=>Yt(_v,Yt(n,Yt(n,Yt(3,n).sub(6))).add(4)),V$=n=>Yt(_v,Yt(n,Yt(n,Yt(-3,n).add(3)).add(3)).add(1)),rw=n=>Yt(_v,mv(n,3)),vU=n=>G$(n).add(nw(n)),xU=n=>V$(n).add(rw(n)),SU=n=>ss(-1,nw(n).div(G$(n).add(nw(n)))),EU=n=>ss(1,rw(n).div(V$(n).add(rw(n)))),TU=(n,e,t)=>{const r=n.uvNode,i=Yt(r,e.zw).add(.5),s=Wu(i),a=Ja(i),o=vU(a.x),l=xU(a.x),u=SU(a.x),c=EU(a.x),h=SU(a.y),f=EU(a.y),g=yt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),m=yt(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),v=yt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),_=yt(s.x.add(c),s.y.add(f)).sub(.5).mul(e.xy),b=vU(a.y).mul(ss(o.mul(n.sample(g).level(t)),l.mul(n.sample(m).level(t)))),S=xU(a.y).mul(ss(o.mul(n.sample(v).level(t)),l.mul(n.sample(_).level(t))));return b.add(S)},Dme=Ne(([n,e])=>{const t=yt(n.size(zn(e))),r=yt(n.size(zn(e.add(1)))),i=Qa(1,t),s=Qa(1,r),a=TU(n,Ht(i,t),Wu(e)),o=TU(n,Ht(s,r),SI(e));return Ja(e).mix(a,o)}),wU=Ne(([n,e,t,r,i])=>{const s=we(Z4(e.negate(),ma(n),Qa(1,r))),a=we(zo(i[0].xyz),zo(i[1].xyz),zo(i[2].xyz));return ma(s).mul(t.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),Ome=Ne(([n,e])=>n.mul(Vl(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),Pme=R$(),Fme=R$(),AU=Ne(([n,e,t],{material:r})=>{const s=(r.side===On?Pme:Fme).sample(n),a=Bo(JT.x).mul(Ome(e,t));return Dme(s,a)}),RU=Ne(([n,e,t])=>(In(t.notEqual(0),()=>{const r=B4(e).negate().div(t);return U4(r.negate().mul(n))}),we(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),Ume=Ne(([n,e,t,r,i,s,a,o,l,u,c,h,f,g,m])=>{let v,_;if(m){v=Ht().toVar(),_=we().toVar();const R=c.sub(1).mul(m.mul(.025)),w=we(c.sub(R),c,c.add(R));Us({start:0,end:3},({i:M})=>{const I=w.element(M),C=wU(n,e,h,I,o),k=a.add(C),O=u.mul(l.mul(Ht(k,1))),z=yt(O.xy.div(O.w)).toVar();z.addAssign(1),z.divAssign(2),z.assign(yt(z.x,z.y.oneMinus()));const W=AU(z,t,I);v.element(M).assign(W.element(M)),v.a.addAssign(W.a),_.element(M).assign(r.element(M).mul(RU(zo(C),f,g).element(M)))}),v.a.divAssign(3)}else{const R=wU(n,e,h,c,o),w=a.add(R),M=u.mul(l.mul(Ht(w,1))),I=yt(M.xy.div(M.w)).toVar();I.addAssign(1),I.divAssign(2),I.assign(yt(I.x,I.y.oneMinus())),v=AU(I,t,c),_=r.mul(RU(zo(R),f,g))}const b=_.rgb.mul(v.rgb),S=n.dot(e).clamp(),E=we(z$({dotNV:S,specularColor:i,specularF90:s,roughness:t})),A=_.r.add(_.g,_.b).div(3);return Ht(E.oneMinus().mul(b),v.a.oneMinus().mul(A).oneMinus())}),Bme=yi(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),zme=n=>{const e=n.sqrt();return we(1).add(e).div(we(1).sub(e))},NU=(n,e)=>n.sub(e).div(n.add(e)).pow2(),Gme=(n,e)=>{const t=n.mul(2*Math.PI*1e-9),r=we(54856e-17,44201e-17,52481e-17),i=we(1681e3,1795300,2208400),s=we(43278e5,93046e5,66121e5),a=Te(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let o=r.mul(s.mul(2*Math.PI).sqrt()).mul(i.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return o=we(o.x.add(a),o.y,o.z).div(10685e-11),Bme.mul(o)},CU=Ne(({outsideIOR:n,eta2:e,cosTheta1:t,thinFilmThickness:r,baseF0:i})=>{const s=Mn(n,e,$o(0,.03,r)),o=n.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();In(o.lessThan(0),()=>we(1));const l=o.sqrt(),u=NU(s,n),c=Cg({f0:u,f90:1,dotVH:t}),h=c.oneMinus(),f=s.lessThan(n).select(Math.PI,0),g=Te(Math.PI).sub(f),m=zme(i.clamp(0,.9999)),v=NU(m,s.toVec3()),_=Cg({f0:v,f90:1,dotVH:l}),b=we(m.x.lessThan(s).select(Math.PI,0),m.y.lessThan(s).select(Math.PI,0),m.z.lessThan(s).select(Math.PI,0)),S=s.mul(r,l,2),E=we(g).add(b),A=c.mul(_).clamp(1e-5,.9999),R=A.sqrt(),w=h.pow2().mul(_).div(we(1).sub(A)),I=c.add(w).toVar(),C=w.sub(h).toVar();return Us({start:1,end:2,condition:"<=",name:"m"},({m:k})=>{C.mulAssign(R);const O=Gme(Te(k).mul(S),Te(k).mul(E)).mul(2);I.addAssign(C.mul(O))}),I.max(we(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),sf=Ne(({normal:n,viewDir:e,roughness:t})=>{const r=n.dot(e).saturate(),i=t.mul(t),s=t.add(.1).reciprocal(),a=Te(-1.9362).add(t.mul(1.0678)).add(i.mul(.4573)).sub(s.mul(.8469)),o=Te(-.6014).add(t.mul(.5538)).sub(i.mul(.467)).sub(s.mul(.1255));return a.mul(r).add(o).exp().saturate()}),q0=we(.04),X0=Te(1);class $$ extends bv{constructor(e=!1,t=!1,r=!1,i=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=r,this.anisotropy=i,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null,this.iridescenceF0Dielectric=null,this.iridescenceF0Metallic=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=we().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=we().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=we().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=we().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=we().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=dn.dot(Un).clamp(),r=CU({outsideIOR:Te(1),eta2:XT,cosTheta1:t,thinFilmThickness:YT,baseF0:sc}),i=CU({outsideIOR:Te(1),eta2:XT,cosTheta1:t,thinFilmThickness:YT,baseF0:wn.rgb});this.iridescenceFresnel=Mn(r,i,Il),this.iridescenceF0Dielectric=bU({f:r,f90:1,dotVH:t}),this.iridescenceF0Metallic=bU({f:i,f90:1,dotVH:t}),this.iridescenceF0=Mn(this.iridescenceF0Dielectric,this.iridescenceF0Metallic,Il)}if(this.transmission===!0){const t=Eh,r=ffe.sub(Eh).normalize(),i=Zh,s=e.context;s.backdrop=Ume(i,r,Co,yd,Ad,$f,t,lc,Wo,qf,qb,M4,k4,I4,this.dispersion?L4:null),s.backdropAlpha=QT,wn.a.mulAssign(Mn(1,s.backdrop.a,QT))}super.start(e)}computeMultiscattering(e,t,r,i,s=null){const a=dn.dot(Un).clamp(),o=S_({roughness:Co,dotNV:a}),l=s?_I.mix(i,s):i,u=l.mul(o.x).add(r.mul(o.y)),h=o.x.add(o.y).oneMinus(),f=l.add(l.oneMinus().mul(.047619)),g=u.mul(f).div(h.mul(f).oneMinus());e.addAssign(u),t.addAssign(g.mul(h))}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=dn.dot(e).clamp().mul(t).toVar();if(this.sheen===!0){this.sheenSpecularDirect.addAssign(s.mul(Ime({lightDirection:e})));const a=sf({normal:dn,viewDir:Un,roughness:Mu}),o=sf({normal:dn,viewDir:e,roughness:Mu}),l=Os.r.max(Os.g).max(Os.b).mul(a.max(o)).oneMinus();s.mulAssign(l)}if(this.clearcoat===!0){const o=Rd.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(o.mul(B$({lightDirection:e,f0:q0,f90:X0,roughness:x_,normalView:Rd})))}r.directDiffuse.addAssign(s.mul(Th({diffuseColor:yd}))),r.directSpecular.addAssign(s.mul(Nme({lightDirection:e,f0:Ad,f90:1,roughness:Co,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:r,halfHeight:i,reflectedLight:s,ltc_1:a,ltc_2:o}){const l=t.add(r).sub(i),u=t.sub(r).sub(i),c=t.sub(r).add(i),h=t.add(r).add(i),f=dn,g=Un,m=gr.toVar(),v=kme({N:f,V:g,roughness:Co}),_=a.sample(v).toVar(),b=o.sample(v).toVar(),S=yi(we(_.x,0,_.y),we(0,1,0),we(_.z,0,_.w)).toVar(),E=Ad.mul(b.x).add(Ad.oneMinus().mul(b.y)).toVar();s.directSpecular.addAssign(e.mul(E).mul(_U({N:f,V:g,P:m,mInv:S,p0:l,p1:u,p2:c,p3:h}))),s.directDiffuse.addAssign(e.mul(yd).mul(_U({N:f,V:g,P:m,mInv:yi(1,0,0,0,1,0,0,0,1),p0:l,p1:u,p2:c,p3:h})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:r}=e.context,i=t.mul(Th({diffuseColor:yd})).toVar();if(this.sheen===!0){const s=sf({normal:dn,viewDir:Un,roughness:Mu}),a=Os.r.max(Os.g).max(Os.b).mul(s).oneMinus();i.mulAssign(a)}r.indirectDiffuse.addAssign(i)}indirectSpecular(e){const{radiance:t,iblIrradiance:r,reflectedLight:i}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(Os,sf({normal:dn,viewDir:Un,roughness:Mu}))),this.clearcoat===!0){const _=Rd.dot(Un).clamp(),b=z$({dotNV:_,specularColor:q0,specularF90:X0,roughness:x_});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(b))}const s=we().toVar("singleScatteringDielectric"),a=we().toVar("multiScatteringDielectric"),o=we().toVar("singleScatteringMetallic"),l=we().toVar("multiScatteringMetallic");this.computeMultiscattering(s,a,$f,sc,this.iridescenceF0Dielectric),this.computeMultiscattering(o,l,$f,wn.rgb,this.iridescenceF0Metallic);const u=Mn(s,o,Il),c=Mn(a,l,Il),h=s.add(a),f=yd.mul(h.oneMinus()),g=r.mul(1/Math.PI),m=t.mul(u).add(c.mul(g)).toVar(),v=f.mul(g).toVar();if(this.sheen===!0){const _=sf({normal:dn,viewDir:Un,roughness:Mu}),b=Os.r.max(Os.g).max(Os.b).mul(_).oneMinus();m.mulAssign(b),v.mulAssign(b)}i.indirectSpecular.addAssign(m),i.indirectDiffuse.addAssign(v)}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:r}=e.context,s=dn.dot(Un).clamp().add(t),a=Co.mul(-16).oneMinus().negate().exp2(),o=t.sub(s.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),r.indirectDiffuse.mulAssign(t),r.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const r=Rd.dot(Un).clamp(),i=Cg({dotVH:r,f0:q0,f90:X0}),s=t.mul(qT.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(qT));t.assign(s)}if(this.sheen===!0){const r=t.add(this.sheenSpecularDirect,this.sheenSpecularIndirect.mul(1/Math.PI));t.assign(r)}}}const MU=Te(1),iw=Te(-2),pb=Te(.8),Y0=Te(-1),fb=Te(.4),K0=Te(2),gb=Te(.305),Z0=Te(3),IU=Te(.21),Vme=Te(4),kU=Te(4),$me=Te(16),Hme=Ne(([n])=>{const e=we(vs(n)).toVar(),t=Te(-1).toVar();return In(e.x.greaterThan(e.z),()=>{In(e.x.greaterThan(e.y),()=>{t.assign(es(n.x.greaterThan(0),0,3))}).Else(()=>{t.assign(es(n.y.greaterThan(0),1,4))})}).Else(()=>{In(e.z.greaterThan(e.y),()=>{t.assign(es(n.z.greaterThan(0),2,5))}).Else(()=>{t.assign(es(n.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),jme=Ne(([n,e])=>{const t=yt().toVar();return In(e.equal(0),()=>{t.assign(yt(n.z,n.y).div(vs(n.x)))}).ElseIf(e.equal(1),()=>{t.assign(yt(n.x.negate(),n.z.negate()).div(vs(n.y)))}).ElseIf(e.equal(2),()=>{t.assign(yt(n.x.negate(),n.y).div(vs(n.z)))}).ElseIf(e.equal(3),()=>{t.assign(yt(n.z.negate(),n.y).div(vs(n.x)))}).ElseIf(e.equal(4),()=>{t.assign(yt(n.x.negate(),n.z).div(vs(n.y)))}).Else(()=>{t.assign(yt(n.x,n.y).div(vs(n.z)))}),Yt(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),Wme=Ne(([n])=>{const e=Te(0).toVar();return In(n.greaterThanEqual(pb),()=>{e.assign(MU.sub(n).mul(Y0.sub(iw)).div(MU.sub(pb)).add(iw))}).ElseIf(n.greaterThanEqual(fb),()=>{e.assign(pb.sub(n).mul(K0.sub(Y0)).div(pb.sub(fb)).add(Y0))}).ElseIf(n.greaterThanEqual(gb),()=>{e.assign(fb.sub(n).mul(Z0.sub(K0)).div(fb.sub(gb)).add(K0))}).ElseIf(n.greaterThanEqual(IU),()=>{e.assign(gb.sub(n).mul(Vme.sub(Z0)).div(gb.sub(IU)).add(Z0))}).Else(()=>{e.assign(Te(-2).mul(Bo(Yt(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),qme=Ne(([n,e])=>{const t=n.toVar();t.assign(Yt(2,t).sub(1));const r=we(t,1).toVar();return In(e.equal(0),()=>{r.assign(r.zyx)}).ElseIf(e.equal(1),()=>{r.assign(r.xzy),r.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{r.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{r.assign(r.zyx),r.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{r.assign(r.xzy),r.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{r.z.mulAssign(-1)}),r}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),Xme=Ne(([n,e,t,r,i,s])=>{const a=Te(t),o=we(e),l=Vl(Wme(a),iw,s),u=Ja(l),c=Wu(l),h=we(Mg(n,o,c,r,i,s)).toVar();return In(u.notEqual(0),()=>{const f=we(Mg(n,o,c.add(1),r,i,s)).toVar();h.assign(Mn(h,f,u))}),h}),Mg=Ne(([n,e,t,r,i,s])=>{const a=Te(t).toVar(),o=we(e),l=Te(Hme(o)).toVar(),u=Te(ti(kU.sub(a),0)).toVar();a.assign(ti(a,kU));const c=Te(Rg(a)).toVar(),h=yt(jme(o,l).mul(c.sub(2)).add(1)).toVar();return In(l.greaterThan(2),()=>{h.y.addAssign(c),l.subAssign(3)}),h.x.addAssign(l.mul(c)),h.x.addAssign(u.mul(Yt(3,$me))),h.y.addAssign(Yt(4,Rg(s).sub(c))),h.x.mulAssign(r),h.y.mulAssign(i),n.sample(h).grad(yt(),yt())}),Q0=Ne(({envMap:n,mipInt:e,outputDirection:t,theta:r,axis:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=Ua(r),u=t.mul(l).add(i.cross(t).mul(_s(r))).add(i.mul(i.dot(t).mul(l.oneMinus())));return Mg(n,u,e,s,a,o)}),Yme=Ne(({n,latitudinal:e,poleAxis:t,outputDirection:r,weights:i,samples:s,dTheta:a,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})=>{const f=we(es(e,t,oc(t,r))).toVar();In(f.equal(we(0)),()=>{f.assign(we(r.z,0,r.x.negate()))}),f.assign(ma(f));const g=we().toVar();return g.addAssign(i.element(0).mul(Q0({theta:0,axis:f,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),Us({start:zn(1),end:n},({i:m})=>{In(m.greaterThanEqual(s),()=>{Fge()});const v=Te(a.mul(Te(m))).toVar();g.addAssign(i.element(m).mul(Q0({theta:v.mul(-1),axis:f,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),g.addAssign(i.element(m).mul(Q0({theta:v,axis:f,outputDirection:r,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})))}),Ht(g,1)}),Kme=Ne(([n])=>{const e=rn(n).toVar();return e.assign(e.shiftLeft(rn(16)).bitOr(e.shiftRight(rn(16)))),e.assign(e.bitAnd(rn(1431655765)).shiftLeft(rn(1)).bitOr(e.bitAnd(rn(2863311530)).shiftRight(rn(1)))),e.assign(e.bitAnd(rn(858993459)).shiftLeft(rn(2)).bitOr(e.bitAnd(rn(3435973836)).shiftRight(rn(2)))),e.assign(e.bitAnd(rn(252645135)).shiftLeft(rn(4)).bitOr(e.bitAnd(rn(4042322160)).shiftRight(rn(4)))),e.assign(e.bitAnd(rn(16711935)).shiftLeft(rn(8)).bitOr(e.bitAnd(rn(4278255360)).shiftRight(rn(8)))),Te(e).mul(23283064365386963e-26)}),Zme=Ne(([n,e])=>yt(Te(n).div(Te(e)),Kme(n))),Qme=Ne(([n,e,t])=>{const r=we(e).toVar(),i=Te(t),s=i.mul(i).toVar(),a=ma(we(s.mul(r.x),s.mul(r.y),r.z)).toVar(),o=a.x.mul(a.x).add(a.y.mul(a.y)),l=es(o.greaterThan(0),we(a.y.negate(),a.x,0).div(Do(o)),we(1,0,0)).toVar(),u=oc(a,l).toVar(),c=Do(n.x),h=Yt(2,3.14159265359).mul(n.y),f=c.mul(Ua(h)).toVar(),g=c.mul(_s(h)).toVar(),m=Yt(.5,a.z.add(1));g.assign(m.oneMinus().mul(Do(f.mul(f).oneMinus())).add(m.mul(g)));const v=l.mul(f).add(u.mul(g)).add(a.mul(Do(ti(0,f.mul(f).add(g.mul(g)).oneMinus()))));return ma(we(s.mul(v.x),s.mul(v.y),ti(0,v.z)))}),Jme=Ne(({roughness:n,mipInt:e,envMap:t,N_immutable:r,GGX_SAMPLES:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=we(r).toVar(),u=we(0).toVar(),c=Te(0).toVar();return In(n.lessThan(.001),()=>{u.assign(Mg(t,l,e,s,a,o))}).Else(()=>{const h=es(vs(l.z).lessThan(.999),we(0,0,1),we(1,0,0)),f=ma(oc(h,l)).toVar(),g=oc(l,f).toVar();Us({start:rn(0),end:i},({i:m})=>{const v=Zme(m,i),_=Qme(v,we(0,0,1),n),b=ma(f.mul(_.x).add(g.mul(_.y)).add(l.mul(_.z))),S=ma(b.mul(ac(l,b).mul(2)).sub(l)),E=ti(ac(l,S),0);In(E.greaterThan(0),()=>{const A=Mg(t,S,e,s,a,o);u.addAssign(A.mul(E)),c.addAssign(E)})}),In(c.greaterThan(0),()=>{u.assign(u.div(c))})}),Ht(u,1)}),kl=4,LU=[.125,.215,.35,.446,.526,.582],Lu=20,eye=512,af=new $h(-1,1,1,-1,0,1),tye=new $r(90,1),DU=new Et;let J0=null,eE=0,tE=0;const nye=new Z,E_=new WeakMap,rye=[3,1,5,0,4,2],nE=qme(Xh(),$l("faceIndex")).normalize(),vv=we(nE.x,nE.y,nE.z);class iye{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._ggxMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,r=.1,i=100,s={}){const{size:a=256,position:o=nye,renderTarget:l=null}=s;if(this._setSize(a),this._hasInitialized===!1){Ce('PMREMGenerator: ".fromScene()" called before the backend is initialized. Try using "await renderer.init()" instead.');const c=l||this._allocateTarget();return s.renderTarget=c,this.fromSceneAsync(e,t,r,i,s),c}J0=this._renderer.getRenderTarget(),eE=this._renderer.getActiveCubeFace(),tE=this._renderer.getActiveMipmapLevel();const u=l||this._allocateTarget();return u.depthBuffer=!0,this._init(u),this._sceneToCubeUV(e,r,i,u,o),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}async fromSceneAsync(e,t=0,r=.1,i=100,s={}){return jn('PMREMGenerator: ".fromSceneAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this.fromScene(e,t,r,i,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){Ce('PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using "await renderer.init()" instead.'),this._setSizeFromTexture(e);const r=t||this._allocateTarget();return this.fromEquirectangularAsync(e,r),r}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return jn('PMREMGenerator: ".fromEquirectangularAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){Ce("PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const r=t||this._allocateTarget();return this.fromCubemapAsync(e,t),r}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return jn('PMREMGenerator: ".fromCubemapAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=PU(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=FU(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===ya||e.mapping===Ka?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(J0,eE,tE),e.scissorTest=!1,ld(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),J0=this._renderer.getRenderTarget(),eE=this._renderer.getActiveCubeFace(),tE=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTarget();return this._init(r),this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return OU(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=OU(e.width,e.height);const{_lodMax:t}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=sye(t)),this._blurMaterial=aye(t,e.width,e.height),this._ggxMaterial=oye(t,e.width,e.height)}}async _compileMaterial(e){const t=new wr(new jr,e);await this._renderer.compile(t,af)}_sceneToCubeUV(e,t,r,i,s){const a=tye;a.near=t,a.far=r;const o=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],u=this._renderer,c=u.autoClear;u.getClearColor(DU),u.autoClear=!1,this._backgroundBox===null&&(this._backgroundBox=new wr(new fc,new za({name:"PMREM.Background",side:On,depthWrite:!1,depthTest:!1})));const h=this._backgroundBox,f=h.material;let g=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,g=!0):(f.color.copy(DU),g=!0),u.setRenderTarget(i),u.clear(),g&&u.render(h,a);for(let v=0;v<6;v++){const _=v%3;_===0?(a.up.set(0,o[v],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x+l[v],s.y,s.z)):_===1?(a.up.set(0,0,o[v]),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y+l[v],s.z)):(a.up.set(0,o[v],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y,s.z+l[v]));const b=this._cubeSize;ld(i,_*b,v>2?b:0,b,b),u.render(e,a)}u.autoClear=c,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ya||e.mapping===Ka;i?this._cubemapMaterial===null&&(this._cubemapMaterial=PU(e)):this._equirectMaterial===null&&(this._equirectMaterial=FU(e));const s=i?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const o=this._cubeSize;ld(t,0,0,3*o,2*o),r.setRenderTarget(t),r.render(a,af)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=r}_applyGGXFilter(e,t,r){const i=this._renderer,s=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[r];o.material=a;const l=E_.get(a),u=r/(this._lodMeshes.length-1),c=t/(this._lodMeshes.length-1),h=Math.sqrt(u*u-c*c),f=0+u*1.25,g=h*f,{_lodMax:m}=this,v=this._sizeLods[r],_=3*v*(r>m-kl?r-m+kl:0),b=4*(this._cubeSize-v);e.texture.frame=(e.texture.frame||0)+1,l.envMap.value=e.texture,l.roughness.value=g,l.mipInt.value=m-t,ld(s,_,b,3*v,2*v),i.setRenderTarget(s),i.render(o,af),s.texture.frame=(s.texture.frame||0)+1,l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=m-r,ld(e,_,b,3*v,2*v),i.setRenderTarget(e),i.render(o,af)}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&Ie("blur direction must be either latitudinal or longitudinal!");const c=3,h=this._lodMeshes[i];h.material=u;const f=E_.get(u),g=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Lu-1),v=s/m,_=isFinite(s)?1+Math.floor(c*v):Lu;_>Lu&&Ce(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Lu}`);const b=[];let S=0;for(let M=0;M<Lu;++M){const I=M/v,C=Math.exp(-I*I/2);b.push(C),M===0?S+=C:M<_&&(S+=2*C)}for(let M=0;M<b.length;M++)b[M]=b[M]/S;e.texture.frame=(e.texture.frame||0)+1,f.envMap.value=e.texture,f.samples.value=_,f.weights.array=b,f.latitudinal.value=a==="latitudinal"?1:0,o&&(f.poleAxis.value=o);const{_lodMax:E}=this;f.dTheta.value=m,f.mipInt.value=E-r;const A=this._sizeLods[i],R=3*A*(i>E-kl?i-E+kl:0),w=4*(this._cubeSize-A);ld(t,R,w,3*A,2*A),l.setRenderTarget(t),l.render(h,af)}}function sye(n){const e=[],t=[],r=[];let i=n;const s=n-kl+1+LU.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);e.push(o);let l=1/o;a>n-kl?l=LU[a-n+kl-1]:a===0&&(l=0),t.push(l);const u=1/(o-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],g=6,m=6,v=3,_=2,b=1,S=new Float32Array(v*m*g),E=new Float32Array(_*m*g),A=new Float32Array(b*m*g);for(let w=0;w<g;w++){const M=w%3*2/3-1,I=w>2?0:-1,C=[M,I,0,M+2/3,I,0,M+2/3,I+1,0,M,I,0,M+2/3,I+1,0,M,I+1,0],k=rye[w];S.set(C,v*m*k),E.set(f,_*m*k);const O=[k,k,k,k,k,k];A.set(O,b*m*k)}const R=new jr;R.setAttribute("position",new ei(S,v)),R.setAttribute("uv",new ei(E,_)),R.setAttribute("faceIndex",new ei(A,b)),r.push(new wr(R,null)),i>kl&&i--}return{lodMeshes:r,sizeLods:e,sigmas:t}}function OU(n,e){const t={magFilter:Vn,minFilter:Vn,generateMipmaps:!1,type:tr,format:pr,colorSpace:tc},r=new hc(n,e,t);return r.texture.mapping=Ku,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function ld(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function xv(n){const e=new mr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Pi,e.name=`PMREM_${n}`,e}function aye(n,e,t){const r=ha(new Array(Lu).fill(0)),i=Lt(new Z(0,1,0)),s=Lt(0),a=Te(Lu),o=Lt(0),l=Lt(1),u=Gn(),c=Lt(0),h=Te(1/e),f=Te(1/t),g=Te(n),m={n:a,latitudinal:o,weights:r,poleAxis:i,outputDirection:vv,dTheta:s,samples:l,envMap:u,mipInt:c,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:f,CUBEUV_MAX_MIP:g},v=xv("blur");return v.fragmentNode=Yme({...m,latitudinal:o.equal(1)}),E_.set(v,m),v}function oye(n,e,t){const r=Gn(),i=Lt(0),s=Lt(0),a=Te(1/e),o=Te(1/t),l=Te(n),u={envMap:r,roughness:i,mipInt:s,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:l},c=xv("ggx");return c.fragmentNode=Jme({...u,N_immutable:vv,GGX_SAMPLES:rn(eye)}),E_.set(c,u),c}function PU(n){const e=xv("cubemap");return e.fragmentNode=Ki(n,vv),e}function FU(n){const e=xv("equirect");return e.fragmentNode=Gn(n,k$(vv),0),e}const UU=new WeakMap;function lye(n){const e=Math.log2(n)-2,t=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:t,maxMip:e}}function uye(n,e,t){const r=cye(e);let i=r.get(n);if((i!==void 0?i.pmremVersion:-1)!==n.pmremVersion){const a=n.image;if(n.isCubeTexture)if(hye(a))i=t.fromCubemap(n,i);else return null;else if(pye(a))i=t.fromEquirectangular(n,i);else return null;i.pmremVersion=n.pmremVersion,r.set(n,i)}return i.texture}function cye(n){let e=UU.get(n);return e===void 0&&(e=new WeakMap,UU.set(n,e)),e}class dye extends Ar{static get type(){return"PMREMNode"}constructor(e,t=null,r=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=r,this._generator=null;const i=new Er;i.isRenderTargetTexture=!0,this._texture=Gn(i),this._width=Lt(0),this._height=Lt(0),this._maxMip=Lt(0),this.updateBeforeType=Xt.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=lye(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const r=t?t.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?t=i:t=uye(i,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new iye(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this,e)),t=f$.mul(we(t.x,t.y.negate(),t.z));let r=this.levelNode;return r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),Xme(this._texture,t,r,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function hye(n){if(n==null)return!1;let e=0;const t=6;for(let r=0;r<t;r++)n[r]!==void 0&&e++;return e===t}function pye(n){return n==null?!1:n.height>0}const H$=mn(dye).setParameterLength(1,3),BU=new WeakMap;class fye extends Qh{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const h=r.isTextureNode?r.value:t[r.property];let f=BU.get(h);f===void 0&&(f=H$(h),BU.set(h,f)),r=f}const s=t.useAnisotropy===!0||t.anisotropy>0?Bfe:dn,a=r.context(zU(Co,s)).mul(H0),o=r.context(gye(Zh)).mul(Math.PI).mul(H0),l=Wf(a),u=Wf(o);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(u);const c=e.context.lightingModel.clearcoatRadiance;if(c){const h=r.context(zU(x_,Rd)).mul(H0),f=Wf(h);c.addAssign(f)}}}const zU=(n,e)=>{let t=null;return{getUV:()=>(t===null&&(t=Un.negate().reflect(e),t=Y4(n).mix(t,e).normalize(),t=t.transformDirection(Wo)),t),getTextureLevel:()=>n}},gye=n=>({getUV:()=>n,getTextureLevel:()=>Te(1)}),mye=new TV;class j$ extends mr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(mye),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new fye(t):null}setupLightingModel(){return new $$}setupSpecular(){const e=Mn(we(.04),wn.rgb,Il);sc.assign(we(.04)),Ad.assign(e),$f.assign(1)}setupVariants(){const e=this.metalnessNode?Te(this.metalnessNode):Jfe;Il.assign(e);let t=this.roughnessNode?Te(this.roughnessNode):Qfe;t=U$({roughness:t}),Co.assign(t),this.setupSpecular(),yd.assign(wn.rgb.mul(e.oneMinus()))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const yye=new Wne;class bye extends j${static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(yye),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Te(this.iorNode):pge;qb.assign(e),sc.assign(xh(X4(qb.sub(1).div(qb.add(1))).mul(Zfe),we(1)).mul(dU)),Ad.assign(Mn(sc,wn.rgb,Il)),$f.assign(Mn(dU,1,Il))}setupLightingModel(){return new $$(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?Te(this.clearcoatNode):tge,r=this.clearcoatRoughnessNode?Te(this.clearcoatRoughnessNode):nge;qT.assign(t),x_.assign(U$({roughness:r}))}if(this.useSheen){const t=this.sheenNode?we(this.sheenNode):sge,r=this.sheenRoughnessNode?Te(this.sheenRoughnessNode):age;Os.assign(t),Mu.assign(r)}if(this.useIridescence){const t=this.iridescenceNode?Te(this.iridescenceNode):lge,r=this.iridescenceIORNode?Te(this.iridescenceIORNode):uge,i=this.iridescenceThicknessNode?Te(this.iridescenceThicknessNode):cge;_I.assign(t),XT.assign(r),YT.assign(i)}if(this.useAnisotropy){const t=(this.anisotropyNode?yt(this.anisotropyNode):oge).toVar();Ru.assign(t.length()),In(Ru.equal(0),()=>{t.assign(yt(1,0))}).Else(()=>{t.divAssign(yt(Ru)),Ru.assign(Ru.saturate())}),KT.assign(Ru.pow2().mix(Co.pow2(),1)),Wb.assign(Tf[0].mul(t.x).add(Tf[1].mul(t.y))),Fd.assign(Tf[1].mul(t.x).sub(Tf[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?Te(this.transmissionNode):dge,r=this.thicknessNode?Te(this.thicknessNode):hge,i=this.attenuationDistanceNode?Te(this.attenuationDistanceNode):fge,s=this.attenuationColorNode?we(this.attenuationColorNode):gge;if(QT.assign(t),M4.assign(r),I4.assign(i),k4.assign(s),this.useDispersion){const a=this.dispersionNode?Te(this.dispersionNode):xge;L4.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?we(this.clearcoatNormalNode):rge}setup(e){e.context.setupClearcoatNormal=()=>jf(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const _ye=Ne(({normal:n,lightDirection:e,builder:t})=>{const r=n.dot(e),i=yt(r.mul(.5).add(.5),0);if(t.material.gradientMap){const s=wl("gradientMap","texture").context({getUV:()=>i});return we(s.r)}else{const s=i.fwidth().mul(.5);return Mn(we(.7),we(1),$o(Te(.7).sub(s.x),Te(.7).add(s.x),i.x))}});class vye extends bv{direct({lightDirection:e,lightColor:t,reflectedLight:r},i){const s=_ye({normal:h$,lightDirection:e,builder:i}).mul(t);r.directDiffuse.addAssign(s.mul(Th({diffuseColor:wn.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(Th({diffuseColor:wn}))),i.indirectDiffuse.mulAssign(t)}}const xye=new Xne;class Sye extends mr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(xye),this.setValues(e)}setupLightingModel(){return new vye}}const Eye=Ne(()=>{const n=we(Un.z,0,Un.x.negate()).normalize(),e=Un.cross(n);return yt(n.dot(dn),e.dot(dn)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),Tye=new Qne;class wye extends mr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(Tye),this.setValues(e)}setupVariants(e){const t=Eye;let r;e.material.matcap?r=wl("matcap","texture").context({getUV:()=>t}):r=we(Mn(.2,.8,t.y)),wn.rgb.mulAssign(r.rgb)}}class Aye extends Ar{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:r}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),a=t.sin();return bI(s,a,a.negate(),s).mul(r)}else{const s=t,a=ju(Ht(1,0,0,0),Ht(0,Ua(s.x),_s(s.x).negate(),0),Ht(0,_s(s.x),Ua(s.x),0),Ht(0,0,0,1)),o=ju(Ht(Ua(s.y),0,_s(s.y),0),Ht(0,1,0,0),Ht(_s(s.y).negate(),0,Ua(s.y),0),Ht(0,0,0,1)),l=ju(Ht(Ua(s.z),_s(s.z).negate(),0,0),Ht(_s(s.z),Ua(s.z),0,0),Ht(0,0,1,0),Ht(0,0,0,1));return a.mul(o).mul(l).mul(Ht(r,1)).xyz}}}const W$=mn(Aye).setParameterLength(2),Rye=new Sne;class q$ extends mr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(Rye),this.setValues(e)}setupPositionView(e){const{object:t,camera:r}=e,{positionNode:i,rotationNode:s,scaleNode:a,sizeAttenuation:o}=this,l=dm.mul(we(i||0));let u=yt(lc[0].xyz.length(),lc[1].xyz.length());a!==null&&(u=u.mul(yt(a))),r.isPerspectiveCamera&&o===!1&&(u=u.mul(l.z.negate()));let c=yv.xy;if(t.center&&t.center.isVector2===!0){const g=Upe("center","vec2",t);c=c.sub(g.sub(.5))}c=c.mul(u);const h=Te(s||ige),f=W$(c,h);return Ht(l.xy.add(f),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const Nye=new Nne,Cye=new $e;class Mye extends q${static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(Nye),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return dm.mul(we(e||Hr)).xyz}setupVertexSprite(e){const{material:t,camera:r}=e,{rotationNode:i,scaleNode:s,sizeNode:a,sizeAttenuation:o}=this;let l=super.setupVertex(e);if(t.isNodeMaterial!==!0)return l;let u=a!==null?yt(a):vge;u=u.mul(hfe),r.isPerspectiveCamera&&o===!0&&(u=u.mul(Iye.div(gr.z.negate()))),s&&s.isNode&&(u=u.mul(yt(s)));let c=yv.xy;if(i&&i.isNode){const h=Te(i);c=W$(c,h)}return c=c.mul(u),c=c.div(pfe.div(2)),c=c.mul(l.w),l=l.add(Ht(c,0,0)),l}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const Iye=Lt(1).onFrameUpdate(function({renderer:n}){const e=n.getSize(Cye);this.value=.5*e.y});class kye extends bv{constructor(){super(),this.shadowNode=Te(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){wn.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(wn.rgb)}}const Lye=new Hne;class Dye extends mr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(Lye),this.setValues(e)}setupLightingModel(){return new kye}}Ul("vec3");Ul("vec3");Ul("vec3");class Oye{constructor(e,t,r){this.renderer=e,this.nodes=t,this.info=r,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,r)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.renderer._inspector.begin(),this._animationLoop!==null&&this._animationLoop(t,r),this.renderer._inspector.finish()};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class _a{constructor(){this.weakMaps={}}_getWeakMap(e){const t=e.length;let r=this.weakMaps[t];return r===void 0&&(r=new WeakMap,this.weakMaps[t]=r),r}get(e){let t=this._getWeakMap(e);for(let r=0;r<e.length-1;r++)if(t=t.get(e[r]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let r=this._getWeakMap(e);for(let i=0;i<e.length-1;i++){const s=e[i];r.has(s)===!1&&r.set(s,new WeakMap),r=r.get(s)}return r.set(e[e.length-1],t),this}delete(e){let t=this._getWeakMap(e);for(let r=0;r<e.length-1;r++)if(t=t.get(e[r]),t===void 0)return!1;return t.delete(e[e.length-1])}}let Pye=0;function Fye(n){const e=Object.keys(n);let t=Object.getPrototypeOf(n);for(;t;){const r=Object.getOwnPropertyDescriptors(t);for(const i in r)if(r[i]!==void 0){const s=r[i];s&&typeof s.get=="function"&&e.push(i)}t=Object.getPrototypeOf(t)}return e}class Uye{constructor(e,t,r,i,s,a,o,l,u,c){this.id=Pye++,this._nodes=e,this._geometries=t,this.renderer=r,this.object=i,this.material=s,this.scene=a,this.camera=o,this.lightsNode=l,this.context=u,this.geometry=i.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=c,this.clippingContextCacheKey=c!==null?c.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getIndirectOffset(){return this._geometries.getIndirectOffset(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,r=[],i=new Set,s={};for(const a of e){let o;if(a.node&&a.node.attribute?o=a.node.attribute:(o=t.getAttribute(a.name),s[a.name]=o.version),o===void 0)continue;r.push(o);const l=o.isInterleavedBufferAttribute?o.data:o;i.add(l)}return this.attributes=r,this.attributesId=s,this.vertexBuffers=Array.from(i.values()),r}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:r,group:i,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),l=o!==null;let u=1;if(r.isInstancedBufferGeometry===!0?u=r.instanceCount:e.count!==void 0&&(u=Math.max(0,e.count)),u===0)return null;if(a.instanceCount=u,e.isBatchedMesh===!0)return a;let c=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(c=2);let h=s.start*c,f=(s.start+s.count)*c;i!==null&&(h=Math.max(h,i.start*c),f=Math.min(f,(i.start+i.count)*c));const g=r.attributes.position;let m=1/0;l?m=o.count:g!=null&&(m=g.count),h=Math.max(h,0),f=Math.min(f,m);const v=f-h;return v<0||v===1/0?null:(a.vertexCount=v,a.firstVertex=h,a)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const r of Object.keys(e.attributes).sort()){const i=e.attributes[r];t+=r+",",i.data&&(t+=i.data.stride+","),i.offset&&(t+=i.offset+","),i.itemSize&&(t+=i.itemSize+","),i.normalized&&(t+="n,")}for(const r of Object.keys(e.morphAttributes).sort()){const i=e.morphAttributes[r];t+="morph-"+r+",";for(let s=0,a=i.length;s<a;s++){const o=i[s];t+=o.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t,renderer:r}=this;let i=t.customProgramCacheKey();for(const s of Fye(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(s))continue;const a=t[s];let o;if(a!==null){const l=typeof a;l==="number"?o=a!==0?"1":"0":l==="object"?(o="{",a.isTexture&&(o+=a.mapping,r.backend.isWebGPUBackend===!0&&(o+=a.magFilter,o+=a.minFilter,o+=a.wrapS,o+=a.wrapT,o+=a.wrapR)),o+="}"):o=String(a)}else o=String(a);i+=o+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1||Array.isArray(e.morphTargetInfluences))&&(i+=e.uuid+","),i+=this.context.id+",",i+=e.receiveShadow+",",pv(i)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const t in e){const r=this.geometry.getAttribute(t);if(r===void 0||e[t]!==r.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=Gf(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=Gf(e,1)),e=Gf(e,this.camera.id,this.renderer.contextNode.id,this.renderer.contextNode.version),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const xu=[];class Bye{constructor(e,t,r,i,s,a){this.renderer=e,this.nodes=t,this.geometries=r,this.pipelines=i,this.bindings=s,this.info=a,this.chainMaps={}}get(e,t,r,i,s,a,o,l){const u=this.getChainMap(l);xu[0]=e,xu[1]=t,xu[2]=a,xu[3]=s;let c=u.get(xu);return c===void 0?(c=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,r,i,s,a,o,l),u.set(xu,c)):(c.updateClipping(o),c.needsGeometryUpdate&&c.setGeometry(e.geometry),(c.version!==t.version||c.needsUpdate)&&(c.initialCacheKey!==c.getCacheKey()?(c.dispose(),c=this.get(e,t,r,i,s,a,o,l)):c.version=t.version)),xu.length=0,c}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new _a)}dispose(){this.chainMaps={}}createRenderObject(e,t,r,i,s,a,o,l,u,c,h){const f=this.getChainMap(h),g=new Uye(e,t,r,i,s,a,o,l,u,c);return g.onDispose=()=>{this.pipelines.delete(g),this.bindings.deleteForRender(g),this.nodes.delete(g),f.delete(g.getChainArray())},g}}class ql{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Gs={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Al=16,zye=211,Gye=212;class Vye extends ql{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const r=this.get(e);if(r.version===void 0)t===Gs.VERTEX?this.backend.createAttribute(e):t===Gs.INDEX?this.backend.createIndexAttribute(e):t===Gs.STORAGE?this.backend.createStorageAttribute(e):t===Gs.INDIRECT&&this.backend.createIndirectStorageAttribute(e),r.version=this._getBufferAttribute(e).version;else{const i=this._getBufferAttribute(e);(r.version<i.version||i.usage===Td)&&(this.backend.updateAttribute(e),r.version=i.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function X$(n){return n.index!==null?n.index.version:n.attributes.position.version}function GU(n){const e=[],t=n.index,r=n.attributes.position;if(t!==null){const s=t.array;for(let a=0,o=s.length;a<o;a+=3){const l=s[a+0],u=s[a+1],c=s[a+2];e.push(l,u,u,c,c,l)}}else{const s=r.array;for(let a=0,o=s.length/3-1;a<o;a+=3){const l=a+0,u=a+1,c=a+2;e.push(l,u,u,c,c,l)}}const i=new(G1(e)?q1:W1)(e,1);return i.version=X$(n),i}class $ye extends ql{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap,this._geometryDisposeListeners=new Map}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,r=this.get(t);r.initialized=!0,this.info.memory.geometries++;const i=()=>{this.info.memory.geometries--;const s=t.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of a)this.attributes.delete(l);const o=this.wireframes.get(t);o!==void 0&&this.attributes.delete(o),t.removeEventListener("dispose",i),this._geometryDisposeListeners.delete(t)};t.addEventListener("dispose",i),this._geometryDisposeListeners.set(t,i)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,Gs.STORAGE):this.updateAttribute(s,Gs.VERTEX);const r=this.getIndex(e);r!==null&&this.updateAttribute(r,Gs.INDEX);const i=e.geometry.indirect;i!==null&&this.updateAttribute(i,Gs.INDIRECT)}updateAttribute(e,t){const r=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,r)):this.attributeCall.get(e.data)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e.data,r),this.attributeCall.set(e,r)):this.attributeCall.get(e)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e,r))}getIndirect(e){return e.geometry.indirect}getIndirectOffset(e){return e.geometry.indirectOffset}getIndex(e){const{geometry:t,material:r}=e;let i=t.index;if(r.wireframe===!0){const s=this.wireframes;let a=s.get(t);a===void 0?(a=GU(t),s.set(t,a)):a.version!==X$(t)&&(this.attributes.delete(a),a=GU(t),s.set(t,a)),i=a}return i}dispose(){for(const[e,t]of this._geometryDisposeListeners.entries())e.removeEventListener("dispose",t);this._geometryDisposeListeners.clear()}}class Hye{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,r){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=r*(t/3):e.isPoints?this.render.points+=r*t:e.isLineSegments?this.render.lines+=r*(t/2):e.isLine?this.render.lines+=r*(t-1):Ie("WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Y${constructor(e){this.cacheKey=e,this.usedTimes=0}}class jye extends Y${constructor(e,t,r){super(e),this.vertexProgram=t,this.fragmentProgram=r}}class Wye extends Y${constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let qye=0;class rE{constructor(e,t,r,i=null,s=null){this.id=qye++,this.code=e,this.stage=t,this.name=r,this.transforms=i,this.attributes=s,this.usedTimes=0}}class Xye extends ql{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:r}=this,i=this.get(e);if(this._needsComputeUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),o=new rE(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),r.createProgram(o));const l=this._getComputeCacheKey(e,o);let u=this.caches.get(l);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,o,l,t)),u.usedTimes++,o.usedTimes++,i.version=e.version,i.pipeline=u}return i.pipeline}getForRender(e,t=null){const{backend:r}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new rE(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,l),r.createProgram(l));let u=this.programs.fragment.get(a.fragmentShader);u===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),u=new rE(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,u),r.createProgram(u));const c=this._getRenderCacheKey(e,l,u);let h=this.caches.get(c);h===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),h=this._getRenderPipeline(e,l,u,c,t)):e.pipeline=h,h.usedTimes++,l.usedTimes++,u.usedTimes++,i.pipeline=h}return i.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,r,i){r=r||this._getComputeCacheKey(e,t);let s=this.caches.get(r);return s===void 0&&(s=new Wye(r,t),this.caches.set(r,s),this.backend.createComputePipeline(s,i)),s}_getRenderPipeline(e,t,r,i,s){i=i||this._getRenderCacheKey(e,t,r);let a=this.caches.get(i);return a===void 0&&(a=new jye(i,t,r),this.caches.set(i,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,r){return t.id+","+r.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,r=e.stage;this.programs[r].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class Yye extends ql{constructor(e,t,r,i,s,a){super(),this.backend=e,this.textures=r,this.pipelines=s,this.attributes=i,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t,0),i.bindGroup=r)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t,0),i.bindGroup=r)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}deleteForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const r of t)this.backend.deleteBindGroupData(r),this.delete(r)}deleteForRender(e){const t=e.getBindings();for(const r of t)this.backend.deleteBindGroupData(r),this.delete(r)}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isSampler)this.textures.updateSampler(t.texture);else if(t.isStorageBuffer){const r=t.attribute,i=r.isIndirectStorageBufferAttribute?Gs.INDIRECT:Gs.STORAGE;this.attributes.update(r,i)}}_update(e,t){const{backend:r}=this;let i=!1,s=!0,a=0,o=0;for(const l of e.bindings)if(this.nodes.updateGroup(l)!==!1){if(l.isStorageBuffer){const c=l.attribute,h=c.isIndirectStorageBufferAttribute?Gs.INDIRECT:Gs.STORAGE;this.attributes.update(c,h)}if(l.isUniformBuffer)l.update()&&r.updateBinding(l);else if(l.isSampledTexture){const c=l.update(),h=l.texture,f=this.textures.get(h);if(c&&(this.textures.updateTexture(h),l.generation!==f.generation&&(l.generation=f.generation,i=!0,s=!1)),r.get(h).externalTexture!==void 0||f.isDefaultTexture?s=!1:(a=a*10+h.id,o+=h.version),h.isStorageTexture===!0&&h.mipmapsAutoUpdate===!0){const m=this.get(h);l.store===!0?m.needsMipmap=!0:this.textures.needsMipmaps(h)&&m.needsMipmap===!0&&(this.backend.generateMipmaps(h),m.needsMipmap=!1)}}else if(l.isSampler&&l.update()){const h=this.textures.updateSampler(l.texture);l.samplerKey!==h&&(l.samplerKey=h,i=!0,s=!1)}}i===!0&&this.backend.updateBindings(e,t,s?a:0,o)}}function Kye(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?n.z-e.z:n.id-e.id}function VU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function $U(n){return(n.transmission>0||n.transmissionNode&&n.transmissionNode.isNode)&&n.side===pi&&n.forceSinglePass===!1}class Zye{constructor(e,t,r){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,r),this.lightsArray=[],this.scene=t,this.camera=r,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,r,i,s,a,o){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:r,groupOrder:i,renderOrder:e.renderOrder,z:s,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=r,l.groupOrder=i,l.renderOrder=e.renderOrder,l.z=s,l.group=a,l.clippingContext=o),this.renderItemsIndex++,l}push(e,t,r,i,s,a,o){const l=this.getNextRenderItem(e,t,r,i,s,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,r.transparent===!0||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?($U(r)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,r,i,s,a,o){const l=this.getNextRenderItem(e,t,r,i,s,a,o);r.transparent===!0||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?($U(r)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||Kye),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||VU),this.transparent.length>1&&this.transparent.sort(t||VU)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const r=this.renderItems[e];if(r.id===null)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.groupOrder=null,r.renderOrder=null,r.z=null,r.group=null,r.clippingContext=null}}}const of=[];class Qye{constructor(e){this.lighting=e,this.lists=new _a}get(e,t){const r=this.lists;of[0]=e,of[1]=t;let i=r.get(of);return i===void 0&&(i=new Zye(this.lighting,e,t),r.set(of,i)),of.length=0,i}dispose(){this.lists=new _a}}let Jye=0;class ebe{constructor(){this.id=Jye++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Wt,this.scissor=!1,this.scissorValue=new Wt,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return K$(this)}}function K$(n){const{textures:e,activeCubeFace:t,activeMipmapLevel:r}=n,i=[t,r];for(const s of e)i.push(s.id);return lm(i)}const ud=[],tbe=new rv,nbe=new X1;class rbe{constructor(){this.chainMaps={}}get(e,t,r=null,i=null){ud[0]=e,ud[1]=t,i!==null&&(ud[2]=i);let s;if(r===null)s="default";else{const l=r.texture.format;s=`${r.textures.length}:${l}:${r.samples}:${r.depthBuffer}:${r.stencilBuffer}`}const a=this._getChainMap(s);let o=a.get(ud);return o===void 0&&(o=new ebe,a.set(ud,o)),ud.length=0,r!==null&&(o.sampleCount=r.samples===0?1:r.samples),o}getForClear(e=null){return this.get(tbe,nbe,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new _a)}dispose(){this.chainMaps={}}}const ibe=new Z;class sbe extends ql{constructor(e,t,r){super(),this.renderer=e,this.backend=t,this.info=r}updateRenderTarget(e,t=0){const r=this.get(e),i=e.samples===0?1:e.samples,s=r.depthTextureMips||(r.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),l=o.width>>t,u=o.height>>t;let c=e.depthTexture||s[t];const h=e.depthBuffer===!0||e.stencilBuffer===!0;let f=!1;c===void 0&&h&&(c=new Fi,c.format=e.stencilBuffer?Li:Jr,c.type=e.stencilBuffer?Ts:An,c.image.width=l,c.image.height=u,c.image.depth=o.depth,c.renderTarget=e,c.isArrayTexture=e.multiview===!0&&o.depth>1,s[t]=c),(r.width!==o.width||o.height!==r.height)&&(f=!0,c&&(c.needsUpdate=!0,c.image.width=l,c.image.height=u,c.image.depth=c.isArrayTexture?c.image.depth:1)),r.width=o.width,r.height=o.height,r.textures=a,r.depthTexture=c||null,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(f=!0,c&&(c.needsUpdate=!0),r.sampleCount=i);const g={sampleCount:i};if(e.isXRRenderTarget!==!0){for(let m=0;m<a.length;m++){const v=a[m];f&&(v.needsUpdate=!0),this.updateTexture(v,g)}c&&this.updateTexture(c,g)}r.initialized!==!0&&(r.initialized=!0,r.onDispose=()=>{this._destroyRenderTarget(e)},e.addEventListener("dispose",r.onDispose))}updateTexture(e,t={}){const r=this.get(e);if(r.initialized===!0&&r.version===e.version)return;const i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(i&&r.initialized===!0&&s.destroyTexture(e),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=qn}const{width:a,height:o,depth:l}=this.getSize(e);if(t.width=a,t.height=o,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,o):1,e.isCubeTexture&&e.mipmaps.length>0&&t.levels++,i||e.isStorageTexture===!0||e.isExternalTexture===!0)s.createTexture(e,t),r.generation=e.version;else if(e.version>0){const u=e.image;if(u===void 0)Ce("Renderer: Texture marked for update but image is undefined.");else if(u.complete===!1)Ce("Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const f of e.images)h.push(f);t.images=h}else t.image=u;(r.isDefaultTexture===void 0||r.isDefaultTexture===!0)&&(s.createTexture(e,t),r.isDefaultTexture=!1,r.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t);const c=e.isStorageTexture===!0&&e.mipmapsAutoUpdate===!1;t.needsMipmaps&&e.mipmaps.length===0&&!c&&s.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else s.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version;r.initialized!==!0&&(r.initialized=!0,r.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&Nt.enabled===!0&&Nt.getTransfer(e.colorSpace)!==lt&&Ce("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace."),r.onDispose=()=>{this._destroyTexture(e)},e.addEventListener("dispose",r.onDispose)),r.version=e.version}updateSampler(e){return this.backend.updateSampler(e)}getSize(e,t=ibe){let r=e.images?e.images[0]:e.image;return r?(r.image!==void 0&&(r=r.image),typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?(t.width=r.videoWidth||1,t.height=r.videoHeight||1,t.depth=1):typeof VideoFrame<"u"&&r instanceof VideoFrame?(t.width=r.displayWidth||1,t.height=r.displayHeight||1,t.depth=1):(t.width=r.width||1,t.height=r.height||1,t.depth=e.isCubeTexture?6:r.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,r){let i;return e.mipmaps.length>0?i=e.mipmaps.length:e.isCompressedTexture===!0?i=1:i=Math.floor(Math.log2(Math.max(t,r)))+1,i}needsMipmaps(e){return e.generateMipmaps===!0||e.mipmaps.length>0}_destroyRenderTarget(e){if(this.has(e)===!0){const t=this.get(e),r=t.textures,i=t.depthTexture;e.removeEventListener("dispose",t.onDispose);for(let s=0;s<r.length;s++)this._destroyTexture(r[s]);i&&this._destroyTexture(i),this.delete(e),this.backend.delete(e)}}_destroyTexture(e){if(this.has(e)===!0){const t=this.get(e);e.removeEventListener("dispose",t.onDispose);const r=t.isDefaultTexture;this.backend.destroyTexture(e,r),this.delete(e),this.info.memory.textures--}}}class LI extends Et{constructor(e,t,r,i=1){super(e,t,r),this.a=i}set(e,t,r,i=1){return this.a=i,super.set(e,t,r)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class abe extends _n{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getMemberType(e,t){const r=this.getNodeType(e),i=e.getStructTypeNode(r);let s;return i!==null?s=i.getMemberType(e,t):(Ie(`TSL: Member "${t}" not found in struct "${r}".`),s="float"),s}getHash(){return this.uuid}generate(){return this.name}}class obe extends xt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this._currentNode=null,this.isStackNode=!0}getElementType(e){return this.hasOutput?this.outputNode.getElementType(e):"void"}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.hasOutput?this.outputNode.getMemberType(e,t):"void"}addToStack(e,t=this.nodes.length){return e.isNode!==!0?(Ie("TSL: Invalid node added to stack."),this):(this.nodes.splice(t,0,e),this)}addToStackBefore(e){const t=this._currentNode?this.nodes.indexOf(this._currentNode):0;return this.addToStack(e,t)}If(e,t){const r=new Ef(t);return this._currentCond=es(e,r),this.addToStack(this._currentCond)}ElseIf(e,t){const r=new Ef(t),i=es(e,r);return this._currentCond.elseNode=i,this._currentCond=i,this}Else(e){return this._currentCond.elseNode=new Ef(e),this}Switch(e){return this._expressionNode=ut(e),this}Case(...e){const t=[];if(e.length>=2)for(let o=0;o<e.length-1;o++)t.push(this._expressionNode.equal(ut(e[o])));else Ie("TSL: Invalid parameter length. Case() requires at least two parameters.");const r=e[e.length-1],i=new Ef(r);let s=t[0];for(let o=1;o<t.length;o++)s=s.or(t[o]);const a=es(s,i);return this._currentCond===null?(this._currentCond=a,this.addToStack(this._currentCond)):(this._currentCond.elseNode=a,this._currentCond=a,this)}Default(e){return this.Else(e),this}setup(e){const t=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())i.isVarNode&&i.isIntent(e)&&i.isAssign(e)!==!0||(t["node"+r++]=i);return t.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...t){const r=E4(),i=e.buildStage;__(this),e.setActiveStack(this);const s=u=>{if(this._currentNode=u,!(u.isVarNode&&u.isIntent(e)&&u.isAssign(e)!==!0)){if(i==="setup")u.build(e);else if(i==="analyze")u.build(e,this);else if(i==="generate"){const c=e.getDataFromNode(u,"any").stages,h=c&&c[e.shaderStage];if(u.isVarNode&&h&&h.length===1&&h[0]&&h[0].isStackNode)return;u.build(e,"void")}}},a=[...this.nodes];for(const u of a)s(u);this._currentNode=null;const o=this.nodes.filter(u=>a.indexOf(u)===-1);for(const u of o)s(u);let l;return this.hasOutput?l=this.outputNode.build(e,...t):l=super.build(e,...t),__(r),e.removeActiveStack(this),l}}const iE=mn(obe).setParameterLength(0,1);class Z$ extends Ar{static get type(){return"BitcastNode"}constructor(e,t,r=null){super(),this.valueNode=e,this.conversionType=t,this.inputType=r,this.isBitcastNode=!0}getNodeType(e){if(this.inputType!==null){const t=this.valueNode.getNodeType(e),r=e.getTypeLength(t);return e.getTypeFromLength(r,this.conversionType)}return this.conversionType}generate(e){const t=this.getNodeType(e);let r="";if(this.inputType!==null){const i=this.valueNode.getNodeType(e);r=e.getTypeLength(i)===1?this.inputType:e.changeComponentType(i,this.inputType)}else r=this.valueNode.getNodeType(e);return`${e.getBitcastMethod(t,r)}( ${this.valueNode.build(e,r)} )`}}const lbe=pt(Z$).setParameterLength(2),ube=n=>new Z$(n,"uint","float"),mb={};class Xu extends ge{static get type(){return"BitcountNode"}constructor(e,t){super(e,t),this.isBitcountNode=!0}_resolveElementType(e,t,r){r==="int"?t.assign(lbe(e,"uint")):t.assign(e)}_returnDataNode(e){switch(e){case"uint":return rn;case"int":return zn;case"uvec2":return w4;case"uvec3":return R4;case"uvec4":return C4;case"ivec2":return Fa;case"ivec3":return A4;case"ivec4":return N4}}_createTrailingZerosBaseLayout(e,t){const r=this._returnDataNode(t);return Ne(([s])=>{const a=rn(0);this._resolveElementType(s,a,t);const o=Te(a.bitAnd($4(a))),u=ube(o).shiftRight(23).sub(127);return r(u)}).setLayout({name:e,type:t,inputs:[{name:"value",type:t}]})}_createLeadingZerosBaseLayout(e,t){const r=this._returnDataNode(t);return Ne(([s])=>{In(s.equal(rn(0)),()=>rn(32));const a=rn(0),o=rn(0);return this._resolveElementType(s,a,t),In(a.shiftRight(16).equal(0),()=>{o.addAssign(16),a.shiftLeftAssign(16)}),In(a.shiftRight(24).equal(0),()=>{o.addAssign(8),a.shiftLeftAssign(8)}),In(a.shiftRight(28).equal(0),()=>{o.addAssign(4),a.shiftLeftAssign(4)}),In(a.shiftRight(30).equal(0),()=>{o.addAssign(2),a.shiftLeftAssign(2)}),In(a.shiftRight(31).equal(0),()=>{o.addAssign(1)}),r(o)}).setLayout({name:e,type:t,inputs:[{name:"value",type:t}]})}_createOneBitsBaseLayout(e,t){const r=this._returnDataNode(t);return Ne(([s])=>{const a=rn(0);this._resolveElementType(s,a,t),a.assign(a.sub(a.shiftRight(rn(1)).bitAnd(rn(1431655765)))),a.assign(a.bitAnd(rn(858993459)).add(a.shiftRight(rn(2)).bitAnd(rn(858993459))));const o=a.add(a.shiftRight(rn(4))).bitAnd(rn(252645135)).mul(rn(16843009)).shiftRight(rn(24));return r(o)}).setLayout({name:e,type:t,inputs:[{name:"value",type:t}]})}_createMainLayout(e,t,r,i){const s=this._returnDataNode(t);return Ne(([o])=>{if(r===1)return s(i(o));{const l=s(0),u=["x","y","z","w"];for(let c=0;c<r;c++){const h=u[c];l[h].assign(i(o[h]))}return l}}).setLayout({name:e,type:t,inputs:[{name:"value",type:t}]})}setup(e){const{method:t,aNode:r}=this,{renderer:i}=e;if(i.backend.isWebGPUBackend)return super.setup(e);const s=this.getInputType(e),a=e.getElementType(s),o=e.getTypeLength(s),l=`${t}_base_${a}`,u=`${t}_${s}`;let c=mb[l];if(c===void 0){switch(t){case Xu.COUNT_LEADING_ZEROS:{c=this._createLeadingZerosBaseLayout(l,a);break}case Xu.COUNT_TRAILING_ZEROS:{c=this._createTrailingZerosBaseLayout(l,a);break}case Xu.COUNT_ONE_BITS:{c=this._createOneBitsBaseLayout(l,a);break}}mb[l]=c}let h=mb[u];return h===void 0&&(h=this._createMainLayout(u,s,o,c),mb[u]=h),Ne(()=>h(r))()}}Xu.COUNT_TRAILING_ZEROS="countTrailingZeros";Xu.COUNT_LEADING_ZEROS="countLeadingZeros";Xu.COUNT_ONE_BITS="countOneBits";new ua;new Z;new Z;new Z;new sn;new Z(0,0,-1);new Wt;new Z;new Z;new Wt;new $e;const cbe=new hc;Ud.flipX();cbe.depthTexture=new Fi(1,1);const sE=new $h(-1,1,1,-1,0,1);class dbe extends jr{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new ur([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ur(t,2))}}const hbe=new dbe;class DI extends wr{constructor(e=null){super(hbe,e),this.camera=sE,this.isQuadMesh=!0}async renderAsync(e){jn('QuadMesh: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await e.init(),e.render(this,sE)}render(e){e.render(this,sE)}}const Q$=Ne(([n])=>Ja(Te(52.9829189).mul(Ja(ac(n,yt(.06711056,.00583715)))))).setLayout({name:"interleavedGradientNoise",type:"float",inputs:[{name:"position",type:"vec2"}]}),Ga=Ne(([n,e,t])=>{const r=Te(2.399963229728653),i=Do(Te(n).add(.5).div(Te(e))),s=Te(n).mul(r).add(t);return yt(Ua(s),_s(s)).mul(i)}).setLayout({name:"vogelDiskSample",type:"vec2",inputs:[{name:"sampleIndex",type:"int"},{name:"samplesCount",type:"int"},{name:"phi",type:"float"}]});class Oo extends xt{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===Oo.OBJECT?this.updateType=Xt.OBJECT:e===Oo.MATERIAL?this.updateType=Xt.RENDER:e===Oo.BEFORE_OBJECT?this.updateBeforeType=Xt.OBJECT:e===Oo.BEFORE_MATERIAL&&(this.updateBeforeType=Xt.RENDER)}update(e){this.callback(e)}updateBefore(e){this.callback(e)}}Oo.OBJECT="object";Oo.MATERIAL="material";Oo.BEFORE_OBJECT="beforeObject";Oo.BEFORE_MATERIAL="beforeMaterial";const lf=new is,aE=new sn;class ns extends xt{static get type(){return"SceneNode"}constructor(e=ns.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,r=this.scene!==null?this.scene:e.scene;let i;return t===ns.BACKGROUND_BLURRINESS?i=Cn("backgroundBlurriness","float",r):t===ns.BACKGROUND_INTENSITY?i=Cn("backgroundIntensity","float",r):t===ns.BACKGROUND_ROTATION?i=Lt("mat4").setName("backgroundRotation").setGroup(Ct).onRenderUpdate(()=>{const s=r.background;return s!==null&&s.isTexture&&s.mapping!==L1?(lf.copy(r.backgroundRotation),lf.x*=-1,lf.y*=-1,lf.z*=-1,aE.makeRotationFromEuler(lf)):aE.identity(),aE}):Ie("SceneNode: Unknown scope:",t),i}}ns.BACKGROUND_BLURRINESS="backgroundBlurriness";ns.BACKGROUND_INTENSITY="backgroundIntensity";ns.BACKGROUND_ROTATION="backgroundRotation";const pbe=Ke(ns,ns.BACKGROUND_BLURRINESS),HU=Ke(ns,ns.BACKGROUND_INTENSITY),fbe=Ke(ns,ns.BACKGROUND_ROTATION),gbe=Ne(({texture:n,uv:e})=>{const r=we().toVar();return In(e.x.lessThan(1e-4),()=>{r.assign(we(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{r.assign(we(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{r.assign(we(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{r.assign(we(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{r.assign(we(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{r.assign(we(0,0,-1))}).Else(()=>{const s=n.sample(e.add(we(-.01,0,0))).r.sub(n.sample(e.add(we(.01,0,0))).r),a=n.sample(e.add(we(0,-.01,0))).r.sub(n.sample(e.add(we(0,.01,0))).r),o=n.sample(e.add(we(0,0,-.01))).r.sub(n.sample(e.add(we(0,0,.01))).r);r.assign(we(s,a,o))}),r.normalize()});class mbe extends Yh{static get type(){return"Texture3DNode"}constructor(e,t=null,r=null){super(e,t,r),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return we(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const r=this.value;return e.isFlipY()&&(r.isRenderTargetTexture===!0||r.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(zn(qu(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,this.sampler===!0?"vec3":"ivec3")}generateOffset(e,t){return t.build(e,"ivec3")}normal(e){return gbe({texture:this,uv:e})}}const ybe=mn(mbe).setParameterLength(1,3),yb=new $e;class bbe extends Yh{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class jU extends bbe{static get type(){return"PassMultipleTextureNode"}constructor(e,t,r=!1){super(e,null),this.textureName=t,this.previousTexture=r}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}class Sv extends Ar{static get type(){return"PassNode"}constructor(e,t,r,i={}){super("vec4"),this.scope=e,this.scene=t,this.camera=r,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new Fi;s.isRenderTargetTexture=!0,s.name="depth";const a=new hc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:tr,...i});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this.overrideMaterial=null,this.transparent=!0,this.opaque=!0,this.contextNode=null,this._contextNodeCache=null,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Lt(0),this._cameraFar=Lt(0),this._mrt=null,this._layers=null,this._resolutionScale=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=Xt.FRAME,this.global=!0}setResolutionScale(e){return this._resolutionScale=e,this}getResolutionScale(){return this._resolutionScale}setResolution(e){return Ce("PassNode: .setResolution() is deprecated. Use .setResolutionScale() instead."),this.setResolutionScale(e)}getResolution(){return Ce("PassNode: .getResolution() is deprecated. Use .getResolutionScale() instead."),this.getResolutionScale()}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const r=this._textures[e],i=this.renderTarget.textures.indexOf(r);this.renderTarget.textures[i]=t,this._textures[e]=t,this._previousTextures[e]=r,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=new jU(this,e),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=new jU(this,e,!0),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=t=N$(this.getTextureNode(e),r,i)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=Yf(s,r,i)}return t}async compileAsync(e){const t=e.getRenderTarget(),r=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(r)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getOutputBufferType(),this.scope===Sv.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:r}=this;let i,s;const a=t.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(s=1,i=t.xr.getCamera(),t.xr.updateCamera(i),yb.set(a.width,a.height)):(i=this.camera,s=t.getPixelRatio(),t.getSize(yb)),this._pixelRatio=s,this.setSize(yb.width,yb.height);const o=t.getRenderTarget(),l=t.getMRT(),u=t.autoClear,c=t.transparent,h=t.opaque,f=i.layers.mask,g=t.contextNode,m=r.overrideMaterial;this._cameraNear.value=i.near,this._cameraFar.value=i.far,this._layers!==null&&(i.layers.mask=this._layers.mask);for(const _ in this._previousTextures)this.toggleTexture(_);this.overrideMaterial!==null&&(r.overrideMaterial=this.overrideMaterial),t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.autoClear=!0,t.transparent=this.transparent,t.opaque=this.opaque,this.contextNode!==null&&((this._contextNodeCache===null||this._contextNodeCache.version!==this.version)&&(this._contextNodeCache={version:this.version,context:mc({...t.contextNode.getFlowContextData(),...this.contextNode.getFlowContextData()})}),t.contextNode=this._contextNodeCache.context);const v=r.name;r.name=this.name?this.name:r.name,t.render(r,i),r.name=v,r.overrideMaterial=m,t.setRenderTarget(o),t.setMRT(l),t.autoClear=u,t.transparent=c,t.opaque=h,t.contextNode=g,i.layers.mask=f}setSize(e,t){this._width=e,this._height=t;const r=Math.floor(this._width*this._pixelRatio*this._resolutionScale),i=Math.floor(this._height*this._pixelRatio*this._resolutionScale);this.renderTarget.setSize(r,i),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,r,i){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new Wt),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,r,i),this._scissor.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setViewport(e,t,r,i){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new Wt),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,r,i),this._viewport.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Sv.COLOR="color";Sv.DEPTH="depth";const _be=Ne(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),vbe=Ne(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),xbe=Ne(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const t=n.mul(n.mul(6.2).add(.5)),r=n.mul(n.mul(6.2).add(1.7)).add(.06);return t.div(r).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Sbe=Ne(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),t=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),Ebe=Ne(([n,e])=>{const t=yi(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),r=yi(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=t.mul(n),n=Sbe(n),n=r.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Tbe=yi(we(1.6605,-.1246,-.0182),we(-.5876,1.1329,-.1006),we(-.0728,-.0083,1.1187)),wbe=yi(we(.6274,.0691,.0164),we(.3293,.9195,.088),we(.0433,.0113,.8956)),Abe=Ne(([n])=>{const e=we(n).toVar(),t=we(e.mul(e)).toVar(),r=we(t.mul(t)).toVar();return Te(15.5).mul(r.mul(t)).sub(Yt(40.14,r.mul(e))).add(Yt(31.96,r).sub(Yt(6.868,t.mul(e))).add(Yt(.4298,t).add(Yt(.1191,e).sub(.00232))))}),Rbe=Ne(([n,e])=>{const t=we(n).toVar(),r=yi(we(.856627153315983,.137318972929847,.11189821299995),we(.0951212405381588,.761241990602591,.0767994186031903),we(.0482516061458583,.101439036467562,.811302368396859)),i=yi(we(1.1271005818144368,-.1413297634984383,-.14132976349843826),we(-.11060664309660323,1.157823702216272,-.11060664309660294),we(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Te(-12.47393),a=Te(4.026069);return t.mulAssign(e),t.assign(wbe.mul(t)),t.assign(r.mul(t)),t.assign(ti(t,1e-10)),t.assign(Bo(t)),t.assign(t.sub(s).div(a.sub(s))),t.assign(Vl(t,0,1)),t.assign(Abe(t)),t.assign(i.mul(t)),t.assign(mv(ti(we(0),t),we(2.2))),t.assign(Tbe.mul(t)),t.assign(Vl(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Nbe=Ne(([n,e])=>{const t=Te(.76),r=Te(.15);n=n.mul(e);const i=xh(n.r,xh(n.g,n.b)),s=es(i.lessThan(.08),i.sub(Yt(6.25,i.mul(i))),.04);n.subAssign(s);const a=ti(n.r,ti(n.g,n.b));In(a.lessThan(t),()=>n);const o=Xi(1,t),l=Xi(1,o.mul(o).div(a.add(o.sub(t))));n.mulAssign(l.div(a));const u=Xi(1,Qa(1,r.mul(a.sub(l)).add(1)));return Mn(n,we(l),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Yr extends xt{static get type(){return"CodeNode"}constructor(e="",t=[],r=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=r}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const i of t)i.build(e);const r=e.getCodeFromNode(this,this.getNodeType(e));return r.code=this.code,r.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class Cbe extends Yr{static get type(){return"FunctionNode"}constructor(e="",t=[],r=""){super(e,t,r)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,t){const r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,t)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let r=t.nodeFunction;return r===void 0&&(r=e.parser.parseFunction(this.code),t.nodeFunction=r),r}generate(e,t){super.generate(e);const r=this.getNodeFunction(e),i=r.name,s=r.type,a=e.getCodeFromNode(this,s);i!==""&&(a.name=i);const o=e.getPropertyName(a),l=this.getNodeFunction(e).getCode(o);return a.code=l+`
`,t==="property"?o:e.format(`${o}()`,s,t)}}function J$(n){let e;const t=n.context.getViewZ;return t!==void 0&&(e=t(this)),(e||gr.z).negate()}const Mbe=Ne(([n,e],t)=>{const r=J$(t);return $o(n,e,r)}),Ibe=Ne(([n],e)=>{const t=J$(e);return n.mul(n,t,t).negate().exp().oneMinus()}),WU=Ne(([n,e])=>Ht(e.toFloat().mix(Hf.rgb,n.toVec3()),Hf.a));class kbe extends xt{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:r}=e;r.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}mn(kbe);class so extends xt{static get type(){return"AtomicFunctionNode"}constructor(e,t,r){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=r,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),r=t.parents,i=this.method,s=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,l=this.valueNode,u=[];u.push(`&${o.build(e,a)}`),l!==null&&u.push(l.build(e,a));const c=`${e.getMethod(i,s)}( ${u.join(", ")} )`;if(r?r.length===1&&r[0].isStackNode===!0:!1)e.addLineFlowCode(c,this);else return t.constNode===void 0&&(t.constNode=Sh(c,s).toConst()),t.constNode.build(e)}}so.ATOMIC_LOAD="atomicLoad";so.ATOMIC_STORE="atomicStore";so.ATOMIC_ADD="atomicAdd";so.ATOMIC_SUB="atomicSub";so.ATOMIC_MAX="atomicMax";so.ATOMIC_MIN="atomicMin";so.ATOMIC_AND="atomicAnd";so.ATOMIC_OR="atomicOr";so.ATOMIC_XOR="atomicXor";mn(so);class hn extends Ar{static get type(){return"SubgroupFunctionNode"}constructor(e,t=null,r=null){super(),this.method=e,this.aNode=t,this.bNode=r}getInputType(e){const t=this.aNode?this.aNode.getNodeType(e):null,r=this.bNode?this.bNode.getNodeType(e):null,i=e.isMatrix(t)?0:e.getTypeLength(t),s=e.isMatrix(r)?0:e.getTypeLength(r);return i>s?t:r}getNodeType(e){const t=this.method;return t===hn.SUBGROUP_ELECT?"bool":t===hn.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,t){const r=this.method,i=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,o=this.bNode,l=[];if(r===hn.SUBGROUP_BROADCAST||r===hn.SUBGROUP_SHUFFLE||r===hn.QUAD_BROADCAST){const c=o.getNodeType(e);l.push(a.build(e,i),o.build(e,c==="float"?"int":i))}else r===hn.SUBGROUP_SHUFFLE_XOR||r===hn.SUBGROUP_SHUFFLE_DOWN||r===hn.SUBGROUP_SHUFFLE_UP?l.push(a.build(e,i),o.build(e,"uint")):(a!==null&&l.push(a.build(e,s)),o!==null&&l.push(o.build(e,s)));const u=l.length===0?"()":`( ${l.join(", ")} )`;return e.format(`${e.getMethod(r,i)}${u}`,i,t)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}hn.SUBGROUP_ELECT="subgroupElect";hn.SUBGROUP_BALLOT="subgroupBallot";hn.SUBGROUP_ADD="subgroupAdd";hn.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd";hn.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd";hn.SUBGROUP_MUL="subgroupMul";hn.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul";hn.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul";hn.SUBGROUP_AND="subgroupAnd";hn.SUBGROUP_OR="subgroupOr";hn.SUBGROUP_XOR="subgroupXor";hn.SUBGROUP_MIN="subgroupMin";hn.SUBGROUP_MAX="subgroupMax";hn.SUBGROUP_ALL="subgroupAll";hn.SUBGROUP_ANY="subgroupAny";hn.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst";hn.QUAD_SWAP_X="quadSwapX";hn.QUAD_SWAP_Y="quadSwapY";hn.QUAD_SWAP_DIAGONAL="quadSwapDiagonal";hn.SUBGROUP_BROADCAST="subgroupBroadcast";hn.SUBGROUP_SHUFFLE="subgroupShuffle";hn.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor";hn.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp";hn.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown";hn.QUAD_BROADCAST="quadBroadcast";let bb;function Ev(n){bb=bb||new WeakMap;let e=bb.get(n);return e===void 0&&bb.set(n,e={}),e}function OI(n){const e=Ev(n);return e.shadowMatrix||(e.shadowMatrix=Lt("mat4").setGroup(Ct).onRenderUpdate(t=>((n.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&(n.shadow.camera.coordinateSystem!==t.camera.coordinateSystem&&(n.shadow.camera.coordinateSystem=t.camera.coordinateSystem,n.shadow.camera.updateProjectionMatrix()),n.shadow.updateMatrices(n)),n.shadow.matrix)))}function Lbe(n,e=Eh){const t=OI(n).mul(e);return t.xyz.div(t.w)}function eH(n){const e=Ev(n);return e.position||(e.position=Lt(new Z).setGroup(Ct).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.matrixWorld)))}function Dbe(n){const e=Ev(n);return e.targetPosition||(e.targetPosition=Lt(new Z).setGroup(Ct).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.target.matrixWorld)))}function tH(n){const e=Ev(n);return e.viewPosition||(e.viewPosition=Lt(new Z).setGroup(Ct).onRenderUpdate(({camera:t},r)=>{r.value=r.value||new Z,r.value.setFromMatrixPosition(n.matrixWorld),r.value.applyMatrix4(t.matrixWorldInverse)}))}const nH=n=>Wo.transformDirection(eH(n).sub(Dbe(n))),Obe=n=>n.sort((e,t)=>e.id-t.id),Pbe=(n,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===n)return t;return null},oE=new WeakMap,uf=[];class rH extends xt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Ul("vec3","totalDiffuse"),this.totalSpecularNode=Ul("vec3","totalSpecular"),this.outgoingLightNode=Ul("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let r=0;r<e.length;r++){const i=e[r];if(uf.push(i.id),uf.push(i.castShadow?1:0),i.isSpotLight===!0){const s=i.map!==null?i.map.id:-1,a=i.colorNode?i.colorNode.getCacheKey():-1;uf.push(s,a)}}const t=lm(uf);return uf.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const r of this._lightNodes)t.push(r.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const r of t.nodes)r.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],r=this._lightNodes,i=Obe(this._lights),s=e.renderer.library;for(const a of i)if(a.isNode)t.push(ut(a));else{let o=null;if(r!==null&&(o=Pbe(a.id,r)),o===null){const l=s.getLightNodeClass(a.constructor);if(l===null){Ce(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let u=null;oE.has(a)?u=oE.get(a):(u=new l(a),oE.set(a,u)),t.push(u)}}this._lightNodes=t}setupDirectLight(e,t,r){const{lightingModel:i,reflectedLight:s}=e.context;i.direct({...r,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,r){const{lightingModel:i,reflectedLight:s}=e.context;i.directRectArea({...r,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const r of t)r.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let r=this.outgoingLightNode;const i=e.context,s=i.lightingModel,a=e.getNodeProperties(this);if(s){const{totalDiffuseNode:o,totalSpecularNode:l}=this;i.outgoingLight=r;const u=e.addStack();a.nodes=u.nodes,s.start(e);const{backdrop:c,backdropAlpha:h}=i,{directDiffuse:f,directSpecular:g,indirectDiffuse:m,indirectSpecular:v}=i.reflectedLight;let _=f.add(m);c!==null&&(h!==null?_=we(h.mix(_,c)):_=we(c)),o.assign(_),l.assign(g.add(v)),r.assign(o.add(l)),s.finish(e),r=r.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,r}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}class Fbe extends xt{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=Xt.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){iH.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||Eh)}}const iH=Ul("vec3","shadowPositionWorld");function Ube(n,e={}){return e.toneMapping=n.toneMapping,e.toneMappingExposure=n.toneMappingExposure,e.outputColorSpace=n.outputColorSpace,e.renderTarget=n.getRenderTarget(),e.activeCubeFace=n.getActiveCubeFace(),e.activeMipmapLevel=n.getActiveMipmapLevel(),e.renderObjectFunction=n.getRenderObjectFunction(),e.pixelRatio=n.getPixelRatio(),e.mrt=n.getMRT(),e.clearColor=n.getClearColor(e.clearColor||new Et),e.clearAlpha=n.getClearAlpha(),e.autoClear=n.autoClear,e.scissorTest=n.getScissorTest(),e}function Bbe(n,e){return e=Ube(n,e),n.setMRT(null),n.setRenderObjectFunction(null),n.setClearColor(0,1),n.autoClear=!0,e}function zbe(n,e){n.toneMapping=e.toneMapping,n.toneMappingExposure=e.toneMappingExposure,n.outputColorSpace=e.outputColorSpace,n.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),n.setRenderObjectFunction(e.renderObjectFunction),n.setPixelRatio(e.pixelRatio),n.setMRT(e.mrt),n.setClearColor(e.clearColor,e.clearAlpha),n.autoClear=e.autoClear,n.setScissorTest(e.scissorTest)}function Gbe(n,e={}){return e.background=n.background,e.backgroundNode=n.backgroundNode,e.overrideMaterial=n.overrideMaterial,e}function Vbe(n,e){return e=Gbe(n,e),n.background=null,n.backgroundNode=null,n.overrideMaterial=null,e}function $be(n,e){n.background=e.background,n.backgroundNode=e.backgroundNode,n.overrideMaterial=e.overrideMaterial}function Hbe(n,e,t){return t=Bbe(n,t),t=Vbe(e,t),t}function jbe(n,e,t){zbe(n,t),$be(e,t)}const T_=new WeakMap,Wbe=Ne(({depthTexture:n,shadowCoord:e,depthLayer:t})=>{let r=Gn(n,e.xy).setName("t_basic");return n.isArrayTexture&&(r=r.depth(t)),r.compare(e.z)}),qbe=Ne(({depthTexture:n,shadowCoord:e,shadow:t,depthLayer:r})=>{const i=(c,h)=>{let f=Gn(n,c);return n.isArrayTexture&&(f=f.depth(r)),f.compare(h)},s=Cn("mapSize","vec2",t).setGroup(Ct),a=Cn("radius","float",t).setGroup(Ct),o=yt(1).div(s),l=a.mul(o.x),u=Q$(Kh.xy).mul(6.28318530718);return ss(i(e.xy.add(Ga(0,5,u).mul(l)),e.z),i(e.xy.add(Ga(1,5,u).mul(l)),e.z),i(e.xy.add(Ga(2,5,u).mul(l)),e.z),i(e.xy.add(Ga(3,5,u).mul(l)),e.z),i(e.xy.add(Ga(4,5,u).mul(l)),e.z)).mul(1/5)}),Xbe=Ne(({depthTexture:n,shadowCoord:e,shadow:t,depthLayer:r})=>{const i=(h,f)=>{let g=Gn(n,h);return n.isArrayTexture&&(g=g.depth(r)),g.compare(f)},s=Cn("mapSize","vec2",t).setGroup(Ct),a=yt(1).div(s),o=a.x,l=a.y,u=e.xy,c=Ja(u.mul(s).add(.5));return u.subAssign(c.mul(a)),ss(i(u,e.z),i(u.add(yt(o,0)),e.z),i(u.add(yt(0,l)),e.z),i(u.add(a),e.z),Mn(i(u.add(yt(o.negate(),0)),e.z),i(u.add(yt(o.mul(2),0)),e.z),c.x),Mn(i(u.add(yt(o.negate(),l)),e.z),i(u.add(yt(o.mul(2),l)),e.z),c.x),Mn(i(u.add(yt(0,l.negate())),e.z),i(u.add(yt(0,l.mul(2))),e.z),c.y),Mn(i(u.add(yt(o,l.negate())),e.z),i(u.add(yt(o,l.mul(2))),e.z),c.y),Mn(Mn(i(u.add(yt(o.negate(),l.negate())),e.z),i(u.add(yt(o.mul(2),l.negate())),e.z),c.x),Mn(i(u.add(yt(o.negate(),l.mul(2))),e.z),i(u.add(yt(o.mul(2),l.mul(2))),e.z),c.x),c.y)).mul(1/9)}),Ybe=Ne(({depthTexture:n,shadowCoord:e,depthLayer:t})=>{let r=Gn(n).sample(e.xy);n.isArrayTexture&&(r=r.depth(t)),r=r.rg;const i=r.x,s=ti(1e-7,r.y.mul(r.y)),a=q4(e.z,i);In(a.equal(1),()=>Te(1));const o=e.z.sub(i);let l=s.div(s.add(o.mul(o)));return l=Vl(Xi(l,.3).div(.65)),ti(a,l)}),Kbe=Ne(([n,e,t])=>{let r=Eh.sub(n).length();return r=r.sub(e).div(t.sub(e)),r=r.saturate(),r}),Zbe=n=>{const e=n.shadow.camera,t=Cn("near","float",e).setGroup(Ct),r=Cn("far","float",e).setGroup(Ct),i=gfe(n);return Kbe(i,t,r)},Qbe=n=>{let e=T_.get(n);if(e===void 0){const t=n.isPointLight?Zbe(n):null;e=new mr,e.colorNode=Ht(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,T_.set(n,e)}return e},Jbe=n=>{const e=T_.get(n);e!==void 0&&(e.dispose(),T_.delete(n))},qU=new _a,cd=[],e_e=(n,e,t,r)=>{cd[0]=n,cd[1]=e;let i=qU.get(cd);return(i===void 0||i.shadowType!==t||i.useVelocity!==r)&&(i=(s,a,o,l,u,c,...h)=>{(s.castShadow===!0||s.receiveShadow&&t===Io)&&(r&&(_4(s).useVelocity=!0),s.onBeforeShadow(n,s,o,e.camera,l,a.overrideMaterial,c),n.renderObject(s,a,o,l,u,c,...h),s.onAfterShadow(n,s,o,e.camera,l,a.overrideMaterial,c))},i.shadowType=t,i.useVelocity=r,qU.set(cd,i)),cd[0]=null,cd[1]=null,i},t_e=Ne(({samples:n,radius:e,size:t,shadowPass:r,depthLayer:i})=>{const s=Te(0).toVar("meanVertical"),a=Te(0).toVar("squareMeanVertical"),o=n.lessThanEqual(Te(1)).select(Te(0),Te(2).div(n.sub(1))),l=n.lessThanEqual(Te(1)).select(Te(0),Te(-1));Us({start:zn(0),end:zn(n),type:"int",condition:"<"},({i:c})=>{const h=l.add(Te(c).mul(o));let f=r.sample(ss(Kh.xy,yt(0,h).mul(e)).div(t));r.value.isArrayTexture&&(f=f.depth(i)),f=f.x,s.addAssign(f),a.addAssign(f.mul(f))}),s.divAssign(n),a.divAssign(n);const u=Do(a.sub(s.mul(s)).max(0));return yt(s,u)}),n_e=Ne(({samples:n,radius:e,size:t,shadowPass:r,depthLayer:i})=>{const s=Te(0).toVar("meanHorizontal"),a=Te(0).toVar("squareMeanHorizontal"),o=n.lessThanEqual(Te(1)).select(Te(0),Te(2).div(n.sub(1))),l=n.lessThanEqual(Te(1)).select(Te(0),Te(-1));Us({start:zn(0),end:zn(n),type:"int",condition:"<"},({i:c})=>{const h=l.add(Te(c).mul(o));let f=r.sample(ss(Kh.xy,yt(h,0).mul(e)).div(t));r.value.isArrayTexture&&(f=f.depth(i)),s.addAssign(f.x),a.addAssign(ss(f.y.mul(f.y),f.x.mul(f.x)))}),s.divAssign(n),a.divAssign(n);const u=Do(a.sub(s.mul(s)).max(0));return yt(s,u)}),r_e=[Wbe,qbe,Xbe,Ybe];let lE;const _b=new DI;class sH extends Fbe{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._currentShadowType=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:r,shadowCoord:i,shadow:s,depthLayer:a}){const o=i.x.greaterThanEqual(0).and(i.x.lessThanEqual(1)).and(i.y.greaterThanEqual(0)).and(i.y.lessThanEqual(1)).and(i.z.lessThanEqual(1)),l=t({depthTexture:r,shadowCoord:i,shadow:s,depthLayer:a});return o.select(l,Te(1))}setupShadowCoord(e,t){const{shadow:r}=this,{renderer:i}=e,s=Cn("bias","float",r).setGroup(Ct);let a=t,o;if(r.camera.isOrthographicCamera||i.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,i.coordinateSystem===Za&&(o=o.mul(2).sub(1));else{const l=a.w;a=a.xy.div(l);const u=Cn("near","float",r.camera).setGroup(Ct),c=Cn("far","float",r.camera).setGroup(Ct);o=C$(l.negate(),u,c)}return a=we(a.x,a.y.oneMinus(),o.add(s)),a}getShadowFilterFn(e){return r_e[e]}setupRenderTarget(e,t){const r=new Fi(e.mapSize.width,e.mapSize.height);r.name="ShadowDepthTexture",r.compareFunction=Jg;const i=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return i.texture.name="ShadowMap",i.texture.type=e.mapType,i.depthTexture=r,{shadowMap:i,depthTexture:r}}setupShadow(e){const{renderer:t,camera:r}=e,{light:i,shadow:s}=this,a=t.shadowMap.type,{depthTexture:o,shadowMap:l}=this.setupRenderTarget(s,e);if(s.camera.coordinateSystem=r.coordinateSystem,s.camera.updateProjectionMatrix(),a===Io&&s.isPointLightShadow!==!0){o.compareFunction=null,l.depth>1?(l._vsmShadowMapVertical||(l._vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Di,type:tr,depth:l.depth,depthBuffer:!1}),l._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=l._vsmShadowMapVertical,l._vsmShadowMapHorizontal||(l._vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Di,type:tr,depth:l.depth,depthBuffer:!1}),l._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=l._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Di,type:tr,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Di,type:tr,depthBuffer:!1}));let E=Gn(o);o.isArrayTexture&&(E=E.depth(this.depthLayer));let A=Gn(this.vsmShadowMapVertical.texture);o.isArrayTexture&&(A=A.depth(this.depthLayer));const R=Cn("blurSamples","float",s).setGroup(Ct),w=Cn("radius","float",s).setGroup(Ct),M=Cn("mapSize","vec2",s).setGroup(Ct);let I=this.vsmMaterialVertical||(this.vsmMaterialVertical=new mr);I.fragmentNode=t_e({samples:R,radius:w,size:M,shadowPass:E,depthLayer:this.depthLayer}).context(e.getSharedContext()),I.name="VSMVertical",I=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new mr),I.fragmentNode=n_e({samples:R,radius:w,size:M,shadowPass:A,depthLayer:this.depthLayer}).context(e.getSharedContext()),I.name="VSMHorizontal"}const u=Cn("intensity","float",s).setGroup(Ct),c=Cn("normalBias","float",s).setGroup(Ct),h=OI(i).mul(iH.add(Zh.mul(c))),f=this.setupShadowCoord(e,h),g=s.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(g===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const m=a===Io&&s.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:o,v=this.setupShadowFilter(e,{filterFn:g,shadowTexture:l.texture,depthTexture:m,shadowCoord:f,shadow:s,depthLayer:this.depthLayer});let _;l.texture.isCubeTexture?_=Ki(l.texture,f.xyz):(_=Gn(l.texture,f),o.isArrayTexture&&(_=_.depth(this.depthLayer)));const b=Mn(1,v.rgb.mix(_,1),u.mul(_.a)).toVar();this.shadowMap=l,this.shadow.map=l;const S=`${this.light.type} Shadow [ ${this.light.name||"ID: "+this.light.id} ]`;return b.toInspector(`${S} / Color`,()=>this.shadowMap.texture.isCubeTexture?Ki(this.shadowMap.texture):Gn(this.shadowMap.texture)).toInspector(`${S} / Depth`,()=>this.shadowMap.texture.isCubeTexture?Ki(this.shadowMap.texture).r.oneMinus():Ps(this.shadowMap.depthTexture,Xh().mul(qu(Gn(this.shadowMap.depthTexture)))).r.oneMinus())}setup(e){if(e.renderer.shadowMap.enabled!==!1)return Ne(()=>{const t=e.renderer.shadowMap.type;this._currentShadowType!==t&&(this._reset(),this._node=null);let r=this._node;return this.setupShadowPosition(e),r===null&&(this._node=r=this.setupShadow(e),this._currentShadowType=t),e.material.shadowNode&&Ce('NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(r=e.material.receivedShadowNode(r)),r})()}renderShadow(e){const{shadow:t,shadowMap:r,light:i}=this,{renderer:s,scene:a}=e;t.updateMatrices(i),r.setSize(t.mapSize.width,t.mapSize.height,r.depth);const o=a.name;a.name=`Shadow Map [ ${i.name||"ID: "+i.id} ]`,s.render(a,t.camera),a.name=o}updateShadow(e){const{shadowMap:t,light:r,shadow:i}=this,{renderer:s,scene:a,camera:o}=e,l=s.shadowMap.type,u=t.depthTexture.version;this._depthVersionCached=u;const c=i.camera.layers.mask;(i.camera.layers.mask&4294967294)===0&&(i.camera.layers.mask=o.layers.mask);const h=s.getRenderObjectFunction(),f=s.getMRT(),g=f?f.has("velocity"):!1;lE=Hbe(s,a,lE),a.overrideMaterial=Qbe(r),s.setRenderObjectFunction(e_e(s,i,l,g)),s.setClearColor(0,0),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(h),l===Io&&i.isPointLightShadow!==!0&&this.vsmPass(s),i.camera.layers.mask=c,jbe(s,a,lE)}vsmPass(e){const{shadow:t}=this,r=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,r),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,r),e.setRenderTarget(this.vsmShadowMapVertical),_b.material=this.vsmMaterialVertical,_b.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),_b.material=this.vsmMaterialHorizontal,_b.render(e)}dispose(){this._reset(),super.dispose()}_reset(){this._currentShadowType=null,Jbe(this.light),this.shadowMap&&(this.shadowMap.dispose(),this.shadowMap=null),this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null)}updateBefore(e){const{shadow:t}=this;let r=t.needsUpdate||t.autoUpdate;r&&(this._cameraFrameId[e.camera]===e.frameId&&(r=!1),this._cameraFrameId[e.camera]=e.frameId),r&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const i_e=(n,e)=>new sH(n,e),s_e=new Et,XU=new sn,cf=new Z,uE=new Z,a_e=[new Z(1,0,0),new Z(-1,0,0),new Z(0,-1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)],o_e=[new Z(0,-1,0),new Z(0,-1,0),new Z(0,0,-1),new Z(0,0,1),new Z(0,-1,0),new Z(0,-1,0)],l_e=[new Z(1,0,0),new Z(-1,0,0),new Z(0,1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1)],u_e=[new Z(0,-1,0),new Z(0,-1,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,-1,0),new Z(0,-1,0)],c_e=Ne(({depthTexture:n,bd3D:e,dp:t})=>Ki(n,e).compare(t)),d_e=Ne(({depthTexture:n,bd3D:e,dp:t,shadow:r})=>{const i=Cn("radius","float",r).setGroup(Ct),s=Cn("mapSize","vec2",r).setGroup(Ct),a=i.div(s.x),o=vs(e),l=ma(oc(e,o.x.greaterThan(o.z).select(we(0,1,0),we(1,0,0)))),u=oc(e,l),c=Q$(Kh.xy).mul(6.28318530718),h=Ga(0,5,c),f=Ga(1,5,c),g=Ga(2,5,c),m=Ga(3,5,c),v=Ga(4,5,c);return Ki(n,e.add(l.mul(h.x).add(u.mul(h.y)).mul(a))).compare(t).add(Ki(n,e.add(l.mul(f.x).add(u.mul(f.y)).mul(a))).compare(t)).add(Ki(n,e.add(l.mul(g.x).add(u.mul(g.y)).mul(a))).compare(t)).add(Ki(n,e.add(l.mul(m.x).add(u.mul(m.y)).mul(a))).compare(t)).add(Ki(n,e.add(l.mul(v.x).add(u.mul(v.y)).mul(a))).compare(t)).mul(1/5)}),h_e=Ne(({filterFn:n,depthTexture:e,shadowCoord:t,shadow:r})=>{const i=t.xyz.toVar(),s=i.length(),a=Lt("float").setGroup(Ct).onRenderUpdate(()=>r.camera.near),o=Lt("float").setGroup(Ct).onRenderUpdate(()=>r.camera.far),l=Cn("bias","float",r).setGroup(Ct),u=Te(1).toVar();return In(s.sub(o).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const c=s.sub(a).div(o.sub(a)).toVar();c.addAssign(l);const h=i.normalize();u.assign(n({depthTexture:e,bd3D:h,dp:c,shadow:r}))}),u});class p_e extends sH{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===gte?c_e:d_e}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,depthTexture:r,shadowCoord:i,shadow:s}){return h_e({filterFn:t,depthTexture:r,shadowCoord:i,shadow:s})}setupRenderTarget(e,t){const r=new vV(e.mapSize.width);r.name="PointShadowDepthTexture",r.compareFunction=Jg;const i=t.createCubeRenderTarget(e.mapSize.width);return i.texture.name="PointShadowMap",i.depthTexture=r,{shadowMap:i,depthTexture:r}}renderShadow(e){const{shadow:t,shadowMap:r,light:i}=this,{renderer:s,scene:a}=e,o=t.camera,l=t.matrix,u=s.coordinateSystem===Za,c=u?a_e:l_e,h=u?o_e:u_e;r.setSize(t.mapSize.width,t.mapSize.width);const f=s.autoClear,g=s.getClearColor(s_e),m=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha);for(let v=0;v<6;v++){s.setRenderTarget(r,v),s.clear();const _=i.distance||o.far;_!==o.far&&(o.far=_,o.updateProjectionMatrix()),cf.setFromMatrixPosition(i.matrixWorld),o.position.copy(cf),uE.copy(o.position),uE.add(c[v]),o.up.copy(h[v]),o.lookAt(uE),o.updateMatrixWorld(),l.makeTranslation(-cf.x,-cf.y,-cf.z),XU.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),t._frustum.setFromProjectionMatrix(XU,o.coordinateSystem,o.reversedDepth);const b=a.name;a.name=`Point Light Shadow [ ${i.name||"ID: "+i.id} ] - Face ${v+1}`,s.render(a,o),a.name=b}s.autoClear=f,s.setClearColor(g,m)}}const f_e=(n,e)=>new p_e(n,e);class yc extends Qh{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Et,this.colorNode=e&&e.colorNode||Lt(this.color).setGroup(Ct),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=Xt.FRAME,e&&e.shadow&&(this._shadowDisposeListener=()=>{this.disposeShadow()},e.addEventListener("dispose",this._shadowDisposeListener))}dispose(){this._shadowDisposeListener&&this.light.removeEventListener("dispose",this._shadowDisposeListener),super.dispose()}disposeShadow(){this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null),this.shadowColorNode=null,this.baseColorNode!==null&&(this.colorNode=this.baseColorNode,this.baseColorNode=null)}getHash(){return this.light.uuid}getLightVector(e){return tH(this.light).sub(e.context.positionView||gr)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return i_e(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let r=this.shadowColorNode;if(r===null){const i=this.light.shadow.shadowNode;let s;i!==void 0?s=ut(i):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=r=this.colorNode.mul(s),this.baseColorNode=this.colorNode}e.context.getShadow&&(r=e.context.getShadow(this,e)),this.colorNode=r}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),r=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),r&&e.lightsNode.setupDirectRectAreaLight(e,this,r)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const aH=Ne(({lightDistance:n,cutoffDistance:e,decayExponent:t})=>{const r=n.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(r.mul(n.div(e).pow4().oneMinus().clamp().pow2()),r)}),g_e=({color:n,lightVector:e,cutoffDistance:t,decayExponent:r})=>{const i=e.normalize(),s=e.length(),a=aH({lightDistance:s,cutoffDistance:t,decayExponent:r}),o=n.mul(a);return{lightDirection:i,lightColor:o}};class m_e extends yc{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Lt(0).setGroup(Ct),this.decayExponentNode=Lt(2).setGroup(Ct)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return f_e(this.light)}setupDirect(e){return g_e({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}Ne(([n=Xh()],{renderer:e,material:t})=>{const r=K4(n.mul(2).sub(1));let i;if(t.alphaToCoverage&&e.currentSamples>0){const s=Te(r.fwidth()).toVar();i=$o(s.oneMinus(),s.add(1),r).oneMinus()}else i=es(r.greaterThan(1),0,1);return i});const y_e=Ne(([n,e])=>{const t=n.x,r=n.y,i=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(r)),s=s.add(e.element(2).mul(2*.511664).mul(i)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(5).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(6).mul(i.mul(i).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(i)),s=s.add(e.element(8).mul(.429043).mul(Yt(t,t).sub(Yt(r,r)))),s}),ia=new LI;class b_e extends ql{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,r){const i=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)i._clearColor.getRGB(ia),ia.a=i._clearColor.a;else if(s.isColor===!0)s.getRGB(ia),ia.a=1,a=!0;else if(s.isNode===!0){const l=this.get(e),u=s;ia.copy(i._clearColor);let c=l.backgroundMesh;if(c===void 0){let S=function(){s.removeEventListener("dispose",S),c.material.dispose(),c.geometry.dispose()};const f=Ht(u).mul(HU).context({getUV:()=>fbe.mul(xfe),getTextureLevel:()=>pbe}),g=qf.element(3).element(3).equal(1),m=Qa(1,qf.element(1).element(1)).mul(3),v=g.select(Hr.mul(m),Hr);let _=qf.mul(dm.mul(Ht(v,0)));_=_.setZ(_.w);const b=new mr;b.name="Background.material",b.side=On,b.depthTest=!1,b.depthWrite=!1,b.allowOverride=!1,b.fog=!1,b.lights=!1,b.vertexNode=_,b.colorNode=f,l.backgroundMeshNode=f,l.backgroundMesh=c=new wr(new om(1,32,32),b),c.frustumCulled=!1,c.name="Background.mesh",s.addEventListener("dispose",S)}const h=u.getCacheKey();l.backgroundCacheKey!==h&&(l.backgroundMeshNode.node=Ht(u).mul(HU),l.backgroundMeshNode.needsUpdate=!0,c.material.needsUpdate=!0,l.backgroundCacheKey=h),t.unshift(c,c.geometry,c.material,0,0,null,null)}else Ie("Renderer: Unsupported background configuration.",s);const o=i.xr.getEnvironmentBlendMode();if(o==="additive"?ia.set(0,0,0,1):o==="alpha-blend"&&ia.set(0,0,0,0),i.autoClear===!0||a===!0){const l=r.clearColorValue;l.r=ia.r,l.g=ia.g,l.b=ia.b,l.a=ia.a,(i.backend.isWebGLBackend===!0||i.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),r.depthClearValue=i._clearDepth,r.stencilClearValue=i._clearStencil,r.clearColor=i.autoClearColor===!0,r.clearDepth=i.autoClearDepth===!0,r.clearStencil=i.autoClearStencil===!0}else r.clearColor=!1,r.clearDepth=!1,r.clearStencil=!1}}let __e=0;class sw{constructor(e="",t=[],r=0,i=[]){this.name=e,this.bindings=t,this.index=r,this.bindingsReference=i,this.id=__e++}}class v_e{constructor(e,t,r,i,s,a,o,l,u,c=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=r,this.transforms=c,this.nodeAttributes=i,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=l,this.observer=u,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const i=new sw(t.name,[],t.index,t.bindingsReference);e.push(i);for(const s of t.bindings)i.bindings.push(s.clone())}else e.push(t);return e}}class YU{constructor(e,t,r=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=r}}class x_e{constructor(e,t,r){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=r}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class oH{constructor(e,t,r=!1,i=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=r,this.count=i}}class S_e extends oH{constructor(e,t,r=null,i=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=r,this.interpolationSampling=i}}class E_e{constructor(e,t,r=""){this.name=e,this.type=t,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})}}let T_e=0;class cE{constructor(e=null){this.id=T_e++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class w_e{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class Xl{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class A_e extends Xl{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class R_e extends Xl{constructor(e,t=new $e){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class N_e extends Xl{constructor(e,t=new Z){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class C_e extends Xl{constructor(e,t=new Wt){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class M_e extends Xl{constructor(e,t=new Et){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class I_e extends Xl{constructor(e,t=new sv){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class k_e extends Xl{constructor(e,t=new $t){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class L_e extends Xl{constructor(e,t=new sn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class D_e extends A_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class O_e extends R_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class P_e extends N_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class F_e extends C_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class U_e extends M_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class B_e extends I_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class z_e extends k_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class G_e extends L_e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}let V_e=0;const $_e=new WeakMap,KU=new WeakMap,H_e=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),vb=n=>/e/g.test(n)?String(n).replace(/\+/g,""):(n=Number(n),n+(n%1?"":".0"));class lH{constructor(e,t,r){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=iE(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new cE,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.activeStacks=[],this.subBuildFn=null,this.fnCall=null,Object.defineProperty(this,"id",{value:V_e++})}isOpaque(){const e=this.material;return e.transparent===!1&&e.blending===Es&&e.alphaToCoverage===!1}getBindGroupsCache(){let e=KU.get(this.renderer);return e===void 0&&(e=new _a,KU.set(this.renderer,e)),e}createRenderTarget(e,t,r){return new hc(e,t,r)}createCubeRenderTarget(e,t){return new L$(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const r=this.getBindGroupsCache(),i=[];let s=!0;for(const o of t)i.push(o),s=s&&o.groupNode.shared!==!0;let a;return s?(a=r.get(i),a===void 0&&(a=new sw(e,i,this.bindingsIndexes[e].group,i),r.set(i,a))):a=new sw(e,i,this.bindingsIndexes[e].group,i),a}getBindGroupArray(e,t){const r=this.bindings[t];let i=r[e];return i===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),r[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(e===null){const t={},r=this.bindings;for(const i of V2)for(const s in r[i]){const a=r[i][s];(t[s]||(t[s]=[])).push(...a)}e=[];for(const i in t){const s=t[i],a=this._getBindGroup(i,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,r)=>t.bindings[0].groupNode.order-r.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const r=e[t];this.bindingsIndexes[r.name].group=t,r.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==Xt.NONE&&this.updateNodes.push(e);for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),r=e.getUpdateAfterType();t!==Xt.NONE&&this.updateBeforeNodes.push(e),r!==Xt.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Vn||e.magFilter===Ld||e.magFilter===ko||e.magFilter===Ji||e.minFilter===Vn||e.minFilter===Ld||e.minFilter===ko||e.minFilter===Ji}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}addContext(e){const t=this.getContext();return this.setContext({...this.context,...e}),t}getSharedContext(){const e={...this.context};return delete e.material,delete e.getUV,delete e.getOutput,delete e.getTextureLevel,delete e.getAO,delete e.getShadow,e}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const r=this.getDataFromNode(e);return r.cache===void 0&&(r.cache=new cE(t?this.getCache():null)),r.cache}isAvailable(){return!1}getVertexIndex(){Ce("Abstract function.")}getInstanceIndex(){Ce("Abstract function.")}getDrawIndex(){Ce("Abstract function.")}getFrontFacing(){Ce("Abstract function.")}getFragCoord(){Ce("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){Ce("Abstract function.")}generateTextureLod(){Ce("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,r=null){let i=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const a=r?r[s]:null;a!==null?i+=a.build(this,e):i+=this.generateConst(e),s<t-1&&(i+=", ")}return i+=" )",i}generateStruct(e,t,r=null){const i=[];for(const s of t){const{name:a,type:o}=s;r&&r[a]&&r[a].isNode?i.push(r[a].build(this,o)):i.push(this.generateConst(o))}return e+"( "+i.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Et:e==="vec2"||e==="uvec2"||e==="ivec2"?t=new $e:e==="vec3"||e==="uvec3"||e==="ivec3"?t=new Z:(e==="vec4"||e==="uvec4"||e==="ivec4")&&(t=new Wt)),e==="float")return vb(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${vb(t.r)}, ${vb(t.g)}, ${vb(t.b)} )`;const r=this.getTypeLength(e),i=this.getComponentType(e),s=a=>this.generateConst(i,a);if(r===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(r===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(r===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(r>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(r>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const r=this.attributes;for(const s of r)if(s.name===e)return s;const i=new YU(e,t);return this.registerDeclaration(i),r.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===Vr)return"int";if(t===An)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let r=b4(e);const i=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(r=r.replace("vec","mat")),i+r}getTypeFromArray(e){return H_e.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const r=t.array,i=e.itemSize,s=e.normalized;let a;return!(e instanceof fV)&&s!==!0&&(a=this.getTypeFromArray(r)),this.getTypeFromLength(i,a)}getTypeLength(e){const t=this.getVectorType(e),r=/vec([2-4])/.exec(t);return r!==null?Number(r[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}setActiveStack(e){this.activeStacks.push(e)}removeActiveStack(e){if(this.activeStacks[this.activeStacks.length-1]===e)this.activeStacks.pop();else throw new Error("NodeBuilder: Invalid active stack removal.")}getActiveStack(){return this.activeStacks[this.activeStacks.length-1]}getBaseStack(){return this.activeStacks[0]}addStack(){this.stack=iE(this.stack);const e=E4();return this.stacks.push(e),__(this.stack),this.stack}removeStack(){const e=this.stack;for(const t of e.nodes){const r=this.getDataFromNode(t);r.stack=e}return this.stack=e.parent,__(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,r=null){r=r===null?e.isGlobal(this)?this.globalCache:this.cache:r;let i=r.getData(e);i===void 0&&(i={},r.setData(e,i)),i[t]===void 0&&(i[t]={});let s=i[t];const a=i.any?i.any.subBuilds:null,o=this.getClosestSubBuild(a);return o&&(s.subBuildsCache===void 0&&(s.subBuildsCache={}),s=s.subBuildsCache[o]||(s.subBuildsCache[o]={}),s.subBuilds=a),s}getNodeProperties(e,t="any"){const r=this.getDataFromNode(e,t);return r.properties||(r.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const r=this.getDataFromNode(e,"vertex");let i=r.bufferAttribute;if(i===void 0){const s=this.uniforms.index++;i=new YU("nodeAttribute"+s,t,e),this.bufferAttributes.push(i),r.bufferAttribute=i}return i}getStructTypeNode(e,t=this.shaderStage){return this.types[t][e]||null}getStructTypeFromNode(e,t,r=null,i=this.shaderStage){const s=this.getDataFromNode(e,i,this.globalCache);let a=s.structType;if(a===void 0){const o=this.structs.index++;r===null&&(r="StructType"+o),a=new w_e(r,t),this.structs[i].push(a),this.types[i][r]=e,s.structType=a}return a}getOutputStructTypeFromNode(e,t){const r=this.getStructTypeFromNode(e,t,"OutputType","fragment");return r.output=!0,r}getUniformFromNode(e,t,r=this.shaderStage,i=null){const s=this.getDataFromNode(e,r,this.globalCache);let a=s.uniform;if(a===void 0){const o=this.uniforms.index++;a=new x_e(i||"nodeUniform"+o,t,e),this.uniforms[r].push(a),this.registerDeclaration(a),s.uniform=a}return a}getVarFromNode(e,t=null,r=e.getNodeType(this),i=this.shaderStage,s=!1){const a=this.getDataFromNode(e,i),o=this.getSubBuildProperty("variable",a.subBuilds);let l=a[o];if(l===void 0){const u=s?"_const":"_var",c=this.vars[i]||(this.vars[i]=[]),h=this.vars[u]||(this.vars[u]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+h,this.vars[u]++),o!=="variable"&&(t=this.getSubBuildProperty(t,a.subBuilds));const f=e.getArrayCount(this);l=new oH(t,r,s,f),s||c.push(l),this.registerDeclaration(l),a[o]=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,r=e.getNodeType(this),i=null,s=null){const a=this.getDataFromNode(e,"any"),o=this.getSubBuildProperty("varying",a.subBuilds);let l=a[o];if(l===void 0){const u=this.varyings,c=u.length;t===null&&(t="nodeVarying"+c),o!=="varying"&&(t=this.getSubBuildProperty(t,a.subBuilds)),l=new S_e(t,r,i,s),u.push(l),this.registerDeclaration(l),a[o]=l}return l}registerDeclaration(e){const t=this.shaderStage,r=this.declarations[t]||(this.declarations[t]={}),i=this.getPropertyName(e);let s=1,a=i;for(;r[a]!==void 0;)a=i+"_"+s++;s>1&&(e.name=a,Ce(`TSL: Declaration name '${i}' of '${e.type}' already in use. Renamed to '${a}'.`)),r[a]=e}getCodeFromNode(e,t,r=this.shaderStage){const i=this.getDataFromNode(e);let s=i.code;if(s===void 0){const a=this.codes[r]||(this.codes[r]=[]),o=a.length;s=new E_e("nodeCode"+o,t),a.push(s),i.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:r,flowCodeBlock:i}=this.getDataFromNode(e);let s=!0,a=t;for(;a;){if(i.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const o of r)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,t,r){const i=this.getDataFromNode(e),s=i.flowCodes||(i.flowCodes=[]),a=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);s.push(t),a.set(r,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),r=this.flowChildNode(e,t);return this.flowsData.set(e,r),r}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new Cbe,r=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=r,t}flowShaderNode(e){const t=e.layout,r={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of t.inputs)r[a.name]=new abe(a.type,a.name);e.layout=null;const i=e.call(r),s=this.flowStagesNode(i,t.type);return e.layout=t,s}flowBuildStage(e,t,r=null){const i=this.getBuildStage();this.setBuildStage(t);const s=e.build(this,r);return this.setBuildStage(i),s}flowStagesNode(e,t=null){const r=this.flow,i=this.vars,s=this.declarations,a=this.cache,o=this.buildStage,l=this.stack,u={code:""};this.flow=u,this.vars={},this.declarations={},this.cache=new cE,this.stack=iE();for(const c of G2)this.setBuildStage(c),u.result=e.build(this,t);return u.vars=this.getVars(this.shaderStage),this.flow=r,this.vars=i,this.declarations=s,this.cache=a,this.stack=l,this.setBuildStage(o),u}getFunctionOperator(){return null}buildFunctionCode(){Ce("Abstract function.")}flowChildNode(e,t=null){const r=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,t),this.flow=r,i}flowNodeFromShaderStage(e,t,r=null,i=null){const s=this.tab,a=this.cache,o=this.shaderStage,l=this.context;this.setShaderStage(e);const u={...this.context};delete u.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=u;let c=null;if(this.buildStage==="generate"){const h=this.flowChildNode(t,r);i!==null&&(h.code+=`${this.tab+i} = ${h.result};
`),this.flowCode[e]=this.flowCode[e]+h.code,c=h}else c=t.build(this);return this.setShaderStage(o),this.cache=a,this.tab=s,this.context=l,c}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){Ce("Abstract function.")}getVaryings(){Ce("Abstract function.")}getVar(e,t,r=null){return`${r!==null?this.generateArrayDeclaration(e,r):this.getType(e)} ${t}`}getVars(e){let t="";const r=this.vars[e];if(r!==void 0)for(const i of r)t+=`${this.getVar(i.type,i.name)}; `;return t}getUniforms(){Ce("Abstract function.")}getCodes(e){const t=this.codes[e];let r="";if(t!==void 0)for(const i of t)r+=i.code+`
`;return r}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){Ce("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(e&&e.isNode?e.isShaderCallNodeInternal?t=e.shaderNode.subBuilds:e.isStackNode?t=[e.subBuild]:t=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?t=[...e]:t=e,!t)return null;const r=this.subBuildLayers;for(let i=t.length-1;i>=0;i--){const s=t[i];if(r.includes(s))return s}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let r;t!==null?r=this.getClosestSubBuild(t):r=this.subBuildFn;let i;return r?i=e?r+"_"+e:r:i=e,i}build(){const{object:e,material:t,renderer:r}=this;if(t!==null){let i=r.library.fromMaterial(t);i===null&&(Ie(`NodeMaterial: Material "${t.type}" is not compatible.`),i=new mr),i.build(this)}else this.addFlow("compute",e);for(const i of G2){this.setBuildStage(i),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of V2){this.setShaderStage(s);const a=this.flowNodes[s];for(const o of a)i==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getSharedDataFromNode(e){let t=$_e.get(e);return t===void 0&&(t={}),t}getNodeUniform(e,t){const r=this.getSharedDataFromNode(e);let i=r.cache;if(i===void 0){if(t==="float"||t==="int"||t==="uint")i=new D_e(e);else if(t==="vec2"||t==="ivec2"||t==="uvec2")i=new O_e(e);else if(t==="vec3"||t==="ivec3"||t==="uvec3")i=new P_e(e);else if(t==="vec4"||t==="ivec4"||t==="uvec4")i=new F_e(e);else if(t==="color")i=new U_e(e);else if(t==="mat2")i=new B_e(e);else if(t==="mat3")i=new z_e(e);else if(t==="mat4")i=new G_e(e);else throw new Error(`Uniform "${t}" not implemented.`);r.cache=i}return i}format(e,t,r){if(t=this.getVectorType(t),r=this.getVectorType(r),t===r||r===null||this.isReference(r))return e;const i=this.getTypeLength(t),s=this.getTypeLength(r);return i===16&&s===9?`${this.getType(r)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:i===9&&s===4?`${this.getType(r)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:i>4||s>4||s===0?e:i===s?`${this.getType(r)}( ${e} )`:i>s?(e=r==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(t)),r)):s===4&&i>1?`${this.getType(r)}( ${this.format(e,t,"vec3")}, 1.0 )`:i===2?`${this.getType(r)}( ${this.format(e,t,"vec2")}, 0.0 )`:(i===1&&s>1&&t!==this.getComponentType(r)&&(e=`${this.getType(this.getComponentType(r))}( ${e} )`),`${this.getType(r)}( ${e} )`)}getSignature(){return`// Three.js r${dc} - Node System
`}}class ZU{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let r=e.get(t);return r===void 0&&(r={renderId:0,frameId:0},e.set(t,r)),r}updateBeforeNode(e){const t=e.getUpdateBeforeType(),r=e.updateReference(this);if(t===Xt.FRAME){const i=this._getMaps(this.updateBeforeMap,r);if(i.frameId!==this.frameId){const s=i.frameId;i.frameId=this.frameId,e.updateBefore(this)===!1&&(i.frameId=s)}}else if(t===Xt.RENDER){const i=this._getMaps(this.updateBeforeMap,r);if(i.renderId!==this.renderId){const s=i.renderId;i.renderId=this.renderId,e.updateBefore(this)===!1&&(i.renderId=s)}}else t===Xt.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),r=e.updateReference(this);if(t===Xt.FRAME){const i=this._getMaps(this.updateAfterMap,r);i.frameId!==this.frameId&&e.updateAfter(this)!==!1&&(i.frameId=this.frameId)}else if(t===Xt.RENDER){const i=this._getMaps(this.updateAfterMap,r);i.renderId!==this.renderId&&e.updateAfter(this)!==!1&&(i.renderId=this.renderId)}else t===Xt.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),r=e.updateReference(this);if(t===Xt.FRAME){const i=this._getMaps(this.updateMap,r);i.frameId!==this.frameId&&e.update(this)!==!1&&(i.frameId=this.frameId)}else if(t===Xt.RENDER){const i=this._getMaps(this.updateMap,r);i.renderId!==this.renderId&&e.update(this)!==!1&&(i.renderId=this.renderId)}else t===Xt.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class PI{constructor(e,t,r=null,i="",s=!1){this.type=e,this.name=t,this.count=r,this.qualifier=i,this.isConst=s}}PI.isNodeFunctionInput=!0;class j_e extends yc{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:nH(this.light),lightColor:e}}}const dE=new sn,xb=new sn;let df=null;class W_e extends yc{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Lt(new Z).setGroup(Ct),this.halfWidth=Lt(new Z).setGroup(Ct),this.updateType=Xt.RENDER}update(e){super.update(e);const{light:t}=this,r=e.camera.matrixWorldInverse;xb.identity(),dE.copy(t.matrixWorld),dE.premultiply(r),xb.extractRotation(dE),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(xb),this.halfHeight.value.applyMatrix4(xb)}setupDirectRectArea(e){let t,r;e.isAvailable("float32Filterable")?(t=Gn(df.LTC_FLOAT_1),r=Gn(df.LTC_FLOAT_2)):(t=Gn(df.LTC_HALF_1),r=Gn(df.LTC_HALF_2));const{colorNode:i,light:s}=this,a=tH(s);return{lightColor:i,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:r}}static setLTC(e){df=e}}class FI extends yc{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Lt(0).setGroup(Ct),this.penumbraCosNode=Lt(0).setGroup(Ct),this.cutoffDistanceNode=Lt(0).setGroup(Ct),this.decayExponentNode=Lt(0).setGroup(Ct),this.colorNode=Lt(this.color).setGroup(Ct)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:r,penumbraCosNode:i}=this;return $o(r,i,t)}getLightCoord(e){const t=e.getNodeProperties(this);let r=t.projectionUV;return r===void 0&&(r=Lbe(this.light,e.context.positionWorld),t.projectionUV=r),r}setupDirect(e){const{colorNode:t,cutoffDistanceNode:r,decayExponentNode:i,light:s}=this,a=this.getLightVector(e),o=a.normalize(),l=o.dot(nH(s)),u=this.getSpotAttenuation(e,l),c=a.length(),h=aH({lightDistance:c,cutoffDistance:r,decayExponent:i});let f=t.mul(u).mul(h),g,m;return s.colorNode?(m=this.getLightCoord(e),g=s.colorNode(m)):s.map&&(m=this.getLightCoord(e),g=Gn(s.map,m.xy).onRenderUpdate(()=>s.map)),g&&(f=m.mul(2).sub(1).abs().lessThan(1).all().select(f.mul(g),f)),{lightColor:f,lightDirection:o}}}class q_e extends FI{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const s=t.acos().mul(1/Math.PI);i=Gn(r,yt(s,0),0).r}else i=super.getSpotAttenuation(t);return i}}const X_e=Ne(([n,e])=>{const t=n.abs().sub(e);return zo(ti(t,0)).add(xh(ti(t.x,t.y),0))});class Y_e extends FI{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let r=1;t.map!==null&&(r=t.map.width/t.map.height),t.shadow.aspect=r}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=Te(0),r=this.penumbraCosNode,i=OI(this.light).mul(e.context.positionWorld||Eh);return In(i.w.greaterThan(0),()=>{const s=i.xyz.div(i.w),a=X_e(s.xy.sub(yt(.5)),yt(.5)),o=Qa(-1,Xi(1,z4(r)).sub(1));t.assign(EI(a.mul(-2).mul(o)))}),t}}class K_e extends yc{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class Z_e extends yc{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=eH(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Lt(new Et).setGroup(Ct)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:r,lightDirectionNode:i}=this,a=Zh.dot(i).mul(.5).add(.5),o=Mn(r,t,a);e.context.irradiance.addAssign(o)}}class Q_e extends yc{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let r=0;r<9;r++)t.push(new Z);this.lightProbe=ha(t)}update(e){const{light:t}=this;super.update(e);for(let r=0;r<9;r++)this.lightProbe.array[r].copy(t.sh.coefficients[r]).multiplyScalar(t.intensity)}setup(e){const t=y_e(Zh,this.lightProbe);e.context.irradiance.addAssign(t)}}class uH{parseFunction(){Ce("Abstract function.")}}class UI{constructor(e,t,r="",i=""){this.type=e,this.inputs=t,this.name=r,this.precision=i}getCode(){Ce("Abstract function.")}}UI.isNodeFunction=!0;const J_e=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,eve=/[a-z_0-9]+/ig,QU="#pragma main",tve=n=>{n=n.trim();const e=n.indexOf(QU),t=e!==-1?n.slice(e+QU.length):n,r=t.match(J_e);if(r!==null&&r.length===5){const i=r[4],s=[];let a=null;for(;(a=eve.exec(i))!==null;)s.push(a);const o=[];let l=0;for(;l<s.length;){const m=s[l][0]==="const";m===!0&&l++;let v=s[l][0];v==="in"||v==="out"||v==="inout"?l++:v="";const _=s[l++][0];let b=Number.parseInt(s[l][0]);Number.isNaN(b)===!1?l++:b=null;const S=s[l++][0];o.push(new PI(_,S,b,v,m))}const u=t.substring(r[0].length),c=r[3]!==void 0?r[3]:"",h=r[2],f=r[1]!==void 0?r[1]:"",g=e!==-1?n.slice(0,e):"";return{type:h,inputs:o,name:c,precision:f,inputsCode:i,blockCode:u,headerCode:g}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class nve extends UI{constructor(e){const{type:t,inputs:r,name:i,precision:s,inputsCode:a,blockCode:o,headerCode:l}=tve(e);super(t,r,i,s),this.inputsCode=a,this.blockCode=o,this.headerCode=l}getCode(e=this.name){let t;const r=this.blockCode;if(r!==""){const{type:i,inputsCode:s,headerCode:a,precision:o}=this;let l=`${i} ${e} ( ${s.trim()} )`;o!==""&&(l=`${o} ${l}`),t=a+l+r}else t="";return t}}class rve extends uH{parseFunction(e){return new nve(e)}}const JU=new WeakMap,La=[],xl=[];class ive extends ql{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new ZU,this.nodeBuilderCache=new Map,this.callHashCache=new _a,this.groupsData=new _a,this.cacheLib={}}updateGroup(e){const t=e.groupNode,r=t.name;if(r===O4.name)return!0;if(r===Ct.name){const s=this.get(e),a=this.nodeFrame.renderId;return s.renderId!==a?(s.renderId=a,!0):!1}if(r===xhe.name){const s=this.get(e),a=this.nodeFrame.frameId;return s.frameId!==a?(s.frameId=a,!0):!1}La[0]=t,La[1]=e;let i=this.groupsData.get(La);return i===void 0&&this.groupsData.set(La,i={}),La.length=0,i.version!==t.version?(i.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const{nodeBuilderCache:i}=this,s=this.getForRenderCacheKey(e);if(r=i.get(s),r===void 0){const a=l=>{const u=this.backend.createNodeBuilder(e.object,this.renderer);return u.scene=e.scene,u.material=l,u.camera=e.camera,u.context.material=l,u.lightsNode=e.lightsNode,u.environmentNode=this.getEnvironmentNode(e.scene),u.fogNode=this.getFogNode(e.scene),u.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&u.enableMultiview(),u};let o=a(e.material);try{o.build()}catch(l){o=a(new mr),o.build(),Ie("TSL: "+l)}r=this._createNodeBuilderState(o),i.set(s,r)}r.usedTimes++,t.nodeBuilderState=r}return r}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const i=this.backend.createNodeBuilder(e,this.renderer);i.build(),r=this._createNodeBuilderState(i),t.nodeBuilderState=r}return r}_createNodeBuilderState(e){return new v_e(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const r=this.get(e);r.environmentNode&&(t=r.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const r=this.get(e);r.backgroundNode&&(t=r.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){La[0]=e,La[1]=t;const r=this.renderer.info.calls,i=this.callHashCache.get(La)||{};if(i.callId!==r){const s=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&xl.push(t.getCacheKey(!0)),s&&xl.push(s.getCacheKey()),a&&xl.push(a.getCacheKey()),xl.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),xl.push(this.renderer.shadowMap.enabled?1:0),xl.push(this.renderer.shadowMap.type),i.callId=r,i.cacheKey=lm(xl),this.callHashCache.set(La,i),xl.length=0}return La.length=0,i.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),r=e.background;if(r){const i=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==r||i){const s=this.getCacheNode("background",r,()=>{if(r.isCubeTexture===!0||r.mapping===Hd||r.mapping===jd||r.mapping===Ku){if(e.backgroundBlurriness>0||r.mapping===Ku)return H$(r);{let a;return r.isCubeTexture===!0?a=Ki(r):a=Gn(r),O$(a)}}else{if(r.isTexture===!0)return Gn(r,Ud.flipY()).setUpdateMatrix(!0);r.isColor!==!0&&Ie("WebGPUNodes: Unsupported background configuration.",r)}},i);t.backgroundNode=s,t.background=r,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,r,i=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=s.get(t);return(a===void 0||i)&&(a=r(),s.set(t,a)),a}updateFog(e){const t=this.get(e),r=e.fog;if(r){if(t.fog!==r){const i=this.getCacheNode("fog",r,()=>{if(r.isFogExp2){const s=Cn("color","color",r).setGroup(Ct),a=Cn("density","float",r).setGroup(Ct);return WU(s,Ibe(a))}else if(r.isFog){const s=Cn("color","color",r).setGroup(Ct),a=Cn("near","float",r).setGroup(Ct),o=Cn("far","float",r).setGroup(Ct);return WU(s,Mbe(a,o))}else Ie("Renderer: Unsupported fog configuration.",r)});t.fogNode=i,t.fog=r}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),r=e.environment;if(r){if(t.environment!==r){const i=this.getCacheNode("environment",r,()=>{if(r.isCubeTexture===!0)return Ki(r);if(r.isTexture===!0)return Gn(r);Ie("Nodes: Unsupported environment configuration.",r)});t.environmentNode=i,t.environment=r}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,r=null,i=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=r,a.camera=i,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return JU.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,r=this.getOutputCacheKey(),i=e.isArrayTexture?ybe(e,we(Ud,cm("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):Gn(e,Ud).renderOutput(t.toneMapping,t.currentColorSpace);return JU.set(e,r),i}updateBefore(e){const t=e.getNodeBuilderState();for(const r of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(r)}updateAfter(e){const t=e.getNodeBuilderState();for(const r of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(r)}updateForCompute(e){const t=this.getNodeFrame(),r=this.getForCompute(e);for(const i of r.updateNodes)t.updateNode(i)}updateForRender(e){const t=this.getNodeFrameForRender(e),r=e.getNodeBuilderState();for(const i of r.updateNodes)t.updateNode(i)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new ZU,this.nodeBuilderCache=new Map,this.cacheLib={}}}const hE=new ua;class w_{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new $t,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,r){const i=e.length;for(let s=0;s<i;s++){hE.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=t[r+s],o=hE.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=hE.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let r=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const i=t.clippingPlanes,s=i.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+s){a.length=o+s;for(let l=0;l<s;l++)a[o+l]=new Wt;r=!0}this.projectPlanes(i,a,o),r&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new w_(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class sve{constructor(e,t){this.bundleGroup=e,this.camera=t}}const hf=[];class ave{constructor(){this.bundles=new _a}get(e,t){const r=this.bundles;hf[0]=e,hf[1]=t;let i=r.get(hf);return i===void 0&&(i=new sve(e,t),r.set(hf,i)),hf.length=0,i}dispose(){this.bundles=new _a}}class cH{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const r=this.getMaterialNodeClass(e.type);if(r!==null){t=new r;for(const i in e)t[i]=e[i]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,r){if(r.has(t)){Ce(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);r.set(t,e)}addClass(e,t,r){if(r.has(t)){Ce(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);r.set(t,e)}}const ove=new rH,pf=[];class lve extends _a{constructor(){super()}createNode(e=[]){return new rH().setLights(e)}getNode(e,t){if(e.isQuadMesh)return ove;pf[0]=e,pf[1]=t;let r=this.get(pf);return r===void 0&&(r=this.createNode(),this.set(pf,r)),pf.length=0,r}}class wf extends hc{constructor(e=1,t=1,r={}){super(e,t,r),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const eB=new Z,tB=new Z;class uve extends ro{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new $r,this._cameraL.viewport=new Wt,this._cameraR=new $r,this._cameraR.viewport=new Wt,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new NV,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=gve.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new $e,this._onSessionEvent=hve.bind(this),this._onSessionEnd=pve.bind(this),this._onInputSourcesChange=fve.bind(this),this._onAnimationFrame=mve.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&Ce("XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&Ce("XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getBinding(){return this._glBinding===null&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,r,i,s,a,o,l={}){const u=new am(e,t),c=new wf(s,a,{format:pr,type:qn,depthTexture:new Fi(s,a,l.stencil?Ts:An,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?Li:Jr),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});c._autoAllocateDepthBuffer=!0;const h=new za({color:16777215,side:Ss});h.map=c.texture,h.map.offset.y=1,h.map.repeat.y=-1;const f=new wr(u,h);f.position.copy(r),f.quaternion.copy(i);const g={type:"quad",width:e,height:t,translation:r,quaternion:i,pixelwidth:s,pixelheight:a,plane:f,material:h,rendercall:o,renderTarget:c};if(this._layers.push(g),this._session!==null){g.plane.material=new za({color:16777215,side:Ss}),g.plane.material.blending=kd,g.plane.material.blendEquation=fi,g.plane.material.blendSrc=To,g.plane.material.blendDst=To,g.xrlayer=this._createXRLayer(g);const m=this._session.renderState.layers;m.unshift(g.xrlayer),this._session.updateRenderState({layers:m})}else c.isXRRenderTarget=!1;return f}createCylinderLayer(e,t,r,i,s,a,o,l,u={}){const c=new sm(e,e,e*t/r,64,64,!0,Math.PI-t/2,t),h=new wf(a,o,{format:pr,type:qn,depthTexture:new Fi(a,o,u.stencil?Ts:An,void 0,void 0,void 0,void 0,void 0,void 0,u.stencil?Li:Jr),stencilBuffer:u.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});h._autoAllocateDepthBuffer=!0;const f=new za({color:16777215,side:On});f.map=h.texture,f.map.offset.y=1,f.map.repeat.y=-1;const g=new wr(c,f);g.position.copy(i),g.quaternion.copy(s);const m={type:"cylinder",radius:e,centralAngle:t,aspectratio:r,translation:i,quaternion:s,pixelwidth:a,pixelheight:o,plane:g,material:f,rendercall:l,renderTarget:h};if(this._layers.push(m),this._session!==null){m.plane.material=new za({color:16777215,side:On}),m.plane.material.blending=kd,m.plane.material.blendEquation=fi,m.plane.material.blendSrc=To,m.plane.material.blendDst=To,m.xrlayer=this._createXRLayer(m);const v=this._session.renderState.layers;v.unshift(m.xrlayer),this._session.updateRenderState({layers:v})}else h.isXRRenderTarget=!1;return g}renderLayers(){const e=new Z,t=new ba,r=this._renderer,i=this.isPresenting,s=r.getOutputRenderTarget(),a=r._frameBufferTarget;this.isPresenting=!1;const o=new $e;r.getSize(o);const l=r._quad;for(const u of this._layers)if(u.renderTarget.isXRRenderTarget=this._session!==null,u.renderTarget._hasExternalTextures=u.renderTarget.isXRRenderTarget,u.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){u.xrlayer.transform=new XRRigidTransform(u.plane.getWorldPosition(e),u.plane.getWorldQuaternion(t));const c=this._glBinding.getSubImage(u.xrlayer,this._xrFrame);r.backend.setXRRenderTargetTextures(u.renderTarget,c.colorTexture,void 0),r._setXRLayerSize(u.renderTarget.width,u.renderTarget.height),r.setOutputRenderTarget(u.renderTarget),r.setRenderTarget(null),r._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:h,quad:f}=this._frameBufferTargets.get(u.renderTarget)||{frameBufferTarget:null,quad:null};h?(r._frameBufferTarget=h,r._quad=f):(r._quad=new DI(new mr),this._frameBufferTargets.set(u.renderTarget,{frameBufferTarget:r._getFrameBufferTarget(),quad:r._quad})),u.rendercall(),r._frameBufferTarget=null}else r.setRenderTarget(u.renderTarget),u.rendercall();r.setRenderTarget(null),r.setOutputRenderTarget(s),r._frameBufferTarget=a,r._setXRLayerSize(o.x,o.y),r._quad=l,this.isPresenting=i}getSession(){return this._session}async setSession(e){const t=this._renderer,r=t.backend;this._gl=t.getContext();const i=this._gl,s=i.getContextAttributes();if(this._session=e,e!==null){if(r.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await r.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._supportsLayers===!0){let a=null,o=null,l=null;t.depth&&(l=t.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,a=t.stencil?Li:Jr,o=t.stencil?Ts:An);const u={colorFormat:i.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(u.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();const c=this._glBinding.createProjectionLayer(u),h=[c];this._glProjLayer=c,t.setPixelRatio(1),t._setXRLayerSize(c.textureWidth,c.textureHeight);const f=this._useMultiview?2:1,g=new Fi(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a,f);if(this._xrRenderTarget=new wf(c.textureWidth,c.textureHeight,{format:pr,type:qn,colorSpace:t.outputColorSpace,depthTexture:g,stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:c.ignoreDepthValues===!1,resolveStencilBuffer:c.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(const m of this._layers)m.plane.material=new za({color:16777215,side:m.type==="cylinder"?On:Ss}),m.plane.material.blending=kd,m.plane.material.blendEquation=fi,m.plane.material.blendSrc=To,m.plane.material.blendDst=To,m.xrlayer=this._createXRLayer(m),h.unshift(m.xrlayer);e.updateRenderState({layers:h})}else{const a={antialias:t.currentSamples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,i,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t._setXRLayerSize(o.framebufferWidth,o.framebufferHeight),this._xrRenderTarget=new wf(o.framebufferWidth,o.framebufferHeight,{format:pr,type:qn,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const r=e.near,i=e.far,s=this._cameraXR,a=this._cameraL,o=this._cameraR;s.near=o.near=a.near=r,s.far=o.far=a.far=i,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),s.layers.mask=e.layers.mask|6,a.layers.mask=s.layers.mask&3,o.layers.mask=s.layers.mask&5;const l=e.parent,u=s.cameras;nB(s,l);for(let c=0;c<u.length;c++)nB(u[c],l);u.length===2?cve(s,a,o):s.projectionMatrix.copy(a.projectionMatrix),dve(e,s,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new Vb,this._controllers[e]=t),t}}function cve(n,e,t){eB.setFromMatrixPosition(e.matrixWorld),tB.setFromMatrixPosition(t.matrixWorld);const r=eB.distanceTo(tB),i=e.projectionMatrix.elements,s=t.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(s[8]+1)/s[0],f=a*c,g=a*h,m=r/(-c+h),v=m*-c;if(e.matrixWorld.decompose(n.position,n.quaternion,n.scale),n.translateX(v),n.translateZ(m),n.matrixWorld.compose(n.position,n.quaternion,n.scale),n.matrixWorldInverse.copy(n.matrixWorld).invert(),i[10]===-1)n.projectionMatrix.copy(e.projectionMatrix),n.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const _=a+m,b=o+m,S=f-v,E=g+(r-v),A=l*o/b*_,R=u*o/b*_;n.projectionMatrix.makePerspective(S,E,A,R,_,b),n.projectionMatrixInverse.copy(n.projectionMatrix).invert()}}function nB(n,e){e===null?n.matrixWorld.copy(n.matrix):n.matrixWorld.multiplyMatrices(e.matrixWorld,n.matrix),n.matrixWorldInverse.copy(n.matrixWorld).invert()}function dve(n,e,t){t===null?n.matrix.copy(e.matrixWorld):(n.matrix.copy(t.matrixWorld),n.matrix.invert(),n.matrix.multiply(e.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0),n.projectionMatrix.copy(e.projectionMatrix),n.projectionMatrixInverse.copy(e.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=nc*2*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}function hve(n){const e=this._controllerInputSources.indexOf(n.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const r=this.getReferenceSpace();t.update(n.inputSource,n.frame,r),t.dispatchEvent({type:n.type,data:n.inputSource})}}function pve(){const n=this._session,e=this._renderer;n.removeEventListener("select",this._onSessionEvent),n.removeEventListener("selectstart",this._onSessionEvent),n.removeEventListener("selectend",this._onSessionEvent),n.removeEventListener("squeeze",this._onSessionEvent),n.removeEventListener("squeezestart",this._onSessionEvent),n.removeEventListener("squeezeend",this._onSessionEvent),n.removeEventListener("end",this._onSessionEnd),n.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const r=this._controllerInputSources[t];r!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(r))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._glBinding=null,this._glBaseLayer=null,this._glProjLayer=null,this._sessionUsesLayers===!0)for(const t of this._layers)t.renderTarget=new wf(t.pixelwidth,t.pixelheight,{format:pr,type:qn,depthTexture:new Fi(t.pixelwidth,t.pixelheight,t.stencilBuffer?Ts:An,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?Li:Jr),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function fve(n){const e=this._controllers,t=this._controllerInputSources;for(let r=0;r<n.removed.length;r++){const i=n.removed[r],s=t.indexOf(i);s>=0&&(t[s]=null,e[s].disconnect(i))}for(let r=0;r<n.added.length;r++){const i=n.added[r];let s=t.indexOf(i);if(s===-1){for(let o=0;o<e.length;o++)if(o>=t.length){t.push(i),s=o;break}else if(t[o]===null){t[o]=i,s=o;break}if(s===-1)break}const a=e[s];a&&a.connect(i)}}function gve(n){return n.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(n.translation,n.quaternion),width:n.width/2,height:n.height/2,space:this._referenceSpace,viewPixelWidth:n.pixelwidth,viewPixelHeight:n.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(n.translation,n.quaternion),radius:n.radius,centralAngle:n.centralAngle,aspectRatio:n.aspectRatio,space:this._referenceSpace,viewPixelWidth:n.pixelwidth,viewPixelHeight:n.pixelheight,clearOnAccess:!1})}function mve(n,e){if(e===void 0)return;const t=this._cameraXR,r=this._renderer,i=r.backend,s=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const l=o.views;this._glBaseLayer!==null&&i.setXRTarget(s.framebuffer);let u=!1;l.length!==t.cameras.length&&(t.cameras.length=0,u=!0);for(let c=0;c<l.length;c++){const h=l[c];let f;if(this._supportsLayers===!0){const m=this._glBinding.getViewSubImage(this._glProjLayer,h);f=m.viewport,c===0&&i.setXRRenderTargetTextures(this._xrRenderTarget,m.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:m.depthStencilTexture)}else f=s.getViewport(h);let g=this._cameras[c];g===void 0&&(g=new $r,g.layers.enable(c),g.viewport=new Wt,this._cameras[c]=g),g.matrix.fromArray(h.transform.matrix),g.matrix.decompose(g.position,g.quaternion,g.scale),g.projectionMatrix.fromArray(h.projectionMatrix),g.projectionMatrixInverse.copy(g.projectionMatrix).invert(),g.viewport.set(f.x,f.y,f.width,f.height),c===0&&(t.matrix.copy(g.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),u===!0&&t.cameras.push(g)}r.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const u=this._controllerInputSources[l],c=this._controllers[l];u!==null&&c!==void 0&&c.update(u,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(n,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}class yve extends ro{constructor(e){super(),this.domElement=e,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Wt(0,0,this._width,this._height),this._scissor=new Wt(0,0,this._width,this._height),this._scissorTest=!1,this.colorTexture=new _V,this.depthTexture=new Fi}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,r){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=r,this.domElement.width=Math.floor(e*r),this.domElement.height=Math.floor(t*r),this.setViewport(0,0,e,t),this._dispatchResize())}setSize(e,t,r=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),r===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._dispatchResize())}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,r,i){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,r,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,r,i,s=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,r,i),o.minDepth=s,o.maxDepth=a}_dispatchResize(){this.dispatchEvent({type:"resize"})}dispose(){this.dispatchEvent({type:"dispose"})}}const rB=new rv,dd=new $e,pE=new Wt,fE=new im,gE=new Q1,Sb=new sn,So=new Wt;class bve{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:r=!1,alpha:i=!0,depth:s=!0,stencil:a=!1,antialias:o=!1,samples:l=0,getFallback:u=null,outputBufferType:c=tr,multiview:h=!1}=t;this.backend=e,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=r,this.outputColorSpace=Ci,this.toneMapping=Qr,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new Hye,this.contextNode=mc(),this.library=new cH,this.lighting=new lve,this._samples=l||o===!0?4:0,this._onCanvasTargetResize=this._onCanvasTargetResize.bind(this),this._canvasTarget=new yve(e.getDomElement()),this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize),this._canvasTarget.isDefaultCanvasTarget=!0,this._inspector=new s$,this._inspector.setRenderer(this),this._getFallback=u,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new DI(new mr),this._quad.name="Output Color Transform",this._quad.material.name="outputColorTransform",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const f=this.alpha===!0?0:1;this._clearColor=new LI(0,0,0,f),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._outputBufferType=c,this._cacheShadowNodes=new WeakMap,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Of},this.xr=new uve(this,h),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(g,m,v)=>{await this.compileAsync(g,m);const _=this._renderLists.get(g,m),b=this._renderContexts.get(g,m,this._renderTarget,this._mrt),S=g.overrideMaterial||v.material,E=this._objects.get(v,S,g,m,_.lightsNode,b,b.clippingContext),{fragmentShader:A,vertexShader:R}=E.getNodeBuilderState();return{fragmentShader:A,vertexShader:R}}}}async init(){return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let r=this.backend;try{await r.init(this)}catch(i){if(this._getFallback!==null)try{this.backend=r=this._getFallback(i),await r.init(this)}catch(s){t(s);return}else{t(i);return}}this._nodes=new ive(this,r),this._animation=new Oye(this,this._nodes,this.info),this._attributes=new Vye(r),this._background=new b_e(this,this._nodes),this._geometries=new $ye(this._attributes,this.info),this._textures=new sbe(this,r,this.info),this._pipelines=new Xye(r,this._nodes),this._bindings=new Yye(r,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new Bye(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Qye(this.lighting),this._bundles=new ave,this._renderContexts=new rbe,this._animation.start(),this._initialized=!0,this._inspector.init(),e(this)}),this._initPromise)}get domElement(){return this._canvasTarget.domElement}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,r=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,s=i.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,l=this._compilationPromises,u=e.isScene===!0?e:rB;r===null&&(r=e);const c=this._renderTarget,h=this._renderContexts.get(r,t,c,this._mrt),f=this._activeMipmapLevel,g=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=g,i.renderId++,i.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new w_),h.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,c);const m=this._renderLists.get(e,t);if(m.begin(),this._projectObject(e,t,0,m,h.clippingContext),r!==e&&r.traverseVisible(function(E){E.isLight&&E.layers.test(t.layers)&&m.pushLight(E)}),m.finish(),c!==null){this._textures.updateRenderTarget(c,f);const E=this._textures.get(c);h.textures=E.textures,h.depthTexture=E.depthTexture}else h.textures=null,h.depthTexture=null;this._background.update(u,m,h);const v=m.opaque,_=m.transparent,b=m.transparentDoublePass,S=m.lightsNode;this.opaque===!0&&v.length>0&&this._renderObjects(v,t,u,S),this.transparent===!0&&_.length>0&&this._renderTransparents(_,b,t,u,S),i.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(g)}async renderAsync(e,t){jn('Renderer: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.render(e,t)}async waitForGPU(){Ie("Renderer: waitForGPU() has been removed. Read https://github.com/mrdoob/three.js/issues/32012 for more information.")}set inspector(e){this._inspector!==null&&this._inspector.setRenderer(null),this._inspector=e,this._inspector.setRenderer(this)}get inspector(){return this._inspector}set highPrecision(e){const t=this.contextNode.value;e===!0?(t.modelViewMatrix=nU,t.modelNormalViewMatrix=rU):this.highPrecision&&(delete t.modelViewMatrix,delete t.modelNormalViewMatrix)}get highPrecision(){const e=this.contextNode.value;return e.modelViewMatrix===nU&&e.modelNormalViewMatrix===rU}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getOutputBufferType(){return this._outputBufferType}getColorBufferType(){return jn('Renderer: ".getColorBufferType()" has been renamed to ".getOutputBufferType()".'),this.getOutputBufferType()}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),Ie(t),this._isDeviceLost=!0}_renderBundle(e,t,r){const{bundleGroup:i,camera:s,renderList:a}=e,o=this._currentRenderContext,l=this._bundles.get(i,s),u=this.backend.get(l);u.renderContexts===void 0&&(u.renderContexts=new Set);const c=i.version!==u.version,h=u.renderContexts.has(o)===!1||c;if(u.renderContexts.add(o),h){this.backend.beginBundle(o),(u.renderObjects===void 0||c)&&(u.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:f,transparent:g,opaque:m}=a;this.opaque===!0&&m.length>0&&this._renderObjects(m,s,t,r),this.transparent===!0&&g.length>0&&this._renderTransparents(g,f,s,t,r),this._currentRenderBundle=null,this.backend.finishBundle(o,l),u.version=i.version}else{const{renderObjects:f}=u;for(let g=0,m=f.length;g<m;g++){const v=f[g];this._nodes.needsRefresh(v)&&(this._nodes.updateBefore(v),this._nodes.updateForRender(v),this._bindings.updateForRender(v),this._nodes.updateAfter(v))}}this.backend.addBundle(o,l)}render(e,t){if(this._initialized===!1)throw new Error('Renderer: .render() called before the backend is initialized. Use "await renderer.init();" before rendering.');this._renderScene(e,t)}get initialized(){return this._initialized}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this,r=e!==Qr,i=t!==Nt.workingColorSpace;if(r===!1&&i===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(dd),{depth:o,stencil:l}=this;let u=this._frameBufferTarget;u===null&&(u=new hc(s,a,{depthBuffer:o,stencilBuffer:l,type:this._outputBufferType,format:pr,colorSpace:Nt.workingColorSpace,generateMipmaps:!1,minFilter:Vn,magFilter:Vn,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u);const c=this.getOutputRenderTarget();u.depthBuffer=o,u.stencilBuffer=l,c!==null?u.setSize(c.width,c.height,c.depth):u.setSize(s,a,1);const h=this._canvasTarget;return u.viewport.copy(h._viewport),u.scissor.copy(h._scissor),u.viewport.multiplyScalar(h._pixelRatio),u.scissor.multiplyScalar(h._pixelRatio),u.scissorTest=h._scissorTest,u.multiview=c!==null?c.multiview:!1,u.resolveDepthBuffer=c!==null?c.resolveDepthBuffer:!0,u._autoAllocateDepthBuffer=c!==null?c._autoAllocateDepthBuffer:!1,u}_renderScene(e,t,r=!0){if(this._isDeviceLost===!0)return;const i=r?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,u=e.isScene===!0?e:rB,c=this._renderTarget||this._outputRenderTarget,h=this._activeCubeFace,f=this._activeMipmapLevel;let g;i!==null?(g=i,this.setRenderTarget(g)):g=c;const m=this._renderContexts.get(e,t,g,this._mrt);this._currentRenderContext=m,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls,this.backend.updateTimeStampUID(m),this.inspector.beginRender(this.backend.getTimestampUID(m),e,t,g);const v=this.coordinateSystem,_=this.xr;if(t.coordinateSystem!==v&&_.isPresenting===!1&&(t.coordinateSystem=v,t.updateProjectionMatrix(),t.isArrayCamera))for(const q of t.cameras)q.coordinateSystem=v,q.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),_.enabled===!0&&_.isPresenting===!0&&(_.cameraAutoUpdate===!0&&_.updateCamera(t),t=_.getCamera());const b=this._canvasTarget;let S=b._viewport,E=b._scissor,A=b._pixelRatio;g!==null&&(S=g.viewport,E=g.scissor,A=1),this.getDrawingBufferSize(dd),pE.set(0,0,dd.width,dd.height);const R=S.minDepth===void 0?0:S.minDepth,w=S.maxDepth===void 0?1:S.maxDepth;m.viewportValue.copy(S).multiplyScalar(A).floor(),m.viewportValue.width>>=f,m.viewportValue.height>>=f,m.viewportValue.minDepth=R,m.viewportValue.maxDepth=w,m.viewport=m.viewportValue.equals(pE)===!1,m.scissorValue.copy(E).multiplyScalar(A).floor(),m.scissor=b._scissorTest&&m.scissorValue.equals(pE)===!1,m.scissorValue.width>>=f,m.scissorValue.height>>=f,m.clippingContext||(m.clippingContext=new w_),m.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,g);const M=t.isArrayCamera?gE:fE;t.isArrayCamera||(Sb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),M.setFromProjectionMatrix(Sb,t.coordinateSystem,t.reversedDepth));const I=this._renderLists.get(e,t);if(I.begin(),this._projectObject(e,t,0,I,m.clippingContext),I.finish(),this.sortObjects===!0&&I.sort(this._opaqueSort,this._transparentSort),g!==null){this._textures.updateRenderTarget(g,f);const q=this._textures.get(g);m.textures=q.textures,m.depthTexture=q.depthTexture,m.width=q.width,m.height=q.height,m.renderTarget=g,m.depth=g.depthBuffer,m.stencil=g.stencilBuffer}else m.textures=null,m.depthTexture=null,m.width=dd.width,m.height=dd.height,m.depth=this.depth,m.stencil=this.stencil;m.width>>=f,m.height>>=f,m.activeCubeFace=h,m.activeMipmapLevel=f,m.occlusionQueryCount=I.occlusionQueryCount,m.scissorValue.max(So.set(0,0,0,0)),m.scissorValue.x+m.scissorValue.width>m.width&&(m.scissorValue.width=Math.max(m.width-m.scissorValue.x,0)),m.scissorValue.y+m.scissorValue.height>m.height&&(m.scissorValue.height=Math.max(m.height-m.scissorValue.y,0)),this._background.update(u,I,m),m.camera=t,this.backend.beginRender(m);const{bundles:C,lightsNode:k,transparentDoublePass:O,transparent:z,opaque:W}=I;return C.length>0&&this._renderBundles(C,u,k),this.opaque===!0&&W.length>0&&this._renderObjects(W,t,u,k),this.transparent===!0&&z.length>0&&this._renderTransparents(z,O,t,u,k),this.backend.finishRender(m),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,i!==null&&(this.setRenderTarget(c,h,f),this._renderOutput(g)),u.onAfterRender(this,e,t,g),this.inspector.finishRender(this.backend.getTimestampUID(m)),m}_setXRLayerSize(e,t){this._canvasTarget._width=e,this._canvasTarget._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const r=this.autoClear,i=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=r,this.xr.enabled=i}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}getAnimationLoop(){return this._animation.getAnimationLoop()}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._canvasTarget.getPixelRatio()}getDrawingBufferSize(e){return this._canvasTarget.getDrawingBufferSize(e)}getSize(e){return this._canvasTarget.getSize(e)}setPixelRatio(e=1){this._canvasTarget.setPixelRatio(e)}setDrawingBufferSize(e,t,r){this.xr&&this.xr.isPresenting||this._canvasTarget.setDrawingBufferSize(e,t,r)}setSize(e,t,r=!0){this.xr&&this.xr.isPresenting||this._canvasTarget.setSize(e,t,r)}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){return this._canvasTarget.getScissor(e)}setScissor(e,t,r,i){this._canvasTarget.setScissor(e,t,r,i)}getScissorTest(){return this._canvasTarget.getScissorTest()}setScissorTest(e){this._canvasTarget.setScissorTest(e),this.backend.setScissorTest(e)}getViewport(e){return this._canvasTarget.getViewport(e)}setViewport(e,t,r,i,s=0,a=1){this._canvasTarget.setViewport(e,t,r,i,s,a)}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,r=!0){if(this._initialized===!1)throw new Error('Renderer: .clear() called before the backend is initialized. Use "await renderer.init();" before before using this method.');const i=this._renderTarget||this._getFrameBufferTarget();let s=null;if(i!==null){this._textures.updateRenderTarget(i);const a=this._textures.get(i);s=this._renderContexts.getForClear(i),s.textures=a.textures,s.depthTexture=a.depthTexture,s.width=a.width,s.height=a.height,s.renderTarget=i,s.depth=i.depthBuffer,s.stencil=i.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,r,s),i!==null&&this._renderTarget===null&&this._renderOutput(i)}clearColor(){this.clear(!0,!1,!1)}clearDepth(){this.clear(!1,!0,!1)}clearStencil(){this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,r=!0){jn('Renderer: "clearAsync()" has been deprecated. Use "clear()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.clear(e,t,r)}async clearColorAsync(){jn('Renderer: "clearColorAsync()" has been deprecated. Use "clearColor()" and "await renderer.init();" when creating the renderer.'),this.clear(!0,!1,!1)}async clearDepthAsync(){jn('Renderer: "clearDepthAsync()" has been deprecated. Use "clearDepth()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!0,!1)}async clearStencilAsync(){jn('Renderer: "clearStencilAsync()" has been deprecated. Use "clearStencil()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!1,!0)}get needsFrameBufferTarget(){const e=this.currentToneMapping!==Qr,t=this.currentColorSpace!==Nt.workingColorSpace;return e||t}get samples(){return this._samples}get currentSamples(){let e=this._samples;return this._renderTarget!==null?e=this._renderTarget.samples:this.needsFrameBufferTarget&&(e=0),e}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:Qr}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Nt.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this._initialized===!0&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._geometries.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,r=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=r}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}setCanvasTarget(e){this._canvasTarget.removeEventListener("resize",this._onCanvasTargetResize),this._canvasTarget=e,this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize)}getCanvasTarget(){return this._canvasTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return Ce("Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e,t);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls,this.backend.updateTimeStampUID(e),this.inspector.beginCompute(this.backend.getTimestampUID(e),e);const s=this.backend,a=this._pipelines,o=this._bindings,l=this._nodes,u=Array.isArray(e)?e:[e];if(u[0]===void 0||u[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const c of u){if(a.has(c)===!1){const g=()=>{c.removeEventListener("dispose",g),a.delete(c),o.deleteForCompute(c),l.delete(c)};c.addEventListener("dispose",g);const m=c.onInitFunction;m!==null&&m.call(c,{renderer:this})}l.updateForCompute(c),o.updateForCompute(c);const h=o.getForCompute(c),f=a.getForCompute(c,h);s.compute(e,c,h,f,t)}s.finishCompute(e),r.renderId=i,this.inspector.finishCompute(this.backend.getTimestampUID(e))}async computeAsync(e,t=null){this._initialized===!1&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return jn('Renderer: "hasFeatureAsync()" has been deprecated. Use "hasFeature()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){if(this._initialized===!1)throw new Error('Renderer: .hasFeature() called before the backend is initialized. Use "await renderer.init();" before before using this method.');return this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){jn('Renderer: "initTextureAsync()" has been deprecated. Use "initTexture()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.initTexture(e)}initTexture(e){if(this._initialized===!1)throw new Error('Renderer: .initTexture() called before the backend is initialized. Use "await renderer.init();" before before using this method.');this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=So.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=So.copy(t).floor();else{Ie("Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=So.set(0,0,e.image.width,e.image.height);let r=this._currentRenderContext,i;r!==null?i=r.renderTarget:(i=this._renderTarget||this._getFrameBufferTarget(),i!==null&&(this._textures.updateRenderTarget(i),r=this._textures.get(i))),this._textures.updateTexture(e,{renderTarget:i}),this.backend.copyFramebufferToTexture(e,r,t),this._inspector.copyFramebufferToTexture(e)}copyTextureToTexture(e,t,r=null,i=null,s=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,r,i,s,a),this._inspector.copyTextureToTexture(e,t)}async readRenderTargetPixelsAsync(e,t,r,i,s,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],t,r,i,s,o)}_projectObject(e,t,r,i,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)r=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)i.pushLight(e);else if(e.isSprite){const l=t.isArrayCamera?gE:fE;if(!e.frustumCulled||l.intersectsSprite(e,t)){this.sortObjects===!0&&So.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Sb);const{geometry:u,material:c}=e;c.visible&&i.push(e,u,c,r,So.z,null,s)}}else if(e.isLineLoop)Ie("Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=t.isArrayCamera?gE:fE;if(!e.frustumCulled||l.intersectsObject(e,t)){const{geometry:u,material:c}=e;if(this.sortObjects===!0&&(u.boundingSphere===null&&u.computeBoundingSphere(),So.copy(u.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Sb)),Array.isArray(c)){const h=u.groups;for(let f=0,g=h.length;f<g;f++){const m=h[f],v=c[m.materialIndex];v&&v.visible&&i.push(e,u,v,r,So.z,m,s)}}else c.visible&&i.push(e,u,c,r,So.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=i;i=this._renderLists.get(e,t),i.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:i}),i.finish()}const o=e.children;for(let l=0,u=o.length;l<u;l++)this._projectObject(o[l],t,r,i,s)}_renderBundles(e,t,r){for(const i of e)this._renderBundle(i,t,r)}_renderTransparents(e,t,r,i,s){if(t.length>0){for(const{material:a}of t)a.side=On;this._renderObjects(t,r,i,s,"backSide");for(const{material:a}of t)a.side=Ss;this._renderObjects(e,r,i,s);for(const{material:a}of t)a.side=pi}else this._renderObjects(e,r,i,s)}_renderObjects(e,t,r,i,s=null){for(let a=0,o=e.length;a<o;a++){const{object:l,geometry:u,material:c,group:h,clippingContext:f}=e[a];this._currentRenderObjectFunction(l,r,t,u,c,h,i,f,s)}}_getShadowNodes(e){const t=e.version;let r=this._cacheShadowNodes.get(e);if(r===void 0||r.version!==t){const i=e.map!==null,s=e.colorNode&&e.colorNode.isNode,a=e.castShadowNode&&e.castShadowNode.isNode;let o=null,l=null,u=null;if(i||s||a){let c,h;a?(c=e.castShadowNode.rgb,h=e.castShadowNode.a):(c=we(0),h=Te(1)),i&&(h=h.mul(Cn("map","texture",e).a)),s&&(h=h.mul(e.colorNode.a)),l=Ht(c,h)}e.depthNode&&e.depthNode.isNode&&(u=e.depthNode),e.castShadowPositionNode&&e.castShadowPositionNode.isNode?o=e.castShadowPositionNode:e.positionNode&&e.positionNode.isNode&&(o=e.positionNode),r={version:t,colorNode:l,depthNode:u,positionNode:o},this._cacheShadowNodes.set(e,r)}return r}renderObject(e,t,r,i,s,a,o,l=null,u=null){let c=!1,h,f,g,m;if(e.onBeforeRender(this,t,r,i,s,a),s.allowOverride===!0&&t.overrideMaterial!==null){const v=t.overrideMaterial;if(c=!0,h=t.overrideMaterial.colorNode,f=t.overrideMaterial.depthNode,g=t.overrideMaterial.positionNode,m=t.overrideMaterial.side,s.positionNode&&s.positionNode.isNode&&(v.positionNode=s.positionNode),v.alphaTest=s.alphaTest,v.alphaMap=s.alphaMap,v.transparent=s.transparent||s.transmission>0||s.transmissionNode&&s.transmissionNode.isNode||s.backdropNode&&s.backdropNode.isNode,v.isShadowPassMaterial){const{colorNode:_,depthNode:b,positionNode:S}=this._getShadowNodes(s);v.side=s.shadowSide===null?s.side:s.shadowSide,_!==null&&(v.colorNode=_),b!==null&&(v.depthNode=b),S!==null&&(v.positionNode=S)}s=v}s.transparent===!0&&s.side===pi&&s.forceSinglePass===!1?(s.side=On,this._handleObjectFunction(e,s,t,r,o,a,l,"backSide"),s.side=Ss,this._handleObjectFunction(e,s,t,r,o,a,l,u),s.side=pi):this._handleObjectFunction(e,s,t,r,o,a,l,u),c&&(t.overrideMaterial.colorNode=h,t.overrideMaterial.depthNode=f,t.overrideMaterial.positionNode=g,t.overrideMaterial.side=m),e.onAfterRender(this,t,r,i,s,a)}_renderObjectDirect(e,t,r,i,s,a,o,l){const u=this._objects.get(e,t,r,i,s,this._currentRenderContext,o,l);u.drawRange=e.geometry.drawRange,u.group=a;const c=this._nodes.needsRefresh(u);c&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(u,this.info),c&&this._nodes.updateAfter(u)}_createObjectPipeline(e,t,r,i,s,a,o,l){const u=this._objects.get(e,t,r,i,s,this._currentRenderContext,o,l);u.drawRange=e.geometry.drawRange,u.group=a,this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u),this._pipelines.getForRender(u,this._compilationPromises),this._nodes.updateAfter(u)}_onCanvasTargetResize(){this._initialized&&this.backend.updateSize()}get compile(){return this.compileAsync}}class dH{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}getVisibility(){return this.visibility}clone(){return Object.assign(new this.constructor,this)}}function _ve(n){return n+(Al-n%Al)%Al}class hH extends dH{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t,this._updateRanges=[]}get updateRanges(){return this._updateRanges}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}get byteLength(){return _ve(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class pH extends hH{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let vve=0;class fH extends pH{constructor(e,t){super("UniformBuffer_"+vve++,e?e.value:null),this.nodeUniform=e,this.groupNode=t,this.isNodeUniformBuffer=!0}set updateRanges(e){this.nodeUniform.updateRanges=e}get updateRanges(){return this.nodeUniform.updateRanges}addUpdateRange(e,t){this.nodeUniform.addUpdateRange(e,t)}clearUpdateRanges(){this.nodeUniform.clearUpdateRanges()}get buffer(){return this.nodeUniform.value}}class xve extends pH{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let r=0,i=this.uniforms.length;r<i;r++){const s=this.uniforms[r],a=s.boundary,o=s.itemSize*e,l=t%Al,u=l%a,c=l+u;t+=u,c!==0&&Al-c<o&&(t+=Al-c),s.offset=t/e,t+=o}return Math.ceil(t/Al)*Al}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);Ie("WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s]!==i){const o=this._getBufferForType(a);o[s]=r[s]=i,t=!0}return t}updateVector2(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,t=!0}return t}updateVector3(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,t=!0}return t}updateVector4(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset,a=e.getType();if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z||r[s+4]!==i.w){const o=this._getBufferForType(a);o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,o[s+3]=r[s+3]=i.w,t=!0}return t}updateColor(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.r||r[s+1]!==i.g||r[s+2]!==i.b){const a=this.buffer;a[s+0]=r[s+0]=i.r,a[s+1]=r[s+1]=i.g,a[s+2]=r[s+2]=i.b,t=!0}return t}updateMatrix3(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;if(r[s+0]!==i[0]||r[s+1]!==i[1]||r[s+2]!==i[2]||r[s+4]!==i[3]||r[s+5]!==i[4]||r[s+6]!==i[5]||r[s+8]!==i[6]||r[s+9]!==i[7]||r[s+10]!==i[8]){const a=this.buffer;a[s+0]=r[s+0]=i[0],a[s+1]=r[s+1]=i[1],a[s+2]=r[s+2]=i[2],a[s+4]=r[s+4]=i[3],a[s+5]=r[s+5]=i[4],a[s+6]=r[s+6]=i[5],a[s+8]=r[s+8]=i[6],a[s+9]=r[s+9]=i[7],a[s+10]=r[s+10]=i[8],t=!0}return t}updateMatrix4(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;return Eve(r,i,s)===!1&&(this.buffer.set(i,s),Sve(r,i,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function Sve(n,e,t){for(let r=0,i=e.length;r<i;r++)n[t+r]=e[r]}function Eve(n,e,t){for(let r=0,i=e.length;r<i;r++)if(n[t+r]!==e[r])return!1;return!0}let Tve=0;class gH extends xve{constructor(e,t){super(e),this.id=Tve++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class mH extends dH{constructor(e,t){super(e),this._texture=null,this._onTextureDispose=()=>{this.generation=null,this.version=0},this.texture=t,this.version=t?t.version:0,this.generation=null,this.samplerKey="",this.isSampler=!0}set texture(e){this._texture!==e&&(this._texture&&this._texture.removeEventListener("dispose",this._onTextureDispose),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",this._onTextureDispose))}get texture(){return this._texture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}clone(){const e=super.clone();return e._texture=null,e._onTextureDispose=()=>{e.generation=null,e.version=0},e.texture=this.texture,e}}let wve=0;class Ave extends mH{constructor(e,t){super(e,t),this.id=wve++,this.store=!1,this.mipLevel=0,this.isSampledTexture=!0}}class Tv extends Ave{constructor(e,t,r,i=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r,this.access=i}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class yH extends Tv{constructor(e,t,r,i=null){super(e,t,r,i),this.isSampledCubeTexture=!0}}class aw extends Tv{constructor(e,t,r,i=null){super(e,t,r,i),this.isSampledTexture3D=!0}}const iB={bitcast_int_uint:new Yr("uint tsl_bitcast_int_to_uint ( int x ) { return floatBitsToUint( intBitsToFloat ( x ) ); }"),bitcast_uint_int:new Yr("uint tsl_bitcast_uint_to_int ( uint x ) { return floatBitsToInt( uintBitsToFloat ( x ) ); }")},Rve={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint",bitcast_uint_int:"tsl_bitcast_uint_to_int",bitcast_int_uint:"tsl_bitcast_int_to_uint",floatpack_snorm_2x16:"packSnorm2x16",floatpack_unorm_2x16:"packUnorm2x16",floatpack_float16_2x16:"packHalf2x16",floatunpack_snorm_2x16:"unpackSnorm2x16",floatunpack_unorm_2x16:"unpackUnorm2x16",floatunpack_float16_2x16:"unpackHalf2x16"},Nve={low:"lowp",medium:"mediump",high:"highp"},sB={swizzleAssign:!0,storageBuffer:!1},aB={perspective:"smooth",linear:"noperspective"},oB={centroid:"centroid"},lB=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class Cve extends lH{constructor(e,t){super(e,t,new rve),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Yi}_include(e){const t=iB[e];return t.build(this),this.addInclude(t),t}getMethod(e){return iB[e]!==void 0&&this._include(e),Rve[e]||e}getBitcastMethod(e,t){return this.getMethod(`bitcast_${t}_${e}`)}getFloatPackingMethod(e){return this.getMethod(`floatpack_${e}_2x16`)}getFloatUnpackingMethod(e){return this.getMethod(`floatunpack_${e}_2x16`)}getTernary(e,t,r){return`${e} ? ${t} : ${r}`}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const a of t.inputs)i.push(this.getType(a.type)+" "+a.name);return`${this.getType(t.type)} ${t.name}( ${i.join(", ")} ) {

	${r.vars}

${r.code}
	return ${r.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const r=t.array,i=t.count*t.itemSize,{itemSize:s}=t,a=t.array.constructor.name.toLowerCase().includes("int");let o=a?zh:Qg;s===2?o=a?Gh:Di:s===3?o=a?xte:Zg:s===4&&(o=a?Vh:pr);const l={Float32Array:hr,Uint8Array:qn,Uint16Array:pa,Uint32Array:An,Int8Array:$u,Int16Array:Hu,Int32Array:Vr,Uint8ClampedArray:qn},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(i/s))));let c=Math.ceil(i/s/u);u*c*s<i&&c++;const h=u*c*s,f=new r.constructor(h);f.set(r,0),t.array=f;const g=new Z1(t.array,u,c,o,l[t.array.constructor.name]||hr);g.needsUpdate=!0,g.isPBOTexture=!0;const m=new Yh(g,null,null);m.setPrecision("high"),t.pboNode=m,t.pbo=m.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:r}=e,i=t.value;if(this.renderer.backend.has(i)){const c=this.renderer.backend.get(i);c.pbo=i.pbo}const s=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.nodeName),a=this.getPropertyName(s);this.increaseUsage(r);const o=r.build(this,"uint"),l=this.getDataFromNode(e);let u=l.propertyName;if(u===void 0){const c=this.getVarFromNode(e);u=this.getPropertyName(c);const h=this.getDataFromNode(t);let f=h.propertySizeName;f===void 0&&(f=u+"Size",this.getVarFromNode(t,f,"uint"),this.addLineFlowCode(`${f} = uint( textureSize( ${a}, 0 ).x )`,e),h.propertySizeName=f);const{itemSize:g}=i,m="."+Wh.join("").slice(0,g),v=`ivec2(${o} % ${f}, ${o} / ${f})`,_=this.generateTextureLoad(null,a,v,"0",null,null);let b="vec4";i.pbo.type===An?b="uvec4":i.pbo.type===Vr&&(b="ivec4"),this.addLineFlowCode(`${u} = ${b}(${_})${m}`,e),l.propertyName=u}return u}generateTextureLoad(e,t,r,i,s,a){i===null&&(i="0");let o;return s?a?o=`texelFetchOffset( ${t}, ivec3( ${r}, ${s} ), ${i}, ${a} )`:o=`texelFetch( ${t}, ivec3( ${r}, ${s} ), ${i} )`:a?o=`texelFetchOffset( ${t}, ${r}, ${i}, ${a} )`:o=`texelFetch( ${t}, ${r}, ${i} )`,e!==null&&e.isDepthTexture&&(o+=".x"),o}generateTexture(e,t,r,i,s){return i&&(r=`vec3( ${r}, ${i} )`),e.isDepthTexture?s?`textureOffset( ${t}, ${r}, ${s} ).x`:`texture( ${t}, ${r} ).x`:s?`textureOffset( ${t}, ${r}, ${s} )`:`texture( ${t}, ${r} )`}generateTextureLevel(e,t,r,i,s){return s?`textureLodOffset( ${t}, ${r}, ${i}, ${s} )`:`textureLod( ${t}, ${r}, ${i} )`}generateTextureBias(e,t,r,i,s){return s?`textureOffset( ${t}, ${r}, ${s}, ${i} )`:`texture( ${t}, ${r}, ${i} )`}generateTextureGrad(e,t,r,i,s){return s?`textureGradOffset( ${t}, ${r}, ${i[0]}, ${i[1]}, ${s} )`:`textureGrad( ${t}, ${r}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,t,r,i,s,a,o=this.shaderStage){if(o==="fragment")return e.isCubeTexture?`texture( ${t}, vec4( ${r}, ${i} ) )`:s?a?`textureOffset( ${t}, vec4( ${r}, ${s}, ${i} ), ${a} )`:`texture( ${t}, vec4( ${r}, ${s}, ${i} ) )`:a?`textureOffset( ${t}, vec3( ${r}, ${i} ), ${a} )`:`texture( ${t}, vec3( ${r}, ${i} ) )`;Ie(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`${this.getVar(i.type,i.name,i.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],r=[],i={};for(const a of t){let o=null,l=!1;if(a.type==="texture"||a.type==="texture3D"){const c=a.node.value;let h="";(c.isDataTexture===!0||c.isData3DTexture===!0)&&(c.type===An?h="u":c.type===Vr&&(h="i")),a.type==="texture3D"&&c.isArrayTexture===!1?o=`${h}sampler3D ${a.name};`:c.compareFunction?c.isArrayTexture===!0?o=`sampler2DArrayShadow ${a.name};`:o=`sampler2DShadow ${a.name};`:c.isArrayTexture===!0||c.isDataArrayTexture===!0||c.isCompressedArrayTexture===!0?o=`${h}sampler2DArray ${a.name};`:o=`${h}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="cubeDepthTexture")o=`samplerCubeShadow ${a.name};`;else if(a.type==="buffer"){const c=a.node,h=this.getType(c.bufferType),f=c.bufferCount,g=f>0?f:"";o=`${c.name} {
	${h} ${a.name}[${g}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,l=!0;const u=a.node.precision;if(u!==null&&(o=Nve[u]+" "+o),l){o="	"+o;const c=a.groupNode.name;(i[c]||(i[c]=[])).push(o)}else o="uniform "+o,r.push(o)}let s="";for(const a in i){const o=i[a];s+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return s+=r.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==Vr){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array;i instanceof Uint32Array||i instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const r=this.getAttributesArray();let i=0;for(const s of r)t+=`layout( location = ${i++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const r of e.members)t.push(`	${r.type} ${r.name};`);return t.join(`
`)}getStructs(e){const t=[],r=this.structs[e],i=[];for(const s of r)if(s.output)for(const a of s.members)i.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+s.name+` {
`;a+=this.getStructMembers(s),a+=`
};
`,t.push(a)}return i.length===0&&i.push("layout( location = 0 ) out vec4 fragColor;"),`
`+i.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const r=this.varyings;if(e==="vertex"||e==="compute")for(const i of r){e==="compute"&&(i.needsInterpolation=!0);const s=this.getType(i.type);if(i.needsInterpolation)if(i.interpolationType){const a=aB[i.interpolationType]||i.interpolationType,o=oB[i.interpolationSampling]||"";t+=`${a} ${o} out ${s} ${i.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}out ${s} ${i.name};
`}else t+=`${s} ${i.name};
`}else if(e==="fragment"){for(const i of r)if(i.needsInterpolation){const s=this.getType(i.type);if(i.interpolationType){const a=aB[i.interpolationType]||i.interpolationType,o=oB[i.interpolationSampling]||"";t+=`${a} ${o} in ${s} ${i.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}in ${s} ${i.name};
`}}}for(const i of this.builtins[e])t+=`${i};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((r,i)=>r*i,1)}u`}getSubgroupSize(){Ie("GLSLNodeBuilder: WebGLBackend does not support the subgroupSize node")}getInvocationSubgroupIndex(){Ie("GLSLNodeBuilder: WebGLBackend does not support the invocationSubgroupIndex node")}getSubgroupIndex(){Ie("GLSLNodeBuilder: WebGLBackend does not support the subgroupIndex node")}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,r=this.shaderStage){const i=this.extensions[r]||(this.extensions[r]=new Map);i.has(e)===!1&&i.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const i=this.renderer.backend.extensions;this.object.isBatchedMesh&&i.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const r=this.extensions[e];if(r!==void 0)for(const{name:i,behavior:s}of r.values())t.push(`#extension ${i} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=sB[e];if(t===void 0){let r;switch(t=!1,e){case"float32Filterable":r="OES_texture_float_linear";break;case"clipDistance":r="WEBGL_clip_cull_distance";break}if(r!==void 0){const i=this.renderer.backend.extensions;i.has(r)&&(i.get(r),t=!0)}sB[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let r=0;r<e.length;r++){const i=e[r],s=this.getPropertyName(i.attributeNode);s&&(t+=`${i.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${lB}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${lB}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let r=`// code

`;r+=this.flowCode[t];const i=this.flowNodes[t],s=i[i.length-1];for(const o of i){const l=this.getFlowData(o),u=o.name;u&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${u}
	`),r+=`${l.code}
	`,o===s&&t!=="compute"&&(r+=`// result
	`,t==="vertex"?(r+="gl_Position = ",r+=`${l.result};`):t==="fragment"&&(o.outputNode.isOutputStructNode||(r+="fragColor = ",r+=`${l.result};`)))}const a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=r}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),a=this.getDataFromNode(e,r,this.globalCache);let o=a.uniformGPU;if(o===void 0){const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,r);if(t==="texture")o=new Tv(s.name,s.node,l),c.push(o);else if(t==="cubeTexture"||t==="cubeDepthTexture")o=new yH(s.name,s.node,l),c.push(o);else if(t==="texture3D")o=new aw(s.name,s.node,l),c.push(o);else if(t==="buffer"){s.name=`buffer${e.id}`;const h=this.getSharedDataFromNode(e);let f=h.buffer;f===void 0&&(e.name=`NodeBuffer_${e.id}`,f=new fH(e,l),f.name=e.name,h.buffer=f),c.push(f),o=f}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let f=h[u];f===void 0&&(f=new gH(r+"_"+u,l),h[u]=f,c.push(f)),o=this.getNodeUniform(s,t),f.addUniform(o)}a.uniformGPU=o}return s}}let mE=null,hd=null;class bH{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={[Va.RENDER]:null,[Va.COMPUTE]:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}updateSampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}updateTimeStampUID(e){const t=this.get(e),r=this.renderer.info.frame;let i;e.isComputeNode===!0?i="c:"+this.renderer.info.compute.frameCalls:i="r:"+this.renderer.info.render.frameCalls,t.timestampUID=i+":"+e.id+":f"+r}getTimestampUID(e){return this.get(e).timestampUID}getTimestampFrames(e){const t=this.timestampQueryPool[e];return t?t.getTimestampFrames():[]}_getQueryPool(e){const t=e.startsWith("c:")?Va.COMPUTE:Va.RENDER;return this.timestampQueryPool[t]}getTimestamp(e){return this._getQueryPool(e).getTimestamp(e)}hasTimestamp(e){return this._getQueryPool(e).hasTimestamp(e)}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){jn("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t)return;const r=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=r,r}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return mE=mE||new $e,this.renderer.getDrawingBufferSize(mE)}setScissorTest(){}getClearColor(){const e=this.renderer;return hd=hd||new LI,e.getClearColor(hd),hd.getRGB(hd),hd}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:hV(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${dc} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}deleteBindGroupData(){}dispose(){}}let Mve=0;class Ive{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class kve{constructor(e){this.backend=e}createAttribute(e,t){const r=this.backend,{gl:i}=r,s=e.array,a=e.usage||i.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=r.get(o);let u=l.bufferGPU;u===void 0&&(u=this._createBuffer(i,t,s,a),l.bufferGPU=u,l.bufferType=t,l.version=o.version);let c;if(s instanceof Float32Array)c=i.FLOAT;else if(typeof Float16Array<"u"&&s instanceof Float16Array)c=i.HALF_FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?c=i.HALF_FLOAT:c=i.UNSIGNED_SHORT;else if(s instanceof Int16Array)c=i.SHORT;else if(s instanceof Uint32Array)c=i.UNSIGNED_INT;else if(s instanceof Int32Array)c=i.INT;else if(s instanceof Int8Array)c=i.BYTE;else if(s instanceof Uint8Array)c=i.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)c=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let h={bufferGPU:u,bufferType:t,type:c,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:c===i.INT||c===i.UNSIGNED_INT||e.gpuType===Vr,id:Mve++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const f=this._createBuffer(i,t,s,a);h=new Ive(h,f)}r.set(e,h)}updateAttribute(e){const t=this.backend,{gl:r}=t,i=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=t.get(s),o=a.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(r.bindBuffer(o,a.bufferGPU),l.length===0)r.bufferSubData(o,0,i);else{for(let u=0,c=l.length;u<c;u++){const h=l[u];r.bufferSubData(o,h.start*i.BYTES_PER_ELEMENT,i,h.start,h.count)}s.clearUpdateRanges()}r.bindBuffer(o,null),a.version=s.version}destroyAttribute(e){const t=this.backend,{gl:r}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const i=t.get(e);r.deleteBuffer(i.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:r}=t,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(i),a=e.array,o=a.byteLength;r.bindBuffer(r.COPY_READ_BUFFER,s);const l=r.createBuffer();r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.bufferData(r.COPY_WRITE_BUFFER,o,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,o),await t.utils._clientWaitAsync();const u=new e.array.constructor(a.length);return r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,u),r.deleteBuffer(l),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,t,r,i){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,r,i),e.bindBuffer(t,null),s}}let yE,ff;class Lve{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;yE={[fi]:e.FUNC_ADD,[y1]:e.FUNC_SUBTRACT,[b1]:e.FUNC_REVERSE_SUBTRACT},ff={[To]:e.ZERO,[_1]:e.ONE,[v1]:e.SRC_COLOR,[dg]:e.SRC_ALPHA,[A1]:e.SRC_ALPHA_SATURATE,[T1]:e.DST_COLOR,[S1]:e.DST_ALPHA,[x1]:e.ONE_MINUS_SRC_COLOR,[hg]:e.ONE_MINUS_SRC_ALPHA,[w1]:e.ONE_MINUS_DST_COLOR,[E1]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),r=e.getParameter(e.VIEWPORT);this.currentScissor=new Wt().fromArray(t),this.currentViewport=new Wt().fromArray(r),this._tempVec4=new Wt}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==rV?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===AT?t.cullFace(t.BACK):e===iV?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:r}=this;e!==t&&(r.lineWidth(e),this.currentLineWidth=e)}setMRTBlending(e){const t=this.gl,r=this.backend.drawBuffersIndexedExt;if(r)for(let i=1;i<e.length;i++)r.blendFuncSeparateiOES(i,t.ONE,t.ZERO,t.ONE,t.ZERO)}setBlending(e,t,r,i,s,a,o,l){const{gl:u}=this;if(e===Pi){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==kd){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==fi||this.currentBlendEquationAlpha!==fi)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=fi,this.currentBlendEquationAlpha=fi),l)switch(e){case Es:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Gd:u.blendFunc(u.ONE,u.ONE);break;case Vd:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case $d:u.blendFuncSeparate(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA,u.ZERO,u.ONE);break;default:Ie("WebGLState: Invalid blending: ",e);break}else switch(e){case Es:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Gd:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case Vd:Ie("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case $d:Ie("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ie("WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,a=a||r,o=o||i,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(yE[t],yE[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(r!==this.currentBlendSrc||i!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(ff[r],ff[i],ff[a],ff[o]),this.currentBlendSrc=r,this.currentBlendDst=i,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case pg:t.depthFunc(t.NEVER);break;case fg:t.depthFunc(t.ALWAYS);break;case gg:t.depthFunc(t.LESS);break;case Gl:t.depthFunc(t.LEQUAL);break;case mg:t.depthFunc(t.EQUAL);break;case yg:t.depthFunc(t.GEQUAL);break;case bg:t.depthFunc(t.GREATER);break;case _g:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,r,i){const s=this._tempVec4.set(e,t,r,i);if(this.currentScissor.equals(s)===!1){const{gl:a}=this;a.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,r,i){const s=this._tempVec4.set(e,t,r,i);if(this.currentViewport.equals(s)===!1){const{gl:a}=this;a.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,r){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==r)&&(this.gl.stencilFunc(e,t,r),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=r)}setStencilOp(e,t,r){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==r)&&(this.gl.stencilOp(e,t,r),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=r)}setMaterial(e,t,r){const{gl:i}=this;e.side===pi?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let s=e.side===On;t&&(s=!s),this.setFlipSided(s),e.blending===Es&&e.transparent===!1?this.setBlending(Pi):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.currentSamples>0?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE),r>0&&this.currentClippingPlanes!==r)for(let l=0;l<8;l++)l<r?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,r){const{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==r)&&(i.polygonOffset(t,r),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=r)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const r=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(r.bindVertexArray(e),t!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:r,currentBoundFramebuffers:i}=this;return i[e]!==t?(r.bindFramebuffer(e,t),i[e]=t,e===r.DRAW_FRAMEBUFFER&&(i[r.FRAMEBUFFER]=t),e===r.FRAMEBUFFER&&(i[r.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:r}=this;let i=[],s=!1;if(e.textures!==null){i=this.currentDrawbuffers.get(t),i===void 0&&(i=[],this.currentDrawbuffers.set(t,i));const a=e.textures;if(i.length!==a.length||i[0]!==r.COLOR_ATTACHMENT0){for(let o=0,l=a.length;o<l;o++)i[o]=r.COLOR_ATTACHMENT0+o;i.length=a.length,s=!0}}else i[0]!==r.BACK&&(i[0]=r.BACK,s=!0);s&&r.drawBuffers(i)}activeTexture(e){const{gl:t,currentTextureSlot:r,maxTextures:i}=this;e===void 0&&(e=t.TEXTURE0+i-1),r!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,r){const{gl:i,currentTextureSlot:s,currentBoundTextures:a,maxTextures:o}=this;r===void 0&&(s===null?r=i.TEXTURE0+o-1:r=s);let l=a[r];l===void 0&&(l={type:void 0,texture:void 0},a[r]=l),(l.type!==e||l.texture!==t)&&(s!==r&&(i.activeTexture(r),this.currentTextureSlot=r),i.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,r){const{gl:i}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==r?(i.bindBufferBase(e,t,r),this.currentBoundBufferBases[s]=r,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:r}=this,i=r[t];i!==void 0&&i.type!==void 0&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class Dve{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=Yi){const{gl:r,extensions:i}=this;let s;const a=Nt.getTransfer(t);if(e===qn)return r.UNSIGNED_BYTE;if(e===Q_)return r.UNSIGNED_SHORT_4_4_4_4;if(e===J_)return r.UNSIGNED_SHORT_5_5_5_1;if(e===ev)return r.UNSIGNED_INT_5_9_9_9_REV;if(e===tv)return r.UNSIGNED_INT_10F_11F_11F_REV;if(e===$u)return r.BYTE;if(e===Hu)return r.SHORT;if(e===pa)return r.UNSIGNED_SHORT;if(e===Vr)return r.INT;if(e===An)return r.UNSIGNED_INT;if(e===hr)return r.FLOAT;if(e===tr)return r.HALF_FLOAT;if(e===O1)return r.ALPHA;if(e===Zg)return r.RGB;if(e===pr)return r.RGBA;if(e===Jr)return r.DEPTH_COMPONENT;if(e===Li)return r.DEPTH_STENCIL;if(e===Qg)return r.RED;if(e===zh)return r.RED_INTEGER;if(e===Di)return r.RG;if(e===Gh)return r.RG_INTEGER;if(e===Vh)return r.RGBA_INTEGER;if(e===Ll||e===Dl||e===Ol||e===Pl)if(a===lt)if(s=i.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Ll)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Dl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Ol)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Pl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=i.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Ll)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Dl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ol)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Pl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===vg||e===xg||e===Sg||e===Eg)if(s=i.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===vg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===xg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Sg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Eg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Wd||e===qd||e===Xd||e===Yd||e===Kd||e===Ju||e===Zd)if(s=i.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Wd||e===qd)return a===lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===Xd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(e===Yd)return s.COMPRESSED_R11_EAC;if(e===Kd)return s.COMPRESSED_SIGNED_R11_EAC;if(e===Ju)return s.COMPRESSED_RG11_EAC;if(e===Zd)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(e===Qd||e===Jd||e===eh||e===th||e===nh||e===rh||e===ih||e===sh||e===ah||e===oh||e===lh||e===uh||e===ch||e===dh)if(s=i.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Qd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Jd)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===eh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===th)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===nh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===rh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===ih)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===sh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===ah)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===oh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===lh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===uh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===ch)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===dh)return a===lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===hh)if(s=i.get("EXT_texture_compression_bptc"),s!==null){if(e===hh)return a===lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===ph||e===fh||e===ec||e===gh)if(s=i.get("EXT_texture_compression_rgtc"),s!==null){if(e===ph)return s.COMPRESSED_RED_RGTC1_EXT;if(e===fh)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===ec)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===gh)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Ts?r.UNSIGNED_INT_24_8:r[e]!==void 0?r[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((r,i)=>{function s(){const a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),i();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),r()}s()})}}let uB=!1,Eb,bE,cB;class Ove{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},this._srcFramebuffer=null,this._dstFramebuffer=null,uB===!1&&(this._init(),uB=!0)}_init(){const e=this.gl;Eb={[Zu]:e.REPEAT,[Qi]:e.CLAMP_TO_EDGE,[Qu]:e.MIRRORED_REPEAT},bE={[Rn]:e.NEAREST,[D1]:e.NEAREST_MIPMAP_NEAREST,[ko]:e.NEAREST_MIPMAP_LINEAR,[Vn]:e.LINEAR,[Ld]:e.LINEAR_MIPMAP_NEAREST,[Ji]:e.LINEAR_MIPMAP_LINEAR},cB={[P1]:e.NEVER,[z1]:e.ALWAYS,[Jg]:e.LESS,[em]:e.LEQUAL,[F1]:e.EQUAL,[tm]:e.GEQUAL,[U1]:e.GREATER,[B1]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let r;return e.isCubeTexture===!0?r=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?r=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?r=t.TEXTURE_3D:r=t.TEXTURE_2D,r}getInternalFormat(e,t,r,i,s=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];Ce("WebGLBackend: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;if(t===a.RED&&(r===a.FLOAT&&(l=a.R32F),r===a.HALF_FLOAT&&(l=a.R16F),r===a.UNSIGNED_BYTE&&(l=a.R8),r===a.UNSIGNED_SHORT&&(l=a.R16),r===a.UNSIGNED_INT&&(l=a.R32UI),r===a.BYTE&&(l=a.R8I),r===a.SHORT&&(l=a.R16I),r===a.INT&&(l=a.R32I)),t===a.RED_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.R8UI),r===a.UNSIGNED_SHORT&&(l=a.R16UI),r===a.UNSIGNED_INT&&(l=a.R32UI),r===a.BYTE&&(l=a.R8I),r===a.SHORT&&(l=a.R16I),r===a.INT&&(l=a.R32I)),t===a.RG&&(r===a.FLOAT&&(l=a.RG32F),r===a.HALF_FLOAT&&(l=a.RG16F),r===a.UNSIGNED_BYTE&&(l=a.RG8),r===a.UNSIGNED_SHORT&&(l=a.RG16),r===a.UNSIGNED_INT&&(l=a.RG32UI),r===a.BYTE&&(l=a.RG8I),r===a.SHORT&&(l=a.RG16I),r===a.INT&&(l=a.RG32I)),t===a.RG_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RG8UI),r===a.UNSIGNED_SHORT&&(l=a.RG16UI),r===a.UNSIGNED_INT&&(l=a.RG32UI),r===a.BYTE&&(l=a.RG8I),r===a.SHORT&&(l=a.RG16I),r===a.INT&&(l=a.RG32I)),t===a.RGB){const u=s?mh:Nt.getTransfer(i);r===a.FLOAT&&(l=a.RGB32F),r===a.HALF_FLOAT&&(l=a.RGB16F),r===a.UNSIGNED_BYTE&&(l=a.RGB8),r===a.UNSIGNED_SHORT&&(l=a.RGB16),r===a.UNSIGNED_INT&&(l=a.RGB32UI),r===a.BYTE&&(l=a.RGB8I),r===a.SHORT&&(l=a.RGB16I),r===a.INT&&(l=a.RGB32I),r===a.UNSIGNED_BYTE&&(l=u===lt?a.SRGB8:a.RGB8),r===a.UNSIGNED_SHORT_5_6_5&&(l=a.RGB565),r===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1),r===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGB4),r===a.UNSIGNED_INT_5_9_9_9_REV&&(l=a.RGB9_E5),r===a.UNSIGNED_INT_10F_11F_11F_REV&&(l=a.R11F_G11F_B10F)}if(t===a.RGB_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RGB8UI),r===a.UNSIGNED_SHORT&&(l=a.RGB16UI),r===a.UNSIGNED_INT&&(l=a.RGB32UI),r===a.BYTE&&(l=a.RGB8I),r===a.SHORT&&(l=a.RGB16I),r===a.INT&&(l=a.RGB32I)),t===a.RGBA){const u=s?mh:Nt.getTransfer(i);r===a.FLOAT&&(l=a.RGBA32F),r===a.HALF_FLOAT&&(l=a.RGBA16F),r===a.UNSIGNED_BYTE&&(l=a.RGBA8),r===a.UNSIGNED_SHORT&&(l=a.RGBA16),r===a.UNSIGNED_INT&&(l=a.RGBA32UI),r===a.BYTE&&(l=a.RGBA8I),r===a.SHORT&&(l=a.RGBA16I),r===a.INT&&(l=a.RGBA32I),r===a.UNSIGNED_BYTE&&(l=u===lt?a.SRGB8_ALPHA8:a.RGBA8),r===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGBA4),r===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1)}return t===a.RGBA_INTEGER&&(r===a.UNSIGNED_BYTE&&(l=a.RGBA8UI),r===a.UNSIGNED_SHORT&&(l=a.RGBA16UI),r===a.UNSIGNED_INT&&(l=a.RGBA32UI),r===a.BYTE&&(l=a.RGBA8I),r===a.SHORT&&(l=a.RGBA16I),r===a.INT&&(l=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(r===a.UNSIGNED_SHORT&&(l=a.DEPTH_COMPONENT16),r===a.UNSIGNED_INT&&(l=a.DEPTH_COMPONENT24),r===a.FLOAT&&(l=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&r===a.UNSIGNED_INT_24_8&&(l=a.DEPTH24_STENCIL8),(l===a.R16F||l===a.R32F||l===a.RG16F||l===a.RG32F||l===a.RGBA16F||l===a.RGBA32F)&&o.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:r,extensions:i,backend:s}=this,a=Nt.getPrimaries(Nt.workingColorSpace),o=t.colorSpace===Yi?null:Nt.getPrimaries(t.colorSpace),l=t.colorSpace===Yi||a===o?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,t.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),r.texParameteri(e,r.TEXTURE_WRAP_S,Eb[t.wrapS]),r.texParameteri(e,r.TEXTURE_WRAP_T,Eb[t.wrapT]),(e===r.TEXTURE_3D||e===r.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||r.texParameteri(e,r.TEXTURE_WRAP_R,Eb[t.wrapR])),r.texParameteri(e,r.TEXTURE_MAG_FILTER,bE[t.magFilter]);const u=t.mipmaps!==void 0&&t.mipmaps.length>0,c=t.minFilter===Vn&&u?Ji:t.minFilter;if(r.texParameteri(e,r.TEXTURE_MIN_FILTER,bE[c]),t.compareFunction&&(r.texParameteri(e,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(e,r.TEXTURE_COMPARE_FUNC,cB[t.compareFunction])),i.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Rn||t.minFilter!==ko&&t.minFilter!==Ji||t.type===hr&&i.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const h=i.get("EXT_texture_filter_anisotropic");r.texParameterf(e,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:r,defaultTextures:i}=this,s=this.getGLTextureType(e);let a=i[s];a===void 0&&(a=t.createTexture(),r.state.bindTexture(s,a),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),i[s]=a),r.set(e,{textureGPU:a,glTextureType:s})}createTexture(e,t){const{gl:r,backend:i}=this,{levels:s,width:a,height:o,depth:l}=t,u=i.utils.convert(e.format,e.colorSpace),c=i.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,u,c,e.colorSpace,e.isVideoTexture),f=r.createTexture(),g=this.getGLTextureType(e);i.state.bindTexture(g,f),this.setTextureParameters(g,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?r.texStorage3D(r.TEXTURE_2D_ARRAY,s,h,a,o,l):e.isData3DTexture?r.texStorage3D(r.TEXTURE_3D,s,h,a,o,l):e.isVideoTexture||r.texStorage2D(g,s,h,a,o),i.set(e,{textureGPU:f,glTextureType:g,glFormat:u,glType:c,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:r,backend:i}=this,{textureGPU:s,glTextureType:a,glFormat:o,glType:l}=i.get(t),{width:u,height:c}=t.source.data;r.bindBuffer(r.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(a,s),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texSubImage2D(a,0,0,0,u,c,o,l,0),r.bindBuffer(r.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,t){const{gl:r}=this,{width:i,height:s}=t,{textureGPU:a,glTextureType:o,glFormat:l,glType:u,glInternalFormat:c}=this.backend.get(e);if(!(e.isRenderTargetTexture||a===void 0))if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const h=e.mipmaps,f=t.image;for(let g=0;g<h.length;g++){const m=h[g];e.isCompressedArrayTexture?e.format!==r.RGBA?l!==null?r.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,g,0,0,0,m.width,m.height,f.depth,l,m.data):Ce("WebGLBackend: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texSubImage3D(r.TEXTURE_2D_ARRAY,g,0,0,0,m.width,m.height,f.depth,l,u,m.data):l!==null?r.compressedTexSubImage2D(r.TEXTURE_2D,g,0,0,m.width,m.height,l,m.data):Ce("WebGLBackend: Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=t.images,f=e.mipmaps;for(let g=0;g<6;g++){const m=Tb(h[g]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,0,0,i,s,l,u,m);for(let v=0;v<f.length;v++){const _=f[v],b=Tb(_.images[g]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+g,v+1,0,0,b.width,b.height,l,u,b)}}}else if(e.isDataArrayTexture||e.isArrayTexture){const h=t.image;if(e.layerUpdates.size>0){const f=IT(h.width,h.height,e.format,e.type);for(const g of e.layerUpdates){const m=h.data.subarray(g*f/h.data.BYTES_PER_ELEMENT,(g+1)*f/h.data.BYTES_PER_ELEMENT);r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,g,h.width,h.height,1,l,u,m)}e.clearLayerUpdates()}else r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,l,u,h.data)}else if(e.isData3DTexture){const h=t.image;r.texSubImage3D(r.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,l,u,h.data)}else if(e.isVideoTexture)e.update(),r.texImage2D(o,0,c,l,u,t.image);else{const h=e.mipmaps;if(h.length>0)for(let f=0,g=h.length;f<g;f++){const m=h[f],v=Tb(m);r.texSubImage2D(o,f,0,0,m.width,m.height,l,u,v)}else{const f=Tb(t.image);r.texSubImage2D(o,0,0,0,i,s,l,u,f)}}}generateMipmaps(e){const{gl:t,backend:r}=this,{textureGPU:i,glTextureType:s}=r.get(e);r.state.bindTexture(s,i),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:r}=this;if(e){const i=r.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(const s in i.framebuffers)t.deleteFramebuffer(i.framebuffers[s]);delete i.framebuffers}if(i.depthRenderbuffer&&(t.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(t.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(t.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let s=0;s<i.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(i.msaaRenderbuffers[s]);delete i.msaaRenderbuffers}}}destroyTexture(e,t=!1){const{gl:r,backend:i}=this,{textureGPU:s,renderTarget:a}=i.get(e);this.deallocateRenderBuffers(a),t===!1&&r.deleteTexture(s),i.delete(e)}copyTextureToTexture(e,t,r=null,i=null,s=0,a=0){const{gl:o,backend:l}=this,{state:u}=this.backend,{textureGPU:c,glTextureType:h,glType:f,glFormat:g}=l.get(t);u.bindTexture(h,c);let m,v,_,b,S,E,A,R,w;const M=e.isCompressedTexture?e.mipmaps[a]:e.image;if(r!==null)m=r.max.x-r.min.x,v=r.max.y-r.min.y,_=r.isBox3?r.max.z-r.min.z:1,b=r.min.x,S=r.min.y,E=r.isBox3?r.min.z:0;else{const X=Math.pow(2,-s);m=Math.floor(M.width*X),v=Math.floor(M.height*X),e.isDataArrayTexture||e.isArrayTexture?_=M.depth:e.isData3DTexture?_=Math.floor(M.depth*X):_=1,b=0,S=0,E=0}i!==null?(A=i.x,R=i.y,w=i.z):(A=0,R=0,w=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const I=o.getParameter(o.UNPACK_ROW_LENGTH),C=o.getParameter(o.UNPACK_IMAGE_HEIGHT),k=o.getParameter(o.UNPACK_SKIP_PIXELS),O=o.getParameter(o.UNPACK_SKIP_ROWS),z=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,M.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,M.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,b),o.pixelStorei(o.UNPACK_SKIP_ROWS,S),o.pixelStorei(o.UNPACK_SKIP_IMAGES,E);const W=e.isDataArrayTexture||e.isData3DTexture||t.isArrayTexture,q=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isDepthTexture){const X=l.get(e),Q=l.get(t),H=l.get(X.renderTarget),G=l.get(Q.renderTarget),re=H.framebuffers[X.cacheKey],D=G.framebuffers[Q.cacheKey];u.bindFramebuffer(o.READ_FRAMEBUFFER,re),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,D);for(let U=0;U<_;U++)W&&(o.framebufferTextureLayer(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,X.textureGPU,s,E+U),o.framebufferTextureLayer(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,c,a,w+U)),o.blitFramebuffer(b,S,m,v,A,R,m,v,o.DEPTH_BUFFER_BIT,o.NEAREST);u.bindFramebuffer(o.READ_FRAMEBUFFER,null),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else if(s!==0||e.isRenderTargetTexture||l.has(e)){const X=l.get(e);this._srcFramebuffer===null&&(this._srcFramebuffer=o.createFramebuffer()),this._dstFramebuffer===null&&(this._dstFramebuffer=o.createFramebuffer()),u.bindFramebuffer(o.READ_FRAMEBUFFER,this._srcFramebuffer),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,this._dstFramebuffer);for(let Q=0;Q<_;Q++)W?o.framebufferTextureLayer(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,X.textureGPU,s,E+Q):o.framebufferTexture2D(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,X.textureGPU,s),q?o.framebufferTextureLayer(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,c,a,w+Q):o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,c,a),s!==0?o.blitFramebuffer(b,S,m,v,A,R,m,v,o.COLOR_BUFFER_BIT,o.NEAREST):q?o.copyTexSubImage3D(h,a,A,R,w+Q,b,S,m,v):o.copyTexSubImage2D(h,a,A,R,b,S,m,v);u.bindFramebuffer(o.READ_FRAMEBUFFER,null),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else q?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(h,a,A,R,w,m,v,_,g,f,M.data):t.isCompressedArrayTexture?o.compressedTexSubImage3D(h,a,A,R,w,m,v,_,g,M.data):o.texSubImage3D(h,a,A,R,w,m,v,_,g,f,M):e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,a,A,R,m,v,g,f,M.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,a,A,R,M.width,M.height,g,M.data):o.texSubImage2D(o.TEXTURE_2D,a,A,R,m,v,g,f,M);o.pixelStorei(o.UNPACK_ROW_LENGTH,I),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,C),o.pixelStorei(o.UNPACK_SKIP_PIXELS,k),o.pixelStorei(o.UNPACK_SKIP_ROWS,O),o.pixelStorei(o.UNPACK_SKIP_IMAGES,z),a===0&&t.generateMipmaps&&o.generateMipmap(h),u.unbindTexture()}copyFramebufferToTexture(e,t,r){const{gl:i}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:l,z:u,w:c}=r,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,f=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(h){const g=o!==0||l!==0;let m,v;if(e.isDepthTexture===!0?(m=i.DEPTH_BUFFER_BIT,v=i.DEPTH_ATTACHMENT,t.stencil&&(m|=i.STENCIL_BUFFER_BIT)):(m=i.COLOR_BUFFER_BIT,v=i.COLOR_ATTACHMENT0),g){const _=this.backend.get(t.renderTarget),b=_.framebuffers[t.getCacheKey()],S=_.msaaFrameBuffer;s.bindFramebuffer(i.DRAW_FRAMEBUFFER,b),s.bindFramebuffer(i.READ_FRAMEBUFFER,S);const E=f-l-c;i.blitFramebuffer(o,E,o+u,E+c,o,E,o+u,E+c,m,i.NEAREST),s.bindFramebuffer(i.READ_FRAMEBUFFER,b),s.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,o,E,u,c),s.unbindTexture()}else{const _=i.createFramebuffer();s.bindFramebuffer(i.DRAW_FRAMEBUFFER,_),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,v,i.TEXTURE_2D,a,0),i.blitFramebuffer(0,0,u,c,0,0,u,c,m,i.NEAREST),i.deleteFramebuffer(_)}}else s.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,o,f-c-l,u,c),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,r,i=!1){const{gl:s}=this,a=t.renderTarget,{depthTexture:o,depthBuffer:l,stencilBuffer:u,width:c,height:h}=a;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!u){let f=s.DEPTH_COMPONENT24;i===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,a.samples,f,c,h):r>0?(o&&o.isDepthTexture&&o.type===s.FLOAT&&(f=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,r,f,c,h)):s.renderbufferStorage(s.RENDERBUFFER,f,c,h),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&u&&(r>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,r,s.DEPTH24_STENCIL8,c,h):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,c,h),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e));s.bindRenderbuffer(s.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,r,i,s,a){const{backend:o,gl:l}=this,{textureGPU:u,glFormat:c,glType:h}=this.backend.get(e),f=l.createFramebuffer();o.state.bindFramebuffer(l.READ_FRAMEBUFFER,f);const g=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+a:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,g,u,0);const m=this._getTypedArrayType(h),v=this._getBytesPerTexel(h,c),b=i*s*v,S=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,S),l.bufferData(l.PIXEL_PACK_BUFFER,b,l.STREAM_READ),l.readPixels(t,r,i,s,c,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const E=new m(b/m.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,S),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,E),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),o.state.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.deleteFramebuffer(f),E}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:r}=this;let i=0;if(e===r.UNSIGNED_BYTE&&(i=1),(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT||e===r.HALF_FLOAT)&&(i=2),(e===r.UNSIGNED_INT||e===r.FLOAT)&&(i=4),t===r.RGBA)return i*4;if(t===r.RGB)return i*3;if(t===r.ALPHA)return i}dispose(){const{gl:e}=this;this._srcFramebuffer!==null&&e.deleteFramebuffer(this._srcFramebuffer),this._dstFramebuffer!==null&&e.deleteFramebuffer(this._dstFramebuffer)}}function Tb(n){return n.isDataTexture?n.image.data:typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?n:n.data}class Pve{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class Fve{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const r=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const dB={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-s3tc",EXT_texture_compression_bptc:"texture-compression-bc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class Uve{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:r,mode:i,object:s,type:a,info:o,index:l}=this;l!==0?r.drawElements(i,t,a,e):r.drawArrays(i,e,t),o.update(s,t,1)}renderInstances(e,t,r){const{gl:i,mode:s,type:a,index:o,object:l,info:u}=this;r!==0&&(o!==0?i.drawElementsInstanced(s,t,a,e,r):i.drawArraysInstanced(s,e,t,r),u.update(l,t,r))}renderMultiDraw(e,t,r){const{extensions:i,mode:s,object:a,info:o}=this;if(r===0)return;const l=i.get("WEBGL_multi_draw");if(l===null)for(let u=0;u<r;u++)this.render(e[u],t[u]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,r):l.multiDrawArraysWEBGL(s,e,0,t,0,r);let u=0;for(let c=0;c<r;c++)u+=t[c];o.update(a,u,1)}}renderMultiDrawInstances(e,t,r,i){const{extensions:s,mode:a,object:o,info:l}=this;if(r===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let c=0;c<r;c++)this.renderInstances(e[c],t[c],i[c]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,i,0,r):u.multiDrawArraysInstancedWEBGL(a,e,0,t,0,i,0,r);let c=0;for(let h=0;h<r;h++)c+=t[h]*i[h];l.update(o,c,1)}}}class _H{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.frames=[],this.pendingResolve=!1,this.timestamps=new Map}getTimestampFrames(){return this.frames}getTimestamp(e){let t=this.timestamps.get(e);return t===void 0&&(Ce(`TimestampQueryPool: No timestamp available for uid ${e}.`),t=0),t}hasTimestamp(e){return this.timestamps.has(e)}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class Bve extends _H{constructor(e,t,r=2048){if(super(r),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){Ce("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let i=0;i<this.maxQueries;i++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return jn(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t==null||this.activeQuery!==null)return;const r=this.queries[t];if(r)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,r),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(i){Ie("Error in beginQuery:",i),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(r){Ie("Error in endQuery:",r),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=new Map;for(const[s,a]of this.queryOffsets)if(this.queryStates.get(a)==="ended"){const l=this.queries[a];e.set(s,this.resolveQuery(l))}if(e.size===0)return this.lastValue;const t={},r=[];for(const[s,a]of e){const o=s.match(/^(.*):f(\d+)$/),l=parseInt(o[2]);r.includes(l)===!1&&r.push(l),t[l]===void 0&&(t[l]=0);const u=await a;this.timestamps.set(s,u),t[l]+=u}const i=t[r[r.length-1]];return this.lastValue=i,this.frames=r,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,i}catch(e){return Ie("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let r,i=!1;const s=()=>{r&&(clearTimeout(r),r=null)},a=l=>{i||(i=!0,s(),t(l))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){r=setTimeout(o,1);return}const c=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(c)/1e6)}catch(l){Ie("Error checking query:",l),t(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class hB extends bH{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,r={antialias:e.currentSamples>0,alpha:!0,depth:e.depth,stencil:e.stencil},i=t.context!==void 0?t.context:e.domElement.getContext("webgl2",r);function s(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=i,this.extensions=new Pve(this),this.capabilities=new Fve(this),this.attributeUtils=new kve(this),this.textureUtils=new Ove(this),this.bufferRenderer=new Uve(this),this.state=new Lve(this),this.utils=new Dve(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this.drawBuffersIndexedExt=this.extensions.get("OES_draw_buffers_indexed")}get coordinateSystem(){return Oi}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,r=null){const i=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:i.RGBA8}),r!==null){const s=e.stencilBuffer?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:r,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&Ce("WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new Bve(this.gl,e,2048));const r=this.timestampQueryPool[e];r.allocateQueriesForContext(t)!==null&&r.beginQuery(t)}prepareTimestampBuffer(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e].endQuery(t)}getContext(){return this.gl}beginRender(e){const{state:t}=this,r=this.get(e);if(e.viewport)this.updateViewport(e);else{const{width:s,height:a}=this.getDrawingBufferSize();t.viewport(0,0,s,a)}if(e.scissor){const{x:s,y:a,width:o,height:l}=e.scissorValue;t.scissor(s,e.height-l-a,o,l)}this.initTimestampQuery(Va.RENDER,this.getTimestampUID(e)),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const i=e.occlusionQueryCount;i>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(i),r.occlusionQueryObjects=new Array(i),r.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:r}=this,i=this.get(e),s=i.previousContext;r.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>i.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let l=0;l<o.length;l++){const u=o[l];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,this._resolveRenderTarget(e),s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:l,height:u}=this.getDrawingBufferSize();r.viewport(0,0,l,u)}this.prepareTimestampBuffer(Va.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet,{gl:a}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const o=()=>{let l=0;for(let u=0;u<r.length;u++){const c=r[u];c!==null&&a.getQueryParameter(c,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(c,a.QUERY_RESULT)===0&&s.add(i[u]),r[u]=null,a.deleteQuery(c),l++)}l<r.length?requestAnimationFrame(o):t.occluded=s};o()}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:r,y:i,width:s,height:a}=e.viewportValue;t.viewport(r,e.height-a-i,s,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,r,i=null,s=!0,a=!0){const{gl:o,renderer:l}=this;i===null&&(i={textures:null,clearColorValue:this.getClearColor()});let u=0;if(e&&(u|=o.COLOR_BUFFER_BIT),t&&(u|=o.DEPTH_BUFFER_BIT),r&&(u|=o.STENCIL_BUFFER_BIT),u!==0){let c;i.clearColorValue?c=i.clearColorValue:c=this.getClearColor();const h=l.getClearDepth(),f=l.getClearStencil();if(t&&this.state.setDepthMask(!0),i.textures===null)o.clearColor(c.r,c.g,c.b,c.a),o.clear(u);else{if(s&&this._setFramebuffer(i),e)for(let g=0;g<i.textures.length;g++)g===0?o.clearBufferfv(o.COLOR,g,[c.r,c.g,c.b,c.a]):o.clearBufferfv(o.COLOR,g,[0,0,0,1]);t&&r?o.clearBufferfi(o.DEPTH_STENCIL,0,h,f):t?o.clearBufferfv(o.DEPTH,0,[h]):r&&o.clearBufferiv(o.STENCIL,0,[f]),s&&a&&this._resolveRenderTarget(i)}}}beginCompute(e){const{state:t,gl:r}=this;t.bindFramebuffer(r.FRAMEBUFFER,null),this.initTimestampQuery(Va.COMPUTE,this.getTimestampUID(e))}compute(e,t,r,i,s=null){const{state:a,gl:o}=this;this.discard===!1&&(a.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:u,attributes:c}=this.get(i),h=this._getVaoKey(c),f=this.vaoCache[h];f===void 0?this.vaoCache[h]=this._createVao(c):a.setVertexState(f),a.useProgram(l),this._bindUniforms(r);const g=this._getTransformFeedback(u);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,g),o.beginTransformFeedback(o.POINTS),s=s!==null?s:t.count,Array.isArray(s)?(jn("WebGLBackend.compute(): The count parameter must be a single number, not an array."),s=s[0]):s&&typeof s=="object"&&s.isIndirectStorageBufferAttribute&&(jn("WebGLBackend.compute(): The count parameter must be a single number, not IndirectStorageBufferAttribute"),s=t.count),c[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,s):o.drawArrays(o.POINTS,0,s),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let m=0;m<u.length;m++){const v=u[m];v.pbo&&this.has(v.pbo)&&this.textureUtils.copyBufferToTexture(v.transformBuffer,v.pbo),v.switchBuffers()}}finishCompute(e){const{state:t,gl:r}=this;this.discard=!1,t.disable(r.RASTERIZER_DISCARD),this.prepareTimestampBuffer(Va.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:r,material:i,context:s,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(r),{gl:l,state:u}=this,c=this.get(s),h=e.getDrawParameters();if(h===null)return;this._bindUniforms(e.getBindings());const f=t.isMesh&&t.matrixWorld.determinant()<0;u.setMaterial(i,f,a),s.textures!==null&&s.textures.length>1&&u.setMRTBlending(s.textures),u.useProgram(o);const g=e.getAttributes(),m=this.get(g);let v=m.vaoGPU;if(v===void 0){const I=this._getVaoKey(g);v=this.vaoCache[I],v===void 0&&(v=this._createVao(g),this.vaoCache[I]=v,m.vaoGPU=v)}const _=e.getIndex(),b=_!==null?this.get(_).bufferGPU:null;u.setVertexState(v,b);const S=c.lastOcclusionObject;if(S!==t&&S!==void 0){if(S!==null&&S.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),c.occlusionQueryIndex++),t.occlusionTest===!0){const I=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,I),c.occlusionQueries[c.occlusionQueryIndex]=I,c.occlusionQueryObjects[c.occlusionQueryIndex]=t}c.lastOcclusionObject=t}const E=this.bufferRenderer;t.isPoints?E.mode=l.POINTS:t.isLineSegments?E.mode=l.LINES:t.isLine?E.mode=l.LINE_STRIP:t.isLineLoop?E.mode=l.LINE_LOOP:i.wireframe===!0?(u.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),E.mode=l.LINES):E.mode=l.TRIANGLES;const{vertexCount:A,instanceCount:R}=h;let{firstVertex:w}=h;if(E.object=t,_!==null){w*=_.array.BYTES_PER_ELEMENT;const I=this.get(_);E.index=_.count,E.type=I.type}else E.index=0;const M=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(jn("WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),E.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?E.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):jn("WebGLBackend: WEBGL_multi_draw not supported."):R>1?E.renderInstances(w,A,R):E.render(w,A)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const I=this.get(e.camera),C=e.camera.cameras,k=e.getBindingGroup("cameraIndex").bindings[0];if(I.indexesGPU===void 0||I.indexesGPU.length!==C.length){const Q=new Uint32Array([0,0,0,0]),H=[];for(let G=0,re=C.length;G<re;G++){const D=l.createBuffer();Q[0]=G,l.bindBuffer(l.UNIFORM_BUFFER,D),l.bufferData(l.UNIFORM_BUFFER,Q,l.STATIC_DRAW),H.push(D)}I.indexesGPU=H}const O=this.get(k),z=this.renderer.getPixelRatio(),W=this._currentContext.renderTarget,q=this._isRenderCameraDepthArray(this._currentContext),X=this._currentContext.activeCubeFace;if(q){const Q=this.get(W.depthTexture);if(Q.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){Q.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:H}=W;for(let G=0,re=C.length;G<re;G++)this.renderer._activeCubeFace=G,this._currentContext.activeCubeFace=G,this._setFramebuffer(this._currentContext),this.clear(!1,!0,H,this._currentContext,!1,!1);this.renderer._activeCubeFace=X,this._currentContext.activeCubeFace=X}}for(let Q=0,H=C.length;Q<H;Q++){const G=C[Q];if(t.layers.test(G.layers)){q&&(this.renderer._activeCubeFace=Q,this._currentContext.activeCubeFace=Q,this._setFramebuffer(this._currentContext));const re=G.viewport;if(re!==void 0){const D=re.x*z,U=re.y*z,ne=re.width*z,B=re.height*z;u.viewport(Math.floor(D),Math.floor(e.context.height-B-U),Math.floor(ne),Math.floor(B))}u.bindBufferBase(l.UNIFORM_BUFFER,O.index,I.indexesGPU[Q]),M()}this._currentContext.activeCubeFace=X,this.renderer._activeCubeFace=X}}else M()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,t=!1){this.textureUtils.destroyTexture(e,t)}async copyTextureToBuffer(e,t,r,i,s,a){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,a)}updateSampler(){return""}createNodeBuilder(e,t){return new Cve(e,t)}createProgram(e){const t=this.gl,{stage:r,code:i}=e,s=r==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,i),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const r=this.gl,i=e.pipeline,{fragmentProgram:s,vertexProgram:a}=i,o=r.createProgram(),l=this.get(s).shaderGPU,u=this.get(a).shaderGPU;if(r.attachShader(o,l),r.attachShader(o,u),r.linkProgram(o),this.set(i,{programGPU:o,fragmentShader:l,vertexShader:u}),t!==null&&this.parallel){const c=new Promise(h=>{const f=this.parallel,g=()=>{r.getProgramParameter(o,f.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),h()):requestAnimationFrame(g)};g()});t.push(c);return}this._completeCompile(e,i)}_handleSource(e,t){const r=e.split(`
`),i=[],s=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let o=s;o<a;o++){const l=o+1;i.push(`${l===t?">":" "} ${l}: ${r[o]}`)}return i.join(`
`)}_getShaderErrors(e,t,r){const i=e.getShaderParameter(t,e.COMPILE_STATUS),a=(e.getShaderInfoLog(t)||"").trim();if(i&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return r.toUpperCase()+`

`+a+`

`+this._handleSource(e.getShaderSource(t),l)}else return a}_logProgramError(e,t,r){if(this.renderer.debug.checkShaderErrors){const i=this.gl,a=(i.getProgramInfoLog(e)||"").trim();if(i.getProgramParameter(e,i.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(i,e,r,t);else{const o=this._getShaderErrors(i,r,"vertex"),l=this._getShaderErrors(i,t,"fragment");Ie("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+`

Program Info Log: `+a+`
`+o+`
`+l)}else a!==""&&Ce("WebGLProgram: Program Info Log:",a)}}_completeCompile(e,t){const{state:r,gl:i}=this,s=this.get(t),{programGPU:a,fragmentShader:o,vertexShader:l}=s;i.getProgramParameter(a,i.LINK_STATUS)===!1&&this._logProgramError(a,o,l),r.useProgram(a);const u=e.getBindings();this._setupBindings(u,a),this.set(t,{programGPU:a})}createComputePipeline(e,t){const{state:r,gl:i}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,o=i.createProgram(),l=this.get(s).shaderGPU,u=this.get(a).shaderGPU,c=a.transforms,h=[],f=[];for(let _=0;_<c.length;_++){const b=c[_];h.push(b.varyingName),f.push(b.attributeNode)}i.attachShader(o,l),i.attachShader(o,u),i.transformFeedbackVaryings(o,h,i.SEPARATE_ATTRIBS),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)===!1&&this._logProgramError(o,l,u),r.useProgram(o),this._setupBindings(t,o);const g=a.attributes,m=[],v=[];for(let _=0;_<g.length;_++){const b=g[_].node.attribute;m.push(b),this.has(b)||this.attributeUtils.createAttribute(b,i.ARRAY_BUFFER)}for(let _=0;_<f.length;_++){const b=f[_].attribute;this.has(b)||this.attributeUtils.createAttribute(b,i.ARRAY_BUFFER);const S=this.get(b);v.push(S)}this.set(e,{programGPU:o,transformBuffers:v,attributes:m})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let r=0,i=0;for(const s of t){this.set(s,{textures:i,uniformBuffers:r});for(const a of s.bindings)a.isUniformBuffer&&r++,a.isSampledTexture&&i++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,r=this.get(e);let i=r.uniformBuffers,s=r.textures;for(const a of e.bindings){const o=this.get(a);if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer;let{bufferGPU:u}=this.get(l);u===void 0?(u=t.createBuffer(),t.bindBuffer(t.UNIFORM_BUFFER,u),t.bufferData(t.UNIFORM_BUFFER,l.byteLength,t.DYNAMIC_DRAW),this.set(l,{bufferGPU:u})):t.bindBuffer(t.UNIFORM_BUFFER,u);const c=a.updateRanges;if(t.bindBuffer(t.UNIFORM_BUFFER,u),c.length===0)t.bufferData(t.UNIFORM_BUFFER,l,t.DYNAMIC_DRAW);else{const h=u_(l),f=h?1:l.BYTES_PER_ELEMENT;for(let g=0,m=c.length;g<m;g++){const v=c[g],_=v.start*f,b=v.count*f,S=_*(h?l.BYTES_PER_ELEMENT:1);t.bufferSubData(t.UNIFORM_BUFFER,S,l,_,b)}}o.index=i++,o.bufferGPU=u,this.set(a,o)}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:u}=this.get(a.texture);o.index=s++,o.textureGPU=l,o.glTextureType=u,this.set(a,o)}}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const i=this.get(e).bufferGPU,s=e.buffer,a=e.updateRanges;if(t.bindBuffer(t.UNIFORM_BUFFER,i),a.length===0)t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW);else{const o=u_(s),l=o?1:s.BYTES_PER_ELEMENT;for(let u=0,c=a.length;u<c;u++){const h=a[u],f=h.start*l,g=h.count*l,m=f*(o?s.BYTES_PER_ELEMENT:1);t.bufferSubData(t.UNIFORM_BUFFER,m,s,f,g)}}}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(dB).filter(i=>dB[i]===e),r=this.extensions;for(let i=0;i<t.length;i++)if(r.has(t[i]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,r=null,i=null,s=0,a=0){this.textureUtils.copyTextureToTexture(e,t,r,i,s,a)}copyFramebufferToTexture(e,t,r){this.textureUtils.copyFramebufferToTexture(e,t,r)}_setFramebuffer(e){const{gl:t,state:r}=this;let i=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:o,depthBuffer:l,stencilBuffer:u}=s,c=s.isWebGLCubeRenderTarget===!0,h=s.isRenderTarget3D===!0,f=s.depth>1,g=s.isXRRenderTarget===!0,m=g===!0&&s._hasExternalTextures===!0;let v=a.msaaFrameBuffer,_=a.depthRenderbuffer;const b=this.extensions.get("WEBGL_multisampled_render_to_texture"),S=this.extensions.get("OVR_multiview2"),E=this._useMultisampledExtension(s),A=K$(e);let R;if(c?(a.cubeFramebuffers||(a.cubeFramebuffers={}),R=a.cubeFramebuffers[A]):g&&m===!1?R=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),R=a.framebuffers[A]),R===void 0){R=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,R);const w=e.textures,M=[];if(c){a.cubeFramebuffers[A]=R;const{textureGPU:C}=this.get(w[0]),k=this.renderer._activeCubeFace,O=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+k,C,O)}else{a.framebuffers[A]=R;for(let C=0;C<w.length;C++){const k=w[C],O=this.get(k);O.renderTarget=e.renderTarget,O.cacheKey=A;const z=t.COLOR_ATTACHMENT0+C;if(s.multiview)S.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,z,O.textureGPU,0,o,0,2);else if(h||f){const W=this.renderer._activeCubeFace,q=this.renderer._activeMipmapLevel;t.framebufferTextureLayer(t.FRAMEBUFFER,z,O.textureGPU,q,W)}else if(E)b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,z,t.TEXTURE_2D,O.textureGPU,0,o);else{const W=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,z,t.TEXTURE_2D,O.textureGPU,W)}}}const I=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const C=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(C,e,0,E),a.xrDepthRenderbuffer=C,M.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,C),t.framebufferRenderbuffer(t.FRAMEBUFFER,I,t.RENDERBUFFER,C)}else if(e.depthTexture!==null){M.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const C=this.get(e.depthTexture);if(C.renderTarget=e.renderTarget,C.cacheKey=A,s.multiview)S.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,I,C.textureGPU,0,o,0,2);else if(m&&E)b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,I,t.TEXTURE_2D,C.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){const k=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,I,C.textureGPU,0,k)}else if(e.depthTexture.isCubeTexture){const k=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,I,t.TEXTURE_CUBE_MAP_POSITIVE_X+k,C.textureGPU,0)}else t.framebufferTexture2D(t.FRAMEBUFFER,I,t.TEXTURE_2D,C.textureGPU,0)}a.depthInvalidationArray=M}else{if(this._isRenderCameraDepthArray(e)){r.bindFramebuffer(t.FRAMEBUFFER,R);const M=this.renderer._activeCubeFace,I=this.get(e.depthTexture),C=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,C,I.textureGPU,0,M)}if((g||E||s.multiview)&&s._isOpaqueFramebuffer!==!0){r.bindFramebuffer(t.FRAMEBUFFER,R);const M=this.get(e.textures[0]);s.multiview?S.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,M.textureGPU,0,o,0,2):E?b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,M.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,M.textureGPU,0);const I=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const C=a.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,C),t.framebufferRenderbuffer(t.FRAMEBUFFER,I,t.RENDERBUFFER,C)}else{const C=this.get(e.depthTexture);s.multiview?S.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,I,C.textureGPU,0,o,0,2):E?b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,I,t.TEXTURE_2D,C.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,I,t.TEXTURE_2D,C.textureGPU,0)}}}if(o>0&&E===!1&&!s.multiview){if(v===void 0){const w=[];v=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,v);const M=[],I=e.textures;for(let C=0;C<I.length;C++){M[C]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,M[C]),w.push(t.COLOR_ATTACHMENT0+C);const k=e.textures[C],O=this.get(k);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,O.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+C,t.RENDERBUFFER,M[C])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),a.msaaFrameBuffer=v,a.msaaRenderbuffers=M,l&&_===void 0){_=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(_,e,o),a.depthRenderbuffer=_;const C=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;w.push(C)}a.invalidationArray=w}i=a.msaaFrameBuffer}else i=R;r.drawBuffers(e,R)}r.bindFramebuffer(t.FRAMEBUFFER,i)}_getVaoKey(e){let t="";for(let r=0;r<e.length;r++){const i=this.get(e[r]);t+=":"+i.id}return t}_createVao(e){const{gl:t}=this,r=t.createVertexArray();t.bindVertexArray(r);for(let i=0;i<e.length;i++){const s=e[i],a=this.get(s);t.bindBuffer(t.ARRAY_BUFFER,a.bufferGPU),t.enableVertexAttribArray(i);let o,l;s.isInterleavedBufferAttribute===!0?(o=s.data.stride*a.bytesPerElement,l=s.offset*a.bytesPerElement):(o=0,l=0),a.isInteger?t.vertexAttribIPointer(i,s.itemSize,a.type,o,l):t.vertexAttribPointer(i,s.itemSize,a.type,s.normalized,o,l),s.isInstancedBufferAttribute&&!s.isInterleavedBufferAttribute?t.vertexAttribDivisor(i,s.meshPerAttribute):s.isInterleavedBufferAttribute&&s.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(i,s.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),r}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let r=this.transformFeedbackCache[t];if(r!==void 0)return r;const{gl:i}=this;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let s=0;s<e.length;s++){const a=e[s];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=r,r}_setupBindings(e,t){const r=this.gl;for(const i of e)for(const s of i.bindings){const o=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=r.getUniformBlockIndex(t,s.name);r.uniformBlockBinding(t,l,o)}else if(s.isSampledTexture){const l=r.getUniformLocation(t,s.name);r.uniform1i(l,o)}}}_bindUniforms(e){const{gl:t,state:r}=this;for(const i of e)for(const s of i.bindings){const a=this.get(s),o=a.index;s.isUniformsGroup||s.isUniformBuffer?r.bindBufferBase(t.UNIFORM_BUFFER,o,a.bufferGPU):s.isSampledTexture&&r.bindTexture(a.glTextureType,a.textureGPU,t.TEXTURE0+o)}}_resolveRenderTarget(e){const{gl:t,state:r}=this,i=e.renderTarget;if(e.textures!==null&&i){const s=this.get(i);if(i.samples>0&&this._useMultisampledExtension(i)===!1){const a=s.framebuffers[e.getCacheKey()];let o=t.COLOR_BUFFER_BIT;i.resolveDepthBuffer&&(i.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),i.stencilBuffer&&i.resolveStencilBuffer&&(o|=t.STENCIL_BUFFER_BIT));const l=s.msaaFrameBuffer,u=s.msaaRenderbuffers,c=e.textures,h=c.length>1;if(r.bindFramebuffer(t.READ_FRAMEBUFFER,l),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),h)for(let f=0;f<c.length;f++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+f,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+f,t.TEXTURE_2D,null,0);for(let f=0;f<c.length;f++){if(h){const{textureGPU:g}=this.get(c[f]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u[f]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,g,0)}if(e.scissor){const{x:g,y:m,width:v,height:_}=e.scissorValue,b=e.height-_-m;t.blitFramebuffer(g,b,g+v,b+_,g,b,g+v,b+_,o,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,o,t.NEAREST)}if(h)for(let f=0;f<c.length;f++){const{textureGPU:g}=this.get(c[f]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+f,t.RENDERBUFFER,u[f]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+f,t.TEXTURE_2D,g,0)}this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,s.invalidationArray)}else if(i.resolveDepthBuffer===!1&&s.framebuffers){const a=s.framebuffers[e.getCacheKey()];r.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,s.depthInvalidationArray)}}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){this.textureUtils!==null&&this.textureUtils.dispose();const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Nd={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Uu=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},Xr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Ni={Store:"store"},xn={Load:"load",Clear:"clear"},pB={CCW:"ccw",CW:"cw"},fB={None:"none",Back:"back"},wh={Uint16:"uint16",Uint32:"uint32"},ie={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rg11b10ufloat",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-unorm-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},_E={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Du={Linear:"linear",Nearest:"nearest"},an={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Su={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},gB={None:0,All:15},Sl={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},vE={Storage:"storage",ReadOnlyStorage:"read-only-storage"},xE={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},mB={NonFiltering:"non-filtering",Comparison:"comparison"},Eu={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},yB={TwoD:"2d",ThreeD:"3d"},xr={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},zve={All:"all"},wb={Vertex:"vertex",Instance:"instance"},ow={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"},bB={"texture-compression-s3tc":"texture-compression-bc","texture-compression-etc1":"texture-compression-etc2"};class Gve extends mH{constructor(e,t,r){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Vve extends hH{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let $ve=0;class Hve extends Vve{constructor(e,t){super("StorageBuffer_"+$ve++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:zs.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class jve extends ql{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Du.Linear}),this.flipYSampler=e.createSampler({minFilter:Du.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:r}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:wh.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:wh.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,r=0){const i=t.format,{width:s,height:a}=t.size,o=this.getTransferPipeline(i),l=this.getFlipYPipeline(i),u=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),c=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:xr.TwoD,baseArrayLayer:r}),h=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:xr.TwoD,baseArrayLayer:0}),f=this.device.createCommandEncoder({}),g=(m,v,_)=>{const b=m.getBindGroupLayout(0),S=this.device.createBindGroup({layout:b,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:v}]}),E=f.beginRenderPass({colorAttachments:[{view:_,loadOp:xn.Clear,storeOp:Ni.Store,clearValue:[0,0,0,0]}]});E.setPipeline(m),E.setBindGroup(0,S),E.draw(4,1,0,0),E.end()};g(o,c,h),g(l,h,c),this.device.queue.submit([f.finish()]),u.destroy()}generateMipmaps(e,t,r=0,i=null){const s=this.get(e);s.layers===void 0&&(s.layers=[]);const a=s.layers[r]||this._mipmapCreateBundles(e,t,r),o=i||this.device.createCommandEncoder({label:"mipmapEncoder"});this._mipmapRunBundles(o,a),i===null&&this.device.queue.submit([o.finish()]),s.layers[r]=a}_mipmapCreateBundles(e,t,r){const i=this.getTransferPipeline(t.format),s=i.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:xr.TwoD,baseArrayLayer:r});const o=[];for(let l=1;l<t.mipLevelCount;l++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),c=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:xr.TwoD,baseArrayLayer:r}),h={colorAttachments:[{view:c,loadOp:xn.Clear,storeOp:Ni.Store,clearValue:[0,0,0,0]}]},f=this.device.createRenderBundleEncoder({colorFormats:[t.format]});f.setPipeline(i),f.setBindGroup(0,u),f.draw(4,1,0,0),o.push({renderBundles:[f.finish()],passDescriptor:h}),a=c}return o}_mipmapRunBundles(e,t){const r=t.length;for(let i=0;i<r;i++){const s=t[i],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const Wve={[P1]:"never",[Jg]:"less",[F1]:"equal",[em]:"less-equal",[U1]:"greater",[tm]:"greater-equal",[z1]:"always",[B1]:"not-equal"},qve=[0,1,3,2,4,5];class Xve{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this._samplerCache=new Map}updateSampler(e){const t=this.backend,r=e.minFilter+"-"+e.magFilter+"-"+e.wrapS+"-"+e.wrapT+"-"+(e.wrapR||"0")+"-"+e.anisotropy+"-"+(e.compareFunction||0);let i=this._samplerCache.get(r);if(i===void 0){const a={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};a.magFilter===Du.Linear&&a.minFilter===Du.Linear&&a.mipmapFilter===Du.Linear&&(a.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(a.compare=Wve[e.compareFunction]),i={sampler:t.device.createSampler(a),usedTimes:0},this._samplerCache.set(r,i)}const s=t.get(e);if(s.sampler!==i.sampler){if(s.sampler!==void 0){const a=this._samplerCache.get(s.samplerKey);a.usedTimes--,a.usedTimes===0&&this._samplerCache.delete(s.samplerKey)}s.samplerKey=r,s.sampler=i.sampler,i.usedTimes++}return r}createDefaultTexture(e){let t;const r=lw(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(r):t=this._getDefaultTextureGPU(r),this.backend.get(e).texture=t}createTexture(e,t={}){const r=this.backend,i=r.get(e);if(i.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){i.texture=e.sourceTexture,i.initialized=!0;return}t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:a,depth:o,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),c=e.internalFormat||t.format||lw(e,r.device);i.format=c;const{samples:h,primarySamples:f,isMSAA:g}=r.utils.getTextureSampleData(e);let m=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(m|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&c!==ie.RGB9E5UFloat&&(m|=GPUTextureUsage.RENDER_ATTACHMENT);const v={label:e.name,size:{width:s,height:a,depthOrArrayLayers:o},mipLevelCount:l,sampleCount:f,dimension:u,format:c,usage:m};if(c===void 0){Ce("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(v.textureBindingViewDimension=xr.Cube),i.texture=r.device.createTexture(v),g){const _=Object.assign({},v);_.label=_.label+"-msaa",_.sampleCount=h,_.mipLevelCount=1,i.msaaTexture=r.device.createTexture(_)}i.initialized=!0,i.textureDescriptorGPU=v}destroyTexture(e,t=!1){const r=this.backend,i=r.get(e);i.texture!==void 0&&t===!1&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}generateMipmaps(e,t=null){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i,t);else{const i=e.image.depth||1;for(let s=0;s<i;s++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,s,t)}}getColorBuffer(){const e=this.backend,t=e.renderer.getCanvasTarget(),{width:r,height:i}=e.getDrawingBufferSize(),s=e.renderer.currentSamples,a=t.colorTexture,o=e.get(a);if(a.width===r&&a.height===i&&a.samples===s)return o.texture;let l=o.texture;return l&&l.destroy(),l=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.currentSamples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),a.source.width=r,a.source.height=i,a.samples=s,o.texture=l,l}getDepthBuffer(e=!0,t=!1){const r=this.backend,i=r.renderer.getCanvasTarget(),{width:s,height:a}=r.getDrawingBufferSize(),o=r.renderer.currentSamples,l=i.depthTexture;if(l.width===s&&l.height===a&&l.samples===o&&l.depth===e&&l.stencil===t)return r.get(l).texture;const u=r.get(l).texture;let c,h;if(t?(c=Li,h=Ts):e&&(c=Jr,h=An),u!==void 0){if(l.image.width===s&&l.image.height===a&&l.format===c&&l.type===h&&l.samples===o)return u;this.destroyTexture(l)}return l.name="depthBuffer",l.format=c,l.type=h,l.image.width=s,l.image.height=a,l.samples=o,this.createTexture(l,{width:s,height:a}),r.get(l).texture}updateTexture(e,t){const r=this.backend.get(e),i=e.mipmaps,{textureDescriptorGPU:s}=r;if(!(e.isRenderTargetTexture||s===void 0)){if(e.isDataTexture)if(i.length>0)for(let a=0,o=i.length;a<o;a++){const l=i[a];this._copyBufferToTexture(l,r.texture,s,0,e.flipY,0,a)}else this._copyBufferToTexture(t.image,r.texture,s,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let a=0;a<t.image.depth;a++)this._copyBufferToTexture(t.image,r.texture,s,a,e.flipY,a);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,r.texture,s);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,r.texture,s);else if(i.length>0)for(let a=0,o=i.length;a<o;a++){const l=i[a];this._copyImageToTexture(l,r.texture,s,0,e.flipY,e.premultiplyAlpha,a)}else this._copyImageToTexture(t.image,r.texture,s,0,e.flipY,e.premultiplyAlpha);r.version=e.version}}async copyTextureToBuffer(e,t,r,i,s,a){const o=this.backend.device,l=this.backend.get(e),u=l.texture,c=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(c);let f=i*h;f=Math.ceil(f/256)*256;const g=o.createBuffer({size:(s-1)*f+i*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),m=o.createCommandEncoder();m.copyTextureToBuffer({texture:u,origin:{x:t,y:r,z:a}},{buffer:g,bytesPerRow:f},{width:i,height:s});const v=this._getTypedArrayType(c);o.queue.submit([m.finish()]),await g.mapAsync(GPUMapMode.READ);const _=g.getMappedRange();return new v(_)}dispose(){this._samplerCache.clear()}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const r=new Er;r.minFilter=Rn,r.magFilter=Rn,this.createTexture(r,{width:1,height:1,format:e}),this.defaultTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultCubeTexture[e];if(t===void 0){const r=new rm;r.minFilter=Rn,r.magFilter=Rn,this.createTexture(r,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=r}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,r){const i=e.images,s=e.mipmaps;for(let a=0;a<6;a++){const o=i[a],l=e.flipY===!0?qve[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,t,r,l,e.flipY):this._copyImageToTexture(o,t,r,l,e.flipY,e.premultiplyAlpha);for(let u=0;u<s.length;u++){const h=s[u].images[a];h.isDataTexture?this._copyBufferToTexture(h.image,t,r,l,e.flipY,0,u+1):this._copyImageToTexture(h,t,r,l,e.flipY,e.premultiplyAlpha,u+1)}}}_copyImageToTexture(e,t,r,i,s,a,o=0){const l=this.backend.device,u=o>0?e.width:r.size.width,c=o>0?e.height:r.size.height;try{l.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:o,origin:{x:0,y:0,z:i},premultipliedAlpha:a},{width:u,height:c,depthOrArrayLayers:1})}catch{}}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new jve(this.backend.device)),e}_generateMipmaps(e,t,r=0,i=null){this._getPassUtils().generateMipmaps(e,t,r,i)}_flipY(e,t,r=0){this._getPassUtils().flipY(e,t,r)}_copyBufferToTexture(e,t,r,i,s,a=0,o=0){const l=this.backend.device,u=e.data,c=this._getBytesPerTexel(r.format),h=e.width*c;l.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:i}},u,{offset:e.width*e.height*c*a,bytesPerRow:h},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,r,i)}_copyCompressedBufferToTexture(e,t,r){const i=this.backend.device,s=this._getBlockData(r.format),a=r.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const l=e[o],u=l.width,c=l.height,h=a?r.size.depthOrArrayLayers:1,f=Math.ceil(u/s.width)*s.byteLength,g=f*Math.ceil(c/s.height);for(let m=0;m<h;m++)i.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:m}},l.data,{offset:m*g,bytesPerRow:f,rowsPerImage:Math.ceil(c/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(c/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ie.BC1RGBAUnorm||e===ie.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.BC2RGBAUnorm||e===ie.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC3RGBAUnorm||e===ie.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC4RUnorm||e===ie.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===ie.BC5RGUnorm||e===ie.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ie.BC6HRGBUFloat||e===ie.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ie.BC7RGBAUnorm||e===ie.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ETC2RGB8Unorm||e===ie.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGB8A1Unorm||e===ie.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGBA8Unorm||e===ie.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ie.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ie.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ie.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ie.ASTC4x4Unorm||e===ie.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ASTC5x4Unorm||e===ie.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ie.ASTC5x5Unorm||e===ie.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ie.ASTC6x5Unorm||e===ie.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ie.ASTC6x6Unorm||e===ie.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ie.ASTC8x5Unorm||e===ie.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ie.ASTC8x6Unorm||e===ie.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ie.ASTC8x8Unorm||e===ie.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ie.ASTC10x5Unorm||e===ie.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ie.ASTC10x6Unorm||e===ie.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ie.ASTC10x8Unorm||e===ie.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ie.ASTC10x10Unorm||e===ie.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ie.ASTC12x10Unorm||e===ie.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ie.ASTC12x12Unorm||e===ie.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=_E.ClampToEdge;return e===Zu?t=_E.Repeat:e===Qu&&(t=_E.MirrorRepeat),t}_convertFilterMode(e){let t=Du.Linear;return(e===Rn||e===D1||e===ko)&&(t=Du.Nearest),t}_getBytesPerTexel(e){if(e===ie.R8Unorm||e===ie.R8Snorm||e===ie.R8Uint||e===ie.R8Sint)return 1;if(e===ie.R16Uint||e===ie.R16Sint||e===ie.R16Float||e===ie.RG8Unorm||e===ie.RG8Snorm||e===ie.RG8Uint||e===ie.RG8Sint)return 2;if(e===ie.R32Uint||e===ie.R32Sint||e===ie.R32Float||e===ie.RG16Uint||e===ie.RG16Sint||e===ie.RG16Float||e===ie.RGBA8Unorm||e===ie.RGBA8UnormSRGB||e===ie.RGBA8Snorm||e===ie.RGBA8Uint||e===ie.RGBA8Sint||e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB||e===ie.RGB9E5UFloat||e===ie.RGB10A2Unorm||e===ie.RG11B10UFloat||e===ie.Depth32Float||e===ie.Depth24Plus||e===ie.Depth24PlusStencil8||e===ie.Depth32FloatStencil8)return 4;if(e===ie.RG32Uint||e===ie.RG32Sint||e===ie.RG32Float||e===ie.RGBA16Uint||e===ie.RGBA16Sint||e===ie.RGBA16Float)return 8;if(e===ie.RGBA32Uint||e===ie.RGBA32Sint||e===ie.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ie.R8Uint)return Uint8Array;if(e===ie.R8Sint)return Int8Array;if(e===ie.R8Unorm)return Uint8Array;if(e===ie.R8Snorm)return Int8Array;if(e===ie.RG8Uint)return Uint8Array;if(e===ie.RG8Sint)return Int8Array;if(e===ie.RG8Unorm)return Uint8Array;if(e===ie.RG8Snorm)return Int8Array;if(e===ie.RGBA8Uint)return Uint8Array;if(e===ie.RGBA8Sint)return Int8Array;if(e===ie.RGBA8Unorm||e===ie.RGBA8UnormSRGB)return Uint8Array;if(e===ie.RGBA8Snorm)return Int8Array;if(e===ie.R16Uint)return Uint16Array;if(e===ie.R16Sint)return Int16Array;if(e===ie.RG16Uint)return Uint16Array;if(e===ie.RG16Sint)return Int16Array;if(e===ie.RGBA16Uint)return Uint16Array;if(e===ie.RGBA16Sint)return Int16Array;if(e===ie.R16Float||e===ie.RG16Float||e===ie.RGBA16Float)return Uint16Array;if(e===ie.R32Uint)return Uint32Array;if(e===ie.R32Sint)return Int32Array;if(e===ie.R32Float)return Float32Array;if(e===ie.RG32Uint)return Uint32Array;if(e===ie.RG32Sint)return Int32Array;if(e===ie.RG32Float)return Float32Array;if(e===ie.RGBA32Uint)return Uint32Array;if(e===ie.RGBA32Sint)return Int32Array;if(e===ie.RGBA32Float)return Float32Array;if(e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB)return Uint8Array;if(e===ie.RGB10A2Unorm||e===ie.RGB9E5UFloat||e===ie.RG11B10UFloat)return Uint32Array;if(e===ie.Depth32Float)return Float32Array;if(e===ie.Depth24Plus||e===ie.Depth24PlusStencil8)return Uint32Array;if(e===ie.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.is3DTexture||e.isData3DTexture?t=yB.ThreeD:t=yB.TwoD,t}}function lw(n,e=null){const t=n.format,r=n.type,i=n.colorSpace,s=Nt.getTransfer(i);let a;if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(t){case Ll:case Dl:a=s===lt?ie.BC1RGBAUnormSRGB:ie.BC1RGBAUnorm;break;case Ol:a=s===lt?ie.BC2RGBAUnormSRGB:ie.BC2RGBAUnorm;break;case Pl:a=s===lt?ie.BC3RGBAUnormSRGB:ie.BC3RGBAUnorm;break;case ph:a=ie.BC4RUnorm;break;case fh:a=ie.BC4RSnorm;break;case ec:a=ie.BC5RGUnorm;break;case gh:a=ie.BC5RGSnorm;break;case hh:a=s===lt?ie.BC7RGBAUnormSRGB:ie.BC7RGBAUnorm;break;case qd:case Wd:a=s===lt?ie.ETC2RGB8UnormSRGB:ie.ETC2RGB8Unorm;break;case Xd:a=s===lt?ie.ETC2RGBA8UnormSRGB:ie.ETC2RGBA8Unorm;break;case Yd:a=ie.EACR11Unorm;break;case Kd:a=ie.EACR11Snorm;break;case Ju:a=ie.EACRG11Unorm;break;case Zd:a=ie.EACRG11Snorm;break;case Qd:a=s===lt?ie.ASTC4x4UnormSRGB:ie.ASTC4x4Unorm;break;case Jd:a=s===lt?ie.ASTC5x4UnormSRGB:ie.ASTC5x4Unorm;break;case eh:a=s===lt?ie.ASTC5x5UnormSRGB:ie.ASTC5x5Unorm;break;case th:a=s===lt?ie.ASTC6x5UnormSRGB:ie.ASTC6x5Unorm;break;case nh:a=s===lt?ie.ASTC6x6UnormSRGB:ie.ASTC6x6Unorm;break;case rh:a=s===lt?ie.ASTC8x5UnormSRGB:ie.ASTC8x5Unorm;break;case ih:a=s===lt?ie.ASTC8x6UnormSRGB:ie.ASTC8x6Unorm;break;case sh:a=s===lt?ie.ASTC8x8UnormSRGB:ie.ASTC8x8Unorm;break;case ah:a=s===lt?ie.ASTC10x5UnormSRGB:ie.ASTC10x5Unorm;break;case oh:a=s===lt?ie.ASTC10x6UnormSRGB:ie.ASTC10x6Unorm;break;case lh:a=s===lt?ie.ASTC10x8UnormSRGB:ie.ASTC10x8Unorm;break;case uh:a=s===lt?ie.ASTC10x10UnormSRGB:ie.ASTC10x10Unorm;break;case ch:a=s===lt?ie.ASTC12x10UnormSRGB:ie.ASTC12x10Unorm;break;case dh:a=s===lt?ie.ASTC12x12UnormSRGB:ie.ASTC12x12Unorm;break;case pr:a=s===lt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;default:Ie("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case pr:switch(r){case $u:a=ie.RGBA8Snorm;break;case Hu:a=ie.RGBA16Sint;break;case pa:a=ie.RGBA16Uint;break;case An:a=ie.RGBA32Uint;break;case Vr:a=ie.RGBA32Sint;break;case qn:a=s===lt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;case tr:a=ie.RGBA16Float;break;case hr:a=ie.RGBA32Float;break;default:Ie("WebGPURenderer: Unsupported texture type with RGBAFormat.",r)}break;case Zg:switch(r){case ev:a=ie.RGB9E5UFloat;break;case tv:a=ie.RG11B10UFloat;break;default:Ie("WebGPURenderer: Unsupported texture type with RGBFormat.",r)}break;case Qg:switch(r){case $u:a=ie.R8Snorm;break;case Hu:a=ie.R16Sint;break;case pa:a=ie.R16Uint;break;case An:a=ie.R32Uint;break;case Vr:a=ie.R32Sint;break;case qn:a=ie.R8Unorm;break;case tr:a=ie.R16Float;break;case hr:a=ie.R32Float;break;default:Ie("WebGPURenderer: Unsupported texture type with RedFormat.",r)}break;case Di:switch(r){case $u:a=ie.RG8Snorm;break;case Hu:a=ie.RG16Sint;break;case pa:a=ie.RG16Uint;break;case An:a=ie.RG32Uint;break;case Vr:a=ie.RG32Sint;break;case qn:a=ie.RG8Unorm;break;case tr:a=ie.RG16Float;break;case hr:a=ie.RG32Float;break;default:Ie("WebGPURenderer: Unsupported texture type with RGFormat.",r)}break;case Jr:switch(r){case pa:a=ie.Depth16Unorm;break;case An:a=ie.Depth24Plus;break;case hr:a=ie.Depth32Float;break;default:Ie("WebGPURenderer: Unsupported texture type with DepthFormat.",r)}break;case Li:switch(r){case Ts:a=ie.Depth24PlusStencil8;break;case hr:e&&e.features.has(ow.Depth32FloatStencil8)===!1&&Ie('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=ie.Depth32FloatStencil8;break;default:Ie("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",r)}break;case zh:switch(r){case Vr:a=ie.R32Sint;break;case An:a=ie.R32Uint;break;default:Ie("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",r)}break;case Gh:switch(r){case Vr:a=ie.RG32Sint;break;case An:a=ie.RG32Uint;break;default:Ie("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",r)}break;case Vh:switch(r){case Vr:a=ie.RGBA32Sint;break;case An:a=ie.RGBA32Uint;break;default:Ie("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",r)}break;default:Ie("WebGPURenderer: Unsupported texture format.",t)}return a}const Yve=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,Kve=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,_B={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},Zve=n=>{n=n.trim();const e=n.match(Yve);if(e!==null&&e.length===4){const t=e[2],r=[];let i=null;for(;(i=Kve.exec(t))!==null;)r.push({name:i[1],type:i[2]});const s=[];for(let c=0;c<r.length;c++){const{name:h,type:f}=r[c];let g=f;g.startsWith("ptr")?g="pointer":(g.startsWith("texture")&&(g=f.split("<")[0]),g=_B[g]),s.push(new PI(g,h))}const a=n.substring(e[0].length),o=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:_B[o]||o,inputs:s,name:l,inputsCode:t,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class Qve extends UI{constructor(e){const{type:t,inputs:r,name:i,inputsCode:s,blockCode:a,outputType:o}=Zve(e);super(t,r,i),this.inputsCode=s,this.blockCode=a,this.outputType=o}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class Jve extends uH{parseFunction(e){return new Qve(e)}}const exe={[zs.READ_ONLY]:"read",[zs.WRITE_ONLY]:"write",[zs.READ_WRITE]:"read_write"},vB={[Zu]:"repeat",[Qi]:"clamp",[Qu]:"mirror"},Ab={vertex:Uu.VERTEX,fragment:Uu.FRAGMENT,compute:Uu.COMPUTE},xB={instance:!0,swizzleAssign:!1,storageBuffer:!0},txe={"^^":"tsl_xor"},nxe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},SB={},gf={tsl_xor:new Yr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Yr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Yr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Yr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Yr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Yr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Yr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Yr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Yr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Yr("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Yr("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Yr("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Yr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},rxe={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>",floatpack_snorm_2x16:"pack2x16snorm",floatpack_unorm_2x16:"pack2x16unorm",floatpack_float16_2x16:"pack2x16float",floatunpack_snorm_2x16:"unpack2x16snorm",floatunpack_unorm_2x16:"unpack2x16unorm",floatunpack_float16_2x16:"unpack2x16float"};let vH="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(vH+=`diagnostic( off, derivative_uniformity );
`);class ixe extends lH{constructor(e,t){super(e,t,new Jve),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,r,i,s,a=this.shaderStage){return a==="fragment"?i?s?`textureSample( ${t}, ${t}_sampler, ${r}, ${i}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${r}, ${i} )`:s?`textureSample( ${t}, ${t}_sampler, ${r}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${r} )`:this.generateTextureSampleLevel(e,t,r,"0",i)}generateTextureSampleLevel(e,t,r,i,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,a,i):this.generateTextureLod(e,t,r,s,a,i)}generateWrapFunction(e){const t=`tsl_coord_${vB[e.wrapS]}S_${vB[e.wrapT]}_${e.is3DTexture||e.isData3DTexture?"3d":"2d"}T`;let r=SB[t];if(r===void 0){const i=[],s=e.is3DTexture||e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const o=(l,u)=>{l===Zu?(i.push(gf.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${u} )`):l===Qi?(i.push(gf.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${u} )`):l===Qu?(i.push(gf.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${u} )`):(a+=`		coord.${u}`,Ce(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),(e.is3DTexture||e.isData3DTexture)&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,SB[t]=r=new Yr(a,i)}return r.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,r){const i=this.getDataFromNode(e,this.shaderStage,this.globalCache);i.dimensionsSnippet===void 0&&(i.dimensionsSnippet={});let s=i.dimensionsSnippet[r];if(i.dimensionsSnippet[r]===void 0){let a,o;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),u=l>1;e.is3DTexture||e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",u||e.isStorageTexture?a=t:a=`${t}${r?`, u32( ${r} )`:""}`,s=new Xb(new Yb(`textureDimensions( ${a} )`,o)),i.dimensionsSnippet[r]=s,(e.isArrayTexture||e.isDataArrayTexture||e.is3DTexture||e.isData3DTexture)&&(i.arrayLayerCount=new Xb(new Yb(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(i.cubeFaceCount=new Xb(new Yb("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,r,i,s="0u"){this._include("biquadraticTexture");const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,s);return i&&(r=`${r} + vec2<f32>(${i}) / ${o}`),`tsl_biquadraticTexture( ${t}, ${a}( ${r} ), ${o}, u32( ${s} ) )`}generateTextureLod(e,t,r,i,s,a="0u"){const o=this.generateWrapFunction(e),l=this.generateTextureDimension(e,t,a),u=e.is3DTexture||e.isData3DTexture?"vec3":"vec2";s&&(r=`${r} + ${u}<f32>(${s}) / ${u}<f32>( ${l} )`);const c=`${u}<u32>( ${o}( ${r} ) * ${u}<f32>( ${l} ) )`;return this.generateTextureLoad(e,t,c,a,i,null)}generateTextureLoad(e,t,r,i,s,a){i===null&&(i="0u"),a&&(r=`${r} + ${a}`);let o;return s?o=`textureLoad( ${t}, ${r}, ${s}, u32( ${i} ) )`:(o=`textureLoad( ${t}, ${r}, u32( ${i} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(o+=".x")),o}generateTextureStore(e,t,r,i,s){let a;return i?a=`textureStore( ${t}, ${r}, ${i}, ${s} )`:a=`textureStore( ${t}, ${r}, ${s} )`,a}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===hr||this.isSampleCompare(e)===!1&&e.minFilter===Rn&&e.magFilter===Rn||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,r,i,s,a=this.shaderStage){let o=null;return this.isUnfilterable(e)?o=this.generateTextureLod(e,t,r,i,s,"0",a):o=this._generateTextureSample(e,t,r,i,s,a),o}generateTextureGrad(e,t,r,i,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]}, ${a} )`:`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]} )`;Ie(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,r,i,s,a,o=this.shaderStage){if(o==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?a?`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${s}, ${i}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${s}, ${i} )`:a?`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i} )`;Ie(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,r,i,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,a,i):this.generateTextureLod(e,t,r,s,a,i)}generateTextureBias(e,t,r,i,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i} )`;Ie(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const r=e.name,i=e.type;return i==="texture"||i==="cubeTexture"||i==="cubeDepthTexture"||i==="storageTexture"||i==="texture3D"?r:i==="buffer"||i==="storageBuffer"||i==="indirectStorageBuffer"?this.isCustomStruct(e)?r:r+".value":e.groupNode.name+"."+r}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=txe[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?e.isAtomic===!0?(Ce("WebGPURenderer: Atomic operations are only supported in compute shaders."),zs.READ_WRITE):zs.READ_ONLY:e.access}getStorageAccess(e,t){return exe[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),a=this.getDataFromNode(e,r,this.globalCache);if(a.uniformGPU===void 0){let o;const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,r);if(t==="texture"||t==="cubeTexture"||t==="cubeDepthTexture"||t==="storageTexture"||t==="texture3D"){let h=null;const f=this.getNodeAccess(e,r);if(t==="texture"||t==="storageTexture"?e.value.is3DTexture===!0?h=new aw(s.name,s.node,l,f):h=new Tv(s.name,s.node,l,f):t==="cubeTexture"||t==="cubeDepthTexture"?h=new yH(s.name,s.node,l,f):t==="texture3D"&&(h=new aw(s.name,s.node,l,f)),h.store=e.isStorageTextureNode===!0,h.mipLevel=h.store?e.mipLevel:0,h.setVisibility(Ab[r]),this.isUnfilterable(e.value)===!1&&h.store===!1){const g=new Gve(`${s.name}_sampler`,s.node,l);g.setVisibility(Ab[r]),c.push(g,h),o=[g,h]}else c.push(h),o=[h]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const h=this.getSharedDataFromNode(e);let f=h.buffer;if(f===void 0){const g=t==="buffer"?fH:Hve;f=new g(e,l),h.buffer=f}f.setVisibility(f.getVisibility()|Ab[r]),c.push(f),o=f,s.name=i||"NodeBuffer_"+s.id}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let f=h[u];f===void 0&&(f=new gH(u,l),f.setVisibility(Ab[r]),h[u]=f,c.push(f)),o=this.getNodeUniform(s,t),f.addUniform(o)}a.uniformGPU=o}return s}getBuiltin(e,t,r,i=this.shaderStage){const s=this.builtins[i]||(this.builtins[i]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:r}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const a of t.inputs)i.push(a.name+" : "+this.getType(a.type));let s=`fn ${t.name}( ${i.join(", ")} ) -> ${this.getType(t.type)} {
${r.vars}
${r.code}
`;return r.result&&(s+=`	return ${r.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],r=this.directives[e];if(r!==void 0)for(const i of r)t.push(`enable ${i};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],r=this.builtins[e];if(r!==void 0)for(const{name:i,property:s,type:a}of r.values())t.push(`@builtin( ${i} ) ${s} : ${a}`);return t.join(`,
	`)}getScopedArray(e,t,r,i){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:r,bufferCount:i}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:r,scope:i,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(s);t.push(`var<${i}> ${r}: array< ${o}, ${a} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const r=this.getBuiltins("attribute");r&&t.push(r);const i=this.getAttributesArray();for(let s=0,a=i.length;s<a;s++){const o=i[s],l=o.name,u=this.getType(o.type);t.push(`@location( ${s} ) ${l} : ${u}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const r of e.members){const i=e.output?"@location( "+r.index+" ) ":"";let s=this.getType(r.type);r.atomic&&(s="atomic< "+s+" >"),t.push(`	${i+r.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const r=this.structs[e];if(r.length>0){const i=[];for(const s of r){let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
};`,i.push(a)}t=`
`+i.join(`

`)+`
`}return t}getVar(e,t,r=null){let i=`var ${t} : `;return r!==null?i+=this.generateArrayDeclaration(e,r):i+=this.getType(e),i}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`	${this.getVar(i.type,i.name,i.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let o=0;o<s.length;o++){const l=s[o];if(l.needsInterpolation){let u=`@location( ${o} )`;if(l.interpolationType){const c=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";u+=` @interpolate( ${l.interpolationType}${c}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(u+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${u} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&a.includes(l)===!1&&a.push(l)}}const r=this.getBuiltins(e);r&&t.push(r);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+i):i}isCustomStruct(e){const t=e.value,r=e.node,i=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&r.structTypeNode!==null,s=r.value&&r.value.array&&typeof r.value.itemSize=="number"&&r.value.array.length>r.value.itemSize;return i&&!s}getUniforms(e){const t=this.uniforms[e],r=[],i=[],s=[],a={};for(const l of t){const u=l.groupNode.name,c=this.bindingsIndexes[u];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="cubeDepthTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(h)?r.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler_comparison;`):r.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler;`));let f,g="";const{primarySamples:m}=this.renderer.backend.utils.getTextureSampleData(h);if(m>1&&(g="_multisampled"),h.isCubeTexture===!0&&h.isDepthTexture===!0)f="texture_depth_cube";else if(h.isCubeTexture===!0)f="texture_cube<f32>";else if(h.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&h.compareFunction===null?f=`texture${g}_2d<f32>`:f=`texture_depth${g}_2d${h.isArrayTexture===!0?"_array":""}`;else if(l.node.isStorageTextureNode===!0){const v=lw(h),_=this.getStorageAccess(l.node,e),b=l.node.value.is3DTexture,S=l.node.value.isArrayTexture;f=`texture_storage_${b?"3d":`2d${S?"_array":""}`}<${v}, ${_}>`}else if(h.isArrayTexture===!0||h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)f="texture_2d_array<f32>";else if(h.is3DTexture===!0||h.isData3DTexture===!0)f="texture_3d<f32>";else{const v=this.getComponentTypeFromTexture(h).charAt(0);f=`texture${g}_2d<${v}32>`}r.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name} : ${f};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const h=l.node,f=this.getType(h.getNodeType(this)),g=h.bufferCount,m=g>0&&l.type==="buffer"?", "+g:"",v=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h,e)}`:"uniform";if(this.isCustomStruct(l))i.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var<${v}> ${l.name} : ${f};`);else{const b=`	value : array< ${h.isAtomic?`atomic<${f}>`:`${f}`}${m} >`;i.push(this._getWGSLStructBinding(l.name,b,v,c.binding++,c.group))}}else{const h=this.getType(this.getVectorType(l.type)),f=l.groupNode.name;(a[f]||(a[f]={index:c.binding++,id:c.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in a){const u=a[l];s.push(this._getWGSLStructBinding(l,u.snippets.join(`,
`),"uniform",u.index,u.id))}return[...r,...i,...s].join(`
`)}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const r=e[t];r.uniforms=this.getUniforms(t),r.attributes=this.getAttributes(t),r.varyings=this.getVaryings(t),r.structs=this.getStructs(t),r.vars=this.getVars(t),r.codes=this.getCodes(t),r.directives=this.getDirectives(t),r.scopedArrays=this.getScopedArrays(t);let i=`// code

`;i+=this.flowCode[t];const s=this.flowNodes[t],a=s[s.length-1],o=a.outputNode,l=o!==void 0&&o.isOutputStructNode===!0;for(const u of s){const c=this.getFlowData(u),h=u.name;if(h&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${h}
`),i+=`${c.code}
	`,u===a&&t!=="compute"){if(i+=`// result

	`,t==="vertex")i+=`varyings.Vertex = ${c.result};`;else if(t==="fragment")if(l)r.returnType=o.getNodeType(this),r.structs+="var<private> output : "+r.returnType+";",i+=`return ${c.result};`;else{let f="	@location(0) color: vec4<f32>";const g=this.getBuiltins("output");g&&(f+=`,
	`+g),r.returnType="OutputStruct",r.structs+=this._getWGSLStruct("OutputStruct",f),r.structs+=`
var<private> output : OutputStruct;`,i+=`output.color = ${c.result};

	return output;`}}}r.flow=i}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let r;return t!==null&&(r=this._getWGSLMethod(e+"_"+t)),r===void 0&&(r=this._getWGSLMethod(e)),r||e}getBitcastMethod(e){return`bitcast<${this.getType(e)}>`}getFloatPackingMethod(e){return this.getMethod(`floatpack_${e}_2x16`)}getFloatUnpackingMethod(e){return this.getMethod(`floatunpack_${e}_2x16`)}getTernary(e,t,r){return`select( ${r}, ${t}, ${e} )`}getType(e){return nxe[e]||e}isAvailable(e){let t=xB[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),xB[e]=t),t}_getWGSLMethod(e){return gf[e]!==void 0&&this._include(e),rxe[e]}_include(e){const t=gf[e];return t.build(this),this.addInclude(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${vH}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){const[r,i,s]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r}, ${i}, ${s} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${r} * numWorkgroups.x )
		+ globalId.z * ( ${r} * numWorkgroups.x ) * ( ${i} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,r,i=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,t)}
@binding( ${i} ) @group( ${s} )
var<${r}> ${e} : ${a};`}}class sxe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=ie.Depth24PlusStencil8:e.depth&&(t=ie.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,a=s.getRenderTarget();t=a?a.samples:s.currentSamples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const r=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:r?1:t,isMSAA:r}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorFormats(e){return e.textures!==null?e.textures.map(t=>this.getTextureFormatGPU(t)):[this.getPreferredCanvasFormat()]}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return Nd.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return Nd.LineList;if(e.isLine)return Nd.LineStrip;if(e.isMesh)return Nd.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.currentSamples)}getPreferredCanvasFormat(){const t=this.backend.parameters.outputType;if(t===void 0)return navigator.gpu.getPreferredCanvasFormat();if(t===qn)return ie.BGRA8Unorm;if(t===tr)return ie.RGBA16Float;throw new Error("Unsupported output buffer type.")}}const xH=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&xH.set(Float16Array,["float16"]);const axe=new Map([[fV,["float16"]]]),oxe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class lxe{constructor(e){this.backend=e}createAttribute(e,t){const r=this._getBufferAttribute(e),i=this.backend,s=i.get(r);let a=s.buffer;if(a===void 0){const o=i.device;let l=r.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let h=0;h<l.length;h++)l[h]===65535&&(l[h]=4294967295)}if(r.array=l,(r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute)&&r.itemSize===3){l=new l.constructor(r.count*4);for(let h=0;h<r.count;h++)l.set(r.array.subarray(h*3,h*3+3),h*4);r.itemSize=4,r.array=l,s._force3to4BytesAlignment=!0}const u=l.byteLength,c=u+(4-u%4)%4;a=o.createBuffer({label:r.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(a.getMappedRange()).set(l),a.unmap(),s.buffer=a}}updateAttribute(e){const t=this._getBufferAttribute(e),r=this.backend,i=r.device,s=r.get(t),a=r.get(t).buffer;let o=t.array;if(s._force3to4BytesAlignment===!0){o=new o.constructor(t.count*4);for(let u=0;u<t.count;u++)o.set(t.array.subarray(u*3,u*3+3),u*4);t.array=o}const l=t.updateRanges;if(l.length===0)i.queue.writeBuffer(a,0,o,0);else{const u=u_(o),c=u?1:o.BYTES_PER_ELEMENT;for(let h=0,f=l.length;h<f;h++){const g=l[h];let m,v;if(s._force3to4BytesAlignment===!0){const b=Math.floor(g.start/3),S=Math.ceil(g.count/3);m=b*4*c,v=S*4*c}else m=g.start*c,v=g.count*c;const _=m*(u?o.BYTES_PER_ELEMENT:1);i.queue.writeBuffer(a,_,o,m,v)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),r=new Map;for(let i=0;i<t.length;i++){const s=t[i],a=s.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(s);let l=r.get(o);if(l===void 0){let h,f;s.isInterleavedBufferAttribute===!0?(h=s.data.stride*a,f=s.data.isInstancedInterleavedBuffer?wb.Instance:wb.Vertex):(h=s.itemSize*a,f=s.isInstancedBufferAttribute?wb.Instance:wb.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:f},r.set(o,l)}const u=this._getVertexFormat(s),c=s.isInterleavedBufferAttribute===!0?s.offset*a:0;l.attributes.push({shaderLocation:i,offset:c,format:u})}return Array.from(r.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,r=t.device,s=t.get(this._getBufferAttribute(e)).buffer,a=s.size,o=r.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=r.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,o,0,a);const u=l.finish();r.queue.submit([u]),await o.mapAsync(GPUMapMode.READ);const c=o.getMappedRange(),h=new e.array.constructor(c.slice(0));return o.unmap(),h.buffer}_getVertexFormat(e){const{itemSize:t,normalized:r}=e,i=e.array.constructor,s=e.constructor;let a;if(t===1)a=oxe.get(i);else{const l=(axe.get(s)||xH.get(i))[r?1:0];if(l){const u=i.BYTES_PER_ELEMENT*t,h=Math.floor((u+3)/4)*4/i.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${l}x${h}`}}return a||Ie("WebGPUAttributeUtils: Vertex format not supported yet."),a}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class uxe{constructor(e){this.layoutGPU=e,this.usedTimes=0}}class cxe{constructor(e){this.backend=e,this._bindGroupLayoutCache=new Map}createBindingsLayout(e){const t=this.backend,r=t.device,i=t.get(e);if(i.layout)return i.layout.layoutGPU;const s=this._createLayoutEntries(e),a=JSON.stringify(s);let o=this._bindGroupLayoutCache.get(a);return o===void 0&&(o=new uxe(r.createBindGroupLayout({entries:s})),this._bindGroupLayoutCache.set(a,o)),o.usedTimes++,i.layout=o,i.layoutKey=a,o.layoutGPU}createBindings(e,t,r,i=0){const{backend:s}=this,a=s.get(e),o=this.createBindingsLayout(e);let l;r>0&&(a.groups===void 0&&(a.groups=[],a.versions=[]),a.versions[r]===i&&(l=a.groups[r])),l===void 0&&(l=this.createBindGroup(e,o),r>0&&(a.groups[r]=l,a.versions[r]=i)),a.group=l}updateBinding(e){const t=this.backend,r=t.device,i=e.buffer,s=t.get(e).buffer,a=e.updateRanges;if(a.length===0)r.queue.writeBuffer(s,0,i,0);else{const o=u_(i),l=o?1:i.BYTES_PER_ELEMENT;for(let u=0,c=a.length;u<c;u++){const h=a[u],f=h.start*l,g=h.count*l,m=f*(o?i.BYTES_PER_ELEMENT:1);r.queue.writeBuffer(s,m,i,f,g)}e.clearUpdateRanges()}}createBindGroupIndex(e,t){const i=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=i.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:s});i.queue.writeBuffer(o,0,e,0);const l=[{binding:0,resource:{buffer:o}}];return i.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:t,entries:l})}createBindGroup(e,t){const r=this.backend,i=r.device;let s=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const l=r.get(o);if(l.buffer===void 0){const u=o.byteLength,c=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=[];o.visibility&Uu.VERTEX&&h.push("vertex"),o.visibility&Uu.FRAGMENT&&h.push("fragment"),o.visibility&Uu.COMPUTE&&h.push("compute");const f=`(${h.join(",")})`,g=i.createBuffer({label:`bindingBuffer${o.id}_${o.name}_${f}`,size:u,usage:c});l.buffer=g}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isStorageBuffer){const l=r.get(o);if(l.buffer===void 0){const u=o.attribute;l.buffer=r.get(u).buffer}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isSampledTexture){const l=r.get(o.texture);let u;if(l.externalTexture!==void 0)u=i.importExternalTexture({source:l.externalTexture});else{const c=o.store?1:l.texture.mipLevelCount,h=o.store?o.mipLevel:0;let f=`view-${l.texture.width}-${l.texture.height}`;if(l.texture.depthOrArrayLayers>1&&(f+=`-${l.texture.depthOrArrayLayers}`),f+=`-${c}-${h}`,u=l[f],u===void 0){const g=zve.All;let m;o.isSampledCubeTexture?m=xr.Cube:o.isSampledTexture3D?m=xr.ThreeD:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?m=xr.TwoDArray:m=xr.TwoD,u=l[f]=l.texture.createView({aspect:g,dimension:m,mipLevelCount:c,baseMipLevel:h})}}a.push({binding:s,resource:u})}else if(o.isSampler){const l=r.get(o.texture);a.push({binding:s,resource:l.sampler})}s++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}_createLayoutEntries(e){const t=[];let r=0;for(const i of e.bindings){const s=this.backend,a={binding:r,visibility:i.visibility};if(i.isUniformBuffer||i.isStorageBuffer){const o={};i.isStorageBuffer&&(i.visibility&Uu.COMPUTE&&(i.access===zs.READ_WRITE||i.access===zs.WRITE_ONLY)?o.type=vE.Storage:o.type=vE.ReadOnlyStorage),a.buffer=o}else if(i.isSampledTexture&&i.store){const o={};o.format=this.backend.get(i.texture).texture.format;const l=i.access;l===zs.READ_WRITE?o.access=xE.ReadWrite:l===zs.WRITE_ONLY?o.access=xE.WriteOnly:o.access=xE.ReadOnly,i.texture.isArrayTexture?o.viewDimension=xr.TwoDArray:i.texture.is3DTexture&&(o.viewDimension=xr.ThreeD),a.storageTexture=o}else if(i.isSampledTexture){const o={},{primarySamples:l}=s.utils.getTextureSampleData(i.texture);if(l>1&&(o.multisampled=!0,i.texture.isDepthTexture||(o.sampleType=Eu.UnfilterableFloat)),i.texture.isDepthTexture)s.compatibilityMode&&i.texture.compareFunction===null?o.sampleType=Eu.UnfilterableFloat:o.sampleType=Eu.Depth;else if(i.texture.isDataTexture||i.texture.isDataArrayTexture||i.texture.isData3DTexture){const u=i.texture.type;u===Vr?o.sampleType=Eu.SInt:u===An?o.sampleType=Eu.UInt:u===hr&&(this.backend.hasFeature("float32-filterable")?o.sampleType=Eu.Float:o.sampleType=Eu.UnfilterableFloat)}i.isSampledCubeTexture?o.viewDimension=xr.Cube:i.texture.isArrayTexture||i.texture.isDataArrayTexture||i.texture.isCompressedArrayTexture?o.viewDimension=xr.TwoDArray:i.isSampledTexture3D&&(o.viewDimension=xr.ThreeD),a.texture=o}else if(i.isSampler){const o={};i.texture.isDepthTexture&&(i.texture.compareFunction!==null?o.type=mB.Comparison:s.compatibilityMode&&(o.type=mB.NonFiltering)),a.sampler=o}else Ie(`WebGPUBindingUtils: Unsupported binding "${i}".`);t.push(a),r++}return t}deleteBindGroupData(e){const{backend:t}=this,r=t.get(e);r.layout&&(r.layout.usedTimes--,r.layout.usedTimes===0&&this._bindGroupLayoutCache.delete(r.layoutKey),r.layout=void 0,r.layoutKey=void 0)}dispose(){this._bindGroupLayoutCache.clear()}}class dxe{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:r,material:i,geometry:s,pipeline:a}=e,{vertexProgram:o,fragmentProgram:l}=a,u=this.backend,c=u.device,h=u.utils,f=u.get(a),g=[];for(const W of e.getBindings()){const q=u.get(W),{layoutGPU:X}=q.layout;g.push(X)}const m=u.attributeUtils.createShaderVertexBuffers(e);let v;i.blending!==Pi&&(i.blending!==Es||i.transparent!==!1)&&(v=this._getBlending(i));let _={};i.stencilWrite===!0&&(_={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const b=this._getColorWriteMask(i),S=[];if(e.context.textures!==null){const W=e.context.textures;for(let q=0;q<W.length;q++){const X=h.getTextureFormatGPU(W[q]);q===0?S.push({format:X,blend:v,writeMask:b}):S.push({format:X,writeMask:b})}}else{const W=h.getCurrentColorFormat(e.context);S.push({format:W,blend:v,writeMask:b})}const E=u.get(o).module,A=u.get(l).module,R=this._getPrimitiveState(r,s,i),w=this._getDepthCompare(i),M=h.getCurrentDepthStencilFormat(e.context),I=this._getSampleCount(e.context),C={label:`renderPipeline_${i.name||i.type}_${i.id}`,vertex:Object.assign({},E,{buffers:m}),fragment:Object.assign({},A,{targets:S}),primitive:R,multisample:{count:I,alphaToCoverageEnabled:i.alphaToCoverage&&I>1},layout:c.createPipelineLayout({bindGroupLayouts:g})},k={},O=e.context.depth,z=e.context.stencil;if((O===!0||z===!0)&&(O===!0&&(k.format=M,k.depthWriteEnabled=i.depthWrite,k.depthCompare=w),z===!0&&(k.stencilFront=_,k.stencilBack={},k.stencilReadMask=i.stencilFuncMask,k.stencilWriteMask=i.stencilWriteMask),i.polygonOffset===!0&&(k.depthBias=i.polygonOffsetUnits,k.depthBiasSlopeScale=i.polygonOffsetFactor,k.depthBiasClamp=0),C.depthStencil=k),c.pushErrorScope("validation"),t===null)f.pipeline=c.createRenderPipeline(C),c.popErrorScope().then(W=>{W!==null&&(f.error=!0,Ie(W.message))});else{const W=new Promise(async q=>{try{f.pipeline=await c.createRenderPipelineAsync(C)}catch{}const X=await c.popErrorScope();X!==null&&(f.error=!0,Ie(X.message)),q()});t.push(W)}}createBundleEncoder(e,t="renderBundleEncoder"){const r=this.backend,{utils:i,device:s}=r,a=i.getCurrentDepthStencilFormat(e),o=i.getCurrentColorFormats(e),l=this._getSampleCount(e),u={label:t,colorFormats:o,depthStencilFormat:a,sampleCount:l};return s.createRenderBundleEncoder(u)}createComputePipeline(e,t){const r=this.backend,i=r.device,s=r.get(e.computeProgram).module,a=r.get(e),o=[];for(const l of t){const u=r.get(l),{layoutGPU:c}=u.layout;o.push(c)}a.pipeline=i.createComputePipeline({compute:s,layout:i.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let t,r;const i=e.blending,s=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(i===kd){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:a,c=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},r={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(c)}}else{const l=e.premultipliedAlpha,u=(c,h,f,g)=>{t={srcFactor:c,dstFactor:h,operation:Su.Add},r={srcFactor:f,dstFactor:g,operation:Su.Add}};if(l)switch(i){case Es:u(an.One,an.OneMinusSrcAlpha,an.One,an.OneMinusSrcAlpha);break;case Gd:u(an.One,an.One,an.One,an.One);break;case Vd:u(an.Zero,an.OneMinusSrc,an.Zero,an.One);break;case $d:u(an.Dst,an.OneMinusSrcAlpha,an.Zero,an.One);break}else switch(i){case Es:u(an.SrcAlpha,an.OneMinusSrcAlpha,an.One,an.OneMinusSrcAlpha);break;case Gd:u(an.SrcAlpha,an.One,an.One,an.One);break;case Vd:Ie("WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case $d:Ie("WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(t!==void 0&&r!==void 0)return{color:t,alpha:r};Ie("WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let t;switch(e){case To:t=an.Zero;break;case _1:t=an.One;break;case v1:t=an.Src;break;case x1:t=an.OneMinusSrc;break;case dg:t=an.SrcAlpha;break;case hg:t=an.OneMinusSrcAlpha;break;case T1:t=an.Dst;break;case w1:t=an.OneMinusDst;break;case S1:t=an.DstAlpha;break;case E1:t=an.OneMinusDstAlpha;break;case A1:t=an.SrcAlphaSaturated;break;case zye:t=an.Constant;break;case Gye:t=an.OneMinusConstant;break;default:Ie("WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const r=e.stencilFunc;switch(r){case Ite:t=Xr.Never;break;case CT:t=Xr.Always;break;case kte:t=Xr.Less;break;case Dte:t=Xr.LessEqual;break;case Lte:t=Xr.Equal;break;case Fte:t=Xr.GreaterEqual;break;case Ote:t=Xr.Greater;break;case Pte:t=Xr.NotEqual;break;default:Ie("WebGPURenderer: Invalid stencil function.",r)}return t}_getStencilOperation(e){let t;switch(e){case Au:t=Sl.Keep;break;case Tte:t=Sl.Zero;break;case wte:t=Sl.Replace;break;case Mte:t=Sl.Invert;break;case Ate:t=Sl.IncrementClamp;break;case Rte:t=Sl.DecrementClamp;break;case Nte:t=Sl.IncrementWrap;break;case Cte:t=Sl.DecrementWrap;break;default:Ie("WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case fi:t=Su.Add;break;case y1:t=Su.Subtract;break;case b1:t=Su.ReverseSubtract;break;case sV:t=Su.Min;break;case aV:t=Su.Max;break;default:Ie("WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,r){const i={},s=this.backend.utils;i.topology=s.getPrimitiveTopology(e,r),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(i.stripIndexFormat=t.index.array instanceof Uint16Array?wh.Uint16:wh.Uint32);let a=r.side===On;return e.isMesh&&e.matrixWorld.determinant()<0&&(a=!a),i.frontFace=a===!0?pB.CW:pB.CCW,i.cullMode=r.side===pi?fB.None:fB.Back,i}_getColorWriteMask(e){return e.colorWrite===!0?gB.All:gB.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Xr.Always;else{const r=e.depthFunc;switch(r){case pg:t=Xr.Never;break;case fg:t=Xr.Always;break;case gg:t=Xr.Less;break;case Gl:t=Xr.LessEqual;break;case mg:t=Xr.Equal;break;case yg:t=Xr.GreaterEqual;break;case bg:t=Xr.Greater;break;case _g:t=Xr.NotEqual;break;default:Ie("WebGPUPipelineUtils: Invalid depth function.",r)}}return t}}class hxe extends _H{constructor(e,t,r=2048){super(r),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const i=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return jn(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,r=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const i=this.device.createCommandEncoder();i.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),i.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,r);const s=i.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,r),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,r)),o={},l=[];for(const[c,h]of e){const f=c.match(/^(.*):f(\d+)$/),g=parseInt(f[2]);l.includes(g)===!1&&l.push(g),o[g]===void 0&&(o[g]=0);const m=a[h],v=a[h+1],_=Number(v-m)/1e6;this.timestamps.set(c,_),o[g]+=_}const u=o[l[l.length-1]];return this.resultBuffer.unmap(),this.lastValue=u,this.frames=l,u}catch(e){return Ie("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){Ie("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){Ie("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class pxe extends bH{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.defaultRenderPassdescriptor=null,this.utils=new sxe(this),this.attributeUtils=new lxe(this),this.bindingUtils=new cxe(this),this.pipelineUtils=new dxe(this),this.textureUtils=new Xve(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let r;if(t.device===void 0){const i={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},s=typeof navigator<"u"?await navigator.gpu.requestAdapter(i):null;if(s===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const a=Object.values(ow),o=[];for(const u of a)s.features.has(u)&&o.push(u);const l={requiredFeatures:o,requiredLimits:t.requiredLimits};r=await s.requestDevice(l)}else r=t.device;r.lost.then(i=>{if(i.reason==="destroyed")return;const s={api:"WebGPU",message:i.message||"Unknown reason",reason:i.reason||null,originalEvent:i};e.onDeviceLost(s)}),this.device=r,this.trackTimestamp=this.trackTimestamp&&this.hasFeature(ow.TimestampQuery),this.updateSize()}get context(){const e=this.renderer.getCanvasTarget(),t=this.get(e);let r=t.context;if(r===void 0){const i=this.parameters;e.isDefaultCanvasTarget===!0&&i.context!==void 0?r=i.context:r=e.domElement.getContext("webgpu"),"setAttribute"in e.domElement&&e.domElement.setAttribute("data-engine",`three.js r${dc} webgpu`);const s=i.alpha?"premultiplied":"opaque",a=i.outputType===tr?"extended":"standard";r.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s,toneMapping:{mode:a}}),t.context=r}return r}get coordinateSystem(){return Za}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){const e=this.renderer,t=e.getCanvasTarget(),r=this.get(t),i=e.currentSamples;let s=r.descriptor;if(s===void 0||r.samples!==i){s={colorAttachments:[{view:null}]},(e.depth===!0||e.stencil===!0)&&(s.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(e.depth,e.stencil).createView()});const o=s.colorAttachments[0];i>0?o.view=this.textureUtils.getColorBuffer().createView():o.resolveTarget=void 0,r.descriptor=s,r.samples=i}const a=s.colorAttachments[0];return i>0?a.resolveTarget=this.context.getCurrentTexture().createView():a.view=this.context.getCurrentTexture().createView(),s}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const r=e.renderTarget,i=this.get(r);let s=i.descriptors;(s===void 0||i.width!==r.width||i.height!==r.height||i.samples!==r.samples)&&(s={},i.descriptors=s);const a=e.getCacheKey();let o=s[a];if(o===void 0){const u=e.textures,c=[];let h;const f=this._isRenderCameraDepthArray(e);for(let g=0;g<u.length;g++){const m=this.get(u[g]),v={label:`colorAttachment_${g}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:xr.TwoD};if(r.isRenderTarget3D)h=e.activeCubeFace,v.baseArrayLayer=0,v.dimension=xr.ThreeD,v.depthOrArrayLayers=u[g].image.depth;else if(r.isRenderTarget&&u[g].image.depth>1)if(f===!0){const _=e.camera.cameras;for(let b=0;b<_.length;b++){const S={...v,baseArrayLayer:b,arrayLayerCount:1,dimension:xr.TwoD},E=m.texture.createView(S);c.push({view:E,resolveTarget:void 0,depthSlice:void 0})}}else v.dimension=xr.TwoDArray,v.depthOrArrayLayers=u[g].image.depth;if(f!==!0){const _=m.texture.createView(v);let b,S;m.msaaTexture!==void 0?(b=m.msaaTexture.createView(),S=_):(b=_,S=void 0),c.push({view:b,resolveTarget:S,depthSlice:h})}}if(o={textureViews:c},e.depth){const g=this.get(e.depthTexture),m={};(e.depthTexture.isArrayTexture||e.depthTexture.isCubeTexture)&&(m.dimension=xr.TwoD,m.arrayLayerCount=1,m.baseArrayLayer=e.activeCubeFace),o.depthStencilView=g.texture.createView(m)}s[a]=o,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=e.activeMipmapLevel,i.activeCubeFace=e.activeCubeFace}const l={colorAttachments:[]};for(let u=0;u<o.textureViews.length;u++){const c=o.textureViews[u];let h={r:0,g:0,b:0,a:1};u===0&&t.clearValue&&(h=t.clearValue),l.colorAttachments.push({view:c.view,depthSlice:c.depthSlice,resolveTarget:c.resolveTarget,loadOp:t.loadOp||xn.Load,storeOp:t.storeOp||Ni.Store,clearValue:h})}return o.depthStencilView&&(l.depthStencilAttachment={view:o.depthStencilView}),l}beginRender(e){const t=this.get(e),r=this.device,i=e.occlusionQueryCount;let s;i>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=r.createQuerySet({type:"occlusion",count:i,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(i),t.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:xn.Load}),this.initTimestampQuery(Va.RENDER,this.getTimestampUID(e),a),a.occlusionQuerySet=s;const o=a.depthStencilAttachment;if(e.textures!==null){const u=a.colorAttachments;for(let c=0;c<u.length;c++){const h=u[c];e.clearColor?(h.clearValue=c===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=xn.Clear):h.loadOp=xn.Load,h.storeOp=Ni.Store}}else{const u=a.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=xn.Clear):u.loadOp=xn.Load,u.storeOp=Ni.Store}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=xn.Clear):o.depthLoadOp=xn.Load,o.depthStoreOp=Ni.Store),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=xn.Clear):o.stencilLoadOp=xn.Load,o.stencilStoreOp=Ni.Store);const l=r.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const u=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==u.length?this._createDepthLayerDescriptors(e,t,a,u):this._updateDepthLayerDescriptors(e,t,u),t.bundleEncoders=[],t.bundleSets=[];for(let c=0;c<u.length;c++){const h=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+c),f={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(h),t.bundleSets.push(f)}t.currentPass=null}else{const u=l.beginRenderPass(a);t.currentPass=u,e.viewport&&this.updateViewport(e),e.scissor&&this.updateScissor(e)}t.descriptor=a,t.encoder=l,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,r,i){const s=r.depthStencilAttachment;t.layerDescriptors=[];const a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let o=0;o<i.length;o++){const l={...r,colorAttachments:[{...r.colorAttachments[0],view:r.colorAttachments[o].view}]};if(r.depthStencilAttachment){const u=o;a.viewCache[u]||(a.viewCache[u]=a.texture.createView({dimension:xr.TwoD,baseArrayLayer:o,arrayLayerCount:1})),l.depthStencilAttachment={view:a.viewCache[u],depthLoadOp:s.depthLoadOp||xn.Clear,depthStoreOp:s.depthStoreOp||Ni.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else l.depthStencilAttachment={...s};t.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,t,r){for(let i=0;i<r.length;i++){const s=t.layerDescriptors[i];if(s.depthStencilAttachment){const a=s.depthStencilAttachment;e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=xn.Clear):a.depthLoadOp=xn.Load),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=xn.Clear):a.stencilLoadOp=xn.Load)}}}finishRender(e){const t=this.get(e),r=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),r>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const i=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let a=0;a<t.bundleEncoders.length;a++){const o=t.bundleEncoders[a];s.push(o.finish())}for(let a=0;a<t.layerDescriptors.length;a++)if(a<s.length){const o=t.layerDescriptors[a],l=i.beginRenderPass(o);if(e.viewport){const{x:u,y:c,width:h,height:f,minDepth:g,maxDepth:m}=e.viewportValue;l.setViewport(u,c,h,f,g,m)}if(e.scissor){const{x:u,y:c,width:h,height:f}=e.scissorValue;l.setScissorRect(u,c,h,f)}l.executeBundles([s[a]]),l.end()}}else t.currentPass&&t.currentPass.end();if(r>0){const s=r*8;let a=this.occludedResolveCache.get(s);a===void 0&&(a=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,a));const o=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,r,a,0),t.encoder.copyBufferToBuffer(a,0,o,0,s),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const s=e.textures;for(let a=0;a<s.length;a++){const o=s[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await r.mapAsync(GPUMapMode.READ);const a=r.getMappedRange(),o=new BigUint64Array(a);for(let l=0;l<i.length;l++)o[l]===BigInt(0)&&s.add(i[l]);r.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:r,y:i,width:s,height:a,minDepth:o,maxDepth:l}=e.viewportValue;t.setViewport(r,i,s,a,o,l)}updateScissor(e){const{currentPass:t}=this.get(e),{x:r,y:i,width:s,height:a}=e.scissorValue;t.setScissorRect(r,i,s,a)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,r,i=null){const s=this.device,a=this.renderer;let o=[],l,u,c,h;if(e){const m=this.getClearColor();u={r:m.r,g:m.g,b:m.b,a:m.a}}if(i===null){c=a.depth,h=a.stencil;const m=this._getDefaultRenderPassDescriptor();if(e){o=m.colorAttachments;const v=o[0];v.clearValue=u,v.loadOp=xn.Clear,v.storeOp=Ni.Store}(c||h)&&(l=m.depthStencilAttachment)}else{c=i.depth,h=i.stencil;const m={loadOp:e?xn.Clear:xn.Load,clearValue:e?u:void 0};c&&(m.depthLoadOp=t?xn.Clear:xn.Load,m.depthClearValue=t?a.getClearDepth():void 0,m.depthStoreOp=Ni.Store),h&&(m.stencilLoadOp=r?xn.Clear:xn.Load,m.stencilClearValue=r?a.getClearStencil():void 0,m.stencilStoreOp=Ni.Store);const v=this._getRenderPassDescriptor(i,m);o=v.colorAttachments,l=v.depthStencilAttachment}c&&l&&(t?(l.depthLoadOp=xn.Clear,l.depthClearValue=a.getClearDepth(),l.depthStoreOp=Ni.Store):(l.depthLoadOp=xn.Load,l.depthStoreOp=Ni.Store)),h&&l&&(r?(l.stencilLoadOp=xn.Clear,l.stencilClearValue=a.getClearStencil(),l.stencilStoreOp=Ni.Store):(l.stencilLoadOp=xn.Load,l.stencilStoreOp=Ni.Store));const f=s.createCommandEncoder({label:"clear"});f.beginRenderPass({colorAttachments:o,depthStencilAttachment:l}).end(),s.queue.submit([f.finish()])}beginCompute(e){const t=this.get(e),r={label:"computeGroup_"+e.id};this.initTimestampQuery(Va.COMPUTE,this.getTimestampUID(e),r),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(r)}compute(e,t,r,i,s=null){const a=this.get(t),{passEncoderGPU:o}=this.get(e),l=this.get(i).pipeline;this.pipelineUtils.setPipeline(o,l);for(let u=0,c=r.length;u<c;u++){const h=r[u],f=this.get(h);o.setBindGroup(u,f.group)}if(s===null&&(s=t.count),s&&typeof s=="object"&&s.isIndirectStorageBufferAttribute){const u=this.get(s).buffer;o.dispatchWorkgroupsIndirect(u,0);return}if(typeof s=="number"){const u=s;if(a.dispatchSize===void 0||a.count!==u){a.dispatchSize=[0,1,1],a.count=u;const c=t.workgroupSize;let h=c[0];for(let m=1;m<c.length;m++)h*=c[m];const f=Math.ceil(u/h),g=this.device.limits.maxComputeWorkgroupsPerDimension;s=[f,1,1],f>g&&(s[0]=Math.min(f,g),s[1]=Math.ceil(f/g)),a.dispatchSize=s}s=a.dispatchSize}o.dispatchWorkgroups(s[0],s[1]||1,s[2]||1)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:r,material:i,context:s,pipeline:a}=e,o=e.getBindings(),l=this.get(s),u=this.get(a),c=u.pipeline;if(u.error===!0)return;const h=e.getIndex(),f=h!==null,g=e.getDrawParameters();if(g===null)return;const m=(_,b)=>{this.pipelineUtils.setPipeline(_,c),b.pipeline=c;const S=b.bindingGroups;for(let A=0,R=o.length;A<R;A++){const w=o[A],M=this.get(w);S[w.index]!==w.id&&(_.setBindGroup(w.index,M.group),S[w.index]=w.id)}if(f===!0&&b.index!==h){const A=this.get(h).buffer,R=h.array instanceof Uint16Array?wh.Uint16:wh.Uint32;_.setIndexBuffer(A,R),b.index=h}const E=e.getVertexBuffers();for(let A=0,R=E.length;A<R;A++){const w=E[A];if(b.attributes[A]!==w){const M=this.get(w).buffer;_.setVertexBuffer(A,M),b.attributes[A]=w}}s.stencil===!0&&i.stencilWrite===!0&&l.currentStencilRef!==i.stencilRef&&(_.setStencilReference(i.stencilRef),l.currentStencilRef=i.stencilRef)},v=(_,b)=>{if(m(_,b),r.isBatchedMesh===!0){const S=r._multiDrawStarts,E=r._multiDrawCounts,A=r._multiDrawCount,R=r._multiDrawInstances;R!==null&&jn("WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let w=0;w<A;w++){const M=R?R[w]:1,I=M>1?0:w;f===!0?_.drawIndexed(E[w],M,S[w]/h.array.BYTES_PER_ELEMENT,0,I):_.draw(E[w],M,S[w],I),t.update(r,E[w],M)}}else if(f===!0){const{vertexCount:S,instanceCount:E,firstVertex:A}=g,R=e.getIndirect();if(R!==null){const w=this.get(R).buffer,M=e.getIndirectOffset(),I=Array.isArray(M)?M:[M];for(let C=0;C<I.length;C++)_.drawIndexedIndirect(w,I[C])}else _.drawIndexed(S,E,A,0,0);t.update(r,S,E)}else{const{vertexCount:S,instanceCount:E,firstVertex:A}=g,R=e.getIndirect();if(R!==null){const w=this.get(R).buffer,M=e.getIndirectOffset(),I=Array.isArray(M)?M:[M];for(let C=0;C<I.length;C++)_.drawIndirect(w,I[C])}else _.draw(S,E,A,0);t.update(r,S,E)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const _=this.get(e.camera),b=e.camera.cameras,S=e.getBindingGroup("cameraIndex");if(_.indexesGPU===void 0||_.indexesGPU.length!==b.length){const A=this.get(S),R=[],w=new Uint32Array([0,0,0,0]);for(let M=0,I=b.length;M<I;M++){w[0]=M;const{layoutGPU:C}=A.layout,k=this.bindingUtils.createBindGroupIndex(w,C);R.push(k)}_.indexesGPU=R}const E=this.renderer.getPixelRatio();for(let A=0,R=b.length;A<R;A++){const w=b[A];if(r.layers.test(w.layers)){const M=w.viewport;let I=l.currentPass,C=l.currentSets;if(l.bundleEncoders){const k=l.bundleEncoders[A],O=l.bundleSets[A];I=k,C=O}M&&I.setViewport(Math.floor(M.x*E),Math.floor(M.y*E),Math.floor(M.width*E),Math.floor(M.height*E),s.viewportValue.minDepth,s.viewportValue.maxDepth),S&&_.indexesGPU&&(I.setBindGroup(S.index,_.indexesGPU[A]),C.bindingGroups[S.index]=S.id),v(I,C)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const _=l.lastOcclusionObject;_!==r&&(_!==null&&_.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),r.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=r),l.lastOcclusionObject=r)}v(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:r,material:i}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),o=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),c=s.getPrimitiveTopology(r,i);let h=!1;return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==o||t.colorFormat!==l||t.depthStencilFormat!==u||t.primitiveTopology!==c||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=l,t.depthStencilFormat=u,t.primitiveTopology=c,t.clippingContextCacheKey=e.clippingContextCacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:r}=e,i=this.utils,s=e.context,a=t.isMesh&&t.matrixWorld.determinant()<0;return[r.transparent,r.blending,r.premultipliedAlpha,r.blendSrc,r.blendDst,r.blendEquation,r.blendSrcAlpha,r.blendDstAlpha,r.blendEquationAlpha,r.colorWrite,r.depthWrite,r.depthTest,r.depthFunc,r.stencilWrite,r.stencilFunc,r.stencilFail,r.stencilZFail,r.stencilZPass,r.stencilFuncMask,r.stencilWriteMask,r.side,a,i.getSampleCountRenderContext(s),i.getCurrentColorSpace(s),i.getCurrentColorFormat(s),i.getCurrentDepthStencilFormat(s),i.getPrimitiveTopology(t,r),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}updateSampler(e){return this.textureUtils.updateSampler(e)}createDefaultTexture(e){return this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,t=!1){this.textureUtils.destroyTexture(e,t)}async copyTextureToBuffer(e,t,r,i,s,a){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,a)}initTimestampQuery(e,t,r){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new hxe(this.device,e,2048));const i=this.timestampQueryPool[e],s=i.allocateQueriesForContext(t);r.timestampWrites={querySet:i.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new ixe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const r=this.get(e),s=r.currentPass.finish();this.get(t).bundleGPU=s,r.currentSets=r._currentSets,r.currentPass=r._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,r,i){this.bindingUtils.createBindings(e,t,r,i)}updateBindings(e,t,r,i){this.bindingUtils.createBindings(e,t,r,i)}updateBinding(e){this.bindingUtils.updateBinding(e)}deleteBindGroupData(e){this.bindingUtils.deleteBindGroupData(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.delete(this.renderer.getCanvasTarget())}getMaxAnisotropy(){return 16}hasFeature(e){return bB[e]!==void 0&&(e=bB[e]),this.device.features.has(e)}copyTextureToTexture(e,t,r=null,i=null,s=0,a=0){let o=0,l=0,u=0,c=0,h=0,f=0,g=e.image.width,m=e.image.height,v=1;r!==null&&(r.isBox3===!0?(c=r.min.x,h=r.min.y,f=r.min.z,g=r.max.x-r.min.x,m=r.max.y-r.min.y,v=r.max.z-r.min.z):(c=r.min.x,h=r.min.y,g=r.max.x-r.min.x,m=r.max.y-r.min.y,v=1)),i!==null&&(o=i.x,l=i.y,u=i.z||0);const _=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),b=this.get(e).texture,S=this.get(t).texture;_.copyTextureToTexture({texture:b,mipLevel:s,origin:{x:c,y:h,z:f}},{texture:S,mipLevel:a,origin:{x:o,y:l,z:u}},[g,m,v]),this.device.queue.submit([_.finish()]),a===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,r){const i=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){Ie("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let o;if(i.currentPass?(i.currentPass.end(),o=i.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:s,origin:[r.x,r.y,0]},{texture:a},[r.z,r.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e,o),i.currentPass){const{descriptor:l}=i;for(let u=0;u<l.colorAttachments.length;u++)l.colorAttachments[u].loadOp=xn.Load;t.depth&&(l.depthStencilAttachment.depthLoadOp=xn.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=xn.Load),i.currentPass=o.beginRenderPass(l),i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor&&this.updateScissor(t)}else this.device.queue.submit([o.finish()])}dispose(){if(this.bindingUtils.dispose(),this.textureUtils.dispose(),this.occludedResolveCache){for(const e of this.occludedResolveCache.values())e.destroy();this.occludedResolveCache.clear()}if(this.timestampQueryPool)for(const e of Object.values(this.timestampQueryPool))e!==null&&e.dispose();this.parameters.device===void 0&&this.device!==null&&this.device.destroy()}}class fxe extends sI{constructor(e,t,r,i,s,a){super(e,t,r,i,s,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class gxe extends sI{constructor(e,t,r,i,s,a){super(e,t,r,i,s,a),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class mxe extends cH{constructor(){super(),this.addMaterial(vme,"MeshPhongMaterial"),this.addMaterial(j$,"MeshStandardMaterial"),this.addMaterial(bye,"MeshPhysicalMaterial"),this.addMaterial(Sye,"MeshToonMaterial"),this.addMaterial(pme,"MeshBasicMaterial"),this.addMaterial(bme,"MeshLambertMaterial"),this.addMaterial(lme,"MeshNormalMaterial"),this.addMaterial(wye,"MeshMatcapMaterial"),this.addMaterial(ime,"LineBasicMaterial"),this.addMaterial(ame,"LineDashedMaterial"),this.addMaterial(Mye,"PointsMaterial"),this.addMaterial(q$,"SpriteMaterial"),this.addMaterial(Dye,"ShadowMaterial"),this.addLight(m_e,ore),this.addLight(j_e,AV),this.addLight(W_e,ure),this.addLight(FI,sI),this.addLight(K_e,RV),this.addLight(Z_e,ire),this.addLight(Q_e,dre),this.addLight(q_e,fxe),this.addLight(Y_e,gxe),this.addToneMapping(_be,R1),this.addToneMapping(vbe,N1),this.addToneMapping(xbe,C1),this.addToneMapping(Ebe,M1),this.addToneMapping(Rbe,I1),this.addToneMapping(Nbe,k1)}}class yxe extends bve{constructor(e={}){let t;e.forceWebGL?t=hB:(t=pxe,e.getFallback=()=>(Ce("WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new hB(e)));const r=new t(e);super(r,e),this.library=new mxe,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}const SE={type:"change"},BI={type:"start"},zI={type:"end"},EB=1e-6,Sn={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},Rb=new $e,El=new $e,bxe=new Z,Nb=new Z,EE=new Z,pd=new ba,TB=new Z,Cb=new Z,TE=new Z,Mb=new Z;class _xe extends av{constructor(e,t=null){super(e,t),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Zr.ROTATE,MIDDLE:Zr.DOLLY,RIGHT:Zr.PAN},this.target=new Z,this.state=Sn.NONE,this.keyState=Sn.NONE,this._lastPosition=new Z,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new Z,this._movePrev=new $e,this._moveCurr=new $e,this._lastAxis=new Z,this._zoomStart=new $e,this._zoomEnd=new $e,this._panStart=new $e,this._panEnd=new $e,this._pointers=[],this._pointerPositions={},this._onPointerMove=xxe.bind(this),this._onPointerDown=vxe.bind(this),this._onPointerUp=Sxe.bind(this),this._onPointerCancel=Exe.bind(this),this._onContextMenu=Mxe.bind(this),this._onMouseWheel=Cxe.bind(this),this._onKeyDown=wxe.bind(this),this._onKeyUp=Txe.bind(this),this._onTouchStart=Ixe.bind(this),this._onTouchMove=kxe.bind(this),this._onTouchEnd=Lxe.bind(this),this._onMouseDown=Axe.bind(this),this._onMouseMove=Rxe.bind(this),this._onMouseUp=Nxe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(t),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>EB&&(this.dispatchEvent(SE),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>EB||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(SE),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Sn.NONE,this.keyState=Sn.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(SE),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(El.copy(this._panEnd).sub(this._panStart),El.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;El.x*=e,El.y*=t}El.multiplyScalar(this._eye.length()*this.panSpeed),Nb.copy(this._eye).cross(this.object.up).setLength(El.x),Nb.add(bxe.copy(this.object.up).setLength(El.y)),this.object.position.add(Nb),this.target.add(Nb),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(El.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){Mb.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=Mb.length();e?(this._eye.copy(this.object.position).sub(this.target),TB.copy(this._eye).normalize(),Cb.copy(this.object.up).normalize(),TE.crossVectors(Cb,TB).normalize(),Cb.setLength(this._moveCurr.y-this._movePrev.y),TE.setLength(this._moveCurr.x-this._movePrev.x),Mb.copy(Cb.add(TE)),EE.crossVectors(Mb,this._eye).normalize(),e*=this.rotateSpeed,pd.setFromAxisAngle(EE,e),this._eye.applyQuaternion(pd),this.object.up.applyQuaternion(pd),this._lastAxis.copy(EE),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),pd.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(pd),this.object.up.applyQuaternion(pd)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Sn.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=c_.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=c_.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return Rb.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),Rb}_getMouseOnCircle(e,t){return Rb.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),Rb}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new $e,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function vxe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function xxe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Sxe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp)))}function Exe(n){this._removePointer(n)}function Txe(){this.enabled!==!1&&(this.keyState=Sn.NONE,window.addEventListener("keydown",this._onKeyDown))}function wxe(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Sn.NONE&&(n.code===this.keys[Sn.ROTATE]&&!this.noRotate?this.keyState=Sn.ROTATE:n.code===this.keys[Sn.ZOOM]&&!this.noZoom?this.keyState=Sn.ZOOM:n.code===this.keys[Sn.PAN]&&!this.noPan&&(this.keyState=Sn.PAN)))}function Axe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Zr.DOLLY:this.state=Sn.ZOOM;break;case Zr.ROTATE:this.state=Sn.ROTATE;break;case Zr.PAN:this.state=Sn.PAN;break;default:this.state=Sn.NONE}const t=this.keyState!==Sn.NONE?this.keyState:this.state;t===Sn.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):t===Sn.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):t===Sn.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(BI)}function Rxe(n){const e=this.keyState!==Sn.NONE?this.keyState:this.state;e===Sn.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===Sn.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===Sn.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function Nxe(){this.state=Sn.NONE,this.dispatchEvent(zI)}function Cxe(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(BI),this.dispatchEvent(zI)}}function Mxe(n){this.enabled!==!1&&n.preventDefault()}function Ixe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=Sn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Sn.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(BI)}function kxe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),t=n.pageX-e.x,r=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+r*r);const i=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(i,s));break}}function Lxe(n){switch(this._pointers.length){case 0:this.state=Sn.NONE;break;case 1:this.state=Sn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Sn.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(zI)}const wB={type:"change"},GI={type:"start"},SH={type:"end"},Ib=new nv,AB=new ua,Dxe=Math.cos(70*c_.DEG2RAD),Ir=new Z,Wi=2*Math.PI,Dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},wE=1e-6;class Oxe extends av{constructor(e,t=null){super(e,t),this.state=Dn.NONE,this.target=new Z,this.cursor=new Z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Zr.ROTATE,MIDDLE:Zr.DOLLY,RIGHT:Zr.PAN},this.touches={ONE:Mo.ROTATE,TWO:Mo.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Z,this._lastQuaternion=new ba,this._lastTargetPosition=new Z,this._quat=new ba().setFromUnitVectors(e.up,new Z(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new AF,this._sphericalDelta=new AF,this._scale=1,this._panOffset=new Z,this._rotateStart=new $e,this._rotateEnd=new $e,this._rotateDelta=new $e,this._panStart=new $e,this._panEnd=new $e,this._panDelta=new $e,this._dollyStart=new $e,this._dollyEnd=new $e,this._dollyDelta=new $e,this._dollyDirection=new Z,this._mouse=new $e,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Fxe.bind(this),this._onPointerDown=Pxe.bind(this),this._onPointerUp=Uxe.bind(this),this._onContextMenu=jxe.bind(this),this._onMouseWheel=Gxe.bind(this),this._onKeyDown=Vxe.bind(this),this._onTouchStart=$xe.bind(this),this._onTouchMove=Hxe.bind(this),this._onMouseDown=Bxe.bind(this),this._onMouseMove=zxe.bind(this),this._interceptControlDown=Wxe.bind(this),this._interceptControlUp=qxe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(wB),this.update(),this.state=Dn.NONE}update(e=null){const t=this.object.position;Ir.copy(t).sub(this.target),Ir.applyQuaternion(this._quat),this._spherical.setFromVector3(Ir),this.autoRotate&&this.state===Dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Wi:r>Math.PI&&(r-=Wi),i<-Math.PI?i+=Wi:i>Math.PI&&(i-=Wi),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Ir.setFromSpherical(this._spherical),Ir.applyQuaternion(this._quatInverse),t.copy(this.target).add(Ir),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Ir.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new Z(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const u=new Z(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(o),this.object.updateMatrixWorld(),a=Ir.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Ib.origin.copy(this.object.position),Ib.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Ib.direction))<Dxe?this.object.lookAt(this.target):(AB.setFromNormalAndCoplanarPoint(this.object.up,this.target),Ib.intersectPlane(AB,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>wE||8*(1-this._lastQuaternion.dot(this.object.quaternion))>wE||this._lastTargetPosition.distanceToSquared(this.target)>wE?(this.dispatchEvent(wB),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Wi/60*this.autoRotateSpeed*e:Wi/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Ir.setFromMatrixColumn(t,0),Ir.multiplyScalar(-e),this._panOffset.add(Ir)}_panUp(e,t){this.screenSpacePanning===!0?Ir.setFromMatrixColumn(t,1):(Ir.setFromMatrixColumn(t,0),Ir.crossVectors(this.object.up,Ir)),Ir.multiplyScalar(e),this._panOffset.add(Ir)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Ir.copy(i).sub(this.target);let s=Ir.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,a=r.width,o=r.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Wi*this._rotateDelta.x/t.clientHeight),this._rotateUp(Wi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Wi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Wi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Wi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Wi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Wi*this._rotateDelta.x/t.clientHeight),this._rotateUp(Wi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new $e,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function Pxe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function Fxe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Uxe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(SH),this.state=Dn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function Bxe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Zr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Dn.DOLLY;break;case Zr.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}break;case Zr.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(GI)}function zxe(n){switch(this.state){case Dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function Gxe(n){this.enabled===!1||this.enableZoom===!1||this.state!==Dn.NONE||(n.preventDefault(),this.dispatchEvent(GI),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(SH))}function Vxe(n){this.enabled!==!1&&this._handleKeyDown(n)}function $xe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Mo.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Dn.TOUCH_ROTATE;break;case Mo.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Dn.TOUCH_PAN;break;default:this.state=Dn.NONE}break;case 2:switch(this.touches.TWO){case Mo.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Dn.TOUCH_DOLLY_PAN;break;case Mo.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Dn.TOUCH_DOLLY_ROTATE;break;default:this.state=Dn.NONE}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(GI)}function Hxe(n){switch(this._trackPointer(n),this.state){case Dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Dn.NONE}}function jxe(n){this.enabled!==!1&&n.preventDefault()}function Wxe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function qxe(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Xxe={type:"change"},RB=1e-6,NB=new ba;class Yxe extends av{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new Z(0,0,0),this._rotationVector=new Z(0,0,0),this._lastQuaternion=new ba,this._lastPosition=new Z,this._status=0,this._onKeyDown=Kxe.bind(this),this._onKeyUp=Zxe.bind(this),this._onPointerMove=Jxe.bind(this),this._onPointerDown=Qxe.bind(this),this._onPointerUp=eSe.bind(this),this._onPointerCancel=tSe.bind(this),this._onContextMenu=nSe.bind(this),t!==null&&this.connect(t)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,r=e*this.movementSpeed,i=e*this.rollSpeed;t.translateX(this._moveVector.x*r),t.translateY(this._moveVector.y*r),t.translateZ(this._moveVector.z*r),NB.set(this._rotationVector.x*i,this._rotationVector.y*i,this._rotationVector.z*i,1).normalize(),t.quaternion.multiply(NB),(this._lastPosition.distanceToSquared(t.position)>RB||8*(1-this._lastQuaternion.dot(t.quaternion))>RB)&&(this.dispatchEvent(Xxe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function Kxe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function Zxe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function Qxe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function Jxe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,r=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(n.pageY-e.offset[1]-r)/r,this._updateRotationVector()}}function eSe(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function tSe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function nSe(n){this.enabled!==!1&&n.preventDefault()}const rSe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class wv{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const iSe=new $h(-1,1,1,-1,0,1);class sSe extends jr{constructor(){super(),this.setAttribute("position",new ur([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ur([0,2,0,0,2,0],2))}}const aSe=new sSe;class oSe{constructor(e){this._mesh=new wr(aSe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,iSe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class lSe extends wv{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Hs?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=mV.clone(e.uniforms),this.material=new Hs({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new oSe(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class CB extends wv{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class uSe extends wv{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class cSe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const r=e.getSize(new $e);this._width=r.width,this._height=r.height,t=new ga(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:tr}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new lSe(rSe),this.copyPass.material.blending=Pi,this.clock=new CV}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),a.needsSwap){if(r){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}CB!==void 0&&(a instanceof CB?r=!0:a instanceof uSe&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new $e);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class dSe extends wv{constructor(e,t,r=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this.isRenderPass=!0,this._oldClearColor=new Et}render(e,t,r){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}function hSe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,cg(n,e)}function pSe(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function EH(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EH=function(){return!!n})()}function fSe(n,e,t){if(EH())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return t&&cg(i,t.prototype),i}function uw(n){var e=typeof Map=="function"?new Map:void 0;return uw=function(r){if(r===null||!pSe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return fSe(r,arguments,xT(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),cg(i,r)},uw(n)}var $a=(function(n){hSe(e,n);function e(t){var r;return r=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,gee(r)}return e})(uw(Error));function AE(n){return Math.round(n*255)}function gSe(n,e,t){return AE(n)+","+AE(e)+","+AE(t)}function A_(n,e,t,r){if(r===void 0&&(r=gSe),e===0)return r(t,t,t);var i=(n%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,a=s*(1-Math.abs(i%2-1)),o=0,l=0,u=0;i>=0&&i<1?(o=s,l=a):i>=1&&i<2?(o=a,l=s):i>=2&&i<3?(l=s,u=a):i>=3&&i<4?(l=a,u=s):i>=4&&i<5?(o=a,u=s):i>=5&&i<6&&(o=s,u=a);var c=t-s/2,h=o+c,f=l+c,g=u+c;return r(h,f,g)}var MB={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function mSe(n){if(typeof n!="string")return n;var e=n.toLowerCase();return MB[e]?"#"+MB[e]:n}var ySe=/^#[a-fA-F0-9]{6}$/,bSe=/^#[a-fA-F0-9]{8}$/,_Se=/^#[a-fA-F0-9]{3}$/,vSe=/^#[a-fA-F0-9]{4}$/,RE=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,xSe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,SSe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ESe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Ah(n){if(typeof n!="string")throw new $a(3);var e=mSe(n);if(e.match(ySe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(bSe)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(_Se))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(vSe)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=RE.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var s=xSe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=SSe.exec(e);if(a){var o=parseInt(""+a[1],10),l=parseInt(""+a[2],10)/100,u=parseInt(""+a[3],10)/100,c="rgb("+A_(o,l,u)+")",h=RE.exec(c);if(!h)throw new $a(4,e,c);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var f=ESe.exec(e.substring(0,50));if(f){var g=parseInt(""+f[1],10),m=parseInt(""+f[2],10)/100,v=parseInt(""+f[3],10)/100,_="rgb("+A_(g,m,v)+")",b=RE.exec(_);if(!b)throw new $a(4,e,_);return{red:parseInt(""+b[1],10),green:parseInt(""+b[2],10),blue:parseInt(""+b[3],10),alpha:parseFloat(""+f[4])>1?parseFloat(""+f[4])/100:parseFloat(""+f[4])}}throw new $a(5)}function TSe(n){var e=n.red/255,t=n.green/255,r=n.blue/255,i=Math.max(e,t,r),s=Math.min(e,t,r),a=(i+s)/2;if(i===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:n.alpha}:{hue:0,saturation:0,lightness:a};var o,l=i-s,u=a>.5?l/(2-i-s):l/(i+s);switch(i){case e:o=(t-r)/l+(t<r?6:0);break;case t:o=(r-e)/l+2;break;default:o=(e-t)/l+4;break}return o*=60,n.alpha!==void 0?{hue:o,saturation:u,lightness:a,alpha:n.alpha}:{hue:o,saturation:u,lightness:a}}function Yl(n){return TSe(Ah(n))}var wSe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},cw=wSe;function Nu(n){var e=n.toString(16);return e.length===1?"0"+e:e}function NE(n){return Nu(Math.round(n*255))}function ASe(n,e,t){return cw("#"+NE(n)+NE(e)+NE(t))}function TH(n,e,t){return A_(n,e,t,ASe)}function RSe(n,e,t){if(typeof n=="object"&&e===void 0&&t===void 0)return TH(n.hue,n.saturation,n.lightness);throw new $a(1)}function NSe(n,e,t,r){if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?TH(n.hue,n.saturation,n.lightness):"rgba("+A_(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new $a(2)}function wH(n,e,t){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number")return cw("#"+Nu(n)+Nu(e)+Nu(t));if(typeof n=="object"&&e===void 0&&t===void 0)return cw("#"+Nu(n.red)+Nu(n.green)+Nu(n.blue));throw new $a(6)}function Av(n,e,t,r){if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?wH(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")";throw new $a(7)}var CSe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},MSe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},ISe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},kSe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function Kl(n){if(typeof n!="object")throw new $a(8);if(MSe(n))return Av(n);if(CSe(n))return wH(n);if(kSe(n))return NSe(n);if(ISe(n))return RSe(n);throw new $a(8)}function AH(n,e,t){return function(){var i=t.concat(Array.prototype.slice.call(arguments));return i.length>=e?n.apply(this,i):AH(n,e,i)}}function ws(n){return AH(n,n.length,[])}function LSe(n,e){if(e==="transparent")return e;var t=Yl(e);return Kl(Ui({},t,{hue:t.hue+parseFloat(n)}))}ws(LSe);function Jh(n,e,t){return Math.max(n,Math.min(e,t))}function DSe(n,e){if(e==="transparent")return e;var t=Yl(e);return Kl(Ui({},t,{lightness:Jh(0,1,t.lightness-parseFloat(n))}))}ws(DSe);function OSe(n,e){if(e==="transparent")return e;var t=Yl(e);return Kl(Ui({},t,{saturation:Jh(0,1,t.saturation-parseFloat(n))}))}ws(OSe);function PSe(n,e){if(e==="transparent")return e;var t=Yl(e);return Kl(Ui({},t,{lightness:Jh(0,1,t.lightness+parseFloat(n))}))}ws(PSe);function FSe(n,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(n===0)return t;var r=Ah(e),i=Ui({},r,{alpha:typeof r.alpha=="number"?r.alpha:1}),s=Ah(t),a=Ui({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),o=i.alpha-a.alpha,l=parseFloat(n)*2-1,u=l*o===-1?l:l+o,c=1+l*o,h=(u/c+1)/2,f=1-h,g={red:Math.floor(i.red*h+a.red*f),green:Math.floor(i.green*h+a.green*f),blue:Math.floor(i.blue*h+a.blue*f),alpha:i.alpha*parseFloat(n)+a.alpha*(1-parseFloat(n))};return Av(g)}var USe=ws(FSe),RH=USe;function BSe(n,e){if(e==="transparent")return e;var t=Ah(e),r=typeof t.alpha=="number"?t.alpha:1,i=Ui({},t,{alpha:Jh(0,1,(r*100+parseFloat(n)*100)/100)});return Av(i)}var zSe=ws(BSe),GSe=zSe;function VSe(n,e){if(e==="transparent")return e;var t=Yl(e);return Kl(Ui({},t,{saturation:Jh(0,1,t.saturation+parseFloat(n))}))}ws(VSe);function $Se(n,e){return e==="transparent"?e:Kl(Ui({},Yl(e),{hue:parseFloat(n)}))}ws($Se);function HSe(n,e){return e==="transparent"?e:Kl(Ui({},Yl(e),{lightness:parseFloat(n)}))}ws(HSe);function jSe(n,e){return e==="transparent"?e:Kl(Ui({},Yl(e),{saturation:parseFloat(n)}))}ws(jSe);function WSe(n,e){return e==="transparent"?e:RH(parseFloat(n),"rgb(0, 0, 0)",e)}ws(WSe);function qSe(n,e){return e==="transparent"?e:RH(parseFloat(n),"rgb(255, 255, 255)",e)}ws(qSe);function XSe(n,e){if(e==="transparent")return e;var t=Ah(e),r=typeof t.alpha=="number"?t.alpha:1,i=Ui({},t,{alpha:Jh(0,1,+(r*100-parseFloat(n)*100).toFixed(2)/100)});return Av(i)}ws(XSe);var Yu=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Yu.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Yu.Bounce.In(n*2)*.5:Yu.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Af=function(){return performance.now()},NH=(function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,s=t;i<s.length;i++){var a=s[i];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e;r<i.length;r++){var s=i[r];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,t){e===void 0&&(e=Af()),t===void 0&&(t=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var s=this._tweens[r[i]],a=!t;s&&s.update(e,a)===!1&&!t&&this.remove(s)}r=Object.keys(this._tweensAddedDuringUpdate)}},n})(),dw={Linear:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),s=dw.Utils.Linear;return e<0?s(n[0],n[1],r):e>1?s(n[t],n[t-1],t-r):s(n[i],n[i+1>t?t:i+1],r-i)},Utils:{Linear:function(n,e,t){return(e-n)*t+n}}},CH=(function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n})(),hw=new NH,IB=(function(){function n(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Yu.Linear.None,this._interpolationFunction=dw.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=CH.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=hw,hw.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,t){if(e===void 0&&(e=Af()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,t,r,i,s){for(var a in r){var o=e[a],l=Array.isArray(o),u=l?"array":typeof o,c=!l&&Array.isArray(r[a]);if(!(u==="undefined"||u==="function")){if(c){var h=r[a];if(h.length===0)continue;for(var f=[o],g=0,m=h.length;g<m;g+=1){var v=this._handleRelativeValue(o,h[g]);if(isNaN(v)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(v)}c&&(r[a]=f)}if((u==="object"||l)&&o&&!c){t[a]=l?[]:{};var _=o;for(var b in _)t[a][b]=_[b];i[a]=l?[]:{};var h=r[a];if(!this._isDynamic){var S={};for(var b in h)S[b]=h[b];r[a]=h=S}this._setupProperties(_,t[a],h,i[a],s)}else(typeof t[a]>"u"||s)&&(t[a]=o),l||(t[a]*=1),c?i[a]=r[a].slice().reverse():i[a]=t[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Af()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Af()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Yu.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=dw.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){var r=this,i;if(e===void 0&&(e=Af()),t===void 0&&(t=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,o=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*o,u=function(){if(r._duration===0||a>l)return 1;var v=Math.trunc(a/o),_=a-v*o,b=Math.min(_/r._duration,1);return b===0&&a===r._duration?1:b},c=u(),h=this._easingFunction(c);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,c),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/o)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=o*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var g=0,m=this._chainedTweens.length;g<m;g++)this._chainedTweens[g].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,r,i){for(var s in r)if(t[s]!==void 0){var a=t[s]||0,o=r[s],l=Array.isArray(e[s]),u=Array.isArray(o),c=!l&&u;c?e[s]=this._interpolationFunction(o,i):typeof o=="object"&&o?this._updateProperties(e[s],a,o,i):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*i))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n.autoStartOnUpdate=!1,n})();CH.nextId;var to=hw;to.getAll.bind(to);to.removeAll.bind(to);to.add.bind(to);to.remove.bind(to);to.update.bind(to);var pw="http://www.w3.org/1999/xhtml";const kB={svg:"http://www.w3.org/2000/svg",xhtml:pw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function MH(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),kB.hasOwnProperty(e)?{space:kB[e],local:n}:n}function YSe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===pw&&e.documentElement.namespaceURI===pw?e.createElement(n):e.createElementNS(t,n)}}function KSe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function IH(n){var e=MH(n);return(e.local?KSe:YSe)(e)}function ZSe(){}function kH(n){return n==null?ZSe:function(){return this.querySelector(n)}}function QSe(n){typeof n!="function"&&(n=kH(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=n.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new Ws(r,this._parents)}function JSe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function e0e(){return[]}function t0e(n){return n==null?e0e:function(){return this.querySelectorAll(n)}}function n0e(n){return function(){return JSe(n.apply(this,arguments))}}function r0e(n){typeof n=="function"?n=n0e(n):n=t0e(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(n.call(l,l.__data__,u,a)),i.push(l));return new Ws(r,i)}function i0e(n){return function(){return this.matches(n)}}function LH(n){return function(e){return e.matches(n)}}var s0e=Array.prototype.find;function a0e(n){return function(){return s0e.call(this.children,n)}}function o0e(){return this.firstElementChild}function l0e(n){return this.select(n==null?o0e:a0e(typeof n=="function"?n:LH(n)))}var u0e=Array.prototype.filter;function c0e(){return Array.from(this.children)}function d0e(n){return function(){return u0e.call(this.children,n)}}function h0e(n){return this.selectAll(n==null?c0e:d0e(typeof n=="function"?n:LH(n)))}function p0e(n){typeof n!="function"&&(n=i0e(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&o.push(l);return new Ws(r,this._parents)}function DH(n){return new Array(n.length)}function f0e(){return new Ws(this._enter||this._groups.map(DH),this._parents)}function R_(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}R_.prototype={constructor:R_,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function g0e(n){return function(){return n}}function m0e(n,e,t,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):t[a]=new R_(n,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function y0e(n,e,t,r,i,s,a){var o,l,u=new Map,c=e.length,h=s.length,f=new Array(c),g;for(o=0;o<c;++o)(l=e[o])&&(f[o]=g=a.call(l,l.__data__,o,e)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<h;++o)g=a.call(n,s[o],o,s)+"",(l=u.get(g))?(r[o]=l,l.__data__=s[o],u.delete(g)):t[o]=new R_(n,s[o]);for(o=0;o<c;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function b0e(n){return n.__data__}function _0e(n,e){if(!arguments.length)return Array.from(this,b0e);var t=e?y0e:m0e,r=this._parents,i=this._groups;typeof n!="function"&&(n=g0e(n));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],f=h.length,g=v0e(n.call(c,c&&c.__data__,u,r)),m=g.length,v=o[u]=new Array(m),_=a[u]=new Array(m),b=l[u]=new Array(f);t(c,h,v,_,b,g,e);for(var S=0,E=0,A,R;S<m;++S)if(A=v[S]){for(S>=E&&(E=S+1);!(R=_[E])&&++E<m;);A._next=R||null}}return a=new Ws(a,r),a._enter=o,a._exit=l,a}function v0e(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function x0e(){return new Ws(this._exit||this._groups.map(DH),this._parents)}function S0e(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function E0e(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=t[l],c=r[l],h=u.length,f=o[l]=new Array(h),g,m=0;m<h;++m)(g=u[m]||c[m])&&(f[m]=g);for(;l<i;++l)o[l]=t[l];return new Ws(o,this._parents)}function T0e(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function w0e(n){n||(n=A0e);function e(h,f){return h&&f?n(h.__data__,f.__data__):!h-!f}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var a=t[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new Ws(i,this._parents).order()}function A0e(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function R0e(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function N0e(){return Array.from(this)}function C0e(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function M0e(){let n=0;for(const e of this)++n;return n}function I0e(){return!this.node()}function k0e(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,a=i.length,o;s<a;++s)(o=i[s])&&n.call(o,o.__data__,s,i);return this}function L0e(n){return function(){this.removeAttribute(n)}}function D0e(n){return function(){this.removeAttributeNS(n.space,n.local)}}function O0e(n,e){return function(){this.setAttribute(n,e)}}function P0e(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function F0e(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function U0e(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function B0e(n,e){var t=MH(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?D0e:L0e:typeof e=="function"?t.local?U0e:F0e:t.local?P0e:O0e)(t,e))}function OH(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function z0e(n){return function(){this.style.removeProperty(n)}}function G0e(n,e,t){return function(){this.style.setProperty(n,e,t)}}function V0e(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function $0e(n,e,t){return arguments.length>1?this.each((e==null?z0e:typeof e=="function"?V0e:G0e)(n,e,t??"")):H0e(this.node(),n)}function H0e(n,e){return n.style.getPropertyValue(e)||OH(n).getComputedStyle(n,null).getPropertyValue(e)}function j0e(n){return function(){delete this[n]}}function W0e(n,e){return function(){this[n]=e}}function q0e(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function X0e(n,e){return arguments.length>1?this.each((e==null?j0e:typeof e=="function"?q0e:W0e)(n,e)):this.node()[n]}function PH(n){return n.trim().split(/^|\s+/)}function VI(n){return n.classList||new FH(n)}function FH(n){this._node=n,this._names=PH(n.getAttribute("class")||"")}FH.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function UH(n,e){for(var t=VI(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function BH(n,e){for(var t=VI(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Y0e(n){return function(){UH(this,n)}}function K0e(n){return function(){BH(this,n)}}function Z0e(n,e){return function(){(e.apply(this,arguments)?UH:BH)(this,n)}}function Q0e(n,e){var t=PH(n+"");if(arguments.length<2){for(var r=VI(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?Z0e:e?Y0e:K0e)(t,e))}function J0e(){this.textContent=""}function eEe(n){return function(){this.textContent=n}}function tEe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function nEe(n){return arguments.length?this.each(n==null?J0e:(typeof n=="function"?tEe:eEe)(n)):this.node().textContent}function rEe(){this.innerHTML=""}function iEe(n){return function(){this.innerHTML=n}}function sEe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function aEe(n){return arguments.length?this.each(n==null?rEe:(typeof n=="function"?sEe:iEe)(n)):this.node().innerHTML}function oEe(){this.nextSibling&&this.parentNode.appendChild(this)}function lEe(){return this.each(oEe)}function uEe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cEe(){return this.each(uEe)}function dEe(n){var e=typeof n=="function"?n:IH(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function hEe(){return null}function pEe(n,e){var t=typeof n=="function"?n:IH(n),r=e==null?hEe:typeof e=="function"?e:kH(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function fEe(){var n=this.parentNode;n&&n.removeChild(this)}function gEe(){return this.each(fEe)}function mEe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function yEe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function bEe(n){return this.select(n?yEe:mEe)}function _Ee(n){return arguments.length?this.property("__data__",n):this.node().__data__}function vEe(n){return function(e){n.call(this,e,this.__data__)}}function xEe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function SEe(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function EEe(n,e,t){return function(){var r=this.__on,i,s=vEe(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function TEe(n,e,t){var r=xEe(n+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?EEe:SEe,i=0;i<s;++i)this.each(o(r[i],e,t));return this}function zH(n,e,t){var r=OH(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function wEe(n,e){return function(){return zH(this,n,e)}}function AEe(n,e){return function(){return zH(this,n,e.apply(this,arguments))}}function REe(n,e){return this.each((typeof e=="function"?AEe:wEe)(n,e))}function*NEe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var CEe=[null];function Ws(n,e){this._groups=n,this._parents=e}function MEe(){return this}Ws.prototype={constructor:Ws,select:QSe,selectAll:r0e,selectChild:l0e,selectChildren:h0e,filter:p0e,data:_0e,enter:f0e,exit:x0e,join:S0e,merge:E0e,selection:MEe,order:T0e,sort:w0e,call:R0e,nodes:N0e,node:C0e,size:M0e,empty:I0e,each:k0e,attr:B0e,style:$0e,property:X0e,classed:Q0e,text:nEe,html:aEe,raise:lEe,lower:cEe,append:dEe,insert:pEe,remove:gEe,clone:bEe,datum:_Ee,on:TEe,dispatch:REe,[Symbol.iterator]:NEe};function IEe(n){return typeof n=="string"?new Ws([[document.querySelector(n)]],[document.documentElement]):new Ws([[n]],CEe)}function kEe(n){let e;for(;e=n.sourceEvent;)n=e;return n}function LEe(n,e){if(n=kEe(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}var pm,nr,GH,VH,Ou,LB,$H,HH,jH,$I,fw,gw,Ig={},WH=[],DEe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Rv=Array.isArray;function Ha(n,e){for(var t in e)n[t]=e[t];return n}function HI(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function OEe(n,e,t){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?pm.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)a[s]===void 0&&(a[s]=n.defaultProps[s]);return Zf(n,a,r,i,null)}function Zf(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++GH,__i:-1,__u:0};return i==null&&nr.vnode!=null&&nr.vnode(s),s}function Nv(n){return n.children}function Zb(n,e){this.props=n,this.context=e}function Rh(n,e){if(e==null)return n.__?Rh(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Rh(n):null}function qH(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return qH(n)}}function DB(n){(!n.__d&&(n.__d=!0)&&Ou.push(n)&&!N_.__r++||LB!=nr.debounceRendering)&&((LB=nr.debounceRendering)||$H)(N_)}function N_(){for(var n,e,t,r,i,s,a,o=1;Ou.length;)Ou.length>o&&Ou.sort(HH),n=Ou.shift(),o=Ou.length,n.__d&&(t=void 0,r=void 0,i=(r=(e=n).__v).__e,s=[],a=[],e.__P&&((t=Ha({},r)).__v=r.__v+1,nr.vnode&&nr.vnode(t),jI(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,s,i??Rh(r),!!(32&r.__u),a),t.__v=r.__v,t.__.__k[t.__i]=t,KH(s,t,a),r.__e=r.__=null,t.__e!=i&&qH(t)));N_.__r=0}function XH(n,e,t,r,i,s,a,o,l,u,c){var h,f,g,m,v,_,b,S=r&&r.__k||WH,E=e.length;for(l=PEe(t,e,S,l,E),h=0;h<E;h++)(g=t.__k[h])!=null&&(f=g.__i==-1?Ig:S[g.__i]||Ig,g.__i=h,_=jI(n,g,f,i,s,a,o,l,u,c),m=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&WI(f.ref,null,g),c.push(g.ref,g.__c||m,g)),v==null&&m!=null&&(v=m),(b=!!(4&g.__u))||f.__k===g.__k?l=YH(g,l,n,b):typeof g.type=="function"&&_!==void 0?l=_:m&&(l=m.nextSibling),g.__u&=-7);return t.__e=v,l}function PEe(n,e,t,r,i){var s,a,o,l,u,c=t.length,h=c,f=0;for(n.__k=new Array(i),s=0;s<i;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[s]=Zf(null,a,null,null,null):Rv(a)?a=n.__k[s]=Zf(Nv,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=n.__k[s]=Zf(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[s]=a,l=s+f,a.__=n,a.__b=n.__b+1,(u=a.__i=FEe(a,t,l,h))!=-1&&(h--,(o=t[u])&&(o.__u|=2)),o==null||o.__v==null?(u==-1&&(i>c?f--:i<c&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,a.__u|=4))):n.__k[s]=null;if(h)for(s=0;s<c;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==r&&(r=Rh(o)),QH(o,o));return r}function YH(n,e,t,r){var i,s;if(typeof n.type=="function"){for(i=n.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=n,e=YH(i[s],e,t,r));return e}n.__e!=e&&(r&&(e&&n.type&&!e.parentNode&&(e=Rh(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function FEe(n,e,t,r){var i,s,a,o=n.key,l=n.type,u=e[t],c=u!=null&&(2&u.__u)==0;if(u===null&&o==null||c&&o==u.key&&l==u.type)return t;if(r>(c?1:0)){for(i=t-1,s=t+1;i>=0||s<e.length;)if((u=e[a=i>=0?i--:s++])!=null&&(2&u.__u)==0&&o==u.key&&l==u.type)return a}return-1}function OB(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||DEe.test(e)?t:t+"px"}function kb(n,e,t,r,i){var s,a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||OB(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||OB(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(jH,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r?t.u=r.u:(t.u=$I,n.addEventListener(e,s?gw:fw,s)):n.removeEventListener(e,s?gw:fw,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function PB(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=$I++;else if(e.t<t.u)return;return t(nr.event?nr.event(e):e)}}}function jI(n,e,t,r,i,s,a,o,l,u){var c,h,f,g,m,v,_,b,S,E,A,R,w,M,I,C,k,O=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[o=e.__e=t.__e]),(c=nr.__b)&&c(e);e:if(typeof O=="function")try{if(b=e.props,S="prototype"in O&&O.prototype.render,E=(c=O.contextType)&&r[c.__c],A=c?E?E.props.value:c.__:r,t.__c?_=(h=e.__c=t.__c).__=h.__E:(S?e.__c=h=new O(b,A):(e.__c=h=new Zb(b,A),h.constructor=O,h.render=BEe),E&&E.sub(h),h.state||(h.state={}),h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),S&&h.__s==null&&(h.__s=h.state),S&&O.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Ha({},h.__s)),Ha(h.__s,O.getDerivedStateFromProps(b,h.__s))),g=h.props,m=h.state,h.__v=e,f)S&&O.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),S&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(S&&O.getDerivedStateFromProps==null&&b!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,A),e.__v==t.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,A)===!1){for(e.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(z){z&&(z.__=e)}),R=0;R<h._sb.length;R++)h.__h.push(h._sb[R]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,A),S&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,m,v)})}if(h.context=A,h.props=b,h.__P=n,h.__e=!1,w=nr.__r,M=0,S){for(h.state=h.__s,h.__d=!1,w&&w(e),c=h.render(h.props,h.state,h.context),I=0;I<h._sb.length;I++)h.__h.push(h._sb[I]);h._sb=[]}else do h.__d=!1,w&&w(e),c=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++M<25);h.state=h.__s,h.getChildContext!=null&&(r=Ha(Ha({},r),h.getChildContext())),S&&!f&&h.getSnapshotBeforeUpdate!=null&&(v=h.getSnapshotBeforeUpdate(g,m)),C=c,c!=null&&c.type===Nv&&c.key==null&&(C=ZH(c.props.children)),o=XH(n,Rv(C)?C:[C],e,t,r,i,s,a,o,l,u),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),_&&(h.__E=h.__=null)}catch(z){if(e.__v=null,l||s!=null)if(z.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else{for(k=s.length;k--;)HI(s[k]);mw(e)}else e.__e=t.__e,e.__k=t.__k,z.then||mw(e);nr.__e(z,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=UEe(t.__e,e,t,r,i,s,a,l,u);return(c=nr.diffed)&&c(e),128&e.__u?void 0:o}function mw(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(mw)}function KH(n,e,t){for(var r=0;r<t.length;r++)WI(t[r],t[++r],t[++r]);nr.__c&&nr.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(s){s.call(i)})}catch(s){nr.__e(s,i.__v)}})}function ZH(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Rv(n)?n.map(ZH):Ha({},n)}function UEe(n,e,t,r,i,s,a,o,l){var u,c,h,f,g,m,v,_=t.props||Ig,b=e.props,S=e.type;if(S=="svg"?i="http://www.w3.org/2000/svg":S=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((g=s[u])&&"setAttribute"in g==!!S&&(S?g.localName==S:g.nodeType==3)){n=g,s[u]=null;break}}if(n==null){if(S==null)return document.createTextNode(b);n=document.createElementNS(i,S,b.is&&b),o&&(nr.__m&&nr.__m(e,s),o=!1),s=null}if(S==null)_===b||o&&n.data==b||(n.data=b);else{if(s=s&&pm.call(n.childNodes),!o&&s!=null)for(_={},u=0;u<n.attributes.length;u++)_[(g=n.attributes[u]).name]=g.value;for(u in _)if(g=_[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=g;else if(!(u in b)){if(u=="value"&&"defaultValue"in b||u=="checked"&&"defaultChecked"in b)continue;kb(n,u,null,g,i)}}for(u in b)g=b[u],u=="children"?f=g:u=="dangerouslySetInnerHTML"?c=g:u=="value"?m=g:u=="checked"?v=g:o&&typeof g!="function"||_[u]===g||kb(n,u,g,_[u],i);if(c)o||h&&(c.__html==h.__html||c.__html==n.innerHTML)||(n.innerHTML=c.__html),e.__k=[];else if(h&&(n.innerHTML=""),XH(e.type=="template"?n.content:n,Rv(f)?f:[f],e,t,r,S=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:t.__k&&Rh(t,0),o,l),s!=null)for(u=s.length;u--;)HI(s[u]);o||(u="value",S=="progress"&&m==null?n.removeAttribute("value"):m!=null&&(m!==n[u]||S=="progress"&&!m||S=="option"&&m!=_[u])&&kb(n,u,m,_[u],i),u="checked",v!=null&&v!=n[u]&&kb(n,u,v,_[u],i))}return n}function WI(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){nr.__e(i,t)}}function QH(n,e,t){var r,i;if(nr.unmount&&nr.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||WI(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){nr.__e(s,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&QH(r[i],e,t||typeof n.type!="function");t||HI(n.__e),n.__c=n.__=n.__e=void 0}function BEe(n,e,t){return this.constructor(n,t)}function zEe(n,e,t){var r,i,s,a;e==document&&(e=document.documentElement),nr.__&&nr.__(n,e),i=(r=!1)?null:e.__k,s=[],a=[],jI(e,n=e.__k=OEe(Nv,null,[n]),i||Ig,Ig,e.namespaceURI,i?null:e.firstChild?pm.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,a),KH(s,n,a)}function JH(n,e,t){var r,i,s,a,o=Ha({},n.props);for(s in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?pm.call(arguments,2):t),Zf(n.type,o,r||n.key,i||n.ref,null)}pm=WH.slice,nr={__e:function(n,e,t,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),a=i.__d),a)return i.__E=i}catch(o){n=o}throw n}},GH=0,VH=function(n){return n!=null&&n.constructor==null},Zb.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ha({},this.state),typeof n=="function"&&(n=n(Ha({},t),this.props)),n&&Ha(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),DB(this))},Zb.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),DB(this))},Zb.prototype.render=Nv,Ou=[],$H=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,HH=function(n,e){return n.__v.__b-e.__v.__b},N_.__r=0,jH=/(PointerCapture)$|Capture$/i,$I=0,fw=PB(!1),gw=PB(!0);function FB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function GEe(n){if(Array.isArray(n))return n}function VEe(n,e,t){return(e=XEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Ee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function HEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jEe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(t),!0).forEach(function(r){VEe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):UB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WEe(n,e){return GEe(n)||$Ee(n,e)||YEe(n,e)||HEe()}function qEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XEe(n){var e=qEe(n,"string");return typeof e=="symbol"?e:e+""}function C_(n){"@babel/helpers - typeof";return C_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C_(n)}function YEe(n,e){if(n){if(typeof n=="string")return FB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FB(n,e):void 0}}var yw=function(e){if(C_(e)!=="object")return e;var t=JH(e);if(t.props){var r;t.props=jEe({},t.props),t!=null&&(r=t.props)!==null&&r!==void 0&&r.children&&(t.props.children=Array.isArray(t.props.children)?t.props.children.map(yw):yw(t.props.children))}return t},KEe=function(e){return VH(JH(e))},ZEe=function(e,t){delete t.__k,zEe(yw(e),t)};function QEe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var JEe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;QEe(JEe);var eTe=cv({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.style,s=i===void 0?{}:i,a=!!e&&C_(e)==="object"&&!!e.node&&typeof e.node=="function",o=IEe(a?e.node():e);o.style("position")==="static"&&o.style("position","relative"),t.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(u){var c=WEe(u,2),h=c[0],f=c[1];return t.tooltipEl.style(h,f)}),t.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));t.mouseInside=!1,o.on("mousemove.".concat(l),function(u){t.mouseInside=!0;var c=LEe(u),h=o.node(),f=h.offsetWidth,g=h.offsetHeight,m=[t.offsetX===null||t.offsetX===void 0?"-".concat(c[0]/f*100,"%"):typeof t.offsetX=="number"?"calc(-50% + ".concat(t.offsetX,"px)"):t.offsetX,t.offsetY===null||t.offsetY===void 0?g>130&&g-c[1]<100?"calc(-100% - 6px)":"21px":typeof t.offsetY=="number"?t.offsetY<0?"calc(-100% - ".concat(Math.abs(t.offsetY),"px)"):"".concat(t.offsetY,"px"):t.offsetY];t.tooltipEl.style("left",c[0]+"px").style("top",c[1]+"px").style("transform","translate(".concat(m.join(","),")")),t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(l),function(){t.mouseInside=!0,t.content&&t.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(l),function(){t.mouseInside=!1,t.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):KEe(e.content)?(e.tooltipEl.text(""),ZEe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function tTe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var nTe=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;tTe(nTe);function bw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rTe(n){if(Array.isArray(n))return n}function iTe(n){if(Array.isArray(n))return bw(n)}function sTe(n,e,t){return(e=hTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oTe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function lTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cTe(n,e){return rTe(n)||oTe(n,e)||ej(n,e)||lTe()}function Tu(n){return iTe(n)||aTe(n)||ej(n)||uTe()}function dTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hTe(n){var e=dTe(n,"string");return typeof e=="symbol"?e:e+""}function ej(n,e){if(n){if(typeof n=="string")return bw(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bw(n,e):void 0}}var Qn=window.THREE?window.THREE:{WebGLRenderer:lle,Scene:rv,PerspectiveCamera:$r,Raycaster:MV,SRGBColorSpace:Ci,TextureLoader:rre,Vector2:$e,Vector3:Z,Box3:pc,Color:Et,Mesh:wr,SphereGeometry:om,MeshBasicMaterial:za,BackSide:On,Clock:CV},tj=cv({props:{width:{default:window.innerWidth,onChange:function(e,t,r){isNaN(e)&&(t.width=r)}},height:{default:window.innerHeight,onChange:function(e,t,r){isNaN(e)&&(t.height=r)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.tooltip&&t.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.enabled&&e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(a){return a.render(e.scene,e.camera)});var t=+new Date;if(e.enablePointerInteraction&&t-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=t;var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&i.sort(function(a,o){return e.hoverOrderComparator(a.object,o.object)});var s=i.find(function(a){return e.hoverFilter(a.object)})||null;r=s?s.object:null,e.intersection=s||null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj,e.intersection),e.tooltip.content(r&&on(e.tooltipContent)(r,e.intersection)||null),e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,r=t.x,i=t.y;return{x:r,y:i}},cameraPosition:function(e,t,r,i){var s=e.camera;if(t&&e.initialised){var a=t,o=r||{x:0,y:0,z:0};if(!i)c(a),h(o);else{var l=Object.assign({},s.position),u=f();e.tweenGroup.add(new IB(l).to(a,i).easing(Yu.Quadratic.Out).onUpdate(c).start()),e.tweenGroup.add(new IB(u).to(o,i/3).easing(Yu.Quadratic.Out).onUpdate(h).start())}return this}return Object.assign({},s.position,{lookAt:f()});function c(g){var m=g.x,v=g.y,_=g.z;m!==void 0&&(s.position.x=m),v!==void 0&&(s.position.y=v),_!==void 0&&(s.position.z=_)}function h(g){var m=new Qn.Vector3(g.x,g.y,g.z);e.controls.enabled&&e.controls.target?e.controls.target=m:s.lookAt(m)}function f(){return Object.assign(new Qn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,s=new Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),t,r)},fitToBbox:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var a=new Qn.Vector3(0,0,0),o=Math.max.apply(Math,Tu(Object.entries(t).map(function(g){var m=cTe(g,2),v=m[0],_=m[1];return Math.max.apply(Math,Tu(_.map(function(b){return Math.abs(a[v]-b)})))})))*2,l=(1-i*2/e.height)*s.fov,u=o/Math.atan(l*Math.PI/180),c=u/s.aspect,h=Math.max(u,c);if(h>0){var f=a.clone().sub(s.position).normalize().multiplyScalar(-h);this.cameraPosition(f,a,r)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=new Qn.Box3(new Qn.Vector3(0,0,0),new Qn.Vector3(0,0,0)),i=e.objects.filter(t);return i.length?(i.forEach(function(s){return r.expandByObject(s)}),Object.assign.apply(Object,Tu(["x","y","z"].map(function(s){return sTe({},s,[r.min[s],r.max[s]])})))):null},getScreenCoords:function(e,t,r,i){var s=new Qn.Vector3(t,r,i);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Qn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),a=new Qn.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(i,new Qn.Vector3))},intersectingObjects:function(e,t,r){var i=new Qn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),s=new Qn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.params.Points.threshold=e.pointsHoverPrecision,s.setFromCamera(i,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Qn.Scene,camera:new Qn.PerspectiveCamera,clock:new Qn.Clock,tweenGroup:new NH,lastRaycasterCheck:0}},init:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.controlType,s=i===void 0?"trackball":i,a=r.useWebGPU,o=a===void 0?!1:a,l=r.rendererConfig,u=l===void 0?{}:l,c=r.extraRenderers,h=c===void 0?[]:c,f=r.waitForLoadComplete,g=f===void 0?!0:f;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.tooltip=new eTe(t.container),t.pointerPos=new Qn.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(m){return t.container.addEventListener(m,function(v){if(m==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&v.type==="pointermove"&&(v.pressure>0||t.isPointerPressed)&&(v.pointerType==="mouse"||v.movementX===void 0||[v.movementX,v.movementY].some(function(S){return Math.abs(S)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var _=b(t.container);t.pointerPos.x=v.pageX-_.left,t.pointerPos.y=v.pageY-_.top}function b(S){var E=S.getBoundingClientRect(),A=window.pageXOffset||document.documentElement.scrollLeft,R=window.pageYOffset||document.documentElement.scrollTop;return{top:E.top+R,left:E.left+A}}},{passive:!0})}),t.container.addEventListener("pointerup",function(m){t.isPointerPressed&&(t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){m.button===0&&t.onClick(t.hoverObj||null,m,t.intersection),m.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,m,t.intersection)}))},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(m){t.onRightClick&&m.preventDefault()}),t.renderer=new(o?yxe:Qn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=h,t.extraRenderers.forEach(function(m){m.domElement.style.position="absolute",m.domElement.style.top="0px",m.domElement.style.pointerEvents="none",t.container.appendChild(m.domElement)}),t.postProcessingComposer=new cSe(t.renderer),t.postProcessingComposer.addPass(new dSe(t.scene,t.camera)),t.controls=new{trackball:_xe,orbit:Oxe,fly:Yxe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(Tu(t.extraRenderers)).forEach(function(m){return m.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new Qn.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!g,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))){var r,i=e.width,s=e.height;e.container.style.width="".concat(i,"px"),e.container.style.height="".concat(s,"px"),[e.renderer,e.postProcessingComposer].concat(Tu(e.extraRenderers)).forEach(function(g){return g.setSize(i,s)}),e.camera.aspect=i/s;var a=e.viewOffset.slice(0,2);a.some(function(g){return g})&&(r=e.camera).setViewOffset.apply(r,[i,s].concat(Tu(a),[i,s])),e.camera.updateProjectionMatrix()}if(t.hasOwnProperty("viewOffset")){var o,l=e.width,u=e.height,c=e.viewOffset.slice(0,2);c.some(function(g){return g})?(o=e.camera).setViewOffset.apply(o,[l,u].concat(Tu(c),[l,u])):e.camera.clearViewOffset()}if(t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Qn.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var h=Ah(e.backgroundColor).alpha;h===void 0&&(h=1),e.renderer.setClearColor(new Qn.Color(GSe(1,e.backgroundColor)),h)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Qn.TextureLoader().load(e.backgroundImageUrl,function(g){g.colorSpace=Qn.SRGBColorSpace,e.skysphere.material=new Qn.MeshBasicMaterial({map:g,side:Qn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&f()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&f())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(g){return e.scene.remove(g)}),e.lights.forEach(function(g){return e.scene.add(g)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(g){return e.scene.remove(g)}),e.objects.forEach(function(g){return e.scene.add(g)}));function f(){e.loadComplete=e.scene.visible=!0}}});function pTe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var fTe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;pTe(fTe);function _w(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function gTe(n){if(Array.isArray(n))return _w(n)}function fm(n,e,t){return(e=_Te(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Lb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(t),!0).forEach(function(r){fm(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cv(n){return gTe(n)||mTe(n)||vTe(n)||yTe()}function bTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _Te(n){var e=bTe(n,"string");return typeof e=="symbol"?e:e+""}function vTe(n,e){if(n){if(typeof n=="string")return _w(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_w(n,e):void 0}}function nj(n,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(i){return{default:t[i](),onChange:function(a,o){o[n][i](a)},triggerUpdate:!1}},linkMethod:function(i){return function(s){for(var a=s[n],o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];var c=a[i].apply(a,l);return c===a?this:c}}}}var CE=window.THREE?window.THREE:{AmbientLight:RV,DirectionalLight:AV,REVISION:dc},xTe=170,rj=nj("forceGraph",y4),STe=Object.assign.apply(Object,Cv(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","linkDirectionalParticleThreeObject","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return fm({},n,rj.linkProp(n))}))),ETe=Object.assign.apply(Object,Cv(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return fm({},n,rj.linkMethod(n))}))),Qb=nj("renderObjs",tj),TTe=Object.assign.apply(Object,Cv(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return fm({},n,Qb.linkProp(n))}))),wTe=Object.assign.apply(Object,Cv(["lights","cameraPosition","postProcessingComposer"].map(function(n){return fm({},n,Qb.linkMethod(n))})).concat([{graph2ScreenCoords:Qb.linkMethod("getScreenCoords"),screen2GraphCoords:Qb.linkMethod("getSceneCoords")}])),ATe=cv({props:Lb(Lb({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var r=t.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1}},STe),TTe),methods:Lb(Lb({zoomToFit:function(e,t,r){for(var i,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,a),t,r),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},ETe),wTe),stateInit:function(e){var t=e.controlType,r=e.rendererConfig,i=e.extraRenderers,s=new y4;return{forceGraph:s,renderObjs:tj({controlType:t,rendererConfig:r,extraRenderers:i}).objects([s]).lights([new CE.AmbientLight(13421772,Math.PI),new CE.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r);var i=t.renderObjs.camera(),s=t.renderObjs.renderer(),a=t.renderObjs.controls();a.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=i.position.z;var o;t.container.appendChild(o=document.createElement("div")),o.className="graph-info-msg",o.textContent="",t.forceGraph.onLoading(function(){o.textContent="Loading..."}).onFinishLoading(function(){o.textContent=""}).onUpdate(function(){t.graphData=t.forceGraph.graphData(),i.position.x===0&&i.position.y===0&&i.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(i.lookAt(t.forceGraph.position),t.lastSetCameraZ=i.position.z=Math.cbrt(t.graphData.nodes.length)*xTe)}).onFinishUpdate(function(){if(t._dragControls){var l=t.graphData.nodes.find(function(c){return c.__initialFixedPos&&!c.__disposeControlsAfterDrag});l?l.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&t.forceEngine==="d3"){var u=t._dragControls=new ule(t.graphData.nodes.map(function(c){return c.__threeObj}).filter(function(c){return c}),i,s.domElement);u.addEventListener("dragstart",function(c){var h=Eo(c.object);if(h){a.enabled=!1,c.object.__initialPos=c.object.position.clone(),c.object.__prevPos=c.object.position.clone();var f=h.__data;!f.__initialFixedPos&&(f.__initialFixedPos={fx:f.fx,fy:f.fy,fz:f.fz}),!f.__initialPos&&(f.__initialPos={x:f.x,y:f.y,z:f.z}),["x","y","z"].forEach(function(g){return f["f".concat(g)]=f[g]}),s.domElement.classList.add("grabbable")}}),u.addEventListener("drag",function(c){var h=Eo(c.object);if(h){if(!c.object.hasOwnProperty("__graphObjType")){var f=c.object.__initialPos,g=c.object.__prevPos,m=c.object.position;h.position.add(m.clone().sub(g)),g.copy(m),m.copy(f)}var v=h.__data,_=h.position,b={x:_.x-v.x,y:_.y-v.y,z:_.z-v.z};["x","y","z"].forEach(function(S){return v["f".concat(S)]=v[S]=_[S]}),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),v.__dragged=!0,t.onNodeDrag(v,b)}}),u.addEventListener("dragend",function(c){var h=Eo(c.object);if(h){delete c.object.__initialPos,delete c.object.__prevPos;var f=h.__data;f.__disposeControlsAfterDrag&&(u.dispose(),delete f.__disposeControlsAfterDrag);var g=f.__initialFixedPos,m=f.__initialPos,v={x:m.x-f.x,y:m.y-f.y,z:m.z-f.z};if(g&&(["x","y","z"].forEach(function(b){var S="f".concat(b);g[S]===void 0&&delete f[S]}),delete f.__initialFixedPos,delete f.__initialPos,f.__dragged&&(delete f.__dragged,t.onNodeDragEnd(f,v))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls){var _;a.enabled=!0,a._status&&((_=a._onPointerCancel)===null||_===void 0||_.call(a)),a.domElement&&a.domElement.ownerDocument&&a.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))}s.domElement.classList.remove("grabbable")}})}}),CE.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverOrderComparator(function(l,u){var c=Eo(l);if(!c)return 1;var h=Eo(u);if(!h)return-1;var f=function(m){return m.__graphObjType==="node"};return f(h)-f(c)}).tooltipContent(function(l){var u=Eo(l);return u&&on(t["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(l){var u=Eo(l);if(u!==t.hoverObj){var c=t.hoverObj?t.hoverObj.__graphObjType:null,h=t.hoverObj?t.hoverObj.__data:null,f=u?u.__graphObjType:null,g=u?u.__data:null;if(c&&c!==f){var m=t["on".concat(c==="node"?"Node":"Link","Hover")];m&&m(null,h)}if(f){var v=t["on".concat(f==="node"?"Node":"Link","Hover")];v&&v(g,c===f?h:null)}s.domElement.classList[(u&&t["on".concat(f==="node"?"Node":"Link","Click")]||!u&&t.onBackgroundClick)&&on(t.showPointerCursor)(g)?"add":"remove"]("clickable"),t.hoverObj=u}}).clickAfterDrag(!1).onClick(function(l,u){var c=Eo(l);if(c){var h=t["on".concat(c.__graphObjType==="node"?"Node":"Link","Click")];h&&h(c.__data,u)}else t.onBackgroundClick&&t.onBackgroundClick(u)}).onRightClick(function(l,u){var c=Eo(l);if(c){var h=t["on".concat(c.__graphObjType==="node"?"Node":"Link","RightClick")];h&&h(c.__data,u)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(u)}),this._animationCycle()}});function Eo(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}var ME={exports:{}},IE,zB;function RTe(){if(zB)return IE;zB=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return IE=n,IE}var kE,GB;function NTe(){if(GB)return kE;GB=1;var n=RTe();function e(){}function t(){}return t.resetWarningCache=e,kE=function(){function r(a,o,l,u,c,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},kE}var VB;function CTe(){return VB||(VB=1,ME.exports=NTe()()),ME.exports}var MTe=CTe();const ue=Lg(MTe),Mv={width:ue.number,height:ue.number,graphData:ue.shape({nodes:ue.arrayOf(ue.object).isRequired,links:ue.arrayOf(ue.object).isRequired}),backgroundColor:ue.string,nodeRelSize:ue.number,nodeId:ue.string,nodeLabel:ue.oneOfType([ue.string,ue.func]),nodeVal:ue.oneOfType([ue.number,ue.string,ue.func]),nodeVisibility:ue.oneOfType([ue.bool,ue.string,ue.func]),nodeColor:ue.oneOfType([ue.string,ue.func]),nodeAutoColorBy:ue.oneOfType([ue.string,ue.func]),onNodeHover:ue.func,onNodeClick:ue.func,linkSource:ue.string,linkTarget:ue.string,linkLabel:ue.oneOfType([ue.string,ue.func]),linkVisibility:ue.oneOfType([ue.bool,ue.string,ue.func]),linkColor:ue.oneOfType([ue.string,ue.func]),linkAutoColorBy:ue.oneOfType([ue.string,ue.func]),linkWidth:ue.oneOfType([ue.number,ue.string,ue.func]),linkCurvature:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalArrowLength:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalArrowColor:ue.oneOfType([ue.string,ue.func]),linkDirectionalArrowRelPos:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticles:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleSpeed:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleOffset:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleWidth:ue.oneOfType([ue.number,ue.string,ue.func]),linkDirectionalParticleColor:ue.oneOfType([ue.string,ue.func]),onLinkHover:ue.func,onLinkClick:ue.func,dagMode:ue.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ue.number,dagNodeFilter:ue.func,onDagError:ue.func,d3AlphaMin:ue.number,d3AlphaDecay:ue.number,d3VelocityDecay:ue.number,warmupTicks:ue.number,cooldownTicks:ue.number,cooldownTime:ue.number,onEngineTick:ue.func,onEngineStop:ue.func,getGraphBbox:ue.func},ij={zoomToFit:ue.func,onNodeRightClick:ue.func,onNodeDrag:ue.func,onNodeDragEnd:ue.func,onLinkRightClick:ue.func,linkHoverPrecision:ue.number,onBackgroundClick:ue.func,onBackgroundRightClick:ue.func,showPointerCursor:ue.oneOfType([ue.bool,ue.func]),enablePointerInteraction:ue.bool,enableNodeDrag:ue.bool},qI={showNavInfo:ue.bool,nodeOpacity:ue.number,nodeResolution:ue.number,nodeThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),nodeThreeObjectExtend:ue.oneOfType([ue.bool,ue.string,ue.func]),nodePositionUpdate:ue.func,linkOpacity:ue.number,linkResolution:ue.number,linkCurveRotation:ue.oneOfType([ue.number,ue.string,ue.func]),linkMaterial:ue.oneOfType([ue.object,ue.string,ue.func]),linkThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),linkThreeObjectExtend:ue.oneOfType([ue.bool,ue.string,ue.func]),linkPositionUpdate:ue.func,linkDirectionalArrowResolution:ue.number,linkDirectionalParticleResolution:ue.number,linkDirectionalParticleThreeObject:ue.oneOfType([ue.object,ue.string,ue.func]),forceEngine:ue.oneOf(["d3","ngraph"]),ngraphPhysics:ue.object,numDimensions:ue.oneOf([1,2,3])};Object.assign({},Mv,ij,{linkLineDash:ue.oneOfType([ue.arrayOf(ue.number),ue.string,ue.func]),nodeCanvasObjectMode:ue.oneOfType([ue.string,ue.func]),nodeCanvasObject:ue.func,nodePointerAreaPaint:ue.func,linkCanvasObjectMode:ue.oneOfType([ue.string,ue.func]),linkCanvasObject:ue.func,linkPointerAreaPaint:ue.func,linkDirectionalParticleCanvasObject:ue.func,autoPauseRedraw:ue.bool,minZoom:ue.number,maxZoom:ue.number,enableZoomInteraction:ue.oneOfType([ue.bool,ue.func]),enablePanInteraction:ue.oneOfType([ue.bool,ue.func]),onZoom:ue.func,onZoomEnd:ue.func,onRenderFramePre:ue.func,onRenderFramePost:ue.func});const ITe=Object.assign({},Mv,ij,qI,{enableNavigationControls:ue.bool,controlType:ue.oneOf(["trackball","orbit","fly"]),rendererConfig:ue.object,extraRenderers:ue.arrayOf(ue.shape({render:ue.func.isRequired}))});Object.assign({},Mv,qI,{nodeDesc:ue.oneOfType([ue.string,ue.func]),linkDesc:ue.oneOfType([ue.string,ue.func])});Object.assign({},Mv,qI,{markerAttrs:ue.object,yOffset:ue.number,glScale:ue.number});const XI=fte(ATe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});XI.displayName="ForceGraph3D";XI.propTypes=ITe;function kTe(){const[n,e]=se.useState({nodes:[],links:[]}),t=se.useRef();return se.useEffect(()=>{fetch(`${or}/advanced/graph`).then(r=>r.json()).then(e).catch(console.error)},[]),L.jsxs("div",{style:{width:"100%",height:"100%",background:"#000"},children:[L.jsx(XI,{ref:t,graphData:n,nodeLabel:"name",nodeAutoColorBy:"group",nodeRelSize:6,linkOpacity:.2,linkWidth:1,nodeThreeObject:r=>!1,onNodeClick:r=>{const i=r;if(i.x===void 0||i.y===void 0||i.z===void 0)return;const a=1+40/Math.hypot(i.x,i.y,i.z);t.current.cameraPosition({x:i.x*a,y:i.y*a,z:i.z*a},r,3e3)}}),L.jsxs("div",{style:{position:"absolute",top:20,left:20,color:"#fff",pointerEvents:"none"},children:[L.jsx("h2",{style:{margin:0,textShadow:"0 0 10px #00f"},children:"CODE UNIVERSE"}),L.jsxs("p",{style:{margin:0,opacity:.7},children:[n.nodes.length," Files  ",n.links.length," Dependencies"]})]})]})}function LTe(){const[n,e]=se.useState([]),[t,r]=se.useState([]),[i,s]=se.useState({}),[a,o]=se.useState(null),[l,u]=se.useState(!0),[c,h]=se.useState(!0),[f,g]=se.useState("PREVIEW"),[m,v]=se.useState("chat"),[_,b]=se.useState([]),[S,E]=se.useState([]),[A,R]=se.useState(""),[w,M]=se.useState(!1),[I,C]=se.useState([]),[k,O]=se.useState(null),z=Pg();function W(){o(null),R(""),C([])}async function q(){const Y=localStorage.getItem("token");try{const V=await fetch(`${or}/sessions`,{headers:{Authorization:Y?`Bearer ${Y}`:""}});if(V.status===401){localStorage.removeItem("token"),z("/login");return}const _e=((await V.json()).sessions||[]).map(Pe=>({...Pe,id:Pe.id||Pe._id}));e(_e),!a&&_e[0]&&o(_e[0].id)}catch(V){console.error("Failed to load sessions",V)}}async function X(){const Y=localStorage.getItem("token");try{const V=await fetch(`${or}/folders`,{headers:{Authorization:Y?`Bearer ${Y}`:""}});if(V.ok){const ae=await V.json();r(ae)}}catch(V){console.error("Failed to load folders",V)}}se.useEffect(()=>{q(),X()},[]);async function Q(){const Y=prompt("  :");if(!Y)return;const V=localStorage.getItem("token");(await fetch(`${or}/folders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:V?`Bearer ${V}`:""},body:JSON.stringify({name:Y})})).ok&&await X()}async function H(Y){if(!confirm("            ."))return;const V=localStorage.getItem("token");await fetch(`${or}/folders/${Y}`,{method:"DELETE",headers:{Authorization:V?`Bearer ${V}`:""}}),await X(),await q()}async function G(Y,V){const ae=localStorage.getItem("token");await fetch(`${or}/sessions/${Y}/move`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:ae?`Bearer ${ae}`:""},body:JSON.stringify({folderId:V})}),await q()}async function re(Y,V){if(Y===V||!confirm("Are you sure you want to merge these sessions? This cannot be undone."))return;const ae=localStorage.getItem("token");(await fetch(`${or}/sessions/merge`,{method:"POST",headers:{"Content-Type":"application/json",...ae?{Authorization:`Bearer ${ae}`}:{}},body:JSON.stringify({sourceId:Y,targetId:V})})).ok&&(await q(),a===Y&&o(V))}async function D(Y){if(!confirm("      "))return;const V=localStorage.getItem("token");await fetch(`${or}/sessions/${Y}`,{method:"DELETE",headers:{Authorization:V?`Bearer ${V}`:""}}),await q(),a===Y&&o(null)}async function U(){if(!confirm("            ."))return;const Y=localStorage.getItem("token");await fetch(`${or}/sessions`,{method:"DELETE",headers:{Authorization:Y?`Bearer ${Y}`:""}}),await q(),o(null)}async function ne(Y,V){const ae=localStorage.getItem("token");await fetch(`${or}/sessions/${Y}/pin`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:ae?`Bearer ${ae}`:""},body:JSON.stringify({isPinned:!V})}),await q()}function B(Y){alert("   ")}function Oe(Y,V){O({content:Y,language:V}),g("PREVIEW")}return se.useEffect(()=>{if(!A){M(!1),C([]);return}const Y=setTimeout(async()=>{M(!0);const V=localStorage.getItem("token");try{const _e=await(await fetch(`${or}/sessions/search?q=${encodeURIComponent(A)}`,{headers:V?{Authorization:`Bearer ${V}`}:{}})).json();C(_e.results||[])}catch(ae){console.error(ae)}},500);return()=>clearTimeout(Y)},[A]),L.jsxs("div",{className:`joe-layout ${l?"sidebar-open":"sidebar-closed"}`,children:[l&&L.jsxs("aside",{className:"sidebar",children:[L.jsxs("div",{className:"sidebar-header",children:[L.jsxs("button",{className:"new-chat-btn",onClick:W,children:[L.jsx("span",{children:"+"}),"  "]}),L.jsx("button",{className:"close-sidebar-btn",onClick:()=>u(!1),children:L.jsx(o8,{size:20})})]}),L.jsx("div",{className:"search-box-container",style:{padding:"0 4px",marginBottom:16},children:L.jsxs("div",{className:"search-input-wrapper",children:[L.jsx(E3,{size:14,className:"search-icon"}),L.jsx("input",{type:"text",placeholder:"  ...",value:A,onChange:Y=>R(Y.target.value),className:"search-input"})]})}),A?L.jsx("div",{className:"session-list",children:I.length===0?L.jsx("div",{style:{padding:16,textAlign:"center",color:"var(--text-muted)",fontSize:13},children:"  "}):I.map(Y=>L.jsxs("button",{className:"search-result-item",onClick:()=>{o(Y.sessionId),R("")},children:[L.jsx("div",{className:"result-session-title",children:Y.sessionTitle}),L.jsx("div",{className:"result-content",children:Y.content}),L.jsx("div",{className:"result-date",children:new Date(Y.createdAt).toLocaleDateString()})]},Y.messageId))}):L.jsxs(L.Fragment,{children:[L.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 8px",marginBottom:8},children:[L.jsx("div",{className:"section-title",style:{margin:0},children:""}),L.jsx("button",{onClick:Q,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},title:" ",children:L.jsx(B6,{size:16})})]}),L.jsxs("div",{className:"session-list",children:[t.map(Y=>L.jsxs("div",{onDragOver:V=>{V.preventDefault(),V.dataTransfer.dropEffect="move",V.currentTarget.style.background="rgba(255,215,0,0.1)"},onDragLeave:V=>{V.currentTarget.style.background="transparent"},onDrop:V=>{V.preventDefault(),V.currentTarget.style.background="transparent";const ae=V.dataTransfer.getData("sessionId");ae&&G(ae,Y._id)},children:[L.jsxs("div",{className:"folder-header",style:{display:"flex",alignItems:"center",padding:"8px",cursor:"pointer",color:"var(--text-secondary)"},onClick:()=>s(V=>({...V,[Y._id]:!V[Y._id]})),children:[i[Y._id]?L.jsx(x6,{size:14}):L.jsx(_3,{size:14}),L.jsx(G6,{size:14,style:{margin:"0 8px",color:"var(--accent-primary)"}}),L.jsx("span",{style:{fontSize:13,flex:1},children:Y.name}),L.jsx("button",{onClick:V=>{V.stopPropagation(),H(Y._id)},style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",opacity:.5},className:"folder-delete-btn",children:L.jsx(Jb,{size:12})})]}),i[Y._id]&&L.jsxs("div",{style:{paddingRight:16},children:[n.filter(V=>V.folderId===Y._id).map(V=>L.jsx("div",{draggable:!0,onDragStart:ae=>{ae.dataTransfer.setData("sessionId",V.id)},children:L.jsx(KP,{session:V,isActive:a===V.id,onSelect:()=>o(V.id),onDelete:()=>D(V.id),onPin:()=>ne(V.id,!!V.isPinned),onShare:()=>B(V.id)})},V.id)),n.filter(V=>V.folderId===Y._id).length===0&&L.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",padding:"4px 8px 8px"},children:" "})]})]},Y._id)),L.jsx("div",{className:"section-title",style:{marginTop:16},onDragOver:Y=>{Y.preventDefault(),Y.dataTransfer.dropEffect="move"},onDrop:Y=>{Y.preventDefault();const V=Y.dataTransfer.getData("sessionId");V&&G(V,null)},children:" "}),n.filter(Y=>!Y.folderId).map(Y=>L.jsx("div",{draggable:!0,onDragStart:V=>{V.dataTransfer.setData("sessionId",Y.id),V.dataTransfer.effectAllowed="move"},onDragOver:V=>{V.preventDefault(),V.dataTransfer.dropEffect="move"},onDrop:V=>{V.preventDefault();const ae=V.dataTransfer.getData("sessionId");ae&&ae!==Y.id&&re(ae,Y.id)},children:L.jsx(KP,{session:Y,isActive:a===Y.id,onSelect:()=>o(Y.id),onDelete:()=>D(Y.id),onPin:()=>ne(Y.id,!!Y.isPinned),onShare:()=>B(Y.id)})},Y.id))]})]}),L.jsx("div",{className:"sidebar-footer",children:L.jsxs("button",{className:"delete-all-btn",onClick:U,children:[L.jsx(Jb,{size:16}),"   "]})})]}),!l&&L.jsx("button",{className:"sidebar-toggle-btn",style:{position:"absolute",left:16,top:16},onClick:()=>u(!0),children:L.jsx(u8,{size:20})}),L.jsxs("main",{className:"center",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[L.jsxs("div",{style:{height:48,borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",padding:"0 16px",gap:8,background:"var(--bg-secondary)",flexShrink:0},children:[L.jsxs("button",{onClick:()=>v("chat"),style:{background:"none",border:"none",color:m==="chat"?"var(--accent-primary)":"var(--text-secondary)",fontWeight:m==="chat"?600:400,cursor:"pointer",display:"flex",alignItems:"center",gap:6,padding:"6px 12px",borderRadius:6,backgroundColor:m==="chat"?"rgba(37, 99, 235, 0.1)":"transparent"},children:[L.jsx(e8,{size:16})," Chat"]}),L.jsxs("button",{onClick:()=>v("council"),style:{background:"none",border:"none",color:m==="council"?"var(--accent-primary)":"var(--text-secondary)",fontWeight:m==="council"?600:400,cursor:"pointer",display:"flex",alignItems:"center",gap:6,padding:"6px 12px",borderRadius:6,backgroundColor:m==="council"?"rgba(37, 99, 235, 0.1)":"transparent"},children:[L.jsx(zE,{size:16})," Council"]}),L.jsxs("button",{onClick:()=>v("universe"),style:{background:"none",border:"none",color:m==="universe"?"var(--accent-primary)":"var(--text-secondary)",fontWeight:m==="universe"?600:400,cursor:"pointer",display:"flex",alignItems:"center",gap:6,padding:"6px 12px",borderRadius:6,backgroundColor:m==="universe"?"rgba(37, 99, 235, 0.1)":"transparent"},children:[L.jsx(x3,{size:16})," Universe"]})]}),L.jsxs("div",{style:{flex:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:[m==="chat"&&L.jsx(Xee,{sessionId:a||void 0,onSessionCreated:async Y=>{await q(),o(Y)},onPreviewArtifact:Oe,onStepsUpdate:Y=>{E(Y)},onMessagesUpdate:Y=>{b(Y)}}),m==="council"&&L.jsx(Yee,{}),m==="universe"&&L.jsx(kTe,{})]})]})]})}const jt=n=>typeof n=="string",mf=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},$B=n=>n==null?"":""+n,DTe=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},OTe=/###/g,HB=n=>n&&n.indexOf("###")>-1?n.replace(OTe,"."):n,jB=n=>!n||jt(n),Qf=(n,e,t)=>{const r=jt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(jB(n))return{};const s=HB(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return jB(n)?{}:{obj:n,k:HB(r[i])}},WB=(n,e,t)=>{const{obj:r,k:i}=Qf(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Qf(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Qf(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},PTe=(n,e,t,r)=>{const{obj:i,k:s}=Qf(n,e,Object);i[s]=i[s]||[],i[s].push(t)},M_=(n,e)=>{const{obj:t,k:r}=Qf(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},FTe=(n,e,t)=>{const r=M_(n,t);return r!==void 0?r:M_(e,t)},sj=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?jt(n[r])||n[r]instanceof String||jt(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):sj(n[r],e[r],t):n[r]=e[r]);return n},fd=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var UTe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const BTe=n=>jt(n)?n.replace(/[&<>"'\/]/g,e=>UTe[e]):n;class zTe{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const GTe=[" ",",","?","!",";"],VTe=new zTe(20),$Te=(n,e,t)=>{e=e||"",t=t||"";const r=GTe.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=VTe.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},vw=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=s;l<r.length;++l)if(l!==s&&(o+=t),o+=r[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=a}return i},I_=n=>n==null?void 0:n.replace("_","-"),HTe={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class k_{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||HTe,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(jt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new k_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new k_(this.logger,e)}}var ja=new k_;class Iv{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let u=0;u<l;u++)o.apply(o,[e,...r])})}}class qB extends Iv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var u,c;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):jt(r)&&s?o.push(...r.split(s)):o.push(r)));const l=M_(this.data,o);return!l&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),l||!a||!jt(r)?l:vw((c=(u=this.data)==null?void 0:u[e])==null?void 0:c[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),WB(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(jt(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let l=M_(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?sj(l,r,s):l={...l,...r},WB(this.data,o,l),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var aj={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const XB={},YB=n=>!jt(n)&&typeof n!="boolean"&&typeof n!="number";class L_ extends Iv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),DTe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ja.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!$Te(e,r,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:jt(s)?[s]:s};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(i)}return{key:e,namespaces:jt(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode"){if(c){const O=t.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${O}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${O}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const h=this.resolve(e,t);let f=h==null?void 0:h.res;const g=(h==null?void 0:h.usedKey)||a,m=(h==null?void 0:h.exactUsedKey)||a,v=["[object Number]","[object Function]","[object RegExp]"],_=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,S=t.count!==void 0&&!jt(t.count),E=L_.hasDefaultValue(t),A=S?this.pluralResolver.getSuffix(u,t.count,t):"",R=t.ordinal&&S?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",w=S&&!t.ordinal&&t.count===0,M=w&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${A}`]||t[`defaultValue${R}`]||t.defaultValue;let I=f;b&&!f&&E&&(I=M);const C=YB(I),k=Object.prototype.toString.apply(I);if(b&&I&&C&&v.indexOf(k)<0&&!(jt(_)&&Array.isArray(I))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,I,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=O,h.usedParams=this.getUsedParamsDetails(t),h):O}if(s){const O=Array.isArray(I),z=O?[]:{},W=O?m:g;for(const q in I)if(Object.prototype.hasOwnProperty.call(I,q)){const X=`${W}${s}${q}`;E&&!f?z[q]=this.translate(X,{...t,defaultValue:YB(M)?M[q]:void 0,joinArrays:!1,ns:o}):z[q]=this.translate(X,{...t,joinArrays:!1,ns:o}),z[q]===X&&(z[q]=I[q])}f=z}}else if(b&&jt(_)&&Array.isArray(f))f=f.join(_),f&&(f=this.extendTranslation(f,e,t,r));else{let O=!1,z=!1;!this.isValidLookup(f)&&E&&(O=!0,f=M),this.isValidLookup(f)||(z=!0,f=a);const q=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&z?void 0:f,X=E&&M!==f&&this.options.updateMissing;if(z||O||X){if(this.logger.log(X?"updateKey":"missingKey",u,l,a,X?M:f),s){const re=this.resolve(a,{...t,keySeparator:!1});re&&re.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q=[];const H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&H&&H[0])for(let re=0;re<H.length;re++)Q.push(H[re]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(t.lng||this.language):Q.push(t.lng||this.language);const G=(re,D,U)=>{var B;const ne=E&&U!==f?U:q;this.options.missingKeyHandler?this.options.missingKeyHandler(re,l,D,ne,X,t):(B=this.backendConnector)!=null&&B.saveMissing&&this.backendConnector.saveMissing(re,l,D,ne,X,t),this.emit("missingKey",re,l,D,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?Q.forEach(re=>{const D=this.pluralResolver.getSuffixes(re,t);w&&t[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(U=>{G([re],a+U,t[`defaultValue${U}`]||M)})}):G(Q,a,M))}f=this.extendTranslation(f,e,t,h,r),z&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${a}`),(z||O)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,O?f:void 0))}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(t),h):f}extendTranslation(e,t,r,i,s){var u,c;var a=this;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=jt(e)&&(((c=r==null?void 0:r.interpolation)==null?void 0:c.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const m=e.match(this.interpolator.nestingRegexp);f=m&&m.length}let g=r.replace&&!jt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||i.usedLng,r),h){const m=e.match(this.interpolator.nestingRegexp),v=m&&m.length;f<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,v=new Array(m),_=0;_<m;_++)v[_]=arguments[_];return(s==null?void 0:s[0])===v[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):a.translate(...v,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=jt(o)?[o]:o;return e!=null&&(l!=null&&l.length)&&r.applyPostProcessor!==!1&&(e=aj.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return jt(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,t),c=u.key;i=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=t.count!==void 0&&!jt(t.count),g=f&&!t.ordinal&&t.count===0,m=t.context!==void 0&&(jt(t.context)||typeof t.context=="number")&&t.context!=="",v=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(_=>{var b,S;this.isValidLookup(r)||(o=_,!XB[`${v[0]}-${_}`]&&((b=this.utils)!=null&&b.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(XB[`${v[0]}-${_}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(E=>{var w;if(this.isValidLookup(r))return;a=E;const A=[c];if((w=this.i18nFormat)!=null&&w.addLookupKeys)this.i18nFormat.addLookupKeys(A,c,E,_,t);else{let M;f&&(M=this.pluralResolver.getSuffix(E,t.count,t));const I=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(A.push(c+M),t.ordinal&&M.indexOf(C)===0&&A.push(c+M.replace(C,this.options.pluralSeparator)),g&&A.push(c+I)),m){const k=`${c}${this.options.contextSeparator}${t.context}`;A.push(k),f&&(A.push(k+M),t.ordinal&&M.indexOf(C)===0&&A.push(k+M.replace(C,this.options.pluralSeparator)),g&&A.push(k+I))}}let R;for(;R=A.pop();)this.isValidLookup(r)||(s=R,r=this.getResource(E,_,R,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!jt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class KB{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ja.create("languageUtils")}getScriptPartFromCode(e){if(e=I_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=I_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(jt(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),jt(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return jt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):jt(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const ZB={zero:0,one:1,two:2,few:3,many:4,other:5},QB={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class jTe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ja.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=I_(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),QB;if(!e.match(/-|_/))return QB;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>ZB[i]-ZB[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const JB=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=FTe(n,e,t);return!s&&i&&jt(t)&&(s=vw(n,t,r),s===void 0&&(s=vw(e,t,r))),s},LE=n=>n.replace(/\$/g,"$$$$");class WTe{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:m,nestingSuffixEscaped:v,nestingOptionsSeparator:_,maxReplaces:b,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:BTe,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?fd(s):a||"{{",this.suffix=o?fd(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=f?fd(f):g||fd("$t("),this.nestingSuffix=m?fd(m):v||fd(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=b||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var g;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const S=JB(t,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...i,...t,interpolationkey:m}):S}const v=m.split(this.formatSeparator),_=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(JB(t,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...i,...t,interpolationkey:_})};this.resetRegExp();const c=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((g=i==null?void 0:i.interpolation)==null?void 0:g.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>LE(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?LE(this.escape(m)):LE(m)}].forEach(m=>{for(o=0;s=m.regex.exec(e);){const v=s[1].trim();if(a=u(v),a===void 0)if(typeof c=="function"){const b=c(e,s,i);a=jt(b)?b:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!jt(a)&&!this.useRawValueToEscape&&(a=$B(a));const _=m.safeValue(a);if(e=e.replace(s[0],_),h?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=s[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,a);const g=f.match(/'/g),m=f.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${c}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&!jt(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),l=c,u=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!jt(s))return s;jt(s)||(s=$B(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),u&&(s=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const qTe=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();t[c]||(t[c]=u),u==="false"&&(t[c]=!1),u==="true"&&(t[c]=!0),isNaN(u)||(t[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},gd=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=n(I_(r),i),e[a]=o),o(t)}};class XTe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("formatter"),this.options=e,this.formats={number:gd((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:gd((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:gd((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:gd((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:gd((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=gd(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{var h;const{formatName:u,formatOptions:c}=qTe(l);if(this.formats[u]){let f=o;try{const g=((h=i==null?void 0:i.formatParams)==null?void 0:h[i.interpolationkey])||{},m=g.locale||g.lng||i.locale||i.lng||r;f=this.formats[u](o,m,{...c,...i,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const YTe=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class KTe extends Iv{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ja.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},o={},l={};return e.forEach(u=>{let c=!0;t.forEach(h=>{const f=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,c=!1,a[f]===void 0&&(a[f]=!0),s[f]===void 0&&(s[f]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{PTe(l.loaded,[s],a),YTe(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();jt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),jt(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,i,s){var l,u,c,h,f;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const g={...a,isUpdate:s},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(e,t,r,i,g):v=m(e,t,r,i),v&&typeof v.then=="function"?v.then(_=>o(null,_)).catch(o):o(null,v)}catch(v){o(v)}else m(e,t,r,i,o,g)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const e3=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),jt(n[1])&&(e.defaultValue=n[1]),jt(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),t3=n=>{var e,t;return jt(n.ns)&&(n.ns=[n.ns]),jt(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),jt(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},Db=()=>{},ZTe=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class kg extends Iv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=t3(e),this.services={},this.logger=ja,this.modules={external:[]},ZTe(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(jt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=e3();this.options={...i,...this.options,...t3(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ja.init(s(this.modules.logger),this.options):ja.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=XTe;const h=new KB(this.options);this.store=new qB(this.options.resources,this.options);const f=this.services;f.logger=ja,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new jTe(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(c),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new WTe(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new KTe(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(g){for(var m=arguments.length,v=new Array(m>1?m-1:0),_=1;_<m;_++)v[_-1]=arguments[_];e.emit(g,...v)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new L_(this.services,this.options),this.translator.on("*",function(g){for(var m=arguments.length,v=new Array(m>1?m-1:0),_=1;_<m;_++)v[_-1]=arguments[_];e.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Db),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=mf(),u=()=>{const c=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(h,f)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Db;const i=jt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,t,r){const i=mf();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Db),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&aj.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=mf();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(l,function(){return r.t(...arguments)})},o=l=>{var c,h;!e&&!l&&this.services.languageDetector&&(l=[]);const u=jt(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||h.call(c,u)),this.loadResources(u,f=>{a(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const f=i.options.keySeparator||".";let g;return l.keyPrefix&&Array.isArray(a)?g=a.map(m=>`${l.keyPrefix}${f}${m}`):g=l.keyPrefix?`${l.keyPrefix}${f}${a}`:a,i.t(g,l)};return jt(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=mf();return this.options.ns?(jt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=mf();jt(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new KB(e3());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new kg(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Db;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new kg(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},Object.keys(l[u]).reduce((c,h)=>(c[h]={...l[u][h]},c),{})),{});s.store=new qB(o,i),s.services.resourceStore=s.store}return s.translator=new L_(s.services,i),s.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(o,...u)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const xi=kg.createInstance();xi.createInstance=kg.createInstance;xi.createInstance;xi.dir;xi.init;xi.loadResources;xi.reloadResources;xi.use;xi.changeLanguage;xi.getFixedT;xi.t;xi.exists;xi.setDefaultNamespace;xi.hasLoadedNamespace;xi.loadNamespaces;xi.loadLanguages;const QTe={en:{translation:{login:"Login",toggleTheme:"Toggle Theme",homeSubtitle:"A simple entry to the World of JOE",email:"Email",password:"Password",register:"Register",welcomeTitle:"",welcomeMsg:`Hello! I am Joe, your smart assistant.
How can I help you today?`,inputPlaceholder:"Enter your command here...",send:"Send",connecting:"Connecting...",connected:"Connected",copy:"Copy text",working:"Working...",planProposed:" Proposed Plan",planAction:"I will",inputs:"Inputs",outputs:"Outputs",approvalRequired:"Approval Required",risk:"Risk",action:"Action",deny:"Deny",approve:"Approve",tools:{file_write:"Create File",file_read:"Read File",ls:"List Files",web_search:"Web Search",shell_execute:"Execute Command",http_fetch:"Fetch URL",file_edit:"Edit File",plan:"Plan & Analyze",summarize:"Summarize",unknown:"Unknown Tool"},artifacts:{image:"Image",video:"Video",file:"File",openNewWindow:"Open in new window"},error:"Error sending command"}},ar:{translation:{login:" ",toggleTheme:" ",homeSubtitle:"    ",email:" ",password:" ",register:"",welcomeTitle:"",welcomeMsg:`!    .
   `,inputPlaceholder:"  ...",send:"",connecting:" ...",connected:"",copy:" ",working:" ...",planProposed:"  ",planAction:" ",inputs:"",outputs:"",approvalRequired:" ",risk:" ",action:"",deny:"",approve:"",tools:{file_write:" ",file_read:" ",ls:" ",web_search:"  ",shell_execute:"  ",http_fetch:" ",file_edit:" ",plan:" ",summarize:" ",unknown:"  "},artifacts:{image:"",video:"",file:"",openNewWindow:"   "},error:"  "}},fr:{translation:{login:"Connexion",toggleTheme:"Changer de thme",homeSubtitle:"Une entre simple dans le monde de JOE",email:"Email",password:"Mot de passe",register:"S'inscrire",welcomeTitle:"",welcomeMsg:`Bonjour ! Je suis Joe, votre assistant intelligent.
Comment puis-je vous aider aujourd'hui ?`,inputPlaceholder:"Entrez votre commande ici...",send:"Envoyer",connecting:"Connexion...",connected:"Connect",copy:"Copier le texte",working:"En cours...",planProposed:" Plan Propos",planAction:"Je vais",inputs:"Entres",outputs:"Sorties",approvalRequired:"Approbation requise",risk:"Risque",action:"Action",deny:"Refuser",approve:"Approuver",tools:{file_write:"Crer un fichier",file_read:"Lire un fichier",ls:"Lister les fichiers",web_search:"Recherche Web",shell_execute:"Excuter la commande",http_fetch:"Rcuprer URL",file_edit:"Modifier le fichier",plan:"Planifier & Analyser",summarize:"Rsumer",unknown:"Outil inconnu"},artifacts:{image:"Image",video:"Vido",file:"Fichier",openNewWindow:"Ouvrir dans une nouvelle fentre"},error:"Erreur lors de l'envoi"}},de:{translation:{login:"Anmelden",toggleTheme:"Thema umschalten",homeSubtitle:"Ein einfacher Zugang zur Welt von JOE",email:"E-Mail",password:"Passwort",register:"Registrieren",welcomeTitle:"",welcomeMsg:`Hallo! Ich bin Joe, dein intelligenter Assistent.
Wie kann ich dir heute helfen?`,inputPlaceholder:"Gib deinen Befehl hier ein...",send:"Senden",connecting:"Verbinden...",connected:"Verbunden",copy:"Text kopieren",working:"Arbeite...",planProposed:" Vorgeschlagener Plan",planAction:"Ich werde",inputs:"Eingaben",outputs:"Ausgaben",approvalRequired:"Genehmigung erforderlich",risk:"Risiko",action:"Aktion",deny:"Ablehnen",approve:"Genehmigen",tools:{file_write:"Datei erstellen",file_read:"Datei lesen",ls:"Dateien auflisten",web_search:"Websuche",shell_execute:"Befehl ausfhren",http_fetch:"URL abrufen",file_edit:"Datei bearbeiten",plan:"Planen & Analysieren",summarize:"Zusammenfassen",unknown:"Unbekanntes Werkzeug"},artifacts:{image:"Bild",video:"Video",file:"Datei",openNewWindow:"In neuem Fenster ffnen"},error:"Fehler beim Senden"}},ru:{translation:{login:"",toggleTheme:" ",homeSubtitle:"    JOE",email:"Email",password:"",register:"",welcomeTitle:"",welcomeMsg:`!  ,   .
    ?`,inputPlaceholder:"  ...",send:"",connecting:"...",connected:"",copy:"",working:"...",planProposed:"  ",planAction:" ",inputs:" ",outputs:" ",approvalRequired:" ",risk:"",action:"",deny:"",approve:"",tools:{file_write:" ",file_read:" ",ls:" ",web_search:"  ",shell_execute:" ",http_fetch:" URL",file_edit:" ",plan:"",summarize:"",unknown:" "},artifacts:{image:"",video:"",file:"",openNewWindow:"   "},error:" "}},es:{translation:{login:"Iniciar sesin",toggleTheme:"Cambiar tema",homeSubtitle:"Una entrada simple al mundo de JOE",email:"Correo electrnico",password:"Contrasea",register:"Registrarse",welcomeTitle:"",welcomeMsg:`Hola! Soy Joe, tu asistente inteligente.
Cmo puedo ayudarte hoy?`,inputPlaceholder:"Ingresa tu comando aqu...",send:"Enviar",connecting:"Conectando...",connected:"Conectado",copy:"Copiar texto",working:"Trabajando...",planProposed:" Plan Propuesto",planAction:"Voy a",inputs:"Entradas",outputs:"Salidas",approvalRequired:"Aprobacin requerida",risk:"Riesgo",action:"Accin",deny:"Rechazar",approve:"Aprobar",tools:{file_write:"Crear archivo",file_read:"Leer archivo",ls:"Listar archivos",web_search:"Bsqueda web",shell_execute:"Ejecutar comando",http_fetch:"Obtener URL",file_edit:"Editar archivo",plan:"Planificar y Analizar",summarize:"Resumir",unknown:"Herramienta desconocida"},artifacts:{image:"Imagen",video:"Video",file:"Archivo",openNewWindow:"Abrir en nueva ventana"},error:"Error al enviar"}}};xi.use(i6).init({resources:QTe,lng:localStorage.getItem("lang")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function JTe({children:n}){return localStorage.getItem("token")?L.jsx(L.Fragment,{children:n}):L.jsx(zW,{to:"/login",replace:!0})}X5.createRoot(document.getElementById("root")).render(L.jsx(ca.StrictMode,{children:L.jsx(WW,{children:L.jsx($W,{children:L.jsxs(yf,{path:"/",element:L.jsx(EY,{}),children:[L.jsx(yf,{index:!0,element:L.jsx(TY,{})}),L.jsx(yf,{path:"login",element:L.jsx(wY,{})}),L.jsx(yf,{path:"joe",element:L.jsx(JTe,{children:L.jsx(LTe,{})})})]})})})}));export{or as A,L as j,se as r};
