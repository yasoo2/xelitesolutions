import{r as a,j as t,A as J}from"./index-BuTz2Jar.js";function et({wsUrl:W}){var be,fe,me;const se=a.useRef(null),S=a.useRef(null),x=a.useRef(null),[g,ae]=a.useState({w:1280,h:800}),B=a.useRef({w:1280,h:800}),[R,C]=a.useState("connecting"),[ie,T]=a.useState(""),[b,D]=a.useState(""),[E,A]=a.useState([]),[ce,w]=a.useState(""),[f,X]=a.useState("console"),[le,de]=a.useState(!1),[ue,H]=a.useState([]),[pe,Z]=a.useState([]),[he,G]=a.useState(1),[m,ve]=a.useState(!1),[we,ke]=a.useState(!1),[K,Se]=a.useState(!1),[je,Re]=a.useState(0),[Ce,Ye]=a.useState('{"list":{"selector":"a[href^=\\"https\\"]:not([href*=\\"google.com\\"])","fields":{"text":{"selector":"","attr":""},"url":{"selector":"","attr":"href"}}}}'),[Je,V]=a.useState(null),[Q,Te]=a.useState(""),ye=a.useRef(null),[ee,M]=a.useState(null),[N,Ee]=a.useState(!0),[O,ge]=a.useState(""),[v,Me]=a.useState(""),[I,te]=a.useState(null),[z,Xe]=a.useState(""),[_,He]=a.useState(""),[xe,Ze]=a.useState(!0),[Ne,Ge]=a.useState(!0),[$e,Ke]=a.useState(!0),[Fe,Ve]=a.useState("أضرار التدخين"),P=a.useRef(0),q=a.useRef(null),Y=a.useRef(null),L=a.useRef(0);a.useEffect(()=>{B.current=g},[g]),a.useEffect(()=>{const e=()=>{ke(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),e(),()=>document.removeEventListener("fullscreenchange",e)},[]);function re(){try{const o=new URL(W).pathname.split("/").filter(Boolean);return o[o.length-1]}catch{return""}}function oe(e){try{const o=new URL(e);return o.protocol==="ws:"&&(o.protocol="http:"),o.protocol==="wss:"&&(o.protocol="https:"),o.toString()}catch{try{const o=new URL(W);return o.protocol==="ws:"&&(o.protocol="http:"),o.protocol==="wss:"&&(o.protocol="https:"),o.search="",o.hash="",o.pathname="/",new URL(e,o.toString()).toString()}catch{return e}}}function $(e){const o=e.trim();if(!o)return"";try{return new URL(o).toString()}catch{try{return new URL(`https://${o}`).toString()}catch{return o}}}async function u(e){var s;const o=re();if(!o)return;const h=["mouseMove","click","scroll","type","press","goBack","goForward","reload","goto","screenshot"];if(x.current&&x.current.readyState===WebSocket.OPEN&&e.every(p=>h.includes(p.type))){e.forEach(l=>{var y;(y=x.current)==null||y.send(JSON.stringify({type:"action",action:l}))});const p=e.map(l=>l.type).join(", ");if(w(p),setTimeout(()=>w(""),1200),N&&e.some(l=>l.type==="press"&&l.key==="Enter")&&setTimeout(()=>U(),2e3),N&&e.some(l=>l.type==="reload")&&setTimeout(()=>U(),1500),e.some(l=>l.type==="goto"||l.type==="reload")){if(te(null),xe){const l=[];v?l.push({type:"locate",selector:v}):z&&_&&l.push({type:"locate",role:z,roleName:_}),l.length&&setTimeout(()=>u(l),1e3)}N&&setTimeout(()=>U(),1500)}return}try{const p=localStorage.getItem("token"),y=await(await fetch(`${J}/tools/browser_run/execute`,{method:"POST",headers:{"Content-Type":"application/json",...p?{Authorization:`Bearer ${p}`}:{}},body:JSON.stringify({sessionId:o,actions:e})})).json();if(Array.isArray(y.artifacts)){const r=y.artifacts.map(n=>({name:n.name||n.filename||"download",href:n.href}));A(n=>[...r,...n].slice(0,5))}if(y!=null&&y.ok&&Array.isArray((s=y==null?void 0:y.output)==null?void 0:s.outputs)){const r=y.output.outputs.find(n=>n.type==="locate"&&n.boundingBox);if(r!=null&&r.boundingBox&&(te(r.boundingBox),e.some(c=>c.type==="locate")&&Ne)){const d=[...e].reverse().find(j=>j.type==="locate")||null,F=[];if(d!=null&&d.selector)F.push({type:"click",selector:d.selector});else if(d!=null&&d.role&&(d!=null&&d.roleName))F.push({type:"click",role:d.role,roleName:d.roleName});else{const j=r.boundingBox;if(j){const Pe=Math.round(j.x+j.width/2),qe=Math.round(j.y+j.height/2);F.push({type:"click",x:Pe,y:qe})}}F.length&&setTimeout(()=>u(F),250);const ze=!!(d!=null&&d.selector&&/(input|textarea)\[name=["']q["']\]/i.test(String(d.selector))),_e=!!(d!=null&&d.roleName&&String(d.roleName).includes("بحث"));$e&&!O.trim()&&(ze||_e)&&setTimeout(()=>{u([{type:"waitForSelector",selector:'input[name="q"], textarea[name="q"]',timeoutMs:8e3}]),setTimeout(()=>u([{type:"type",text:Fe,delay:30}]),200),setTimeout(()=>u([{type:"press",key:"Enter"}]),300)},400)}}const k=e.map(r=>r.type).join(", ");if(w(k),setTimeout(()=>w(""),1200),e.some(r=>r.type==="goto"||r.type==="reload")&&(te(null),xe)){const r=[];if(v)r.push({type:"locate",selector:v});else if(z&&_)r.push({type:"locate",role:z,roleName:_});else{const n=e.find(c=>c.type==="goto");try{const c=n!=null&&n.url?new URL(n.url).hostname:"";c&&/(^|\.)(google)\./i.test(c)&&r.push({type:"locate",selector:'input[name="q"], textarea[name="q"]'})}catch{}}r.length&&setTimeout(()=>u(r),1e3)}N&&e.some(r=>r.type==="press"&&r.key==="Enter")&&setTimeout(()=>{U()},2e3),N&&e.some(r=>r.type==="goto"||r.type==="reload")&&setTimeout(()=>{U()},1500)}catch{}}async function U(){const e=re();if(e)try{const o=localStorage.getItem("token"),h=JSON.parse(Ce),s=await(await fetch(`${J}/tools/browser_extract/execute`,{method:"POST",headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{}},body:JSON.stringify({sessionId:e,schema:h})})).json();s!=null&&s.ok&&(s!=null&&s.output)?V(s.output):V(null)}catch{V(null)}}async function Be(){var h,i;const e=re(),o=(i=(h=ye.current)==null?void 0:h.files)==null?void 0:i[0];if(!(!e||!o||!Q))try{const s=localStorage.getItem("token"),p=new FormData;p.append("file",o),p.append("sessionId",e);const y=await(await fetch(`${J}/files/upload`,{method:"POST",headers:{...s?{Authorization:`Bearer ${s}`}:{}},body:p})).json();if(y&&y._id){const k=`${J}/files/${y._id}/raw`;await u([{type:"uploadFile",selector:Q,fileUrl:k}])}}catch{}}a.useEffect(()=>{let e=!1;L.current=0,C("connecting"),T("");const o=()=>{q.current!=null&&(window.clearTimeout(q.current),q.current=null),Y.current!=null&&(window.clearTimeout(Y.current),Y.current=null)},h=()=>{if(!e){o();try{if(x.current){try{x.current.close()}catch{}x.current=null}const i=new WebSocket(W);x.current=i,C(L.current>0?"reconnecting":"connecting"),Y.current=window.setTimeout(()=>{try{i.readyState!==WebSocket.OPEN&&i.close()}catch{}},8e3),i.onopen=()=>{o(),!e&&(L.current=0,T(""),C("connected"))},i.onclose=s=>{if(o(),e)return;x.current=null;const p=8,l=L.current+1;if(L.current=l,l>p){C("error");const c=s!=null&&s.reason?` reason=${s.reason}`:"";T(`WebSocket closed (code=${(s==null?void 0:s.code)??"unknown"}${c})`);return}const y=Math.min(8e3,500*Math.pow(2,l-1)),k=Math.floor(Math.random()*250),r=y+k;C("reconnecting");const n=s!=null&&s.reason?` reason=${s.reason}`:"";T(`WebSocket closed (code=${(s==null?void 0:s.code)??"unknown"}${n}). retrying...`),q.current=window.setTimeout(h,r)},i.onerror=()=>{e||T("WebSocket error")},i.onmessage=s=>{var p,l,y,k;try{const r=JSON.parse(s.data);if(r.type==="stream_start"){const n={w:r.w,h:r.h};B.current=n,ae(n)}if(r.type==="state"){if((p=r.viewport)!=null&&p.width&&((l=r.viewport)!=null&&l.height)){const n={w:r.viewport.width,h:r.viewport.height};B.current=n,ae(n)}if(typeof r.url=="string"&&D(r.url),Array.isArray(r.downloads)){const n=r.downloads.map(c=>({name:c.filename||c.name||"download",href:oe(c.href)}));A(n.slice(-10).reverse())}Array.isArray(r.logs)&&H(r.logs.slice(-500)),Array.isArray(r.network)&&Z(r.network.slice(-500))}if(r.type==="url"&&typeof r.url=="string"&&D(r.url),r.type==="console"&&r.entry&&H(n=>[...n,r.entry].slice(-500)),r.type==="network"&&r.entry&&Z(n=>[...n,r.entry].slice(-500)),r.type==="download"&&r.download){const n=r.download,c={name:n.filename||n.name||"download",href:oe(n.href)};A(d=>[c,...d].slice(0,10))}if(r.type==="screenshot"&&r.href){const n=oe(String(r.href)),c=String(r.href).split("/").pop()||"screenshot.jpg";A(d=>[{name:c,href:n},...d].slice(0,10))}if(r.type==="cursor_move"&&M({x:r.x,y:r.y}),r.type==="cursor_click"){M({x:r.x,y:r.y});const n=document.createElement("div"),c=B.current;n.style.cssText=`
                position: absolute;
                left: ${r.x/c.w*100}%;
                top: ${r.y/c.h*100}%;
                width: 20px; height: 20px;
                background: rgba(255, 0, 0, 0.5);
                border-radius: 50%;
                transform: translate(-50%, -50%);
                pointer-events: none;
                z-index: 100;
                transition: opacity 0.5s;
              `,(k=(y=S.current)==null?void 0:y.parentElement)==null||k.appendChild(n),setTimeout(()=>n.remove(),500)}if(r.type==="action_start"){const n=r.action;let c=n.type;n.type==="goto"&&(c=`Opening ${new URL(n.url).hostname}...`),n.type==="type"&&(c="Typing..."),n.type==="click"&&(c="Clicking..."),n.type==="scroll"&&(c="Scrolling..."),n.type==="screenshot"&&(c="Capturing View..."),w(c)}if(r.type==="action_done"&&setTimeout(()=>w(""),500),r.type==="action_error"&&(w(String(r.error||"Action error")),setTimeout(()=>w(""),1500)),r.type==="frame"){if(K)return;const n=new Image;n.onload=()=>{const c=S.current;if(!c)return;const d=B.current;c.width=d.w,c.height=d.h,c.getContext("2d").drawImage(n,0,0,d.w,d.h)},n.src="data:image/jpeg;base64,"+r.jpegBase64}}catch{}}}catch(i){C("error"),T(String((i==null?void 0:i.message)||i))}}};return h(),()=>{var i;e=!0,o();try{(i=x.current)==null||i.close()}catch{}x.current=null}},[W,je]);function Ae(e){const o=S.current;if(!o)return;const h=o.getBoundingClientRect(),i=Math.round((e.clientX-h.left)*(g.w/h.width)),s=Math.round((e.clientY-h.top)*(g.h/h.height));u([{type:"click",x:i,y:s}]),M({x:i,y:s})}function Ie(e){e.preventDefault();const o=Math.round(e.deltaY);u([{type:"scroll",deltaY:o}])}function Le(e){const o=Date.now();if(o-(P.current||0)<60)return;P.current=o;const h=S.current;if(!h)return;const i=h.getBoundingClientRect(),s=Math.round((e.clientX-i.left)*(g.w/i.width)),p=Math.round((e.clientY-i.top)*(g.h/i.height));M({x:s,y:p}),u([{type:"mouseMove",x:s,y:p,steps:2}])}function Ue(e){var l;const o=S.current,h=(l=e.touches)==null?void 0:l[0];if(!o||!h)return;e.preventDefault();const i=o.getBoundingClientRect(),s=Math.round((h.clientX-i.left)*(g.w/i.width)),p=Math.round((h.clientY-i.top)*(g.h/i.height));u([{type:"click",x:s,y:p}]),M({x:s,y:p})}function We(e){var y;const o=Date.now();if(o-(P.current||0)<60)return;P.current=o;const h=S.current,i=(y=e.touches)==null?void 0:y[0];if(!h||!i)return;e.preventDefault();const s=h.getBoundingClientRect(),p=Math.round((i.clientX-s.left)*(g.w/s.width)),l=Math.round((i.clientY-s.top)*(g.h/s.height));M({x:p,y:l}),u([{type:"mouseMove",x:p,y:l,steps:2}])}function De(){O.trim()&&(u([{type:"type",text:O,delay:30}]),ge(""))}const[ne,Oe]=a.useState(!1);return t.jsxs("div",{ref:se,className:"agent-browser-stream",style:{display:"flex",flexDirection:"column",gap:8,position:m?"fixed":"relative",inset:m?12:void 0,zIndex:m?9999:void 0,background:m?"var(--bg-dark)":void 0,padding:m?12:void 0,borderRadius:m?16:void 0,border:m?"1px solid var(--border-color)":void 0,boxShadow:m?"0 12px 50px rgba(0,0,0,0.6)":void 0},children:[t.jsxs("div",{className:"agent-browser-header",style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"var(--bg-secondary)",borderRadius:12,border:"1px solid var(--border-color)",gap:8,flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:R==="connected"?"var(--accent-success)":R==="reconnecting"?"var(--accent-warning)":"var(--accent-danger)",boxShadow:R==="connected"?"0 0 8px var(--accent-success)":"none"}}),t.jsx("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)"},dir:"auto",children:R==="connected"?"متصل":R}),R==="error"?t.jsx("button",{onClick:()=>Re(e=>e+1),style:{height:28,padding:"0 10px",borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.04)",color:"var(--text-primary)",cursor:"pointer"},children:"إعادة اتصال"}):null]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flex:"1 1 420px",minWidth:260},children:[t.jsx("button",{onClick:()=>u([{type:"goBack"}]),title:"Back",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟵"}),t.jsx("button",{onClick:()=>u([{type:"goForward"}]),title:"Forward",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟶"}),t.jsx("button",{onClick:()=>u([{type:"reload"}]),title:"Reload",style:{width:32,height:32,borderRadius:8,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"⟳"}),t.jsx("input",{type:"text",value:b,onChange:e=>D(e.target.value),onKeyDown:e=>{if(e.key==="Enter"){const o=$(b);o&&u([{type:"goto",url:o,waitUntil:"domcontentloaded"}])}},placeholder:"https://example.com",dir:"auto",style:{flex:1,height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)",outline:"none",minWidth:200}}),t.jsx("button",{onClick:()=>{const e=$(b);e&&u([{type:"goto",url:e,waitUntil:"domcontentloaded"}])},style:{height:32,padding:"0 12px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(37, 99, 235, 0.12)",color:"var(--text-primary)",cursor:"pointer"},children:"فتح"})]}),t.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>{const e=$(b);e&&navigator.clipboard&&navigator.clipboard.writeText(e).catch(()=>{})},title:"Copy URL",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"نسخ"}),t.jsx("button",{onClick:()=>{const e=$(b);e&&window.open(e,"_blank","noreferrer")},title:"Open in new tab",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"فتح خارجي"}),t.jsx("button",{onClick:()=>u([{type:"screenshot",fullPage:!1,quality:60}]),title:"Screenshot",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"لقطة"}),t.jsx("button",{onClick:()=>{const e=E[0];e!=null&&e.href&&window.open(e.href,"_blank","noreferrer")},disabled:!((be=E[0])!=null&&be.href),title:"Open latest download",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:(fe=E[0])!=null&&fe.href?"pointer":"not-allowed",opacity:(me=E[0])!=null&&me.href?1:.5},children:"تنزيل"}),t.jsx("button",{onClick:()=>G(e=>Math.max(.5,Number((e-.1).toFixed(2)))),title:"Zoom out",style:{width:32,height:32,borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"−"}),t.jsxs("button",{onClick:()=>G(1),title:"Reset zoom",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:[Math.round(he*100),"%"]}),t.jsx("button",{onClick:()=>G(e=>Math.min(2,Number((e+.1).toFixed(2)))),title:"Zoom in",style:{width:32,height:32,borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"+"}),t.jsx("button",{onClick:async()=>{var e;try{document.fullscreenElement?await document.exitFullscreen():await((e=se.current)==null?void 0:e.requestFullscreen())}catch{}},title:"Fullscreen",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:we?"خروج":"ملء"}),t.jsx("button",{onClick:()=>Se(e=>!e),title:"Pause stream",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:K?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:K?"تشغيل":"إيقاف"}),t.jsx("button",{onClick:()=>ve(e=>!e),title:"Focus mode",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:m?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"تركيز"}),t.jsx("button",{onClick:()=>de(e=>!e),title:"Logs",style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:le?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"سجلات"}),t.jsx("button",{onClick:()=>Oe(!ne),style:{height:32,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:ne?"أقل":"أكثر"})]}),ie?t.jsx("div",{style:{width:"100%",fontSize:12,color:"var(--text-secondary)"},dir:"auto",children:ie}):null,ce?t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{padding:"4px 12px",background:"rgba(59, 130, 246, 0.15)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:999,color:"#60a5fa",fontSize:12},dir:"auto",children:ce})}):null]}),t.jsx("div",{style:{border:"1px solid var(--border-color)",borderRadius:14,overflow:"hidden",position:"relative",background:"#000",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:t.jsxs("div",{style:{transform:`scale(${he})`,transformOrigin:"top left",position:"relative"},children:[t.jsx("canvas",{ref:S,onClick:Ae,onWheel:Ie,onMouseMove:Le,onTouchStart:Ue,onTouchMove:We,style:{width:"100%",height:"auto",display:"block",cursor:"default",touchAction:"none"}}),I&&t.jsx("div",{style:{position:"absolute",left:`${I.x/g.w*100}%`,top:`${I.y/g.h*100}%`,width:`${I.width/g.w*100}%`,height:`${I.height/g.h*100}%`,border:"2px solid #eab308",boxShadow:"0 0 15px rgba(234, 179, 8, 0.4)",pointerEvents:"none",borderRadius:4,transition:"all 0.2s ease"}}),ee&&t.jsx("div",{style:{position:"absolute",left:`${ee.x/g.w*100}%`,top:`${ee.y/g.h*100}%`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:50,transition:"all 0.1s linear"},children:t.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#eab308",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})}),le?t.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:12,background:"var(--bg-secondary)",overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",gap:8,padding:10,borderBottom:"1px solid var(--border-color)",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{onClick:()=>X("console"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:f==="console"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Console"}),t.jsx("button",{onClick:()=>X("network"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:f==="network"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Network"}),t.jsx("button",{onClick:()=>X("downloads"),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:f==="downloads"?"rgba(37, 99, 235, 0.12)":"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Downloads"}),t.jsxs("div",{style:{marginInlineStart:"auto",display:"flex",gap:8,alignItems:"center"},children:[t.jsx("button",{onClick:()=>{f==="console"&&H([]),f==="network"&&Z([]),f==="downloads"&&A([])},style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"Clear"}),t.jsx("button",{onClick:()=>de(!1),style:{height:30,padding:"0 10px",borderRadius:10,border:"1px solid var(--border-color)",background:"rgba(255,255,255,0.03)",color:"var(--text-primary)",cursor:"pointer"},children:"إخفاء"})]})]}),t.jsxs("div",{style:{maxHeight:220,overflow:"auto",padding:10,fontSize:12,color:"var(--text-primary)",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},children:[f==="console"?ue.length?ue.slice(-200).map((e,o)=>t.jsxs("div",{style:{opacity:.95,padding:"2px 0"},dir:"auto",children:[t.jsx("span",{style:{color:e.level==="error"?"var(--accent-danger)":e.level==="warning"||e.level==="warn"?"var(--accent-warning)":"var(--text-secondary)"},children:new Date(e.ts).toLocaleTimeString()})," ",e.text]},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد رسائل"}):null,f==="network"?pe.length?pe.slice(-200).map((e,o)=>t.jsxs("div",{style:{opacity:.95,padding:"2px 0"},dir:"auto",children:[t.jsx("span",{style:{color:"var(--text-secondary)"},children:new Date(e.ts).toLocaleTimeString()})," ",t.jsx("span",{style:{color:e.stage==="response"&&typeof e.status=="number"&&e.status>=400?"var(--accent-danger)":"var(--text-primary)"},children:e.method})," ",e.stage==="response"?t.jsx("span",{style:{color:"var(--text-secondary)"},children:e.status??""}):t.jsx("span",{style:{color:"var(--text-secondary)"},children:"→"})," ",e.url]},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد طلبات"}):null,f==="downloads"?E.length?E.map((e,o)=>t.jsx("div",{style:{padding:"2px 0"},dir:"auto",children:t.jsx("a",{href:e.href,target:"_blank",rel:"noreferrer",style:{color:"#3b82f6",textDecoration:"none"},children:e.name})},o)):t.jsx("div",{style:{color:"var(--text-secondary)"},children:"لا توجد تنزيلات"}):null]})]}):null,ne&&t.jsxs("div",{style:{padding:12,border:"1px solid var(--border-color)",borderRadius:8,background:"var(--bg-secondary)",display:"flex",flexDirection:"column",gap:12},children:[t.jsxs("div",{className:"agent-browser-controls-row",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>u([{type:"goBack"}]),className:"btn",title:"Back",children:"⟵"}),t.jsx("button",{onClick:()=>u([{type:"goForward"}]),className:"btn",title:"Forward",children:"⟶"}),t.jsx("button",{onClick:()=>u([{type:"reload"}]),className:"btn",title:"Reload",children:"⟳"}),t.jsx("input",{type:"text",value:b,onChange:e=>D(e.target.value),onKeyDown:e=>{e.key==="Enter"&&b&&u([{type:"goto",url:$(b),waitUntil:"domcontentloaded"}])},placeholder:"https://example.com",style:{flex:1,minWidth:220,padding:"8px 10px",borderRadius:8,border:"1px solid var(--border-color)",background:"var(--bg-primary)",color:"var(--text-primary)"}}),t.jsx("button",{onClick:()=>b&&u([{type:"goto",url:$(b),waitUntil:"domcontentloaded"}]),className:"btn",children:"Go"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8},children:[t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",placeholder:"Upload Selector",value:Q,onChange:e=>Te(e.target.value),style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("input",{type:"file",ref:ye,style:{width:80}}),t.jsx("button",{onClick:Be,className:"btn",children:"Up"})]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",value:O,onChange:e=>ge(e.target.value),placeholder:"Type text...",style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("button",{onClick:De,className:"btn",children:"Type"}),t.jsx("button",{onClick:()=>u([{type:"press",key:"Enter"}]),className:"btn",children:"Ent"})]}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("input",{type:"text",value:v,onChange:e=>Me(e.target.value),placeholder:"CSS Selector",style:{flex:1,padding:4,borderRadius:4,border:"1px solid var(--border-color)"}}),t.jsx("button",{onClick:()=>v&&u([{type:"locate",selector:v}]),className:"btn",children:"Loc"}),t.jsx("button",{onClick:()=>v&&u([{type:"click",selector:v}]),className:"btn",children:"Clk"})]})]}),t.jsxs("div",{style:{fontSize:11,color:"var(--text-secondary)"},children:["DevTools: ",t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:N,onChange:e=>Ee(e.target.checked)})," Auto Extract"]})]})]})]})}export{et as default};
